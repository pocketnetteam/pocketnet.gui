(function(o){function e(e){var t=e[0];var r=e[1];var n,i,s=0,a=[];for(;s<t.length;s++){i=t[s];if(Object.prototype.hasOwnProperty.call(u,i)&&u[i]){a.push(u[i][0])}u[i]=0}for(n in r){if(Object.prototype.hasOwnProperty.call(r,n)){o[n]=r[n]}}if(l)l(e);while(a.length){a.shift()()}}var r={};var u={7:0};function c(e){return h.p+""+({}[e]||e)+".chunk.js"}function h(e){if(r[e]){return r[e].exports}var t=r[e]={i:e,l:false,exports:{}};o[e].call(t.exports,t,t.exports,h);t.l=true;return t.exports}h.e=function e(i){var t=[];var r=u[i];if(r!==0){if(r){t.push(r[2])}else{var n=new Promise(function(e,t){r=u[i]=[e,t]});t.push(r[2]=n);var s=document.createElement("script");var a;s.charset="utf-8";s.timeout=120;if(h.nc){s.setAttribute("nonce",h.nc)}s.src=c(i);var o=new Error;a=function(e){s.onerror=s.onload=null;clearTimeout(l);var t=u[i];if(t!==0){if(t){var r=e&&(e.type==="load"?"missing":e.type);var n=e&&e.target&&e.target.src;o.message="Loading chunk "+i+" failed.\n("+r+": "+n+")";o.name="ChunkLoadError";o.type=r;o.request=n;t[1](o)}u[i]=undefined}};var l=setTimeout(function(){a({type:"timeout",target:s})},12e4);s.onerror=s.onload=a;document.head.appendChild(s)}}return Promise.all(t)};h.m=o;h.c=r;h.d=function(e,t,r){if(!h.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};h.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};h.t=function(t,e){if(e&1)t=h(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);h.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var n in t)h.d(r,n,function(e){return t[e]}.bind(null,n));return r};h.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};h.d(e,"a",e);return e};h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};h.p="./peertube/";h.oe=function(e){console.error(e);throw e};var t=window["webpackJsonp"]=window["webpackJsonp"]||[];var n=t.push.bind(t);t.push=e;t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var l=n;return h(h.s=155)})([function(e,t,r){"use strict";
/**
 * @license
 * Video.js 7.11.8 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */function n(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var f=n(r(77));var d=n(r(78));var i=n(r(52));var p=n(r(53));r(80);r(82);var o=n(r(75));var v=n(r(83));var g=n(r(84));var a=n(r(85));var s=n(r(87));var l=n(r(92));var u=n(r(94));var c="7.11.8";var y={prefixed:true};var h=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var m=h[0];var _;for(var b=0;b<h.length;b++){if(h[b][1]in d){_=h[b];break}}if(_){for(var T=0;T<_.length;T++){y[m[T]]=_[T]}y.prefixed=_[0]!==m[0]}var E=[];var w=function e(o,l){return function(e,t,r){var n=l.levels[t];var i=new RegExp("^("+n+")$");if(e!=="log"){r.unshift(e.toUpperCase()+":")}r.unshift(o+":");if(E){E.push([].concat(r));var s=E.length-1e3;E.splice(0,s>0?s:0)}if(!f.console){return}var a=f.console[e];if(!a&&e==="debug"){a=f.console.info||f.console.log}if(!a||!n||!i.test(e)){return}a[Array.isArray(r)?"apply":"call"](f.console,r)}};function C(t){var i="info";var s;var r=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}s("log",i,r)};s=w(t,r);r.createLogger=function(e){return C(t+": "+e)};r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i};r.level=function(e){if(typeof e==="string"){if(!r.levels.hasOwnProperty(e)){throw new Error('"'+e+'" in not a valid log level')}i=e}return i};r.history=function(){return E?[].concat(E):[]};r.history.filter=function(t){return(E||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})};r.history.clear=function(){if(E){E.length=0}};r.history.disable=function(){if(E!==null){E.length=0;E=null}};r.history.enable=function(){if(E===null){E=[]}};r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return s("error",i,t)};r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return s("warn",i,t)};r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return s("debug",i,t)};return r}var k=C("VIDEOJS");var S=k.createLogger;var x=Object.prototype.toString;var P=function e(t){return A(t)?Object.keys(t):[]};function O(t,r){P(t).forEach(function(e){return r(t[e],e)})}function I(r,n,e){if(e===void 0){e=0}return P(r).reduce(function(e,t){return n(e,r[t],t)},e)}function j(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++){t[n-1]=arguments[n]}if(Object.assign){return i.apply(void 0,[r].concat(t))}t.forEach(function(e){if(!e){return}O(e,function(e,t){r[t]=e})});return r}function A(e){return!!e&&typeof e==="object"}function M(e){return A(e)&&x.call(e)==="[object Object]"&&e.constructor===Object}function L(e,t){if(!e||!t){return""}if(typeof f.getComputedStyle==="function"){var r=f.getComputedStyle(e);return r?r.getPropertyValue(t)||r[t]:""}return""}var R=f.navigator&&f.navigator.userAgent||"";var N=/AppleWebKit\/([\d.]+)/i.exec(R);var D=N?parseFloat(N.pop()):null;var B=/iPod/i.test(R);var F=function(){var e=R.match(/OS (\d+)_/i);if(e&&e[1]){return e[1]}return null}();var H=/Android/i.test(R);var U=function(){var e=R.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null}var t=e[1]&&parseFloat(e[1]);var r=e[2]&&parseFloat(e[2]);if(t&&r){return parseFloat(e[1]+"."+e[2])}else if(t){return t}return null}();var V=H&&U<5&&D<537;var z=/Firefox/i.test(R);var K=/Edg/i.test(R);var W=!K&&(/Chrome/i.test(R)||/CriOS/i.test(R));var Y=function(){var e=R.match(/(Chrome|CriOS)\/(\d+)/);if(e&&e[2]){return parseFloat(e[2])}return null}();var q=function(){var e=/MSIE\s(\d+)\.\d/.exec(R);var t=e&&parseFloat(e[1]);if(!t&&/Trident\/7.0/i.test(R)&&/rv:11.0/.test(R)){t=11}return t}();var G=/Safari/i.test(R)&&!W&&!H&&!K;var $=/Windows/i.test(R);var X=Boolean(se()&&("ontouchstart"in f||f.navigator.maxTouchPoints||f.DocumentTouch&&f.document instanceof f.DocumentTouch));var Q=/iPad/i.test(R)||G&&X&&!/iPhone/i.test(R);var J=/iPhone/i.test(R)&&!Q;var Z=J||Q||B;var ee=(G||Z)&&!W;var te=Object.freeze({__proto__:null,IS_IPOD:B,IOS_VERSION:F,IS_ANDROID:H,ANDROID_VERSION:U,IS_NATIVE_ANDROID:V,IS_FIREFOX:z,IS_EDGE:K,IS_CHROME:W,CHROME_VERSION:Y,IE_VERSION:q,IS_SAFARI:G,IS_WINDOWS:$,TOUCH_ENABLED:X,IS_IPAD:Q,IS_IPHONE:J,IS_IOS:Z,IS_ANY_SAFARI:ee});function re(e){return typeof e==="string"&&Boolean(e.trim())}function ne(e){if(e.indexOf(" ")>=0){throw new Error("class has illegal whitespace characters")}}function ie(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function se(){return d===f.document}function ae(e){return A(e)&&e.nodeType===1}function oe(){try{return f.parent!==f.self}catch(e){return true}}function le(n){return function(e,t){if(!re(e)){return d[n](null)}if(re(t)){t=d.querySelector(t)}var r=ae(t)?t:d;return r[n]&&r[n](e)}}function ue(e,r,t,n){if(e===void 0){e="div"}if(r===void 0){r={}}if(t===void 0){t={}}var i=d.createElement(e);Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){k.warn("Setting attributes in the second argument of createEl()\n"+"has been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."));i.setAttribute(e,t)}else if(e==="textContent"){ce(i,t)}else if(i[e]!==t||e==="tabIndex"){i[e]=t}});Object.getOwnPropertyNames(t).forEach(function(e){i.setAttribute(e,t[e])});if(n){Oe(i,n)}return i}function ce(e,t){if(typeof e.textContent==="undefined"){e.innerText=t}else{e.textContent=t}return e}function he(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild)}else{t.appendChild(e)}}function fe(e,t){ne(t);if(e.classList){return e.classList.contains(t)}return ie(t).test(e.className)}function de(e,t){if(e.classList){e.classList.add(t)}else if(!fe(e,t)){e.className=(e.className+" "+t).trim()}return e}function pe(e,t){if(e.classList){e.classList.remove(t)}else{ne(t);e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")}return e}function ve(e,t,r){var n=fe(e,t);if(typeof r==="function"){r=r(e,t)}if(typeof r!=="boolean"){r=!n}if(r===n){return}if(r){de(e,t)}else{pe(e,t)}return e}function ge(r,n){Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];if(t===null||typeof t==="undefined"||t===false){r.removeAttribute(e)}else{r.setAttribute(e,t===true?"":t)}})}function ye(e){var t={};var r=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(e&&e.attributes&&e.attributes.length>0){var n=e.attributes;for(var i=n.length-1;i>=0;i--){var s=n[i].name;var a=n[i].value;if(typeof e[s]==="boolean"||r.indexOf(","+s+",")!==-1){a=a!==null?true:false}t[s]=a}}return t}function me(e,t){return e.getAttribute(t)}function _e(e,t,r){e.setAttribute(t,r)}function be(e,t){e.removeAttribute(t)}function Te(){d.body.focus();d.onselectstart=function(){return false}}function Ee(){d.onselectstart=function(){return true}}function we(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect();var r={};["bottom","height","left","right","top","width"].forEach(function(e){if(t[e]!==undefined){r[e]=t[e]}});if(!r.height){r.height=parseFloat(L(e,"height"))}if(!r.width){r.width=parseFloat(L(e,"width"))}return r}}function Ce(e){if(!e||e&&!e.offsetParent){return{left:0,top:0,width:0,height:0}}var t=e.offsetWidth;var r=e.offsetHeight;var n=0;var i=0;while(e.offsetParent&&e!==d[y.fullscreenElement]){n+=e.offsetLeft;i+=e.offsetTop;e=e.offsetParent}return{left:n,top:i,width:t,height:r}}function ke(e,t){var r={x:0,y:0};if(Z){var n=e;while(n&&n.nodeName.toLowerCase()!=="html"){var i=L(n,"transform");if(/^matrix/.test(i)){var s=i.slice(7,-1).split(/,\s/).map(Number);r.x+=s[4];r.y+=s[5]}else if(/^matrix3d/.test(i)){var a=i.slice(9,-1).split(/,\s/).map(Number);r.x+=a[12];r.y+=a[13]}n=n.parentNode}}var o={};var l=Ce(t.target);var u=Ce(e);var c=u.width;var h=u.height;var f=t.offsetY-(u.top-l.top);var d=t.offsetX-(u.left-l.left);if(t.changedTouches){d=t.changedTouches[0].pageX-u.left;f=t.changedTouches[0].pageY+u.top;if(Z){d-=r.x;f-=r.y}}o.y=1-Math.max(0,Math.min(1,f/h));o.x=Math.max(0,Math.min(1,d/c));return o}function Se(e){return A(e)&&e.nodeType===3}function xe(e){while(e.firstChild){e.removeChild(e.firstChild)}return e}function Pe(e){if(typeof e==="function"){e=e()}return(Array.isArray(e)?e:[e]).map(function(e){if(typeof e==="function"){e=e()}if(ae(e)||Se(e)){return e}if(typeof e==="string"&&/\S/.test(e)){return d.createTextNode(e)}}).filter(function(e){return e})}function Oe(t,e){Pe(e).forEach(function(e){return t.appendChild(e)});return t}function Ie(e,t){return Oe(xe(e),t)}function je(e){if(e.button===undefined&&e.buttons===undefined){return true}if(e.button===0&&e.buttons===undefined){return true}if(e.type==="mouseup"&&e.button===0&&e.buttons===0){return true}if(e.button!==0||e.buttons!==1){return false}return true}var Ae=le("querySelector");var Me=le("querySelectorAll");var Le=Object.freeze({__proto__:null,isReal:se,isEl:ae,isInFrame:oe,createEl:ue,textContent:ce,prependTo:he,hasClass:fe,addClass:de,removeClass:pe,toggleClass:ve,setAttributes:ge,getAttributes:ye,getAttribute:me,setAttribute:_e,removeAttribute:be,blockTextSelection:Te,unblockTextSelection:Ee,getBoundingClientRect:we,findPosition:Ce,getPointerPosition:ke,isTextNode:Se,emptyEl:xe,normalizeContent:Pe,appendContent:Oe,insertContent:Ie,isSingleLeftClick:je,$:Ae,$$:Me});var Re=false;var Ne;var De=function e(){if(!se()||Ne.options.autoSetup===false){return}var t=Array.prototype.slice.call(d.getElementsByTagName("video"));var r=Array.prototype.slice.call(d.getElementsByTagName("audio"));var n=Array.prototype.slice.call(d.getElementsByTagName("video-js"));var i=t.concat(r,n);if(i&&i.length>0){for(var s=0,a=i.length;s<a;s++){var o=i[s];if(o&&o.getAttribute){if(o.player===undefined){var l=o.getAttribute("data-setup");if(l!==null){Ne(o)}}}else{Be(1);break}}}else if(!Re){Be(1)}};function Be(e,t){if(t){Ne=t}f.setTimeout(De,e)}function Fe(){Re=true;f.removeEventListener("load",Fe)}if(se()){if(d.readyState==="complete"){Fe()}else{f.addEventListener("load",Fe)}}var He=function e(t){var r=d.createElement("style");r.className=t;return r};var Ue=function e(t,r){if(t.styleSheet){t.styleSheet.cssText=r}else{t.textContent=r}};var Ve=3;var ze=Ve;function Ke(){return ze++}var We;if(!f.WeakMap){We=function(){function e(){this.vdata="vdata"+Math.floor(f.performance&&f.performance.now()||Date.now());this.data={}}var t=e.prototype;t.set=function e(t,r){var n=t[this.vdata]||Ke();if(!t[this.vdata]){t[this.vdata]=n}this.data[n]=r;return this};t.get=function e(t){var r=t[this.vdata];if(r){return this.data[r]}k("We have no data for this element",t);return undefined};t.has=function e(t){var r=t[this.vdata];return r in this.data};t["delete"]=function e(t){var r=t[this.vdata];if(r){delete this.data[r];delete t[this.vdata]}};return e}()}var Ye=f.WeakMap?new WeakMap:new We;function qe(e,t){if(!Ye.has(e)){return}var r=Ye.get(e);if(r.handlers[t].length===0){delete r.handlers[t];if(e.removeEventListener){e.removeEventListener(t,r.dispatcher,false)}else if(e.detachEvent){e.detachEvent("on"+t,r.dispatcher)}}if(Object.getOwnPropertyNames(r.handlers).length<=0){delete r.handlers;delete r.dispatcher;delete r.disabled}if(Object.getOwnPropertyNames(r).length===0){Ye["delete"](e)}}function Ge(t,r,e,n){e.forEach(function(e){t(r,e,n)})}function $e(e){if(e.fixed_){return e}function t(){return true}function r(){return false}if(!e||!e.isPropagationStopped){var n=e||f.event;e={};for(var i in n){if(i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"){if(!(i==="returnValue"&&n.preventDefault)){e[i]=n[i]}}}if(!e.target){e.target=e.srcElement||d}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}e.preventDefault=function(){if(n.preventDefault){n.preventDefault()}e.returnValue=false;n.returnValue=false;e.defaultPrevented=true};e.defaultPrevented=false;e.stopPropagation=function(){if(n.stopPropagation){n.stopPropagation()}e.cancelBubble=true;n.cancelBubble=true;e.isPropagationStopped=t};e.isPropagationStopped=r;e.stopImmediatePropagation=function(){if(n.stopImmediatePropagation){n.stopImmediatePropagation()}e.isImmediatePropagationStopped=t;e.stopPropagation()};e.isImmediatePropagationStopped=r;if(e.clientX!==null&&e.clientX!==undefined){var s=d.documentElement;var a=d.body;e.pageX=e.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0);e.pageY=e.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode;if(e.button!==null&&e.button!==undefined){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0}}e.fixed_=true;return e}var Xe;var Qe=function e(){if(typeof Xe!=="boolean"){Xe=false;try{var t=Object.defineProperty({},"passive",{get:function e(){Xe=true}});f.addEventListener("test",null,t);f.removeEventListener("test",null,t)}catch(e){}}return Xe};var Je=["touchstart","touchmove"];function Ze(a,e,t){if(Array.isArray(e)){return Ge(Ze,a,e,t)}if(!Ye.has(a)){Ye.set(a,{})}var o=Ye.get(a);if(!o.handlers){o.handlers={}}if(!o.handlers[e]){o.handlers[e]=[]}if(!t.guid){t.guid=Ke()}o.handlers[e].push(t);if(!o.dispatcher){o.disabled=false;o.dispatcher=function(e,t){if(o.disabled){return}e=$e(e);var r=o.handlers[e.type];if(r){var n=r.slice(0);for(var i=0,s=n.length;i<s;i++){if(e.isImmediatePropagationStopped()){break}else{try{n[i].call(a,e,t)}catch(e){k.error(e)}}}}}}if(o.handlers[e].length===1){if(a.addEventListener){var r=false;if(Qe()&&Je.indexOf(e)>-1){r={passive:true}}a.addEventListener(e,o.dispatcher,r)}else if(a.attachEvent){a.attachEvent("on"+e,o.dispatcher)}}}function et(e,t,r){if(!Ye.has(e)){return}var n=Ye.get(e);if(!n.handlers){return}if(Array.isArray(t)){return Ge(et,e,t,r)}var i=function e(t,r){n.handlers[r]=[];qe(t,r)};if(t===undefined){for(var s in n.handlers){if(Object.prototype.hasOwnProperty.call(n.handlers||{},s)){i(e,s)}}return}var a=n.handlers[t];if(!a){return}if(!r){i(e,t);return}if(r.guid){for(var o=0;o<a.length;o++){if(a[o].guid===r.guid){a.splice(o--,1)}}}qe(e,t)}function tt(e,t,r){var n=Ye.has(e)?Ye.get(e):{};var i=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e}}else if(!t.target){t.target=e}t=$e(t);if(n.dispatcher){n.dispatcher.call(e,t,r)}if(i&&!t.isPropagationStopped()&&t.bubbles===true){tt.call(null,i,t,r)}else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){if(!Ye.has(t.target)){Ye.set(t.target,{})}var s=Ye.get(t.target);if(t.target[t.type]){s.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]()}s.disabled=false}}return!t.defaultPrevented}function rt(t,r,n){if(Array.isArray(r)){return Ge(rt,t,r,n)}var e=function e(){et(t,r,e);n.apply(this,arguments)};e.guid=n.guid=n.guid||Ke();Ze(t,r,e)}function nt(t,r,n){var e=function e(){et(t,r,e);n.apply(this,arguments)};e.guid=n.guid=n.guid||Ke();Ze(t,r,e)}var it=Object.freeze({__proto__:null,fixEvent:$e,on:Ze,off:et,trigger:tt,one:rt,any:nt});var st=30;var at=function e(t,r,n){if(!r.guid){r.guid=Ke()}var i=r.bind(t);i.guid=n?n+"_"+r.guid:r.guid;return i};var ot=function e(r,n){var i=f.performance.now();var t=function e(){var t=f.performance.now();if(t-i>=n){r.apply(void 0,arguments);i=t}};return t};var lt=function e(i,s,a,o){if(o===void 0){o=f}var l;var t=function e(){o.clearTimeout(l);l=null};var r=function e(){var t=this;var r=arguments;var n=function e(){l=null;n=null;if(!a){i.apply(t,r)}};if(!l&&a){i.apply(t,r)}o.clearTimeout(l);l=o.setTimeout(n,s)};r.cancel=t;return r};var ut=function e(){};ut.prototype.allowedEvents_={};ut.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};Ze(this,e,t);this.addEventListener=r};ut.prototype.addEventListener=ut.prototype.on;ut.prototype.off=function(e,t){et(this,e,t)};ut.prototype.removeEventListener=ut.prototype.off;ut.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};rt(this,e,t);this.addEventListener=r};ut.prototype.any=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};nt(this,e,t);this.addEventListener=r};ut.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t}}e=$e(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e)}tt(this,e)};ut.prototype.dispatchEvent=ut.prototype.trigger;var ct;ut.prototype.queueTrigger=function(e){var t=this;if(!ct){ct=new Map}var r=e.type||e;var n=ct.get(this);if(!n){n=new Map;ct.set(this,n)}var i=n.get(r);n["delete"](r);f.clearTimeout(i);var s=f.setTimeout(function(){if(n.size===0){n=null;ct["delete"](t)}t.trigger(e)},0);n.set(r,s)};var ht=function e(t){if(typeof t.name==="function"){return t.name()}if(typeof t.name==="string"){return t.name}if(t.name_){return t.name_}if(t.constructor&&t.constructor.name){return t.constructor.name}return typeof t};var ft=function e(t){return t instanceof ut||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return typeof t[e]==="function"})};var dt=function e(t,r){if(ft(t)){r()}else{if(!t.eventedCallbacks){t.eventedCallbacks=[]}t.eventedCallbacks.push(r)}};var pt=function e(t){return typeof t==="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length};var vt=function e(t,r,n){if(!t||!t.nodeName&&!ft(t)){throw new Error("Invalid target for "+ht(r)+"#"+n+"; must be a DOM node or evented object.")}};var gt=function e(t,r,n){if(!pt(t)){throw new Error("Invalid event type for "+ht(r)+"#"+n+"; must be a non-empty string or array.")}};var yt=function e(t,r,n){if(typeof t!=="function"){throw new Error("Invalid listener for "+ht(r)+"#"+n+"; must be a function.")}};var mt=function e(t,r,n){var i=r.length<3||r[0]===t||r[0]===t.eventBusEl_;var s;var a;var o;if(i){s=t.eventBusEl_;if(r.length>=3){r.shift()}a=r[0];o=r[1]}else{s=r[0];a=r[1];o=r[2]}vt(s,t,n);gt(a,t,n);yt(o,t,n);o=at(t,o);return{isTargetingSelf:i,target:s,type:a,listener:o}};var _t=function e(t,r,n,i){vt(t,t,r);if(t.nodeName){it[r](t,n,i)}else{t[r](n,i)}};var bt={on:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}var s=mt(this,n,"on"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;_t(o,"on",l,u);if(!a){var c=function e(){return t.off(o,l,u)};c.guid=u.guid;var h=function e(){return t.off("dispose",c)};h.guid=u.guid;_t(this,"on","dispose",c);_t(o,"on","dispose",h)}},one:function e(){var i=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var s=mt(this,r,"one"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a){_t(o,"one",l,u)}else{var c=function e(){i.off(o,l,e);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}u.apply(null,r)};c.guid=u.guid;_t(o,"one",l,c)}},any:function e(){var i=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var s=mt(this,r,"any"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a){_t(o,"any",l,u)}else{var c=function e(){i.off(o,l,e);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}u.apply(null,r)};c.guid=u.guid;_t(o,"any",l,c)}},off:function e(t,r,n){if(!t||pt(t)){et(this.eventBusEl_,t,r)}else{var i=t;var s=r;vt(i,this,"off");gt(s,this,"off");yt(n,this,"off");n=at(this,n);this.off("dispose",n);if(i.nodeName){et(i,s,n);et(i,"dispose",n)}else if(ft(i)){i.off(s,n);i.off("dispose",n)}}},trigger:function e(t,r){vt(this.eventBusEl_,this,"trigger");var n=t&&typeof t!=="string"?t.type:t;if(!pt(n)){var i="Invalid event type for "+ht(this)+"#trigger; "+"must be a non-empty string or object with a type key that has a non-empty value.";if(t){(this.log||k).error(i)}else{throw new Error(i)}}return tt(this.eventBusEl_,t,r)}};function Tt(e,t){if(t===void 0){t={}}var r=t,n=r.eventBusKey;if(n){if(!e[n].nodeName){throw new Error('The eventBusKey "'+n+'" does not refer to an element.')}e.eventBusEl_=e[n]}else{e.eventBusEl_=ue("span",{className:"vjs-event-bus"})}j(e,bt);if(e.eventedCallbacks){e.eventedCallbacks.forEach(function(e){e()})}e.on("dispose",function(){e.off();f.setTimeout(function(){e.eventBusEl_=null},0)});return e}var Et={state:{},setState:function e(t){var r=this;if(typeof t==="function"){t=t()}var n;O(t,function(e,t){if(r.state[t]!==e){n=n||{};n[t]={from:r.state[t],to:e}}r.state[t]=e});if(n&&ft(this)){this.trigger({changes:n,type:"statechanged"})}return n}};function wt(e,t){j(e,Et);e.state=j({},e.state,t);if(typeof e.handleStateChanged==="function"&&ft(e)){e.on("statechanged",e.handleStateChanged)}return e}var Ct=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,function(e){return e.toLowerCase()})};var kt=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,function(e){return e.toUpperCase()})};var St=function e(t,r){return kt(t)===kt(r)};function xt(){var r={};for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}t.forEach(function(e){if(!e){return}O(e,function(e,t){if(!M(e)){r[t]=e;return}if(!M(r[t])){r[t]={}}r[t]=xt(r[t],e)})});return r}var Pt=function(){function e(){this.map_={}}var t=e.prototype;t.has=function e(t){return t in this.map_};t["delete"]=function e(t){var r=this.has(t);delete this.map_[t];return r};t.set=function e(t,r){this.map_[t]=r;return this};t.forEach=function e(t,r){for(var n in this.map_){t.call(r,this.map_[n],n,this)}};return e}();var Ot=f.Map?f.Map:Pt;var It=function(){function e(){this.set_={}}var t=e.prototype;t.has=function e(t){return t in this.set_};t["delete"]=function e(t){var r=this.has(t);delete this.set_[t];return r};t.add=function e(t){this.set_[t]=1;return this};t.forEach=function e(t,r){for(var n in this.set_){t.call(r,n,n,this)}};return e}();var jt=f.Set?f.Set:It;var At=function(){function c(e,t,r){if(!e&&this.play){this.player_=e=this}else{this.player_=e}this.isDisposed_=false;this.parentComponent_=null;this.options_=xt({},this.options_);t=this.options_=xt(this.options_,t);this.id_=t.id||t.el&&t.el.id;if(!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+Ke()}this.name_=t.name||null;if(t.el){this.el_=t.el}else if(t.createEl!==false){this.el_=this.createEl()}if(t.evented!==false){Tt(this,{eventBusKey:this.el_?"el_":null});this.handleLanguagechange=this.handleLanguagechange.bind(this);this.on(this.player_,"languagechange",this.handleLanguagechange)}wt(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new jt;this.setIntervalIds_=new jt;this.rafIds_=new jt;this.namedRafs_=new Ot;this.clearingTimersOnDispose_=false;if(t.initChildren!==false){this.initChildren()}this.ready(r);if(t.reportTouchActivity!==false){this.enableTouchActivity()}}var e=c.prototype;e.dispose=function e(){if(this.isDisposed_){return}if(this.readyQueue_){this.readyQueue_.length=0}this.trigger({type:"dispose",bubbles:false});this.isDisposed_=true;if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}if(Ye.has(this.el_)){Ye["delete"](this.el_)}this.el_=null}this.player_=null};e.isDisposed=function e(){return Boolean(this.isDisposed_)};e.player=function e(){return this.player_};e.options=function e(t){if(!t){return this.options_}this.options_=xt(this.options_,t);return this.options_};e.el=function e(){return this.el_};e.createEl=function e(t,r,n){return ue(t,r,n)};e.localize=function e(t,i,r){if(r===void 0){r=t}var n=this.player_.language&&this.player_.language();var s=this.player_.languages&&this.player_.languages();var a=s&&s[n];var o=n&&n.split("-")[0];var l=s&&s[o];var u=r;if(a&&a[t]){u=a[t]}else if(l&&l[t]){u=l[t]}if(i){u=u.replace(/\{(\d+)\}/g,function(e,t){var r=i[t-1];var n=r;if(typeof r==="undefined"){n=e}return n})}return u};e.handleLanguagechange=function e(){};e.contentEl=function e(){return this.contentEl_||this.el_};e.id=function e(){return this.id_};e.name=function e(){return this.name_};e.children=function e(){return this.children_};e.getChildById=function e(t){return this.childIndex_[t]};e.getChild=function e(t){if(!t){return}return this.childNameIndex_[t]};e.getDescendant=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r=r.reduce(function(e,t){return e.concat(t)},[]);var i=this;for(var s=0;s<r.length;s++){i=i.getChild(r[s]);if(!i||!i.getChild){return}}return i};e.addChild=function e(t,r,n){if(r===void 0){r={}}if(n===void 0){n=this.children_.length}var i;var s;if(typeof t==="string"){s=kt(t);var a=r.componentClass||s;r.name=s;var o=c.getComponent(a);if(!o){throw new Error("Component "+a+" does not exist")}if(typeof o!=="function"){return null}i=new o(this.player_||this,r)}else{i=t}if(i.parentComponent_){i.parentComponent_.removeChild(i)}this.children_.splice(n,0,i);i.parentComponent_=this;if(typeof i.id==="function"){this.childIndex_[i.id()]=i}s=s||i.name&&kt(i.name());if(s){this.childNameIndex_[s]=i;this.childNameIndex_[Ct(s)]=i}if(typeof i.el==="function"&&i.el()){var l=null;if(this.children_[n+1]){if(this.children_[n+1].el_){l=this.children_[n+1].el_}else if(ae(this.children_[n+1])){l=this.children_[n+1]}}this.contentEl().insertBefore(i.el(),l)}return i};e.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}if(!t||!this.children_){return}var r=false;for(var n=this.children_.length-1;n>=0;n--){if(this.children_[n]===t){r=true;this.children_.splice(n,1);break}}if(!r){return}t.parentComponent_=null;this.childIndex_[t.id()]=null;this.childNameIndex_[kt(t.name())]=null;this.childNameIndex_[Ct(t.name())]=null;var i=t.el();if(i&&i.parentNode===this.contentEl()){this.contentEl().removeChild(t.el())}};e.initChildren=function e(){var s=this;var n=this.options_.children;if(n){var a=this.options_;var t=function e(t){var r=t.name;var n=t.opts;if(a[r]!==undefined){n=a[r]}if(n===false){return}if(n===true){n={}}n.playerOptions=s.options_.playerOptions;var i=s.addChild(r,n);if(i){s[r]=i}};var r;var i=c.getComponent("Tech");if(Array.isArray(n)){r=n}else{r=Object.keys(n)}r.concat(Object.keys(this.options_).filter(function(t){return!r.some(function(e){if(typeof e==="string"){return t===e}return t===e.name})})).map(function(e){var t;var r;if(typeof e==="string"){t=e;r=n[t]||s.options_[t]||{}}else{t=e.name;r=e}return{name:t,opts:r}}).filter(function(e){var t=c.getComponent(e.opts.componentClass||kt(e.name));return t&&!i.isTech(t)}).forEach(t)}};e.buildCSSClass=function e(){return""};e.ready=function e(t,r){if(r===void 0){r=false}if(!t){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);return}if(r){t.call(this)}else{this.setTimeout(t,1)}};e.triggerReady=function e(){this.isReady_=true;this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach(function(e){e.call(this)},this)}this.trigger("ready")},1)};e.$=function e(t,r){return Ae(t,r||this.contentEl())};e.$$=function e(t,r){return Me(t,r||this.contentEl())};e.hasClass=function e(t){return fe(this.el_,t)};e.addClass=function e(t){de(this.el_,t)};e.removeClass=function e(t){pe(this.el_,t)};e.toggleClass=function e(t,r){ve(this.el_,t,r)};e.show=function e(){this.removeClass("vjs-hidden")};e.hide=function e(){this.addClass("vjs-hidden")};e.lockShowing=function e(){this.addClass("vjs-lock-showing")};e.unlockShowing=function e(){this.removeClass("vjs-lock-showing")};e.getAttribute=function e(t){return me(this.el_,t)};e.setAttribute=function e(t,r){_e(this.el_,t,r)};e.removeAttribute=function e(t){be(this.el_,t)};e.width=function e(t,r){return this.dimension("width",t,r)};e.height=function e(t,r){return this.dimension("height",t,r)};e.dimensions=function e(t,r){this.width(t,true);this.height(r)};e.dimension=function e(t,r,n){if(r!==undefined){if(r===null||r!==r){r=0}if((""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1){this.el_.style[t]=r}else if(r==="auto"){this.el_.style[t]=""}else{this.el_.style[t]=r+"px"}if(!n){this.trigger("componentresize")}return}if(!this.el_){return 0}var i=this.el_.style[t];var s=i.indexOf("px");if(s!==-1){return parseInt(i.slice(0,s),10)}return parseInt(this.el_["offset"+kt(t)],10)};e.currentDimension=function e(t){var r=0;if(t!=="width"&&t!=="height"){throw new Error("currentDimension only accepts width or height value")}r=L(this.el_,t);r=parseFloat(r);if(r===0||isNaN(r)){var n="offset"+kt(t);r=this.el_[n]}return r};e.currentDimensions=function e(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};e.currentWidth=function e(){return this.currentDimension("width")};e.currentHeight=function e(){return this.currentDimension("height")};e.focus=function e(){this.el_.focus()};e.blur=function e(){this.el_.blur()};e.handleKeyDown=function e(t){if(this.player_){t.stopPropagation();this.player_.handleKeyDown(t)}};e.handleKeyPress=function e(t){this.handleKeyDown(t)};e.emitTapEvents=function e(){var r=0;var i=null;var s=10;var n=200;var a;this.on("touchstart",function(e){if(e.touches.length===1){i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};r=f.performance.now();a=true}});this.on("touchmove",function(e){if(e.touches.length>1){a=false}else if(i){var t=e.touches[0].pageX-i.pageX;var r=e.touches[0].pageY-i.pageY;var n=Math.sqrt(t*t+r*r);if(n>s){a=false}}});var t=function e(){a=false};this.on("touchleave",t);this.on("touchcancel",t);this.on("touchend",function(e){i=null;if(a===true){var t=f.performance.now()-r;if(t<n){e.preventDefault();this.trigger("tap")}}})};e.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return}var r=at(this.player(),this.player().reportUserActivity);var n;this.on("touchstart",function(){r();this.clearInterval(n);n=this.setInterval(r,250)});var t=function e(t){r();this.clearInterval(n)};this.on("touchmove",r);this.on("touchend",t);this.on("touchcancel",t)};e.setTimeout=function e(t,r){var n=this;var i;t=at(this,t);this.clearTimersOnDispose_();i=f.setTimeout(function(){if(n.setTimeoutIds_.has(i)){n.setTimeoutIds_["delete"](i)}t()},r);this.setTimeoutIds_.add(i);return i};e.clearTimeout=function e(t){if(this.setTimeoutIds_.has(t)){this.setTimeoutIds_["delete"](t);f.clearTimeout(t)}return t};e.setInterval=function e(t,r){t=at(this,t);this.clearTimersOnDispose_();var n=f.setInterval(t,r);this.setIntervalIds_.add(n);return n};e.clearInterval=function e(t){if(this.setIntervalIds_.has(t)){this.setIntervalIds_["delete"](t);f.clearInterval(t)}return t};e.requestAnimationFrame=function e(t){var r=this;if(!this.supportsRaf_){return this.setTimeout(t,1e3/60)}this.clearTimersOnDispose_();var n;t=at(this,t);n=f.requestAnimationFrame(function(){if(r.rafIds_.has(n)){r.rafIds_["delete"](n)}t()});this.rafIds_.add(n);return n};e.requestNamedAnimationFrame=function e(t,r){var n=this;if(this.namedRafs_.has(t)){return}this.clearTimersOnDispose_();r=at(this,r);var i=this.requestAnimationFrame(function(){r();if(n.namedRafs_.has(t)){n.namedRafs_["delete"](t)}});this.namedRafs_.set(t,i);return t};e.cancelNamedAnimationFrame=function e(t){if(!this.namedRafs_.has(t)){return}this.cancelAnimationFrame(this.namedRafs_.get(t));this.namedRafs_["delete"](t)};e.cancelAnimationFrame=function e(t){if(!this.supportsRaf_){return this.clearTimeout(t)}if(this.rafIds_.has(t)){this.rafIds_["delete"](t);f.cancelAnimationFrame(t)}return t};e.clearTimersOnDispose_=function e(){var n=this;if(this.clearingTimersOnDispose_){return}this.clearingTimersOnDispose_=true;this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],r=e[1];n[t].forEach(function(e,t){return n[r](t)})});n.clearingTimersOnDispose_=false})};c.registerComponent=function e(t,r){if(typeof t!=="string"||!t){throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.')}var n=c.getComponent("Tech");var i=n&&n.isTech(r);var s=c===r||c.prototype.isPrototypeOf(r.prototype);if(i||!s){var a;if(i){a="techs must be registered using Tech.registerTech()"}else{a="must be a Component subclass"}throw new Error('Illegal component, "'+t+'"; '+a+".")}t=kt(t);if(!c.components_){c.components_={}}var o=c.getComponent("Player");if(t==="Player"&&o&&o.players){var l=o.players;var u=Object.keys(l);if(l&&u.length>0&&u.map(function(e){return l[e]}).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}c.components_[t]=r;c.components_[Ct(t)]=r;return r};c.getComponent=function e(t){if(!t||!c.components_){return}return c.components_[t]};return c}();At.prototype.supportsRaf_=typeof f.requestAnimationFrame==="function"&&typeof f.cancelAnimationFrame==="function";At.registerComponent("Component",At);function Mt(e,t,r){if(typeof t!=="number"||t<0||t>r){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}}function Lt(e,t,r,n){Mt(e,n,r.length-1);return r[n][t]}function Rt(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty")},end:function e(){throw new Error("This TimeRanges object is empty")}}}return{length:e.length,start:Lt.bind(null,"start",0,e),end:Lt.bind(null,"end",1,e)}}function Nt(e,t){if(Array.isArray(e)){return Rt(e)}else if(e===undefined||t===undefined){return Rt()}return Rt([[e,t]])}function Dt(e,t){var r=0;var n;var i;if(!t){return 0}if(!e||!e.length){e=Nt(0,0)}for(var s=0;s<e.length;s++){n=e.start(s);i=e.end(s);if(i>t){i=t}r+=i-n}return r/t}function Bt(e){if(e instanceof Bt){return e}if(typeof e==="number"){this.code=e}else if(typeof e==="string"){this.message=e}else if(A(e)){if(typeof e.code==="number"){this.code=e.code}j(this,e)}if(!this.message){this.message=Bt.defaultMessages[this.code]||""}}Bt.prototype.code=0;Bt.prototype.message="";Bt.prototype.status=null;Bt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Bt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ft=0;Ft<Bt.errorTypes.length;Ft++){Bt[Bt.errorTypes[Ft]]=Ft;Bt.prototype[Bt.errorTypes[Ft]]=Ft}function Ht(e){return e!==undefined&&e!==null&&typeof e.then==="function"}function Ut(e){if(Ht(e)){e.then(null,function(e){})}}var Vt=function e(n){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,r){if(n[t]){e[t]=n[t]}return e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t};var zt=function e(t){var r=t.$$("track");var n=Array.prototype.map.call(r,function(e){return e.track});var i=Array.prototype.map.call(r,function(e){var t=Vt(e.track);if(e.src){t.src=e.src}return t});return i.concat(Array.prototype.filter.call(t.textTracks(),function(e){return n.indexOf(e)===-1}).map(Vt))};var Kt=function e(t,r){t.forEach(function(e){var t=r.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach(function(e){return t.addCue(e)})}});return r.textTracks()};var Wt={textTracksToJson:zt,jsonToTextTracks:Kt,trackToJson_:Vt};var Yt="vjs-modal-dialog";var qt=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=false;r.closeable(!r.options_.uncloseable);r.content(r.options_.content);r.contentEl_=ue("div",{className:Yt+"-content"},{role:"document"});r.descEl_=ue("p",{className:Yt+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")});ce(r.descEl_,r.description());r.el_.appendChild(r.descEl_);r.el_.appendChild(r.contentEl_);return r}var t=e.prototype;t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};t.dispose=function e(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;n.prototype.dispose.call(this)};t.buildCSSClass=function e(){return Yt+" vjs-hidden "+n.prototype.buildCSSClass.call(this)};t.label=function e(){return this.localize(this.options_.label||"Modal Window")};t.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return t};t.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!t.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){t.pause()}this.on("keydown",this.handleKeyDown);this.hadControls_=t.controls();t.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};t.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]()}return this.opened_};t.close=function e(){if(!this.opened_){return}var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){t.play()}this.off("keydown",this.handleKeyDown);if(this.hadControls_){t.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};t.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var r=this.getChild("closeButton");if(e&&!r){var n=this.contentEl_;this.contentEl_=this.el_;r=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=n;this.on(r,"close",this.close)}if(!e&&r){this.off(r,"close",this.close);this.removeChild(r);r.dispose()}}return this.closeable_};t.fill=function e(){this.fillWith(this.content())};t.fillWith=function e(t){var r=this.contentEl();var n=r.parentNode;var i=r.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;n.removeChild(r);this.empty();Ie(r,t);this.trigger("modalfill");if(i){n.insertBefore(r,i)}else{n.appendChild(r)}var s=this.getChild("closeButton");if(s){n.appendChild(s.el_)}};t.empty=function e(){this.trigger("beforemodalempty");xe(this.contentEl());this.trigger("modalempty")};t.content=function e(t){if(typeof t!=="undefined"){this.content_=t}return this.content_};t.conditionalFocus_=function e(){var t=d.activeElement;var r=this.player_.el_;this.previouslyActiveEl_=null;if(r.contains(t)||r===t){this.previouslyActiveEl_=t;this.focus()}};t.conditionalBlur_=function e(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null}};t.handleKeyDown=function e(t){t.stopPropagation();if(g.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault();this.close();return}if(!g.isEventKey(t,"Tab")){return}var r=this.focusableEls_();var n=this.el_.querySelector(":focus");var i;for(var s=0;s<r.length;s++){if(n===r[s]){i=s;break}}if(d.activeElement===this.el_){i=0}if(t.shiftKey&&i===0){r[r.length-1].focus();t.preventDefault()}else if(!t.shiftKey&&i===r.length-1){r[0].focus();t.preventDefault()}};t.focusableEls_=function e(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(e){return(e instanceof f.HTMLAnchorElement||e instanceof f.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof f.HTMLInputElement||e instanceof f.HTMLSelectElement||e instanceof f.HTMLTextAreaElement||e instanceof f.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof f.HTMLIFrameElement||e instanceof f.HTMLObjectElement||e instanceof f.HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable")})};return e}(At);qt.prototype.options_={pauseOnOpen:true,temporary:true};At.registerComponent("ModalDialog",qt);var Gt=function(n){o(e,n);function e(e){var t;if(e===void 0){e=[]}t=n.call(this)||this;t.tracks_=[];Object.defineProperty(p(t),"length",{get:function e(){return this.tracks_.length}});for(var r=0;r<e.length;r++){t.addTrack(e[r])}return t}var t=e.prototype;t.addTrack=function e(t){var r=this;var n=this.tracks_.length;if(!(""+n in this)){Object.defineProperty(this,n,{get:function e(){return this.tracks_[n]}})}if(this.tracks_.indexOf(t)===-1){this.tracks_.push(t);this.trigger({track:t,type:"addtrack",target:this})}t.labelchange_=function(){r.trigger({track:t,type:"labelchange",target:r})};if(ft(t)){t.addEventListener("labelchange",t.labelchange_)}};t.removeTrack=function e(t){var r;for(var n=0,i=this.length;n<i;n++){if(this[n]===t){r=this[n];if(r.off){r.off()}this.tracks_.splice(n,1);break}}if(!r){return}this.trigger({track:r,type:"removetrack",target:this})};t.getTrackById=function e(t){var r=null;for(var n=0,i=this.length;n<i;n++){var s=this[n];if(s.id===t){r=s;break}}return r};return e}(ut);Gt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var $t in Gt.prototype.allowedEvents_){Gt.prototype["on"+$t]=null}var Xt=function e(t,r){for(var n=0;n<t.length;n++){if(!Object.keys(t[n]).length||r.id===t[n].id){continue}t[n].enabled=false}};var Qt=function(n){o(e,n);function e(e){var t;if(e===void 0){e=[]}for(var r=e.length-1;r>=0;r--){if(e[r].enabled){Xt(e,e[r]);break}}t=n.call(this,e)||this;t.changing_=false;return t}var t=e.prototype;t.addTrack=function e(t){var r=this;if(t.enabled){Xt(this,t)}n.prototype.addTrack.call(this,t);if(!t.addEventListener){return}t.enabledChange_=function(){if(r.changing_){return}r.changing_=true;Xt(r,t);r.changing_=false;r.trigger("change")};t.addEventListener("enabledchange",t.enabledChange_)};t.removeTrack=function e(t){n.prototype.removeTrack.call(this,t);if(t.removeEventListener&&t.enabledChange_){t.removeEventListener("enabledchange",t.enabledChange_);t.enabledChange_=null}};return e}(Gt);var Jt=function e(t,r){for(var n=0;n<t.length;n++){if(!Object.keys(t[n]).length||r.id===t[n].id){continue}t[n].selected=false}};var Zt=function(n){o(e,n);function e(e){var t;if(e===void 0){e=[]}for(var r=e.length-1;r>=0;r--){if(e[r].selected){Jt(e,e[r]);break}}t=n.call(this,e)||this;t.changing_=false;Object.defineProperty(p(t),"selectedIndex",{get:function e(){for(var t=0;t<this.length;t++){if(this[t].selected){return t}}return-1},set:function e(){}});return t}var t=e.prototype;t.addTrack=function e(t){var r=this;if(t.selected){Jt(this,t)}n.prototype.addTrack.call(this,t);if(!t.addEventListener){return}t.selectedChange_=function(){if(r.changing_){return}r.changing_=true;Jt(r,t);r.changing_=false;r.trigger("change")};t.addEventListener("selectedchange",t.selectedChange_)};t.removeTrack=function e(t){n.prototype.removeTrack.call(this,t);if(t.removeEventListener&&t.selectedChange_){t.removeEventListener("selectedchange",t.selectedChange_);t.selectedChange_=null}};return e}(Gt);var er=function(i){o(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;t.addTrack=function e(t){var r=this;i.prototype.addTrack.call(this,t);if(!this.queueChange_){this.queueChange_=function(){return r.queueTrigger("change")}}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return r.trigger("selectedlanguagechange")}}t.addEventListener("modechange",this.queueChange_);var n=["metadata","chapters"];if(n.indexOf(t.kind)===-1){t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}};t.removeTrack=function e(t){i.prototype.removeTrack.call(this,t);if(t.removeEventListener){if(this.queueChange_){t.removeEventListener("modechange",this.queueChange_)}if(this.selectedlanguagechange_){t.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}};return e}(Gt);var tr=function(){function e(e){if(e===void 0){e=[]}this.trackElements_=[];Object.defineProperty(this,"length",{get:function e(){return this.trackElements_.length}});for(var t=0,r=e.length;t<r;t++){this.addTrackElement_(e[t])}}var t=e.prototype;t.addTrackElement_=function e(t){var r=this.trackElements_.length;if(!(""+r in this)){Object.defineProperty(this,r,{get:function e(){return this.trackElements_[r]}})}if(this.trackElements_.indexOf(t)===-1){this.trackElements_.push(t)}};t.getTrackElementByTrack_=function e(t){var r;for(var n=0,i=this.trackElements_.length;n<i;n++){if(t===this.trackElements_[n].track){r=this.trackElements_[n];break}}return r};t.removeTrackElement_=function e(t){for(var r=0,n=this.trackElements_.length;r<n;r++){if(t===this.trackElements_[r]){if(this.trackElements_[r].track&&typeof this.trackElements_[r].track.off==="function"){this.trackElements_[r].track.off()}if(typeof this.trackElements_[r].off==="function"){this.trackElements_[r].off()}this.trackElements_.splice(r,1);break}}};return e}();var rr=function(){function t(e){t.prototype.setCues_.call(this,e);Object.defineProperty(this,"length",{get:function e(){return this.length_}})}var e=t.prototype;e.setCues_=function e(t){var r=this.length||0;var n=0;var i=t.length;this.cues_=t;this.length_=t.length;var s=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t]}})}};if(r<i){n=r;for(;n<i;n++){s.call(this,n)}}};e.getCueById=function e(t){var r=null;for(var n=0,i=this.length;n<i;n++){var s=this[n];if(s.id===t){r=s;break}}return r};return t}();var nr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var ir={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var sr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var ar={disabled:"disabled",hidden:"hidden",showing:"showing"};var or=function(a){o(e,a);function e(e){var r;if(e===void 0){e={}}r=a.call(this)||this;var n={id:e.id||"vjs_track_"+Ke(),kind:e.kind||"",language:e.language||""};var i=e.label||"";var t=function e(t){Object.defineProperty(p(r),t,{get:function e(){return n[t]},set:function e(){}})};for(var s in n){t(s)}Object.defineProperty(p(r),"label",{get:function e(){return i},set:function e(t){if(t!==i){i=t;this.trigger("labelchange")}}});return r}return e}(ut);var lr=function e(t){var r=["protocol","hostname","port","pathname","search","hash","host"];var n=d.createElement("a");n.href=t;var i=n.host===""&&n.protocol!=="file:";var s;if(i){s=d.createElement("div");s.innerHTML='<a href="'+t+'"></a>';n=s.firstChild;s.setAttribute("style","display:none; position:absolute;");d.body.appendChild(s)}var a={};for(var o=0;o<r.length;o++){a[r[o]]=n[r[o]]}if(a.protocol==="http:"){a.host=a.host.replace(/:80$/,"")}if(a.protocol==="https:"){a.host=a.host.replace(/:443$/,"")}if(!a.protocol){a.protocol=f.location.protocol}if(i){d.body.removeChild(s)}return a};var ur=function e(t){if(!t.match(/^https?:\/\//)){var r=d.createElement("div");r.innerHTML='<a href="'+t+'">x</a>';t=r.firstChild.href}return t};var cr=function e(t){if(typeof t==="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/;var n=r.exec(t);if(n){return n.pop().toLowerCase()}}return""};var hr=function e(t,r){if(r===void 0){r=f.location}var n=lr(t);var i=n.protocol===":"?r.protocol:n.protocol;var s=i+n.host!==r.protocol+r.host;return s};var fr=Object.freeze({__proto__:null,parseUrl:lr,getAbsoluteURL:ur,getFileExtension:cr,isCrossOrigin:hr});var dr=function e(t,r){var n=new f.WebVTT.Parser(f,f.vttjs,f.WebVTT.StringDecoder());var i=[];n.oncue=function(e){r.addCue(e)};n.onparsingerror=function(e){i.push(e)};n.onflush=function(){r.trigger({type:"loadeddata",target:r})};n.parse(t);if(i.length>0){if(f.console&&f.console.groupCollapsed){f.console.groupCollapsed("Text Track parsing errors for "+r.src)}i.forEach(function(e){return k.error(e)});if(f.console&&f.console.groupEnd){f.console.groupEnd()}}n.flush()};var pr=function e(t,n){var r={uri:t};var i=hr(t);if(i){r.cors=i}var s=n.tech_.crossOrigin()==="use-credentials";if(s){r.withCredentials=s}a(r,at(this,function(e,t,r){if(e){return k.error(e,t)}n.loaded_=true;if(typeof f.WebVTT!=="function"){if(n.tech_){n.tech_.any(["vttjsloaded","vttjserror"],function(e){if(e.type==="vttjserror"){k.error("vttjs failed to load, stopping trying to process "+n.src);return}return dr(r,n)})}}else{dr(r,n)}}))};var vr=function(c){o(e,c);function e(e){var t;if(e===void 0){e={}}if(!e.tech){throw new Error("A tech was not provided.")}var r=xt(e,{kind:sr[e.kind]||"subtitles",language:e.language||e.srclang||""});var n=ar[r.mode]||"disabled";var i=r["default"];if(r.kind==="metadata"||r.kind==="chapters"){n="hidden"}t=c.call(this,r)||this;t.tech_=r.tech;t.cues_=[];t.activeCues_=[];t.preload_=t.tech_.preloadTextTracks!==false;var s=new rr(t.cues_);var o=new rr(t.activeCues_);var l=false;var a=at(p(t),function(){if(!this.tech_.isReady_||this.tech_.isDisposed()){return}this.activeCues=this.activeCues;if(l){this.trigger("cuechange");l=false}});var u=function e(){t.tech_.off("timeupdate",a)};t.tech_.one("dispose",u);if(n!=="disabled"){t.tech_.on("timeupdate",a)}Object.defineProperties(p(t),{default:{get:function e(){return i},set:function e(){}},mode:{get:function e(){return n},set:function e(t){if(!ar[t]){return}if(n===t){return}n=t;if(!this.preload_&&n!=="disabled"&&this.cues.length===0){pr(this.src,this)}this.tech_.off("timeupdate",a);if(n!=="disabled"){this.tech_.on("timeupdate",a)}this.trigger("modechange")}},cues:{get:function e(){if(!this.loaded_){return null}return s},set:function e(){}},activeCues:{get:function e(){if(!this.loaded_){return null}if(this.cues.length===0){return o}var t=this.tech_.currentTime();var r=[];for(var n=0,i=this.cues.length;n<i;n++){var s=this.cues[n];if(s.startTime<=t&&s.endTime>=t){r.push(s)}else if(s.startTime===s.endTime&&s.startTime<=t&&s.startTime+.5>=t){r.push(s)}}l=false;if(r.length!==this.activeCues_.length){l=true}else{for(var a=0;a<r.length;a++){if(this.activeCues_.indexOf(r[a])===-1){l=true}}}this.activeCues_=r;o.setCues_(this.activeCues_);return o},set:function e(){}}});if(r.src){t.src=r.src;if(!t.preload_){t.loaded_=true}if(t.preload_||r.kind!=="subtitles"&&r.kind!=="captions"){pr(t.src,p(t))}}else{t.loaded_=true}return t}var t=e.prototype;t.addCue=function e(t){var r=t;if(f.vttjs&&!(t instanceof f.vttjs.VTTCue)){r=new f.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var n in t){if(!(n in r)){r[n]=t[n]}}r.id=t.id;r.originalCue_=t}var i=this.tech_.textTracks();for(var s=0;s<i.length;s++){if(i[s]!==this){i[s].removeCue(r)}}this.cues_.push(r);this.cues.setCues_(this.cues_)};t.removeCue=function e(t){var r=this.cues_.length;while(r--){var n=this.cues_[r];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(r,1);this.cues.setCues_(this.cues_);break}}};return e}(or);vr.prototype.allowedEvents_={cuechange:"cuechange"};var gr=function(i){o(e,i);function e(e){var t;if(e===void 0){e={}}var r=xt(e,{kind:ir[e.kind]||""});t=i.call(this,r)||this;var n=false;Object.defineProperty(p(t),"enabled",{get:function e(){return n},set:function e(t){if(typeof t!=="boolean"||t===n){return}n=t;this.trigger("enabledchange")}});if(r.enabled){t.enabled=r.enabled}t.loaded_=true;return t}return e}(or);var yr=function(i){o(e,i);function e(e){var t;if(e===void 0){e={}}var r=xt(e,{kind:nr[e.kind]||""});t=i.call(this,r)||this;var n=false;Object.defineProperty(p(t),"selected",{get:function e(){return n},set:function e(t){if(typeof t!=="boolean"||t===n){return}n=t;this.trigger("selectedchange")}});if(r.selected){t.selected=r.selected}return t}return e}(or);var mr=0;var _r=1;var br=2;var Tr=3;var Er=function(i){o(e,i);function e(e){var t;if(e===void 0){e={}}t=i.call(this)||this;var r;var n=new vr(e);t.kind=n.kind;t.src=n.src;t.srclang=n.language;t.label=n.label;t["default"]=n["default"];Object.defineProperties(p(t),{readyState:{get:function e(){return r}},track:{get:function e(){return n}}});r=mr;n.addEventListener("loadeddata",function(){r=br;t.trigger({type:"load",target:p(t)})});return t}return e}(ut);Er.prototype.allowedEvents_={load:"load"};Er.NONE=mr;Er.LOADING=_r;Er.LOADED=br;Er.ERROR=Tr;var wr={audio:{ListClass:Qt,TrackClass:gr,capitalName:"Audio"},video:{ListClass:Zt,TrackClass:yr,capitalName:"Video"},text:{ListClass:er,TrackClass:vr,capitalName:"Text"}};Object.keys(wr).forEach(function(e){wr[e].getterName=e+"Tracks";wr[e].privateName=e+"Tracks_"});var Cr={remoteText:{ListClass:er,TrackClass:vr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:tr,TrackClass:Er,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var kr=i({},wr,Cr);Cr.names=Object.keys(Cr);wr.names=Object.keys(wr);kr.names=[].concat(Cr.names).concat(wr.names);function Sr(e,t,r,n,i){if(i===void 0){i={}}var s=e.textTracks();i.kind=t;if(r){i.label=r}if(n){i.language=n}i.tech=e;var a=new kr.text.TrackClass(i);s.addTrack(a);return a}var xr=function(t){o(n,t);function n(r,e){var n;if(r===void 0){r={}}if(e===void 0){e=function e(){}}r.reportTouchActivity=false;n=t.call(this,null,r,e)||this;n.hasStarted_=false;n.on("playing",function(){this.hasStarted_=true});n.on("loadstart",function(){this.hasStarted_=false});kr.names.forEach(function(e){var t=kr[e];if(r&&r[t.getterName]){n[t.privateName]=r[t.getterName]}});if(!n.featuresProgressEvents){n.manualProgressOn()}if(!n.featuresTimeupdateEvents){n.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach(function(e){if(r["native"+e+"Tracks"]===false){n["featuresNative"+e+"Tracks"]=false}});if(r.nativeCaptions===false||r.nativeTextTracks===false){n.featuresNativeTextTracks=false}else if(r.nativeCaptions===true||r.nativeTextTracks===true){n.featuresNativeTextTracks=true}if(!n.featuresNativeTextTracks){n.emulateTextTracks()}n.preloadTextTracks=r.preloadTextTracks!==false;n.autoRemoteTextTracks_=new kr.text.ListClass;n.initTrackListeners();if(!r.nativeControlsForTouch){n.emitTapEvents()}if(n.constructor){n.name_=n.constructor.name||"Unknown Tech"}return n}var e=n.prototype;e.triggerSourceset=function e(t){var r=this;if(!this.isReady_){this.one("ready",function(){return r.setTimeout(function(){return r.triggerSourceset(t)},1)})}this.trigger({src:t,type:"sourceset"})};e.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};e.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};e.trackProgress=function e(t){this.stopTrackingProgress();this.progressInterval=this.setInterval(at(this,function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress")}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress()}}),500)};e.onDurationChange=function e(t){this.duration_=this.duration()};e.buffered=function e(){return Nt(0,0)};e.bufferedPercent=function e(){return Dt(this.buffered(),this.duration_)};e.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval)};e.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};e.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};e.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})},250)};e.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};e.dispose=function e(){this.clearTracks(wr.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}t.prototype.dispose.call(this)};e.clearTracks=function e(t){var i=this;t=[].concat(t);t.forEach(function(e){var t=i[e+"Tracks"]()||[];var r=t.length;while(r--){var n=t[r];if(e==="text"){i.removeRemoteTextTrack(n)}t.removeTrack(n)}})};e.cleanupAutoTextTracks=function e(){var t=this.autoRemoteTextTracks_||[];var r=t.length;while(r--){var n=t[r];this.removeRemoteTextTrack(n)}};e.reset=function e(){};e.crossOrigin=function e(){};e.setCrossOrigin=function e(){};e.error=function e(t){if(t!==undefined){this.error_=new Bt(t);this.trigger("error")}return this.error_};e.played=function e(){if(this.hasStarted_){return Nt(0,0)}return Nt()};e.play=function e(){};e.setScrubbing=function e(){};e.scrubbing=function e(){};e.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};e.initTrackListeners=function e(){var i=this;wr.names.forEach(function(t){var e=wr[t];var r=function e(){i.trigger(t+"trackchange")};var n=i[e.getterName]();n.addEventListener("removetrack",r);n.addEventListener("addtrack",r);i.on("dispose",function(){n.removeEventListener("removetrack",r);n.removeEventListener("addtrack",r)})})};e.addWebVttScript_=function e(){var t=this;if(f.WebVTT){return}if(d.body.contains(this.el())){if(!this.options_["vtt.js"]&&M(s)&&Object.keys(s).length>0){this.trigger("vttjsloaded");return}var r=d.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";r.onload=function(){t.trigger("vttjsloaded")};r.onerror=function(){t.trigger("vttjserror")};this.on("dispose",function(){r.onload=null;r.onerror=null});f.WebVTT=true;this.el().parentNode.appendChild(r)}else{this.ready(this.addWebVttScript_)}};e.emulateTextTracks=function e(){var t=this;var n=this.textTracks();var r=this.remoteTextTracks();var i=function e(t){return n.addTrack(t.track)};var s=function e(t){return n.removeTrack(t.track)};r.on("addtrack",i);r.on("removetrack",s);this.addWebVttScript_();var a=function e(){return t.trigger("texttrackchange")};var o=function e(){a();for(var t=0;t<n.length;t++){var r=n[t];r.removeEventListener("cuechange",a);if(r.mode==="showing"){r.addEventListener("cuechange",a)}}};o();n.addEventListener("change",o);n.addEventListener("addtrack",o);n.addEventListener("removetrack",o);this.on("dispose",function(){r.off("addtrack",i);r.off("removetrack",s);n.removeEventListener("change",o);n.removeEventListener("addtrack",o);n.removeEventListener("removetrack",o);for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",a)}})};e.addTextTrack=function e(t,r,n){if(!t){throw new Error("TextTrack kind is required but was not provided")}return Sr(this,t,r,n)};e.createRemoteTextTrack=function e(t){var r=xt(t,{tech:this});return new Cr.remoteTextEl.TrackClass(r)};e.addRemoteTextTrack=function e(t,r){var n=this;if(t===void 0){t={}}var i=this.createRemoteTextTrack(t);if(r!==true&&r!==false){k.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');r=true}this.remoteTextTrackEls().addTrackElement_(i);this.remoteTextTracks().addTrack(i.track);if(r!==true){this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)})}return i};e.removeRemoteTextTrack=function e(t){var r=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(r);this.remoteTextTracks().removeTrack(t);this.autoRemoteTextTracks_.removeTrack(t)};e.getVideoPlaybackQuality=function e(){return{}};e.requestPictureInPicture=function e(){var t=this.options_.Promise||f.Promise;if(t){return t.reject()}};e.disablePictureInPicture=function e(){return true};e.setDisablePictureInPicture=function e(){};e.setPoster=function e(){};e.playsinline=function e(){};e.setPlaysinline=function e(){};e.overrideNativeAudioTracks=function e(){};e.overrideNativeVideoTracks=function e(){};e.canPlayType=function e(){return""};n.canPlayType=function e(){return""};n.canPlaySource=function e(t,r){return n.canPlayType(t.type)};n.isTech=function e(t){return t.prototype instanceof n||t instanceof n||t===n};n.registerTech=function e(t,r){if(!n.techs_){n.techs_={}}if(!n.isTech(r)){throw new Error("Tech "+t+" must be a Tech")}if(!n.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!n.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}t=kt(t);n.techs_[t]=r;n.techs_[Ct(t)]=r;if(t!=="Tech"){n.defaultTechOrder_.push(t)}return r};n.getTech=function e(t){if(!t){return}if(n.techs_&&n.techs_[t]){return n.techs_[t]}t=kt(t);if(f&&f.videojs&&f.videojs[t]){k.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return f.videojs[t]}};return n}(At);kr.names.forEach(function(e){var t=kr[e];xr.prototype[t.getterName]=function(){this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}});xr.prototype.featuresVolumeControl=true;xr.prototype.featuresMuteControl=true;xr.prototype.featuresFullscreenResize=false;xr.prototype.featuresPlaybackRate=false;xr.prototype.featuresProgressEvents=false;xr.prototype.featuresSourceset=false;xr.prototype.featuresTimeupdateEvents=false;xr.prototype.featuresNativeTextTracks=false;xr.withSourceHandlers=function(s){s.registerSourceHandler=function(e,t){var r=s.sourceHandlers;if(!r){r=s.sourceHandlers=[]}if(t===undefined){t=r.length}r.splice(t,0,e)};s.canPlayType=function(e){var t=s.sourceHandlers||[];var r;for(var n=0;n<t.length;n++){r=t[n].canPlayType(e);if(r){return r}}return""};s.selectSourceHandler=function(e,t){var r=s.sourceHandlers||[];var n;for(var i=0;i<r.length;i++){n=r[i].canHandleSource(e,t);if(n){return r[i]}}return null};s.canPlaySource=function(e,t){var r=s.selectSourceHandler(e,t);if(r){return r.canHandleSource(e,t)}return""};var e=["seekable","seeking","duration"];e.forEach(function(e){var t=this[e];if(typeof t!=="function"){return}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments)}return t.apply(this,arguments)}},s.prototype);s.prototype.setSource=function(e){var t=s.selectSourceHandler(e,this.options_);if(!t){if(s.nativeSourceHandler){t=s.nativeSourceHandler}else{k.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(t!==s.nativeSourceHandler){this.currentSource_=e}this.sourceHandler_=t.handleSource(e,this,this.options_);this.one("dispose",this.disposeSourceHandler)};s.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};At.registerComponent("Tech",xr);xr.registerTech("Tech",xr);xr.defaultTechOrder_=[];var Pr={};var Or={};var Ir={};function jr(e,t){Pr[e]=Pr[e]||[];Pr[e].push(t)}function Ar(e,t,r){e.setTimeout(function(){return Kr(t,Pr[t.type],r,e)},1)}function Mr(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function Lr(e,t,r){return e.reduceRight(Hr(r),t[r]())}function Rr(e,t,r,n){return t[r](e.reduce(Hr(r),n))}function Nr(e,t,r,n){if(n===void 0){n=null}var i="call"+kt(r);var s=e.reduce(Hr(i),n);var a=s===Ir;var o=a?null:t[r](s);Ur(e,r,o,a);return o}var Dr={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1};var Br={setCurrentTime:1,setMuted:1,setVolume:1};var Fr={play:1,pause:1};function Hr(r){return function(e,t){if(e===Ir){return Ir}if(t[r]){return t[r](e)}return e}}function Ur(e,t,r,n){for(var i=e.length-1;i>=0;i--){var s=e[i];if(s[t]){s[t](n,r)}}}function Vr(e){Or[e.id()]=null}function zr(e,t){var r=Or[e.id()];var n=null;if(r===undefined||r===null){n=t(e);Or[e.id()]=[[t,n]];return n}for(var i=0;i<r.length;i++){var s=r[i],a=s[0],o=s[1];if(a!==t){continue}n=o}if(n===null){n=t(e);r.push([t,n])}return n}function Kr(r,e,n,i,s,a){if(r===void 0){r={}}if(e===void 0){e=[]}if(s===void 0){s=[]}if(a===void 0){a=false}var t=e,o=t[0],l=t.slice(1);if(typeof o==="string"){Kr(r,Pr[o],n,i,s,a)}else if(o){var u=zr(i,o);if(!u.setSource){s.push(u);return Kr(r,l,n,i,s,a)}u.setSource(j({},r),function(e,t){if(e){return Kr(r,l,n,i,s,a)}s.push(u);Kr(t,r.type===t.type?l:Pr[t.type],n,i,s,a)})}else if(l.length){Kr(r,l,n,i,s,a)}else if(a){n(r,s)}else{Kr(r,Pr["*"],n,i,s,true)}}var Wr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var Yr=function e(t){if(t===void 0){t=""}var r=cr(t);var n=Wr[r.toLowerCase()];return n||""};var qr=function e(t,r){if(!r){return""}if(t.cache_.source.src===r&&t.cache_.source.type){return t.cache_.source.type}var n=t.cache_.sources.filter(function(e){return e.src===r});if(n.length){return n[0].type}var i=t.$$("source");for(var s=0;s<i.length;s++){var a=i[s];if(a.type&&a.src&&a.src===r){return a.type}}return Yr(r)};var Gr=function t(e){if(Array.isArray(e)){var r=[];e.forEach(function(e){e=t(e);if(Array.isArray(e)){r=r.concat(e)}else if(A(e)){r.push(e)}});e=r}else if(typeof e==="string"&&e.trim()){e=[$r({src:e})]}else if(A(e)&&typeof e.src==="string"&&e.src&&e.src.trim()){e=[$r(e)]}else{e=[]}return e};function $r(e){if(!e.type){var t=Yr(e.src);if(t){e.type=t}}return e}var Xr=function(u){o(e,u);function e(e,t,r){var n;var i=xt({createEl:false},t);n=u.call(this,e,i,r)||this;if(!t.playerOptions.sources||t.playerOptions.sources.length===0){for(var s=0,a=t.playerOptions.techOrder;s<a.length;s++){var o=kt(a[s]);var l=xr.getTech(o);if(!o){l=At.getComponent(o)}if(l&&l.isSupported()){e.loadTech_(o);break}}}else{e.src(t.playerOptions.sources)}return n}return e}(At);At.registerComponent("MediaLoader",Xr);var Qr=function(s){o(e,s);function e(e,t){var r;r=s.call(this,e,t)||this;r.emitTapEvents();r.enable();return r}var t=e.prototype;t.createEl=function e(t,r,n){if(t===void 0){t="div"}if(r===void 0){r={}}if(n===void 0){n={}}r=j({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},r);if(t==="button"){k.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead.")}n=j({role:"button"},n);this.tabIndex_=r.tabIndex;var i=s.prototype.createEl.call(this,t,r,n);this.createControlTextEl(i);return i};t.dispose=function e(){this.controlTextEl_=null;s.prototype.dispose.call(this)};t.createControlTextEl=function e(t){this.controlTextEl_=ue("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(t){t.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,t);return this.controlTextEl_};t.controlText=function e(t,r){if(r===void 0){r=this.el()}if(t===undefined){return this.controlText_||"Need Text"}var n=this.localize(t);this.controlText_=t;ce(this.controlTextEl_,n);if(!this.nonIconControl){r.setAttribute("title",n)}};t.buildCSSClass=function e(){return"vjs-control vjs-button "+s.prototype.buildCSSClass.call(this)};t.enable=function e(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("keydown",this.handleKeyDown)}};t.disable=function e(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};t.handleLanguagechange=function e(){this.controlText(this.controlText_)};t.handleClick=function e(t){if(this.options_.clickHandler){this.options_.clickHandler.call(this,arguments)}};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Space")||g.isEventKey(t,"Enter")){t.preventDefault();t.stopPropagation();this.trigger("click")}else{s.prototype.handleKeyDown.call(this,t)}};return e}(At);At.registerComponent("ClickableComponent",Qr);var Jr=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.update();e.on("posterchange",at(p(r),r.update));return r}var t=e.prototype;t.dispose=function e(){this.player().off("posterchange",this.update);n.prototype.dispose.call(this)};t.createEl=function e(){var t=ue("div",{className:"vjs-poster",tabIndex:-1});return t};t.update=function e(t){var r=this.player().poster();this.setSrc(r);if(r){this.show()}else{this.hide()}};t.setSrc=function e(t){var r="";if(t){r='url("'+t+'")'}this.el_.style.backgroundImage=r};t.handleClick=function e(t){if(!this.player_.controls()){return}var r=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;if(this.player_.tech(true)&&!((q||K)&&r)){this.player_.tech(true).focus()}if(this.player_.paused()){Ut(this.player_.play())}else{this.player_.pause()}};return e}(Qr);At.registerComponent("PosterImage",Jr);var Zr="#222";var en="#ccc";var tn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function rn(e,t){var r;if(e.length===4){r=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}else if(e.length===7){r=e.slice(1)}else{throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.")}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function nn(e,t,r){try{e.style[t]=r}catch(e){return}}var sn=function(s){o(e,s);function e(r,e,t){var n;n=s.call(this,r,e,t)||this;var i=at(p(n),n.updateDisplay);r.on("loadstart",at(p(n),n.toggleDisplay));r.on("texttrackchange",i);r.on("loadedmetadata",at(p(n),n.preselectTrack));r.ready(at(p(n),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",i);r.on("playerresize",i);f.addEventListener("orientationchange",i);r.on("dispose",function(){return f.removeEventListener("orientationchange",i)});var e=this.options_.playerOptions.tracks||[];for(var t=0;t<e.length;t++){this.player_.addRemoteTextTrack(e[t],true)}this.preselectTrack()}));return n}var t=e.prototype;t.preselectTrack=function e(){var t={captions:1,subtitles:1};var r=this.player_.textTracks();var n=this.player_.cache_.selectedLanguage;var i;var s;var a;for(var o=0;o<r.length;o++){var l=r[o];if(n&&n.enabled&&n.language&&n.language===l.language&&l.kind in t){if(l.kind===n.kind){a=l}else if(!a){a=l}}else if(n&&!n.enabled){a=null;i=null;s=null}else if(l["default"]){if(l.kind==="descriptions"&&!i){i=l}else if(l.kind in t&&!s){s=l}}}if(a){a.mode="showing"}else if(s){s.mode="showing"}else if(i){i.mode="showing"}};t.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};t.createEl=function e(){return s.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};t.clearDisplay=function e(){if(typeof f.WebVTT==="function"){f.WebVTT.processCues(f,[],this.el_)}};t.updateDisplay=function e(){var t=this.player_.textTracks();var r=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(r){var n=[];for(var i=0;i<t.length;++i){var s=t[i];if(s.mode!=="showing"){continue}n.push(s)}this.updateForTrack(n);return}var a=null;var o=null;var l=t.length;while(l--){var u=t[l];if(u.mode==="showing"){if(u.kind==="descriptions"){a=u}else{o=u}}}if(o){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(o)}else if(a){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(a)}};t.updateDisplayState=function e(t){var r=this.player_.textTrackSettings.getValues();var n=t.activeCues;var i=n.length;while(i--){var s=n[i];if(!s){continue}var a=s.displayState;if(r.color){a.firstChild.style.color=r.color}if(r.textOpacity){nn(a.firstChild,"color",rn(r.color||"#fff",r.textOpacity))}if(r.backgroundColor){a.firstChild.style.backgroundColor=r.backgroundColor}if(r.backgroundOpacity){nn(a.firstChild,"backgroundColor",rn(r.backgroundColor||"#000",r.backgroundOpacity))}if(r.windowColor){if(r.windowOpacity){nn(a,"backgroundColor",rn(r.windowColor,r.windowOpacity))}else{a.style.backgroundColor=r.windowColor}}if(r.edgeStyle){if(r.edgeStyle==="dropshadow"){a.firstChild.style.textShadow="2px 2px 3px "+Zr+", 2px 2px 4px "+Zr+", 2px 2px 5px "+Zr}else if(r.edgeStyle==="raised"){a.firstChild.style.textShadow="1px 1px "+Zr+", 2px 2px "+Zr+", 3px 3px "+Zr}else if(r.edgeStyle==="depressed"){a.firstChild.style.textShadow="1px 1px "+en+", 0 1px "+en+", -1px -1px "+Zr+", 0 -1px "+Zr}else if(r.edgeStyle==="uniform"){a.firstChild.style.textShadow="0 0 4px "+Zr+", 0 0 4px "+Zr+", 0 0 4px "+Zr+", 0 0 4px "+Zr}}if(r.fontPercent&&r.fontPercent!==1){var o=f.parseFloat(a.style.fontSize);a.style.fontSize=o*r.fontPercent+"px";a.style.height="auto";a.style.top="auto"}if(r.fontFamily&&r.fontFamily!=="default"){if(r.fontFamily==="small-caps"){a.firstChild.style.fontVariant="small-caps"}else{a.firstChild.style.fontFamily=tn[r.fontFamily]}}}};t.updateForTrack=function e(t){if(!Array.isArray(t)){t=[t]}if(typeof f.WebVTT!=="function"||t.every(function(e){return!e.activeCues})){return}var r=[];for(var n=0;n<t.length;++n){var i=t[n];for(var s=0;s<i.activeCues.length;++s){r.push(i.activeCues[s])}}f.WebVTT.processCues(f,r,this.el_);for(var a=0;a<t.length;++a){var o=t[a];for(var l=0;l<o.activeCues.length;++l){var u=o.activeCues[l].displayState;de(u,"vjs-text-track-cue");de(u,"vjs-text-track-cue-"+(o.language?o.language:a))}if(this.player_.textTrackSettings){this.updateDisplayState(o)}}};return e}(At);At.registerComponent("TextTrackDisplay",sn);var an=function(s){o(e,s);function e(){return s.apply(this,arguments)||this}var t=e.prototype;t.createEl=function e(){var t=this.player_.isAudio();var r=this.localize(t?"Audio Player":"Video Player");var n=ue("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[r])});var i=s.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});i.appendChild(n);return i};return e}(At);At.registerComponent("LoadingSpinner",an);var on=function(r){o(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;t.createEl=function e(t,r,n){if(r===void 0){r={}}if(n===void 0){n={}}t="button";r=j({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},r);n=j({type:"button"},n);var i=At.prototype.createEl.call(this,t,r,n);this.createControlTextEl(i);return i};t.addChild=function e(t,r){if(r===void 0){r={}}var n=this.constructor.name;k.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead.");return At.prototype.addChild.call(this,t,r)};t.enable=function e(){r.prototype.enable.call(this);this.el_.removeAttribute("disabled")};t.disable=function e(){r.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Space")||g.isEventKey(t,"Enter")){t.stopPropagation();return}r.prototype.handleKeyDown.call(this,t)};return e}(Qr);At.registerComponent("Button",on);var ln=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.mouseused_=false;r.on("mousedown",r.handleMouseDown);return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-big-play-button"};t.handleClick=function e(t){var r=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Ut(r);if(this.player_.tech(true)&&!((q||K)&&n)){this.player_.tech(true).focus()}return}var i=this.player_.getChild("controlBar");var s=i&&i.getChild("playToggle");if(!s){this.player_.tech(true).focus();return}var a=function e(){return s.focus()};if(Ht(r)){r.then(a,function(){})}else{this.setTimeout(a,1)}};t.handleKeyDown=function e(t){this.mouseused_=false;n.prototype.handleKeyDown.call(this,t)};t.handleMouseDown=function e(t){this.mouseused_=true};return e}(on);ln.prototype.controlText_="Play Video";At.registerComponent("BigPlayButton",ln);var un=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.controlText(t&&t.controlText||r.localize("Close"));return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)};t.handleClick=function e(t){this.trigger({type:"close",bubbles:false})};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Esc")){t.preventDefault();t.stopPropagation();this.trigger("click")}else{n.prototype.handleKeyDown.call(this,t)}};return e}(on);At.registerComponent("CloseButton",un);var cn=function(n){o(e,n);function e(e,t){var r;if(t===void 0){t={}}r=n.call(this,e,t)||this;t.replay=t.replay===undefined||t.replay;r.on(e,"play",r.handlePlay);r.on(e,"pause",r.handlePause);if(t.replay){r.on(e,"ended",r.handleEnded)}return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)};t.handleClick=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};t.handleSeeked=function e(t){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(t)}else{this.handlePlay(t)}};t.handlePlay=function e(t){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};t.handlePause=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};t.handleEnded=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return e}(on);cn.prototype.controlText_="Play";At.registerComponent("PlayToggle",cn);var hn=function e(t,r){t=t<0?0:t;var n=Math.floor(t%60);var i=Math.floor(t/60%60);var s=Math.floor(t/3600);var a=Math.floor(r/60%60);var o=Math.floor(r/3600);if(isNaN(t)||t===Infinity){s=i=n="-"}s=s>0||o>0?s+":":"";i=((s||a>=10)&&i<10?"0"+i:i)+":";n=n<10?"0"+n:n;return s+i+n};var fn=hn;function dn(e){fn=e}function pn(){fn=hn}function vn(e,t){if(t===void 0){t=e}return fn(e,t)}var gn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on(e,["timeupdate","ended"],r.updateContent);r.updateTextNode_();return r}var t=e.prototype;t.createEl=function e(){var t=this.buildCSSClass();var r=n.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"</span>"});this.contentEl_=ue("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"});r.appendChild(this.contentEl_);return r};t.dispose=function e(){this.contentEl_=null;this.textNode_=null;n.prototype.dispose.call(this)};t.updateTextNode_=function e(t){var r=this;if(t===void 0){t=0}t=vn(t);if(this.formattedTime_===t){return}this.formattedTime_=t;this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!r.contentEl_){return}var e=r.textNode_;if(e&&r.contentEl_.firstChild!==e){e=null;k.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")}r.textNode_=d.createTextNode(r.formattedTime_);if(!r.textNode_){return}if(e){r.contentEl_.replaceChild(r.textNode_,e)}else{r.contentEl_.appendChild(r.textNode_)}})};t.updateContent=function e(t){};return e}(At);gn.prototype.labelText_="Time";gn.prototype.controlText_="Time";At.registerComponent("TimeDisplay",gn);var yn=function(e){o(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.buildCSSClass=function e(){return"vjs-current-time"};r.updateContent=function e(t){var r;if(this.player_.ended()){r=this.player_.duration()}else{r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}this.updateTextNode_(r)};return t}(gn);yn.prototype.labelText_="Current Time";yn.prototype.controlText_="Current Time";At.registerComponent("CurrentTimeDisplay",yn);var mn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on(e,"durationchange",r.updateContent);r.on(e,"loadstart",r.updateContent);r.on(e,"loadedmetadata",r.updateContent);return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-duration"};t.updateContent=function e(t){var r=this.player_.duration();this.updateTextNode_(r)};return e}(gn);mn.prototype.labelText_="Duration";mn.prototype.controlText_="Duration";At.registerComponent("DurationDisplay",mn);var _n=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;r.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":true})};return e}(At);At.registerComponent("TimeDivider",_n);var bn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on(e,"durationchange",r.updateContent);return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-remaining-time"};t.createEl=function e(){var t=n.prototype.createEl.call(this);t.insertBefore(ue("span",{},{"aria-hidden":true},"-"),this.contentEl_);return t};t.updateContent=function e(t){if(typeof this.player_.duration()!=="number"){return}var r;if(this.player_.ended()){r=0}else if(this.player_.remainingTimeDisplay){r=this.player_.remainingTimeDisplay()}else{r=this.player_.remainingTime()}this.updateTextNode_(r)};return e}(gn);bn.prototype.labelText_="Remaining Time";bn.prototype.controlText_="Remaining Time";At.registerComponent("RemainingTimeDisplay",bn);var Tn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.updateShowing();r.on(r.player(),"durationchange",r.updateShowing);return r}var t=e.prototype;t.createEl=function e(){var t=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=ue("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"});t.appendChild(this.contentEl_);return t};t.dispose=function e(){this.contentEl_=null;n.prototype.dispose.call(this)};t.updateShowing=function e(t){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return e}(At);At.registerComponent("LiveDisplay",Tn);var En=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.updateLiveEdgeStatus();if(r.player_.liveTracker){r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatus)}return r}var t=e.prototype;t.createEl=function e(){var t=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=ue("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});t.appendChild(this.textEl_);return t};t.updateLiveEdgeStatus=function e(){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live")}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live")}};t.handleClick=function e(){this.player_.liveTracker.seekToLiveEdge()};t.dispose=function e(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus)}this.textEl_=null;n.prototype.dispose.call(this)};return e}(on);En.prototype.controlText_="Seek to live, currently playing live";At.registerComponent("SeekToLive",En);var wn=function e(t,r,n){t=Number(t);return Math.min(n,Math.max(r,isNaN(t)?r:t))};var Cn=function(i){o(e,i);function e(e,t){var r;r=i.call(this,e,t)||this;r.bar=r.getChild(r.options_.barName);r.vertical(!!r.options_.vertical);r.enable();return r}var t=e.prototype;t.enabled=function e(){return this.enabled_};t.enable=function e(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};t.disable=function e(){if(!this.enabled()){return}var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};t.createEl=function e(t,r,n){if(r===void 0){r={}}if(n===void 0){n={}}r.className=r.className+" vjs-slider";r=j({tabIndex:0},r);n=j({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n);return i.prototype.createEl.call(this,t,r,n)};t.handleMouseDown=function e(t){var r=this.bar.el_.ownerDocument;if(t.type==="mousedown"){t.preventDefault()}if(t.type==="touchstart"&&!W){t.preventDefault()}Te();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(r,"mousemove",this.handleMouseMove);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchmove",this.handleMouseMove);this.on(r,"touchend",this.handleMouseUp);this.handleMouseMove(t)};t.handleMouseMove=function e(t){};t.handleMouseUp=function e(){var t=this.bar.el_.ownerDocument;Ee();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.update()};t.update=function e(){var t=this;if(!this.el_||!this.bar){return}var r=this.getProgress();if(r===this.progress_){return r}this.progress_=r;this.requestNamedAnimationFrame("Slider#update",function(){var e=t.vertical()?"height":"width";t.bar.el().style[e]=(r*100).toFixed(2)+"%"});return r};t.getProgress=function e(){return Number(wn(this.getPercent(),0,1).toFixed(4))};t.calculateDistance=function e(t){var r=ke(this.el_,t);if(this.vertical()){return r.y}return r.x};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Left")||g.isEventKey(t,"Down")){t.preventDefault();t.stopPropagation();this.stepBack()}else if(g.isEventKey(t,"Right")||g.isEventKey(t,"Up")){t.preventDefault();t.stopPropagation();this.stepForward()}else{i.prototype.handleKeyDown.call(this,t)}};t.handleClick=function e(t){t.stopPropagation();t.preventDefault()};t.vertical=function e(t){if(t===undefined){return this.vertical_||false}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return e}(At);At.registerComponent("Slider",Cn);var kn=function e(t,r){return wn(t/r*100,0,100).toFixed(2)+"%"};var Sn=function(s){o(e,s);function e(e,t){var r;r=s.call(this,e,t)||this;r.partEls_=[];r.on(e,"progress",r.update);return r}var t=e.prototype;t.createEl=function e(){var t=s.prototype.createEl.call(this,"div",{className:"vjs-load-progress"});var r=ue("span",{className:"vjs-control-text"});var n=ue("span",{textContent:this.localize("Loaded")});var i=d.createTextNode(": ");this.percentageEl_=ue("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});t.appendChild(r);r.appendChild(n);r.appendChild(i);r.appendChild(this.percentageEl_);return t};t.dispose=function e(){this.partEls_=null;this.percentageEl_=null;s.prototype.dispose.call(this)};t.update=function e(t){var h=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=h.player_.liveTracker;var t=h.player_.buffered();var r=e&&e.isLive()?e.seekableEnd():h.player_.duration();var n=h.player_.bufferedEnd();var i=h.partEls_;var s=kn(n,r);if(h.percent_!==s){h.el_.style.width=s;ce(h.percentageEl_,s);h.percent_=s}for(var a=0;a<t.length;a++){var o=t.start(a);var l=t.end(a);var u=i[a];if(!u){u=h.el_.appendChild(ue());i[a]=u}if(u.dataset.start===o&&u.dataset.end===l){continue}u.dataset.start=o;u.dataset.end=l;u.style.left=kn(o,n);u.style.width=kn(l-o,n)}for(var c=i.length;c>t.length;c--){h.el_.removeChild(i[c-1])}i.length=t.length})};return e}(At);At.registerComponent("LoadProgressBar",Sn);var xn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.update=ot(at(p(r),r.update),st);return r}var t=e.prototype;t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};t.update=function e(t,r,n){var i=Ce(this.el_);var s=we(this.player_.el());var a=t.width*r;if(!s||!i){return}var o=t.left-s.left+a;var l=t.width-a+(s.right-t.right);var u=i.width/2;if(o<u){u+=u-o}else if(l<u){u=l}if(u<0){u=0}else if(u>i.width){u=i.width}u=Math.round(u);this.el_.style.right="-"+u+"px";this.write(n)};t.write=function e(t){ce(this.el_,t)};t.updateTime=function e(i,s,a,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var e;var t=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var r=l.player_.liveTracker.liveWindow();var n=r-s*r;e=(n<1?"":"-")+vn(n,r)}else{e=vn(a,t)}l.update(i,s,e);if(o){o()}})};return e}(At);At.registerComponent("TimeTooltip",xn);var Pn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.update=ot(at(p(r),r.update),st);return r}var t=e.prototype;t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};t.update=function e(t,r){var n=this.getChild("timeTooltip");if(!n){return}var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(t,r,i)};return e}(At);Pn.prototype.options_={children:[]};if(!Z&&!H){Pn.prototype.options_.children.push("timeTooltip")}At.registerComponent("PlayProgressBar",Pn);var On=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.update=ot(at(p(r),r.update),st);return r}var t=e.prototype;t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};t.update=function e(t,r){var n=this;var i=r*this.player_.duration();this.getChild("timeTooltip").updateTime(t,r,i,function(){n.el_.style.left=t.width*r+"px"})};return e}(At);On.prototype.options_={children:["timeTooltip"]};At.registerComponent("MouseTimeDisplay",On);var In=5;var jn=12;var An=function(s){o(e,s);function e(e,t){var r;r=s.call(this,e,t)||this;r.setEventHandlers_();return r}var t=e.prototype;t.setEventHandlers_=function e(){this.update_=at(this,this.update);this.update=ot(this.update_,st);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in d&&"visibilityState"in d){this.on(d,"visibilitychange",this.toggleVisibility_)}};t.toggleVisibility_=function e(t){if(d.visibilityState==="hidden"){this.cancelNamedAnimationFrame("SeekBar#update");this.cancelNamedAnimationFrame("Slider#update");this.disableInterval_(t)}else{if(!this.player_.ended()&&!this.player_.paused()){this.enableInterval_()}this.update()}};t.enableInterval_=function e(){if(this.updateInterval){return}this.updateInterval=this.setInterval(this.update,st)};t.disableInterval_=function e(t){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"){return}if(!this.updateInterval){return}this.clearInterval(this.updateInterval);this.updateInterval=null};t.createEl=function e(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};t.update=function e(t){var n=this;if(d.visibilityState==="hidden"){return}var i=s.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_();var t=n.player_.liveTracker;var r=n.player_.duration();if(t&&t.isLive()){r=n.player_.liveTracker.liveCurrentTime()}if(n.percent_!==i){n.el_.setAttribute("aria-valuenow",(i*100).toFixed(2));n.percent_=i}if(n.currentTime_!==e||n.duration_!==r){n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[vn(e,r),vn(r,r)],"{1} of {2}"));n.currentTime_=e;n.duration_=r}if(n.bar){n.bar.update(we(n.el()),n.getProgress())}});return i};t.getCurrentTime_=function e(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};t.getPercent=function e(){var t=this.getCurrentTime_();var r;var n=this.player_.liveTracker;if(n&&n.isLive()){r=(t-n.seekableStart())/n.liveWindow();if(n.atLiveEdge()){r=1}}else{r=t/this.player_.duration()}return r};t.handleMouseDown=function e(t){if(!je(t)){return}t.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();s.prototype.handleMouseDown.call(this,t)};t.handleMouseMove=function e(t){if(!je(t)){return}var r;var n=this.calculateDistance(t);var i=this.player_.liveTracker;if(!i||!i.isLive()){r=n*this.player_.duration();if(r===this.player_.duration()){r=r-.1}}else{if(n>=.99){i.seekToLiveEdge();return}var s=i.seekableStart();var a=i.liveCurrentTime();r=s+n*i.liveWindow();if(r>=a){r=a}if(r<=s){r=s+.1}if(r===Infinity){return}}this.player_.currentTime(r)};t.enable=function e(){s.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");if(!t){return}t.show()};t.disable=function e(){s.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");if(!t){return}t.hide()};t.handleMouseUp=function e(t){s.prototype.handleMouseUp.call(this,t);if(t){t.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){Ut(this.player_.play())}else{this.update_()}};t.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+In)};t.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-In)};t.handleAction=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Space")||g.isEventKey(t,"Enter")){t.preventDefault();t.stopPropagation();this.handleAction(t)}else if(g.isEventKey(t,"Home")){t.preventDefault();t.stopPropagation();this.player_.currentTime(0)}else if(g.isEventKey(t,"End")){t.preventDefault();t.stopPropagation();this.player_.currentTime(this.player_.duration())}else if(/^[0-9]$/.test(g(t))){t.preventDefault();t.stopPropagation();var r=(g.codes[g(t)]-g.codes["0"])*10/100;this.player_.currentTime(this.player_.duration()*r)}else if(g.isEventKey(t,"PgDn")){t.preventDefault();t.stopPropagation();this.player_.currentTime(this.player_.currentTime()-In*jn)}else if(g.isEventKey(t,"PgUp")){t.preventDefault();t.stopPropagation();this.player_.currentTime(this.player_.currentTime()+In*jn)}else{s.prototype.handleKeyDown.call(this,t)}};t.dispose=function e(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in d&&"visibilityState"in d){this.off(d,"visibilitychange",this.toggleVisibility_)}s.prototype.dispose.call(this)};return e}(Cn);An.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!Z&&!H){An.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}At.registerComponent("SeekBar",An);var Mn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.handleMouseMove=ot(at(p(r),r.handleMouseMove),st);r.throttledHandleMouseSeek=ot(at(p(r),r.handleMouseSeek),st);r.enable();return r}var t=e.prototype;t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};t.handleMouseMove=function e(t){var r=this.getChild("seekBar");if(!r){return}var n=r.getChild("playProgressBar");var i=r.getChild("mouseTimeDisplay");if(!n&&!i){return}var s=r.el();var a=Ce(s);var o=ke(s,t).x;o=wn(o,0,1);if(i){i.update(a,o)}if(n){n.update(a,r.getProgress())}};t.handleMouseSeek=function e(t){var r=this.getChild("seekBar");if(r){r.handleMouseMove(t)}};t.enabled=function e(){return this.enabled_};t.disable=function e(){this.children().forEach(function(e){return e.disable&&e.disable()});if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.removeListenersAddedOnMousedownAndTouchstart();this.addClass("disabled");this.enabled_=false;if(this.player_.scrubbing()){var t=this.getChild("seekBar");this.player_.scrubbing(false);if(t.videoWasPlaying){Ut(this.player_.play())}}};t.enable=function e(){this.children().forEach(function(e){return e.enable&&e.enable()});if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};t.removeListenersAddedOnMousedownAndTouchstart=function e(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek);this.off(t,"touchmove",this.throttledHandleMouseSeek);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchend",this.handleMouseUp)};t.handleMouseDown=function e(t){var r=this.el_.ownerDocument;var n=this.getChild("seekBar");if(n){n.handleMouseDown(t)}this.on(r,"mousemove",this.throttledHandleMouseSeek);this.on(r,"touchmove",this.throttledHandleMouseSeek);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchend",this.handleMouseUp)};t.handleMouseUp=function e(t){var r=this.getChild("seekBar");if(r){r.handleMouseUp(t)}this.removeListenersAddedOnMousedownAndTouchstart()};return e}(At);Mn.prototype.options_={children:["seekBar"]};At.registerComponent("ProgressControl",Mn);var Ln=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on(e,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange);r.on(e,["disablepictureinpicturechanged","loadedmetadata"],r.handlePictureInPictureEnabledChange);r.disable();return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)};t.handlePictureInPictureEnabledChange=function e(){if(d.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===false){this.enable()}else{this.disable()}};t.handlePictureInPictureChange=function e(t){if(this.player_.isInPictureInPicture()){this.controlText("Exit Picture-in-Picture")}else{this.controlText("Picture-in-Picture")}this.handlePictureInPictureEnabledChange()};t.handleClick=function e(t){if(!this.player_.isInPictureInPicture()){this.player_.requestPictureInPicture()}else{this.player_.exitPictureInPicture()}};return e}(on);Ln.prototype.controlText_="Picture-in-Picture";At.registerComponent("PictureInPictureToggle",Ln);var Rn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on(e,"fullscreenchange",r.handleFullscreenChange);if(d[e.fsApi_.fullscreenEnabled]===false){r.disable()}return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)};t.handleFullscreenChange=function e(t){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};t.handleClick=function e(t){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return e}(on);Rn.prototype.controlText_="Fullscreen";At.registerComponent("FullscreenToggle",Rn);var Nn=function e(t,r){if(r.tech_&&!r.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}t.on(r,"loadstart",function(){if(!r.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}})};var Dn=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;r.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return e}(At);At.registerComponent("VolumeLevel",Dn);var Bn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on("slideractive",r.updateLastVolume_);r.on(e,"volumechange",r.updateARIAAttributes);e.ready(function(){return r.updateARIAAttributes()});return r}var t=e.prototype;t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};t.handleMouseDown=function e(t){if(!je(t)){return}n.prototype.handleMouseDown.call(this,t)};t.handleMouseMove=function e(t){if(!je(t)){return}this.checkMuted();this.player_.volume(this.calculateDistance(t))};t.checkMuted=function e(){if(this.player_.muted()){this.player_.muted(false)}};t.getPercent=function e(){if(this.player_.muted()){return 0}return this.player_.volume()};t.stepForward=function e(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};t.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};t.updateARIAAttributes=function e(t){var r=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",r);this.el_.setAttribute("aria-valuetext",r+"%")};t.volumeAsPercentage_=function e(){return Math.round(this.player_.volume()*100)};t.updateLastVolume_=function e(){var t=this;var r=this.player_.volume();this.one("sliderinactive",function(){if(t.player_.volume()===0){t.player_.lastVolume_(r)}})};return e}(Cn);Bn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};Bn.prototype.playerEvent="volumechange";At.registerComponent("VolumeBar",Bn);var Fn=function(n){o(e,n);function e(e,t){var r;if(t===void 0){t={}}t.vertical=t.vertical||false;if(typeof t.volumeBar==="undefined"||M(t.volumeBar)){t.volumeBar=t.volumeBar||{};t.volumeBar.vertical=t.vertical}r=n.call(this,e,t)||this;Nn(p(r),e);r.throttledHandleMouseMove=ot(at(p(r),r.handleMouseMove),st);r.on("mousedown",r.handleMouseDown);r.on("touchstart",r.handleMouseDown);r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active");r.addClass("vjs-slider-active");r.trigger("slideractive")});r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active");r.removeClass("vjs-slider-active");r.trigger("sliderinactive")});return r}var t=e.prototype;t.createEl=function e(){var t="vjs-volume-horizontal";if(this.options_.vertical){t="vjs-volume-vertical"}return n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})};t.handleMouseDown=function e(t){var r=this.el_.ownerDocument;this.on(r,"mousemove",this.throttledHandleMouseMove);this.on(r,"touchmove",this.throttledHandleMouseMove);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchend",this.handleMouseUp)};t.handleMouseUp=function e(t){var r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseMove);this.off(r,"touchmove",this.throttledHandleMouseMove);this.off(r,"mouseup",this.handleMouseUp);this.off(r,"touchend",this.handleMouseUp)};t.handleMouseMove=function e(t){this.volumeBar.handleMouseMove(t)};return e}(At);Fn.prototype.options_={children:["volumeBar"]};At.registerComponent("VolumeControl",Fn);var Hn=function e(t,r){if(r.tech_&&!r.tech_.featuresMuteControl){t.addClass("vjs-hidden")}t.on(r,"loadstart",function(){if(!r.tech_.featuresMuteControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}})};var Un=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;Hn(p(r),e);r.on(e,["loadstart","volumechange"],r.update);return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)};t.handleClick=function e(t){var r=this.player_.volume();var n=this.player_.lastVolume_();if(r===0){var i=n<.1?.1:n;this.player_.volume(i);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};t.update=function e(t){this.updateIcon_();this.updateControlText_()};t.updateIcon_=function e(){var t=this.player_.volume();var r=3;if(Z&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted)}if(t===0||this.player_.muted()){r=0}else if(t<.33){r=1}else if(t<.67){r=2}for(var n=0;n<4;n++){pe(this.el_,"vjs-vol-"+n)}de(this.el_,"vjs-vol-"+r)};t.updateControlText_=function e(){var t=this.player_.muted()||this.player_.volume()===0;var r=t?"Unmute":"Mute";if(this.controlText()!==r){this.controlText(r)}};return e}(on);Un.prototype.controlText_="Mute";At.registerComponent("MuteToggle",Un);var Vn=function(n){o(e,n);function e(e,t){var r;if(t===void 0){t={}}if(typeof t.inline!=="undefined"){t.inline=t.inline}else{t.inline=true}if(typeof t.volumeControl==="undefined"||M(t.volumeControl)){t.volumeControl=t.volumeControl||{};t.volumeControl.vertical=!t.inline}r=n.call(this,e,t)||this;r.on(e,["loadstart"],r.volumePanelState_);r.on(r.muteToggle,"keyup",r.handleKeyPress);r.on(r.volumeControl,"keyup",r.handleVolumeControlKeyUp);r.on("keydown",r.handleKeyPress);r.on("mouseover",r.handleMouseOver);r.on("mouseout",r.handleMouseOut);r.on(r.volumeControl,["slideractive"],r.sliderActive_);r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_);return r}var t=e.prototype;t.sliderActive_=function e(){this.addClass("vjs-slider-active")};t.sliderInactive_=function e(){this.removeClass("vjs-slider-active")};t.volumePanelState_=function e(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};t.createEl=function e(){var t="vjs-volume-panel-horizontal";if(!this.options_.inline){t="vjs-volume-panel-vertical"}return n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})};t.dispose=function e(){this.handleMouseOut();n.prototype.dispose.call(this)};t.handleVolumeControlKeyUp=function e(t){if(g.isEventKey(t,"Esc")){this.muteToggle.focus()}};t.handleMouseOver=function e(t){this.addClass("vjs-hover");Ze(d,"keyup",at(this,this.handleKeyPress))};t.handleMouseOut=function e(t){this.removeClass("vjs-hover");et(d,"keyup",at(this,this.handleKeyPress))};t.handleKeyPress=function e(t){if(g.isEventKey(t,"Esc")){this.handleMouseOut()}};return e}(At);Vn.prototype.options_={children:["muteToggle","volumeControl"]};At.registerComponent("VolumePanel",Vn);var zn=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;if(t){r.menuButton_=t.menuButton}r.focusedChild_=-1;r.on("keydown",r.handleKeyDown);r.boundHandleBlur_=at(p(r),r.handleBlur);r.boundHandleTapClick_=at(p(r),r.handleTapClick);return r}var t=e.prototype;t.addEventListenerForItem=function e(t){if(!(t instanceof At)){return}this.on(t,"blur",this.boundHandleBlur_);this.on(t,["tap","click"],this.boundHandleTapClick_)};t.removeEventListenerForItem=function e(t){if(!(t instanceof At)){return}this.off(t,"blur",this.boundHandleBlur_);this.off(t,["tap","click"],this.boundHandleTapClick_)};t.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}this.removeEventListenerForItem(t);n.prototype.removeChild.call(this,t)};t.addItem=function e(t){var r=this.addChild(t);if(r){this.addEventListenerForItem(r)}};t.createEl=function e(){var t=this.options_.contentElType||"ul";this.contentEl_=ue(t,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var r=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});r.appendChild(this.contentEl_);Ze(r,"click",function(e){e.preventDefault();e.stopImmediatePropagation()});return r};t.dispose=function e(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;n.prototype.dispose.call(this)};t.handleBlur=function e(t){var r=t.relatedTarget||d.activeElement;if(!this.children().some(function(e){return e.el()===r})){var n=this.menuButton_;if(n&&n.buttonPressed_&&r!==n.el().firstChild){n.unpressButton()}}};t.handleTapClick=function e(t){if(this.menuButton_){this.menuButton_.unpressButton();var r=this.children();if(!Array.isArray(r)){return}var n=r.filter(function(e){return e.el()===t.target})[0];if(!n){return}if(n.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Left")||g.isEventKey(t,"Down")){t.preventDefault();t.stopPropagation();this.stepForward()}else if(g.isEventKey(t,"Right")||g.isEventKey(t,"Up")){t.preventDefault();t.stopPropagation();this.stepBack()}};t.stepForward=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_+1}this.focus(t)};t.stepBack=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_-1}this.focus(t)};t.focus=function e(t){if(t===void 0){t=0}var r=this.children().slice();var n=r.length&&r[0].hasClass("vjs-menu-title");if(n){r.shift()}if(r.length>0){if(t<0){t=0}else if(t>=r.length){t=r.length-1}this.focusedChild_=t;r[t].el_.focus()}};return e}(At);At.registerComponent("Menu",zn);var Kn=function(i){o(e,i);function e(e,t){var r;if(t===void 0){t={}}r=i.call(this,e,t)||this;r.menuButton_=new on(e,t);r.menuButton_.controlText(r.controlText_);r.menuButton_.el_.setAttribute("aria-haspopup","true");var n=on.prototype.buildCSSClass();r.menuButton_.el_.className=r.buildCSSClass()+" "+n;r.menuButton_.removeClass("vjs-control");r.addChild(r.menuButton_);r.update();r.enabled_=true;r.on(r.menuButton_,"tap",r.handleClick);r.on(r.menuButton_,"click",r.handleClick);r.on(r.menuButton_,"keydown",r.handleKeyDown);r.on(r.menuButton_,"mouseenter",function(){r.addClass("vjs-hover");r.menu.show();Ze(d,"keyup",at(p(r),r.handleMenuKeyUp))});r.on("mouseleave",r.handleMouseLeave);r.on("keydown",r.handleSubmenuKeyDown);return r}var t=e.prototype;t.update=function e(){var t=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=t;this.addChild(t);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};t.createMenu=function e(){var t=new zn(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var r=ue("li",{className:"vjs-menu-title",innerHTML:kt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new At(this.player_,{el:r});t.addItem(n)}this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){t.addItem(this.items[i])}}return t};t.createItems=function e(){};t.createEl=function e(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};t.buildWrapperCSSClass=function e(){var t="vjs-menu-button";if(this.options_.inline===true){t+="-inline"}else{t+="-popup"}var r=on.prototype.buildCSSClass();return"vjs-menu-button "+t+" "+r+" "+i.prototype.buildCSSClass.call(this)};t.buildCSSClass=function e(){var t="vjs-menu-button";if(this.options_.inline===true){t+="-inline"}else{t+="-popup"}return"vjs-menu-button "+t+" "+i.prototype.buildCSSClass.call(this)};t.controlText=function e(t,r){if(r===void 0){r=this.menuButton_.el()}return this.menuButton_.controlText(t,r)};t.dispose=function e(){this.handleMouseLeave();i.prototype.dispose.call(this)};t.handleClick=function e(t){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};t.handleMouseLeave=function e(t){this.removeClass("vjs-hover");et(d,"keyup",at(this,this.handleMenuKeyUp))};t.focus=function e(){this.menuButton_.focus()};t.blur=function e(){this.menuButton_.blur()};t.handleKeyDown=function e(t){if(g.isEventKey(t,"Esc")||g.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!g.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}else if(g.isEventKey(t,"Up")||g.isEventKey(t,"Down")){if(!this.buttonPressed_){t.preventDefault();this.pressButton()}}};t.handleMenuKeyUp=function e(t){if(g.isEventKey(t,"Esc")||g.isEventKey(t,"Tab")){this.removeClass("vjs-hover")}};t.handleSubmenuKeyPress=function e(t){this.handleSubmenuKeyDown(t)};t.handleSubmenuKeyDown=function e(t){if(g.isEventKey(t,"Esc")||g.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!g.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}};t.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(Z&&oe()){return}this.menu.focus()}};t.unpressButton=function e(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false")}};t.disable=function e(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};t.enable=function e(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return e}(At);At.registerComponent("MenuButton",Kn);var Wn=function(s){o(e,s);function e(e,t){var r;var n=t.tracks;r=s.call(this,e,t)||this;if(r.items.length<=1){r.hide()}if(!n){return p(r)}var i=at(p(r),r.update);n.addEventListener("removetrack",i);n.addEventListener("addtrack",i);n.addEventListener("labelchange",i);r.player_.on("ready",i);r.player_.on("dispose",function(){n.removeEventListener("removetrack",i);n.removeEventListener("addtrack",i);n.removeEventListener("labelchange",i)});return r}return e}(Kn);At.registerComponent("TrackButton",Wn);var Yn=["Tab","Esc","Up","Down","Right","Left"];var qn=function(i){o(e,i);function e(e,t){var r;r=i.call(this,e,t)||this;r.selectable=t.selectable;r.isSelected_=t.selected||false;r.multiSelectable=t.multiSelectable;r.selected(r.isSelected_);if(r.selectable){if(r.multiSelectable){r.el_.setAttribute("role","menuitemcheckbox")}else{r.el_.setAttribute("role","menuitemradio")}}else{r.el_.setAttribute("role","menuitem")}return r}var t=e.prototype;t.createEl=function e(t,r,n){this.nonIconControl=true;return i.prototype.createEl.call(this,"li",j({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},r),n)};t.handleKeyDown=function e(t){if(!Yn.some(function(e){return g.isEventKey(t,e)})){i.prototype.handleKeyDown.call(this,t)}};t.handleClick=function e(t){this.selected(true)};t.selected=function e(t){if(this.selectable){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return e}(Qr);At.registerComponent("MenuItem",qn);var Gn=function(l){o(e,l);function e(e,t){var i;var r=t.track;var n=e.textTracks();t.label=r.label||r.language||"Unknown";t.selected=r.mode==="showing";i=l.call(this,e,t)||this;i.track=r;i.kinds=(t.kinds||[t.kind||i.track.kind]).filter(Boolean);var s=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i.handleTracksChange.apply(p(i),r)};var a=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i.handleSelectedLanguageChange.apply(p(i),r)};e.on(["loadstart","texttrackchange"],s);n.addEventListener("change",s);n.addEventListener("selectedlanguagechange",a);i.on("dispose",function(){e.off(["loadstart","texttrackchange"],s);n.removeEventListener("change",s);n.removeEventListener("selectedlanguagechange",a)});if(n.onchange===undefined){var o;i.on(["tap","click"],function(){if(typeof f.Event!=="object"){try{o=new f.Event("change")}catch(e){}}if(!o){o=d.createEvent("Event");o.initEvent("change",true,true)}n.dispatchEvent(o)})}i.handleTracksChange();return i}var t=e.prototype;t.handleClick=function e(t){var r=this.track;var n=this.player_.textTracks();l.prototype.handleClick.call(this,t);if(!n){return}for(var i=0;i<n.length;i++){var s=n[i];if(this.kinds.indexOf(s.kind)===-1){continue}if(s===r){if(s.mode!=="showing"){s.mode="showing"}}else if(s.mode!=="disabled"){s.mode="disabled"}}};t.handleTracksChange=function e(t){var r=this.track.mode==="showing";if(r!==this.isSelected_){this.selected(r)}};t.handleSelectedLanguageChange=function e(t){if(this.track.mode==="showing"){var r=this.player_.cache_.selectedLanguage;if(r&&r.enabled&&r.language===this.track.language&&r.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};t.dispose=function e(){this.track=null;l.prototype.dispose.call(this)};return e}(qn);At.registerComponent("TextTrackMenuItem",Gn);var $n=function(r){o(e,r);function e(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:false,mode:"disabled"};if(!t.kinds){t.kinds=[t.kind]}if(t.label){t.track.label=t.label}else{t.track.label=t.kinds.join(" and ")+" off"}t.selectable=true;t.multiSelectable=false;return r.call(this,e,t)||this}var t=e.prototype;t.handleTracksChange=function e(t){var r=this.player().textTracks();var n=true;for(var i=0,s=r.length;i<s;i++){var a=r[i];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){n=false;break}}if(n!==this.isSelected_){this.selected(n)}};t.handleSelectedLanguageChange=function e(t){var r=this.player().textTracks();var n=true;for(var i=0,s=r.length;i<s;i++){var a=r[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){n=false;break}}if(n){this.player_.cache_.selectedLanguage={enabled:false}}};return e}(Gn);At.registerComponent("OffTextTrackMenuItem",$n);var Xn=function(r){o(e,r);function e(e,t){if(t===void 0){t={}}t.tracks=e.textTracks();return r.call(this,e,t)||this}var t=e.prototype;t.createItems=function e(t,r){if(t===void 0){t=[]}if(r===void 0){r=Gn}var n;if(this.label_){n=this.label_+" off"}t.push(new $n(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n}));this.hideThreshold_+=1;var i=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var s=0;s<i.length;s++){var a=i[s];if(this.kinds_.indexOf(a.kind)>-1){var o=new r(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:true,multiSelectable:false});o.addClass("vjs-"+a.kind+"-menu-item");t.push(o)}}return t};return e}(Wn);At.registerComponent("TextTrackButton",Xn);var Qn=function(a){o(e,a);function e(e,t){var r;var n=t.track;var i=t.cue;var s=e.currentTime();t.selectable=true;t.multiSelectable=false;t.label=i.text;t.selected=i.startTime<=s&&s<i.endTime;r=a.call(this,e,t)||this;r.track=n;r.cue=i;n.addEventListener("cuechange",at(p(r),r.update));return r}var t=e.prototype;t.handleClick=function e(t){a.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};t.update=function e(t){var r=this.cue;var n=this.player_.currentTime();this.selected(r.startTime<=n&&n<r.endTime)};return e}(qn);At.registerComponent("ChaptersTrackMenuItem",Qn);var Jn=function(n){o(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)};t.update=function e(t){if(!this.track_||t&&(t.type==="addtrack"||t.type==="removetrack")){this.setTrack(this.findChaptersTrack())}n.prototype.update.call(this)};t.setTrack=function e(t){if(this.track_===t){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(r){r.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=t;if(this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(n){n.addEventListener("load",this.updateHandler_)}}};t.findChaptersTrack=function e(){var t=this.player_.textTracks()||[];for(var r=t.length-1;r>=0;r--){var n=t[r];if(n.kind===this.kind_){return n}}};t.getMenuCaption=function e(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(kt(this.kind_))};t.createMenu=function e(){this.options_.title=this.getMenuCaption();return n.prototype.createMenu.call(this)};t.createItems=function e(){var t=[];if(!this.track_){return t}var r=this.track_.cues;if(!r){return t}for(var n=0,i=r.length;n<i;n++){var s=r[n];var a=new Qn(this.player_,{track:this.track_,cue:s});t.push(a)}return t};return e}(Xn);Jn.prototype.kind_="chapters";Jn.prototype.controlText_="Chapters";At.registerComponent("ChaptersButton",Jn);var Zn=function(a){o(e,a);function e(e,t,r){var n;n=a.call(this,e,t,r)||this;var i=e.textTracks();var s=at(p(n),n.handleTracksChange);i.addEventListener("change",s);n.on("dispose",function(){i.removeEventListener("change",s)});return n}var t=e.prototype;t.handleTracksChange=function e(t){var r=this.player().textTracks();var n=false;for(var i=0,s=r.length;i<s;i++){var a=r[i];if(a.kind!==this.kind_&&a.mode==="showing"){n=true;break}}if(n){this.disable()}else{this.enable()}};t.buildCSSClass=function e(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)};return e}(Xn);Zn.prototype.kind_="descriptions";Zn.prototype.controlText_="Descriptions";At.registerComponent("DescriptionsButton",Zn);var ei=function(n){o(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)};return e}(Xn);ei.prototype.kind_="subtitles";ei.prototype.controlText_="Subtitles";At.registerComponent("SubtitlesButton",ei);var ti=function(n){o(e,n);function e(e,t){var r;t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:false,default:false,mode:"disabled"};t.selectable=false;t.name="CaptionSettingsMenuItem";r=n.call(this,e,t)||this;r.addClass("vjs-texttrack-settings");r.controlText(", opens "+t.kind+" settings dialog");return r}var t=e.prototype;t.handleClick=function e(t){this.player().getChild("textTrackSettings").open()};return e}(Gn);At.registerComponent("CaptionSettingsMenuItem",ti);var ri=function(n){o(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)};t.createItems=function e(){var t=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){t.push(new ti(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return n.prototype.createItems.call(this,t)};return e}(Xn);ri.prototype.kind_="captions";ri.prototype.controlText_="Captions";At.registerComponent("CaptionsButton",ri);var ni=function(a){o(e,a);function e(){return a.apply(this,arguments)||this}var t=e.prototype;t.createEl=function e(t,r,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}i+="</span>";var s=a.prototype.createEl.call(this,t,j({innerHTML:i},r),n);return s};return e}(Gn);At.registerComponent("SubsCapsMenuItem",ni);var ii=function(n){o(e,n);function e(e,t){var r;if(t===void 0){t={}}r=n.call(this,e,t)||this;r.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1){r.label_="captions"}r.menuButton_.controlText(kt(r.label_));return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)};t.createItems=function e(){var t=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){t.push(new ti(this.player_,{kind:this.label_}));this.hideThreshold_+=1}t=n.prototype.createItems.call(this,t,ni);return t};return e}(Xn);ii.prototype.kinds_=["captions","subtitles"];ii.prototype.controlText_="Subtitles";At.registerComponent("SubsCapsButton",ii);var si=function(a){o(e,a);function e(e,t){var i;var r=t.track;var n=e.audioTracks();t.label=r.label||r.language||"Unknown";t.selected=r.enabled;i=a.call(this,e,t)||this;i.track=r;i.addClass("vjs-"+r.kind+"-menu-item");var s=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i.handleTracksChange.apply(p(i),r)};n.addEventListener("change",s);i.on("dispose",function(){n.removeEventListener("change",s)});return i}var t=e.prototype;t.createEl=function e(t,r,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}i+="</span>";var s=a.prototype.createEl.call(this,t,j({innerHTML:i},r),n);return s};t.handleClick=function e(t){var r=this.player_.audioTracks();a.prototype.handleClick.call(this,t);for(var n=0;n<r.length;n++){var i=r[n];i.enabled=i===this.track}};t.handleTracksChange=function e(t){this.selected(this.track.enabled)};return e}(qn);At.registerComponent("AudioTrackMenuItem",si);var ai=function(r){o(e,r);function e(e,t){if(t===void 0){t={}}t.tracks=e.audioTracks();return r.call(this,e,t)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-audio-button "+r.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-audio-button "+r.prototype.buildWrapperCSSClass.call(this)};t.createItems=function e(t){if(t===void 0){t=[]}this.hideThreshold_=1;var r=this.player_.audioTracks();for(var n=0;n<r.length;n++){var i=r[n];t.push(new si(this.player_,{track:i,selectable:true,multiSelectable:false}))}return t};return e}(Wn);ai.prototype.controlText_="Audio Track";At.registerComponent("AudioTrackButton",ai);var oi=function(s){o(e,s);function e(e,t){var r;var n=t.rate;var i=parseFloat(n,10);t.label=n;t.selected=i===1;t.selectable=true;t.multiSelectable=false;r=s.call(this,e,t)||this;r.label=n;r.rate=i;r.on(e,"ratechange",r.update);return r}var t=e.prototype;t.handleClick=function e(t){s.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};t.update=function e(t){this.selected(this.player().playbackRate()===this.rate)};return e}(qn);oi.prototype.contentElType="button";At.registerComponent("PlaybackRateMenuItem",oi);var li=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.updateVisibility();r.updateLabel();r.on(e,"loadstart",r.updateVisibility);r.on(e,"ratechange",r.updateLabel);return r}var t=e.prototype;t.createEl=function e(){var t=n.prototype.createEl.call(this);this.labelEl_=ue("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});t.appendChild(this.labelEl_);return t};t.dispose=function e(){this.labelEl_=null;n.prototype.dispose.call(this)};t.buildCSSClass=function e(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)};t.createMenu=function e(){var t=new zn(this.player());var r=this.playbackRates();if(r){for(var n=r.length-1;n>=0;n--){t.addChild(new oi(this.player(),{rate:r[n]+"x"}))}}return t};t.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};t.handleClick=function e(t){var r=this.player().playbackRate();var n=this.playbackRates();var i=n[0];for(var s=0;s<n.length;s++){if(n[s]>r){i=n[s];break}}this.player().playbackRate(i)};t.playbackRates=function e(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};t.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};t.updateVisibility=function e(t){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};t.updateLabel=function e(t){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return e}(Kn);li.prototype.controlText_="Playback Rate";At.registerComponent("PlaybackRateMenuButton",li);var ui=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;r.buildCSSClass=function e(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)};r.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return e}(At);At.registerComponent("Spacer",ui);var ci=function(r){o(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-custom-control-spacer "+r.prototype.buildCSSClass.call(this)};t.createEl=function e(){var t=r.prototype.createEl.call(this,{className:this.buildCSSClass()});t.innerHTML="";return t};return e}(ui);At.registerComponent("CustomControlSpacer",ci);var hi=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;r.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return e}(At);hi.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};if("exitPictureInPicture"in d){hi.prototype.options_.children.splice(hi.prototype.options_.children.length-1,0,"pictureInPictureToggle")}At.registerComponent("ControlBar",hi);var fi=function(n){o(e,n);function e(e,t){var r;r=n.call(this,e,t)||this;r.on(e,"error",r.open);return r}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)};t.content=function e(){var t=this.player().error();return t?this.localize(t.message):""};return e}(qt);fi.prototype.options_=i({},qt.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});At.registerComponent("ErrorDisplay",fi);var di="vjs-text-track-settings";var pi=["#000","Black"];var vi=["#00F","Blue"];var gi=["#0FF","Cyan"];var yi=["#0F0","Green"];var mi=["#F0F","Magenta"];var _i=["#F00","Red"];var bi=["#FFF","White"];var Ti=["#FF0","Yellow"];var Ei=["1","Opaque"];var wi=["0.5","Semi-Transparent"];var Ci=["0","Transparent"];var ki={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[pi,bi,_i,yi,vi,Ti,mi,gi]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ei,wi,Ci]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[bi,pi,_i,yi,vi,Ti,mi,gi]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function e(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ei,wi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ci,wi,Ei]}};ki.windowColor.options=ki.backgroundColor.options;function Si(e,t){if(t){e=t(e)}if(e&&e!=="none"){return e}}function xi(e,t){var r=e.options[e.options.selectedIndex].value;return Si(r,t)}function Pi(e,t,r){if(!t){return}for(var n=0;n<e.options.length;n++){if(Si(e.options[n].value,r)===t){e.selectedIndex=n;break}}}var Oi=function(n){o(e,n);function e(e,t){var r;t.temporary=false;r=n.call(this,e,t)||this;r.updateDisplay=at(p(r),r.updateDisplay);r.fill();r.hasBeenOpened_=r.hasBeenFilled_=true;r.endDialog=ue("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")});r.el().appendChild(r.endDialog);r.setDefaults();if(t.persistTextTrackSettings===undefined){r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings}r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings();r.close()});r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults();r.updateDisplay()});O(ki,function(e){r.on(r.$(e.selector),"change",r.updateDisplay)});if(r.options_.persistTextTrackSettings){r.restoreSettings()}return r}var t=e.prototype;t.dispose=function e(){this.endDialog=null;n.prototype.dispose.call(this)};t.createElSelect_=function e(t,r,n){var i=this;if(r===void 0){r=""}if(n===void 0){n="label"}var s=ki[t];var a=s.id.replace("%s",this.id_);var o=[r,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+(n==="label"?"vjs-label":"")+'">',this.localize(s.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(s.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")};t.createElFgColor_=function e(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")};t.createElBgColor_=function e(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")};t.createElWinColor_=function e(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")};t.createElColors_=function e(){return ue("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};t.createElFont_=function e(){return ue("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};t.createElControls_=function e(){var t=this.localize("restore all settings to the default values");return ue("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};t.content=function e(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};t.label=function e(){return this.localize("Caption Settings Dialog")};t.description=function e(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};t.buildCSSClass=function e(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};t.getValues=function e(){var i=this;return I(ki,function(e,t,r){var n=xi(i.$(t.selector),t.parser);if(n!==undefined){e[r]=n}return e},{})};t.setValues=function e(r){var n=this;O(ki,function(e,t){Pi(n.$(e.selector),r[t],e.parser)})};t.setDefaults=function e(){var r=this;O(ki,function(e){var t=e.hasOwnProperty("default")?e["default"]:0;r.$(e.selector).selectedIndex=t})};t.restoreSettings=function e(){var t;try{t=JSON.parse(f.localStorage.getItem(di))}catch(e){k.warn(e)}if(t){this.setValues(t)}};t.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return}var t=this.getValues();try{if(Object.keys(t).length){f.localStorage.setItem(di,JSON.stringify(t))}else{f.localStorage.removeItem(di)}}catch(e){k.warn(e)}};t.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay()}};t.conditionalBlur_=function e(){this.previouslyActiveEl_=null;var t=this.player_.controlBar;var r=t&&t.subsCapsButton;var n=t&&t.captionsButton;if(r){r.focus()}else if(n){n.focus()}};return e}(qt);At.registerComponent("TextTrackSettings",Oi);var Ii=function(s){o(e,s);function e(e,t){var r;var n=t.ResizeObserver||f.ResizeObserver;if(t.ResizeObserver===null){n=false}var i=xt({createEl:!n,reportTouchActivity:false},t);r=s.call(this,e,i)||this;r.ResizeObserver=t.ResizeObserver||f.ResizeObserver;r.loadListener_=null;r.resizeObserver_=null;r.debouncedHandler_=lt(function(){r.resizeHandler()},100,false,p(r));if(n){r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_);r.resizeObserver_.observe(e.el())}else{r.loadListener_=function(){if(!r.el_||!r.el_.contentWindow){return}var e=r.debouncedHandler_;var t=r.unloadListener_=function(){et(this,"resize",e);et(this,"unload",t);t=null};Ze(r.el_.contentWindow,"unload",t);Ze(r.el_.contentWindow,"resize",e)};r.one("load",r.loadListener_)}return r}var t=e.prototype;t.createEl=function e(){return s.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};t.resizeHandler=function e(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};t.dispose=function e(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.loadListener_){this.off("load",this.loadListener_)}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;s.prototype.dispose.call(this)};return e}(At);At.registerComponent("ResizeManager",Ii);var ji={trackingThreshold:30,liveTolerance:15};var Ai=function(i){o(e,i);function e(e,t){var r;var n=xt(ji,t,{createEl:false});r=i.call(this,e,n)||this;r.reset_();r.on(r.player_,"durationchange",r.handleDurationchange);r.one(r.player_,"canplay",function(){return r.toggleTracking()});if(q&&"hidden"in d&&"visibilityState"in d){r.on(d,"visibilitychange",r.handleVisibilityChange)}return r}var t=e.prototype;t.handleVisibilityChange=function e(){if(this.player_.duration()!==Infinity){return}if(d.hidden){this.stopTracking()}else{this.startTracking()}};t.trackLive_=function e(){var t=this.player_.seekable();if(!t||!t.length){return}var r=Number(f.performance.now().toFixed(4));var n=this.lastTime_===-1?0:(r-this.lastTime_)/1e3;this.lastTime_=r;this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime();var s=this.player_.currentTime();var a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;if(!this.timeupdateSeen_||i===Infinity){a=false}if(a!==this.behindLiveEdge_){this.behindLiveEdge_=a;this.trigger("liveedgechange")}};t.handleDurationchange=function e(){this.toggleTracking()};t.toggleTracking=function e(){if(this.player_.duration()===Infinity&&this.liveWindow()>=this.options_.trackingThreshold){if(this.player_.options_.liveui){this.player_.addClass("vjs-liveui")}this.startTracking()}else{this.player_.removeClass("vjs-liveui");this.stopTracking()}};t.startTracking=function e(){if(this.isTracking()){return}if(!this.timeupdateSeen_){this.timeupdateSeen_=this.player_.hasStarted()}this.trackingInterval_=this.setInterval(this.trackLive_,st);this.trackLive_();this.on(this.player_,["play","pause"],this.trackLive_);if(!this.timeupdateSeen_){this.one(this.player_,"play",this.handlePlay);this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)}else{this.on(this.player_,"seeked",this.handleSeeked)}};t.handleFirstTimeupdate=function e(){this.timeupdateSeen_=true;this.on(this.player_,"seeked",this.handleSeeked)};t.handleSeeked=function e(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?false:t>2;this.skipNextSeeked_=false;this.trackLive_()};t.handlePlay=function e(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};t.reset_=function e(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=true;this.timeupdateSeen_=false;this.seekedBehindLive_=false;this.skipNextSeeked_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};t.stopTracking=function e(){if(!this.isTracking()){return}this.reset_();this.trigger("liveedgechange")};t.seekableEnd=function e(){var t=this.player_.seekable();var r=[];var n=t?t.length:0;while(n--){r.push(t.end(n))}return r.length?r.sort()[r.length-1]:Infinity};t.seekableStart=function e(){var t=this.player_.seekable();var r=[];var n=t?t.length:0;while(n--){r.push(t.start(n))}return r.length?r.sort()[0]:0};t.liveWindow=function e(){var t=this.liveCurrentTime();if(t===Infinity){return 0}return t-this.seekableStart()};t.isLive=function e(){return this.isTracking()};t.atLiveEdge=function e(){return!this.behindLiveEdge()};t.liveCurrentTime=function e(){return this.pastSeekEnd()+this.seekableEnd()};t.pastSeekEnd=function e(){var t=this.seekableEnd();if(this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_){this.pastSeekEnd_=0}this.lastSeekEnd_=t;return this.pastSeekEnd_};t.behindLiveEdge=function e(){return this.behindLiveEdge_};t.isTracking=function e(){return typeof this.trackingInterval_==="number"};t.seekToLiveEdge=function e(){this.seekedBehindLive_=false;if(this.atLiveEdge()){return}this.skipNextSeeked_=true;this.player_.currentTime(this.liveCurrentTime())};t.dispose=function e(){this.off(d,"visibilitychange",this.handleVisibilityChange);this.stopTracking();i.prototype.dispose.call(this)};return e}(At);At.registerComponent("LiveTracker",Ai);var Mi=function e(t){var r=t.el();if(r.hasAttribute("src")){t.triggerSourceset(r.src);return true}var n=t.$$("source");var i=[];var s="";if(!n.length){return false}for(var a=0;a<n.length;a++){var o=n[a].src;if(o&&i.indexOf(o)===-1){i.push(o)}}if(!i.length){return false}if(i.length===1){s=i[0]}t.triggerSourceset(s);return true};var Li=Object.defineProperty({},"innerHTML",{get:function e(){return this.cloneNode(true).innerHTML},set:function e(t){var r=d.createElement(this.nodeName.toLowerCase());r.innerHTML=t;var n=d.createDocumentFragment();while(r.childNodes.length){n.appendChild(r.childNodes[0])}this.innerText="";f.Element.prototype.appendChild.call(this,n);return this.innerHTML}});var Ri=function e(t,r){var n={};for(var i=0;i<t.length;i++){n=Object.getOwnPropertyDescriptor(t[i],r);if(n&&n.set&&n.get){break}}n.enumerable=true;n.configurable=true;return n};var Ni=function e(t){return Ri([t.el(),f.HTMLMediaElement.prototype,f.Element.prototype,Li],"innerHTML")};var Di=function e(s){var a=s.el();if(a.resetSourceWatch_){return}var t={};var r=Ni(s);var n=function e(i){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=i.apply(a,t);Mi(s);return n}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){if(!a[e]){return}t[e]=a[e];a[e]=n(t[e])});Object.defineProperty(a,"innerHTML",xt(r,{set:n(r.set)}));a.resetSourceWatch_=function(){a.resetSourceWatch_=null;Object.keys(t).forEach(function(e){a[e]=t[e]});Object.defineProperty(a,"innerHTML",r)};s.one("sourceset",a.resetSourceWatch_)};var Bi=Object.defineProperty({},"src",{get:function e(){if(this.hasAttribute("src")){return ur(f.Element.prototype.getAttribute.call(this,"src"))}return""},set:function e(t){f.Element.prototype.setAttribute.call(this,"src",t);return t}});var Fi=function e(t){return Ri([t.el(),f.HTMLMediaElement.prototype,Bi],"src")};var Hi=function e(n){if(!n.featuresSourceset){return}var i=n.el();if(i.resetSourceset_){return}var s=Fi(n);var a=i.setAttribute;var t=i.load;Object.defineProperty(i,"src",xt(s,{set:function e(t){var r=s.set.call(i,t);n.triggerSourceset(i.src);return r}}));i.setAttribute=function(e,t){var r=a.call(i,e,t);if(/src/i.test(e)){n.triggerSourceset(i.src)}return r};i.load=function(){var e=t.call(i);if(!Mi(n)){n.triggerSourceset("");Di(n)}return e};if(i.currentSrc){n.triggerSourceset(i.currentSrc)}else if(!Mi(n)){Di(n)}i.resetSourceset_=function(){i.resetSourceset_=null;i.load=t;i.setAttribute=a;Object.defineProperty(i,"src",s);if(i.resetSourceWatch_){i.resetSourceWatch_()}}};var Ui=function e(r,n,i,t){if(t===void 0){t=true}var s=function e(t){return Object.defineProperty(r,n,{value:t,enumerable:true,writable:true})};var a={configurable:true,enumerable:true,get:function e(){var t=i();s(t);return t}};if(t){a.set=s}return Object.defineProperty(r,n,a)};var Vi=function(h){o(u,h);function u(e,t){var r;r=h.call(this,e,t)||this;var n=e.source;var i=false;if(n&&(r.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)){r.setSource(n)}else{r.handleLateInit_(r.el_)}if(e.enableSourceset){r.setupSourcesetHandling_()}r.isScrubbing_=false;if(r.el_.hasChildNodes()){var s=r.el_.childNodes;var a=s.length;var o=[];while(a--){var l=s[a];var u=l.nodeName.toLowerCase();if(u==="track"){if(!r.featuresNativeTextTracks){o.push(l)}else{r.remoteTextTrackEls().addTrackElement_(l);r.remoteTextTracks().addTrack(l.track);r.textTracks().addTrack(l.track);if(!i&&!r.el_.hasAttribute("crossorigin")&&hr(l.src)){i=true}}}}for(var c=0;c<o.length;c++){r.el_.removeChild(o[c])}}r.proxyNativeTracks_();if(r.featuresNativeTextTracks&&i){k.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n"+"This may prevent text tracks from loading.")}r.restoreMetadataTracksInIOSNativePlayer_();if((X||J||V)&&e.nativeControlsForTouch===true){r.setControls(true)}r.proxyWebkitFullscreen_();r.triggerReady();return r}var e=u.prototype;e.dispose=function e(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}u.disposeMediaElement(this.el_);this.options_=null;h.prototype.dispose.call(this)};e.setupSourcesetHandling_=function e(){Hi(this)};e.restoreMetadataTracksInIOSNativePlayer_=function e(){var n=this.textTracks();var i;var t=function e(){i=[];for(var t=0;t<n.length;t++){var r=n[t];if(r.kind==="metadata"){i.push({track:r,storedMode:r.mode})}}};t();n.addEventListener("change",t);this.on("dispose",function(){return n.removeEventListener("change",t)});var r=function e(){for(var t=0;t<i.length;t++){var r=i[t];if(r.track.mode==="disabled"&&r.track.mode!==r.storedMode){r.track.mode=r.storedMode}}n.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",t);n.removeEventListener("change",r);n.addEventListener("change",r)});this.on("webkitendfullscreen",function(){n.removeEventListener("change",t);n.addEventListener("change",t);n.removeEventListener("change",r)})};e.overrideNative_=function e(t,r){var n=this;if(r!==this["featuresNative"+t+"Tracks"]){return}var i=t.toLowerCase();if(this[i+"TracksListeners_"]){Object.keys(this[i+"TracksListeners_"]).forEach(function(e){var t=n.el()[i+"Tracks"];t.removeEventListener(e,n[i+"TracksListeners_"][e])})}this["featuresNative"+t+"Tracks"]=!r;this[i+"TracksListeners_"]=null;this.proxyNativeTracksForType_(i)};e.overrideNativeAudioTracks=function e(t){this.overrideNative_("Audio",t)};e.overrideNativeVideoTracks=function e(t){this.overrideNative_("Video",t)};e.proxyNativeTracksForType_=function e(n){var i=this;var t=wr[n];var s=this.el()[t.getterName];var a=this[t.getterName]();if(!this["featuresNative"+t.capitalName+"Tracks"]||!s||!s.addEventListener){return}var o={change:function e(t){var r={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(r);if(n==="text"){i[Cr.remoteText.getterName]().trigger(r)}},addtrack:function e(t){a.addTrack(t.track)},removetrack:function e(t){a.removeTrack(t.track)}};var r=function e(){var t=[];for(var r=0;r<a.length;r++){var n=false;for(var i=0;i<s.length;i++){if(s[i]===a[r]){n=true;break}}if(!n){t.push(a[r])}}while(t.length){a.removeTrack(t.shift())}};this[t.getterName+"Listeners_"]=o;Object.keys(o).forEach(function(t){var r=o[t];s.addEventListener(t,r);i.on("dispose",function(e){return s.removeEventListener(t,r)})});this.on("loadstart",r);this.on("dispose",function(e){return i.off("loadstart",r)})};e.proxyNativeTracks_=function e(){var t=this;wr.names.forEach(function(e){t.proxyNativeTracksForType_(e)})};e.createEl=function e(){var t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){var r=t.cloneNode(true);if(t.parentNode){t.parentNode.insertBefore(r,t)}u.disposeMediaElement(t);t=r}else{t=d.createElement("video");var n=this.options_.tag&&ye(this.options_.tag);var i=xt({},n);if(!X||this.options_.nativeControlsForTouch!==true){delete i.controls}ge(t,j(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){_e(t,"preload",this.options_.preload)}if(this.options_.disablePictureInPicture!==undefined){t.disablePictureInPicture=this.options_.disablePictureInPicture}var s=["loop","muted","playsinline","autoplay"];for(var a=0;a<s.length;a++){var o=s[a];var l=this.options_[o];if(typeof l!=="undefined"){if(l){_e(t,o,o)}else{be(t,o)}t[o]=l}}return t};e.handleLateInit_=function e(t){if(t.networkState===0||t.networkState===3){return}if(t.readyState===0){var r=false;var n=function e(){r=true};this.on("loadstart",n);var i=function e(){if(!r){this.trigger("loadstart")}};this.on("loadedmetadata",i);this.ready(function(){this.off("loadstart",n);this.off("loadedmetadata",i);if(!r){this.trigger("loadstart")}});return}var s=["loadstart"];s.push("loadedmetadata");if(t.readyState>=2){s.push("loadeddata")}if(t.readyState>=3){s.push("canplay")}if(t.readyState>=4){s.push("canplaythrough")}this.ready(function(){s.forEach(function(e){this.trigger(e)},this)})};e.setScrubbing=function e(t){this.isScrubbing_=t};e.scrubbing=function e(){return this.isScrubbing_};e.setCurrentTime=function e(t){try{if(this.isScrubbing_&&this.el_.fastSeek&&ee){this.el_.fastSeek(t)}else{this.el_.currentTime=t}}catch(e){k(e,"Video is not ready. (Video.js)")}};e.duration=function e(){var t=this;if(this.el_.duration===Infinity&&H&&W&&this.el_.currentTime===0){var r=function e(){if(t.el_.currentTime>0){if(t.el_.duration===Infinity){t.trigger("durationchange")}t.off("timeupdate",e)}};this.on("timeupdate",r);return NaN}return this.el_.duration||NaN};e.width=function e(){return this.el_.offsetWidth};e.height=function e(){return this.el_.offsetHeight};e.proxyWebkitFullscreen_=function e(){var t=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var r=function e(){this.trigger("fullscreenchange",{isFullscreen:false})};var n=function e(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",r);this.trigger("fullscreenchange",{isFullscreen:true,nativeIOSFullscreen:true})}};this.on("webkitbeginfullscreen",n);this.on("dispose",function(){t.off("webkitbeginfullscreen",n);t.off("webkitendfullscreen",r)})};e.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var t=f.navigator&&f.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t)){return true}}return false};e.enterFullScreen=function e(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA){Ut(this.el_.play());this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0)}else{try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}};e.exitFullScreen=function e(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()};e.requestPictureInPicture=function e(){return this.el_.requestPictureInPicture()};e.src=function e(t){if(t===undefined){return this.el_.src}this.setSrc(t)};e.reset=function e(){u.resetMediaElement(this.el_)};e.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};e.setControls=function e(t){this.el_.controls=!!t};e.addTextTrack=function e(t,r,n){if(!this.featuresNativeTextTracks){return h.prototype.addTextTrack.call(this,t,r,n)}return this.el_.addTextTrack(t,r,n)};e.createRemoteTextTrack=function e(t){if(!this.featuresNativeTextTracks){return h.prototype.createRemoteTextTrack.call(this,t)}var r=d.createElement("track");if(t.kind){r.kind=t.kind}if(t.label){r.label=t.label}if(t.language||t.srclang){r.srclang=t.language||t.srclang}if(t["default"]){r["default"]=t["default"]}if(t.id){r.id=t.id}if(t.src){r.src=t.src}return r};e.addRemoteTextTrack=function e(t,r){var n=h.prototype.addRemoteTextTrack.call(this,t,r);if(this.featuresNativeTextTracks){this.el().appendChild(n)}return n};e.removeRemoteTextTrack=function e(t){h.prototype.removeRemoteTextTrack.call(this,t);if(this.featuresNativeTextTracks){var r=this.$$("track");var n=r.length;while(n--){if(t===r[n]||t===r[n].track){this.el().removeChild(r[n])}}}};e.getVideoPlaybackQuality=function e(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var t={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){t.droppedVideoFrames=this.el().webkitDroppedFrameCount;t.totalVideoFrames=this.el().webkitDecodedFrameCount}if(f.performance&&typeof f.performance.now==="function"){t.creationTime=f.performance.now()}else if(f.performance&&f.performance.timing&&typeof f.performance.timing.navigationStart==="number"){t.creationTime=f.Date.now()-f.performance.timing.navigationStart}return t};return u}(xr);Ui(Vi,"TEST_VID",function(){if(!se()){return}var e=d.createElement("video");var t=d.createElement("track");t.kind="captions";t.srclang="en";t.label="English";e.appendChild(t);return e});Vi.isSupported=function(){try{Vi.TEST_VID.volume=.5}catch(e){return false}return!!(Vi.TEST_VID&&Vi.TEST_VID.canPlayType)};Vi.canPlayType=function(e){return Vi.TEST_VID.canPlayType(e)};Vi.canPlaySource=function(e,t){return Vi.canPlayType(e.type)};Vi.canControlVolume=function(){try{var e=Vi.TEST_VID.volume;Vi.TEST_VID.volume=e/2+.1;return e!==Vi.TEST_VID.volume}catch(e){return false}};Vi.canMuteVolume=function(){try{var e=Vi.TEST_VID.muted;Vi.TEST_VID.muted=!e;if(Vi.TEST_VID.muted){_e(Vi.TEST_VID,"muted","muted")}else{be(Vi.TEST_VID,"muted","muted")}return e!==Vi.TEST_VID.muted}catch(e){return false}};Vi.canControlPlaybackRate=function(){if(H&&W&&Y<58){return false}try{var e=Vi.TEST_VID.playbackRate;Vi.TEST_VID.playbackRate=e/2+.1;return e!==Vi.TEST_VID.playbackRate}catch(e){return false}};Vi.canOverrideAttributes=function(){try{var e=function e(){};Object.defineProperty(d.createElement("video"),"src",{get:e,set:e});Object.defineProperty(d.createElement("audio"),"src",{get:e,set:e});Object.defineProperty(d.createElement("video"),"innerHTML",{get:e,set:e});Object.defineProperty(d.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return false}return true};Vi.supportsNativeTextTracks=function(){return ee||Z&&W};Vi.supportsNativeVideoTracks=function(){return!!(Vi.TEST_VID&&Vi.TEST_VID.videoTracks)};Vi.supportsNativeAudioTracks=function(){return!!(Vi.TEST_VID&&Vi.TEST_VID.audioTracks)};Vi.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],r=e[1];Ui(Vi.prototype,t,function(){return Vi[r]()},true)});Vi.prototype.movingMediaElementInDOM=!Z;Vi.prototype.featuresFullscreenResize=true;Vi.prototype.featuresProgressEvents=true;Vi.prototype.featuresTimeupdateEvents=true;var zi;Vi.patchCanPlayType=function(){if(U>=4&&!z&&!W){zi=Vi.TEST_VID&&Vi.TEST_VID.constructor.prototype.canPlayType;Vi.TEST_VID.constructor.prototype.canPlayType=function(e){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;if(e&&t.test(e)){return"maybe"}return zi.call(this,e)}}};Vi.unpatchCanPlayType=function(){var e=Vi.TEST_VID.constructor.prototype.canPlayType;if(zi){Vi.TEST_VID.constructor.prototype.canPlayType=zi}return e};Vi.patchCanPlayType();Vi.disposeMediaElement=function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};Vi.resetMediaElement=function(e){if(!e){return}var t=e.querySelectorAll("source");var r=t.length;while(r--){e.removeChild(t[r])}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Vi.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Vi.prototype["set"+kt(t)]=function(e){this.el_[t]=e;if(e){this.el_.setAttribute(t,t)}else{this.el_.removeAttribute(t)}}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){Vi.prototype[e]=function(){return this.el_[e]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Vi.prototype["set"+kt(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(e){Vi.prototype[e]=function(){return this.el_[e]()}});xr.withSourceHandlers(Vi);Vi.nativeSourceHandler={};Vi.nativeSourceHandler.canPlayType=function(e){try{return Vi.TEST_VID.canPlayType(e)}catch(e){return""}};Vi.nativeSourceHandler.canHandleSource=function(e,t){if(e.type){return Vi.nativeSourceHandler.canPlayType(e.type)}else if(e.src){var r=cr(e.src);return Vi.nativeSourceHandler.canPlayType("video/"+r)}return""};Vi.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)};Vi.nativeSourceHandler.dispose=function(){};Vi.registerSourceHandler(Vi.nativeSourceHandler);xr.registerTech("Html5",Vi);var Ki=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var Wi={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var Yi=["tiny","xsmall","small","medium","large","xlarge","huge"];var qi={};Yi.forEach(function(e){var t=e.charAt(0)==="x"?"x-"+e.substring(1):e;qi[e]="vjs-layout-"+t});var Gi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var $i=function(h){o(u,h);function u(e,t,r){var n;e.id=e.id||t.id||"vjs_video_"+Ke();t=j(u.getTagSettings(e),t);t.initChildren=false;t.createEl=false;t.evented=false;t.reportTouchActivity=false;if(!t.language){if(typeof e.closest==="function"){var i=e.closest("[lang]");if(i&&i.getAttribute){t.language=i.getAttribute("lang")}}else{var s=e;while(s&&s.nodeType===1){if(ye(s).hasOwnProperty("lang")){t.language=s.getAttribute("lang");break}s=s.parentNode}}}n=h.call(this,null,t,r)||this;n.boundDocumentFullscreenChange_=function(e){return n.documentFullscreenChange_(e)};n.boundFullWindowOnEscKey_=function(e){return n.fullWindowOnEscKey(e)};n.isFullscreen_=false;n.log=S(n.id_);n.fsApi_=y;n.isPosterFromTech_=false;n.queuedCallbacks_=[];n.isReady_=false;n.hasStarted_=false;n.userActive_=false;n.debugEnabled_=false;if(!n.options_||!n.options_.techOrder||!n.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}n.tag=e;n.tagAttributes=e&&ye(e);n.language(n.options_.language);if(t.languages){var a={};Object.getOwnPropertyNames(t.languages).forEach(function(e){a[e.toLowerCase()]=t.languages[e]});n.languages_=a}else{n.languages_=u.prototype.options_.languages}n.resetCache_();n.poster_=t.poster||"";n.controls_=!!t.controls;e.controls=false;e.removeAttribute("controls");n.changingSrc_=false;n.playCallbacks_=[];n.playTerminatedQueue_=[];if(e.hasAttribute("autoplay")){n.autoplay(true)}else{n.autoplay(n.options_.autoplay)}if(t.plugins){Object.keys(t.plugins).forEach(function(e){if(typeof n[e]!=="function"){throw new Error('plugin "'+e+'" does not exist')}})}n.scrubbing_=false;n.el_=n.createEl();Tt(p(n),{eventBusKey:"el_"});if(n.fsApi_.requestFullscreen){Ze(d,n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_);n.on(n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_)}if(n.fluid_){n.on(["playerreset","resize"],n.updateStyleEl_)}var o=xt(n.options_);if(t.plugins){Object.keys(t.plugins).forEach(function(e){n[e](t.plugins[e])})}if(t.debug){n.debug(true)}n.options_.playerOptions=o;n.middleware_=[];n.initChildren();n.isAudio(e.nodeName.toLowerCase()==="audio");if(n.controls()){n.addClass("vjs-controls-enabled")}else{n.addClass("vjs-controls-disabled")}n.el_.setAttribute("role","region");if(n.isAudio()){n.el_.setAttribute("aria-label",n.localize("Audio Player"))}else{n.el_.setAttribute("aria-label",n.localize("Video Player"))}if(n.isAudio()){n.addClass("vjs-audio")}if(n.flexNotSupported_()){n.addClass("vjs-no-flex")}if(X){n.addClass("vjs-touch-enabled")}if(!Z){n.addClass("vjs-workinghover")}u.players[n.id_]=p(n);var l=c.split(".")[0];n.addClass("vjs-v"+l);n.userActive(true);n.reportUserActivity();n.one("play",n.listenForUserActivity_);n.on("stageclick",n.handleStageClick_);n.on("keydown",n.handleKeyDown);n.on("languagechange",n.handleLanguagechange);n.breakpoints(n.options_.breakpoints);n.responsive(n.options_.responsive);return n}var e=u.prototype;e.dispose=function e(){var n=this;this.trigger("dispose");this.off("dispose");et(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);et(d,"keydown",this.boundFullWindowOnEscKey_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}u.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}Vr(this);kr.names.forEach(function(e){var t=kr[e];var r=n[t.getterName]();if(r&&r.off){r.off()}});h.prototype.dispose.call(this)};e.createEl=function e(){var t=this.tag;var r;var n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");var i=this.tag.tagName.toLowerCase()==="video-js";if(n){r=this.el_=t.parentNode}else if(!i){r=this.el_=h.prototype.createEl.call(this,"div")}var s=ye(t);if(i){r=this.el_=t;t=this.tag=d.createElement("video");while(r.children.length){t.appendChild(r.firstChild)}if(!fe(r,"video-js")){de(r,"video-js")}r.appendChild(t);n=this.playerElIngest_=r;Object.keys(r).forEach(function(e){try{t[e]=r[e]}catch(e){}})}t.setAttribute("tabindex","-1");s.tabindex="-1";if(q||W&&$){t.setAttribute("role","application");s.role="application"}t.removeAttribute("width");t.removeAttribute("height");if("width"in s){delete s.width}if("height"in s){delete s.height}Object.getOwnPropertyNames(s).forEach(function(e){if(!(i&&e==="class")){r.setAttribute(e,s[e])}if(i){t.setAttribute(e,s[e])}});t.playerId=t.id;t.id+="_html5_api";t.className="vjs-tech";t.player=r.player=this;this.addClass("vjs-paused");if(f.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=He("vjs-styles-dimensions");var a=Ae(".vjs-styles-defaults");var o=Ae("head");o.insertBefore(this.styleEl_,a?a.nextSibling:o.firstChild)}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);var l=t.getElementsByTagName("a");for(var u=0;u<l.length;u++){var c=l.item(u);de(c,"vjs-hidden");c.setAttribute("hidden","hidden")}t.initNetworkState_=t.networkState;if(t.parentNode&&!n){t.parentNode.insertBefore(r,t)}he(t,r);this.children_.unshift(t);this.el_.setAttribute("lang",this.language_);this.el_=r;return r};e.crossOrigin=function e(t){if(!t){return this.techGet_("crossOrigin")}if(t!=="anonymous"&&t!=="use-credentials"){k.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"');return}this.techCall_("setCrossOrigin",t);return};e.width=function e(t){return this.dimension("width",t)};e.height=function e(t){return this.dimension("height",t)};e.dimension=function e(t,r){var n=t+"_";if(r===undefined){return this[n]||0}if(r===""||r==="auto"){this[n]=undefined;this.updateStyleEl_();return}var i=parseFloat(r);if(isNaN(i)){k.error('Improper value "'+r+'" supplied for for '+t);return}this[n]=i;this.updateStyleEl_()};e.fluid=function e(t){var r=this;if(t===undefined){return!!this.fluid_}this.fluid_=!!t;if(ft(this)){this.off(["playerreset","resize"],this.updateStyleEl_)}if(t){this.addClass("vjs-fluid");this.fill(false);dt(this,function(){r.on(["playerreset","resize"],r.updateStyleEl_)})}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};e.fill=function e(t){if(t===undefined){return!!this.fill_}this.fill_=!!t;if(t){this.addClass("vjs-fill");this.fluid(false)}else{this.removeClass("vjs-fill")}};e.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_()};e.updateStyleEl_=function e(){if(f.VIDEOJS_NO_DYNAMIC_STYLE===true){var t=typeof this.width_==="number"?this.width_:this.options_.width;var r=typeof this.height_==="number"?this.height_:this.options_.height;var n=this.tech_&&this.tech_.el();if(n){if(t>=0){n.width=t}if(r>=0){n.height=r}}return}var i;var s;var a;var o;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){a=this.aspectRatio_}else if(this.videoWidth()>0){a=this.videoWidth()+":"+this.videoHeight()}else{a="16:9"}var l=a.split(":");var u=l[1]/l[0];if(this.width_!==undefined){i=this.width_}else if(this.height_!==undefined){i=this.height_/u}else{i=this.videoWidth()||300}if(this.height_!==undefined){s=this.height_}else{s=i*u}if(/^[^a-zA-Z]/.test(this.id())){o="dimensions-"+this.id()}else{o=this.id()+"-dimensions"}this.addClass(o);Ue(this.styleEl_,"\n      ."+o+" {\n        width: "+i+"px;\n        height: "+s+"px;\n      }\n\n      ."+o+".vjs-fluid {\n        padding-top: "+u*100+"%;\n      }\n    ")};e.loadTech_=function e(t,r){var n=this;if(this.tech_){this.unloadTech_()}var i=kt(t);var s=t.charAt(0).toLowerCase()+t.slice(1);if(i!=="Html5"&&this.tag){xr.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=i;this.isReady_=false;var a=typeof this.autoplay()==="string"?false:this.autoplay();var o={source:r,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+s+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};kr.names.forEach(function(e){var t=kr[e];o[t.getterName]=n[t.privateName]});j(o,this.options_[i]);j(o,this.options_[s]);j(o,this.options_[t.toLowerCase()]);if(this.tag){o.tag=this.tag}if(r&&r.src===this.cache_.src&&this.cache_.currentTime>0){o.startTime=this.cache_.currentTime}var l=xr.getTech(t);if(!l){throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'")}this.tech_=new l(o);this.tech_.ready(at(this,this.handleTechReady_),true);Wt.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Ki.forEach(function(e){n.on(n.tech_,e,n["handleTech"+kt(e)+"_"])});Object.keys(Wi).forEach(function(t){n.on(n.tech_,t,function(e){if(n.tech_.playbackRate()===0&&n.tech_.seeking()){n.queuedCallbacks_.push({callback:n["handleTech"+Wi[t]+"_"].bind(n),event:e});return}n["handleTech"+Wi[t]+"_"](e)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)){he(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};e.unloadTech_=function e(){var r=this;kr.names.forEach(function(e){var t=kr[e];r[t.privateName]=r[t.getterName]()});this.textTracksJson_=Wt.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};e.tech=function e(t){if(t===undefined){k.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\n"+"See https://github.com/videojs/video.js/issues/2617 for more info.\n")}return this.tech_};e.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};e.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};e.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};e.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};e.manualAutoplay_=function e(t){var i=this;if(!this.tech_||typeof t!=="string"){return}var r=function e(){var t=i.muted();i.muted(true);var r=function e(){i.muted(t)};i.playTerminatedQueue_.push(r);var n=i.play();if(!Ht(n)){return}return n["catch"](r)};var n;if(t==="any"&&this.muted()!==true){n=this.play();if(Ht(n)){n=n["catch"](r)}}else if(t==="muted"&&this.muted()!==true){n=r()}else{n=this.play()}if(!Ht(n)){return}return n.then(function(){i.trigger({type:"autoplay-success",autoplay:t})})["catch"](function(e){i.trigger({type:"autoplay-failure",autoplay:t})})};e.updateSourceCaches_=function e(t){if(t===void 0){t=""}var r=t;var n="";if(typeof r!=="string"){r=t.src;n=t.type}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(r&&!n){n=qr(this,r)}this.cache_.source=xt({},t,{src:r,type:n});var i=this.cache_.sources.filter(function(e){return e.src&&e.src===r});var s=[];var a=this.$$("source");var o=[];for(var l=0;l<a.length;l++){var u=ye(a[l]);s.push(u);if(u.src&&u.src===r){o.push(u.src)}}if(o.length&&!i.length){this.cache_.sources=s}else if(!i.length){this.cache_.sources=[this.cache_.source]}this.cache_.src=r};e.handleTechSourceset_=function e(t){var r=this;if(!this.changingSrc_){var n=function e(t){return r.updateSourceCaches_(t)};var i=this.currentSource().src;var s=t.src;if(i&&!/^blob:/.test(i)&&/^blob:/.test(s)){if(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==i){n=function e(){}}}n(s);if(!t.src){this.tech_.any(["sourceset","loadstart"],function(e){if(e.type==="sourceset"){return}var t=r.techGet("currentSrc");r.lastSource_.tech=t;r.updateSourceCaches_(t)})}}this.lastSource_={player:this.currentSource().src,tech:t.src};this.trigger({src:t.src,type:"sourceset"})};e.hasStarted=function e(t){if(t===undefined){return this.hasStarted_}if(t===this.hasStarted_){return}this.hasStarted_=t;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};e.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};e.handleTechRateChange_=function e(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)});this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};e.handleTechWaiting_=function e(){var t=this;this.addClass("vjs-waiting");this.trigger("waiting");var r=this.currentTime();var n=function e(){if(r!==t.currentTime()){t.removeClass("vjs-waiting");t.off("timeupdate",e)}};this.on("timeupdate",n)};e.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay")};e.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};e.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing")};e.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking")};e.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};e.handleTechFirstPlay_=function e(){if(this.options_.starttime){k.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};e.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};e.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};e.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"))};e.handleTechClick_=function e(t){if(!je(t)){return}if(!this.controls_){return}if(this.paused()){Ut(this.play())}else{this.pause()}};e.handleTechDoubleClick_=function e(t){if(!this.controls_){return}var r=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)});if(!r){if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,t)}else if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}}};e.handleTechTap_=function e(){this.userActive(!this.userActive())};e.handleTechTouchStart_=function e(){this.userWasActive=this.userActive()};e.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity()}};e.handleTechTouchEnd_=function e(t){if(t.cancelable){t.preventDefault()}};e.handleStageClick_=function e(){this.reportUserActivity()};e.toggleFullscreenClass_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};e.documentFullscreenChange_=function e(t){var r=t.target.player;if(r&&r!==this){return}var n=this.el();var i=d[this.fsApi_.fullscreenElement]===n;if(!i&&n.matches){i=n.matches(":"+this.fsApi_.fullscreen)}else if(!i&&n.msMatchesSelector){i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)}this.isFullscreen(i)};e.handleTechFullscreenChange_=function e(t,r){if(r){if(r.nativeIOSFullscreen){this.toggleClass("vjs-ios-native-fs")}this.isFullscreen(r.isFullscreen)}};e.handleTechFullscreenError_=function e(t,r){this.trigger("fullscreenerror",r)};e.togglePictureInPictureClass_=function e(){if(this.isInPictureInPicture()){this.addClass("vjs-picture-in-picture")}else{this.removeClass("vjs-picture-in-picture")}};e.handleTechEnterPictureInPicture_=function e(t){this.isInPictureInPicture(true)};e.handleTechLeavePictureInPicture_=function e(t){this.isInPictureInPicture(false)};e.handleTechError_=function e(){var t=this.tech_.error();this.error(t)};e.handleTechTextData_=function e(){var t=null;if(arguments.length>1){t=arguments[1]}this.trigger("textdata",t)};e.getCache=function e(){return this.cache_};e.resetCache_=function e(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};e.techCall_=function e(t,r){this.ready(function(){if(t in Br){return Rr(this.middleware_,this.tech_,t,r)}else if(t in Fr){return Nr(this.middleware_,this.tech_,t,r)}try{if(this.tech_){this.tech_[t](r)}}catch(e){k(e);throw e}},true)};e.techGet_=function e(t){if(!this.tech_||!this.tech_.isReady_){return}if(t in Dr){return Lr(this.middleware_,this.tech_,t)}else if(t in Fr){return Nr(this.middleware_,this.tech_,t)}try{return this.tech_[t]()}catch(e){if(this.tech_[t]===undefined){k("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e);throw e}if(e.name==="TypeError"){k("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e}k(e);throw e}};e.play=function e(){var t=this;var r=this.options_.Promise||f.Promise;if(r){return new r(function(e){t.play_(e)})}return this.play_()};e.play_=function e(t){var r=this;if(t===void 0){t=Ut}this.playCallbacks_.push(t);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null}if(!this.isReady_||!n){this.waitToPlay_=function(e){r.play_()};this.one(["ready","loadstart"],this.waitToPlay_);if(!n&&(ee||Z)){this.load()}return}var i=this.techGet_("play");if(i===null){this.runPlayTerminatedQueue_()}else{this.runPlayCallbacks_(i)}};e.runPlayTerminatedQueue_=function e(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];t.forEach(function(e){e()})};e.runPlayCallbacks_=function e(t){var r=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];r.forEach(function(e){e(t)})};e.pause=function e(){this.techCall_("pause")};e.paused=function e(){return this.techGet_("paused")===false?false:true};e.played=function e(){return this.techGet_("played")||Nt(0,0)};e.scrubbing=function e(t){if(typeof t==="undefined"){return this.scrubbing_}this.scrubbing_=!!t;this.techCall_("setScrubbing",this.scrubbing_);if(t){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};e.currentTime=function e(t){if(typeof t!=="undefined"){if(t<0){t=0}if(!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t;this.off("canplay",this.applyInitTime_);this.one("canplay",this.applyInitTime_);return}this.techCall_("setCurrentTime",t);this.cache_.initTime=0;return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};e.applyInitTime_=function e(){this.currentTime(this.cache_.initTime)};e.duration=function e(t){if(t===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}t=parseFloat(t);if(t<0){t=Infinity}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live")}else{this.removeClass("vjs-live")}if(!isNaN(t)){this.trigger("durationchange")}}};e.remainingTime=function e(){return this.duration()-this.currentTime()};e.remainingTimeDisplay=function e(){return Math.floor(this.duration())-Math.floor(this.currentTime())};e.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=Nt(0,0)}return e};e.bufferedPercent=function e(){return Dt(this.buffered(),this.duration())};e.bufferedEnd=function e(){var t=this.buffered();var r=this.duration();var n=t.end(t.length-1);if(n>r){n=r}return n};e.volume=function e(t){var r;if(t!==undefined){r=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=r;this.techCall_("setVolume",r);if(r>0){this.lastVolume_(r)}return}r=parseFloat(this.techGet_("volume"));return isNaN(r)?1:r};e.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return}return this.techGet_("muted")||false};e.defaultMuted=function e(t){if(t!==undefined){return this.techCall_("setDefaultMuted",t)}return this.techGet_("defaultMuted")||false};e.lastVolume_=function e(t){if(t!==undefined&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume};e.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false};e.isFullscreen=function e(t){if(t!==undefined){var r=this.isFullscreen_;this.isFullscreen_=Boolean(t);if(this.isFullscreen_!==r&&this.fsApi_.prefixed){this.trigger("fullscreenchange")}this.toggleFullscreenClass_();return}return this.isFullscreen_};e.requestFullscreen=function e(a){var t=this.options_.Promise||f.Promise;if(t){var o=this;return new t(function(e,r){function n(){o.off("fullscreenerror",i);o.off("fullscreenchange",t)}function t(){n();e()}function i(e,t){n();r(t)}o.one("fullscreenchange",t);o.one("fullscreenerror",i);var s=o.requestFullscreenHelper_(a);if(s){s.then(n,n);return s}})}return this.requestFullscreenHelper_()};e.requestFullscreenHelper_=function e(t){var r=this;var n;if(!this.fsApi_.prefixed){n=this.options_.fullscreen&&this.options_.fullscreen.options||{};if(t!==undefined){n=t}}if(this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](n);if(i){i.then(function(){return r.isFullscreen(true)},function(){return r.isFullscreen(false)})}return i}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow()}};e.exitFullscreen=function e(){var t=this.options_.Promise||f.Promise;if(t){var a=this;return new t(function(e,r){function n(){a.off("fullscreenerror",i);a.off("fullscreenchange",t)}function t(){n();e()}function i(e,t){n();r(t)}a.one("fullscreenchange",t);a.one("fullscreenerror",i);var s=a.exitFullscreenHelper_();if(s){s.then(n,n);return s}})}return this.exitFullscreenHelper_()};e.exitFullscreenHelper_=function e(){var t=this;if(this.fsApi_.requestFullscreen){var r=d[this.fsApi_.exitFullscreen]();if(r){r.then(function(){return t.isFullscreen(false)})}return r}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow()}};e.enterFullWindow=function e(){this.isFullscreen(true);this.isFullWindow=true;this.docOrigOverflow=d.documentElement.style.overflow;Ze(d,"keydown",this.boundFullWindowOnEscKey_);d.documentElement.style.overflow="hidden";de(d.body,"vjs-full-window");this.trigger("enterFullWindow")};e.fullWindowOnEscKey=function e(t){if(g.isEventKey(t,"Esc")){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};e.exitFullWindow=function e(){this.isFullscreen(false);this.isFullWindow=false;et(d,"keydown",this.boundFullWindowOnEscKey_);d.documentElement.style.overflow=this.docOrigOverflow;pe(d.body,"vjs-full-window");this.trigger("exitFullWindow")};e.disablePictureInPicture=function e(t){if(t===undefined){return this.techGet_("disablePictureInPicture")}this.techCall_("setDisablePictureInPicture",t);this.options_.disablePictureInPicture=t;this.trigger("disablepictureinpicturechanged")};e.isInPictureInPicture=function e(t){if(t!==undefined){this.isInPictureInPicture_=!!t;this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_};e.requestPictureInPicture=function e(){if("pictureInPictureEnabled"in d&&this.disablePictureInPicture()===false){return this.techGet_("requestPictureInPicture")}};e.exitPictureInPicture=function e(){if("pictureInPictureEnabled"in d){return d.exitPictureInPicture()}};e.handleKeyDown=function e(t){var r=this.options_.userActions;if(!r||!r.hotkeys){return}var n=function e(t){var r=t.tagName.toLowerCase();if(t.isContentEditable){return true}var n=["button","checkbox","hidden","radio","reset","submit"];if(r==="input"){return n.indexOf(t.type)===-1}var i=["textarea"];return i.indexOf(r)!==-1};if(n(this.el_.ownerDocument.activeElement)){return}if(typeof r.hotkeys==="function"){r.hotkeys.call(this,t)}else{this.handleHotkeys(t)}};e.handleHotkeys=function e(t){var r=this.options_.userActions?this.options_.userActions.hotkeys:{};var n=r.fullscreenKey,i=n===void 0?function(e){return g.isEventKey(e,"f")}:n,s=r.muteKey,a=s===void 0?function(e){return g.isEventKey(e,"m")}:s,o=r.playPauseKey,l=o===void 0?function(e){return g.isEventKey(e,"k")||g.isEventKey(e,"Space")}:o;if(i.call(this,t)){t.preventDefault();t.stopPropagation();var u=At.getComponent("FullscreenToggle");if(d[this.fsApi_.fullscreenEnabled]!==false){u.prototype.handleClick.call(this,t)}}else if(a.call(this,t)){t.preventDefault();t.stopPropagation();var c=At.getComponent("MuteToggle");c.prototype.handleClick.call(this,t)}else if(l.call(this,t)){t.preventDefault();t.stopPropagation();var h=At.getComponent("PlayToggle");h.prototype.handleClick.call(this,t)}};e.canPlayType=function e(t){var r;for(var n=0,i=this.options_.techOrder;n<i.length;n++){var s=i[n];var a=xr.getTech(s);if(!a){a=At.getComponent(s)}if(!a){k.error('The "'+s+'" tech is undefined. Skipped browser support check for that tech.');continue}if(a.isSupported()){r=a.canPlayType(t);if(r){return r}}}return""};e.selectSource=function e(t){var s=this;var r=this.options_.techOrder.map(function(e){return[e,xr.getTech(e)]}).filter(function(e){var t=e[0],r=e[1];if(r){return r.isSupported()}k.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false});var n=function e(t,r,n){var i;t.some(function(t){return r.some(function(e){i=n(t,e);if(i){return true}})});return i};var i;var a=function e(r){return function(e,t){return r(t,e)}};var o=function e(t,r){var n=t[0],i=t[1];if(i.canPlaySource(r,s.options_[n.toLowerCase()])){return{source:r,tech:n}}};if(this.options_.sourceOrder){i=n(t,r,a(o))}else{i=n(r,t,o)}return i||false};e.src=function e(t){var n=this;if(typeof t==="undefined"){return this.cache_.src||""}var i=Gr(t);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=true;this.cache_.sources=i;this.updateSourceCaches_(i[0]);Ar(this,i[0],function(e,t){n.middleware_=t;n.cache_.sources=i;n.updateSourceCaches_(e);var r=n.src_(e);if(r){if(i.length>1){return n.src(i.slice(1))}n.changingSrc_=false;n.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);n.triggerReady();return}Mr(t,n.tech_)})};e.src_=function e(t){var r=this;var n=this.selectSource([t]);if(!n){return true}if(!St(n.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(n.tech,n.source);this.tech_.ready(function(){r.changingSrc_=false});return false}this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t)}else{this.techCall_("src",t.src)}this.changingSrc_=false},true);return false};e.load=function e(){this.techCall_("load")};e.reset=function e(){var t=this;var r=this.options_.Promise||f.Promise;if(this.paused()||!r){this.doReset_()}else{var n=this.play();Ut(n.then(function(){return t.doReset_()}))}};e.doReset_=function e(){if(this.tech_){this.tech_.clearTracks("text")}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(ft(this)){this.trigger("playerreset")}};e.resetControlBarUI_=function e(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};e.resetProgressBar_=function e(){this.currentTime(0);var t=this.controlBar,r=t.durationDisplay,n=t.remainingTimeDisplay;if(r){r.updateContent()}if(n){n.updateContent()}};e.resetPlaybackRate_=function e(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};e.resetVolumeBar_=function e(){this.volume(1);this.trigger("volumechange")};e.currentSources=function e(){var t=this.currentSource();var r=[];if(Object.keys(t).length!==0){r.push(t)}return this.cache_.sources||r};e.currentSource=function e(){return this.cache_.source||{}};e.currentSrc=function e(){return this.currentSource()&&this.currentSource().src||""};e.currentType=function e(){return this.currentSource()&&this.currentSource().type||""};e.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return}return this.techGet_("preload")};e.autoplay=function e(t){if(t===undefined){return this.options_.autoplay||false}var r;if(typeof t==="string"&&/(any|play|muted)/.test(t)){this.options_.autoplay=t;this.manualAutoplay_(t);r=false}else if(!t){this.options_.autoplay=false}else{this.options_.autoplay=true}r=typeof r==="undefined"?this.options_.autoplay:r;if(this.tech_){this.techCall_("setAutoplay",r)}};e.playsinline=function e(t){if(t!==undefined){this.techCall_("setPlaysinline",t);this.options_.playsinline=t;return this}return this.techGet_("playsinline")};e.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_.loop=t;return}return this.techGet_("loop")};e.poster=function e(t){if(t===undefined){return this.poster_}if(!t){t=""}if(t===this.poster_){return}this.poster_=t;this.techCall_("setPoster",t);this.isPosterFromTech_=false;this.trigger("posterchange")};e.handleTechPosterChange_=function e(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";if(t!==this.poster_){this.poster_=t;this.isPosterFromTech_=true;this.trigger("posterchange")}}};e.controls=function e(t){if(t===undefined){return!!this.controls_}t=!!t;if(this.controls_===t){return}this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};e.usingNativeControls=function e(t){if(t===undefined){return!!this.usingNativeControls_}t=!!t;if(this.usingNativeControls_===t){return}this.usingNativeControls_=t;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};e.error=function e(t){if(t===undefined){return this.error_||null}if(this.options_.suppressNotSupportedError&&t&&t.code===4){var r=function e(){this.error(t)};this.options_.suppressNotSupportedError=false;this.any(["click","touchstart"],r);this.one("loadstart",function(){this.off(["click","touchstart"],r)});return}if(t===null){this.error_=t;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new Bt(t);this.addClass("vjs-error");k.error("(CODE:"+this.error_.code+" "+Bt.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};e.reportUserActivity=function e(t){this.userActivity_=true};e.userActive=function e(t){if(t===undefined){return this.userActive_}t=!!t;if(t===this.userActive_){return}this.userActive_=t;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()})}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};e.listenForUserActivity_=function e(){var r;var n;var i;var s=at(this,this.reportUserActivity);var t=function e(t){if(t.screenX!==n||t.screenY!==i){n=t.screenX;i=t.screenY;s()}};var a=function e(){s();this.clearInterval(r);r=this.setInterval(s,250)};var o=function e(t){s();this.clearInterval(r)};this.on("mousedown",a);this.on("mousemove",t);this.on("mouseup",o);this.on("mouseleave",o);var l=this.getChild("controlBar");if(l&&!Z&&!H){l.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0});l.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})}this.on("keydown",s);this.on("keyup",s);var u;this.setInterval(function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(u);var e=this.options_.inactivityTimeout;if(e<=0){return}u=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false)}},e)},250)};e.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};e.defaultPlaybackRate=function e(t){if(t!==undefined){return this.techCall_("setDefaultPlaybackRate",t)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};e.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return}return!!this.isAudio_};e.addTextTrack=function e(t,r,n){if(this.tech_){return this.tech_.addTextTrack(t,r,n)}};e.addRemoteTextTrack=function e(t,r){if(this.tech_){return this.tech_.addRemoteTextTrack(t,r)}};e.removeRemoteTextTrack=function e(t){if(t===void 0){t={}}var r=t,n=r.track;if(!n){n=t}if(this.tech_){return this.tech_.removeRemoteTextTrack(n)}};e.getVideoPlaybackQuality=function e(){return this.techGet_("getVideoPlaybackQuality")};e.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};e.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};e.language=function e(t){if(t===undefined){return this.language_}if(this.language_!==String(t).toLowerCase()){this.language_=String(t).toLowerCase();if(ft(this)){this.trigger("languagechange")}}};e.languages=function e(){return xt(u.prototype.options_.languages,this.languages_)};e.toJSON=function e(){var t=xt(this.options_);var r=t.tracks;t.tracks=[];for(var n=0;n<r.length;n++){var i=r[n];i=xt(i);i.player=undefined;t.tracks[n]=i}return t};e.createModal=function e(t,r){var n=this;r=r||{};r.content=t||"";var i=new qt(this,r);this.addChild(i);i.on("dispose",function(){n.removeChild(i)});i.open();return i};e.updateCurrentBreakpoint_=function e(){if(!this.responsive()){return}var t=this.currentBreakpoint();var r=this.currentWidth();for(var n=0;n<Yi.length;n++){var i=Yi[n];var s=this.breakpoints_[i];if(r<=s){if(t===i){return}if(t){this.removeClass(qi[t])}this.addClass(qi[i]);this.breakpoint_=i;break}}};e.removeCurrentBreakpoint_=function e(){var t=this.currentBreakpointClass();this.breakpoint_="";if(t){this.removeClass(t)}};e.breakpoints=function e(t){if(t===undefined){return j(this.breakpoints_)}this.breakpoint_="";this.breakpoints_=j({},Gi,t);this.updateCurrentBreakpoint_();return j(this.breakpoints_)};e.responsive=function e(t){if(t===undefined){return this.responsive_}t=Boolean(t);var r=this.responsive_;if(t===r){return}this.responsive_=t;if(t){this.on("playerresize",this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_()}else{this.off("playerresize",this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_()}return t};e.currentBreakpoint=function e(){return this.breakpoint_};e.currentBreakpointClass=function e(){return qi[this.breakpoint_]||""};e.loadMedia=function e(t,r){var n=this;if(!t||typeof t!=="object"){return}this.reset();this.cache_.media=xt(t);var i=this.cache_.media,s=i.artwork,a=i.poster,o=i.src,l=i.textTracks;if(!s&&a){this.cache_.media.artwork=[{src:a,type:Yr(a)}]}if(o){this.src(o)}if(a){this.poster(a)}if(Array.isArray(l)){l.forEach(function(e){return n.addRemoteTextTrack(e,false)})}this.ready(r)};e.getMedia=function e(){if(!this.cache_.media){var t=this.poster();var r=this.currentSources();var n=Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}});var i={src:r,textTracks:n};if(t){i.poster=t;i.artwork=[{src:i.poster,type:Yr(i.poster)}]}return i}return xt(this.cache_.media)};u.getTagSettings=function e(t){var r={sources:[],tracks:[]};var n=ye(t);var i=n["data-setup"];if(fe(t,"vjs-fill")){n.fill=true}if(fe(t,"vjs-fluid")){n.fluid=true}if(i!==null){var s=v(i||"{}"),a=s[0],o=s[1];if(a){k.error(a)}j(n,o)}j(r,n);if(t.hasChildNodes()){var l=t.childNodes;for(var u=0,c=l.length;u<c;u++){var h=l[u];var f=h.nodeName.toLowerCase();if(f==="source"){r.sources.push(ye(h))}else if(f==="track"){r.tracks.push(ye(h))}}}return r};e.flexNotSupported_=function e(){var t=d.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)};e.debug=function e(t){if(t===undefined){return this.debugEnabled_}if(t){this.trigger("debugon");this.previousLogLevel_=this.log.level;this.log.level("debug");this.debugEnabled_=true}else{this.trigger("debugoff");this.log.level(this.previousLogLevel_);this.previousLogLevel_=undefined;this.debugEnabled_=false}};return u}(At);kr.names.forEach(function(e){var t=kr[e];$i.prototype[t.getterName]=function(){if(this.tech_){return this.tech_[t.getterName]()}this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}});$i.prototype.crossorigin=$i.prototype.crossOrigin;$i.players={};var Xi=f.navigator;$i.prototype.options_={techOrder:xr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Xi&&(Xi.languages&&Xi.languages[0]||Xi.userLanguage||Xi.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){$i.prototype[e]=function(){return this.techGet_(e)}});Ki.forEach(function(e){$i.prototype["handleTech"+kt(e)+"_"]=function(){return this.trigger(e)}});At.registerComponent("Player",$i);var Qi="plugin";var Ji="activePlugins_";var Zi={};var es=function e(t){return Zi.hasOwnProperty(t)};var ts=function e(t){return es(t)?Zi[t]:undefined};var rs=function e(t,r){t[Ji]=t[Ji]||{};t[Ji][r]=true};var ns=function e(t,r,n){var i=(n?"before":"")+"pluginsetup";t.trigger(i,r);t.trigger(i+":"+r.name,r)};var is=function e(r,n){var t=function e(){ns(this,{name:r,plugin:n,instance:null},true);var t=n.apply(this,arguments);rs(this,r);ns(this,{name:r,plugin:n,instance:t});return t};Object.keys(n).forEach(function(e){t[e]=n[e]});return t};var ss=function e(i,s){s.prototype.name=i;return function(){ns(this,{name:i,plugin:s,instance:null},true);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=l(s,[this].concat(t));this[i]=function(){return n};ns(this,n.getEventHash());return n}};var as=function(){function n(e){if(this.constructor===n){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=e;if(!this.log){this.log=this.player.log.createLogger(this.name)}Tt(this);delete this.trigger;wt(this,this.constructor.defaultState);rs(e,this.name);this.dispose=at(this,this.dispose);e.on("dispose",this.dispose)}var e=n.prototype;e.version=function e(){return this.constructor.VERSION};e.getEventHash=function e(t){if(t===void 0){t={}}t.name=this.name;t.plugin=this.constructor;t.instance=this;return t};e.trigger=function e(t,r){if(r===void 0){r={}}return tt(this.eventBusEl_,t,this.getEventHash(r))};e.handleStateChanged=function e(t){};e.dispose=function e(){var t=this.name,r=this.player;this.trigger("dispose");this.off();r.off("dispose",this.dispose);r[Ji][t]=false;this.player=this.state=null;r[t]=ss(t,Zi[t])};n.isBasic=function e(t){var r=typeof t==="string"?ts(t):t;return typeof r==="function"&&!n.prototype.isPrototypeOf(r.prototype)};n.registerPlugin=function e(t,r){if(typeof t!=="string"){throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".")}if(es(t)){k.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!')}else if($i.prototype.hasOwnProperty(t)){throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!')}if(typeof r!=="function"){throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof r+".")}Zi[t]=r;if(t!==Qi){if(n.isBasic(r)){$i.prototype[t]=is(t,r)}else{$i.prototype[t]=ss(t,r)}}return r};n.deregisterPlugin=function e(t){if(t===Qi){throw new Error("Cannot de-register base plugin.")}if(es(t)){delete Zi[t];delete $i.prototype[t]}};n.getPlugins=function e(t){if(t===void 0){t=Object.keys(Zi)}var r;t.forEach(function(e){var t=ts(e);if(t){r=r||{};r[e]=t}});return r};n.getPluginVersion=function e(t){var r=ts(t);return r&&r.VERSION||""};return n}();as.getPlugin=ts;as.BASE_PLUGIN_NAME=Qi;as.registerPlugin(Qi,as);$i.prototype.usingPlugin=function(e){return!!this[Ji]&&this[Ji][e]===true};$i.prototype.hasPlugin=function(e){return!!es(e)};var os=function e(t,r){if(r===void 0){r={}}var n=function e(){t.apply(this,arguments)};var i={};if(typeof r==="object"){if(r.constructor!==Object.prototype.constructor){n=r.constructor}i=r}else if(typeof r==="function"){n=r}u(n,t);if(t){n.super_=t}for(var s in i){if(i.hasOwnProperty(s)){n.prototype[s]=i[s]}}return n};var ls=function e(t){return t.indexOf("#")===0?t.slice(1):t};function us(e,r,t){var n=us.getPlayer(e);if(n){if(r){k.warn('Player "'+e+'" is already initialised. Options will not be applied.')}if(t){n.ready(t)}return n}var i=typeof e==="string"?Ae("#"+ls(e)):e;if(!ae(i)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i)){k.warn("The element supplied is not included in the DOM")}r=r||{};us.hooks("beforesetup").forEach(function(e){var t=e(i,xt(r));if(!A(t)||Array.isArray(t)){k.error("please return an object in beforesetup hooks");return}r=xt(r,t)});var s=At.getComponent("Player");n=new s(i,r,t);us.hooks("setup").forEach(function(e){return e(n)});return n}us.hooks_={};us.hooks=function(e,t){us.hooks_[e]=us.hooks_[e]||[];if(t){us.hooks_[e]=us.hooks_[e].concat(t)}return us.hooks_[e]};us.hook=function(e,t){us.hooks(e,t)};us.hookOnce=function(r,e){us.hooks(r,[].concat(e).map(function(t){var e=function e(){us.removeHook(r,e);return t.apply(void 0,arguments)};return e}))};us.removeHook=function(e,t){var r=us.hooks(e).indexOf(t);if(r<=-1){return false}us.hooks_[e]=us.hooks_[e].slice();us.hooks_[e].splice(r,1);return true};if(f.VIDEOJS_NO_DYNAMIC_STYLE!==true&&se()){var cs=Ae(".vjs-styles-defaults");if(!cs){cs=He("vjs-styles-defaults");var hs=Ae("head");if(hs){hs.insertBefore(cs,hs.firstChild)}Ue(cs,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Be(1,us);us.VERSION=c;us.options=$i.prototype.options_;us.getPlayers=function(){return $i.players};us.getPlayer=function(e){var t=$i.players;var r;if(typeof e==="string"){var n=ls(e);var i=t[n];if(i){return i}r=Ae("#"+n)}else{r=e}if(ae(r)){var s=r,a=s.player,o=s.playerId;if(a||t[o]){return a||t[o]}}};us.getAllPlayers=function(){return Object.keys($i.players).map(function(e){return $i.players[e]}).filter(Boolean)};us.players=$i.players;us.getComponent=At.getComponent;us.registerComponent=function(e,t){if(xr.isTech(t)){k.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}At.registerComponent.call(At,e,t)};us.getTech=xr.getTech;us.registerTech=xr.registerTech;us.use=jr;Object.defineProperty(us,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(us.middleware,"TERMINATOR",{value:Ir,writeable:false,enumerable:true});us.browser=te;us.TOUCH_ENABLED=X;us.extend=os;us.mergeOptions=xt;us.bind=at;us.registerPlugin=as.registerPlugin;us.deregisterPlugin=as.deregisterPlugin;us.plugin=function(e,t){k.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return as.registerPlugin(e,t)};us.getPlugins=as.getPlugins;us.getPlugin=as.getPlugin;us.getPluginVersion=as.getPluginVersion;us.addLanguage=function(e,t){var r;e=(""+e).toLowerCase();us.options.languages=xt(us.options.languages,(r={},r[e]=t,r));return us.options.languages[e]};us.log=k;us.createLogger=S;us.createTimeRange=us.createTimeRanges=Nt;us.formatTime=vn;us.setFormatTime=dn;us.resetFormatTime=pn;us.parseUrl=lr;us.isCrossOrigin=hr;us.EventTarget=ut;us.on=Ze;us.one=rt;us.off=et;us.trigger=tt;us.xhr=a;us.TextTrack=vr;us.AudioTrack=gr;us.VideoTrack=yr;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){us[e]=function(){k.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead");return Le[e].apply(null,arguments)}});us.computedStyle=L;us.dom=Le;us.url=fr;us.defineLazyProperty=Ui;e.exports=us},function(e,t,r){"use strict";r.d(t,"a",function(){return c});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return n(e,t)};function i(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){s=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))t[s]=r[s]}return t};return s.apply(this,arguments)};function a(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r}function o(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)if(a=e[o])s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s}function l(r,n){return function(e,t){n(e,t,r)}}function u(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function c(e,a,r,o){function l(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(t,r){function n(e){try{s(o.next(e))}catch(e){r(e)}}function i(e){try{s(o["throw"](e))}catch(e){r(e)}}function s(e){e.done?t(e.value):l(e.value).then(n,i)}s((o=o.apply(e,a||[])).next())})}function h(e,r){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,t;return t={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function o(t){return function(e){return l([t,e])}}function l(t){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,s&&(a=t[0]&2?s["return"]:t[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;if(s=0,a)t=[t[0]&2,a.value];switch(t[0]){case 0:case 1:a=t;break;case 4:n.label++;return{value:t[1],done:false};case 5:n.label++;s=t[1];t=[0];continue;case 7:t=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=a.length>0&&a[a.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!a||t[1]>a[0]&&t[1]<a[3])){n.label=t[1];break}if(t[0]===6&&n.label<a[1]){n.label=a[1];a=t;break}if(a&&n.label<a[2]){n.label=a[2];n.ops.push(t);break}if(a[2])n.ops.pop();n.trys.pop();continue}t=r.call(e,n)}catch(e){t=[6,e];s=0}finally{i=a=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}}var f=Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};function d(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))f(t,e,r)}function p(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function m(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,a=[];return s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s;function n(n){if(i[n])s[n]=function(r){return new Promise(function(e,t){a.push([n,r,e,t])>1||o(n,r)})}}function o(e,t){try{l(i[e](t))}catch(e){h(a[0][3],e)}}function l(e){e.value instanceof _?Promise.resolve(e.value.v).then(u,c):h(a[0][2],e)}function u(e){o("next",e)}function c(e){o("throw",e)}function h(e,t){if(e(t),a.shift(),a.length)o(a[0][0],a[0][1])}}function T(n){var e,i;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,r){e[t]=n[t]?function(e){return(i=!i)?{value:_(n[t](e)),done:t==="return"}:r?r(e):e}:r}}function E(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof p==="function"?p(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=i[n]&&function(r){return new Promise(function(e,t){r=i[n](r),s(e,t,r.done,r.value)})}}function s(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)}}function w(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};function k(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))f(t,e,r);C(t,e);return t}function S(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function P(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}},function(e,t,r){var n=r(6);e.exports=function(e){if(!n(e)){throw TypeError(String(e)+" is not an object")}return e}},function(e,t,r){var h=r(5);var f=r(20).f;var d=r(21);var p=r(26);var v=r(38);var g=r(99);var y=r(64);e.exports=function(e,t){var r=e.target;var n=e.global;var i=e.stat;var s,a,o,l,u,c;if(n){a=h}else if(i){a=h[r]||v(r,{})}else{a=(h[r]||{}).prototype}if(a)for(o in t){u=t[o];if(e.noTargetGet){c=f(a,o);l=c&&c.value}else l=a[o];s=y(n?o:r+(i?".":"#")+o,e.forced);if(!s&&l!==undefined){if(typeof u===typeof l)continue;g(u,l)}if(e.sham||l&&l.sham){d(u,"sham",true)}p(a,o,u,e)}}},function(e,t,r){"use strict";r.d(t,"d",function(){return S});r.d(t,"j",function(){return c});r.d(t,"i",function(){return T});r.d(t,"h",function(){return E});r.d(t,"a",function(){return y});r.d(t,"b",function(){return w});r.d(t,"k",function(){return C});r.d(t,"l",function(){return k});r.d(t,"f",function(){return g});r.d(t,"c",function(){return v});r.d(t,"e",function(){return f});r.d(t,"g",function(){return d});const n=["linkify","autolink","emphasis","link","newline","list"];const i=n.concat(["html_inline","html_block"]);const s=n.concat(["image"]);const a=i.concat(["image"]);const o=a.concat(["block","inline","heading","paragraph"]);const l={allowedTags:["a","p","span","br","strong","em","ul","ol","li"],allowedSchemes:["http","https"],allowedAttributes:{a:["href","class","target","rel"]},transformTags:{a:(e,t)=>{let r="noopener noreferrer";if(t.rel==="me")r+=" me";return{tagName:e,attribs:Object.assign(t,{target:"_blank",rel:r})}}}};function u(e){if(!e)return"";const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,e=>t[e])}function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function h(){return!!(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)===false}function f(){if(/iPad|iPhone|iPod/.test(navigator.platform)){return true}return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform))}function d(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const p=[{max:1024,type:"B"},{max:1048576,type:"KB"},{max:1073741824,type:"MB"},{max:10995116e5,type:"GB"}];function v(t){const e=p.find(e=>t<e.max)||p[p.length-1];const r=Math.floor(t/(e.max/1024)).toString();return[r,e.type]}function g(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function y(e={}){const{baseUrl:t}=e;const r=t?t:window.location.origin+window.location.pathname.replace("/embed/","/watch/");const n=b(window.location.search);if(e.startTime!==undefined&&e.startTime!==null){const i=Math.floor(e.startTime);n.set("start",E(i))}if(e.stopTime){const s=Math.floor(e.stopTime);n.set("stop",E(s))}if(e.subtitle)n.set("subtitle",e.subtitle);if(e.loop===true)n.set("loop","1");if(e.autoplay===true)n.set("autoplay","1");if(e.muted===true)n.set("muted","1");if(e.title===false)n.set("title","0");if(e.warningTitle===false)n.set("warningTitle","0");if(e.controls===false)n.set("controls","0");if(e.peertubeLink===false)n.set("peertubeLink","0");return _(r,n)}function m(e){const{baseUrl:t}=e;const r=t?t:window.location.origin+window.location.pathname.replace("/video-playlists/embed/","/videos/watch/playlist/");const n=b(window.location.search);if(e.playlistPosition)n.set("playlistPosition",""+e.playlistPosition);return _(r,n)}function _(e,t){let r=false;t.forEach(()=>r=true);if(r)return e+"?"+t.toString();return e}function b(e){const t=new URLSearchParams(window.location.search);t.delete("videoId");t.delete("resume");return t}function T(e){if(!e)return 0;if(typeof e==="number")return e;const t=/^((\d+)[h:])?((\d+)[m:])?((\d+)s?)?$/;const r=e.match(t);if(!r)return 0;const n=parseInt(r[2]||"0",10);const i=parseInt(r[4]||"0",10);const s=parseInt(r[6]||"0",10);return n*3600+i*60+s}function E(e,t=false,r){let n="";if(e===0&&!t)return"0s";const i=r||"h";const s=r||"m";const a=t?"":"s";const o=Math.floor(e/3600);if(o>=1)n=o+i;else if(t)n="0"+i;e%=3600;const l=Math.floor(e/60);if(l>=1&&l<10&&t)n+="0"+l+s;else if(l>=1)n+=l+s;else if(t)n+="00"+s;e%=60;if(e>=1&&e<10&&t)n+="0"+e+a;else if(e>=1)n+=e+a;else if(t)n+="00";return n}function w(e,t){const r=u(t);return'<iframe width="560" height="315" '+'sandbox="allow-same-origin allow-scripts allow-popups" '+'title="'+r+'" '+'src="'+e+'" '+'frameborder="0" allowfullscreen>'+"</iframe>"}function C(t){let r=t[0];for(let e=1;e<t.length;e++){const n=t[e];if(r.resolution.id<n.resolution.id)r=n}return r}function k(t){let r=t[0];for(let e=1;e<t.length;e++){const n=t[e];if(r.resolution.id>n.resolution.id)r=n}return r}function S(){return{iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"stun:stun.framasoft.org"}]}}},function(r,e,t){(function(e){var t=function(e){return e&&e.Math==Math&&e};r.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof e=="object"&&e)||function(){return this}()||Function("return this")()}).call(this,t(19))},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(i,e,s){(function(e){var t=typeof e!=="undefined"?e:typeof window!=="undefined"?window:{};var r=s(89);var n;if(typeof document!=="undefined"){n=document}else{n=t["__GLOBAL_DOCUMENT_CACHE@4"];if(!n){n=t["__GLOBAL_DOCUMENT_CACHE@4"]=r}}i.exports=n}).call(this,s(19))},function(e,t,r){"use strict";r.d(t,"f",function(){return n});r.d(t,"d",function(){return i});r.d(t,"c",function(){return s});r.d(t,"e",function(){return a});r.d(t,"l",function(){return o});r.d(t,"i",function(){return l});r.d(t,"j",function(){return u});r.d(t,"g",function(){return c});r.d(t,"a",function(){return h});r.d(t,"h",function(){return f});r.d(t,"b",function(){return d});r.d(t,"k",function(){return p});function n(){const e=m("volume");if(e!==null&&e!==undefined){const t=parseFloat(e);if(isNaN(t))return undefined;return t}return undefined}function i(){const e=m("webtorrent_enabled");if(e!==null&&e!==undefined)return e==="true";return true}function s(){const e=m("mute");if(e!==null&&e!==undefined)return e==="true";return undefined}function a(){const e=m("theater-enabled");if(e!==null&&e!==undefined)return e==="true";return false}function o(e){return _("volume",e.toString())}function l(e){return _("mute",e.toString())}function u(e){return _("theater-enabled",e.toString())}function c(e){return _("average-bandwidth",e.toString())}function h(){const e=m("average-bandwidth");if(e!==null&&e!==undefined){const t=parseInt(e,10);if(isNaN(t))return undefined;return t}return undefined}function f(e){return _("last-subtitle",e)}function d(){return m("last-subtitle")}function p(e,t){return _(`video-watch-history`,JSON.stringify(Object.assign(Object.assign({},v()),{[e]:{duration:t,date:`${(new Date).toISOString()}`}})))}function v(e){let t;try{t=JSON.parse(m("video-watch-history"))}catch(e){console.error("Cannot parse video watch history from local storage: ",e)}t=t||{};if(e)return t[e];return t}function g(){const i=v();const e=Object.keys(i).reduce((e,t)=>{const r=Date.parse(i[t].date);const n=Math.ceil(((new Date).getTime()-r)/(1e3*3600*24));if(n>30)return e;return Object.assign(Object.assign({},e),{[t]:i[t]})},{});_("video-watch-history",JSON.stringify(e))}const y="peertube-videojs-";function m(e){try{return localStorage.getItem(y+e)}catch(e){return undefined}}function _(e,t){try{localStorage.setItem(y+e,t)}catch(e){}}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return a});r.d(t,"c",function(){return i});r.d(t,"d",function(){return o});var n=r(95);const u={production:true,hmr:false,apiUrl:"",originServerUrl:""};function i(e){const t=[];for(const r of Object.keys(e)){t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}return t.join("&")}function s(e){const t=document.createElement("textarea");t.value=e;t.setAttribute("readonly","");t.style.position="absolute";t.style.left="-9999px";document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t)}function a(l){return new Promise((e,t)=>{const r="$importModule$"+Math.random().toString(32).slice(2);const n=document.createElement("script");const i=()=>{delete window[r];n.onerror=null;n.onload=null;n.remove();URL.revokeObjectURL(n.src);n.src=""};n.defer=true;n.type="module";n.onerror=()=>{t(new Error(`Failed to import: ${l}`));i()};n.onload=()=>{e(window[r]);i()};const s=(u.apiUrl||window.location.origin)+l;const a=`import * as m from "${s}"; window.${r} = m;`;const o=new Blob([a],{type:"text/javascript"});n.src=URL.createObjectURL(o);document.head.appendChild(n)})}function o(t){return new Promise(e=>{setTimeout(()=>e(),t)})}},function(e,t,r){var n=r(5);var i=r(41);var s=r(8);var a=r(43);var o=r(69);var l=r(124);var u=i("wks");var c=n.Symbol;var h=l?c:c&&c.withoutSetter||a;e.exports=function(e){if(!s(u,e)||!(o||typeof u[e]=="string")){if(o&&s(c,e)){u[e]=c[e]}else{u[e]=h("Symbol."+e)}}return u[e]}},function(e,t,r){var n=r(7);e.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(e,t,r){var n=r(13);var i=r(56);var s=r(2);var a=r(37);var o=Object.defineProperty;t.f=n?o:function e(t,r,n){s(t);r=a(r,true);s(n);if(i)try{return o(t,r,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");if("value"in n)t[r]=n.value;return t}},function(e,t,r){var s=r(126);var n=r(137);var i=r(41);var a=i("metadata");var o=a.store||(a.store=new n);var l=function(e,t,r){var n=o.get(e);if(!n){if(!r)return;o.set(e,n=new s)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new s)}return i};var u=function(e,t,r){var n=l(t,r,false);return n===undefined?false:n.has(e)};var c=function(e,t,r){var n=l(t,r,false);return n===undefined?undefined:n.get(e)};var h=function(e,t,r,n){l(r,n,true).set(e,t)};var f=function(e,t){var r=l(e,t,false);var n=[];if(r)r.forEach(function(e,t){n.push(t)});return n};var d=function(e){return e===undefined||typeof e=="symbol"?e:String(e)};e.exports={store:o,getMap:l,has:u,get:c,set:h,keys:f,toKey:d}},function(r,e,t){(function(e){var t;if(typeof window!=="undefined"){t=window}else if(typeof e!=="undefined"){t=e}else if(typeof self!=="undefined"){t=self}else{t={}}r.exports=t}).call(this,t(19))},function(e,t,r){var n=r(8);var i=r(65);var s=r(40);var a=r(66);var o=s("IE_PROTO");var l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){e=i(e);if(n(e,o))return e[o];if(typeof e.constructor=="function"&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?l:null}},function(e,t,r){var n=r(61);var i=r(5);var s=function(e){return typeof e=="function"?e:undefined};e.exports=function(e,t){return arguments.length<2?s(n[e])||s(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){if(typeof window==="object")r=window}e.exports=r},function(e,t,r){var n=r(13);var i=r(98);var s=r(24);var a=r(36);var o=r(37);var l=r(8);var u=r(56);var c=Object.getOwnPropertyDescriptor;t.f=n?c:function e(t,r){t=a(t);r=o(r,true);if(u)try{return c(t,r)}catch(e){}if(l(t,r))return s(!i.f.call(t,r),t[r])}},function(e,t,r){var n=r(13);var i=r(14);var s=r(24);e.exports=n?function(e,t,r){return i.f(e,t,s(1,r))}:function(e,t,r){e[t]=r;return e}},function(e,u,t){(function(i){function s(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}u.resolve=function(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:i.cwd();if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=s(a(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."};u.normalize=function(e){var t=u.isAbsolute(e),r=o(e,-1)==="/";e=s(a(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e};u.isAbsolute=function(e){return e.charAt(0)==="/"};u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(a(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};u.relative=function(e,t){e=u.resolve(e).substr(1);t=u.resolve(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var s=Math.min(n.length,i.length);var a=s;for(var o=0;o<s;o++){if(n[o]!==i[o]){a=o;break}}var l=[];for(var o=a;o<n.length;o++){l.push("..")}l=l.concat(i.slice(a));return l.join("/")};u.sep="/";u.delimiter=":";u.dirname=function(e){if(typeof e!=="string")e=e+"";if(e.length===0)return".";var t=e.charCodeAt(0);var r=t===47;var n=-1;var i=true;for(var s=e.length-1;s>=1;--s){t=e.charCodeAt(s);if(t===47){if(!i){n=s;break}}else{i=false}}if(n===-1)return r?"/":".";if(r&&n===1){return"/"}return e.slice(0,n)};function n(e){if(typeof e!=="string")e=e+"";var t=0;var r=-1;var n=true;var i;for(i=e.length-1;i>=0;--i){if(e.charCodeAt(i)===47){if(!n){t=i+1;break}}else if(r===-1){n=false;r=i+1}}if(r===-1)return"";return e.slice(t,r)}u.basename=function(e,t){var r=n(e);if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r};u.extname=function(e){if(typeof e!=="string")e=e+"";var t=-1;var r=0;var n=-1;var i=true;var s=0;for(var a=e.length-1;a>=0;--a){var o=e.charCodeAt(a);if(o===47){if(!i){r=a+1;break}continue}if(n===-1){i=false;n=a+1}if(o===46){if(t===-1)t=a;else if(s!==1)s=1}else if(t!==-1){s=-1}}if(t===-1||n===-1||s===0||s===1&&t===n-1&&t===r+1){return""}return e.slice(t,n)};function a(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var o="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)}}).call(this,t(74))},,function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var l=r(5);var u=r(21);var c=r(8);var h=r(38);var n=r(58);var i=r(27);var s=i.get;var f=i.enforce;var d=String(String).split("String");(e.exports=function(e,t,r,n){var i=n?!!n.unsafe:false;var s=n?!!n.enumerable:false;var a=n?!!n.noTargetGet:false;var o;if(typeof r=="function"){if(typeof t=="string"&&!c(r,"name")){u(r,"name",t)}o=f(r);if(!o.source){o.source=d.join(typeof t=="string"?t:"")}}if(e===l){if(s)e[t]=r;else h(t,r);return}else if(!i){delete e[t]}else if(!a&&e[t]){s=true}if(s)e[t]=r;else u(e,t,r)})(Function.prototype,"toString",function e(){return typeof this=="function"&&s(this).source||n(this)})},function(e,t,r){var n=r(59);var i=r(5);var s=r(6);var a=r(21);var o=r(8);var l=r(39);var u=r(40);var c=r(28);var h=i.WeakMap;var f,d,p;var v=function(e){return p(e)?d(e):f(e,{})};var g=function(r){return function(e){var t;if(!s(e)||(t=d(e)).type!==r){throw TypeError("Incompatible receiver, "+r+" required")}return t}};if(n){var y=l.state||(l.state=new h);var m=y.get;var _=y.has;var b=y.set;f=function(e,t){t.facade=e;b.call(y,e,t);return t};d=function(e){return m.call(y,e)||{}};p=function(e){return _.call(y,e)}}else{var T=u("state");c[T]=true;f=function(e,t){t.facade=e;a(e,T,t);return t};d=function(e){return o(e,T)?e[T]:{}};p=function(e){return o(e,T)}}e.exports={set:f,get:d,has:p,enforce:v,getterFor:g}},function(e,t){e.exports={}},function(e,t){e.exports=function(e){if(typeof e!="function"){throw TypeError(String(e)+" is not a function")}return e}},function(e,t,r){var n=r(14).f;var i=r(8);var s=r(12);var a=s("toStringTag");e.exports=function(e,t,r){if(e&&!i(e=r?e:e.prototype,a)){n(e,a,{configurable:true,value:t})}}},function(e,t,r){var n=r(28);var i=r(6);var s=r(8);var a=r(14).f;var o=r(43);var l=r(67);var u=o("meta");var c=0;var h=Object.isExtensible||function(){return true};var f=function(e){a(e,u,{value:{objectID:"O"+ ++c,weakData:{}}})};var d=function(e,t){if(!i(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!s(e,u)){if(!h(e))return"F";if(!t)return"E";f(e)}return e[u].objectID};var p=function(e,t){if(!s(e,u)){if(!h(e))return true;if(!t)return false;f(e)}return e[u].weakData};var v=function(e){if(l&&g.REQUIRED&&h(e)&&!s(e,u))f(e);return e};var g=e.exports={REQUIRED:false,fastKey:d,getWeakData:p,onFreeze:v};n[u]=true},function(e,t,r){var y=r(2);var m=r(127);var _=r(44);var b=r(49);var T=r(128);var E=r(131);var w=function(e,t){this.stopped=e;this.result=t};e.exports=function(e,t,r){var n=r&&r.that;var i=!!(r&&r.AS_ENTRIES);var s=!!(r&&r.IS_ITERATOR);var a=!!(r&&r.INTERRUPTED);var o=b(t,n,1+i+a);var l,u,c,h,f,d,p;var v=function(e){if(l)E(l);return new w(true,e)};var g=function(e){if(i){y(e);return a?o(e[0],e[1],v):o(e[0],e[1])}return a?o(e,v):o(e)};if(s){l=e}else{u=T(e);if(typeof u!="function")throw TypeError("Target is not iterable");if(m(u)){for(c=0,h=_(e.length);h>c;c++){f=g(e[c]);if(f&&f instanceof w)return f}return new w(false)}l=u.call(e)}d=l.next;while(!(p=d.call(l)).done){try{f=g(p.value)}catch(e){E(l);throw e}if(typeof f=="object"&&f&&f instanceof w)return f}return new w(false)}},function(e,t){e.exports={}},,function(r,e){function n(e,t){r.exports=n=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};r.exports["default"]=r.exports,r.exports.__esModule=true;return n(e,t)}r.exports=n;r.exports["default"]=r.exports,r.exports.__esModule=true},function(e,t,r){var n=r(54);var i=r(55);e.exports=function(e){return n(i(e))}},function(e,t,r){var i=r(6);e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!i(n=r.call(e)))return n;if(typeof(r=e.valueOf)=="function"&&!i(n=r.call(e)))return n;if(!t&&typeof(r=e.toString)=="function"&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(5);var i=r(21);e.exports=function(t,r){try{i(n,t,r)}catch(e){n[t]=r}return r}},function(e,t,r){var n=r(5);var i=r(38);var s="__core-js_shared__";var a=n[s]||i(s,{});e.exports=a},function(e,t,r){var n=r(41);var i=r(43);var s=n("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},function(e,t,r){var n=r(42);var i=r(39);(e.exports=function(e,t){return i[e]||(i[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.10.1",mode:n?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=false},function(e,t){var r=0;var n=Math.random();e.exports=function(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++r+n).toString(36)}},function(e,t,r){var n=r(63);var i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){var i=r(2);var s=r(105);var n=r(45);var a=r(28);var o=r(107);var l=r(57);var u=r(40);var c=">";var h="<";var f="prototype";var d="script";var p=u("IE_PROTO");var v=function(){};var g=function(e){return h+d+c+e+h+"/"+d+c};var y=function(e){e.write(g(""));e.close();var t=e.parentWindow.Object;e=null;return t};var m=function(){var e=l("iframe");var t="java"+d+":";var r;e.style.display="none";o.appendChild(e);e.src=String(t);r=e.contentWindow.document;r.open();r.write(g("document.F=Object"));r.close();return r.F};var _;var b=function(){try{_=document.domain&&new ActiveXObject("htmlfile")}catch(e){}b=_?y(_):m();var e=n.length;while(e--)delete b[f][n[e]];return b()};a[p]=true;e.exports=Object.create||function e(t,r){var n;if(t!==null){v[f]=i(t);n=new v;v[f]=null;n[p]=t}else n=b();return r===undefined?n:s(n,r)}},function(e,t,r){var s=r(2);var a=r(68);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n=false;var e={};var i;try{i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;i.call(e,[]);n=e instanceof Array}catch(e){}return function e(t,r){s(t);a(r);if(n)i.call(t,r);else t.__proto__=r;return t}}():undefined)},function(e,t,r){"use strict";var y=r(3);var m=r(5);var _=r(64);var b=r(26);var T=r(31);var E=r(32);var w=r(50);var C=r(6);var k=r(7);var S=r(132);var x=r(30);var P=r(133);e.exports=function(n,e,t){var i=n.indexOf("Map")!==-1;var r=n.indexOf("Weak")!==-1;var s=i?"set":"add";var a=m[n];var o=a&&a.prototype;var l=a;var u={};var c=function(e){var n=o[e];b(o,e,e=="add"?function e(t){n.call(this,t===0?0:t);return this}:e=="delete"?function(e){return r&&!C(e)?false:n.call(this,e===0?0:e)}:e=="get"?function e(t){return r&&!C(t)?undefined:n.call(this,t===0?0:t)}:e=="has"?function e(t){return r&&!C(t)?false:n.call(this,t===0?0:t)}:function e(t,r){n.call(this,t===0?0:t,r);return this})};var h=_(n,typeof a!="function"||!(r||o.forEach&&!k(function(){(new a).entries().next()})));if(h){l=t.getConstructor(e,n,i,s);T.REQUIRED=true}else if(_(n,true)){var f=new l;var d=f[s](r?{}:-0,1)!=f;var p=k(function(){f.has(1)});var v=S(function(e){new a(e)});var g=!r&&k(function(){var e=new a;var t=5;while(t--)e[s](t,t);return!e.has(-0)});if(!v){l=e(function(e,t){w(e,l,n);var r=P(new a,e,l);if(t!=undefined)E(t,r[s],{that:r,AS_ENTRIES:i});return r});l.prototype=o;o.constructor=l}if(p||g){c("delete");c("has");i&&c("get")}if(g||d)c(s);if(r&&o.clear)delete o.clear}u[n]=l;y({global:true,forced:l!=a},u);x(l,n);if(!r)t.setStrong(l,n,i);return l}},function(e,t,r){var s=r(29);e.exports=function(n,i,e){s(n);if(i===undefined)return n;switch(e){case 0:return function(){return n.call(i)};case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}},function(e,t){e.exports=function(e,t,r){if(!(e instanceof t)){throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")}return e}},function(e,t,r){var i=r(26);e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},function(e,t){function r(){e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};e.exports["default"]=e.exports,e.exports.__esModule=true;return r.apply(this,arguments)}e.exports=r;e.exports["default"]=e.exports,e.exports.__esModule=true},function(e,t){function r(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}e.exports=r;e.exports["default"]=e.exports,e.exports.__esModule=true},function(e,t,r){var n=r(7);var i=r(25);var s="".split;e.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return i(e)=="String"?s.call(e,""):Object(e)}:Object},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}},function(e,t,r){var n=r(13);var i=r(7);var s=r(57);e.exports=!n&&!i(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,r){var n=r(5);var i=r(6);var s=n.document;var a=i(s)&&i(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},function(e,t,r){var n=r(39);var i=Function.toString;if(typeof n.inspectSource!="function"){n.inspectSource=function(e){return i.call(e)}}e.exports=n.inspectSource},function(e,t,r){var n=r(5);var i=r(58);var s=n.WeakMap;e.exports=typeof s==="function"&&/native code/.test(i(s))},function(e,t,r){var n=r(18);var i=r(100);var s=r(103);var a=r(2);e.exports=n("Reflect","ownKeys")||function e(t){var r=i.f(a(t));var n=s.f;return n?r.concat(n(t)):r}},function(e,t,r){var n=r(5);e.exports=n},function(e,t,r){var a=r(8);var o=r(36);var l=r(101).indexOf;var u=r(28);e.exports=function(e,t){var r=o(e);var n=0;var i=[];var s;for(s in r)!a(u,s)&&a(r,s)&&i.push(s);while(t.length>n)if(a(r,s=t[n++])){~l(i,s)||i.push(s)}return i}},function(e,t){var r=Math.ceil;var n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(7);var i=/#|\.prototype\./;var s=function(e,t){var r=o[a(e)];return r==u?true:r==l?false:typeof t=="function"?n(t):!!t};var a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()};var o=s.data={};var l=s.NATIVE="N";var u=s.POLYFILL="P";e.exports=s},function(e,t,r){var n=r(55);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(7);e.exports=!n(function(){function e(){}e.prototype.constructor=null;return Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,r){var n=r(7);e.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,r){var n=r(6);e.exports=function(e){if(!n(e)&&e!==null){throw TypeError("Can't set "+String(e)+" as a prototype")}return e}},function(e,t,r){var n=r(121);var i=r(122);var s=r(7);e.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!Symbol.sham&&(n?i===38:i>37&&i<41)})},function(e,t,r){"use strict";var u=r(14).f;var c=r(46);var h=r(51);var f=r(49);var d=r(50);var p=r(32);var a=r(134);var o=r(136);var v=r(13);var g=r(31).fastKey;var n=r(27);var y=n.set;var m=n.getterFor;e.exports={getConstructor:function(e,r,n,i){var s=e(function(e,t){d(e,s,r);y(e,{type:r,index:c(null),first:undefined,last:undefined,size:0});if(!v)e.size=0;if(t!=undefined)p(t,e[i],{that:e,AS_ENTRIES:n})});var o=m(r);var a=function(e,t,r){var n=o(e);var i=l(e,t);var s,a;if(i){i.value=r}else{n.last=i={index:a=g(t,true),key:t,value:r,previous:s=n.last,next:undefined,removed:false};if(!n.first)n.first=i;if(s)s.next=i;if(v)n.size++;else e.size++;if(a!=="F")n.index[a]=i}return e};var l=function(e,t){var r=o(e);var n=g(t);var i;if(n!=="F")return r.index[n];for(i=r.first;i;i=i.next){if(i.key==t)return i}};h(s.prototype,{clear:function e(){var t=this;var r=o(t);var n=r.index;var i=r.first;while(i){i.removed=true;if(i.previous)i.previous=i.previous.next=undefined;delete n[i.index];i=i.next}r.first=r.last=undefined;if(v)r.size=0;else t.size=0},delete:function(e){var t=this;var r=o(t);var n=l(t,e);if(n){var i=n.next;var s=n.previous;delete r.index[n.index];n.removed=true;if(s)s.next=i;if(i)i.previous=s;if(r.first==n)r.first=i;if(r.last==n)r.last=s;if(v)r.size--;else t.size--}return!!n},forEach:function e(t){var r=o(this);var n=f(t,arguments.length>1?arguments[1]:undefined,3);var i;while(i=i?i.next:r.first){n(i.value,i.key,this);while(i&&i.removed)i=i.previous}},has:function e(t){return!!l(this,t)}});h(s.prototype,n?{get:function e(t){var r=l(this,t);return r&&r.value},set:function e(t,r){return a(this,t===0?0:t,r)}}:{add:function e(t){return a(this,t=t===0?0:t,t)}});if(v)u(s.prototype,"size",{get:function(){return o(this).size}});return s},setStrong:function(e,t,r){var n=t+" Iterator";var i=m(t);var s=m(n);a(e,t,function(e,t){y(this,{type:n,target:e,state:i(e),kind:t,last:undefined})},function(){var e=s(this);var t=e.kind;var r=e.last;while(r&&r.removed)r=r.previous;if(!e.target||!(e.last=r=r?r.next:e.state.first)){e.target=undefined;return{value:undefined,done:true}}if(t=="keys")return{value:r.key,done:false};if(t=="values")return{value:r.value,done:false};return{value:[r.key,r.value],done:false}},r?"entries":"values",!r,true);o(t)}}},function(e,t,r){"use strict";var n=r(7);var i=r(17);var s=r(21);var a=r(8);var o=r(12);var l=r(42);var u=o("iterator");var c=false;var h=function(){return this};var f,d,p;if([].keys){p=[].keys();if(!("next"in p))c=true;else{d=i(i(p));if(d!==Object.prototype)f=d}}var v=f==undefined||n(function(){var e={};return f[u].call(e)!==e});if(v)f={};if((!l||v)&&!a(f,u)){s(f,u,h)}e.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:c}},function(e,s,a){"use strict";(function(r){a.d(s,"a",function(){return n});var e=a(1);var v=a(11);var g=a(22);var t=a.n(g);const y=3;function n(h,f){let d=m(h);const p=/bytes=(\d+)-(\d+)/;return function a(o,l,u,c=1){return Object(e["a"])(this,void 0,void 0,function*(){if(f)yield Object(v["d"])(1e3);const e=Object(g["basename"])(o.url);const t=(yield d)[e];if(!t&&c>y){throw new Error(`Unknown segment name ${e} in segment validator`)}if(!t){console.log("Refetching sha segments for %s.",e);yield Object(v["d"])(1e3);d=m(h);yield a(o,l,u,c+1);return}let r;let n="";if(typeof t==="string"){r=t}else{const s=p.exec(o.range);n=s[1]+"-"+s[2];r=t[n]}if(r===undefined){throw new Error(`Unknown segment name ${e}/${n} in segment validator`)}const i=yield _(o.data);if(i!==r){throw new Error(`Hashes does not correspond for segment ${e}/${n}`+`(expected: ${r} instead of ${i})`)}})}}function m(e){return fetch(e).then(e=>e.json()).catch(e=>{console.error("Cannot get sha256 segments",e);return{}})}function _(t){return Object(e["a"])(this,void 0,void 0,function*(){if(!t)return undefined;if(window.crypto.subtle){return window.crypto.subtle.digest("SHA-256",t).then(e=>i(e))}const e=yield a.e(8).then(a.t.bind(null,157,7));return(new e.sha256).update(r.from(t)).digest("hex")})}function i(e){if(!e)return"";let t="";const r="0123456789abcdef";const n=new Uint8Array(e);n.forEach(e=>t+=r[e>>4]+r[e&15]);return t}}).call(this,a(73).Buffer)},function(e,ee,te){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=te(153);var s=te(154);var o=te(76);ee.Buffer=f;ee.SlowBuffer=y;ee.INSPECT_MAX_BYTES=50;f.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT!==undefined?e.TYPED_ARRAY_SUPPORT:t();ee.kMaxLength=r();function t(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42&&typeof e.subarray==="function"&&e.subarray(1,1).byteLength===0}catch(e){return false}}function r(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t){throw new RangeError("Invalid typed array length")}if(f.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=f.prototype}else{if(e===null){e=new f(t)}e.length=t}return e}function f(e,t,r){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f)){return new f(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return c(this,e)}return i(this,e,t,r)}f.poolSize=8192;f._augment=function(e){e.__proto__=f.prototype;return e};function i(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return p(e,t,r,n)}if(typeof t==="string"){return h(e,t,r)}return v(e,t)}f.from=function(e,t,r){return i(null,e,t,r)};if(f.TYPED_ARRAY_SUPPORT){f.prototype.__proto__=Uint8Array.prototype;f.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&f[Symbol.species]===f){Object.defineProperty(f,Symbol.species,{value:null,configurable:true})}}function l(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function u(e,t,r,n){l(t);if(t<=0){return a(e,t)}if(r!==undefined){return typeof n==="string"?a(e,t).fill(r,n):a(e,t).fill(r)}return a(e,t)}f.alloc=function(e,t,r){return u(null,e,t,r)};function c(e,t){l(t);e=a(e,t<0?0:g(t)|0);if(!f.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}f.allocUnsafe=function(e){return c(null,e)};f.allocUnsafeSlow=function(e){return c(null,e)};function h(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!f.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=m(t,r)|0;e=a(e,n);var i=e.write(t,r);if(i!==n){e=e.slice(0,i)}return e}function d(e,t){var r=t.length<0?0:g(t.length)|0;e=a(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function p(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(f.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=f.prototype}else{e=d(e,t)}return e}function v(e,t){if(f.isBuffer(t)){var r=g(t.length)|0;e=a(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||Z(t.length)){return a(e,0)}return d(e,t)}if(t.type==="Buffer"&&o(t.data)){return d(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=r()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r().toString(16)+" bytes")}return e|0}function y(e){if(+e!=e){e=0}return f.alloc(+e)}f.isBuffer=function e(t){return!!(t!=null&&t._isBuffer)};f.compare=function e(t,r){if(!f.isBuffer(t)||!f.isBuffer(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var s=0,a=Math.min(n,i);s<a;++s){if(t[s]!==r[s]){n=t[s];i=r[s];break}}if(n<i)return-1;if(i<n)return 1;return 0};f.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};f.concat=function e(t,r){if(!o(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return f.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=f.allocUnsafe(r);var s=0;for(n=0;n<t.length;++n){var a=t[n];if(!f.isBuffer(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(i,s);s+=a.length}return i};function m(e,t){if(f.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(n)return G(e).length;t=(""+t).toLowerCase();n=true}}}f.byteLength=m;function _(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return M(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}f.prototype._isBuffer=true;function b(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}f.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){b(this,r,r+1)}return this};f.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){b(this,r,r+3);b(this,r+1,r+2)}return this};f.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){b(this,r,r+7);b(this,r+1,r+6);b(this,r+2,r+5);b(this,r+3,r+4)}return this};f.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return I(this,0,t);return _.apply(this,arguments)};f.prototype.equals=function e(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return f.compare(this,t)===0};f.prototype.inspect=function e(){var t="";var r=ee.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};f.prototype.compare=function e(t,r,n,i,s){if(!f.isBuffer(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(s===undefined){s=this.length}if(r<0||n>t.length||i<0||s>this.length){throw new RangeError("out of range index")}if(i>=s&&r>=n){return 0}if(i>=s){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;s>>>=0;if(this===t)return 0;var a=s-i;var o=n-r;var l=Math.min(a,o);var u=this.slice(i,s);var c=t.slice(r,n);for(var h=0;h<l;++h){if(u[h]!==c[h]){a=u[h];o=c[h];break}}if(a<o)return-1;if(o<a)return 1;return 0};function T(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=f.from(t,n)}if(f.isBuffer(t)){if(t.length===0){return-1}return E(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return E(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){var s=1;var a=e.length;var o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}s=2;a/=2;o/=2;r/=2}}function l(e,t){if(s===1){return e[t]}else{return e.readUInt16BE(t*s)}}var u;if(i){var c=-1;for(u=r;u<a;u++){if(l(e,u)===l(t,c===-1?0:u-c)){if(c===-1)c=u;if(u-c+1===o)return c*s}else{if(c!==-1)u-=u-c;c=-1}}}else{if(r+o>a)r=a-o;for(u=r;u>=0;u--){var h=true;for(var f=0;f<o;f++){if(l(e,u+f)!==l(t,f)){h=false;break}}if(h)return u}}return-1}f.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};f.prototype.indexOf=function e(t,r,n){return T(this,t,r,n,true)};f.prototype.lastIndexOf=function e(t,r,n){return T(this,t,r,n,false)};function w(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");if(n>s/2){n=s/2}for(var a=0;a<n;++a){var o=parseInt(t.substr(a*2,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function C(e,t,r,n){return J(G(t,e.length-r),e,r,n)}function k(e,t,r,n){return J($(t),e,r,n)}function S(e,t,r,n){return k(e,t,r,n)}function x(e,t,r,n){return J(Q(t),e,r,n)}function P(e,t,r,n){return J(X(t,e.length-r),e,r,n)}f.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var s=this.length-r;if(n===undefined||n>s)n=s;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var a=false;for(;;){switch(i){case"hex":return w(this,t,r,n);case"utf8":case"utf-8":return C(this,t,r,n);case"ascii":return k(this,t,r,n);case"latin1":case"binary":return S(this,t,r,n);case"base64":return x(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};f.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,r))}}function I(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var s=e[i];var a=null;var o=s>239?4:s>223?3:s>191?2:1;if(i+o<=r){var l,u,c,h;switch(o){case 1:if(s<128){a=s}break;case 2:l=e[i+1];if((l&192)===128){h=(s&31)<<6|l&63;if(h>127){a=h}}break;case 3:l=e[i+1];u=e[i+2];if((l&192)===128&&(u&192)===128){h=(s&15)<<12|(l&63)<<6|u&63;if(h>2047&&(h<55296||h>57343)){a=h}}break;case 4:l=e[i+1];u=e[i+2];c=e[i+3];if((l&192)===128&&(u&192)===128&&(c&192)===128){h=(s&15)<<18|(l&63)<<12|(u&63)<<6|c&63;if(h>65535&&h<1114112){a=h}}}}if(a===null){a=65533;o=1}else if(a>65535){a-=65536;n.push(a>>>10&1023|55296);a=56320|a&1023}n.push(a);i+=o}return A(n)}var j=4096;function A(e){var t=e.length;if(t<=j){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=j))}return r}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function R(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var s=t;s<r;++s){i+=q(e[s])}return i}function N(e,t,r){var n=e.slice(t,r);var i="";for(var s=0;s<n.length;s+=2){i+=String.fromCharCode(n[s]+n[s+1]*256)}return i}f.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i;if(f.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=f.prototype}else{var s=r-t;i=new f(s,undefined);for(var a=0;a<s;++a){i[a]=this[a+t]}}return i};function D(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)D(t,r,this.length);var i=this[t];var s=1;var a=0;while(++a<r&&(s*=256)){i+=this[t+a]*s}return i};f.prototype.readUIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n){D(t,r,this.length)}var i=this[t+--r];var s=1;while(r>0&&(s*=256)){i+=this[t+--r]*s}return i};f.prototype.readUInt8=function e(t,r){if(!r)D(t,1,this.length);return this[t]};f.prototype.readUInt16LE=function e(t,r){if(!r)D(t,2,this.length);return this[t]|this[t+1]<<8};f.prototype.readUInt16BE=function e(t,r){if(!r)D(t,2,this.length);return this[t]<<8|this[t+1]};f.prototype.readUInt32LE=function e(t,r){if(!r)D(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};f.prototype.readUInt32BE=function e(t,r){if(!r)D(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};f.prototype.readIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)D(t,r,this.length);var i=this[t];var s=1;var a=0;while(++a<r&&(s*=256)){i+=this[t+a]*s}s*=128;if(i>=s)i-=Math.pow(2,8*r);return i};f.prototype.readIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n)D(t,r,this.length);var i=r;var s=1;var a=this[t+--i];while(i>0&&(s*=256)){a+=this[t+--i]*s}s*=128;if(a>=s)a-=Math.pow(2,8*r);return a};f.prototype.readInt8=function e(t,r){if(!r)D(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};f.prototype.readInt16LE=function e(t,r){if(!r)D(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function e(t,r){if(!r)D(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function e(t,r){if(!r)D(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};f.prototype.readInt32BE=function e(t,r){if(!r)D(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};f.prototype.readFloatLE=function e(t,r){if(!r)D(t,4,this.length);return s.read(this,t,true,23,4)};f.prototype.readFloatBE=function e(t,r){if(!r)D(t,4,this.length);return s.read(this,t,false,23,4)};f.prototype.readDoubleLE=function e(t,r){if(!r)D(t,8,this.length);return s.read(this,t,true,52,8)};f.prototype.readDoubleBE=function e(t,r){if(!r)D(t,8,this.length);return s.read(this,t,false,52,8)};function B(e,t,r,n,i,s){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var s=Math.pow(2,8*n)-1;B(this,t,r,n,s,0)}var a=1;var o=0;this[r]=t&255;while(++o<n&&(a*=256)){this[r+o]=t/a&255}return r+n};f.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var s=Math.pow(2,8*n)-1;B(this,t,r,n,s,0)}var a=n-1;var o=1;this[r+a]=t&255;while(--a>=0&&(o*=256)){this[r+a]=t/o&255}return r+n};f.prototype.writeUInt8=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,1,255,0);if(!f.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function F(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,s=Math.min(e.length-r,2);i<s;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}f.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,2,65535,0);if(f.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{F(this,t,r,true)}return r+2};f.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,2,65535,0);if(f.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{F(this,t,r,false)}return r+2};function H(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,s=Math.min(e.length-r,4);i<s;++i){e[r+i]=t>>>(n?i:3-i)*8&255}}f.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,4,4294967295,0);if(f.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{H(this,t,r,true)}return r+4};f.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,4,4294967295,0);if(f.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{H(this,t,r,false)}return r+4};f.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var s=Math.pow(2,8*n-1);B(this,t,r,n,s-1,-s)}var a=0;var o=1;var l=0;this[r]=t&255;while(++a<n&&(o*=256)){if(t<0&&l===0&&this[r+a-1]!==0){l=1}this[r+a]=(t/o>>0)-l&255}return r+n};f.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var s=Math.pow(2,8*n-1);B(this,t,r,n,s-1,-s)}var a=n-1;var o=1;var l=0;this[r+a]=t&255;while(--a>=0&&(o*=256)){if(t<0&&l===0&&this[r+a+1]!==0){l=1}this[r+a]=(t/o>>0)-l&255}return r+n};f.prototype.writeInt8=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,1,127,-128);if(!f.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};f.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,2,32767,-32768);if(f.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{F(this,t,r,true)}return r+2};f.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,2,32767,-32768);if(f.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{F(this,t,r,false)}return r+2};f.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,4,2147483647,-2147483648);if(f.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{H(this,t,r,true)}return r+4};f.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)B(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(f.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{H(this,t,r,false)}return r+4};function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(e,t,r,n,i){if(!i){U(e,t,r,4,34028234663852886e22,-34028234663852886e22)}s.write(e,t,r,n,23,4);return r+4}f.prototype.writeFloatLE=function e(t,r,n){return V(this,t,r,true,n)};f.prototype.writeFloatBE=function e(t,r,n){return V(this,t,r,false,n)};function z(e,t,r,n,i){if(!i){U(e,t,r,8,17976931348623157e292,-17976931348623157e292)}s.write(e,t,r,n,52,8);return r+8}f.prototype.writeDoubleLE=function e(t,r,n){return z(this,t,r,true,n)};f.prototype.writeDoubleBE=function e(t,r,n){return z(this,t,r,false,n)};f.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var s=i-n;var a;if(this===t&&n<r&&r<i){for(a=s-1;a>=0;--a){t[a+r]=this[a+n]}}else if(s<1e3||!f.TYPED_ARRAY_SUPPORT){for(a=0;a<s;++a){t[a+r]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+s),r)}return s};f.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var s=t.charCodeAt(0);if(s<256){t=s}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!f.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=r;a<n;++a){this[a]=t}}else{var o=f.isBuffer(t)?t:G(new f(t,i).toString());var l=o.length;for(a=0;a<n-r;++a){this[a+r]=o[a%l]}}return this};var K=/[^+\/0-9A-Za-z-_]/g;function W(e){e=Y(e).replace(K,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Y(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function q(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function G(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var s=[];for(var a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)s.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)s.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)s.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)s.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return s}function $(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function X(e,t){var r,n,i;var s=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;s.push(i);s.push(n)}return s}function Q(e){return n.toByteArray(W(e))}function J(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function Z(e){return e!==e}}).call(this,te(19))},function(e,t){var r=e.exports={};var n;var i;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=s}}catch(e){n=s}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=a}}catch(e){i=a}})();function o(t){if(n===setTimeout){return setTimeout(t,0)}if((n===s||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(i===clearTimeout){return clearTimeout(t)}if((i===a||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var u=[];var c=false;var h;var f=-1;function d(){if(!c||!h){return}c=false;if(h.length){u=h.concat(u)}else{f=-1}if(u.length){p()}}function p(){if(c){return}var e=o(d);c=true;var t=u.length;while(t){h=u;u=[];while(++f<t){if(h){h[f].run()}}f=-1;t=u.length}h=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new v(e,t));if(u.length===1&&!c){o(p)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t,r){var n=r(35);function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;n(e,t)}e.exports=i;e.exports["default"]=e.exports,e.exports.__esModule=true},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return r.call(e)=="[object Array]"}},function(r,e,t){(function(e){var t;if(typeof window!=="undefined"){t=window}else if(typeof e!=="undefined"){t=e}else if(typeof self!=="undefined"){t=self}else{t={}}r.exports=t}).call(this,t(19))},function(i,e,s){(function(e){var t=typeof e!=="undefined"?e:typeof window!=="undefined"?window:{};var r=s(79);var n;if(typeof document!=="undefined"){n=document}else{n=t["__GLOBAL_DOCUMENT_CACHE@4"];if(!n){n=t["__GLOBAL_DOCUMENT_CACHE@4"]=r}}i.exports=n}).call(this,s(19))},function(e,t){},function(e,t,r){var n=r(81)["default"];var i=r(53);function s(e,t){if(t&&(n(t)==="object"||typeof t==="function")){return t}return i(e)}e.exports=s;e.exports["default"]=e.exports,e.exports.__esModule=true},function(t,e){function r(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){t.exports=r=function e(t){return typeof t};t.exports["default"]=t.exports,t.exports.__esModule=true}else{t.exports=r=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports["default"]=t.exports,t.exports.__esModule=true}return r(e)}t.exports=r;t.exports["default"]=t.exports,t.exports.__esModule=true},function(t,e){function r(e){t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};t.exports["default"]=t.exports,t.exports.__esModule=true;return r(e)}t.exports=r;t.exports["default"]=t.exports,t.exports.__esModule=true},function(e,t){e.exports=r;function r(e,t){var r;var n=null;try{r=JSON.parse(e,t)}catch(e){n=e}return[n,r]}},function(e,t){function r(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;if(t)e=t}if("number"===typeof e)return i[e];var r=String(e);var n=s[r.toLowerCase()];if(n)return n;var n=a[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0);return undefined}r.isEventKey=function e(t,r){if(t&&"object"===typeof t){var n=t.which||t.keyCode||t.charCode;if(n===null||n===undefined){return false}if(typeof r==="string"){var i=s[r.toLowerCase()];if(i){return i===n}var i=a[r.toLowerCase()];if(i){return i===n}}else if(typeof r==="number"){return r===n}return false}};t=e.exports=r;var s=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var a=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */for(n=97;n<123;n++)s[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)s[n-48]=n;for(n=1;n<13;n++)s["f"+n]=n+111;for(n=0;n<10;n++)s["numpad "+n]=n+96;var i=t.names=t.title={};for(n in s)i[s[n]]=n;for(var o in a){s[o]=a[o]}},function(e,t,r){"use strict";var n=r(16);var i=r(52);var s=r(86);
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var m=function(e){var i={};if(!e){return i}e.trim().split("\n").forEach(function(e){var t=e.indexOf(":");var r=e.slice(0,t).trim().toLowerCase();var n=e.slice(t+1).trim();if(typeof i[r]==="undefined"){i[r]=n}else if(Array.isArray(i[r])){i[r].push(n)}else{i[r]=[i[r],n]}});return i};e.exports=b;e.exports.default=b;b.XMLHttpRequest=n.XMLHttpRequest||u;b.XDomainRequest="withCredentials"in new b.XMLHttpRequest?b.XMLHttpRequest:n.XDomainRequest;a(["get","put","post","patch","head","delete"],function(n){b[n==="delete"?"del":n]=function(e,t,r){t=o(e,t,r);t.method=n.toUpperCase();return l(t)}});function a(e,t){for(var r=0;r<e.length;r++){t(e[r])}}function _(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true}function o(e,t,r){var n=e;if(s(t)){r=t;if(typeof e==="string"){n={uri:e}}}else{n=i({},t,{uri:e})}n.callback=r;return n}function b(e,t,r){t=o(e,t,r);return l(t)}function l(i){if(typeof i.callback==="undefined"){throw new Error("callback argument missing")}var s=false;var n=function e(t,r,n){if(!s){s=true;i.callback(t,r,n)}};function e(){if(o.readyState===4){setTimeout(r,0)}}function a(){var e=undefined;if(o.response){e=o.response}else{e=o.responseText||T(o)}if(v){try{e=JSON.parse(e)}catch(e){}}return e}function t(e){clearTimeout(g);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"))}e.statusCode=0;return n(e,y)}function r(){if(u)return;var e;clearTimeout(g);if(i.useXDR&&o.status===undefined){e=200}else{e=o.status===1223?204:o.status}var t=y;var r=null;if(e!==0){t={body:a(),statusCode:e,method:h,headers:{},url:c,rawRequest:o};if(o.getAllResponseHeaders){t.headers=m(o.getAllResponseHeaders())}}else{r=new Error("Internal XMLHttpRequest Error")}return n(r,t,t.body)}var o=i.xhr||null;if(!o){if(i.cors||i.useXDR){o=new b.XDomainRequest}else{o=new b.XMLHttpRequest}}var l;var u;var c=o.url=i.uri||i.url;var h=o.method=i.method||"GET";var f=i.body||i.data;var d=o.headers=i.headers||{};var p=!!i.sync;var v=false;var g;var y={body:undefined,headers:{},statusCode:0,method:h,url:c,rawRequest:o};if("json"in i&&i.json!==false){v=true;d["accept"]||d["Accept"]||(d["Accept"]="application/json");if(h!=="GET"&&h!=="HEAD"){d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json");f=JSON.stringify(i.json===true?f:i.json)}}o.onreadystatechange=e;o.onload=r;o.onerror=t;o.onprogress=function(){};o.onabort=function(){u=true};o.ontimeout=t;o.open(h,c,!p,i.username,i.password);if(!p){o.withCredentials=!!i.withCredentials}if(!p&&i.timeout>0){g=setTimeout(function(){if(u)return;u=true;o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";t(e)},i.timeout)}if(o.setRequestHeader){for(l in d){if(d.hasOwnProperty(l)){o.setRequestHeader(l,d[l])}}}else if(i.headers&&!_(i.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in i){o.responseType=i.responseType}if("beforeSend"in i&&typeof i.beforeSend==="function"){i.beforeSend(o)}o.send(f||null);return o}function T(e){try{if(e.responseType==="document"){return e.responseXML}var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t){return e.responseXML}}catch(e){}return null}function u(){}},function(e,t){e.exports=n;var r=Object.prototype.toString;function n(e){if(!e){return false}var t=r.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},function(e,t,r){var n=r(16);var i=e.exports={WebVTT:r(88),VTTCue:r(90),VTTRegion:r(91)};n.vttjs=i;n.WebVTT=i.WebVTT;var s=i.VTTCue;var a=i.VTTRegion;var o=n.VTTCue;var l=n.VTTRegion;i.shim=function(){n.VTTCue=s;n.VTTRegion=a};i.restore=function(){n.VTTCue=o;n.VTTRegion=l};if(!n.VTTCue){i.shim()}},function(e,t,r){var n=r(9);var i=Object.create||function(){function t(){}return function(e){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}t.prototype=e;return new t}}();function c(e,t){this.name="ParsingError";this.code=e.code;this.message=t||e.message}c.prototype=i(Error.prototype);c.prototype.constructor=c;c.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function p(e){function t(e,t,r,n){return(e|0)*3600+(t|0)*60+(r|0)+(n|0)/1e3}var r=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!r){return null}if(r[3]){return t(r[1],r[2],r[3].replace(":",""),r[4])}else if(r[1]>59){return t(r[1],r[2],0,r[4])}else{return t(0,r[1],r[2],r[4])}}function h(){this.values=i(null)}h.prototype={set:function(e,t){if(!this.get(e)&&t!==""){this.values[e]=t}},get:function(e,t,r){if(r){return this.has(e)?this.values[e]:t[r]}return this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n){if(t===r[n]){this.set(e,t);break}}},integer:function(e,t){if(/^-?\d+$/.test(t)){this.set(e,parseInt(t,10))}},percent:function(e,t){var r;if(r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/)){t=parseFloat(t);if(t>=0&&t<=100){this.set(e,t);return true}}return false}};function f(e,t,r,n){var i=n?e.split(n):[e];for(var s in i){if(typeof i[s]!=="string"){continue}var a=i[s].split(r);if(a.length!==2){continue}var o=a[0];var l=a[1];t(o,l)}}function d(t,e,a){var r=t;function n(){var e=p(t);if(e===null){throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+r)}t=t.replace(/^[^\sa-zA-Z-]+/,"");return e}function i(e,t){var s=new h;f(e,function(e,t){switch(e){case"region":for(var r=a.length-1;r>=0;r--){if(a[r].id===t){s.set(e,a[r].region);break}}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),i=n[0];s.integer(e,i);s.percent(e,i)?s.set("snapToLines",false):null;s.alt(e,i,["auto"]);if(n.length===2){s.alt("lineAlign",n[1],["start","center","end"])}break;case"position":n=t.split(",");s.percent(e,n[0]);if(n.length===2){s.alt("positionAlign",n[1],["start","center","end"])}break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","center","end","left","right"]);break}},/:/,/\s/);t.region=s.get("region",null);t.vertical=s.get("vertical","");try{t.line=s.get("line","auto")}catch(e){}t.lineAlign=s.get("lineAlign","start");t.snapToLines=s.get("snapToLines",true);t.size=s.get("size",100);try{t.align=s.get("align","center")}catch(e){t.align=s.get("align","middle")}try{t.position=s.get("position","auto")}catch(e){t.position=s.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=s.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}function s(){t=t.replace(/^\s+/,"")}s();e.startTime=n();s();if(t.substr(0,3)!=="--\x3e"){throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r)}t=t.substr(3);s();e.endTime=n();s();i(t,e)}var v=n.createElement("textarea");var g={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var y={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var m={v:"title",lang:"lang"};var _={rt:"ruby"};function s(s,r){function e(){if(!r){return null}function e(e){r=r.substr(e.length);return e}var t=r.match(/^([^<]*)(<[^>]*>?)?/);return e(t[1]?t[1]:t[2])}function t(e){v.innerHTML=e;e=v.textContent;v.textContent="";return e}function n(e,t){return!_[t.localName]||_[t.localName]===e.localName}function i(e,t){var r=g[e];if(!r){return null}var n=s.document.createElement(r);var i=m[e];if(i&&t){n[i]=t.trim()}return n}var a=s.document.createElement("div"),o=a,l,u=[];while((l=e())!==null){if(l[0]==="<"){if(l[1]==="/"){if(u.length&&u[u.length-1]===l.substr(2).replace(">","")){u.pop();o=o.parentNode}continue}var c=p(l.substr(1,l.length-2));var h;if(c){h=s.document.createProcessingInstruction("timestamp",c);o.appendChild(h);continue}var f=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f){continue}h=i(f[1],f[3]);if(!h){continue}if(!n(o,h)){continue}if(f[2]){var d=f[2].split(".");d.forEach(function(e){var t=/^bg_/.test(e);var r=t?e.slice(3):e;if(y.hasOwnProperty(r)){var n=t?"background-color":"color";var i=y[r];h.style[n]=i}});h.className=d.join(" ")}u.push(f[1]);o.appendChild(h);o=h;continue}o.appendChild(s.document.createTextNode(t(l)))}return a}var a=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function o(e){for(var t=0;t<a.length;t++){var r=a[t];if(e>=r[0]&&e<=r[1]){return true}}return false}function l(e){var t=[],r="",n;if(!e||!e.childNodes){return"ltr"}function i(e,t){for(var r=t.childNodes.length-1;r>=0;r--){e.push(t.childNodes[r])}}function s(e){if(!e||!e.length){return null}var t=e.pop(),r=t.textContent||t.innerText;if(r){var n=r.match(/^.*(\n|\r)/);if(n){e.length=0;return n[0]}return r}if(t.tagName==="ruby"){return s(e)}if(t.childNodes){i(e,t);return s(e)}}i(t,e);while(r=s(t)){for(var a=0;a<r.length;a++){n=r.charCodeAt(a);if(o(n)){return"rtl"}}}return"ltr"}function b(e){if(typeof e.line==="number"&&(e.snapToLines||e.line>=0&&e.line<=100)){return e.line}if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement){return-1}var t=e.track,r=t.textTrackList,n=0;for(var i=0;i<r.length&&r[i]!==t;i++){if(r[i].mode==="showing"){n++}}return++n*-1}function u(){}u.prototype.applyStyles=function(e,t){t=t||this.div;for(var r in e){if(e.hasOwnProperty(r)){t.style[r]=e[r]}}};u.prototype.formatStyle=function(e,t){return e===0?0:e+t};function T(e,t,r){u.call(this);this.cue=t;this.cueDiv=s(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv);this.div=e.document.createElement("div");n={direction:l(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(n);this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":i=t.position-t.size;break}if(t.vertical===""){this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")})}else{this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")})}this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}T.prototype=i(u.prototype);T.prototype.constructor=T;function E(e){var t,r,n,i;if(e.div){r=e.div.offsetHeight;n=e.div.offsetWidth;i=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect();t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left;this.right=e.right;this.top=e.top||i;this.height=e.height||r;this.bottom=e.bottom||i+(e.height||r);this.width=e.width||n;this.lineHeight=t!==undefined?t:e.lineHeight}E.prototype.move=function(e,t){t=t!==undefined?t:this.lineHeight;switch(e){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t;break}};E.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};E.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++){if(this.overlaps(e[t])){return true}}return false};E.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right};E.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}};E.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),r=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*r;return n/(this.height*this.width)};E.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}};E.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0;var r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0;var n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var i={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r};return i};function w(e,t,o,l){function r(e,t){var r,n=new E(e),i=1;for(var s=0;s<t.length;s++){while(e.overlapsOppositeAxis(o,t[s])||e.within(o)&&e.overlapsAny(l)){e.move(t[s])}if(e.within(o)){return e}var a=e.intersectPercentage(o);if(i>a){r=new E(e);i=a}e=new E(n)}return r||n}var n=new E(t),i=t.cue,s=b(i),a=[];if(i.snapToLines){var u;switch(i.vertical){case"":a=["+y","-y"];u="height";break;case"rl":a=["+x","-x"];u="width";break;case"lr":a=["-x","+x"];u="width";break}var c=n.lineHeight,h=c*Math.round(s),f=o[u]+c,d=a[0];if(Math.abs(h)>f){h=h<0?-1:1;h*=Math.ceil(f/c)*c}if(s<0){h+=i.vertical===""?o.height:o.width;a=a.reverse()}n.move(d,h)}else{var p=n.lineHeight/o.height*100;switch(i.lineAlign){case"center":s-=p/2;break;case"end":s-=p;break}switch(i.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")});break}a=["+y","-x","+x","-y"];n=new E(t)}var v=r(n,a);t.move(v.toCSSCompatValues(o))}function C(){}C.StringDecoder=function(){return{decode:function(e){if(!e){return""}if(typeof e!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(e))}}};C.convertCueToDOMTree=function(e,t){if(!e||!t){return null}return s(e,t)};var k=.05;var S="sans-serif";var x="1.5%";C.processCues=function(n,i,e){if(!n||!i||!e){return null}while(e.firstChild){e.removeChild(e.firstChild)}var s=n.document.createElement("div");s.style.position="absolute";s.style.left="0";s.style.right="0";s.style.top="0";s.style.bottom="0";s.style.margin=x;e.appendChild(s);function t(e){for(var t=0;t<e.length;t++){if(e[t].hasBeenReset||!e[t].displayState){return true}}return false}if(!t(i)){for(var r=0;r<i.length;r++){s.appendChild(i[r].displayState)}return}var a=[],o=E.getSimpleBoxPosition(s),l=Math.round(o.height*k*100)/100;var u={font:l+"px "+S};(function(){var e,t;for(var r=0;r<i.length;r++){t=i[r];e=new T(n,t,u);s.appendChild(e.div);w(n,e,o,a);t.displayState=e.div;a.push(E.getSimpleBoxPosition(e))}})()};C.Parser=function(e,t,r){if(!r){r=t;t={}}if(!t){t={}}this.window=e;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=r||new TextDecoder("utf8");this.regionList=[]};C.Parser.prototype={reportOrThrowError:function(e){if(e instanceof c){this.onparsingerror&&this.onparsingerror(e)}else{throw e}},parse:function(e){var n=this;if(e){n.buffer+=n.decoder.decode(e,{stream:true})}function t(){var e=n.buffer;var t=0;while(t<e.length&&e[t]!=="\r"&&e[t]!=="\n"){++t}var r=e.substr(0,t);if(e[t]==="\r"){++t}if(e[t]==="\n"){++t}n.buffer=e.substr(t);return r}function r(e){var i=new h;f(e,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(r.length!==2){break}var n=new h;n.percent("x",r[0]);n.percent("y",r[1]);if(!n.has("x")||!n.has("y")){break}i.set(e+"X",n.get("x"));i.set(e+"Y",n.get("y"));break;case"scroll":i.alt(e,t,["up"]);break}},/=/,/\s/);if(i.has("id")){var t=new(n.vttjs.VTTRegion||n.window.VTTRegion);t.width=i.get("width",100);t.lines=i.get("lines",3);t.regionAnchorX=i.get("regionanchorX",0);t.regionAnchorY=i.get("regionanchorY",100);t.viewportAnchorX=i.get("viewportanchorX",0);t.viewportAnchorY=i.get("viewportanchorY",100);t.scroll=i.get("scroll","");n.onregion&&n.onregion(t);n.regionList.push({id:i.get("id"),region:t})}}function i(e){var r=new h;f(e,function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",p(t));break}},/[^\d]:/,/,/);n.ontimestampmap&&n.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}function s(e){if(e.match(/X-TIMESTAMP-MAP/)){f(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":i(t);break}},/=/)}else{f(e,function(e,t){switch(e){case"Region":r(t);break}},/:/)}}try{var a;if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer)){return this}a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0]){throw new c(c.Errors.BadSignature)}n.state="HEADER"}var l=false;while(n.buffer){if(!/\r\n|\n/.test(n.buffer)){return this}if(!l){a=t()}else{l=false}switch(n.state){case"HEADER":if(/:/.test(a)){s(a)}else if(!a){n.state="ID"}continue;case"NOTE":if(!a){n.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){n.state="NOTE";break}if(!a){continue}n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}n.state="CUE";if(a.indexOf("--\x3e")===-1){n.cue.id=a;continue}case"CUE":try{d(a,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e);n.cue=null;n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var u=a.indexOf("--\x3e")!==-1;if(!a||u&&(l=true)){n.oncue&&n.oncue(n.cue);n.cue=null;n.state="ID";continue}if(n.cue.text){n.cue.text+="\n"}n.cue.text+=a.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":if(!a){n.state="ID"}continue}}}catch(e){n.reportOrThrowError(e);if(n.state==="CUETEXT"&&n.cue&&n.oncue){n.oncue(n.cue)}n.cue=null;n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{t.buffer+=t.decoder.decode();if(t.cue||t.state==="HEADER"){t.buffer+="\n\n";t.parse()}if(t.state==="INITIAL"){throw new c(c.Errors.BadSignature)}}catch(e){t.reportOrThrowError(e)}t.onflush&&t.onflush();return this}};e.exports=C},function(e,t){},function(e,t){var y="auto";var r={"":1,lr:1,rl:1};var n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function m(e){if(typeof e!=="string"){return false}var t=r[e.toLowerCase()];return t?e.toLowerCase():false}function _(e){if(typeof e!=="string"){return false}var t=n[e.toLowerCase()];return t?e.toLowerCase():false}function i(e,t,r){this.hasBeenReset=false;var n="";var i=false;var s=e;var a=t;var o=r;var l=null;var u="";var c=true;var h="auto";var f="start";var d="auto";var p="auto";var v=100;var g="center";Object.defineProperties(this,{id:{enumerable:true,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:true,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"){throw new TypeError("Start time must be set to a number.")}s=e;this.hasBeenReset=true}},endTime:{enumerable:true,get:function(){return a},set:function(e){if(typeof e!=="number"){throw new TypeError("End time must be set to a number.")}a=e;this.hasBeenReset=true}},text:{enumerable:true,get:function(){return o},set:function(e){o=""+e;this.hasBeenReset=true}},region:{enumerable:true,get:function(){return l},set:function(e){l=e;this.hasBeenReset=true}},vertical:{enumerable:true,get:function(){return u},set:function(e){var t=m(e);if(t===false){throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.")}u=t;this.hasBeenReset=true}},snapToLines:{enumerable:true,get:function(){return c},set:function(e){c=!!e;this.hasBeenReset=true}},line:{enumerable:true,get:function(){return h},set:function(e){if(typeof e!=="number"&&e!==y){throw new SyntaxError("Line: an invalid number or illegal string was specified.")}h=e;this.hasBeenReset=true}},lineAlign:{enumerable:true,get:function(){return f},set:function(e){var t=_(e);if(!t){console.warn("lineAlign: an invalid or illegal string was specified.")}else{f=t;this.hasBeenReset=true}}},position:{enumerable:true,get:function(){return d},set:function(e){if(e<0||e>100){throw new Error("Position must be between 0 and 100.")}d=e;this.hasBeenReset=true}},positionAlign:{enumerable:true,get:function(){return p},set:function(e){var t=_(e);if(!t){console.warn("positionAlign: an invalid or illegal string was specified.")}else{p=t;this.hasBeenReset=true}}},size:{enumerable:true,get:function(){return v},set:function(e){if(e<0||e>100){throw new Error("Size must be between 0 and 100.")}v=e;this.hasBeenReset=true}},align:{enumerable:true,get:function(){return g},set:function(e){var t=_(e);if(!t){throw new SyntaxError("align: an invalid or illegal alignment string was specified.")}g=t;this.hasBeenReset=true}}});this.displayState=undefined}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};e.exports=i},function(e,t){var r={"":true,up:true};function l(e){if(typeof e!=="string"){return false}var t=r[e.toLowerCase()];return t?e.toLowerCase():false}function u(e){return typeof e==="number"&&(e>=0&&e<=100)}function n(){var t=100;var r=3;var n=0;var i=100;var s=0;var a=100;var o="";Object.defineProperties(this,{width:{enumerable:true,get:function(){return t},set:function(e){if(!u(e)){throw new Error("Width must be between 0 and 100.")}t=e}},lines:{enumerable:true,get:function(){return r},set:function(e){if(typeof e!=="number"){throw new TypeError("Lines must be set to a number.")}r=e}},regionAnchorY:{enumerable:true,get:function(){return i},set:function(e){if(!u(e)){throw new Error("RegionAnchorX must be between 0 and 100.")}i=e}},regionAnchorX:{enumerable:true,get:function(){return n},set:function(e){if(!u(e)){throw new Error("RegionAnchorY must be between 0 and 100.")}n=e}},viewportAnchorY:{enumerable:true,get:function(){return a},set:function(e){if(!u(e)){throw new Error("ViewportAnchorY must be between 0 and 100.")}a=e}},viewportAnchorX:{enumerable:true,get:function(){return s},set:function(e){if(!u(e)){throw new Error("ViewportAnchorX must be between 0 and 100.")}s=e}},scroll:{enumerable:true,get:function(){return o},set:function(e){var t=l(e);if(t===false){console.warn("Scroll: an invalid or illegal string was specified.")}else{o=t}}}})}e.exports=n},function(n,e,t){var o=t(35);var i=t(93);function s(e,t,r){if(i()){n.exports=s=Reflect.construct;n.exports["default"]=n.exports,n.exports.__esModule=true}else{n.exports=s=function e(t,r,n){var i=[null];i.push.apply(i,r);var s=Function.bind.apply(t,i);var a=new s;if(n)o(a,n.prototype);return a};n.exports["default"]=n.exports,n.exports.__esModule=true}return s.apply(null,arguments)}n.exports=s;n.exports["default"]=n.exports,n.exports.__esModule=true},function(e,t){function r(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}e.exports=r;e.exports["default"]=e.exports,e.exports.__esModule=true},function(e,t,r){var n=r(35);function i(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)n(e,t)}e.exports=i;e.exports["default"]=e.exports,e.exports.__esModule=true},function(e,t,r){var n=r(96);r(125);r(142);r(143);r(144);r(146);r(147);r(148);r(149);r(150);e.exports=n},function(e,t,r){r(97);r(104);r(109);r(110);r(111);r(112);r(113);r(114);r(115);r(116);r(117);r(118);r(119);r(120);var n=r(61);e.exports=n.Reflect},function(e,t,r){var n=r(3);var i=r(18);var s=r(29);var a=r(2);var o=r(7);var l=i("Reflect","apply");var u=Function.apply;var c=!o(function(){l(function(){})});n({target:"Reflect",stat:true,forced:c},{apply:function e(t,r,n){s(t);a(n);return l?l(t,r,n):u.call(t,r,n)}})},function(e,t,r){"use strict";var n={}.propertyIsEnumerable;var i=Object.getOwnPropertyDescriptor;var s=i&&!n.call({1:2},1);t.f=s?function e(t){var r=i(this,t);return!!r&&r.enumerable}:n},function(e,t,r){var o=r(8);var l=r(60);var u=r(20);var c=r(14);e.exports=function(e,t){var r=l(t);var n=c.f;var i=u.f;for(var s=0;s<r.length;s++){var a=r[s];if(!o(e,a))n(e,a,i(t,a))}}},function(e,t,r){var n=r(62);var i=r(45);var s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return n(t,s)}},function(e,t,r){var l=r(36);var u=r(44);var c=r(102);var n=function(o){return function(e,t,r){var n=l(e);var i=u(n.length);var s=c(r,i);var a;if(o&&t!=t)while(i>s){a=n[s++];if(a!=a)return true}else for(;i>s;s++){if((o||s in n)&&n[s]===t)return o||s||0}return!o&&-1}};e.exports={includes:n(true),indexOf:n(false)}},function(e,t,r){var n=r(63);var i=Math.max;var s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):s(r,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(3);var i=r(18);var l=r(29);var u=r(2);var c=r(6);var h=r(46);var f=r(108);var s=r(7);var d=i("Reflect","construct");var p=s(function(){function e(){}return!(d(function(){},[],e)instanceof e)});var v=!s(function(){d(function(){})});var a=p||v;n({target:"Reflect",stat:true,forced:a,sham:a},{construct:function e(t,r){l(t);u(r);var n=arguments.length<3?t:l(arguments[2]);if(v&&!p)return d(t,r,n);if(t==n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var i=[null];i.push.apply(i,r);return new(f.apply(t,i))}var s=n.prototype;var a=h(c(s)?s:Object.prototype);var o=Function.apply.call(t,a,r);return c(o)?o:a}})},function(e,t,r){var n=r(13);var o=r(14);var l=r(2);var u=r(106);e.exports=n?Object.defineProperties:function e(t,r){l(t);var n=u(r);var i=n.length;var s=0;var a;while(i>s)o.f(t,a=n[s++],r[a]);return t}},function(e,t,r){var n=r(62);var i=r(45);e.exports=Object.keys||function e(t){return n(t,i)}},function(e,t,r){var n=r(18);e.exports=n("document","documentElement")},function(e,t,r){"use strict";var a=r(29);var o=r(6);var l=[].slice;var s={};var u=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("C,a","return new C("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function e(r){var n=a(this);var i=l.call(arguments,1);var s=function e(){var t=i.concat(l.call(arguments));return this instanceof s?u(n,t.length,t):n.apply(r,t)};if(o(n.prototype))s.prototype=n.prototype;return s}},function(e,t,r){var n=r(3);var i=r(13);var s=r(2);var a=r(37);var o=r(14);var l=r(7);var u=l(function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})});n({target:"Reflect",stat:true,forced:u,sham:!i},{defineProperty:function e(t,r,n){s(t);var i=a(r,true);s(n);try{o.f(t,i,n);return true}catch(e){return false}}})},function(e,t,r){var n=r(3);var i=r(2);var s=r(20).f;n({target:"Reflect",stat:true},{deleteProperty:function e(t,r){var n=s(i(t),r);return n&&!n.configurable?false:delete t[r]}})},function(e,t,r){var n=r(3);var s=r(6);var a=r(2);var o=r(8);var l=r(20);var u=r(17);function c(e,t){var r=arguments.length<3?e:arguments[2];var n,i;if(a(e)===r)return e[t];if(n=l.f(e,t))return o(n,"value")?n.value:n.get===undefined?undefined:n.get.call(r);if(s(i=u(e)))return c(i,t,r)}n({target:"Reflect",stat:true},{get:c})},function(e,t,r){var n=r(3);var i=r(13);var s=r(2);var a=r(20);n({target:"Reflect",stat:true,sham:!i},{getOwnPropertyDescriptor:function e(t,r){return a.f(s(t),r)}})},function(e,t,r){var n=r(3);var i=r(2);var s=r(17);var a=r(66);n({target:"Reflect",stat:true,sham:!a},{getPrototypeOf:function e(t){return s(i(t))}})},function(e,t,r){var n=r(3);n({target:"Reflect",stat:true},{has:function e(t,r){return r in t}})},function(e,t,r){var n=r(3);var i=r(2);var s=Object.isExtensible;n({target:"Reflect",stat:true},{isExtensible:function e(t){i(t);return s?s(t):true}})},function(e,t,r){var n=r(3);var i=r(60);n({target:"Reflect",stat:true},{ownKeys:i})},function(e,t,r){var n=r(3);var i=r(18);var s=r(2);var a=r(67);n({target:"Reflect",stat:true,sham:!a},{preventExtensions:function e(t){s(t);try{var r=i("Object","preventExtensions");if(r)r(t);return true}catch(e){return false}}})},function(e,t,r){var n=r(3);var o=r(2);var l=r(6);var u=r(8);var i=r(7);var c=r(14);var h=r(20);var f=r(17);var d=r(24);function p(e,t,r){var n=arguments.length<4?e:arguments[3];var i=h.f(o(e),t);var s,a;if(!i){if(l(a=f(e))){return p(a,t,r,n)}i=d(0)}if(u(i,"value")){if(i.writable===false||!l(n))return false;if(s=h.f(n,t)){if(s.get||s.set||s.writable===false)return false;s.value=r;c.f(n,t,s)}else c.f(n,t,d(0,r));return true}return i.set===undefined?false:(i.set.call(n,r),true)}var s=i(function(){var e=function(){};var t=c.f(new e,"a",{configurable:true});return Reflect.set(e.prototype,"a",1,t)!==false});n({target:"Reflect",stat:true,forced:s},{set:p})},function(e,t,r){var n=r(3);var i=r(2);var s=r(68);var a=r(47);if(a)n({target:"Reflect",stat:true},{setPrototypeOf:function e(t,r){i(t);s(r);try{a(t,r);return true}catch(e){return false}}})},function(e,t,r){var n=r(3);var i=r(5);var s=r(30);n({global:true},{Reflect:{}});s(i.Reflect,"Reflect",true)},function(e,t,r){var n=r(25);var i=r(5);e.exports=n(i.process)=="process"},function(e,t,r){var n=r(5);var i=r(123);var s=n.process;var a=s&&s.versions;var o=a&&a.v8;var l,u;if(o){l=o.split(".");u=l[0]+l[1]}else if(i){l=i.match(/Edge\/(\d+)/);if(!l||l[1]>=74){l=i.match(/Chrome\/(\d+)/);if(l)u=l[1]}}e.exports=u&&+u},function(e,t,r){var n=r(18);e.exports=n("navigator","userAgent")||""},function(e,t,r){var n=r(69);e.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=i.toKey;var o=i.set;n({target:"Reflect",stat:true},{defineMetadata:function e(t,r,n){var i=arguments.length<4?undefined:a(arguments[3]);o(t,r,s(n),i)}})},function(e,t,r){"use strict";var n=r(48);var i=r(70);e.exports=n("Map",function(t){return function e(){return t(this,arguments.length?arguments[0]:undefined)}},i)},function(e,t,r){var n=r(12);var i=r(33);var s=n("iterator");var a=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||a[s]===e)}},function(e,t,r){var n=r(129);var i=r(33);var s=r(12);var a=s("iterator");e.exports=function(e){if(e!=undefined)return e[a]||e["@@iterator"]||i[n(e)]}},function(e,t,r){var n=r(130);var i=r(25);var s=r(12);var a=s("toStringTag");var o=i(function(){return arguments}())=="Arguments";var l=function(e,t){try{return e[t]}catch(e){}};e.exports=n?i:function(e){var t,r,n;return e===undefined?"Undefined":e===null?"Null":typeof(r=l(t=Object(e),a))=="string"?r:o?i(t):(n=i(t))=="Object"&&typeof t.callee=="function"?"Arguments":n}},function(e,t,r){var n=r(12);var i=n("toStringTag");var s={};s[i]="z";e.exports=String(s)==="[object z]"},function(e,t,r){var n=r(2);e.exports=function(e){var t=e["return"];if(t!==undefined){return n(t.call(e)).value}}},function(e,t,r){var n=r(12);var i=n("iterator");var s=false;try{var a=0;var o={next:function(){return{done:!!a++}},return:function(){s=true}};o[i]=function(){return this};Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return false;var r=false;try{var n={};n[i]=function(){return{next:function(){return{done:r=true}}}};e(n)}catch(e){}return r}},function(e,t,r){var s=r(6);var a=r(47);e.exports=function(e,t,r){var n,i;if(a&&typeof(n=t.constructor)=="function"&&n!==r&&s(i=n.prototype)&&i!==r.prototype)a(e,i);return e}},function(e,t,r){"use strict";var y=r(3);var m=r(135);var _=r(17);var b=r(47);var T=r(30);var E=r(21);var w=r(26);var n=r(12);var C=r(42);var k=r(33);var i=r(71);var S=i.IteratorPrototype;var x=i.BUGGY_SAFARI_ITERATORS;var P=n("iterator");var O="keys";var I="values";var j="entries";var A=function(){return this};e.exports=function(e,t,r,n,i,s,a){m(r,t,n);var o=function(t){if(t===i&&f)return f;if(!x&&t in c)return c[t];switch(t){case O:return function e(){return new r(this,t)};case I:return function e(){return new r(this,t)};case j:return function e(){return new r(this,t)}}return function(){return new r(this)}};var l=t+" Iterator";var u=false;var c=e.prototype;var h=c[P]||c["@@iterator"]||i&&c[i];var f=!x&&h||o(i);var d=t=="Array"?c.entries||h:h;var p,v,g;if(d){p=_(d.call(new e));if(S!==Object.prototype&&p.next){if(!C&&_(p)!==S){if(b){b(p,S)}else if(typeof p[P]!="function"){E(p,P,A)}}T(p,l,true,true);if(C)k[l]=A}}if(i==I&&h&&h.name!==I){u=true;f=function e(){return h.call(this)}}if((!C||a)&&c[P]!==f){E(c,P,f)}k[t]=f;if(i){v={values:o(I),keys:s?f:o(O),entries:o(j)};if(a)for(g in v){if(x||u||!(g in c)){w(c,g,v[g])}}else y({target:t,proto:true,forced:x||u},v)}return v}},function(e,t,r){"use strict";var i=r(71).IteratorPrototype;var s=r(46);var a=r(24);var o=r(30);var l=r(33);var u=function(){return this};e.exports=function(e,t,r){var n=t+" Iterator";e.prototype=s(i,{next:a(1,r)});o(e,n,false,true);l[n]=u;return e}},function(e,t,r){"use strict";var n=r(18);var i=r(14);var s=r(12);var a=r(13);var o=s("species");e.exports=function(e){var t=n(e);var r=i.f;if(a&&t&&!t[o]){r(t,o,{configurable:true,get:function(){return this}})}}},function(e,t,r){"use strict";var n=r(5);var i=r(51);var s=r(31);var a=r(48);var o=r(138);var l=r(6);var u=r(27).enforce;var c=r(59);var h=!n.ActiveXObject&&"ActiveXObject"in n;var f=Object.isExtensible;var d;var p=function(t){return function e(){return t(this,arguments.length?arguments[0]:undefined)}};var v=e.exports=a("WeakMap",p,o);if(c&&h){d=o.getConstructor(p,"WeakMap",true);s.REQUIRED=true;var g=v.prototype;var y=g["delete"];var m=g.has;var _=g.get;var b=g.set;i(g,{delete:function(e){if(l(e)&&!f(e)){var t=u(this);if(!t.frozen)t.frozen=new d;return y.call(this,e)||t.frozen["delete"](e)}return y.call(this,e)},has:function e(t){if(l(t)&&!f(t)){var r=u(this);if(!r.frozen)r.frozen=new d;return m.call(this,t)||r.frozen.has(t)}return m.call(this,t)},get:function e(t){if(l(t)&&!f(t)){var r=u(this);if(!r.frozen)r.frozen=new d;return m.call(this,t)?_.call(this,t):r.frozen.get(t)}return _.call(this,t)},set:function e(t,r){if(l(t)&&!f(t)){var n=u(this);if(!n.frozen)n.frozen=new d;m.call(this,t)?b.call(this,t,r):n.frozen.set(t,r)}else b.call(this,t,r);return this}})}},function(e,t,r){"use strict";var l=r(51);var u=r(31).getWeakData;var c=r(2);var h=r(6);var f=r(50);var d=r(32);var n=r(139);var p=r(8);var i=r(27);var v=i.set;var g=i.getterFor;var s=n.find;var a=n.findIndex;var y=0;var m=function(e){return e.frozen||(e.frozen=new o)};var o=function(){this.entries=[]};var _=function(e,t){return s(e.entries,function(e){return e[0]===t})};o.prototype={get:function(e){var t=_(this,e);if(t)return t[1]},has:function(e){return!!_(this,e)},set:function(e,t){var r=_(this,e);if(r)r[1]=t;else this.entries.push([e,t])},delete:function(t){var e=a(this.entries,function(e){return e[0]===t});if(~e)this.entries.splice(e,1);return!!~e}};e.exports={getConstructor:function(e,r,n,i){var s=e(function(e,t){f(e,s,r);v(e,{type:r,id:y++,frozen:undefined});if(t!=undefined)d(t,e[i],{that:e,AS_ENTRIES:n})});var a=g(r);var o=function(e,t,r){var n=a(e);var i=u(c(t),true);if(i===true)m(n).set(t,r);else i[n.id]=r;return e};l(s.prototype,{delete:function(e){var t=a(this);if(!h(e))return false;var r=u(e);if(r===true)return m(t)["delete"](e);return r&&p(r,t.id)&&delete r[t.id]},has:function e(t){var r=a(this);if(!h(t))return false;var n=u(t);if(n===true)return m(r).has(t);return n&&p(n,r.id)}});l(s.prototype,n?{get:function e(t){var r=a(this);if(h(t)){var n=u(t);if(n===true)return m(r).get(t);return n?n[r.id]:undefined}},set:function e(t,r){return o(this,t,r)}}:{add:function e(t){return o(this,t,true)}});return s}}},function(e,t,r){var T=r(49);var E=r(54);var w=r(65);var C=r(44);var k=r(140);var S=[].push;var n=function(d){var p=d==1;var v=d==2;var g=d==3;var y=d==4;var m=d==6;var _=d==7;var b=d==5||m;return function(e,t,r,n){var i=w(e);var s=E(i);var a=T(t,r,3);var o=C(s.length);var l=0;var u=n||k;var c=p?u(e,o):v||_?u(e,0):undefined;var h,f;for(;o>l;l++)if(b||l in s){h=s[l];f=a(h,l,i);if(d){if(p)c[l]=f;else if(f)switch(d){case 3:return true;case 5:return h;case 6:return l;case 2:S.call(c,h)}else switch(d){case 4:return false;case 7:S.call(c,h)}}}return m?-1:g||y?y:c}};e.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6),filterOut:n(7)}},function(e,t,r){var n=r(6);var i=r(141);var s=r(12);var a=s("species");e.exports=function(e,t){var r;if(i(e)){r=e.constructor;if(typeof r=="function"&&(r===Array||i(r.prototype)))r=undefined;else if(n(r)){r=r[a];if(r===null)r=undefined}}return new(r===undefined?Array:r)(t===0?0:t)}},function(e,t,r){var n=r(25);e.exports=Array.isArray||function e(t){return n(t)=="Array"}},function(e,t,r){var n=r(3);var i=r(15);var a=r(2);var o=i.toKey;var l=i.getMap;var u=i.store;n({target:"Reflect",stat:true},{deleteMetadata:function e(t,r){var n=arguments.length<3?undefined:o(arguments[2]);var i=l(a(r),n,false);if(i===undefined||!i["delete"](t))return false;if(i.size)return true;var s=u.get(r);s["delete"](n);return!!s.size||u["delete"](r)}})},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=r(17);var o=i.has;var l=i.get;var u=i.toKey;var c=function(e,t,r){var n=o(e,t,r);if(n)return l(e,t,r);var i=a(t);return i!==null?c(e,i,r):undefined};n({target:"Reflect",stat:true},{getMetadata:function e(t,r){var n=arguments.length<3?undefined:u(arguments[2]);return c(t,s(r),n)}})},function(e,t,r){var n=r(3);var s=r(145);var i=r(15);var a=r(2);var o=r(17);var l=r(32);var u=i.keys;var c=i.toKey;var h=function(e){var t=[];l(e,t.push,{that:t});return t};var f=function(e,t){var r=u(e,t);var n=o(e);if(n===null)return r;var i=f(n,t);return i.length?r.length?h(new s(r.concat(i))):i:r};n({target:"Reflect",stat:true},{getMetadataKeys:function e(t){var r=arguments.length<2?undefined:c(arguments[1]);return f(a(t),r)}})},function(e,t,r){"use strict";var n=r(48);var i=r(70);e.exports=n("Set",function(t){return function e(){return t(this,arguments.length?arguments[0]:undefined)}},i)},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=i.get;var o=i.toKey;n({target:"Reflect",stat:true},{getOwnMetadata:function e(t,r){var n=arguments.length<3?undefined:o(arguments[2]);return a(t,s(r),n)}})},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=i.keys;var o=i.toKey;n({target:"Reflect",stat:true},{getOwnMetadataKeys:function e(t){var r=arguments.length<2?undefined:o(arguments[1]);return a(s(t),r)}})},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=r(17);var o=i.has;var l=i.toKey;var u=function(e,t,r){var n=o(e,t,r);if(n)return true;var i=a(t);return i!==null?u(e,i,r):false};n({target:"Reflect",stat:true},{hasMetadata:function e(t,r){var n=arguments.length<3?undefined:l(arguments[2]);return u(t,s(r),n)}})},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=i.has;var o=i.toKey;n({target:"Reflect",stat:true},{hasOwnMetadata:function e(t,r){var n=arguments.length<3?undefined:o(arguments[2]);return a(t,s(r),n)}})},function(e,t,r){var n=r(3);var i=r(15);var s=r(2);var a=i.toKey;var o=i.set;n({target:"Reflect",stat:true},{metadata:function e(n,i){return function e(t,r){o(n,i,s(t),a(r))}}})},function(e,t,r){"use strict";r.r(t);var n=r(0);var l=r.n(n);var i=r(16);var s=r.n(i);
/*! @name videojs-overlay @version 2.1.4 @license Apache-2.0 */function a(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function o(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var u="2.1.4";var c={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:false,showBackground:true,attachToControlBar:false,overlays:[{start:"playing",end:"paused"}]};var h=l.a.getComponent("Component");var f=l.a.dom||l.a;var d=l.a.registerPlugin||l.a.plugin;var p=function e(t){return typeof t==="number"&&t===t};var v=function e(t){return typeof t==="string"&&/^\S+$/.test(t)};var g=function(n){a(i,n);function i(e,t){var r;r=n.call(this,e,t)||this;["start","end"].forEach(function(e){var t=r.options_[e];if(p(t)){r[e+"Event_"]="timeupdate"}else if(v(t)){r[e+"Event_"]=t}else if(e==="start"){throw new Error('invalid "start" option; expected number or string')}});["endListener_","rewindListener_","startListener_"].forEach(function(t){r[t]=function(e){return i.prototype[t].call(o(o(r)),e)}});if(r.startEvent_==="timeupdate"){r.on(e,"timeupdate",r.rewindListener_)}r.debug('created, listening to "'+r.startEvent_+'" for "start" and "'+(r.endEvent_||"nothing")+'" for "end"');r.hide();return r}var e=i.prototype;e.createEl=function e(){var t=this.options_;var r=t.content;var n=t.showBackground?"vjs-overlay-background":"vjs-overlay-no-background";var i=f.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+t.align+"\n        "+t.class+"\n        "+n+"\n        vjs-hidden\n      "});if(typeof r==="string"){i.innerHTML=r}else if(r instanceof s.a.DocumentFragment){i.appendChild(r)}else{f.appendContent(i,r)}return i};e.debug=function e(){if(!this.options_.debug){return}var t=l.a.log;var r=t;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++){i[s]=arguments[s]}if(t.hasOwnProperty(i[0])&&typeof t[i[0]]==="function"){r=t[i.shift()]}r.apply(void 0,["overlay#"+this.id()+": "].concat(i))};e.hide=function e(){n.prototype.hide.call(this);this.debug("hidden");this.debug('bound `startListener_` to "'+this.startEvent_+'"');if(this.endEvent_){this.debug('unbound `endListener_` from "'+this.endEvent_+'"');this.off(this.player(),this.endEvent_,this.endListener_)}this.on(this.player(),this.startEvent_,this.startListener_);return this};e.shouldHide_=function e(t,r){var n=this.options_.end;return p(n)?t>=n:n===r};e.show=function e(){n.prototype.show.call(this);this.off(this.player(),this.startEvent_,this.startListener_);this.debug("shown");this.debug('unbound `startListener_` from "'+this.startEvent_+'"');if(this.endEvent_){this.debug('bound `endListener_` to "'+this.endEvent_+'"');this.on(this.player(),this.endEvent_,this.endListener_)}return this};e.shouldShow_=function e(t,r){var n=this.options_.start;var i=this.options_.end;if(p(n)){if(p(i)){return t>=n&&t<i}else if(!this.hasShownSinceSeek_){this.hasShownSinceSeek_=true;return t>=n}return Math.floor(t)===n}return n===r};e.startListener_=function e(t){var r=this.player().currentTime();if(this.shouldShow_(r,t.type)){this.show()}};e.endListener_=function e(t){var r=this.player().currentTime();if(this.shouldHide_(r,t.type)){this.hide()}};e.rewindListener_=function e(t){var r=this.player().currentTime();var n=this.previousTime_;var i=this.options_.start;var s=this.options_.end;if(r<n){this.debug("rewind detected");if(p(s)&&!this.shouldShow_(r)){this.debug("hiding; "+s+" is an integer and overlay should not show at this time");this.hasShownSinceSeek_=false;this.hide()}else if(v(s)&&r<i){this.debug("hiding; show point ("+i+") is before now ("+r+") and end point ("+s+") is an event");this.hasShownSinceSeek_=false;this.hide()}}this.previousTime_=r};return i}(h);l.a.registerComponent("Overlay",g);var y=function e(t){var a=this;var o=l.a.mergeOptions(c,t);if(Array.isArray(this.overlays_)){this.overlays_.forEach(function(e){a.removeChild(e);if(a.controlBar){a.controlBar.removeChild(e)}e.dispose()})}var r=o.overlays;delete o.overlays;this.overlays_=r.map(function(e){var t=l.a.mergeOptions(o,e);var r=typeof t.attachToControlBar==="string"||t.attachToControlBar===true;if(!a.controls()||!a.controlBar){return a.addChild("overlay",t)}if(r&&t.align.indexOf("bottom")!==-1){var n=a.controlBar.children()[0];if(a.controlBar.getChild(t.attachToControlBar)!==undefined){n=a.controlBar.getChild(t.attachToControlBar)}if(n){var i=a.controlBar.addChild("overlay",t);a.controlBar.el().insertBefore(i.el(),n.el());return i}}var s=a.addChild("overlay",t);a.el().insertBefore(s.el(),a.controlBar.el());return s})};y.VERSION=u;d("overlay",y);t["default"]=y},function(r,n,i){var s,a;(function(e,t){if(typeof window!=="undefined"&&window.videojs){t(window.videojs)}else if(true){!(s=[i(0)],a=function(e){return t(e.default||e)}.apply(n,s),a!==undefined&&(r.exports=a))}else{}})(this,function(z){"use strict";if(typeof window!=="undefined"){window["videojs_hotkeys"]={version:"0.2.27"}}var e=function(f){var d=this;var p=d.el();var v=document;var e={volumeStep:.1,seekStep:5,enableMute:true,enableVolumeScroll:true,enableHoverScroll:false,enableFullscreen:true,enableNumbers:true,enableJogStyle:false,alwaysCaptureHotkeys:false,captureDocumentHotkeys:false,documentHotkeysFocusElementFilter:function(){return false},enableModifiersForNumbers:true,enableInactiveFocus:true,skipInitialFocus:false,playPauseKey:L,rewindKey:R,forwardKey:N,volumeUpKey:D,volumeDownKey:B,muteKey:F,fullscreenKey:H,customKeys:{}};var g=1,y=2,m=3,_=4,b=5,T=6,E=7;var t=z.mergeOptions||z.util.mergeOptions;f=t(e,f||{});var w=f.volumeStep,r=f.seekStep,C=f.enableMute,i=f.enableVolumeScroll,s=f.enableHoverScroll,k=f.enableFullscreen,S=f.enableNumbers,x=f.enableJogStyle,P=f.alwaysCaptureHotkeys,O=f.captureDocumentHotkeys,I=f.documentHotkeysFocusElementFilter,j=f.enableModifiersForNumbers,n=f.enableInactiveFocus,a=f.skipInitialFocus;var o=z.VERSION;if(!p.hasAttribute("tabIndex")){p.setAttribute("tabIndex","-1")}p.style.outline="none";if(P||!d.autoplay()){if(!a){d.one("play",function(){p.focus()})}}if(n){d.on("userinactive",function(){var r=function(){clearTimeout(e)};var e=setTimeout(function(){d.off("useractive",r);var e=v.activeElement;var t=p.querySelector(".vjs-control-bar");if(e&&e.parentElement==t){p.focus()}},10);d.one("useractive",r)})}d.on("play",function(){var e=p.querySelector(".iframeblocker");if(e&&e.style.display===""){e.style.display="block";e.style.bottom="39px"}});var l=function e(t){var r=t.which,n,i;var s=t.preventDefault.bind(t);var a=d.duration();if(d.controls()){var o=v.activeElement;if(P||O&&I(o)||o==p||o==p.querySelector(".vjs-tech")||o==p.querySelector(".vjs-control-bar")||o==p.querySelector(".iframeblocker")){switch(M(t,d)){case g:s();if(P||O){t.stopPropagation()}if(d.paused()){V(d.play())}else{d.pause()}break;case y:n=!d.paused();s();if(n){d.pause()}i=d.currentTime()-U(t);if(i<=0){i=0}d.currentTime(i);if(n){V(d.play())}break;case m:n=!d.paused();s();if(n){d.pause()}i=d.currentTime()+U(t);if(i>=a){i=n?a-.001:a}d.currentTime(i);if(n){V(d.play())}break;case b:s();if(!x){d.volume(d.volume()-w)}else{i=d.currentTime()-1;if(d.currentTime()<=1){i=0}d.currentTime(i)}break;case _:s();if(!x){d.volume(d.volume()+w)}else{i=d.currentTime()+1;if(i>=a){i=a}d.currentTime(i)}break;case T:if(C){d.muted(!d.muted())}break;case E:if(k){if(d.isFullscreen()){d.exitFullscreen()}else{d.requestFullscreen()}}break;default:if(r>47&&r<59||r>95&&r<106){if(j||!(t.metaKey||t.ctrlKey||t.altKey)){if(S){var l=48;if(r>95){l=96}var u=r-l;s();d.currentTime(d.duration()*u*.1)}}}for(var c in f.customKeys){var h=f.customKeys[c];if(h&&h.key&&h.handler){if(h.key(t)){s();h.handler(d,f,t)}}}}}}};var u=function e(t){if(o!=null&&o<="7.1.0"){if(d.controls()){var r=t.relatedTarget||t.toElement||v.activeElement;if(r==p||r==p.querySelector(".vjs-tech")||r==p.querySelector(".iframeblocker")){if(k){if(d.isFullscreen()){d.exitFullscreen()}else{d.requestFullscreen()}}}}}};var c=false;var h=p.querySelector(".vjs-volume-menu-button")||p.querySelector(".vjs-volume-panel");if(h!=null){h.onmouseover=function(){c=true};h.onmouseout=function(){c=false}}var A=function e(t){if(s){var r=0}else{var r=v.activeElement}if(d.controls()){if(P||r==p||r==p.querySelector(".vjs-tech")||r==p.querySelector(".iframeblocker")||r==p.querySelector(".vjs-control-bar")||c){if(i){t=window.event||t;var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));t.preventDefault();if(n==1){d.volume(d.volume()+w)}else if(n==-1){d.volume(d.volume()-w)}}}}};var M=function e(t,r){if(f.playPauseKey(t,r)){return g}if(f.rewindKey(t,r)){return y}if(f.forwardKey(t,r)){return m}if(f.volumeUpKey(t,r)){return _}if(f.volumeDownKey(t,r)){return b}if(f.muteKey(t,r)){return T}if(f.fullscreenKey(t,r)){return E}};function L(e){return e.which===32||e.which===179}function R(e){return e.which===37||e.which===177}function N(e){return e.which===39||e.which===176}function D(e){return e.which===38}function B(e){return e.which===40}function F(e){return e.which===77}function H(e){return e.which===70}function U(e){return typeof r==="function"?r(e):r}function V(e){if(e!=null&&typeof e.then==="function"){e.then(null,function(e){})}}d.on("keydown",l);d.on("dblclick",u);d.on("mousewheel",A);d.on("DOMMouseScroll",A);if(O){document.addEventListener("keydown",function(e){l(e)})}return this};var t=z.registerPlugin||z.plugin;t("hotkeys",e)})},function(e,t,r){"use strict";t.byteLength=a;t.toByteArray=o;t.fromByteArray=v;var l=[];var u=[];var c=typeof Uint8Array!=="undefined"?Uint8Array:Array;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,s=n.length;i<s;++i){l[i]=n[i];u[n.charCodeAt(i)]=i}u["-".charCodeAt(0)]=62;u["_".charCodeAt(0)]=63;function h(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function a(e){var t=h(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function f(e,t,r){return(t+r)*3/4-r}function o(e){var t;var r=h(e);var n=r[0];var i=r[1];var s=new c(f(e,n,i));var a=0;var o=i>0?n-4:n;var l;for(l=0;l<o;l+=4){t=u[e.charCodeAt(l)]<<18|u[e.charCodeAt(l+1)]<<12|u[e.charCodeAt(l+2)]<<6|u[e.charCodeAt(l+3)];s[a++]=t>>16&255;s[a++]=t>>8&255;s[a++]=t&255}if(i===2){t=u[e.charCodeAt(l)]<<2|u[e.charCodeAt(l+1)]>>4;s[a++]=t&255}if(i===1){t=u[e.charCodeAt(l)]<<10|u[e.charCodeAt(l+1)]<<4|u[e.charCodeAt(l+2)]>>2;s[a++]=t>>8&255;s[a++]=t&255}return s}function d(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[e&63]}function p(e,t,r){var n;var i=[];for(var s=t;s<r;s+=3){n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255);i.push(d(n))}return i.join("")}function v(e){var t;var r=e.length;var n=r%3;var i=[];var s=16383;for(var a=0,o=r-n;a<o;a+=s){i.push(p(e,a,a+s>o?o:a+s))}if(n===1){t=e[r-1];i.push(l[t>>2]+l[t<<4&63]+"==")}else if(n===2){t=(e[r-2]<<8)+e[r-1];i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")}return i.join("")}},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var s,a;var o=i*8-n-1;var l=(1<<o)-1;var u=l>>1;var c=-7;var h=r?i-1:0;var f=r?-1:1;var d=e[t+h];h+=f;s=d&(1<<-c)-1;d>>=-c;c+=o;for(;c>0;s=s*256+e[t+h],h+=f,c-=8){}a=s&(1<<-c)-1;s>>=-c;c+=n;for(;c>0;a=a*256+e[t+h],h+=f,c-=8){}if(s===0){s=1-u}else if(s===l){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,n);s=s-u}return(d?-1:1)*a*Math.pow(2,s-n)};t.write=function(e,t,r,n,i,s){var a,o,l;var u=s*8-i-1;var c=(1<<u)-1;var h=c>>1;var f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:s-1;var p=n?1:-1;var v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=c}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-a))<1){a--;l*=2}if(a+h>=1){t+=f/l}else{t+=f*Math.pow(2,1-h)}if(t*l>=2){a++;l/=2}if(a+h>=c){o=0;a=c}else if(a+h>=1){o=(t*l-1)*Math.pow(2,i);a=a+h}else{o=t*Math.pow(2,h-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+d]=o&255,d+=p,o/=256,i-=8){}a=a<<i|o;u+=i;for(;u>0;e[r+d]=a&255,d+=p,a/=256,u-=8){}e[r+d-p]|=v*128}},function(e,t,l){"use strict";l.r(t);l.d(t,"PeerTubeEmbed",function(){return _r});var u=l(1);var r=l(0);var c=l.n(r);const n=["player","server"];const i={"en-US":"English",ar:"","ca-ES":"Catal","cs-CZ":"etina","de-DE":"Deutsch","el-GR":"",eo:"Esperanto","es-ES":"Espaol","eu-ES":"Euskara","fi-FI":"suomi","fr-FR":"Franais",gd:"Gidhlig","gl-ES":"galego","hu-HU":"magyar","it-IT":"Italiano","ja-JP":"",kab:"Taqbaylit","nl-NL":"Nederlands",oc:"Occitan","pl-PL":"Polski","pt-BR":"Portugus (Brasil)","pt-PT":"Portugus (Portugal)","ru-RU":"",sq:"Shqip","sv-SE":"Svenska","th-TH":"","vi-VN":"Ting Vit","zh-Hans-CN":"","zh-Hant-TW":""};const s={"ar-001":"ar",ca:"ca-ES",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",es:"es-ES",eu:"eu-ES",fi:"fi-FI",gl:"gl-ES",fr:"fr-FR",hu:"hu-HU",it:"it-IT",ja:"ja-JP",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",th:"th-TH",vi:"vi-VN","zh-CN":"zh-Hans-CN","zh-Hans":"zh-Hans-CN","zh-Hant":"zh-Hant-TW","zh-TW":"zh-Hant-TW",zh:"zh-Hans-CN"};const a=Object.keys(i).concat(Object.keys(s));function o(){return"en-US"}function h(e){return g(e)===g(o())}function f(e,t){return t&&t[e]?t[e]:e}const d=a.map(e=>"/"+e);function p(e){return d.includes(e)}function v(e){return a.includes(e)}function g(e){if(!e)return e;if(s[e])return s[e];return e}function y(e){if(e.includes("-")===false)return e;return e.split("-")[0]}function m(e){return g(e)}var _;(function(e){e[e["ADMINISTRATOR"]=0]="ADMINISTRATOR";e[e["MODERATOR"]=1]="MODERATOR";e[e["USER"]=2]="USER"})(_||(_={}));class b{constructor(e){this.chapters=e.chapters;this.format=e.format;this.streams=e.streams;delete this.format.filename}}function T(e){if(e===0){return 64*1e3}if(e<=240){return 320*1e3}if(e<=360){return 780*1e3}if(e<=480){return 1500*1e3}if(e<=720){return 2800*1e3}if(e<=1080){return 5200*1e3}if(e<=1440){return 1e4*1e3}return 22e3*1e3}function E(e,t,r){const n=T(e);const i=n*1.4;const s=i-n;const a=r.MAX-r.AVERAGE;return Math.floor(n+(t-r.AVERAGE)*(s/a))}function w(e,t,r){return E(e,t,r)*2}const C={"filter:api.trending-videos.videos.list.params":true,"filter:api.trending-videos.videos.list.result":true,"filter:api.most-liked-videos.videos.list.params":true,"filter:api.most-liked-videos.videos.list.result":true,"filter:api.local-videos.videos.list.params":true,"filter:api.local-videos.videos.list.result":true,"filter:api.recently-added-videos.videos.list.params":true,"filter:api.recently-added-videos.videos.list.result":true,"filter:api.user-subscriptions-videos.videos.list.params":true,"filter:api.user-subscriptions-videos.videos.list.result":true,"filter:api.video-watch.video.get.params":true,"filter:api.video-watch.video.get.result":true,"filter:api.video-watch.video-threads.list.params":true,"filter:api.video-watch.video-threads.list.result":true,"filter:api.video-watch.video-thread-replies.list.params":true,"filter:api.video-watch.video-thread-replies.list.result":true,"filter:api.search.videos.list.params":true,"filter:api.search.videos.list.result":true,"filter:api.search.video-channels.list.params":true,"filter:api.search.video-channels.list.result":true,"filter:api.signup.registration.create.params":true,"filter:internal.video-watch.player.build-options.params":true,"filter:internal.video-watch.player.build-options.result":true,"filter:internal.common.svg-icons.get-content.params":true,"filter:internal.common.svg-icons.get-content.result":true};const k={"action:application.init":true,"action:video-watch.init":true,"action:video-watch.video.loaded":true,"action:video-watch.player.loaded":true,"action:video-watch.video-threads.loaded":true,"action:video-watch.video-thread-replies.loaded":true,"action:video-edit.init":true,"action:login.init":true,"action:search.init":true,"action:router.navigation-end":true,"action:signup.register.init":true,"action:video-upload.init":true,"action:video-url-import.init":true,"action:video-torrent-import.init":true,"action:go-live.init":true,"action:auth-user.logged-in":true,"action:auth-user.logged-out":true,"action:auth-user.information-loaded":true,"action:modal.video-download.shown":true,"action:embed.player.loaded":true};const S=Object.assign({},C,k);var x;(function(e){e[e["PLUGIN"]=1]="PLUGIN";e[e["THEME"]=2]="THEME"})(x||(x={}));const P={"filter:api.videos.list.params":true,"filter:api.videos.list.result":true,"filter:api.accounts.videos.list.params":true,"filter:api.accounts.videos.list.result":true,"filter:api.video-channels.videos.list.params":true,"filter:api.video-channels.videos.list.result":true,"filter:api.user.me.videos.list.params":true,"filter:api.user.me.videos.list.result":true,"filter:api.search.videos.local.list.params":true,"filter:api.search.videos.local.list.result":true,"filter:api.search.videos.index.list.params":true,"filter:api.search.videos.index.list.result":true,"filter:api.search.video-channels.local.list.params":true,"filter:api.search.video-channels.local.list.result":true,"filter:api.search.video-channels.index.list.params":true,"filter:api.search.video-channels.index.list.result":true,"filter:api.video.get.result":true,"filter:api.video.upload.accept.result":true,"filter:api.live-video.create.accept.result":true,"filter:api.video.pre-import-url.accept.result":true,"filter:api.video.pre-import-torrent.accept.result":true,"filter:api.video.post-import-url.accept.result":true,"filter:api.video.post-import-torrent.accept.result":true,"filter:api.video-thread.create.accept.result":true,"filter:api.video-comment-reply.create.accept.result":true,"filter:api.video-threads.list.params":true,"filter:api.video-threads.list.result":true,"filter:api.video-thread-comments.list.params":true,"filter:api.video-thread-comments.list.result":true,"filter:video.auto-blacklist.result":true,"filter:api.user.signup.allowed.result":true,"filter:api.download.video.allowed.result":true,"filter:api.download.torrent.allowed.result":true,"filter:html.embed.video.allowed.result":true,"filter:html.embed.video-playlist.allowed.result":true};const O={"action:application.listening":true,"action:api.video.updated":true,"action:api.video.deleted":true,"action:api.video.uploaded":true,"action:api.video.viewed":true,"action:api.live-video.created":true,"action:api.video-thread.created":true,"action:api.video-comment-reply.created":true,"action:api.video-comment.deleted":true,"action:api.user.blocked":true,"action:api.user.unblocked":true,"action:api.user.registered":true,"action:api.user.created":true,"action:api.user.deleted":true,"action:api.user.updated":true,"action:api.user.oauth2-got-token":true};const I=Object.assign({},P,O);var j;(function(e){e[e["CONTINUE_100"]=100]="CONTINUE_100";e[e["SWITCHING_PROTOCOLS_101"]=101]="SWITCHING_PROTOCOLS_101";e[e["OK_200"]=200]="OK_200";e[e["CREATED_201"]=201]="CREATED_201";e[e["ACCEPTED_202"]=202]="ACCEPTED_202";e[e["NO_CONTENT_204"]=204]="NO_CONTENT_204";e[e["RESET_CONTENT_205"]=205]="RESET_CONTENT_205";e[e["PARTIAL_CONTENT_206"]=206]="PARTIAL_CONTENT_206";e[e["MULTIPLE_CHOICES_300"]=300]="MULTIPLE_CHOICES_300";e[e["MOVED_PERMANENTLY_301"]=301]="MOVED_PERMANENTLY_301";e[e["FOUND_302"]=302]="FOUND_302";e[e["SEE_OTHER_303"]=303]="SEE_OTHER_303";e[e["NOT_MODIFIED_304"]=304]="NOT_MODIFIED_304";e[e["TEMPORARY_REDIRECT_307"]=307]="TEMPORARY_REDIRECT_307";e[e["PERMANENT_REDIRECT_308"]=308]="PERMANENT_REDIRECT_308";e[e["BAD_REQUEST_400"]=400]="BAD_REQUEST_400";e[e["UNAUTHORIZED_401"]=401]="UNAUTHORIZED_401";e[e["PAYMENT_REQUIRED_402"]=402]="PAYMENT_REQUIRED_402";e[e["FORBIDDEN_403"]=403]="FORBIDDEN_403";e[e["NOT_FOUND_404"]=404]="NOT_FOUND_404";e[e["METHOD_NOT_ALLOWED_405"]=405]="METHOD_NOT_ALLOWED_405";e[e["NOT_ACCEPTABLE_406"]=406]="NOT_ACCEPTABLE_406";e[e["REQUEST_TIMEOUT_408"]=408]="REQUEST_TIMEOUT_408";e[e["CONFLICT_409"]=409]="CONFLICT_409";e[e["GONE_410"]=410]="GONE_410";e[e["LENGTH_REQUIRED_411"]=411]="LENGTH_REQUIRED_411";e[e["PRECONDITION_FAILED_412"]=412]="PRECONDITION_FAILED_412";e[e["PAYLOAD_TOO_LARGE_413"]=413]="PAYLOAD_TOO_LARGE_413";e[e["URI_TOO_LONG_414"]=414]="URI_TOO_LONG_414";e[e["UNSUPPORTED_MEDIA_TYPE_415"]=415]="UNSUPPORTED_MEDIA_TYPE_415";e[e["RANGE_NOT_SATISFIABLE_416"]=416]="RANGE_NOT_SATISFIABLE_416";e[e["EXPECTATION_FAILED_417"]=417]="EXPECTATION_FAILED_417";e[e["I_AM_A_TEAPOT_418"]=418]="I_AM_A_TEAPOT_418";e[e["UNPROCESSABLE_ENTITY_422"]=422]="UNPROCESSABLE_ENTITY_422";e[e["LOCKED_423"]=423]="LOCKED_423";e[e["TOO_MANY_REQUESTS_429"]=429]="TOO_MANY_REQUESTS_429";e[e["REQUEST_HEADER_FIELDS_TOO_LARGE_431"]=431]="REQUEST_HEADER_FIELDS_TOO_LARGE_431";e[e["UNAVAILABLE_FOR_LEGAL_REASONS_451"]=451]="UNAVAILABLE_FOR_LEGAL_REASONS_451";e[e["INTERNAL_SERVER_ERROR_500"]=500]="INTERNAL_SERVER_ERROR_500";e[e["NOT_IMPLEMENTED_501"]=501]="NOT_IMPLEMENTED_501";e[e["BAD_GATEWAY_502"]=502]="BAD_GATEWAY_502";e[e["SERVICE_UNAVAILABLE_503"]=503]="SERVICE_UNAVAILABLE_503";e[e["GATEWAY_TIMEOUT_504"]=504]="GATEWAY_TIMEOUT_504";e[e["HTTP_VERSION_NOT_SUPPORTED_505"]=505]="HTTP_VERSION_NOT_SUPPORTED_505";e[e["INSUFFICIENT_STORAGE_507"]=507]="INSUFFICIENT_STORAGE_507"})(j||(j={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A=function(e,t){A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return A(e,t)};function M(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");A(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var L=function(){L=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))t[s]=r[s]}return t};return L.apply(this,arguments)};function R(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r}function N(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)if(a=e[o])s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s}function D(r,n){return function(e,t){n(e,t,r)}}function B(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function F(e,a,r,o){function l(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(t,r){function n(e){try{s(o.next(e))}catch(e){r(e)}}function i(e){try{s(o["throw"](e))}catch(e){r(e)}}function s(e){e.done?t(e.value):l(e.value).then(n,i)}s((o=o.apply(e,a||[])).next())})}function H(e,r){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,t;return t={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function o(t){return function(e){return l([t,e])}}function l(t){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,s&&(a=t[0]&2?s["return"]:t[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;if(s=0,a)t=[t[0]&2,a.value];switch(t[0]){case 0:case 1:a=t;break;case 4:n.label++;return{value:t[1],done:false};case 5:n.label++;s=t[1];t=[0];continue;case 7:t=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=a.length>0&&a[a.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!a||t[1]>a[0]&&t[1]<a[3])){n.label=t[1];break}if(t[0]===6&&n.label<a[1]){n.label=a[1];a=t;break}if(a&&n.label<a[2]){n.label=a[2];n.ops.push(t);break}if(a[2])n.ops.pop();n.trys.pop();continue}t=r.call(e,n)}catch(e){t=[6,e];s=0}finally{i=a=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}}var U=Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};function V(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))U(t,e,r)}function z(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return s}function W(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(K(arguments[t]));return e}function Y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function q(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}function G(e){return this instanceof G?(this.v=e,this):new G(e)}function $(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,a=[];return s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s;function n(n){if(i[n])s[n]=function(r){return new Promise(function(e,t){a.push([n,r,e,t])>1||o(n,r)})}}function o(e,t){try{l(i[e](t))}catch(e){h(a[0][3],e)}}function l(e){e.value instanceof G?Promise.resolve(e.value.v).then(u,c):h(a[0][2],e)}function u(e){o("next",e)}function c(e){o("throw",e)}function h(e,t){if(e(t),a.shift(),a.length)o(a[0][0],a[0][1])}}function X(n){var e,i;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,r){e[t]=n[t]?function(e){return(i=!i)?{value:G(n[t](e)),done:t==="return"}:r?r(e):e}:r}}function Q(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof z==="function"?z(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=i[n]&&function(r){return new Promise(function(e,t){r=i[n](r),s(e,t,r.done,r.value)})}}function s(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)}}function J(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e}var Z=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};function ee(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))U(t,e,r);Z(t,e);return t}function te(e){return e&&e.__esModule?e:{default:e}}function re(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function ne(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function ie(e,t){return Math.floor(Math.random()*(t-e)+e)}function se(e,t){const r=/(\.0+)+$/;const n=e.replace(r,"").split(".");const i=t.replace(r,"").split(".");const s=Math.min(n.length,i.length);for(let e=0;e<s;e++){const a=parseInt(n[e],10)-parseInt(i[e],10);if(a)return a}return n.length-i.length}function ae(e){return e&&typeof e.then==="function"}function oe(e){return e&&typeof e.catch==="function"}function le(e){if(e.startsWith("filter:"))return 3;if(e.startsWith("action:"))return 2;return 1}function ue(t,r,n,i,s){return F(this,void 0,void 0,function*(){try{if(r===3){const e=t(n,i);if(ae(e))n=yield e;else n=e;return n}const e=t(i);if(r===1){if(ae(e))yield e;return undefined}if(r===2){if(oe(e))e.catch(e=>s(e));return undefined}}catch(e){s(e)}return n})}var ce=l(11);function he(r,n,i,s){return Object(u["a"])(this,void 0,void 0,function*(){if(!r[n])return i;const e=le(n);for(const t of r[n]){console.log("Running hook %s of plugin %s.",n,t.plugin.name);i=yield ue(t.handler,e,i,s,e=>{console.error("Cannot run hook %s of script %s of plugin %s.",n,t.clientScript.script,t.plugin.name,e)})}return i})}function fe(e){const{hooks:t,pluginInfo:r,peertubeHelpersFactory:n,formFields:i,onSettingsScripts:s}=e;const{plugin:a,clientScript:o}=r;const l=e=>{if(S[e.target]!==true){console.error("Unknown hook %s of plugin %s. Skipping.",e.target,a.name);return}if(!t[e.target])t[e.target]=[];t[e.target].push({plugin:a,clientScript:o,target:e.target,handler:e.handler,priority:e.priority||0})};const u=(e,t)=>{if(!i){throw new Error("Video field registration is not supported")}i.video.push({commonOptions:e,videoFormOptions:t})};const c=e=>{if(!s){throw new Error("Registering settings script is not supported")}return s(e)};const h=n(r);console.log("Loading script %s of plugin %s.",o.script,a.name);return Object(ce["b"])(o.script).then(e=>e.register({registerHook:l,registerVideoField:u,registerSettingsScript:c,peertubeHelpers:h})).then(()=>de(t)).catch(e=>console.error("Cannot import or register plugin %s.",r.plugin.name,e))}function de(e){for(const t of Object.keys(e)){e[t].sort((e,t)=>{return t.priority-e.priority})}}const pe={ID:"id",ROLE:"role",EMAIL:"email",VIDEOS_HISTORY_ENABLED:"videos-history-enabled",USERNAME:"username",NSFW_POLICY:"nsfw_policy",WEBTORRENT_ENABLED:"peertube-videojs-"+"webtorrent_enabled",AUTO_PLAY_VIDEO:"auto_play_video",SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO:"auto_play_next_video",AUTO_PLAY_VIDEO_PLAYLIST:"auto_play_video_playlist",THEME:"theme",LAST_ACTIVE_THEME:"last_active_theme",VIDEO_LANGUAGES:"video_languages"};const ve=new Map;function ge(n){return new Proxy(n,{set:function(e,t,r){if(ye.prototype.hasOwnProperty(t)){n[t]=r}else{n.setItem(t,r)}return true},get:function(e,t){if(ye.prototype.hasOwnProperty(t)){return n[t]}if(ve.has(t)){return n.getItem(t)}}})}class ye{getItem(e){const t=String(e);if(ve.has(e)){return String(ve.get(t))}return null}setItem(e,t){ve.set(String(e),String(t))}removeItem(e){ve.delete(e)}clear(){ve.clear()}key(e){if(arguments.length===0){throw new TypeError('Failed to execute "key" on "Storage": 1 argument required, but only 0 present.')}const t=Array.from(ve.keys());return t[e]}get length(){return ve.size}}let me;let _e;function be(){const e=new ye;const t=new ye;me=ge(e);_e=ge(t)}try{me=localStorage;_e=sessionStorage}catch(e){be()}if(me===null||_e===null){be()}function Te(){const e=me.getItem(pe.USERNAME);if(!e)return undefined;return{id:parseInt(me.getItem(pe.ID),10),username:me.getItem(pe.USERNAME),email:me.getItem(pe.EMAIL),role:parseInt(me.getItem(pe.ROLE),10),nsfwPolicy:me.getItem(pe.NSFW_POLICY),webTorrentEnabled:me.getItem(pe.WEBTORRENT_ENABLED)==="true",autoPlayVideo:me.getItem(pe.AUTO_PLAY_VIDEO)==="true",videosHistoryEnabled:me.getItem(pe.VIDEOS_HISTORY_ENABLED)==="true"}}function Ee(){me.removeItem(pe.ID);me.removeItem(pe.USERNAME);me.removeItem(pe.EMAIL);me.removeItem(pe.ROLE);me.removeItem(pe.NSFW_POLICY);me.removeItem(pe.WEBTORRENT_ENABLED);me.removeItem(pe.AUTO_PLAY_VIDEO);me.removeItem(pe.VIDEOS_HISTORY_ENABLED)}function we(e){me.setItem(pe.ID,e.id.toString());me.setItem(pe.USERNAME,e.username);me.setItem(pe.EMAIL,e.email);me.setItem(pe.ROLE,e.role.toString());me.setItem(pe.NSFW_POLICY,e.nsfwPolicy.toString());me.setItem(pe.WEBTORRENT_ENABLED,JSON.stringify(e.webTorrentEnabled));me.setItem(pe.AUTO_PLAY_VIDEO,JSON.stringify(e.autoPlayVideo))}class Ce{constructor(e){if(e){this.accessToken=e.accessToken;this.refreshToken=e.refreshToken;if(e.tokenType==="bearer"){this.tokenType="Bearer"}else{this.tokenType=e.tokenType}}}static load(){const e=me.getItem(this.KEYS.ACCESS_TOKEN);const t=me.getItem(this.KEYS.REFRESH_TOKEN);const r=me.getItem(this.KEYS.TOKEN_TYPE);if(e&&t&&r){return new Ce({accessToken:e,refreshToken:t,tokenType:r})}return null}static flush(){me.removeItem(this.KEYS.ACCESS_TOKEN);me.removeItem(this.KEYS.REFRESH_TOKEN);me.removeItem(this.KEYS.TOKEN_TYPE)}save(){me.setItem(Ce.KEYS.ACCESS_TOKEN,this.accessToken);me.setItem(Ce.KEYS.REFRESH_TOKEN,this.refreshToken);me.setItem(Ce.KEYS.TOKEN_TYPE,this.tokenType)}}Ce.KEYS={ACCESS_TOKEN:"access_token",REFRESH_TOKEN:"refresh_token",TOKEN_TYPE:"token_type"};class ke{constructor(e,t){this.embed=e;this.clbk=t;this.resolutions=[];this.ignoreChange=false}initialize(){this.setupStateTracking();this.answer({method:"ready",params:"ready"})}get muted(){return this.embed.player.muted()}set muted(e){if(e){this.mute()}else{this.unmute()}}get playing(){return this.state=="playing"}get element(){return this.embed.playerElement}destroy(){this.embed.destroy();this.clear();return true}clear(){if(this.updateinterval){clearInterval(this.updateinterval);this.updateinterval=null}}play(){return this.embed.player.play()}pause(){return this.embed.player.pause()}stop(){return this.embed.player.pause()}seek(e){return this.embed.player.currentTime(e)}setVolume(e){if(this.getVolume()!=e){this.ignoreChange=true}if(e){this.embed.player.muted(false);return this.embed.player.volume(e)}else{this.embed.player.muted(true);return 0}}getVolume(){return this.embed.player.muted()?0:this.embed.player.volume()}mute(){this.savedVolume=this.getVolume();this.setVolume(0)}unmute(){this.setVolume(this.savedVolume||1)}getResolutions(){return this.resolutions}getState(){return this.state}setPlaybackRate(e){return this.embed.player.playbackRate(e)}getPlaybackRates(){return this.embed.player.options_.playbackRates}getCurrentPosition(){return this.embed.getCurrentPosition}setResolution(e){if(this.isWebtorrent()){if(e===-1&&this.embed.player.webtorrent().isAutoResolutionPossible()===false)return;if(e===-1){this.embed.player.webtorrent().enableAutoResolution();return}this.embed.player.webtorrent().disableAutoResolution();this.embed.player.webtorrent().updateResolution(e);return}this.embed.player.p2pMediaLoader().getHLSJS().nextLevel=e}getCaptions(){return this.embed.player.textTracks().tracks_.map(e=>{return{id:e.id,src:e.src,label:e.label,mode:e.mode}})}setCaption(e){const t=this.embed.player.textTracks().tracks_;for(const r of t){if(r.id===e)r.mode="showing";else r.mode="disabled"}}answer(e){if(this.clbk[e.method])this.clbk[e.method](e.params)}setupStateTracking(){let r;this.updateinterval=setInterval(()=>{if(!this.element)return;const e=this.element.currentTime;const t=this.element.volume;this.state=r;this.answer({method:"playbackStatusUpdate",params:{position:e,volume:t,duration:this.embed.player.duration(),playbackState:r}})},500);this.element.addEventListener("play",e=>{r="playing";this.answer({method:"playbackStatusChange",params:"playing"})});this.element.addEventListener("pause",e=>{r="paused";this.answer({method:"playbackStatusChange",params:"paused"})});this.element.addEventListener("ended",e=>{r="ended";this.answer({method:"playbackStatusChange",params:"ended"})});if(this.embed.contributor=="peertube"){if(this.isWebtorrent()){try{this.embed.player.webtorrent().on("autoResolutionUpdate",()=>this.loadWebTorrentResolutions());this.embed.player.webtorrent().on("videoFileUpdate",()=>this.loadWebTorrentResolutions())}catch(e){}}else{this.embed.player.p2pMediaLoader().on("resolutionChange",()=>this.loadP2PMediaLoaderResolutions())}}this.embed.player.on("volumechange",()=>{if(this.ignoreChange){this.ignoreChange=false;return}this.answer({method:"volumeChange",params:this.getVolume()})})}loadWebTorrentResolutions(){this.resolutions=[];const t=this.embed.player.webtorrent().getCurrentResolutionId();for(const r of this.embed.player.webtorrent().videoFiles){let e=r.resolution.label;if(r.fps&&r.fps>=50){e+=r.fps}this.resolutions.push({id:r.resolution.id,label:e,src:r.magnetUri,active:r.resolution.id===t,height:r.resolution.id})}this.answer({method:"resolutionUpdate",params:this.resolutions})}loadP2PMediaLoaderResolutions(){this.resolutions=[];const t=this.embed.player.qualityLevels();const r=this.embed.player.qualityLevels().selectedIndex;for(let e=0;e<t.length;e++){const n=t[e];this.resolutions.push({id:n.id,label:n.height+"p",active:n.id===r,width:n.width,height:n.height})}this.answer({method:"resolutionUpdate",params:this.resolutions})}isWebtorrent(){return this.embed.player.webtorrent}}var Se=l(152);var xe=l(9);var Pe=l.n(xe);
/*! @name videojs-dock @version 2.1.4 @license Apache-2.0 */function Oe(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var Ie=1;var je=function e(){return Ie++};var Ae="2.1.4";var Me=c.a.dom||c.a;var Le=c.a.registerPlugin||c.a.plugin;var Re=c.a.getComponent("Component");var Ne=function(i){Oe(e,i);function e(e,t){var r;r=i.call(this,e,t)||this;var n=e.$(".vjs-tech");n.setAttribute("aria-labelledby",r.title.id);n.setAttribute("aria-describedby",r.description.id);return r}var t=e.prototype;t.createEl=function e(){var t=Me.createEl("div",{className:"vjs-dock-title",title:this.options_.title,innerHTML:this.options_.title},{id:"vjs-dock-title-"+je()});var r=Me.createEl("div",{className:"vjs-dock-description",title:this.options_.description,innerHTML:this.options_.description},{id:"vjs-dock-description-"+je()});var n=i.prototype.createEl.call(this,"div",{className:"vjs-dock-text"});this.title=t;this.description=r;n.appendChild(t);n.appendChild(r);return n};t.update=function e(t,r){this.title.innerHTML="";this.description.innerHTML="";this.title.appendChild(Pe.a.createTextNode(t));this.description.appendChild(Pe.a.createTextNode(r))};return e}(Re);var De=function(t){Oe(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;r.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-dock-shelf"})};return e}(Re);c.a.registerComponent("Title",Ne);c.a.registerComponent("Shelf",De);var Be=function e(t){var r=t||{};var n={title:{title:r.title||"",description:r.description||""}};var i=this.title;var s=this.shelf;this.addClass("vjs-dock");var a=this.children().indexOf(this.getChild("bigPlayButton"));var o=a>0?a-1:null;if(!s){s=this.shelf=this.addChild("shelf",n,o)}if(!i){i=this.title=this.addChild("title",n.title,o)}else{i.update(n.title.title,n.title.description)}this.one(i,"dispose",function(){this.title=null});this.one(s,"dispose",function(){this.shelf=null})};Be.VERSION=Ae;Le("dock",Be);var Fe=Be;var He=l(16);var Ue=l.n(He);
/*! @name videojs-contextmenu-pt @version 5.4.1 @license Apache-2.0 */function Ve(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function ze(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Ke=c.a.getComponent("MenuItem");var We=function(n){Ve(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;t.handleClick=function e(t){var r=this;n.prototype.handleClick.call(this);this.options_.listener();Ue.a.setTimeout(function(){r.player().contextmenuUI.menu.dispose()},1)};return e}(Ke);var Ye=c.a.getComponent("Menu");var qe=c.a.dom||c.a;var Ge=function(i){Ve(e,i);function e(r,e){var n;n=i.call(this,r,e)||this;n.dispose=c.a.bind(ze(n),n.dispose);e.content.forEach(function(t){var e=function e(){};if(typeof t.listener==="function"){e=t.listener}else if(typeof t.href==="string"){e=function e(){return Ue.a.open(t.href)}}n.addItem(new We(r,{label:t.label,listener:c.a.bind(r,e)}))});return n}var t=e.prototype;t.createEl=function e(){var t=i.prototype.createEl.call(this);qe.addClass(t,"vjs-contextmenu-ui-menu");t.style.left=this.options_.position.left+"px";t.style.top=this.options_.position.top+"px";return t};return e}(Ye);function $e(e){var t;if(e.getBoundingClientRect&&e.parentNode){t=e.getBoundingClientRect()}if(!t){return{left:0,top:0}}var r=Pe.a.documentElement;var n=Pe.a.body;var i=r.clientLeft||n.clientLeft||0;var s=Ue.a.pageXOffset||n.scrollLeft;var a=t.left+s-i;var o=r.clientTop||n.clientTop||0;var l=Ue.a.pageYOffset||n.scrollTop;var u=t.top+l-o;return{left:Math.round(a),top:Math.round(u)}}function Xe(e,t){var r={};var n=$e(e);var i=e.offsetWidth;var s=e.offsetHeight;var a=n.top;var o=n.left;var l=t.pageY;var u=t.pageX;if(t.changedTouches){u=t.changedTouches[0].pageX;l=t.changedTouches[0].pageY}r.y=Math.max(0,Math.min(1,(a-l+s)/s));r.x=Math.max(0,Math.min(1,(u-o)/i));return r}function Qe(e){return e&&{}.toString.call(e)==="[object Function]"}var Je="5.4.1";function Ze(e){return e.hasOwnProperty("contextmenuUI")&&e.contextmenuUI.hasOwnProperty("menu")&&e.contextmenuUI.menu.el()}function et(e){var t=e.tagName.toLowerCase();return t==="input"||t==="textarea"}function tt(e,t){return{left:Math.round(t.width*e.x),top:Math.round(t.height-t.height*e.y)}}function rt(e){var t=this;if(Ze(this)){this.contextmenuUI.menu.dispose();return}if(this.contextmenuUI.options_.excludeElements(e.target)){return}var r=Xe(this.el(),e);var n=this.el().getBoundingClientRect();var i=tt(r,n);var s=c.a.browser.IS_FIREFOX?Pe.a.documentElement:Pe.a;e.preventDefault();var a=this.contextmenuUI.menu=new Ge(this,{content:Qe(this.contextmenuUI.content)&&this.contextmenuUI.content()||this.contextmenuUI.content,position:i});this.contextmenuUI.closeMenu=function(){c.a.log.warn("player.contextmenuUI.closeMenu() is deprecated, please use player.contextmenuUI.menu.dispose() instead!");a.dispose()};a.on("dispose",function(){c.a.off(s,["click","tap"],a.dispose);t.removeChild(a);delete t.contextmenuUI.menu});this.addChild(a);var o=a.el_.getBoundingClientRect();var l=Pe.a.body.getBoundingClientRect();if(this.contextmenuUI.keepInside||o.right>l.width||o.bottom>l.height){a.el_.style.left=Math.floor(Math.min(i.left,this.player_.currentWidth()-a.currentWidth()))+"px";a.el_.style.top=Math.floor(Math.min(i.top,this.player_.currentHeight()-a.currentHeight()))+"px"}c.a.on(s,["click","tap"],a.dispose)}function nt(e){var t=this;var r={keepInside:true,excludeElements:et};e=c.a.mergeOptions(r,e);if(!Array.isArray(e.content)&&!Array.isArray(e.content())){throw new Error('"content" required')}if(Ze(this)){this.contextmenuUI.menu.dispose();this.off("contextmenu",this.contextmenuUI.onContextMenu);delete this.contextmenuUI}var n=this.contextmenuUI=function(){nt.apply(this,arguments)};n.onContextMenu=c.a.bind(this,rt);n.content=e.content;n.keepInside=e.keepInside;n.options_=e;n.VERSION=Je;this.on("contextmenu",n.onContextMenu);this.ready(function(){return t.addClass("vjs-contextmenu-ui")})}c.a.registerPlugin("contextmenuUI",nt);nt.VERSION=Je;var it=nt;
/*! @name videojs-contrib-quality-levels @version 2.1.0 @license Apache-2.0 */function st(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function at(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var ot=function e(t){var r=this;if(c.a.browser.IS_IE8){r=Pe.a.createElement("custom");for(var n in e.prototype){if(n!=="constructor"){r[n]=e.prototype[n]}}}r.id=t.id;r.label=r.id;r.width=t.width;r.height=t.height;r.bitrate=t.bandwidth;r.enabled_=t.enabled;Object.defineProperty(r,"enabled",{get:function e(){return r.enabled_()},set:function e(t){r.enabled_(t)}});return r};var lt=function(n){st(i,n);function i(){var e;e=n.call(this)||this;var t=at(at(e));if(c.a.browser.IS_IE8){t=Pe.a.createElement("custom");for(var r in i.prototype){if(r!=="constructor"){t[r]=i.prototype[r]}}}t.levels_=[];t.selectedIndex_=-1;Object.defineProperty(t,"selectedIndex",{get:function e(){return t.selectedIndex_}});Object.defineProperty(t,"length",{get:function e(){return t.levels_.length}});return t||at(e)}var e=i.prototype;e.addQualityLevel=function e(t){var r=this.getQualityLevelById(t.id);if(r){return r}var n=this.levels_.length;r=new ot(t);if(!(""+n in this)){Object.defineProperty(this,n,{get:function e(){return this.levels_[n]}})}this.levels_.push(r);this.trigger({qualityLevel:r,type:"addqualitylevel"});return r};e.removeQualityLevel=function e(t){var r=null;for(var n=0,i=this.length;n<i;n++){if(this[n]===t){r=this.levels_.splice(n,1)[0];if(this.selectedIndex_===n){this.selectedIndex_=-1}else if(this.selectedIndex_>n){this.selectedIndex_--}break}}if(r){this.trigger({qualityLevel:t,type:"removequalitylevel"})}return r};e.getQualityLevelById=function e(t){for(var r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){return i}}return null};e.dispose=function e(){this.selectedIndex_=-1;this.levels_.length=0};return i}(c.a.EventTarget);lt.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(var ut in lt.prototype.allowedEvents_){lt.prototype["on"+ut]=null}var ct="2.1.0";var ht=c.a.registerPlugin||c.a.plugin;var ft=function e(t,r){var n=t.qualityLevels;var i=new lt;var s=function e(){i.dispose();t.qualityLevels=n;t.off("dispose",e)};t.on("dispose",s);t.qualityLevels=function(){return i};t.qualityLevels.VERSION=ct;return i};var dt=function e(t){return ft(this,c.a.mergeOptions({},t))};ht("qualityLevels",dt);dt.VERSION=ct;var pt=dt;function vt(e){return`
    <div class="vjs-upnext-top">
      <span class="vjs-upnext-headtext">${e.headText}</span>
      <div class="vjs-upnext-title"></div>
    </div>
    <div class="vjs-upnext-autoplay-icon">
      <svg height="100%" version="1.1" viewbox="0 0 98 98" width="100%">
        <circle class="vjs-upnext-svg-autoplay-circle" cx="49" cy="49" fill="#000" fill-opacity="0.8" r="48"></circle>
        <circle class="vjs-upnext-svg-autoplay-ring" cx="-49" cy="49" fill-opacity="0" r="46.5" stroke="#FFFFFF" stroke-width="4" transform="rotate(-90)"></circle>
        <polygon class="vjs-upnext-svg-autoplay-triangle" fill="#fff" points="32,27 72,49 32,71"></polygon></svg>
    </div>
    <span class="vjs-upnext-bottom">
      <span class="vjs-upnext-cancel">
        <button class="vjs-upnext-cancel-button" tabindex="0" aria-label="Cancel autoplay">${e.cancelText}</button>
      </span>
      <span class="vjs-upnext-suspended">${e.suspendedText}</span>
    </span>
  `}const gt=c.a.getComponent("Component");class yt extends gt{constructor(t,e){super(t,e);this.dashOffsetTotal=586;this.dashOffsetStart=293;this.interval=50;this.upNextEvents=new c.a.EventTarget;this.ticks=0;this.totalTicks=this.options_.timeout/this.interval;t.on("ended",e=>{if(!this.options_.condition())return;t.addClass("vjs-upnext--showing");this.showCard(e=>{t.removeClass("vjs-upnext--showing");this.container.style.display="none";if(!e){this.options_.next()}})});t.on("playing",()=>{this.upNextEvents.trigger("playing")})}createEl(){const e=super.createEl("div",{className:"vjs-upnext-content",innerHTML:vt(this.options_)});this.container=e;e.style.display="none";this.autoplayRing=e.getElementsByClassName("vjs-upnext-svg-autoplay-ring")[0];this.title=e.getElementsByClassName("vjs-upnext-title")[0];this.cancelButton=e.getElementsByClassName("vjs-upnext-cancel-button")[0];this.suspendedMessage=e.getElementsByClassName("vjs-upnext-suspended")[0];this.nextButton=e.getElementsByClassName("vjs-upnext-autoplay-icon")[0];this.cancelButton.onclick=()=>{this.upNextEvents.trigger("cancel")};this.nextButton.onclick=()=>{this.upNextEvents.trigger("next")};return e}showCard(e){let t;this.autoplayRing.setAttribute("stroke-dasharray",""+this.dashOffsetStart);this.autoplayRing.setAttribute("stroke-dashoffset",""+-this.dashOffsetStart);this.title.innerHTML=this.options_.getTitle();this.upNextEvents.one("cancel",()=>{clearTimeout(t);e(true)});this.upNextEvents.one("playing",()=>{clearTimeout(t);e(true)});this.upNextEvents.one("next",()=>{clearTimeout(t);e(false)});const r=e=>{const t=Math.max(-this.dashOffsetTotal,-this.dashOffsetStart-e*this.dashOffsetTotal/2/100);this.autoplayRing.setAttribute("stroke-dashoffset",""+t)};const n=()=>{r(this.ticks++*100/this.totalTicks)};const i=()=>{if(this.options_.suspended()){this.suspendedMessage.innerText=this.options_.suspendedText;r(0);this.ticks=0;t=setTimeout(i.bind(this),300)}else if(this.ticks>=this.totalTicks){clearTimeout(t);e(false)}else{this.suspendedMessage.innerText="";n();t=setTimeout(i.bind(this),this.interval)}};this.container.style.display="block";t=setTimeout(i.bind(this),this.interval)}}c.a.registerComponent("EndCard",yt);const mt=c.a.getPlugin("plugin");class _t extends mt{constructor(e,t={}){const r={next:t.next,getTitle:t.getTitle,timeout:t.timeout||5e3,cancelText:t.cancelText||"Cancel",headText:t.headText||"Up Next",suspendedText:t.suspendedText||"Autoplay is suspended",condition:t.condition,suspended:t.suspended};super(e);this.player.ready(()=>{e.addClass("vjs-upnext")});e.addChild("EndCard",r)}}c.a.registerPlugin("upnext",_t);function bt(){return`
  <div class="vjs-bezels-pause">
    <div class="vjs-bezel" role="status" aria-label="Pause">
      <div class="vjs-bezel-icon">
        <svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%">
          <use class="vjs-svg-shadow" xlink:href="#vjs-id-1"></use>
          <path class="vjs-svg-fill" d="M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z" id="vjs-id-1"></path>
        </svg>
      </div>
    </div>
  </div>
  `}function Tt(){return`
  <div class="vjs-bezels-play">
    <div class="vjs-bezel" role="status" aria-label="Play">
      <div class="vjs-bezel-icon">
        <svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%">
          <use class="vjs-svg-shadow" xlink:href="#vjs-id-2"></use>
          <path class="vjs-svg-fill" d="M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z" id="ytp-id-2"></path>
        </svg>
      </div>
    </div>
  </div>
  `}const Et=c.a.getComponent("Component");class wt extends Et{constructor(t,e){super(t,e);t.on("pause",e=>{if(t.seeking()||t.ended())return;this.container.innerHTML=bt();this.showBezel()});t.on("play",e=>{if(t.seeking())return;this.container.innerHTML=Tt();this.showBezel()})}createEl(){this.container=super.createEl("div",{className:"vjs-bezels-content"});this.container.style.display="none";return this.container}showBezel(){this.container.style.display="inherit";setTimeout(()=>{this.container.style.display="none"},500)}}c.a.registerComponent("PauseBezel",wt);const Ct=c.a.getPlugin("plugin");class kt extends Ct{constructor(e,t){super(e);this.player.ready(()=>{e.addClass("vjs-bezels")});e.addChild("PauseBezel",t)}}c.a.registerPlugin("bezels",kt);var St=l(4);const xt=c.a.getComponent("MenuItem");const Pt=c.a.getComponent("Component");class Ot extends xt{constructor(e,t){super(e,t);this.settingsButton=t.menuButton;this.dialog=this.settingsButton.dialog;this.mainMenu=this.settingsButton.menu;this.panel=this.dialog.getChild("settingsPanel");this.panelChild=this.panel.getChild("settingsPanelChild");this.panelChildEl=this.panelChild.el();this.size=null;this.menuToLoad="mainmenu";const r=Object(St["j"])(t.entry);const n=c.a.getComponent(r);if(!n){throw new Error(`Component ${r} does not exist`)}const i=Object.assign({},t,{entry:t.menuButton,menuButton:this});this.subMenu=new n(this.player(),i);const s=this.subMenu.buildCSSClass().split(" ")[0];this.settingsSubMenuEl_.className+=" "+s;this.eventHandlers();e.ready(()=>{setTimeout(()=>{if(!this.player_)return;this.build();e.on("ratechange",this.submenuClickHandler);if(r==="CaptionsButton"){e.on("captionsChanged",()=>{setTimeout(()=>{this.settingsSubMenuEl_.innerHTML="";this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el());this.update();this.bindClickEvents()},0)})}this.reset()},0)})}eventHandlers(){this.submenuClickHandler=this.onSubmenuClick.bind(this);this.transitionEndHandler=this.onTransitionEnd.bind(this)}onSubmenuClick(e){let t=null;if(e.type==="tap"){t=e.target}else{t=e.currentTarget}if(t&&t.classList.contains("vjs-back-button")){this.loadMainMenu();return}setTimeout(()=>this.update(e),0);this.subMenu.menu.removeClass("vjs-hidden")}createEl(){const e=c.a.dom.createEl("li",{className:"vjs-menu-item"});this.settingsSubMenuTitleEl_=c.a.dom.createEl("div",{className:"vjs-settings-sub-menu-title"});e.appendChild(this.settingsSubMenuTitleEl_);this.settingsSubMenuValueEl_=c.a.dom.createEl("div",{className:"vjs-settings-sub-menu-value"});e.appendChild(this.settingsSubMenuValueEl_);this.settingsSubMenuEl_=c.a.dom.createEl("div",{className:"vjs-settings-sub-menu"});return e}handleClick(e){this.menuToLoad="submenu";c.a.dom.removeClass(this.el(),"open");super.handleClick(e);this.mainMenu.el().style.opacity="0";if(c.a.dom.hasClass(this.settingsSubMenuEl_,"vjs-hidden")){c.a.dom.removeClass(this.settingsSubMenuEl_,"vjs-hidden");setTimeout(()=>{this.settingsSubMenuEl_.style.opacity="1";this.settingsSubMenuEl_.style.marginRight="0px"},0);this.settingsButton.setDialogSize(this.size)}else{c.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden")}}createBackButton(){const e=this.subMenu.menu.addChild("MenuItem",{},0);e.addClass("vjs-back-button");e.el().innerHTML=this.player().localize(this.subMenu.controlText())}PrefixedEvent(t,r,n,i="addEvent"){const s=["webkit","moz","MS","o",""];for(let e=0;e<s.length;e++){if(!s[e]){r=r.toLowerCase()}if(i==="addEvent"){t.addEventListener(s[e]+r,n,false)}else if(i==="removeEvent"){t.removeEventListener(s[e]+r,n,false)}}}onTransitionEnd(e){if(e.propertyName!=="margin-right"){return}if(this.menuToLoad==="mainmenu"){c.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden");this.settingsSubMenuEl_.style.opacity="0"}}reset(){c.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden");this.settingsSubMenuEl_.style.opacity="0";this.setMargin()}loadMainMenu(){const e=this.mainMenu.el();this.menuToLoad="mainmenu";this.mainMenu.show();e.style.opacity="0";const t=this.mainMenu;this.settingsButton.setDialogSize([t.width,t.height]);setTimeout(()=>{this.setMargin();e.style.opacity="1"},0)}build(){this.subMenu.on("updateLabel",()=>{this.update()});this.subMenu.on("menuChanged",()=>{this.bindClickEvents();this.setSize();this.update()});this.settingsSubMenuTitleEl_.innerHTML=this.player().localize(this.subMenu.controlText());this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el());this.panelChildEl.appendChild(this.settingsSubMenuEl_);this.update();this.createBackButton();this.setSize();this.bindClickEvents();this.PrefixedEvent(this.settingsSubMenuEl_,"TransitionEnd",this.transitionEndHandler,"addEvent")}update(e){let t=null;const r=this.subMenu.name();if(e&&e.type==="tap"){t=e.target}else if(e){t=e.currentTarget}if(r==="PlaybackRateMenuButton"){const n=this.subMenu.labelEl_.innerHTML;setTimeout(()=>this.settingsSubMenuValueEl_.innerHTML=n,250)}else{for(const i of this.subMenu.menu.children_){if(!(i instanceof Pt)){continue}if(i.hasClass("vjs-selected")){const s=i;if(typeof s.getLabel==="function"){this.settingsSubMenuValueEl_.innerHTML=s.getLabel();break}this.settingsSubMenuValueEl_.innerHTML=s.options_.label}}}if(t&&!t.classList.contains("vjs-back-button")){this.settingsButton.hideDialog()}}bindClickEvents(){for(const e of this.subMenu.menu.children()){if(!(e instanceof Pt)){continue}e.on(["tap","click"],this.submenuClickHandler)}}setSize(){this.dialog.removeClass("vjs-hidden");c.a.dom.removeClass(this.settingsSubMenuEl_,"vjs-hidden");this.size=this.settingsButton.getComponentSize(this.settingsSubMenuEl_);this.setMargin();this.dialog.addClass("vjs-hidden");c.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden")}setMargin(){if(!this.size)return;const[e]=this.size;this.settingsSubMenuEl_.style.marginRight=`-${e}px`}hideSubMenu(){if(!this.el()){return}if(c.a.dom.hasClass(this.el(),"open")){c.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden");c.a.dom.removeClass(this.el(),"open")}}}Ot.prototype.contentElType="button";c.a.registerComponent("SettingsMenuItem",Ot);const It=c.a.getComponent("Button");const jt=c.a.getComponent("Menu");const At=c.a.getComponent("Component");class Mt extends It{constructor(e,t){super(e,t);this.settingsButtonOptions=t;this.controlText("Settings");this.dialog=this.player().addChild("settingsDialog");this.dialogEl=this.dialog.el();this.menu=null;this.panel=this.dialog.addChild("settingsPanel");this.panelChild=this.panel.addChild("settingsPanelChild");this.addClass("vjs-settings");this.el().setAttribute("aria-label","Settings Button");this.addSettingsItemHandler=this.onAddSettingsItem.bind(this);this.disposeSettingsItemHandler=this.onDisposeSettingsItem.bind(this);this.playerClickHandler=this.onPlayerClick.bind(this);this.userInactiveHandler=this.onUserInactive.bind(this);this.buildMenu();this.bindEvents();this.player().one("play",()=>this.hideDialog())}onPlayerClick(e){const t=e.target;if(t.classList.contains("vjs-settings")||t.parentElement.classList.contains("vjs-settings")){return}if(!this.dialog.hasClass("vjs-hidden")){this.hideDialog()}}onDisposeSettingsItem(e,t){if(t===undefined){const r=this.menu.children();while(r.length>0){r[0].dispose();this.menu.removeChild(r[0])}this.addClass("vjs-hidden")}else{const n=this.menu.getChild(t);if(n){n.dispose();this.menu.removeChild(n)}}this.hideDialog();if(this.settingsButtonOptions.entries.length===0){this.addClass("vjs-hidden")}}onAddSettingsItem(e,t){const[r,n]=t;this.addMenuItem(r,n);this.removeClass("vjs-hidden")}onUserInactive(){if(!this.dialog.hasClass("vjs-hidden")){this.hideDialog()}}bindEvents(){this.player().on("click",this.playerClickHandler);this.player().on("addsettingsitem",this.addSettingsItemHandler);this.player().on("disposesettingsitem",this.disposeSettingsItemHandler);this.player().on("userinactive",this.userInactiveHandler)}buildCSSClass(){return`vjs-icon-settings ${super.buildCSSClass()}`}handleClick(){if(this.dialog.hasClass("vjs-hidden")){this.showDialog()}else{this.hideDialog()}}showDialog(){this.player().peertube().onMenuOpen();this.menu.el().style.opacity="1";this.dialog.show();this.setDialogSize(this.getComponentSize(this.menu))}hideDialog(){this.player_.peertube().onMenuClosed();this.dialog.hide();this.setDialogSize(this.getComponentSize(this.menu));this.menu.el().style.opacity="1";this.resetChildren()}getComponentSize(e){let t=null;let r=null;if(e instanceof At){const n=e.el();t=n.offsetWidth;r=n.offsetHeight;e.width=t;e.height=r}else{t=e.offsetWidth;r=e.offsetHeight}return[t,r]}setDialogSize([e,t]){if(typeof t!=="number"){return}const r=this.settingsButtonOptions.setup.maxHeightOffset;const n=this.player().el().offsetHeight-r;const i=this.panel.el();if(t>n){t=n;e+=17;i.style.maxHeight=`${t}px`}else if(i.style.maxHeight!==""){i.style.maxHeight=""}this.dialogEl.style.width=`${e}px`;this.dialogEl.style.height=`${t}px`}buildMenu(){this.menu=new jt(this.player());this.menu.addClass("vjs-main-menu");const e=this.settingsButtonOptions.entries;if(e.length===0){this.addClass("vjs-hidden");this.panelChild.addChild(this.menu);return}for(const t of e){this.addMenuItem(t,this.settingsButtonOptions)}this.panelChild.addChild(this.menu)}addMenuItem(e,t){const r=function(){if(c.a.dom.hasClass(this.el_,"open")){c.a.dom.removeClass(this.el_,"open")}else{c.a.dom.addClass(this.el_,"open")}};t.name=Object(St["j"])(e);const n=Object.assign({},t,{entry:e,menuButton:this});const i=new Ot(this.player(),n);this.menu.addChild(i);i.on("click",c.a.bind(this,this.hideChildren));i.on("click",r)}resetChildren(){for(const e of this.menu.children()){e.reset()}}hideChildren(){for(const e of this.menu.children()){e.hideSubMenu()}}}At.registerComponent("SettingsButton",Mt);var Lt=l(10);const Rt=c.a.getPlugin("plugin");class Nt extends Rt{constructor(e,i){super(e);this.CONSTANTS={USER_WATCHING_VIDEO_INTERVAL:5e3};this.menuOpened=false;this.mouseInControlBar=false;this.videoViewUrl=i.videoViewUrl;this.videoDuration=i.videoDuration;this.videoCaptions=i.videoCaptions;this.isLive=i.isLive;this.savedInactivityTimeout=e.options_.inactivityTimeout;if(i.autoplay)this.player.addClass("vjs-has-autoplay");this.player.on("autoplay-failure",()=>{this.player.removeClass("vjs-has-autoplay")});this.player.ready(()=>{const e=this.player.options_;if(i.mode==="webtorrent"){this.player.webtorrent().on("resolutionChange",(e,t)=>{return this.handleResolutionChange(t)});this.player.webtorrent().on("autoResolutionChange",(e,t)=>{return this.trigger("autoResolutionChange",t)})}if(i.mode==="p2p-media-loader"){this.player.p2pMediaLoader().on("resolutionChange",(e,t)=>this.handleResolutionChange(t))}this.player.tech(true).on("loadedqualitydata",()=>{setTimeout(()=>{if(this.lastResolutionChange)this.handleResolutionChange(this.lastResolutionChange)},0)});const t=Object(Lt["f"])();if(t!==undefined)this.player.volume(t);this.defaultSubtitle=i.subtitle||Object(Lt["b"])();this.player.on("volumechange",()=>{Object(Lt["l"])(this.player.volume());Object(Lt["i"])(this.player.muted())});if(i.stopTime){const r=Object(St["i"])(i.stopTime);const n=this;this.player.on("timeupdate",function e(){if(n.player.currentTime()>r){console.log("PAUSE");n.player.pause();n.player.trigger("stopped");n.player.off("timeupdate",e)}})}this.player.textTracks().on("change",()=>{const e=this.player.textTracks().tracks_.find(e=>{return e.kind==="captions"&&e.mode==="showing"});if(!e){Object(Lt["h"])("off");return}Object(Lt["h"])(e.language)});this.player.on("sourcechange",()=>this.initCaptions());this.player.duration(i.videoDuration);this.initializePlayer();this.runViewAdd();this.runUserWatchVideo(i.userWatching,i.videoUUID)})}dispose(){if(this.videoViewInterval)clearInterval(this.videoViewInterval);if(this.userWatchingVideoInterval)clearInterval(this.userWatchingVideoInterval)}onMenuOpen(){this.menuOpened=false;this.alterInactivity()}onMenuClosed(){this.menuOpened=true;this.alterInactivity()}initializePlayer(){if(Object(St["f"])())this.player.addClass("vjs-is-mobile");this.initSmoothProgressBar();this.initCaptions();this.listenControlBarMouse()}runViewAdd(){this.clearVideoViewInterval();let e=1;if(!this.isLive&&this.videoDuration<e){e=this.videoDuration*1/4}let t=0;this.videoViewInterval=setInterval(()=>{if(this.player&&!this.player.paused()){t+=1;if(t>e){if(this.isLive){t=0}else{this.clearVideoViewInterval()}this.addViewToVideo().catch(e=>console.error(e))}}},1e3)}runUserWatchVideo(t,r){let n=0;this.userWatchingVideoInterval=setInterval(()=>{const e=Math.floor(this.player.currentTime());if(e-n>=1){n=e;if(t){this.notifyUserIsWatching(e,t.url,t.authorizationHeader).catch(e=>console.error("Cannot notify user is watching.",e))}else{Object(Lt["k"])(r,e)}}},this.CONSTANTS.USER_WATCHING_VIDEO_INTERVAL)}clearVideoViewInterval(){if(this.videoViewInterval!==undefined){clearInterval(this.videoViewInterval);this.videoViewInterval=undefined}}addViewToVideo(){if(!this.videoViewUrl)return Promise.resolve(undefined);return fetch(this.videoViewUrl,{method:"POST"})}notifyUserIsWatching(e,t,r){const n=new URLSearchParams;n.append("currentTime",e.toString());const i=new Headers({Authorization:r});return fetch(t,{method:"PUT",body:n,headers:i})}handleResolutionChange(t){this.lastResolutionChange=t;const r=this.player.qualityLevels();for(let e=0;e<r.length;e++){if(r[e].height===t.resolutionId){t.id=r[e].id;break}}this.trigger("resolutionChange",t)}listenControlBarMouse(){this.player.controlBar.on("mouseenter",()=>{this.mouseInControlBar=true;this.alterInactivity()});this.player.controlBar.on("mouseleave",()=>{this.mouseInControlBar=false;this.alterInactivity()})}alterInactivity(){if(this.menuOpened){this.player.options_.inactivityTimeout=this.savedInactivityTimeout;return}if(!this.mouseInControlBar&&!this.isTouchEnabled()){this.player.options_.inactivityTimeout=1}}isTouchEnabled(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}initCaptions(){for(const e of this.videoCaptions){this.player.addRemoteTextTrack({kind:"captions",label:e.label,language:e.language,id:e.language,src:e.src,default:this.defaultSubtitle===e.language},false)}this.player.trigger("captionsChanged")}initSmoothProgressBar(){const e=c.a.getComponent("SeekBar");e.prototype.getPercent=function e(){const t=this.player_.currentTime();const r=t/this.player_.duration();return r>=1?1:r};e.prototype.handleMouseMove=function e(t){let r=this.calculateDistance(t)*this.player_.duration();if(r===this.player_.duration()){r=r-.1}this.player_.currentTime(r);this.update()}}}c.a.registerPlugin("peertube",Nt);const Dt=c.a.getComponent("Button");class Bt extends Dt{constructor(e,t){super(e,t);this.nextPreviousVideoButtonOptions=t;this.update()}createEl(){const e=this.options_.type;const t=c.a.dom.createEl("button",{className:"vjs-"+e+"-video"});const r=c.a.dom.createEl("span",{className:"icon icon-"+e});t.appendChild(r);if(e==="next"){t.title=this.player_.localize("Next video")}else{t.title=this.player_.localize("Previous video")}return t}handleClick(){this.nextPreviousVideoButtonOptions.handler()}update(){const e=this.nextPreviousVideoButtonOptions.isDisabled();if(e)this.addClass("vjs-disabled");else this.removeClass("vjs-disabled")}}c.a.registerComponent("NextVideoButton",Bt);c.a.registerComponent("PreviousVideoButton",Bt);const Ft=c.a.getComponent("Button");class Ht extends Ft{createEl(){const e=c.a.dom.createEl("div",{className:"vjs-peertube"});const h=c.a.dom.createEl("div",{className:"vjs-peertube-hidden"});e.appendChild(h);const t=c.a.dom.createEl("span",{className:"icon icon-download"});h.appendChild(t);const r=c.a.dom.createEl("span",{className:"download-speed-text"});const f=c.a.dom.createEl("span",{className:"download-speed-number"});const d=c.a.dom.createEl("span");r.appendChild(f);r.appendChild(d);h.appendChild(r);const n=c.a.dom.createEl("span",{className:"icon icon-upload"});h.appendChild(n);const i=c.a.dom.createEl("span",{className:"upload-speed-text"});const p=c.a.dom.createEl("span",{className:"upload-speed-number"});const v=c.a.dom.createEl("span");i.appendChild(p);i.appendChild(v);h.appendChild(i);const g=c.a.dom.createEl("span",{className:"peers-text"});const y=c.a.dom.createEl("span",{className:"peers-number"});h.appendChild(y);h.appendChild(g);const m=c.a.dom.createEl("div",{className:"vjs-peertube-hidden"});const s=c.a.dom.createEl("span",{className:"http-fallback",textContent:"HTTP"});m.appendChild(s);e.appendChild(m);this.player_.on("p2pInfo",(e,t)=>{if(!t){m.className="vjs-peertube-displayed";h.className="vjs-peertube-hidden";return}const r=t.p2p;const n=t.http;const i=Object(St["c"])(r.downloadSpeed+n.downloadSpeed);const s=Object(St["c"])(r.uploadSpeed+n.uploadSpeed);const a=Object(St["c"])(r.downloaded+n.downloaded);const o=Object(St["c"])(r.uploaded+n.uploaded);const l=r.numPeers;h.title=this.player().localize("Total downloaded: ")+a.join(" ")+"\n";if(t.source==="p2p-media-loader"){const u=Object(St["c"])(n.downloaded).join(" ");const c=Object(St["c"])(r.downloaded).join(" ");h.title+=" * "+this.player().localize("From servers: ")+u+"\n"+" * "+this.player().localize("From peers: ")+c+"\n"}h.title+=this.player().localize("Total uploaded: ")+o.join(" ");f.textContent=i[0];d.textContent=" "+i[1];p.textContent=s[0];v.textContent=" "+s[1];y.textContent=l.toString();g.textContent=" "+(l>1?this.player().localize("peers"):this.player_.localize("peer"));m.className="vjs-peertube-hidden";h.className="vjs-peertube-displayed"});return e}}c.a.registerComponent("P2PInfoButton",Ht);const Ut=c.a.getComponent("Button");const Vt=c.a.getComponent("MenuButton");class zt extends Vt{constructor(e,t){console.log("options2",t);super(e,t);console.log(this);this.voptions=t||{};this.updateHref()}createEl(){return this.buildElement()}updateHref(){this.link.setAttribute("href",this.buildVideoLink())}handleClick(){this.player().pause()}buildVideoLink(){return this.voptions.href||"https://pocketnet.app"}buildElement(){const e=super.createEl();e.classList.add("pocketnet-link-button");this.link=c.a.dom.createEl("a",{href:"",innerHTML:"Watch On Pocketnet",title:this.player().localize("Video page (new window)"),className:"vjs-pocketnet-link",target:"_blank"});e.appendChild(this.link);return e}}c.a.registerComponent("pocketnetLinkButton",zt);const Kt=c.a.getComponent("Component");class Wt extends Kt{constructor(e,t){super(e,t);this.on(e,"progress",this.update)}createEl(){return super.createEl("div",{className:"vjs-load-progress",innerHTML:`<span class="vjs-control-text"><span>${this.localize("Loaded")}</span>: 0%</span>`})}dispose(){super.dispose()}update(){const e=this.player().webtorrent().getTorrent();if(!e)return;this.el().style.width=e.progress*100+"%"}}Kt.registerComponent("PeerTubeLoadProgressBar",Wt);const Yt=c.a.getComponent("MenuItem");class qt extends Yt{constructor(e,t){t.selectable=true;super(e,t);this.autoResolutionPossible=true;this.currentResolutionLabel="";this.resolutionId=t.id;this.label=t.label;this.labels=t.labels;this.callback=t.callback;e.peertube().on("resolutionChange",(e,t)=>this.updateSelection(t));if(this.resolutionId===-1){e.peertube().on("autoResolutionChange",(e,t)=>this.updateAutoResolution(t))}}handleClick(e){if(this.autoResolutionPossible===false&&this.resolutionId===-1)return;super.handleClick(e);this.callback(this.resolutionId,"video")}updateSelection(e){if(this.resolutionId===-1){this.currentResolutionLabel=this.labels[e.id]}if(e.auto===true){this.selected(this.resolutionId===-1);return}this.selected(this.resolutionId===e.id)}updateAutoResolution(e){if(e.possible===false){this.addClass("disabled")}else{this.removeClass("disabled")}this.autoResolutionPossible=e.possible}getLabel(){if(this.resolutionId===-1){return this.label+" <small>"+this.currentResolutionLabel+"</small>"}return this.label}}c.a.registerComponent("ResolutionMenuItem",qt);const Gt=c.a.getComponent("Menu");const $t=c.a.getComponent("MenuButton");class Xt extends $t{constructor(e,t){super(e,t);this.controlText("Quality");e.tech(true).on("loadedqualitydata",(e,t)=>this.buildQualities(t));e.peertube().on("resolutionChange",()=>setTimeout(()=>this.trigger("updateLabel"),0))}createEl(){const e=super.createEl();this.labelEl_=c.a.dom.createEl("div",{className:"vjs-resolution-value"});e.appendChild(this.labelEl_);return e}updateARIAAttributes(){this.el().setAttribute("aria-label","Quality")}createMenu(){return new Gt(this.player_)}buildCSSClass(){return super.buildCSSClass()+" vjs-resolution-button"}buildWrapperCSSClass(){return"vjs-resolution-control "+super.buildWrapperCSSClass()}addClickListener(r){r.on("click",()=>{const e=this.menu.children();for(const t of e){if(r!==t){t.selected(false)}}})}buildQualities(e){const t={};e.qualityData.video.sort((e,t)=>{if(e.id>t.id)return-1;if(e.id===t.id)return 0;return 1});for(const r of e.qualityData.video){if(r.id===-1)continue;const n=r.label==="0p"?this.player().localize("Audio-only"):r.label;this.menu.addChild(new qt(this.player_,{id:r.id,label:n,selected:r.selected,callback:e.qualitySwitchCallback}));t[r.id]=r.label}this.menu.addChild(new qt(this.player_,{id:-1,label:this.player_.localize("Auto"),labels:t,callback:e.qualitySwitchCallback,selected:true}));for(const i of this.menu.children()){this.addClickListener(i)}this.trigger("menuChanged")}}c.a.registerComponent("ResolutionMenuButton",Xt);const Qt=c.a.getComponent("Component");class Jt extends Qt{constructor(e){super(e);this.hide()}createEl(){const e=this.id();const t="TTsettingsDialogLabel-"+e;const r="TTsettingsDialogDescription-"+e;return super.createEl("div",{className:"vjs-settings-dialog vjs-modal-overlay",innerHTML:"",tabIndex:-1},{role:"dialog","aria-labelledby":t,"aria-describedby":r})}}Qt.registerComponent("SettingsDialog",Jt);const Zt=c.a.getComponent("Component");class er extends Zt{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"vjs-settings-panel",innerHTML:"",tabIndex:-1})}}Zt.registerComponent("SettingsPanel",er);const tr=c.a.getComponent("Component");class rr extends tr{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"vjs-settings-panel-child",innerHTML:"",tabIndex:-1})}}tr.registerComponent("SettingsPanelChild",rr);const nr=c.a.getComponent("Button");class ir extends nr{constructor(e,t){super(e,t);const r=Object(Lt["e"])();if(r===true){this.player().addClass(ir.THEATER_MODE_CLASS);this.handleTheaterChange()}this.controlText("Theater mode");this.player().theaterEnabled=r}buildCSSClass(){return`vjs-theater-control ${super.buildCSSClass()}`}handleTheaterChange(){const e=this.isTheaterEnabled();if(e){this.controlText("Normal mode")}else{this.controlText("Theater mode")}Object(Lt["j"])(e);this.player_.trigger("theaterChange",e)}handleClick(){this.player_.toggleClass(ir.THEATER_MODE_CLASS);this.handleTheaterChange()}isTheaterEnabled(){return this.player_.hasClass(ir.THEATER_MODE_CLASS)}}ir.THEATER_MODE_CLASS="vjs-theater-enabled";c.a.registerComponent("TheaterButton",ir);const sr=c.a.getComponent("ClickableComponent");class ar extends sr{constructor(e,t){super(e,t)}createEl(){this.wrapper=super.createEl("div",{className:"vjs-playlist-button",innerHTML:"",tabIndex:-1});const e=super.createEl("div",{className:"vjs-playlist-icon",innerHTML:"",tabIndex:-1});this.playlistInfoElement=super.createEl("div",{className:"vjs-playlist-info",innerHTML:"",tabIndex:-1});this.wrapper.appendChild(e);this.wrapper.appendChild(this.playlistInfoElement);this.update();return this.wrapper}update(){const e=this.options_;this.playlistInfoElement.innerHTML=e.getCurrentPosition()+"/"+e.playlist.videosLength;this.wrapper.title=this.player().localize("Playlist: {1}",[e.playlist.displayName])}handleClick(){const e=this.getPlaylistMenu();e.open()}getPlaylistMenu(){return this.options_.playlistMenu}}c.a.registerComponent("PlaylistButton",ar);const or=c.a.getComponent("Component");class lr extends or{constructor(e,t){super(e,t);this.emitTapEvents();this.element=t.element;this.on(["click","tap"],()=>this.switchPlaylistItem());this.on("keydown",e=>this.handleKeyDown(e))}createEl(){const e=this.options_;const t=super.createEl("li",{className:"vjs-playlist-menu-item",innerHTML:""});if(!e.element.video){t.classList.add("vjs-disabled")}const r=super.createEl("div",{className:"item-position-block"});const n=super.createEl("div",{className:"item-position",innerHTML:e.element.position});r.appendChild(n);t.appendChild(r);if(e.element.video){this.buildAvailableVideo(t,r,e)}else{this.buildUnavailableVideo(t)}return t}setSelected(e){if(e)this.addClass("vjs-selected");else this.removeClass("vjs-selected")}getElement(){return this.element}buildAvailableVideo(e,t,r){const n=r.element;const i=super.createEl("div",{className:"item-player"});t.appendChild(i);const s=super.createEl("img",{src:window.location.origin+n.video.thumbnailPath});const a=super.createEl("div",{className:"info-block"});const o=super.createEl("div",{innerHTML:n.video.name,className:"title"});const l=super.createEl("div",{innerHTML:n.video.channel.displayName,className:"channel"});a.appendChild(o);a.appendChild(l);if(n.startTimestamp||n.stopTimestamp){let e="";if(n.startTimestamp)e+=Object(St["h"])(n.startTimestamp);if(n.stopTimestamp)e+=" - "+Object(St["h"])(n.stopTimestamp);const u=super.createEl("div",{innerHTML:e,className:"timestamps"});a.append(u)}e.append(s);e.append(a)}buildUnavailableVideo(e){const t=super.createEl("div",{className:"item-unavailable",innerHTML:this.player().localize("Unavailable video")});e.appendChild(t)}handleKeyDown(e){if(e.code==="Space"||e.code==="Enter"){this.switchPlaylistItem()}}switchPlaylistItem(){const e=this.options_;e.onClicked()}}or.registerComponent("PlaylistMenuItem",lr);const ur=c.a.getComponent("Component");class cr extends ur{constructor(e,t){super(e,t);const r=this;function n(){r.close()}this.el().addEventListener("mouseenter",()=>{this.player().off("userinactive",n)});this.el().addEventListener("mouseleave",()=>{this.player().one("userinactive",n)});this.player().on("click",e=>{let t=e.target;do{if(t.classList.contains("vjs-playlist-menu")||t.classList.contains("vjs-playlist-button")){return}t=t.parentElement}while(t);this.close()})}createEl(){this.menuItems=[];const e=this.getOptions();const t=super.createEl("div",{className:"vjs-playlist-menu",innerHTML:"",tabIndex:-1});const r=super.createEl("div",{className:"header"});const n=super.createEl("div");const i=super.createEl("div",{innerHTML:e.playlist.displayName,className:"title"});const s=e.playlist.videoChannel;const a=super.createEl("div",{innerHTML:s?this.player().localize("By {1}",[s.displayName]):"",className:"channel"});n.appendChild(i);n.appendChild(a);const o=super.createEl("div",{className:"cross"});o.addEventListener("click",()=>this.close());r.appendChild(n);r.appendChild(o);const l=super.createEl("ol");for(const u of e.elements){const c=new lr(this.player(),{element:u,onClicked:()=>this.onItemClicked(u)});l.appendChild(c.el());this.menuItems.push(c)}t.appendChild(r);t.appendChild(l);return t}update(){const e=this.getOptions();this.updateSelected(e.getCurrentPosition())}open(){this.player().addClass("playlist-menu-displayed")}close(){this.player().removeClass("playlist-menu-displayed")}updateSelected(e){for(const t of this.menuItems){t.setSelected(t.getElement().position===e)}}getOptions(){return this.options_}onItemClicked(e){this.getOptions().onItemClicked(e)}}ur.registerComponent("PlaylistMenu",cr);const hr=c.a.getPlugin("plugin");class fr extends hr{constructor(e,t){super(e,t);this.options=t;this.player.ready(()=>{e.addClass("vjs-playlist")});this.playlistMenu=new cr(e,t);this.playlistButton=new ar(e,Object.assign({},t,{playlistMenu:this.playlistMenu}));e.addChild(this.playlistMenu,t);e.addChild(this.playlistButton,t)}updateSelected(){this.playlistMenu.updateSelected(this.options.getCurrentPosition())}}c.a.registerPlugin("playlist",fr);var dr=l(22);class pr{constructor(e=[]){this.baseUrls=e}removeBySegmentUrl(e){console.log("Removing redundancy of segment URL %s.",e);const t=Object(dr["dirname"])(e);this.baseUrls=this.baseUrls.filter(e=>e!==t&&e!==t+"/")}buildUrl(e){const t=this.baseUrls.length+1;const r=this.getRandomInt(t);if(r===t-1)return e;const n=this.baseUrls[r];const i=n.endsWith("/")?"":"/";return n+i+Object(dr["basename"])(e)}countBaseUrls(){return this.baseUrls.length}getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}}function vr(r){return function e(t){return r.buildUrl(t.url)}}var gr=l(72);c.a.getComponent("PlaybackRateMenuButton").prototype.controlText_="Speed";const yr=c.a.getComponent("CaptionsButton");yr.prototype.controlText_="Subtitles/CC";yr.prototype.label_=" ";class mr{static initState(){mr.alreadyPlayed=false}static initialize(i,s,r){return Object(u["a"])(this,void 0,void 0,function*(){let e;this.onPlayerChange=r;this.playerElementClassName=s.common.playerElement.className;if(i==="webtorrent")yield Promise.all([l.e(0),l.e(1),l.e(2)]).then(l.bind(null,519));if(i==="p2p-media-loader"){[e]=yield Promise.all([Promise.all([l.e(0),l.e(4),l.e(3)]).then(l.bind(null,516)),Promise.all([l.e(0),l.e(4),l.e(9),l.e(3),l.e(10)]).then(l.bind(null,520))])}const t=this.getVideojsOptions(i,s,e);const n=this;return new Promise(r=>{c()(s.common.playerElement,t,function(){const e=this;let t=false;e.tech(true).one("error",()=>{if(!t)n.maybeFallbackToWebTorrent(i,e,s);t=true});e.one("error",()=>{if(!t)n.maybeFallbackToWebTorrent(i,e,s);t=true});e.one("play",()=>{mr.alreadyPlayed=true});n.addContextMenu(i,e,s.common.embedUrl,s.common.embedTitle);e.bezels();return r(e)})})})}static initializeContributor(t,n){return Object(u["a"])(this,void 0,void 0,function*(){const e=this;return new Promise(r=>{c()(t,n,function(){const e=this;let t=false;e.one("play",()=>{mr.alreadyPlayed=true});return r(e)})})})}static maybeFallbackToWebTorrent(s,a,o){return Object(u["a"])(this,void 0,void 0,function*(){if(s==="webtorrent")return;const e=document.createElement("video");e.className=this.playerElementClassName;let t=o.common.playerElement.parentNode;if(!t)t=document.getElementById(o.common.playerElement.id).parentNode;t.parentNode.insertBefore(e,t);o.common.playerElement=e;o.common.onPlayerElementChange(e);a.dispose();yield Promise.all([l.e(0),l.e(1),l.e(2)]).then(l.bind(null,519));const r="webtorrent";const n=this.getVideojsOptions(r,o);const i=this;c()(e,n,function(){const e=this;i.addContextMenu(r,e,o.common.embedUrl,o.common.embedTitle);mr.onPlayerChange(e)})})}static getVideojsOptions(e,t,r){const n=t.common;const i=e==="p2p-media-loader";let s=this.getAutoPlayValue(n.autoplay);let a={preloadTextTracks:false};const o={peertube:{mode:e,autoplay:s,videoViewUrl:n.videoViewUrl,videoDuration:n.videoDuration,userWatching:n.userWatching,subtitle:n.subtitle,videoCaptions:n.videoCaptions,stopTime:n.stopTime,isLive:n.isLive,videoUUID:n.videoUUID}};if(n.playlist){o.playlist=n.playlist}if(n.enableHotkeys===true){mr.addHotkeysOptions(o)}if(i){const{hlsjs:u}=mr.addP2PMediaLoaderOptions(o,t,r);Object.assign(a,u.html5)}if(e==="webtorrent"){mr.addWebTorrentOptions(o,t);s=false}const l={html5:a,textTrackSettings:false,controls:n.controls!==undefined?n.controls:true,loop:n.loop!==undefined?n.loop:false,muted:n.muted!==undefined?n.muted:undefined,autoplay:this.getAutoPlayValue(s),poster:n.poster,inactivityTimeout:n.inactivityTimeout,playbackRates:[.5,.75,1,1.25,1.5,1.75,2],plugins:o,controlBar:{children:this.getControlBarChildren(e,{captions:n.captions,pocketnetLink:n.pocketnetLink,theaterButton:n.theaterButton,nextVideo:n.nextVideo,hasNextVideo:n.hasNextVideo,previousVideo:n.previousVideo,hasPreviousVideo:n.hasPreviousVideo})}};if(n.language&&!h(n.language)){Object.assign(l,{language:n.language})}return l}static addP2PMediaLoaderOptions(e,t,r){const i=t.p2pMediaLoader;const n=t.common;const s=i.trackerAnnounce.filter(e=>e.startsWith("ws"));const a=new pr(t.p2pMediaLoader.redundancyBaseUrls);const o={redundancyUrlManager:a,type:"application/x-mpegURL",startTime:n.startTime,src:i.playlistUrl};let l=false;if(navigator&&navigator.connection&&navigator.connection.type==="cellular"){console.log("We are on a cellular connection: disabling seeding.");l=true}const u={loader:{trackerAnnounce:s,segmentValidator:Object(gr["a"])(t.p2pMediaLoader.segmentsSha256Url,t.common.isLive),rtcConfig:Object(St["d"])(),requiredSegmentsPriority:1,segmentUrlBuilder:vr(a),useP2P:Object(Lt["d"])(),consumeOnly:l},segments:{swarmId:i.playlistUrl}};const c={levelLabelHandler:e=>{const t=Math.min(e.height||0,e.width||0);const r=i.videoFiles.find(e=>e.resolution.id===t);if(!r)return e.height;let n=r.resolution.label;if(r.fps>=50)n+=r.fps;return n},html5:{hlsjsConfig:{capLevelToPlayerSize:true,autoStartLoad:false,liveSyncDurationCount:5,maxBufferLength:30,maxMaxBufferLength:55,loader:new r.Engine(u).createLoaderClass()}}};const h={p2pMediaLoader:o,hlsjs:c};Object.assign(e,h);return h}static addWebTorrentOptions(e,t){const r=t.common;const n=t.webtorrent;const i=this.getAutoPlayValue(r.autoplay)==="play"?true:false;const s={autoplay:i,videoDuration:r.videoDuration,playerElement:r.playerElement,videoFiles:n.videoFiles,startTime:r.startTime};Object.assign(e,{webtorrent:s})}static getControlBarChildren(e,t){const r=[];const n=e==="webtorrent"?"peerTubeLoadProgressBar":"loadProgressBar";r.push("playbackRateMenuButton");if(t.captions===true)r.push("captionsButton");r.push("resolutionMenuButton");const i={};if(t.previousVideo){const s={type:"previous",handler:t.previousVideo,isDisabled:()=>{if(!t.hasPreviousVideo)return false;return!t.hasPreviousVideo()}};Object.assign(i,{previousVideoButton:s})}Object.assign(i,{playToggle:{}});if(t.nextVideo){const s={type:"next",handler:t.nextVideo,isDisabled:()=>{if(!t.hasNextVideo)return false;return!t.hasNextVideo()}};Object.assign(i,{nextVideoButton:s})}Object.assign(i,{currentTimeDisplay:{},timeDivider:{},durationDisplay:{},liveDisplay:{},flexibleWidthSpacer:{},progressControl:{children:{seekBar:{children:{[n]:{},mouseTimeDisplay:{},playProgressBar:{}}}}},p2PInfoButton:{},muteToggle:{},volumeControl:{},settingsButton:{setup:{maxHeightOffset:40},entries:r}});console.log("options",t);if(t.pocketnetLink){Object.assign(i,{pocketnetLinkButton:{href:t.pocketnetLink}})}if(t.theaterButton===true){Object.assign(i,{theaterButton:{}})}Object.assign(i,{fullscreenToggle:{handler:function(e){console.log("handler",e,this)}}});return i}static addContextMenu(r,n,i,s){const e=()=>{const e=n.options_["loop"];const t=[{icon:"repeat",label:n.localize("Play in loop")+(e?'<span class="vjs-icon-tick-white"></span>':""),listener:function(){n.options_["loop"]=!e}},{label:n.localize("Copy the video URL"),listener:function(){Object(ce["a"])(Object(St["a"])())}},{label:n.localize("Copy the video URL at the current time"),listener:function(){Object(ce["a"])(Object(St["a"])({startTime:this.currentTime()}))}},{icon:"code",label:n.localize("Copy embed code"),listener:()=>{Object(ce["a"])(Object(St["b"])(i,s))}}];if(r==="webtorrent"){t.push({label:n.localize("Copy magnet URI"),listener:function(){Object(ce["a"])(this.webtorrent().getCurrentVideoFile().magnetUri)}})}return t.map(e=>Object.assign(Object.assign({},e),{label:`<span class="vjs-icon-${e.icon||"link-2"}"></span>`+e.label}))}}static addHotkeysOptions(e){const t=(e,t)=>!e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey&&e.key===t;Object.assign(e,{hotkeys:{skipInitialFocus:true,enableInactiveFocus:false,captureDocumentHotkeys:true,documentHotkeysFocusElementFilter:e=>{const t=e.tagName.toLowerCase();return e.id==="content"||t==="body"||t==="video"},enableVolumeScroll:false,enableModifiersForNumbers:false,rewindKey:function(e){return t(e,"ArrowLeft")},forwardKey:function(e){return t(e,"ArrowRight")},fullscreenKey:function(e){return t(e,"f")||!e.altKey&&e.ctrlKey&&e.key==="Enter"},customKeys:{increasePlaybackRateKey:{key:function(e){return t(e,">")},handler:function(e){const t=Math.min(e.playbackRate()+.1,5);e.playbackRate(parseFloat(t.toFixed(2)))}},decreasePlaybackRateKey:{key:function(e){return t(e,"<")},handler:function(e){const t=Math.max(e.playbackRate()-.1,.1);e.playbackRate(parseFloat(t.toFixed(2)))}},frameByFrame:{key:function(e){return t(e,".")},handler:function(e){e.pause();const t=1/30;e.currentTime(e.currentTime()+t)}}}}})}static getAutoPlayValue(e){if(e!==true)return e;if(Object(St["e"])()||Object(St["g"])()){return mr.alreadyPlayed?"play":false}return"play"}}mr.alreadyPlayed=false;l(151);class _r{constructor(e){this.element=e;this.api=null;this.enableApi=false;this.startTime=0;this.scope="peertube";this.headers=new Headers;this.LOCAL_STORAGE_OAUTH_CLIENT_KEYS={CLIENT_ID:"client_id",CLIENT_SECRET:"client_secret"};this.peertubeHooks={};this.loadedScripts=new Set;this.wrapperElement=e}static main(t,r,n,i){return Object(u["a"])(this,void 0,void 0,function*(){const e=new _r(t);e.getInitialSettings(n);yield e.init(r,n,i);return e})}getInitialSettings(e){this.host="https://"+this.getParamString(e,"host","");this.contributor=this.getParamString(e,"contributor","peertube");this.language=this.getParamString(e,"language",navigator.language);this.autoplay=this.getParamToggle(e,"autoplay",false);this.wautoplay=this.getParamToggle(e,"wautoplay",false);this.controls=this.getParamToggle(e,"controls",true);this.muted=this.getParamToggle(e,"muted",undefined);this.loop=this.getParamToggle(e,"loop",false);this.title=this.getParamToggle(e,"title",false);this.enableApi=this.getParamToggle(e,"api",this.enableApi);this.warningTitle=this.getParamToggle(e,"warningTitle",false);this.scope=this.getParamString(e,"scope",this.scope);this.subtitle=this.getParamString(e,"subtitle");this.startTime=this.getParamString(e,"start");this.stopTime=this.getParamString(e,"stop");this.bigPlayBackgroundColor=this.getParamString(e,"bigPlayBackgroundColor");console.log(" this.stopTime",this.stopTime);this.foregroundColor=this.getParamString(e,"foregroundColor");this.modeParam=this.getParamString(e,"mode");this.isVideoEmbed=this.getParamString(e,"videoEmbedded","");this.txid=this.getParamString(e,"txid","");this.pocketnetLink=this.txid&&this.isVideoEmbed?`https://pocketnet.app/index?video=1&v=${this.txid}`:""}getVideoUrl(e){return"/api/v1/videos/"+e}refreshFetch(r,n){return fetch(this.composePath(r),n).then(e=>{if(e.status!==j.UNAUTHORIZED_401)return e;const t=new Promise((t,r)=>{const e=me.getItem(this.LOCAL_STORAGE_OAUTH_CLIENT_KEYS.CLIENT_ID);const n=me.getItem(this.LOCAL_STORAGE_OAUTH_CLIENT_KEYS.CLIENT_SECRET);const i=new Headers;i.set("Content-Type","application/x-www-form-urlencoded");const s={refresh_token:this.userTokens.refreshToken,client_id:e,client_secret:n,response_type:"code",grant_type:"refresh_token"};fetch(this.composePath("/api/v1/users/token"),{headers:i,method:"POST",body:Object(ce["c"])(s)}).then(e=>{if(e.status===j.UNAUTHORIZED_401)return undefined;return e.json()}).then(e=>{if(!e||e.code==="invalid_grant"){Ce.flush();this.removeTokensFromHeaders();return t()}this.userTokens.accessToken=e.access_token;this.userTokens.refreshToken=e.refresh_token;this.userTokens.save();this.setHeadersFromTokens();t()}).catch(e=>{r(e)})});return t.catch(()=>{Ce.flush();this.removeTokensFromHeaders()}).then(()=>fetch(r,Object.assign(Object.assign({},n),{headers:this.headers})))})}getPlaylistUrl(e){return"/api/v1/video-playlists/"+e}loadVideoInfo(e){return this.refreshFetch(this.getVideoUrl(e),{headers:this.headers})}loadVideoInfoCache(e){if(!window.peertubeglobalcache)window.peertubeglobalcache={};if(window.peertubeglobalcache[e]){if(window.peertubeglobalcache[e].state&&window.peertubeglobalcache[e].state.id!=2){return Promise.resolve(window.peertubeglobalcache[e])}}return this.loadVideoTotal(e)}loadVideoTotal(t){return this.loadVideo(t).then(({videoResponse:e})=>{if(!e){return Promise.resolve(null)}return e.json()}).then(e=>{this.details=e;window.peertubeglobalcache[t]=e;return e})}waitTranscoded(r){if(this.details&&this.details.state&&this.details.state.id==2&&this.playerElement){return this.loadVideoTotal(r).then(e=>{if(!e)return Promise.resolve(null);if(e.state.id==2){return new Promise((e,t)=>{setTimeout(()=>{return this.waitTranscoded(r)},3e3)})}else{return this.loadVideoAndBuildPlayer(this.details.uuid).catch(e=>console.error(e))}}).catch(e=>{})}return Promise.resolve()}removeElement(e){e.parentElement.removeChild(e)}displayError(e,t){if(this.playerElement){this.removeElement(this.playerElement);this.playerElement=undefined}const r=document.createElement("div");r.className="error-block";const n=document.createElement("div");n.className="error-block-wrapper";const i=document.createElement("div");i.className="error-title";i.innerHTML="Sorry";const s=document.createElement("div");s.className="error-text";s.innerHTML=e;r.appendChild(n);n.appendChild(i);n.appendChild(s);if(this.details&&this.details.uuid){const a=document.createElement("button");a.className="error-reload";a.innerHTML='<i class="fas fa-redo"></i> Reload';a.onclick=()=>{this.loadVideoAndBuildPlayer(this.details.uuid)};n.appendChild(a)}this.wrapperElement.innerHTML="";this.wrapperElement.appendChild(r)}displayWarning(e,t){this.player.overlay({overlays:[{content:e,align:"center",start:0,showBackground:true,class:"warning-overlay"}]})}videoNotFound(e){const t="This video does not exist.";this.displayError(t,e)}videoFetchError(e){const t="We cannot fetch the video. Please try again later.";this.displayError(t,e)}playlistNotFound(e){const t="This playlist does not exist.";this.displayError(t,e)}playlistFetchError(e){const t="We cannot fetch the playlist. Please try again later.";this.displayError(t,e)}getParamToggle(e,t,r){return e[t]?true:r}getParamString(e,t,r){return e[t]?e[t]:r}destroy(){try{this.player.dispose()}catch(e){}if(this.api){this.api.clear()}this.playerElement=null}playNextVideo(){return Object(u["a"])(this,void 0,void 0,function*(){const e=this.getNextPlaylistElement();if(!e){return}this.currentPlaylistElement=e;return this.loadVideoAndBuildPlayer(this.currentPlaylistElement.video.uuid)})}playPreviousVideo(){return Object(u["a"])(this,void 0,void 0,function*(){const e=this.getPreviousPlaylistElement();if(!e){return}this.currentPlaylistElement=e;yield this.loadVideoAndBuildPlayer(this.currentPlaylistElement.video.uuid)})}getCurrentPosition(){if(!this.currentPlaylistElement)return-1;return this.currentPlaylistElement.position}init(e,t,r){return Object(u["a"])(this,void 0,void 0,function*(){try{this.userTokens=Ce.load();this.clbk=r;yield this.initCore(e,t)}catch(e){console.error(e)}})}initializeApi(){if(!this.clbk)return;this.api=new ke(this,this.clbk);this.api.initialize()}loadParams(e){try{if(this.modeParam){if(this.modeParam==="p2p-media-loader")this.mode="p2p-media-loader";else this.mode="webtorrent"}else{if(Array.isArray(e.streamingPlaylists)&&e.streamingPlaylists.length!==0)this.mode="p2p-media-loader";else this.mode="webtorrent"}}catch(e){console.error("Cannot get params from URL.",e)}}loadVideo(i){return Object(u["a"])(this,void 0,void 0,function*(){const e=this.loadVideoInfo(i);let t;let r;try{t=yield e;r=t.status===j.OK_200}catch(e){console.error(e);r=false}if(!r){const n={};if((t===null||t===void 0?void 0:t.status)===j.NOT_FOUND_404){this.videoNotFound(n);return{}}this.videoFetchError(n);return{}}return{videoResponse:t}})}buildPlaylistManager(){return Object(u["a"])(this,void 0,void 0,function*(){this.player.upnext({timeout:1e4,headText:f("Up Next",null),cancelText:f("Cancel",null),suspendedText:f("Autoplay is suspended",null),getTitle:()=>this.nextVideoTitle(),next:()=>this.playNextVideo(),condition:()=>!!this.getNextPlaylistElement(),suspended:()=>false})})}loadVideoAndBuildPlayer(t){return Object(u["a"])(this,void 0,void 0,function*(){const e=yield this.loadVideoInfoCache(t);if(!e){return Promise.reject("failfetch")}if(e.from){this.host="https://"+e.from}if(!e.aspectRatio){e.aspectRatio=1}if(new Date(e.createdAt).getTime()<new Date(2021,4,19).getTime()){e.aspectRatio=1.78}this.details=e;this.waitTranscoded(t);return this.buildVideoPlayer(e)})}nextVideoTitle(){const e=this.getNextPlaylistElement();if(!e)return"";return e.video.name}getNextPlaylistElement(t){if(!t)t=this.currentPlaylistElement.position+1;if(t>this.playlist.videosLength){return undefined}const e=this.playlistElements.find(e=>e.position===t);if(!e||!e.video){return this.getNextPlaylistElement(t+1)}return e}getPreviousPlaylistElement(t){if(!t)t=this.currentPlaylistElement.position-1;if(t<1){return undefined}const e=this.playlistElements.find(e=>e.position===t);if(!e||!e.video){return this.getNextPlaylistElement(t-1)}return e}buildVideoPlayerContributos(s){return Object(u["a"])(this,void 0,void 0,function*(){yield l.e(11).then(l.t.bind(null,518,7));let e=false;if(this.player){try{this.player.dispose()}catch(e){}e=true}this.playerElement=document.createElement("video");this.playerElement.className="video-js video-js-contributor";this.playerElement.setAttribute("playsinline","true");if(this.contributor=="youtube"){var t={techOrder:["youtube"],sources:[{type:"video/youtube",src:"https://www.youtube.com/watch?v="+s}],youtube:{iv_load_policy:1}};this.playerElement.setAttribute("data-setup",JSON.stringify(t));var r=37.5;this.playerElement.style.cssText=`padding-top: ${r}%; padding-bottom: ${r}%;`}if(this.contributor=="vimeo"){var n={techOrder:["vimeo"],sources:[{type:"video/vimeo",src:"https://vimeo.com/"+s}],vimeo:{color:"#fbc51b"}};this.playerElement.setAttribute("data-setup",JSON.stringify(n))}this.wrapperElement.innerHTML="";this.wrapperElement.appendChild(this.playerElement);const i={autoplay:e?true:this.autoplay,controls:this.controls,muted:this.muted,loop:this.loop,language:this.language};this.player=yield mr.initializeContributor(this.playerElement,i);this.player.on("customError",(e,t)=>this.handleError(t.err));this.initializeApi();this.removePlaceholder();this.runHook("action:embed.player.loaded",undefined,{player:this.player,videojs:c.a,video:{}})})}composePath(e=""){return this.host+e}buildVideoPlayer(l){return Object(u["a"])(this,void 0,void 0,function*(){let e=false;if(this.player){try{this.player.dispose()}catch(e){}e=true}const t=l.aspectRatio;this.playerElement=document.createElement("video");this.playerElement.className="video-js";this.playerElement.setAttribute("playsinline","true");const r=document.querySelector(".standalone-video-embed");const n=100/(2*t);if(l.aspectRatio<.9){this.playerElement.classList.add("verticalVideo");if(r)document.querySelector(".video-js-wrapper").classList.add("vertcalVideoContainer")}if(l.aspectRatio>=.9&&l.aspectRatio<1.25){this.playerElement.classList.add("squareVideo");if(r)document.querySelector(".video-js-wrapper").classList.add("squareVideoContainer")}if(!r){this.playerElement.style.cssText=`padding-top: ${n}%; padding-bottom: ${n}%;`}this.wrapperElement.innerHTML="";this.wrapperElement.appendChild(this.playerElement);if(!e)this.loadPlaceholder(l);this.loadParams(l);const i=this.currentPlaylistElement?{elements:this.playlistElements,playlist:this.playlist,getCurrentPosition:()=>this.currentPlaylistElement.position,onItemClicked:e=>{this.currentPlaylistElement=e;this.loadVideoAndBuildPlayer(this.currentPlaylistElement.video.uuid).catch(e=>console.error(e))}}:undefined;const s={common:{autoplay:e?true:this.autoplay,controls:this.controls,muted:this.muted,loop:this.loop,captions:false,subtitle:this.subtitle,startTime:this.playlist?this.currentPlaylistElement.startTimestamp:this.startTime,stopTime:this.playlist?this.currentPlaylistElement.stopTimestamp:this.stopTime,nextVideo:this.playlist?()=>this.playNextVideo():undefined,hasNextVideo:this.playlist?()=>!!this.getNextPlaylistElement():undefined,previousVideo:this.playlist?()=>this.playPreviousVideo():undefined,hasPreviousVideo:this.playlist?()=>!!this.getPreviousPlaylistElement():undefined,playlist:i,videoCaptions:[],inactivityTimeout:2500,videoViewUrl:this.composePath(this.getVideoUrl(l.uuid)+"/views"),videoUUID:l.uuid,isLive:l.isLive,playerElement:this.playerElement,onPlayerElementChange:e=>this.playerElement=e,videoDuration:l.duration,enableHotkeys:true,pocketnetLink:this.pocketnetLink,poster:this.wautoplay?null:this.composePath(l.previewPath),theaterButton:false,serverUrl:this.host,language:this.language,embedUrl:this.composePath(l.embedPath),embedTitle:l.name},webtorrent:{videoFiles:l.files}};if(this.mode==="p2p-media-loader"){const o=l.streamingPlaylists.find(e=>e.type===1);Object.assign(s,{p2pMediaLoader:{playlistUrl:o.playlistUrl,segmentsSha256Url:o.segmentsSha256Url,redundancyBaseUrls:o.redundancies.map(e=>e.baseUrl),trackerAnnounce:l.trackerUrls,videoFiles:o.files}})}this.player=yield mr.initialize(this.mode,s,e=>{this.player=e});this.player.on("customError",(e,t)=>this.handleError(t.err));const a=this.isVideoEmbed?`<span class="icon icon-full-logo-transparent"></span>`:'<span class="icon icon-full-logo-transparent"></span>';this.player.overlay({overlays:[{content:a,align:"top-left",start:0,showBackground:false,class:"pocketnet-logo-video-player"}]});this.initializeApi();this.removePlaceholder();this.runHook("action:embed.player.loaded",undefined,{player:this.player,videojs:c.a,video:l});if(this.details.state.id==2){this.displayWarning("Video is being processed")}})}initCore(e,t){return Object(u["a"])(this,void 0,void 0,function*(){if(this.userTokens)this.setHeadersFromTokens();if(this.contributor!="peertube")return this.buildVideoPlayerContributos(e);return this.loadVideoAndBuildPlayer(e)})}handleError(e,t){if(e.message.indexOf("from xs param")!==-1){this.player.dispose();this.playerElement=null;this.displayError("This video is not available because the remote instance is not responding.",t);return}if(this.details.state.id==2){this.loadVideoAndBuildPlayer(this.details.uuid)}console.log("ERR",e)}handleErrorCritical(e){this.player.dispose();this.playerElement=null;this.displayError("This video is not available because the remote instance is not responding.")}buildDock(r,n){return Object(u["a"])(this,void 0,void 0,function*(){if(!this.controls)return;if(!this.player.player_)return;const e=this.title?r.name:undefined;const t=n.tracker.enabled&&this.warningTitle?'<span class="text">'+f("Watching this video may reveal your IP address to others.")+"</span>":undefined;if(e||t){this.player.dock({title:e,description:t})}})}buildCSS(){const e=document.getElementById("custom-css");if(this.bigPlayBackgroundColor){e.style.setProperty("--embedBigPlayBackgroundColor",this.bigPlayBackgroundColor)}if(this.foregroundColor){e.style.setProperty("--embedForegroundColor",this.foregroundColor)}}buildCaptions(t,r){return Object(u["a"])(this,void 0,void 0,function*(){if(r.ok){const{data:e}=yield r.json();return e.map(e=>({label:f(e.language.label,t),language:e.language.id,src:this.composePath(e.captionPath)}))}return[]})}loadPlaceholder(e){const t=this.getPlaceholderElement();if(t){const r=this.composePath(e.previewPath);t.style.backgroundImage=`url("${r}")`;if(!this.wautoplay)t.style.display="block";else{t.style.display="none"}}}removePlaceholder(){const e=this.getPlaceholderElement();if(e)e.style.display="none"}getPlaceholderElement(){return document.getElementById("placeholder-preview")}setHeadersFromTokens(){this.headers.set("Authorization",`${this.userTokens.tokenType} ${this.userTokens.accessToken}`)}removeTokensFromHeaders(){this.headers.delete("Authorization")}isPlaylistEmbed(){return window.location.pathname.split("/")[1]==="video-playlists"}ensurePluginsAreLoaded(s,a){return Object(u["a"])(this,void 0,void 0,function*(){if(s.plugin.registered.length===0)return;for(const e of s.plugin.registered){for(const t of Object.keys(e.clientScripts)){const r=e.clientScripts[t];if(r.scopes.includes("embed")===false)continue;const n=`/plugins/${e.name}/${e.version}/client-scripts/${r.script}`;if(this.loadedScripts.has(n))continue;const i={plugin:e,clientScript:{script:n,scopes:r.scopes},pluginType:x.PLUGIN,isTheme:false};yield fe({hooks:this.peertubeHooks,pluginInfo:i,onSettingsScripts:()=>undefined,peertubeHelpersFactory:e=>this.buildPeerTubeHelpers(a)})}}})}buildPeerTubeHelpers(t){function e(){throw new Error("This helper is not implemented in embed.")}return{getBaseStaticRoute:e,getSettings:e,isLoggedIn:e,notifier:{info:e,error:e,success:e},showModal:e,getServerConfig:e,markdownRenderer:{textMarkdownToHTML:e,enhancedMarkdownToHTML:e},translate:e=>{return Promise.resolve(f(e,t))}}}runHook(e,t,r){return he(this.peertubeHooks,e,t,r)}}window.PeerTubeEmbeding=_r}]);