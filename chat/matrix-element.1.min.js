(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[1],{"087d":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chatsPreview",class:{minimized:t.minimized,active:t.active}},[e("div",{staticClass:"work"},[e("div",{staticClass:"previewWrapper"},[e("div",{staticClass:"iconWrapper"},[t.dummy?e("div",{staticClass:"dummyicon loadinggradient"}):e("chatIcon",{attrs:{m_chat:t.m_chat,chat:t.chat,dontuseslides:!0}})],1),e("div",{staticClass:"infoWrapper"},[!t.dummy&&t.ready?e("div",{staticClass:"summaryLine"},[e("div",{staticClass:"caption flexBlock"},[t.roomMuted?e("div",{staticClass:"roomMuted"},[e("i",{staticClass:"fas fa-bell-slash"})]):t._e(),e("chatName",{attrs:{preview:!0,chat:t.chat,m_chat:t.m_chat}})],1),e("div",{staticClass:"time"},[e("chatTime",{attrs:{chat:t.chat,m_chat:t.m_chat}})],1)]):t._e(),!t.dummy&&t.ready?e("div",{staticClass:"eventsLine maxwidth"},[t.event?e("eventsEvent",{attrs:{event:t.matrixevent,chat:t.m_chat,preview:!0}}):t._e()],1):t._e(),t.dummy?e("div",{staticClass:"eventsLine"},[e("div",{staticClass:"dummyline loadinggradient"})]):t._e()])])])])},n=[],r=i("2f62"),s=i("aa20"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chatTime"},[t.time?e("date",{attrs:{date:t.time}}):e("span",{staticClass:"new"},[t._v(t._s(t.$t("caption.new")))])],1)},c=[],u={name:"chatTime",props:{chat:Object,m_chat:{}},computed:{time:function(){var t=this.chat.lastModified;if("invite"===this.m_chat.selfMembership){var e=moment(moment.utc(t).toDate()).local().fromNow();return"in a few seconds"!==e&&"a few seconds ago"!==e?t:(t=-1,t<0?null:t)}return t}}},d=u,h=i("2877");function m(t){var e=i("81e5");e.__inject__&&e.__inject__(t)}var l=Object(h["a"])(d,o,c,!1,m,"3edef72c",null,!0),f=l.exports,p=i("3094"),v={name:"preview",props:{chat:Object,dummy:Boolean,search:String,messages:Array},inject:["matches"],components:{chatName:s["a"],chatTime:f,chatIcon:p["a"]},data:function(){return{loading:!1,ready:!1,lastEvent:{},userStatusRoom:String}},watch:{m_chat:{immediate:!0,handler:function(){this.ready=!1,this.m_chat&&!_.isEmpty(this.m_chat)&&this.core.mtrx.kit.prepareChat(this.m_chat).then(t=>{this.ready=!0})}}},mounted:function(){},computed:Object(r["c"])({auth:t=>t.auth,blockedCheck:function(){var t=this.core.mtrx.anotherChatUsers(this.m_chat.roomId);if(1==t.length)return this.core.mtrx.blockeduser(t[0].userId)},roomMuted:function(){if(this.chat){let t=this.core.mtrx.client.pushProcessor.getPushRuleById(this.chat.roomId);if(null!==t)return!0}return!1},m_chat:function(t){return this.core.mtrx.client&&this.chat?this.chat.roomId?this.core.mtrx.store.rooms[this.chat.roomId]||null:void 0:null},chatevents:function(){return(this.events[this.chat.roomId]||{}).timeline||[]},key:function(){return this.event?this.event.event_id:"key"},unknowngroupusers:function(){return this.core.mtrx.kit.unknowngroupusers(this.chat)},matrixevent:function(){var t=this.event;if(t)return t.get?t.get():t},event:function(){if(this.chat&&this.chat.roomId)return this.messages?this.messages[0]:this.chatevents[0]},...Object(r["c"])(["minimized","active","events"])}),methods:{}},g=v;function x(t){var e=i("4d3a");e.__inject__&&e.__inject__(t)}var b=Object(h["a"])(g,a,n,!1,x,"009794bc",null,!0);e["a"]=b.exports},"0c5b":function(t,e,i){var a=i("315d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("35d6").default;t.exports.__inject__=function(t){n("2bc04e7e",a,t)}},"17da":function(t,e,i){var a=i("e117");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("35d6").default;t.exports.__inject__=function(t){n("1c125067",a,t)}},"2d88":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".opacity[data-v-36976f5e]{opacity:0}.chatIcon[data-v-36976f5e]{width:100%;position:relative}.unknowngroupusersicon[data-v-36976f5e]{position:absolute;left:0;top:0;bottom:0;right:0;font-size:.7em;display:flex;justify-content:center;align-items:center;color:#fff;text-shadow:0 0 2px rgba(0,11,58,.714),0 0 3px rgba(0,8,43,.519)}.unknowngroupusers .bgimage[data-v-36976f5e]{transform:scale(.7)}.chatGroupIcon[data-v-36976f5e],.chatGroupIcon img[data-v-36976f5e]{width:100%;height:100%}.chatGroupIcon img[data-v-36976f5e]{border-radius:50%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%;position:absolute;top:0;z-index:100}",""]),t.exports=e},"2e63":function(t,e,i){"use strict";i.r(e);var a=i("f467");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n)},3094:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chatIcon",class:{unknowngroupusers:t.unknowngroupusers}},[t.groupAvatar?e("div",{staticClass:"chatGroupIcon"},[e("userpic",{attrs:{image:t.groupAvatar}})],1):e("userspic",{key:t.allnotifications,class:{opacity:t.groupAvatar},attrs:{slidesPerView:t.slidesPerView,users:t.usersinfo,status:t.status,unseen:t.unseen,single:t.singleAvatar}})],1)},n=[],r=i("3139"),s={name:"chatIcon",data:function(){return{single:[]}},props:{chat:{},m_chat:{},slidesPerView:Number,hideunseen:Boolean,dontuseslides:Boolean},computed:{allnotifications:function(){return this.$store.state.allnotifications||"0"},unseen:function(){return this.hideunseen||this.blockedCheck?0:"invite"===this.m_chat.selfMembership&&r["a"].date.addseconds(moment.utc(this.m_chat.summary.lastModified).toDate(),86400)>new Date?1:(this.allnotifications,this.m_chat.getUnreadNotificationCount())},users:function(){if(!this.chat)return[];var t=this.core.mtrx.anotherChatUsers(this.chat.roomId);return this.dontuseslides&&(t=_.first(t,4)),_.first(_.shuffle(t),49)},singleAvatar:function(){if(!this.chat&&!this.m_chat)return{};if("public"===this.m_chat.getJoinRule()&&1===this.m_chat.currentState.getMembers().length){var t=this.m_chat.currentState.getMembers()[0],e=this.$store.state.users[r["a"].getmatrixid(t.userId)];if(e)return e.status=t.membership,e.image=e.source.i,e}return{}},blockedCheck:function(){var t=this.core.mtrx.anotherChatUsers(this.m_chat.roomId);if(1==t.length)return this.core.mtrx.blockeduser(t[0].userId)},usersinfo:function(){var t=this.core.mtrx.chatUsersInfo(this.chat.roomId,"anotherChatUsers");return this.dontuseslides&&(t=_.first(t,4)),_.first(_.shuffle(t),49)},status:function(){var t={};return _.each(this.users,e=>{t[e.userId]=this.core.mtrx.blockeduser(e.userId)?"blocked":e.membership}),t},unknowngroupusers:function(){return this.core.mtrx.kit.unknowngroupusers(this.m_chat)},groupAvatar:function(){var t;const e=null===(t=this.m_chat.currentState.getStateEvents("m.room.avatar")[0])||void 0===t?void 0:t.event.content.avatarUrl;return""!==e?e:""}}},o=s,c=i("2877");function u(t){var e=i("aac9");e.__inject__&&e.__inject__(t)}var d=Object(c["a"])(o,a,n,!1,u,"36976f5e",null,!0);e["a"]=d.exports},"315d":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".new[data-v-3edef72c]{color:rgb(var(--color-good))}",""]),t.exports=e},"4d3a":function(t,e,i){"use strict";i.r(e);var a=i("17da");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n)},"600f":function(t,e,i){var a=i("947c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("35d6").default;t.exports.__inject__=function(t){n("2572efd1",a,t)}},"6f8f":function(t,e,i){var a=i("2d88");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("35d6").default;t.exports.__inject__=function(t){n("fb2119ac",a,t)}},"81e5":function(t,e,i){"use strict";i.r(e);var a=i("0c5b");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n)},9147:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".nameofchat[data-v-fe0efb58]{white-space:nowrap}.nameline[data-v-fe0efb58]{display:flex;align-items:flex-end}.miniappicon[data-v-fe0efb58]{margin-right:.25em;margin-block:.25em}.miniappicon .bgimage[data-v-fe0efb58]{width:12px;height:12px;border-radius:2px}.iconGroup[data-v-fe0efb58]{font-size:.4em;width:16px;min-width:16px;text-align:center;height:16px;line-height:16px;border-radius:8px;background:rgb(var(--neutral-grad-2));margin-right:.5em;margin-block:.25em}.iconGroup i[data-v-fe0efb58]{color:rgb(var(--neutral-grad-1))}",""]),t.exports=e},"947c":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"[data-v-7720ef78] .infoWrapper{display:flex;align-items:center}[data-v-7720ef78] .infoWrapper .eventsLine{width:100%}",""]),t.exports=e},a0b1:function(t,e,i){"use strict";i.r(e);var a=i("600f");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n)},a54c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"dummypreviews"}},t._l(t.a,(function(t){return e("preview",{key:t.id,attrs:{dummy:!0}})})),1)},n=[],r=i("2f62"),s=i("087d"),o={name:"dummypreviews",data:()=>({messagesPreview:!1}),props:{data:Object},components:{preview:s["a"]},computed:Object(r["c"])({auth:t=>t.auth,a:function(){return this.messagesPreview?[1]:[1,2,3,4,5,6]}}),methods:{}},c=o,u=i("2877");function d(t){var e=i("a0b1");e.__inject__&&e.__inject__(t)}var h=Object(u["a"])(c,a,n,!1,d,"7720ef78",null,!0);e["default"]=h.exports},aa20:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nameline"},[t.isShowGroupIcon?e("div",{staticClass:"iconGroup"},[e("i",{staticClass:"fas fa-user-friends"})]):t._e(),t.miniappicon?e("div",{staticClass:"miniappicon"},[e("bgimage",{attrs:{src:t.miniappicon}})],1):t._e(),e("div",{staticClass:"nameofchat"},[t._v(t._s(t.convertedName))])])},n=[],r={name:"chatName",props:{chat:Object,preview:Boolean,m_chat:{}},inject:["matches","markText"],data:function(){return{}},computed:{users:function(){return this.chat?this.core.mtrx.anotherChatUsers(this.chat.roomId):[]},convertedName:function(){if(this.m_chat&&"public"===this.m_chat.getJoinRule()&&this.m_chat.currentState.getStateEvents("m.room.name").length>0)return this.m_chat.currentState.getStateEvents("m.room.name")[0].getContent().name;var t=_.filter(this.users,t=>t.userId!=this.core.user.userinfo.id),e=_.filter(_.map(t,t=>{if(this.$store.state.users[t.userId])return this.$store.state.users[t.userId].name}),(function(t){return t}));return e.length?0==this.m_chat.name.indexOf("@")?this.m_chat.name.replace("@",""):e.join(", "):this.core.mtrx.chatUsers(this.chat.roomId).length?"Empty chat: "+this.chat.roomId:"-"},markMatches:function(){return this.markText?this.markText(this.convertedName,!0):this.convertedName},isShowGroupIcon(){return!this.chat.miniappchat&&"@"===this.m_chat.name.slice(0,1)},miniappicon(){return this.chat.miniappchat?this.chat.miniappchat.icon:null}},mounted:function(){}},s=r,o=i("2877");function c(t){var e=i("2e63");e.__inject__&&e.__inject__(t)}var u=Object(o["a"])(s,a,n,!1,c,"fe0efb58",null,!0);e["a"]=u.exports},aac9:function(t,e,i){"use strict";i.r(e);var a=i("6f8f");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n)},e117:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".minimized.active .dummyline[data-v-009794bc]{height:44px;opacity:.3}.minimized.active .dummyicon[data-v-009794bc]{width:44px;height:44px;opacity:.3}.previewWrapper[data-v-009794bc]{cursor:pointer;display:flex;align-items:center;padding:10px 0}.previewWrapper .dummyline[data-v-009794bc]{height:22px;border-radius:5px;transition:.3s}.previewWrapper .dummyicon[data-v-009794bc]{width:22px;height:22px;border-radius:50%;margin:0 auto;transition:.3s}.previewWrapper .iconWrapper[data-v-009794bc]{width:44px;display:flex;align-items:center;min-width:44px}.previewWrapper .iconWrapper .oneuser i[data-v-009794bc]{font-size:.7em}.previewWrapper .infoWrapper[data-v-009794bc]{padding-left:.5em;flex-grow:1;overflow:hidden;text-overflow:ellipsis;min-height:50px}.emptyEvent span[data-v-009794bc]{color:rgb(var(--color-good));font-size:.8em}.eventsLine[data-v-009794bc]{position:relative;height:25px;contain:strict}.eventsLine .roomMuted[data-v-009794bc]{position:absolute;right:8px;top:0}.eventsLine .roomMuted i[data-v-009794bc]{color:rgb(var(--neutral-grad-3))}.eventsLine[data-v-009794bc] .previewMessage{max-width:90%;overflow:hidden;text-overflow:ellipsis}.eventsLine[data-v-009794bc] .messagePreview{max-width:100%;overflow:hidden;text-overflow:ellipsis}.eventsLine[data-v-009794bc] .msgtext{display:inline;font-size:.9em;white-space:nowrap}.eventsLine[data-v-009794bc] .deletedMessage{text-align:left;font-size:.9em;padding:0}.eventsLine[data-v-009794bc] span{color:rgb(var(--text-color));opacity:.8;font-size:.9em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.roomMuted[data-v-009794bc]{font-size:.5em;width:16px;min-width:16px;text-align:center;height:16px;line-height:16px;border-radius:8px;background:rgb(var(--neutral-grad-2));margin-right:.25em;margin-block:.25em}.roomMuted i[data-v-009794bc]{color:rgb(var(--neutral-grad-1))}.summaryLine[data-v-009794bc]{display:flex;min-height:25px}.summaryLine .time[data-v-009794bc]{padding-top:.25em;opacity:.3;font-weight:500;text-align:right;max-width:110px;maring-right:.5em}.summaryLine .time .chatTime[data-v-009794bc]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.summaryLine .time[data-v-009794bc] span{font-size:.8em;display:block}.summaryLine .caption[data-v-009794bc]{flex-grow:1;display:flex;align-items:flex-end}.summaryLine .caption[data-v-009794bc] .nameofchat{overflow:hidden;text-overflow:ellipsis;max-width:150px}.summaryLine .caption[data-v-009794bc] span{font-size:1em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:500;display:inline-block;max-width:190px}",""]),t.exports=e},f467:function(t,e,i){var a=i("9147");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("35d6").default;t.exports.__inject__=function(t){n("3a4c4efc",a,t)}}}]);
//# sourceMappingURL=matrix-element.1.min.js.map