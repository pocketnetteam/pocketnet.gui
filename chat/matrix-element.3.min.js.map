{"version":3,"sources":["webpack:///./src/components/assets/recordProgress/index.scss?99b6","webpack:///./src/components/chat/input/index.sass?2408","webpack:///./src/components/assets/recordVoice/index.scss","webpack:///./src/components/chat/input/index.sass","webpack:///./src/components/chat/input/InputField/InputField.vue?e702","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?da2f","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?61be","webpack:///./src/components/chat/input/InputField/InputField.vue?1080","webpack:///./src/components/assets/recordVoice/index.scss?44d4","webpack:///./src/components/chat/input/index.sass?04ac","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?c6d5","webpack:///./src/components/chat/input/InputField/InputField.vue?bdf5","webpack:///./src/components/chat/input/InputField/InputField.vue?3afa","webpack:///./src/components/assets/recordVoice/index.scss?1dd5","webpack:///./src/components/chat/input/InputField/InputField.vue?d97b","webpack:///./src/components/chat/input/InputField/InputField.vue?c60a","webpack:///./src/components/assets/recordProgress/index.scss","webpack:///./src/components/assets/recordProgress/index.scss?5906","webpack:///./src/components/chat/input/index.vue","webpack:///./src/components/chat/input/InputField/InputField.vue","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue","webpack:///src/components/chat/input/picturePreview/picturePreview.vue","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?3bda","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?5cb9","webpack:///src/components/chat/input/InputField/InputField.vue","webpack:///./src/components/chat/input/InputField/InputField.vue?3335","webpack:///./src/components/chat/input/InputField/InputField.vue?e642","webpack:///./src/components/assets/recordVoice/index.vue","webpack:///./src/components/assets/recordVoice/index.js","webpack:///./src/components/assets/recordVoice","webpack:///./src/components/assets/recordVoice/index.vue?d406","webpack:///./src/components/assets/recordProgress/index.vue","webpack:///./src/components/assets/recordProgress/index.js","webpack:///./src/components/assets/recordProgress","webpack:///./src/components/assets/recordProgress/index.vue?b74b","webpack:///./src/components/chat/input/index.js","webpack:///./src/components/chat/input","webpack:///./src/components/chat/input/index.vue?f6fe"],"names":["content","__esModule","default","module","i","locals","exports","add","__inject__","shadowRoot","___CSS_LOADER_API_IMPORT___","push","render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","ready","chat","class","donate","tipusers","length","_l","user","key","id","selected","tipuserindex","on","$event","insertuser","_e","voiceEnable","isRecording","record","recordTime","recordRmsData","cancelOpacity","clear","ref","roomId","me","sendinput","emitInputData","HideUploadPic","pasteImage","focused","tipBySearch","browsetip","selectcurrenttip","sendtransactionWrapper","streamMode","upload","extended","showinputmenu","directives","name","rawName","value","expression","prepareRecording","microphoneDisabled","initRecording","stopRecording","setOpacity","e","sendVoiceMessage","_m","_v","_s","removetransaction","staticRenderFns","$t","domProps","text","blured","keydown","textchange","keyup","paste_image","mobile","emojiIndex","display_emoji","close_emoji_picker","style","width","position","bottom","right","left","fontSize","fontFamily","exclude","insert_emoji","toggle_emoji_picker","donateAction","send","send_text","is_opened","base64","hide","props","data","methods","injectStyles","context","style0","component","components","Picker","picturePreview","clickOutside","inject","watch","immediately","handler","content_height","pasted_data","block","multiple","extensions","images","resize","type","hidden_previews","computed","prepareemoji","window","setText","setTimeout","savetextinstorage","localStorage","send_empty_array","focus","blur","blurifempty","textarea_resize","textarea_resize_reset","get_base64","reader","confirm","okText","cancelText","then","resize_image","autorotation","catch","getsearchposition","start","middle","end","sposition","br","dg","getsearch","event","inserttip","f","storagekey","creared","mounted","style1","hold","isHold","active","disabled","mousedown","mouseup","handleTouchStart","handleTouchEnd","recordEnd","Boolean","required","direction","mapState","state","beforeDestroy","document","removeEventListener","handleMove","$emit","cancel","Y","changedTouches","pageY","X","pageX","addEventListener","sendnow","clearStyle","$refs","toggle","transform","classList","remove","holder","deltaY","deltaX","contains","recording","timer","opacity","Number","rmsData","Array","minute","Math","floor","sec","rmsDataLast","_","last","throttle","draw","graph","offsetWidth","re","canvas","ctx","getContext","count","l","c","max","clearRect","fillStyle","fillRect","Object","u","String","relationEvent","InputField","contacts","preview","recordProgress","recordVoice","test","loading","file","fileInfo","creating","userId","showuserselect","anyUrlMeta","joinedMembers","tipvalue","mediaRecorder","audioContext","audioAnalyser","interval","cancelledCordovaMediaRecorder","usersForKeysHash","close","$store","voiceMessagesEnabled","connect","contact","pkoindisabled","menu","menuItems","POCKETNETINSTANCE","supportimagegallery","action","cameraHandlerCustom","icon","maxsize","uploadStart","error","uploadError","uploaded","uploadUploaded","uploadedAll","uploadUploadedAll","transaction","unshift","userlist","core","mtrx","chatUsersInfo","deep","uusers","map","split","ausers","matrixId","stateChat","$route","query","chatsMap","invited","filter","currentState","getMembers","m","v","membership","joined","arr","forEach","toLowerCase","indexOf","maintipuser","authorId","userinfo","source","address","created","client","newchat","Promise","resolve","wait","$f","pretry","access","increase","showuserselected","resizeImage","ftype","Images","reject","result","platform","ui","uploadImage","Base64","toFile","console","onSuccess","imgs","users","j","getmatrixid","r","store","commit","caption","$i18n","t","userselected","sendtransaction","api","roomid","receiver","share","emitUrl","url","globalpreloader","usersInfo","info","_info","keys","kit","tetatetid","initialstate","state_key","encrypted","createRoom","room_alias_name","visibility","invite","initial_state","_chat","m_chat","getRoom","room_id","getStateEvents","setPowerLevel","greetings","errcode","joinRoom","baseUrl","replace","maySendMessage","textCutLimit","limit","trim","slice","replaceMentions","each","RegExp","clbkEncrypt","clbkEncrypted","textEvent","encryptEvent","encryptedEvent","rel_type","event_id","clearEventId","makeid","editEvent","body","msgtype","decryptKey","decrypted","sendEvent","dispatch","sendText","params","sendtext","assign","relation","txid","donateLink","sendImage","meta","aborted","canencryptfilesize","s","pcrypto","canBeEncrypt","size","$dialog","dialog","sendFile","notenc","change","evt","target","getUrl","undefined","sendTyping","item","files","message","getImg","uploadSizeError","validImageTypes","includes","imageWH","img","Image","imgInfo","onload","w","h","height","onerror","src","catchPermissonsError","err","toString","cordova","getFileIosCordova","path","resolveLocalFileSystemURL","entry","FileReader","onloadend","blob","Blob","Uint8Array","readAsArrayBuffer","initRecordingCordova","cancelable","media","permissions","audio","isios","getAudioContext","cordovaMediaRecorder","Media","release","fu","externalDataDirectory","duration","createVoiceMessage","finally","rmsdata","currentPlaying","currentPlayingVoiceMessage","pause","setInterval","clone","getCurrentAmplitude","amp","log","startRecord","initMediaRecorder","recorder","stream","getTracks","track","stop","createAnalyser","createMediaStreamSource","startRecording","dataArray","frequencyBinCount","getByteFrequencyData","generateRms","checkaudioForSend","getduration","readFile","arraybuffer","decodeAudioData","buffer","frequencies","sqrt","reduce","a","b","toPrecision","clearInterval","hasdata","stopRecord","convertAudioToBase64","sendAudio","menuState","set","items"],"mappings":"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","file":"matrix-element.3.min.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=5df29904&prod&scoped=true&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"5ba85ea0\", content, shadowRoot)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=efa2321a&prod&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"11860d5d\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".recordButton_wrapper[data-v-16750db8]{position:relative}.recordButton_holder[data-v-16750db8]{visibility:hidden;position:absolute;display:flex;justify-content:center;align-items:center;height:16px;width:16px;background:#789;border-radius:50%;bottom:98px;transition:.1s;right:9px}.recordButton_holder .icon[data-v-16750db8]{color:#fff;font-size:7px}.recordButton_holder.active[data-v-16750db8]{visibility:visible}.recordButton_holder.hold[data-v-16750db8]{background:#789;visibility:visible;bottom:38px}.recordButton_holder.hold .icon[data-v-16750db8]{color:#fff}.recordButton_main[data-v-16750db8]{padding-top:1px;touch-action:none;display:flex;align-items:center;justify-content:center;width:35px;height:35px;line-height:35px!important;background:transparent;border-radius:50%;outline:none;position:relative}.recordButton_main.active[data-v-16750db8]{background:rgb(var(--color-bg-ac));animation:pulse-16750db8 1.2s infinite}.recordButton_main.active .icon[data-v-16750db8]{color:rgb(var(--text-on-bg-shadow-color))}.recordButton_main.active[data-v-16750db8]:before{position:absolute;left:-30px;bottom:-30px;right:-30px;top:-30px;content:\\\"\\\";border-radius:50%;border:35px solid rgba(var(--color-bg-ac),.5);animation:pulse-16750db8 1.2s infinite}.recordButton_main.disabled .icon[data-v-16750db8]{color:rgb(var(--neutral-grad-2))}.recordButton_main.outside[data-v-16750db8],.recordButton_stop[data-v-16750db8]{background:rgb(var(--color-bad))}.recordButton_stop[data-v-16750db8]{color:rgb(var(--text-on-bg-shadow-color));font-size:.7em}@keyframes pulse-16750db8{0%{opacity:1}50%{opacity:.8}to{opacity:1}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#chatInput[data-v-efa2321a]{padding-bottom:.5em}[data-v-efa2321a] #modal.minimized .modal-wrapper{left:0}[data-v-efa2321a] .previewWrapper{padding-left:.5em!important;padding-right:.5em!important}.inputWrapper[data-v-efa2321a]{display:flex;position:relative}.inputWrapper .left[data-v-efa2321a]{width:35px;display:flex;justify-content:flex-end;align-items:center;text-align:center}.inputWrapper .left.donation+.center[data-v-efa2321a]{margin:0 0 0 .25em}.inputWrapper .left .iconbutton[data-v-efa2321a]{display:flex;align-items:center;justify-content:center;height:35px;width:35px;-webkit-tap-highlight-color:transparent}.inputWrapper .left .iconbutton.donate[data-v-efa2321a]{border:1px solid rgba(var(--neutral-grad-0),.9);border-radius:12px}.inputWrapper .left .icon.donate[data-v-efa2321a]{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNy4yNTggMS45NzlMMTUuMTgyIDBsLTIuNDU3IDIuNTc5YTcuODUgNy44NSAwIDAwLTQuMDk2LTEuMTQ1Yy0xLjMwMiAwLTIuNTMuMzE1LTMuNjEyLjg3NEwyLjgxNyAwIC43NDIgMS45OCAyLjc0IDQuMDc1QTcuODU4IDcuODU4IDAgMDAuNzQxIDkuMzIxYzAgMS44NTQuNjQgMy41NTkgMS43MSA0LjkwNWwtMS43MSAxLjc5NUwyLjgxOCAxOGwxLjc5OC0xLjg4N2E3Ljg1MiA3Ljg1MiAwIDAwNC4wMTMgMS4wOTYgNy44NSA3Ljg1IDAgMDA0LjQ3NC0xLjM5TDE1LjE4MiAxOGwyLjA3Ni0xLjk3OS0yLjEyNy0yLjIzM2E3Ljg1IDcuODUgMCAwMDEuMzg2LTQuNDY3YzAtMS44Mi0uNjE3LTMuNDk2LTEuNjUyLTQuODNsMi4zOTMtMi41MTJ6TTMuNTU1IDkuMzJhNS4wNzQgNS4wNzQgMCAxMDEwLjE0OCAwIDUuMDc0IDUuMDc0IDAgMDAtMTAuMTQ4IDB6IiBmaWxsPSIjMDBBNEZGIi8+PC9zdmc+) no-repeat 50% 50%;background-size:contain;flex:1;font-size:1em;text-indent:-9999px;overflow:hidden}.inputWrapper .extended[data-v-efa2321a]{width:70px;margin-left:7px}.inputWrapper .leftdummy[data-v-efa2321a]{width:.5em}.inputWrapper>div[data-v-efa2321a]{transition:.3s}.inputWrapper .center[data-v-efa2321a]{max-height:110px;max-width:100%;display:flex;justify-content:space-between;align-items:center;flex-grow:1;border:1px solid transparent;border-radius:30px;background:rgb(var(--background-main))}.inputWrapper input[data-v-efa2321a]{border:1px solid rgb(var(--neutral-grad-0));background:rgba(var(--background-main),.5);border-radius:30px;width:100%;padding:.5em 1em}.notready[data-v-efa2321a],.waitjoined[data-v-efa2321a]{padding:.5em 0;text-align:center}.waitjoined span[data-v-efa2321a]{font-size:.8em}.greetings[data-v-efa2321a]{padding:.5em 0}.greetings[data-v-efa2321a],[data-v-efa2321a] .iconWrapper{text-align:center}.menu-item[data-v-efa2321a]{padding:.5em;background:rgb(var(--background-total-theme));line-height:44px;border-radius:5px;display:flex}.menu-item .title[data-v-efa2321a]{flex-grow:2;padding-right:44px;text-align:center}.menu-item .iconWrapper[data-v-efa2321a]{width:44px}.tipusers[data-v-efa2321a]{position:absolute;max-height:300px;border-radius:.5em;border:1px solid rgba(var(--neutral-grad-0),.9);overflow-y:overlay;background-color:rgba(var(--background-total-theme),.95);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);padding:.25em 0;bottom:100%;margin-bottom:.5em;left:.25em;right:.25em}.tipusers .previewWrapperExt[data-v-efa2321a]{border-radius:.75em;margin-left:.25em;margin-right:.25em;padding-top:.25em;padding-bottom:.25em}.tipusers .previewWrapperExt[data-v-efa2321a] .previewWrapper{padding-left:.25em!important;padding-right:.25em!important}.tipusers .previewWrapperExt.selected[data-v-efa2321a]{background:rgb(var(--background-main))}.disabled[data-v-efa2321a]{display:flex;justify-content:center;align-items:center;width:35px;height:35px;color:rgb(var(--neutral-grad-3))}.disabled i[data-v-efa2321a]{padding-top:1px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=style&index=0&id=7d91b437&prod&scoped=true&lang=sass&\"","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=style&index=0&id=67c83356&prod&lang=sass&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=style&index=0&id=67c83356&prod&lang=sass&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"74bf3874\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".emoji-mart,.emoji-mart *{box-sizing:border-box;line-height:1.15}.emoji-mart{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,sans-serif;font-size:16px;display:flex;flex-direction:column;height:420px;color:#222427;border:1px solid #d9d9d9;border-radius:5px;background:#fff}.emoji-mart-emoji{padding:6px;border:none;background:none;box-shadow:none}.emoji-mart-emoji span{display:inline-block}.emoji-mart-preview-emoji .emoji-mart-emoji span{width:38px;height:38px;font-size:32px}.emoji-type-native{font-family:Segoe UI Emoji,Segoe UI Symbol,Segoe UI,Apple Color Emoji,Twemoji Mozilla,Noto Color Emoji,EmojiOne Color,Android Emoji;word-break:keep-all}.emoji-type-image{background-size:5700%}.emoji-type-image.emoji-set-apple{background-image:url(https://unpkg.com/emoji-datasource-apple@6.0.1/img/apple/sheets-256/64.png)}.emoji-type-image.emoji-set-facebook{background-image:url(https://unpkg.com/emoji-datasource-facebook@6.0.1/img/facebook/sheets-256/64.png)}.emoji-type-image.emoji-set-google{background-image:url(https://unpkg.com/emoji-datasource-google@6.0.1/img/google/sheets-256/64.png)}.emoji-type-image.emoji-set-twitter{background-image:url(https://unpkg.com/emoji-datasource-twitter@6.0.1/img/twitter/sheets-256/64.png)}.emoji-mart-bar{border:0 solid #d9d9d9}.emoji-mart-bar:first-child{border-bottom-width:1px;border-top-left-radius:5px;border-top-right-radius:5px}.emoji-mart-bar:last-child{border-top-width:1px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.emoji-mart-scroll{position:relative;overflow-y:scroll;flex:1;padding:0 6px 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-anchors{display:flex;flex-direction:row;justify-content:space-between;padding:0 6px;color:#858585;line-height:0}.emoji-mart-anchor{position:relative;display:block;flex:1 1 auto;text-align:center;padding:12px 4px;overflow:hidden;transition:color .1s ease-out;border:none;background:none;box-shadow:none}.emoji-mart-anchor-selected,.emoji-mart-anchor:hover{color:#464646}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0}.emoji-mart-anchor-bar{position:absolute;bottom:-3px;left:0;width:100%;height:3px;background-color:#464646}.emoji-mart-anchors i{display:inline-block;width:100%;max-width:22px}.emoji-mart-anchors svg{fill:currentColor;max-height:18px}.emoji-mart .scroller{height:250px;position:relative;flex:1;padding:0 6px 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-search{margin-top:6px;padding:0 6px}.emoji-mart-search input{font-size:16px;display:block;width:100%;padding:.2em .6em;border-radius:25px;border:1px solid #d9d9d9;outline:0}.emoji-mart-search-results{height:250px;overflow-y:scroll}.emoji-mart-category{position:relative}.emoji-mart-category .emoji-mart-emoji span{z-index:1;position:relative;text-align:center;cursor:default}.emoji-mart-category .emoji-mart-emoji:hover:before,.emoji-mart-emoji-selected:before{z-index:0;content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;border-radius:100%;opacity:0;opacity:1}.emoji-mart-category-label{position:sticky;top:0}.emoji-mart-static .emoji-mart-category-label{z-index:2;position:relative}.emoji-mart-category-label h3{display:block;font-size:16px;width:100%;font-weight:500;padding:5px 6px;background-color:#fff;background-color:hsla(0,0%,100%,.95)}.emoji-mart-emoji{position:relative;display:inline-block;font-size:0}.emoji-mart-no-results{font-size:14px;text-align:center;padding-top:70px;color:#858585}.emoji-mart-no-results .emoji-mart-category-label{display:none}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:.2em}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none}.emoji-mart-preview{position:relative;height:70px}.emoji-mart-preview-data,.emoji-mart-preview-emoji,.emoji-mart-preview-skins{position:absolute;top:50%;transform:translateY(-50%)}.emoji-mart-preview-emoji{left:12px}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all}.emoji-mart-preview-skins{right:30px;text-align:right}.emoji-mart-preview-name{font-size:14px}.emoji-mart-preview-shortname{font-size:12px;color:#888}.emoji-mart-preview-emoticon+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-shortname{margin-left:.5em}.emoji-mart-preview-emoticon{font-size:11px;color:#bbb}.emoji-mart-title span{display:inline-block;vertical-align:middle}.emoji-mart-title .emoji-mart-emoji{padding:0}.emoji-mart-title-label{color:#999a9c;font-size:21px;font-weight:300}.emoji-mart-skin-swatches{font-size:0;padding:2px 0;border:1px solid #d9d9d9;border-radius:12px;background-color:#fff}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch{width:16px;padding:0 2px}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after{opacity:.75}.emoji-mart-skin-swatch{display:inline-block;width:0;vertical-align:middle;transition-property:width,padding;transition-duration:.125s;transition-timing-function:ease-out}.emoji-mart-skin-swatch:first-child{transition-delay:0s}.emoji-mart-skin-swatch:nth-child(2){transition-delay:.03s}.emoji-mart-skin-swatch:nth-child(3){transition-delay:.06s}.emoji-mart-skin-swatch:nth-child(4){transition-delay:.09s}.emoji-mart-skin-swatch:nth-child(5){transition-delay:.12s}.emoji-mart-skin-swatch:nth-child(6){transition-delay:.15s}.emoji-mart-skin-swatch-selected{position:relative;width:16px;padding:0 2px}.emoji-mart-skin-swatch-selected:after{content:\\\"\\\";position:absolute;top:50%;left:50%;width:4px;height:4px;margin:-2px 0 0 -2px;background-color:#fff;border-radius:100%;pointer-events:none;opacity:0;transition:opacity .2s ease-out}.emoji-mart-skin{display:inline-block;width:100%;padding-top:100%;max-width:12px;border-radius:100%}.emoji-mart-skin-tone-1{background-color:#ffc93a}.emoji-mart-skin-tone-2{background-color:#fadcbc}.emoji-mart-skin-tone-3{background-color:#e0bb95}.emoji-mart-skin-tone-4{background-color:#bf8f68}.emoji-mart-skin-tone-5{background-color:#9b643d}.emoji-mart-skin-tone-6{background-color:#594539}.emoji-mart .vue-recycle-scroller{position:relative}.emoji-mart .vue-recycle-scroller.direction-vertical:not(.page-mode){overflow-y:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal:not(.page-mode){overflow-x:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal{display:flex}.emoji-mart .vue-recycle-scroller__slot{flex:auto 0 0}.emoji-mart .vue-recycle-scroller__item-wrapper{flex:1;box-sizing:border-box;overflow:hidden;position:relative}.emoji-mart .vue-recycle-scroller.ready .vue-recycle-scroller__item-view{position:absolute;top:0;left:0;will-change:transform}.emoji-mart .vue-recycle-scroller.direction-vertical .vue-recycle-scroller__item-wrapper{width:100%}.emoji-mart .vue-recycle-scroller.direction-horizontal .vue-recycle-scroller__item-wrapper{height:100%}.emoji-mart .vue-recycle-scroller.ready.direction-vertical .vue-recycle-scroller__item-view{width:100%}.emoji-mart .vue-recycle-scroller.ready.direction-horizontal .vue-recycle-scroller__item-view{height:100%}.emoji-mart .resize-observer[data-v-b329ee4c]{border:none;background-color:transparent;opacity:0}.emoji-mart .resize-observer[data-v-b329ee4c],.emoji-mart .resize-observer[data-v-b329ee4c] object{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;pointer-events:none;display:block;overflow:hidden}.emoji-mart-search .hidden{display:none;visibility:hidden}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=16750db8&prod&scoped=true&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"e4e3316e\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=efa2321a&prod&scoped=true&lang=sass&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".wrapper[data-v-67c83356]{position:relative}.fas[data-v-67c83356]{position:absolute;right:-8px;top:-8px}.preview-picture[data-v-67c83356]{width:50px;height:50px;border-radius:10px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=style&index=1&id=7d91b437&prod&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"adbd9d64\", content, shadowRoot)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=style&index=0&id=7d91b437&prod&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"65e3ccb8\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=16750db8&prod&scoped=true&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".input_component[data-v-7d91b437]{width:100%;display:flex;justify-content:center;align-items:center;padding:0 1em;padding-right:0}.input_component[data-v-7d91b437] .emoji-mart .emoji-mart-emoji{width:12.5%;height:40px;cursor:pointer}.input_component[data-v-7d91b437] .emoji-mart .emoji-mart-emoji span{cursor:pointer}.input_component[data-v-7d91b437] .emoji-mart .emoji-mart-emoji:hover{background:none;box-shadow:none}.input_component[data-v-7d91b437] .emoji-mart .emoji-mart-emoji:hover:before{display:none}.input_component .input-wrapper[data-v-7d91b437]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;width:100%}.input_component .right[data-v-7d91b437]{margin:0 .5em}.input_component .iconbutton .leftdummy[data-v-7d91b437]{width:20px}.input_component .iconbutton .rightdummy[data-v-7d91b437]{width:35px}.input_component .iconbutton .idummy[data-v-7d91b437]{width:100%;height:35px;line-height:35px}.input_component .iconbutton .idummy i[data-v-7d91b437]{line-height:35px!important}.input_component .previews[data-v-7d91b437]{width:100%;max-width:198px;height:30px;display:flex;align-items:flex-start;padding:2px 0;overflow:hidden}.input_component .previews[data-v-7d91b437]:first-child{margin-left:0}.input_component .textarea[data-v-7d91b437]{width:100%;display:flex;justify-content:flex-start;align-items:center}.chat-input[data-v-7d91b437]{background:transparent;border:0;width:100%;max-height:100px;overflow-y:auto;resize:none;line-height:inherit}.chat-input[data-v-7d91b437]::-webkit-scrollbar{width:0!important}.fade-enter-active[data-v-7d91b437],.fade-leave-active[data-v-7d91b437]{transition:all .2s ease-in}.fade-enter[data-v-7d91b437],.fade-leave-to[data-v-7d91b437]{opacity:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=style&index=1&id=7d91b437&prod&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".recordProgress[data-v-5df29904]{display:flex;height:20px;justify-content:flex-start;padding:0 1em;align-items:center;max-width:80%;flex-grow:2}.recordProgress .indicatorWrapper[data-v-5df29904]{min-width:20px;width:20px;margin-right:1em;display:flex;justify-content:center;align-items:center}.recordProgress .indicator[data-v-5df29904]{height:6px;width:6px;background:#ff033e;border-radius:50%}.recordProgress .indicator.recording[data-v-5df29904]{animation:pulse-5df29904 1.2s ease infinite}.recordProgress .del[data-v-5df29904]{min-width:20px;cursor:pointer;display:flex;justify-content:center;align-items:center;width:20px;height:20px;margin-right:1em}.recordProgress .del i[data-v-5df29904]{color:red;font-size:13px}.recordProgress .timer[data-v-5df29904]{margin-right:1em}.recordProgress .graph[data-v-5df29904]{margin:0 auto;width:100px;overflow:hidden;border-radius:15px}.cancel[data-v-5df29904],.recordProgress .graph[data-v-5df29904]{display:flex;justify-content:center}.cancel[data-v-5df29904]{position:absolute;left:0;right:0;top:0;bottom:0;background:rgb(var(--background-secondary-theme));opacity:0;text-align:center;align-items:center}.cancel span[data-v-5df29904]{white-space:nowrap;font-size:.9em}@keyframes pulse-5df29904{0%{opacity:1}50%{opacity:.1}to{opacity:1}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=5df29904&prod&scoped=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"noswipepnt\",attrs:{\"id\":\"chatInput\"}},[(_vm.ready)?_c('div',{staticClass:\"work\"},[(_vm.chat)?_c('div',{staticClass:\"inputWrapper\",class:{ donate: _vm.donate }},[(_vm.tipusers.length)?_c('div',{staticClass:\"tipusers\"},_vm._l((_vm.tipusers),function(user,i){return _c('div',{key:user.id,staticClass:\"previewWrapperExt\",class:{ selected: _vm.tipuserindex == i },on:{\"click\":function($event){return _vm.insertuser(user)}}},[_c('preview',{attrs:{\"contact\":user,\"mode\":\"\"}})],1)}),0):_vm._e(),_c('div',{staticClass:\"center\"},[(_vm.voiceEnable && (_vm.isRecording || _vm.record))?_c('record-progress',{attrs:{\"recordTime\":_vm.recordTime,\"isRecording\":_vm.isRecording,\"rmsData\":_vm.recordRmsData,\"opacity\":_vm.cancelOpacity},on:{\"onClear\":_vm.clear}}):_c('InputField',{ref:\"newinput\",attrs:{\"donate\":_vm.donate,\"storagekey\":'chatinput' + _vm.chat.roomId,\"tipusers\":_vm.tipusers,\"me\":_vm.me},on:{\"chatMessage\":_vm.sendinput,\"emptyInput\":_vm.emitInputData,\"FilledInput\":_vm.HideUploadPic,\"base64\":_vm.pasteImage,\"focused\":_vm.focused,\"tipsearchrequest\":_vm.tipBySearch,\"browsetip\":_vm.browsetip,\"selectcurrenttip\":_vm.selectcurrenttip,\"donateaction\":_vm.sendtransactionWrapper}}),(!_vm.streamMode && _vm.upload && _vm.chat)?_c('div',{staticClass:\"left\",class:{ extended: _vm.voiceEnable }},[(!_vm.isRecording && !_vm.record)?_c('div',{staticClass:\"iconbutton\",on:{\"click\":_vm.showinputmenu}},[_c('i',{staticClass:\"icon fas fa-plus\"})]):_vm._e(),(_vm.voiceEnable)?[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRecording || !_vm.record),expression:\"isRecording || !record\"}],staticClass:\"iconbutton\"},[_c('recordVoice',{attrs:{\"prepareRecording\":_vm.prepareRecording ? true : false,\"isRecording\":_vm.isRecording,\"disabled\":_vm.microphoneDisabled},on:{\"onRecordingStart\":_vm.initRecording,\"onRecordingStop\":_vm.stopRecording,\"onClear\":_vm.clear,\"canceling\":_vm.setOpacity}})],1)]:_vm._e(),(!_vm.isRecording && _vm.record)?_c('div',{staticClass:\"iconbutton\",on:{\"click\":(e) => {\n\t\t\t\t\t\t\t\t_vm.sendVoiceMessage();\n\t\t\t\t\t\t\t}}},[_vm._m(0)]):_vm._e()],2):_vm._e()],1),(_vm.donate)?_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"count\"},[_c('i',{staticClass:\"icon donate\"},[_vm._v(\"Donate\")]),_c('span',{staticClass:\"sum\"},[_vm._v(_vm._s(_vm.donate.value)+\" PKOIN\")])]),_c('i',{staticClass:\"icon remove fa fa-times\",on:{\"click\":_vm.removetransaction}})]):_vm._e()]):_vm._e()]):_c('div',{staticClass:\"notready\"},[_c('linepreloader')],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('i',{staticClass:\"icon fas fa-paper-plane\"})])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"input_component\"},[_c('div',{staticClass:\"input-wrapper\"},[_c('div',{staticClass:\"textarea\"},[_c('textarea',{ref:\"textarea\",staticClass:\"chat-input\",attrs:{\"id\":\"textInput\",\"type\":\"text\",\"row\":\"1\",\"spellcheck\":\"true\",\"autocorrect\":\"on\",\"placeholder\":_vm.$t('caption.sendmessage')},domProps:{\"value\":_vm.text},on:{\"focus\":_vm.focused,\"blur\":_vm.blured,\"keydown\":_vm.keydown,\"input\":_vm.textchange,\"keyup\":_vm.keyup,\"click\":_vm.keyup,\"paste\":_vm.paste_image}}),(!_vm.streamMode && !_vm.mobile && _vm.emojiIndex)?_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[_c('picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display_emoji),expression:\"display_emoji\"},{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.close_emoji_picker),expression:\"close_emoji_picker\"}],style:({\n\t\t\t\t\t\twidth: 'auto',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbottom: '48px',\n\t\t\t\t\t\tright: '0px',\n\t\t\t\t\t\tleft : '0px',\n\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\tfontFamily: 'Segoe UI',\n\t\t\t\t\t}),attrs:{\"data\":_vm.emojiIndex,\"exclude\":_vm.exclude,\"showPreview\":false,\"showSearch\":false},on:{\"select\":_vm.insert_emoji}})],1):_vm._e()],1)]),(!_vm.streamMode && !_vm.mobile)?_c('div',{staticClass:\"iconbutton emojipicker\",on:{\"click\":function($event){return _vm.toggle_emoji_picker()}}},[_c('div',{staticClass:\"leftdummy\"},[_c('div',{staticClass:\"idummy\"},[(_vm.display_emoji)?_c('i',{staticClass:\"fas fa-times\"}):_c('i',{staticClass:\"far fa-smile\"})])])]):_vm._e(),(_vm.streamMode && !_vm.me)?_c('div',{staticClass:\"iconbutton\",attrs:{\"disabled\":_vm.donate},on:{\"click\":_vm.donateAction}},[_vm._m(0)]):_vm._e(),(_vm.send)?_c('div',{staticClass:\"iconbutton\",on:{\"click\":function($event){return _vm.send_text($event)}}},[_vm._m(1)]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"rightdummy\"},[_c('div',{staticClass:\"idummy\"},[_c('i',{staticClass:\"icon donate\"},[_vm._v(\"Donate\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"rightdummy\"},[_c('div',{staticClass:\"idummy\"},[_c('i',{staticClass:\"far fa-paper-plane\"})])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.is_opened)?_c('div',{staticClass:\"wrapper\"},[_c('img',{staticClass:\"preview-picture\",attrs:{\"src\":_vm.base64,\"alt\":\"picture preview\"}}),_c('i',{staticClass:\"fas fa-times fa-sm\",on:{\"click\":_vm.hide}})]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div v-if=\"is_opened\" class=\"wrapper\">\r\n\t\t<img class=\"preview-picture\" :src=\"base64\" alt=\"picture preview\" />\r\n\t\t<i @click=\"hide\" class=\"fas fa-times fa-sm\"></i>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"picturePreview\",\r\n\tprops: [\"base64\"],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tis_opened: true,\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\thide() {\r\n\t\t\tthis.is_opened = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n.wrapper\r\n    position: relative\r\n\r\n.fas\r\n    position: absolute\r\n    right: -8px\r\n    top: -8px\r\n\r\n.preview-picture\r\n    width: 50px\r\n    height: 50px\r\n    border-radius: 10px\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./picturePreview.vue?vue&type=template&id=67c83356&scoped=true&\"\nimport script from \"./picturePreview.vue?vue&type=script&lang=js&\"\nexport * from \"./picturePreview.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./picturePreview.vue?vue&type=style&index=0&id=67c83356&prod&lang=sass&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"67c83356\",\n  null\n  ,true\n)\n\nexport default component.exports","<template>\r\n\t<div class=\"input_component\">\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<div class=\"textarea\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tid=\"textInput\"\r\n\t\t\t\t\t:value=\"text\"\r\n\t\t\t\t\tref=\"textarea\"\r\n\t\t\t\t\tclass=\"chat-input\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\trow=\"1\"\r\n\t\t\t\t\tspellcheck=\"true\"\r\n\t\t\t\t\tautocorrect=\"on\"\r\n\t\t\t\t\t@focus=\"focused\"\r\n\t\t\t\t\t@blur=\"blured\"\r\n\t\t\t\t\t@keydown=\"keydown\"\r\n\t\t\t\t\t@input=\"textchange\"\r\n\t\t\t\t\t@keyup=\"keyup\"\r\n\t\t\t\t\t@click=\"keyup\"\r\n\t\t\t\t\t@paste=\"paste_image\"\r\n\t\t\t\t\t:placeholder=\"$t('caption.sendmessage')\"\r\n\t\t\t\t></textarea>\r\n\t\t\t\t<transition name=\"fade\" mode=\"out-in\" v-if=\"!streamMode && !mobile && emojiIndex\">\r\n\t\t\t\t\t<picker\r\n\t\t\t\t\t\t:data=\"emojiIndex\"\r\n\t\t\t\t\t\tv-show=\"display_emoji\"\r\n\t\t\t\t\t\t@select=\"insert_emoji\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\twidth: 'auto',\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tbottom: '48px',\r\n\t\t\t\t\t\t\tright: '0px',\r\n\t\t\t\t\t\t\tleft : '0px',\r\n\t\t\t\t\t\t\tfontSize: '0.8em',\r\n\t\t\t\t\t\t\tfontFamily: 'Segoe UI',\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t:exclude=\"exclude\"\r\n\t\t\t\t\t\t:showPreview=\"false\"\r\n\t\t\t\t\t\t:showSearch=\"false\"\r\n\t\t\t\t\t\tv-click-outside=\"close_emoji_picker\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</transition>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"iconbutton emojipicker\"\r\n\t\t\t@click=\"toggle_emoji_picker()\"\r\n\t\t\tv-if=\"!streamMode && !mobile\"\r\n\t\t>\r\n\t\t\t<div class=\"leftdummy\">\r\n\t\t\t\t<div class=\"idummy\">\r\n\t\t\t\t\t<i v-if=\"display_emoji\" class=\"fas fa-times\"></i>\r\n\t\t\t\t\t<i v-else class=\"far fa-smile\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"iconbutton\"\r\n\t\t\tv-if=\"streamMode && !me\"\r\n\t\t\t@click=\"donateAction\"\r\n\t\t\t:disabled=\"donate\"\r\n\t\t>\r\n\t\t\t<div class=\"rightdummy\">\r\n\t\t\t\t<div class=\"idummy\">\r\n\t\t\t\t\t<i class=\"icon donate\">Donate</i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"iconbutton\" v-if=\"send\" @click=\"send_text($event)\">\r\n\t\t\t<div class=\"rightdummy\">\r\n\t\t\t\t<div class=\"idummy\">\r\n\t\t\t\t\t<i class=\"far fa-paper-plane\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Images from \"@/application/utils/images.js\";\r\nimport f from \"@/application/functions\";\r\nimport { Picker, EmojiIndex } from \"emoji-mart-vue-fast\";\r\n\r\nimport vClickOutside from \"v-click-outside\";\r\n\r\nimport picturePreview from \"@/components/chat/input/picturePreview/picturePreview\";\r\n\r\nlet images = new Images();\r\n\r\nexport default {\r\n\tname: \"InputField\",\r\n\tcomponents: {\r\n\t\tPicker,\r\n\t\tpicturePreview,\r\n\t},\r\n\r\n\tdirectives: {\r\n\t\tclickOutside: vClickOutside.directive,\r\n\t},\r\n\r\n\tinject: ['streamMode'],\r\n\r\n\twatch: {\r\n\t\ttext: {\r\n\t\t\timmediately: true,\r\n\t\t\thandler: function (current, prev) {\r\n\t\t\t\tif (current) {\r\n\t\t\t\t\tthis.send = true;\r\n\t\t\t\t\tthis.$emit(\"FilledInput\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.send = false;\r\n\t\t\t\t\tthis.$emit(\"emptyInput\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.textarea_resize();\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsend: false,\r\n\r\n\t\t\tready: false,\r\n\t\t\ttext: \"\",\r\n\t\t\texclude: [\"flags\"],\r\n\t\t\tdisplay_emoji: false,\r\n\t\t\tcontent_height: 26,\r\n\t\t\tpasted_data: [],\r\n\t\t\tblock: false,\r\n\r\n\t\t\tupload: {\r\n\t\t\t\tmultiple: true,\r\n\t\t\t\textensions: [\"image/jpg\", \"image/jpeg\", \"image/png\"],\r\n\t\t\t\timages: {\r\n\t\t\t\t\tresize: {\r\n\t\t\t\t\t\ttype: \"fit\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thidden_previews: null,\r\n\t\t\temojiIndex: null,\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tmobile: function () {\r\n\t\t\treturn !this.$store.state.pocketnet && this.$store.state.mobile;\r\n\t\t}\r\n\r\n\t\t/*emojiIndex: function () {\r\n\r\n\r\n\r\n\t\t\treturn window.emojiIndex\r\n\r\n\t\t}*/\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tprepareemoji: function () {\r\n\t\t\tif (!this.mobile) {\r\n\t\t\t\tif (window.emojiIndex) this.emojiIndex = window.emojiIndex;\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar emojidata = require(\"emoji-mart-vue-fast/data/all.json\");\r\n\t\t\t\t\twindow.emojiIndex = new EmojiIndex(emojidata);\r\n\t\t\t\t\tthis.emojiIndex = window.emojiIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetText: function (text) {\r\n\t\t\tthis.text = text;\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.textarea_resize();\r\n\t\t\t\tthis.focus();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tfocused: function () {\r\n\t\t\tthis.$emit(\"focused\");\r\n\t\t},\r\n\r\n\t\ttextchange: function (e) {\r\n\t\t\tthis.text = e.target.value || \"\";\r\n\t\t},\r\n\r\n\t\tsavetextinstorage: function () {\r\n\t\t\tif (this.storagekey) {\r\n\t\t\t\tlocalStorage[this.storagekey] = this.text || \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tsend_empty_array() {\r\n\t\t\tthis.$emit(\"userSearched\", []);\r\n\t\t},\r\n\r\n\t\tfocus() {\r\n\t\t\tthis.$refs[\"textarea\"].focus();\r\n\t\t},\r\n\r\n\t\tblur() {\r\n\t\t\tthis.$refs[\"textarea\"].blur();\r\n\t\t},\r\n\r\n\t\tblurifempty() {\r\n\t\t\tif (!this.text) this.blur();\r\n\t\t},\r\n\r\n\t\tclose_emoji_picker(event) {\r\n\t\t\tif (event.target.localName !== \"i\") {\r\n\t\t\t\tif (event.target.localName !== \"matrix-element\") {\r\n\t\t\t\t\tthis.display_emoji = false;\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttextarea_resize() {\r\n\t\t\tif (!this.text) {\r\n\t\t\t\tthis.textarea_resize_reset();\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.textarea.style.height = 1 + \"px\";\r\n\t\t\t\tthis.$refs.textarea.style.height =\r\n\t\t\t\t\tthis.$refs.textarea.scrollHeight + \"px\";\r\n\t\t\t\t//this.display_emoji = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttextarea_resize_reset() {\r\n\t\t\tthis.$refs.textarea.style.height = this.content_height + \"px\";\r\n\t\t},\r\n\t\ttoggle_emoji_picker() {\r\n\t\t\tthis.display_emoji = !this.display_emoji;\r\n\t\t},\r\n\r\n\t\tsend_text(event) {\r\n\t\t\tif (this.text && this.text !== \"\\n\") {\r\n\t\t\t\tthis.display_emoji = false;\r\n\t\t\t\tthis.$emit(\"chatMessage\", this.text);\r\n\t\t\t\tthis.$emit(\"emptyInput\");\r\n\t\t\t\tthis.send = false;\r\n\t\t\t\tthis.text = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\t\t},\r\n\r\n\t\tinsert_emoji(emoji) {\r\n\t\t\tthis.text += emoji.native;\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\t\t},\r\n\t\tpaste_image(event) {\r\n\t\t\tif (!this.streamMode) this.get_base64(event);\r\n\t\t},\r\n\t\tget_base64(event) {\r\n\t\t\tthis.pasted_data = event.clipboardData.items;\r\n\r\n\t\t\tif (this.pasted_data.length) {\r\n\t\t\t\tfor (let index in this.pasted_data) {\r\n\t\t\t\t\tlet item = this.pasted_data[index];\r\n\r\n\t\t\t\t\tlet correct_image_type = this.upload.extensions.includes(item.type);\r\n\r\n\t\t\t\t\tif (correct_image_type) {\r\n\t\t\t\t\t\tvar blob = item.getAsFile();\r\n\t\t\t\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\t\t\t\treader.onload = (event) => {\r\n\t\t\t\t\t\t\tthis.$dialog\r\n\t\t\t\t\t\t\t\t.confirm(\"Do you really want to send attachment?\", {\r\n\t\t\t\t\t\t\t\t\tokText: \"Yes\",\r\n\t\t\t\t\t\t\t\t\tcancelText: \"No, cancel\",\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t.then((dialog) => {\r\n\t\t\t\t\t\t\t\t\tvar base64 = event.target.result;\r\n\t\t\t\t\t\t\t\t\tthis.resize_image(base64, item.type);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treader.readAsDataURL(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tresize_image(data, type) {\r\n\t\t\treturn images\r\n\t\t\t\t.autorotation(null, data)\r\n\t\t\t\t.then((base64) => {\r\n\t\t\t\t\tlet _type = this.upload.images.resize.type || \"def\";\r\n\r\n\t\t\t\t\treturn images.resize[_type](base64, 1024, 1024, type, 0.9)\r\n\t\t\t\t\t\t.then((base64) => {\r\n\t\t\t\t\t\t\tthis.$emit(\"base64\", base64);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((error) => console.error(\"Failed to resize image\", error));\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => console.error(\"Failed to resize image\", error));\r\n\t\t},\r\n\r\n\t\tgetsearchposition(position) {\r\n\t\t\tif (!position.start || !this.text.length) return null;\r\n\r\n\t\t\tvar sposition = { start: position.start, middle: 0, end: position.end };\r\n\r\n\t\t\tvar i = position.start;\r\n\t\t\tvar dg = false;\r\n\t\t\tvar br = false;\r\n\r\n\t\t\tvar reg = /[a-zA-Z0-9]{1}/;\r\n\r\n\t\t\tsposition.middle = i;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tvar char = this.text[i];\r\n\r\n\t\t\t\tif (char == \"@\") {\r\n\t\t\t\t\tif (position.start == i || (i > 0 && reg.test(this.text[i - 1]))) {\r\n\t\t\t\t\t\tbr = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdg = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (reg.test(char)) {\r\n\t\t\t\t\t\tsposition.start = i;\r\n\t\t\t\t\t} else br = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti--;\r\n\t\t\t} while (i >= 0 && i <= position.start && !dg && !br);\r\n\r\n\t\t\tif (!dg) {\r\n\t\t\t\tsposition = null;\r\n\t\t\t} else {\r\n\t\t\t\tbr = false;\r\n\t\t\t\ti = position.end;\r\n\r\n\t\t\t\tdo {\r\n\t\t\t\t\tif (!this.text[i] || reg.test(this.text[i])) {\r\n\t\t\t\t\t\tsposition.end = i;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbr = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti++;\r\n\t\t\t\t} while (i <= this.text.length && !br);\r\n\t\t\t}\r\n\r\n\t\t\treturn sposition;\r\n\t\t},\r\n\r\n\t\tgetsearch(position) {\r\n\t\t\tvar sposition = this.getsearchposition(position);\r\n\r\n\t\t\tif (!sposition) return null;\r\n\r\n\t\t\treturn this.text.substring(sposition.start, sposition.middle);\r\n\t\t},\r\n\r\n\t\tkeydown(event) {\r\n\t\t\tif (event.keyCode === 40 || event.keyCode === 38) {\r\n\t\t\t\tif (this.tipusers && this.tipusers.length) {\r\n\t\t\t\t\tthis.$emit(\"browsetip\", event.keyCode === 40 ? true : false);\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (event.keyCode === 39 || event.keyCode === 13) {\r\n\t\t\t\tif (this.tipusers && this.tipusers.length) {\r\n\t\t\t\t\tthis.$emit(\"selectcurrenttip\");\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (event.keyCode === 13) {\r\n\t\t\t\tif (this.mobile) {\r\n\t\t\t\t\tthis.text = this.text + \"\\n\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.send_text(event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeyup(event) {\r\n\t\t\tif (this.block) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar position = f.getCaretPosition(this.$refs[\"textarea\"]);\r\n\r\n\t\t\tvar value = this.getsearch(position);\r\n\r\n\t\t\tthis.$emit(\"tipsearchrequest\", value);\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\t\t},\r\n\r\n\t\tblured() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.$emit(\"tipsearchrequest\", null);\r\n\t\t\t}, 300);\r\n\t\t},\r\n\r\n\t\tinserttip(text) {\r\n\t\t\tthis.$emit(\"tipsearchrequest\", null);\r\n\r\n\t\t\tthis.block = true;\r\n\t\t\tthis.$refs[\"textarea\"];\r\n\r\n\t\t\tvar position = this.getsearchposition(\r\n\t\t\t\tf.getCaretPosition(this.$refs[\"textarea\"])\r\n\t\t\t);\r\n\r\n\t\t\tthis.text =\r\n\t\t\t\tthis.text.substring(0, position.start) +\r\n\t\t\t\ttext +\r\n\t\t\t\tthis.text.substring(position.end + 1);\r\n\r\n\t\t\tif (!this.text[position.end + 1]) {\r\n\t\t\t\tthis.text = this.text + \" \";\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.text[position.end + 1] == \" \") position.end++;\r\n\r\n\t\t\tf.setCaretPosition(\r\n\t\t\t\tthis.$refs[\"textarea\"],\r\n\t\t\t\tposition.end + 1,\r\n\t\t\t\tposition.end + 1\r\n\t\t\t);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.block = false;\r\n\t\t\t}, 350);\r\n\t\t},\r\n\r\n\t\tdonateAction: function () {\r\n\t\t\tthis.$emit(\"donateaction\");\r\n\t\t}\r\n\t},\r\n\r\n\tprops: {\r\n\t\tdonate: Object,\r\n\t\tstoragekey: String,\r\n\t\ttipusers: Array,\r\n\t\tme: Boolean\r\n\t},\r\n\r\n\tcreared() {},\r\n\r\n\tmounted() {\r\n\t\tif (!this.mobile) {\r\n\t\t\tthis.focus();\r\n\t\t}\r\n\r\n\t\tthis.prepareemoji();\r\n\r\n\t\tthis.$refs.textarea.style.height = \"26px\";\r\n\r\n\t\tif (this.storagekey && localStorage[this.storagekey]) {\r\n\t\t\tthis.text = localStorage[this.storagekey];\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"sass\">\r\n.input_component\r\n\twidth: 100%\r\n\tdisplay: flex\r\n\tjustify-content: center\r\n\talign-items: center\r\n\tpadding: 0 2 * $r\r\n\tpadding-right: 0\r\n\r\n\t/deep/ .emoji-mart .emoji-mart-emoji\r\n\t\twidth: 12.5%\r\n\t\theight: 40px\r\n\t\tcursor: pointer\r\n\r\n\t\tspan\r\n\t\t\tcursor: pointer\r\n\r\n\t\t&:hover\r\n\t\t\tbackground: none\r\n\t\t\tbox-shadow: none\r\n\r\n\t\t\t&:before\r\n\t\t\t\tdisplay: none\r\n\r\n\t.input-wrapper\r\n\t\tdisplay: flex\r\n\t\tflex-direction: column\r\n\t\tjustify-content: center\r\n\t\talign-items: flex-start\r\n\t\twidth: 100%\r\n\r\n\t.right\r\n\t\tmargin: 0 $r\r\n\r\n\t.iconbutton\r\n\r\n\t\t.leftdummy\r\n\t\t\twidth: 20px\r\n\r\n\t\t.rightdummy\r\n\t\t\twidth: 35px\r\n\r\n\t\t.idummy\r\n\t\t\twidth: 100%\r\n\t\t\theight: 35px\r\n\t\t\tline-height: 35px\r\n\r\n\t\t\ti\r\n\t\t\t\tline-height: 35px !important\r\n\r\n\t.previews\r\n\t\twidth: 100%\r\n\t\tmax-width: 198px\r\n\t\theight: 30px\r\n\t\tdisplay: flex\r\n\t\talign-items: flex-start\r\n\t\tpadding: 2px 0\r\n\t\toverflow: hidden\r\n\r\n\t\t&:first-child\r\n\t\t\tmargin-left: 0\r\n\r\n\r\n\t.textarea\r\n\t\twidth: 100%\r\n\t\tdisplay: flex\r\n\t\tjustify-content: flex-start\r\n\t\talign-items: center\r\n\r\n.chat-input\r\n\tbackground: transparent\r\n\tborder: 0\r\n\twidth: 100%\r\n\tmax-height: 100px\r\n\t// min-height: 26px\r\n\toverflow-y: auto\r\n\tresize: none\r\n\tline-height: inherit\r\n\r\n\t&::-webkit-scrollbar\r\n\t\twidth: 0 !important\r\n\r\n.fade-enter-active, .fade-leave-active\r\n\ttransition: all .2s ease-in\r\n\r\n.fade-enter, .fade-leave-to\r\n\topacity: 0\r\n</style>\r\n\r\n\r\n<style>\r\n.emoji-mart,\r\n.emoji-mart * {\r\n\tbox-sizing: border-box;\r\n\tline-height: 1.15;\r\n}\r\n\r\n.emoji-mart {\r\n\tfont-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;\r\n\tfont-size: 16px;\r\n\t/* display: inline-block; */\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 420px;\r\n\tcolor: #222427;\r\n\tborder: 1px solid #d9d9d9;\r\n\tborder-radius: 5px;\r\n\tbackground: #fff;\r\n}\r\n\r\n.emoji-mart-emoji {\r\n\tpadding: 6px;\r\n\tposition: relative;\r\n\tdisplay: inline-block;\r\n\tfont-size: 0;\r\n\tborder: none;\r\n\tbackground: none;\r\n\tbox-shadow: none;\r\n}\r\n\r\n.emoji-mart-emoji span {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.emoji-mart-preview-emoji .emoji-mart-emoji span {\r\n\twidth: 38px;\r\n\theight: 38px;\r\n\tfont-size: 32px;\r\n}\r\n\r\n.emoji-type-native {\r\n\tfont-family: 'Segoe UI Emoji', 'Segoe UI Symbol', 'Segoe UI',\r\n\t\t'Apple Color Emoji', 'Twemoji Mozilla', 'Noto Color Emoji', 'EmojiOne Color',\r\n\t\t'Android Emoji';\r\n\tword-break: keep-all;\r\n}\r\n\r\n.emoji-type-image {\r\n\t/* Emoji sheet has 56 columns, see also utils/emoji-data.js, SHEET_COLUMNS variable */\r\n\t/* Here we use (56+1) * 100% to avoid visible edges of nearby icons when scaling for different\r\n\t * screen sizes */\r\n\tbackground-size: 5700%;\r\n}\r\n.emoji-type-image.emoji-set-apple {\r\n\tbackground-image: url(\"https://unpkg.com/emoji-datasource-apple@6.0.1/img/apple/sheets-256/64.png\");\r\n}\r\n.emoji-type-image.emoji-set-facebook {\r\n\tbackground-image: url(\"https://unpkg.com/emoji-datasource-facebook@6.0.1/img/facebook/sheets-256/64.png\");\r\n}\r\n.emoji-type-image.emoji-set-google {\r\n\tbackground-image: url(\"https://unpkg.com/emoji-datasource-google@6.0.1/img/google/sheets-256/64.png\");\r\n}\r\n.emoji-type-image.emoji-set-twitter {\r\n\tbackground-image: url(\"https://unpkg.com/emoji-datasource-twitter@6.0.1/img/twitter/sheets-256/64.png\");\r\n}\r\n\r\n.emoji-mart-bar {\r\n\tborder: 0 solid #d9d9d9;\r\n}\r\n.emoji-mart-bar:first-child {\r\n\tborder-bottom-width: 1px;\r\n\tborder-top-left-radius: 5px;\r\n\tborder-top-right-radius: 5px;\r\n}\r\n.emoji-mart-bar:last-child {\r\n\tborder-top-width: 1px;\r\n\tborder-bottom-left-radius: 5px;\r\n\tborder-bottom-right-radius: 5px;\r\n}\r\n\r\n.emoji-mart-scroll {\r\n\tposition: relative;\r\n\toverflow-y: scroll;\r\n\tflex: 1;\r\n\tpadding: 0 6px 6px 6px;\r\n\tz-index: 0; /* Fix for rendering sticky positioned category labels on Chrome */\r\n\twill-change: transform; /* avoids \"repaints on scroll\" in mobile Chrome */\r\n\t-webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.emoji-mart-anchors {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\tpadding: 0 6px;\r\n\tcolor: #858585;\r\n\tline-height: 0;\r\n}\r\n\r\n.emoji-mart-anchor {\r\n\tposition: relative;\r\n\tdisplay: block;\r\n\tflex: 1 1 auto;\r\n\ttext-align: center;\r\n\tpadding: 12px 4px;\r\n\toverflow: hidden;\r\n\ttransition: color 0.1s ease-out;\r\n\tborder: none;\r\n\tbackground: none;\r\n\tbox-shadow: none;\r\n}\r\n.emoji-mart-anchor:hover,\r\n.emoji-mart-anchor-selected {\r\n\tcolor: #464646;\r\n}\r\n\r\n.emoji-mart-anchor-selected .emoji-mart-anchor-bar {\r\n\tbottom: 0;\r\n}\r\n\r\n.emoji-mart-anchor-bar {\r\n\tposition: absolute;\r\n\tbottom: -3px;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 3px;\r\n\tbackground-color: #464646;\r\n}\r\n\r\n.emoji-mart-anchors i {\r\n\tdisplay: inline-block;\r\n\twidth: 100%;\r\n\tmax-width: 22px;\r\n}\r\n\r\n.emoji-mart-anchors svg {\r\n\tfill: currentColor;\r\n\tmax-height: 18px;\r\n}\r\n\r\n.emoji-mart .scroller {\r\n\theight: 250px;\r\n\tposition: relative;\r\n\tflex: 1;\r\n\tpadding: 0 6px 6px 6px;\r\n\tz-index: 0; /* Fix for rendering sticky positioned category labels on Chrome */\r\n\twill-change: transform; /* avoids \"repaints on scroll\" in mobile Chrome */\r\n\t-webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.emoji-mart-search {\r\n\tmargin-top: 6px;\r\n\tpadding: 0 6px;\r\n}\r\n.emoji-mart-search input {\r\n\tfont-size: 16px;\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\tpadding: 0.2em 0.6em;\r\n\tborder-radius: 25px;\r\n\tborder: 1px solid #d9d9d9;\r\n\toutline: 0;\r\n}\r\n.emoji-mart-search-results {\r\n\theight: 250px;\r\n\toverflow-y: scroll;\r\n}\r\n\r\n.emoji-mart-category {\r\n\tposition: relative;\r\n}\r\n\r\n.emoji-mart-category .emoji-mart-emoji span {\r\n\tz-index: 1;\r\n\tposition: relative;\r\n\ttext-align: center;\r\n\tcursor: default;\r\n}\r\n\r\n.emoji-mart-category .emoji-mart-emoji:hover:before,\r\n.emoji-mart-emoji-selected:before {\r\n\tz-index: 0;\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-color: #f4f4f4;\r\n\tborder-radius: 100%;\r\n\topacity: 0;\r\n}\r\n.emoji-mart-category .emoji-mart-emoji:hover:before,\r\n.emoji-mart-emoji-selected:before {\r\n\topacity: 1;\r\n}\r\n\r\n.emoji-mart-category-label {\r\n\tposition: sticky;\r\n\ttop: 0;\r\n}\r\n.emoji-mart-static .emoji-mart-category-label {\r\n\tz-index: 2;\r\n\tposition: relative;\r\n\t/* position: sticky; */\r\n\t/* position: -webkit-sticky; */\r\n}\r\n\r\n.emoji-mart-category-label h3 {\r\n\tdisplay: block;\r\n\tfont-size: 16px;\r\n\twidth: 100%;\r\n\tfont-weight: 500;\r\n\tpadding: 5px 6px;\r\n\tbackground-color: #fff;\r\n\tbackground-color: rgba(255, 255, 255, 0.95);\r\n}\r\n\r\n.emoji-mart-emoji {\r\n\tposition: relative;\r\n\tdisplay: inline-block;\r\n\tfont-size: 0;\r\n}\r\n\r\n.emoji-mart-no-results {\r\n\tfont-size: 14px;\r\n\ttext-align: center;\r\n\tpadding-top: 70px;\r\n\tcolor: #858585;\r\n}\r\n.emoji-mart-no-results .emoji-mart-category-label {\r\n\tdisplay: none;\r\n}\r\n.emoji-mart-no-results .emoji-mart-no-results-label {\r\n\tmargin-top: 0.2em;\r\n}\r\n.emoji-mart-no-results .emoji-mart-emoji:hover:before {\r\n\tcontent: none;\r\n}\r\n\r\n.emoji-mart-preview {\r\n\tposition: relative;\r\n\theight: 70px;\r\n}\r\n\r\n.emoji-mart-preview-emoji,\r\n.emoji-mart-preview-data,\r\n.emoji-mart-preview-skins {\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\ttransform: translateY(-50%);\r\n}\r\n\r\n.emoji-mart-preview-emoji {\r\n\tleft: 12px;\r\n}\r\n\r\n.emoji-mart-preview-data {\r\n\tleft: 68px;\r\n\tright: 12px;\r\n\tword-break: break-all;\r\n}\r\n\r\n.emoji-mart-preview-skins {\r\n\tright: 30px;\r\n\ttext-align: right;\r\n}\r\n\r\n.emoji-mart-preview-name {\r\n\tfont-size: 14px;\r\n}\r\n\r\n.emoji-mart-preview-shortname {\r\n\tfont-size: 12px;\r\n\tcolor: #888;\r\n}\r\n.emoji-mart-preview-shortname + .emoji-mart-preview-shortname,\r\n.emoji-mart-preview-shortname + .emoji-mart-preview-emoticon,\r\n.emoji-mart-preview-emoticon + .emoji-mart-preview-emoticon {\r\n\tmargin-left: 0.5em;\r\n}\r\n\r\n.emoji-mart-preview-emoticon {\r\n\tfont-size: 11px;\r\n\tcolor: #bbb;\r\n}\r\n\r\n.emoji-mart-title span {\r\n\tdisplay: inline-block;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.emoji-mart-title .emoji-mart-emoji {\r\n\tpadding: 0;\r\n}\r\n\r\n.emoji-mart-title-label {\r\n\tcolor: #999a9c;\r\n\tfont-size: 21px;\r\n\tfont-weight: 300;\r\n}\r\n\r\n.emoji-mart-skin-swatches {\r\n\tfont-size: 0;\r\n\tpadding: 2px 0;\r\n\tborder: 1px solid #d9d9d9;\r\n\tborder-radius: 12px;\r\n\tbackground-color: #fff;\r\n}\r\n\r\n.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch {\r\n\twidth: 16px;\r\n\tpadding: 0 2px;\r\n}\r\n\r\n.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after {\r\n\topacity: 0.75;\r\n}\r\n\r\n.emoji-mart-skin-swatch {\r\n\tdisplay: inline-block;\r\n\twidth: 0;\r\n\tvertical-align: middle;\r\n\ttransition-property: width, padding;\r\n\ttransition-duration: 0.125s;\r\n\ttransition-timing-function: ease-out;\r\n}\r\n\r\n.emoji-mart-skin-swatch:nth-child(1) {\r\n\ttransition-delay: 0s;\r\n}\r\n.emoji-mart-skin-swatch:nth-child(2) {\r\n\ttransition-delay: 0.03s;\r\n}\r\n.emoji-mart-skin-swatch:nth-child(3) {\r\n\ttransition-delay: 0.06s;\r\n}\r\n.emoji-mart-skin-swatch:nth-child(4) {\r\n\ttransition-delay: 0.09s;\r\n}\r\n.emoji-mart-skin-swatch:nth-child(5) {\r\n\ttransition-delay: 0.12s;\r\n}\r\n.emoji-mart-skin-swatch:nth-child(6) {\r\n\ttransition-delay: 0.15s;\r\n}\r\n\r\n.emoji-mart-skin-swatch-selected {\r\n\tposition: relative;\r\n\twidth: 16px;\r\n\tpadding: 0 2px;\r\n}\r\n.emoji-mart-skin-swatch-selected:after {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\twidth: 4px;\r\n\theight: 4px;\r\n\tmargin: -2px 0 0 -2px;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 100%;\r\n\tpointer-events: none;\r\n\topacity: 0;\r\n\ttransition: opacity 0.2s ease-out;\r\n}\r\n\r\n.emoji-mart-skin {\r\n\tdisplay: inline-block;\r\n\twidth: 100%;\r\n\tpadding-top: 100%;\r\n\tmax-width: 12px;\r\n\tborder-radius: 100%;\r\n}\r\n\r\n.emoji-mart-skin-tone-1 {\r\n\tbackground-color: #ffc93a;\r\n}\r\n.emoji-mart-skin-tone-2 {\r\n\tbackground-color: #fadcbc;\r\n}\r\n.emoji-mart-skin-tone-3 {\r\n\tbackground-color: #e0bb95;\r\n}\r\n.emoji-mart-skin-tone-4 {\r\n\tbackground-color: #bf8f68;\r\n}\r\n.emoji-mart-skin-tone-5 {\r\n\tbackground-color: #9b643d;\r\n}\r\n.emoji-mart-skin-tone-6 {\r\n\tbackground-color: #594539;\r\n}\r\n\r\n/* vue-virtual-scroller/dist/vue-virtual-scroller.css */\r\n.emoji-mart .vue-recycle-scroller {\r\n\tposition: relative;\r\n}\r\n.emoji-mart .vue-recycle-scroller.direction-vertical:not(.page-mode) {\r\n\toverflow-y: auto;\r\n}\r\n.emoji-mart .vue-recycle-scroller.direction-horizontal:not(.page-mode) {\r\n\toverflow-x: auto;\r\n}\r\n.emoji-mart .vue-recycle-scroller.direction-horizontal {\r\n\tdisplay: flex;\r\n}\r\n.emoji-mart .vue-recycle-scroller__slot {\r\n\tflex: auto 0 0;\r\n}\r\n.emoji-mart .vue-recycle-scroller__item-wrapper {\r\n\tflex: 1;\r\n\tbox-sizing: border-box;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n}\r\n.emoji-mart .vue-recycle-scroller.ready .vue-recycle-scroller__item-view {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twill-change: transform;\r\n}\r\n.emoji-mart\r\n\t.vue-recycle-scroller.direction-vertical\r\n\t.vue-recycle-scroller__item-wrapper {\r\n\twidth: 100%;\r\n}\r\n.emoji-mart\r\n\t.vue-recycle-scroller.direction-horizontal\r\n\t.vue-recycle-scroller__item-wrapper {\r\n\theight: 100%;\r\n}\r\n.emoji-mart\r\n\t.vue-recycle-scroller.ready.direction-vertical\r\n\t.vue-recycle-scroller__item-view {\r\n\twidth: 100%;\r\n}\r\n.emoji-mart\r\n\t.vue-recycle-scroller.ready.direction-horizontal\r\n\t.vue-recycle-scroller__item-view {\r\n\theight: 100%;\r\n}\r\n.emoji-mart .resize-observer[data-v-b329ee4c] {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tz-index: -1;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tborder: none;\r\n\tbackground-color: transparent;\r\n\tpointer-events: none;\r\n\tdisplay: block;\r\n\toverflow: hidden;\r\n\topacity: 0;\r\n}\r\n.emoji-mart .resize-observer[data-v-b329ee4c] object {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tz-index: -1;\r\n}\r\n.emoji-mart-search .hidden {\r\n\tdisplay: none;\r\n\tvisibility: hidden;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputField.vue?vue&type=template&id=7d91b437&scoped=true&\"\nimport script from \"./InputField.vue?vue&type=script&lang=js&\"\nexport * from \"./InputField.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./InputField.vue?vue&type=style&index=0&id=7d91b437&prod&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\nvar style1 = require(\"./InputField.vue?vue&type=style&index=1&id=7d91b437&prod&lang=css&\")\nif (style1.__inject__) style1.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"7d91b437\",\n  null\n  ,true\n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"recordButton_wrapper\"},[_c('div',{ref:\"holder\",staticClass:\"recordButton_holder\",class:{ hold: _vm.isHold }},[_c('i',{staticClass:\"icon fas\",class:_vm.isHold ? 'fa-lock' : 'fa-lock-open'})]),(!_vm.isHold)?_c('div',{ref:\"toggle\",staticClass:\"recordButton_micro recordButton_main\",class:{ active: _vm.isRecording, disabled: _vm.disabled },on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"touchstart\":_vm.handleTouchStart,\"touchend\":_vm.handleTouchEnd,\"touchcancel\":_vm.handleTouchEnd}},[_c('i',{staticClass:\"icon fas fa-microphone\"})]):_vm._e(),(_vm.isHold)?_c('div',{ref:\"stop\",staticClass:\"recordButton_stop recordButton_main\",on:{\"click\":_vm.recordEnd}},[_c('i',{staticClass:\"icon fas fa-stop\"})]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapState } from \"vuex\";\r\n\r\nexport default {\r\n\tname: \"recordVoice\",\r\n\tprops: {\r\n\t\tisRecording: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tprepareRecording: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\tdisabled: Boolean,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstart: 0,\r\n\t\t\tisHold: false,\r\n\t\t\tdirection: null,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tmobile: (state) => state.mobile,\r\n\t\t}),\r\n\t},\r\n\tmounted() {},\r\n\tbeforeDestroy() {\r\n\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\r\n\t\tif (this.isRecording) {\r\n\t\t\tthis.$emit(\"onRecordingStop\", { cancel: true });\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tmouseup: function (e) {\r\n\t\t\tif (!this.mobile) this.handleTouchEnd(e);\r\n\t\t},\r\n\r\n\t\tmousedown: function (e) {\r\n\t\t\tif (!this.mobile) this.handleTouchStart(e);\r\n\t\t},\r\n\r\n\t\thandleTouchStart(e) {\r\n\t\t\tif (!this.isRecording) {\r\n\t\t\t\tthis.$emit(\"onRecordingStart\");\r\n\t\t\t} else {\r\n\t\t\t\tif (this.isHold) return;\r\n\t\t\t}\r\n\r\n\t\t\tthis.start = {\r\n\t\t\t\tY: e.changedTouches ? e.changedTouches[0].pageY : e.pageY,\r\n\t\t\t\tX: e.changedTouches ? e.changedTouches[0].pageX : e.pageX,\r\n\t\t\t};\r\n\r\n\t\t\tif (!this.mobile) document.addEventListener(\"mousemove\", this.handleMove);\r\n\t\t\telse document.addEventListener(\"touchmove\", this.handleMove);\r\n\t\t},\r\n\t\thandleTouchEnd(e) {\r\n\t\t\tif (this.isHold) return;\r\n\r\n\t\t\tif (this.isRecording || this.prepareRecording) {\r\n\t\t\t\tthis.$emit(\"onRecordingStop\", {\r\n\t\t\t\t\tsendnow: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\r\n\t\t\tthis.clearStyle();\r\n\t\t},\r\n\r\n\t\tclearStyle() {\r\n\t\t\tif (this.$refs.toggle) {\r\n\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,0)`;\r\n\t\t\t\tthis.$refs.toggle.classList.remove(\"outside\");\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$refs.holder) {\r\n\t\t\t\tthis.$refs.holder.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thandleMove(e) {\r\n\t\t\tif (!this.isRecording) return;\r\n\r\n\t\t\tlet deltaY = this.start.Y - e.pageY;\r\n\t\t\tlet deltaX = this.start.X - e.pageX;\r\n\r\n\t\t\tif (e?.changedTouches?.length) {\r\n\t\t\t\tdeltaY = this.start.Y - e.changedTouches[0].pageY;\r\n\t\t\t\tdeltaX = this.start.X - e.changedTouches[0].pageX;\r\n\t\t\t}\r\n\r\n\t\t\tif (deltaY > 5 && deltaX < 5) {\r\n\t\t\t\tthis.direction = \"Y\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.direction = \"X\";\r\n\t\t\t}\r\n\r\n\t\t\tif (deltaY > 5 && this.direction === \"Y\") {\r\n\t\t\t\tif (!this.$refs.holder.classList.contains(\"active\"))\r\n\t\t\t\t\tthis.$refs.holder.classList.add(\"active\");\r\n\r\n\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,-${deltaY}px)`;\r\n\r\n\t\t\t\tif (deltaY > 70) {\r\n\t\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,0)`;\r\n\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\t\t\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\t\t\t\t\t//document.removeEventListener('mouseup', this.handleTouchEnd)\r\n\r\n\t\t\t\t\tthis.isHold = true;\r\n\t\t\t\t}\r\n\t\t\t} else if (deltaX > 5 && this.direction === \"X\") {\r\n\t\t\t\tthis.$refs.toggle.style.transform = `translate(-${deltaX}px, 0)`;\r\n\r\n\t\t\t\tif (!this.$refs.holder.classList.contains(\"outside\"))\r\n\t\t\t\t\tthis.$refs.toggle.classList.add(\"outside\");\r\n\r\n\t\t\t\tthis.$emit(\"canceling\", (deltaX - 5) / 130);\r\n\r\n\t\t\t\tif (deltaX > 130) {\r\n\t\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,0)`;\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\t\t\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\t\t\t\t\t//document.removeEventListener('mouseup', this.handleTouchEnd)\r\n\t\t\t\t\tthis.$emit(\"onRecordingStop\", { cancel: true });\r\n\t\t\t\t\tthis.$emit(\"onClear\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.clearStyle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\trecordEnd(e) {\r\n\t\t\tthis.clearStyle();\r\n\r\n\t\t\tif (this.isRecording && this.isHold) {\r\n\t\t\t\tthis.$emit(\"onRecordingStop\", {});\r\n\t\t\t\tthis.isHold = false;\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=16750db8&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.scss?vue&type=style&index=0&id=16750db8&prod&scoped=true&lang=scss&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"16750db8\",\n  null\n  ,true\n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"recordProgress\"},[(_vm.isRecording)?_c('div',{staticClass:\"indicatorWrapper\"},[_c('div',{staticClass:\"indicator\",class:{ recording: _vm.isRecording }})]):_c('div',{staticClass:\"del\",on:{\"click\":_vm.clear}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('div',{staticClass:\"timer\"},[_vm._v(_vm._s(_vm.timer))]),_c('div',{ref:\"graph\",staticClass:\"graph\"},[_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":_vm.width,\"height\":\"20\"}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRecording && _vm.opacity),expression:\"isRecording && opacity\"}],ref:\"cancel\",staticClass:\"cancel\"},[_c('span',[_vm._v(\"Slide left to cancel\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n\tname: \"recordProgress\",\r\n\tprops: {\r\n\t\trecordTime: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\trmsData: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tisRecording: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\topacity: {},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\ttimer() {\r\n\t\t\tlet minute = Math.floor(this.recordTime / 60000);\r\n\t\t\tlet sec = Math.floor(this.recordTime / 1000) % 60;\r\n\t\t\treturn `${minute ? minute + \":\" : \"0:\"}${sec < 10 ? \"0\" + sec : sec}`;\r\n\t\t},\r\n\r\n\t\trmsDataLast() {\r\n\t\t\treturn _.last(this.rmsData, 25);\r\n\t\t},\r\n\t},\r\n\r\n\twatch: {\r\n\t\trmsData: _.throttle(function () {\r\n\t\t\tthis.draw();\r\n\t\t}, 30),\r\n\r\n\t\topacity: function () {\r\n\t\t\tthis.$refs.cancel.style.opacity = this.opacity;\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.$refs.cancel.style.opacity = 0;\r\n\t\tlet width = this.$refs.graph.offsetWidth;\r\n\t\tthis.width = width - (width % 100);\r\n\r\n\t\twindow.addEventListener(\"resize\", this.resize);\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener(\"resize\", this.resize);\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tresize() {\r\n\t\t\tlet timer = null;\r\n\r\n\t\t\tvar re = () => {\r\n\t\t\t\tif (!timer) {\r\n\t\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\t\ttimer = null;\r\n\t\t\t\t\t\tlet width = this.$refs.graph.offsetWidth;\r\n\t\t\t\t\t\tthis.width = width - (width % 100);\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tre();\r\n\t\t},\r\n\t\tdraw() {\r\n\t\t\tif (!this.$refs.canvas) return;\r\n\r\n\t\t\tconst ctx = this.$refs.canvas.getContext(`2d`);\r\n\t\t\tlet x = 0;\r\n\t\t\tlet count = 50;\r\n\t\t\tlet width = 2; //this.width / 200\r\n\t\t\tvar l = this.rmsDataLast.length;\r\n\t\t\tvar c = Math.max(Math.floor(l / count), 1);\r\n\r\n\t\t\tctx.clearRect(0, 0, this.width, 20);\r\n\r\n\t\t\tfor (let i = 0; i < l; i = i + c) {\r\n\t\t\t\tctx.fillStyle = \"#00a4ff\";\r\n\t\t\t\tctx.fillRect(\r\n\t\t\t\t\ti * 2 * width,\r\n\t\t\t\t\t10 - this.rmsDataLast[i] / 8,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\tthis.rmsDataLast[i] / 4 + 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear() {\r\n\t\t\tthis.$emit(\"onClear\");\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5df29904&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.scss?vue&type=style&index=0&id=5df29904&prod&scoped=true&lang=scss&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"5df29904\",\n  null\n  ,true\n)\n\nexport default component.exports","import f from \"@/application/functions\";\r\nimport InputField from \"./InputField/InputField.vue\";\r\nimport recordVoice from \"@/components/assets/recordVoice/index.vue\";\r\nimport { mapState } from \"vuex\";\r\nimport Images from \"@/application/utils/images.js\";\r\n\r\nimport contacts from \"@/components/contacts/list/index.vue\";\r\nimport preview from \"@/components/contacts/preview/index.vue\";\r\nimport recordProgress from \"@/components/assets/recordProgress/index.vue\";\r\n\r\nimport upload from \"@/components/assets/upload/index.vue\";\r\n\r\nimport { cancelable } from \"cancelable-promise\";\r\nexport default {\r\n\tname: \"chatInput\",\r\n\tprops: {\r\n\t\tchat: Object,\r\n\t\tu: String,\r\n\t\trelationEvent: Object,\r\n\t},\r\n\r\n\tcomponents: {\r\n\t\tInputField,\r\n\t\tcontacts,\r\n\t\tpreview,\r\n\t\trecordProgress,\r\n\t\trecordVoice,\r\n\t\tupload,\r\n\t},\r\n\t\r\n\tinject: [\r\n\t\t\"streamMode\",\r\n\t\t\"authorId\",\r\n\t\t\"menuState\"\r\n\t],\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tupload: true,\r\n\t\t\ttest: [],\r\n\t\t\tloading: false,\r\n\t\t\ttext: \"\",\r\n\t\t\tfile: {},\r\n\t\t\tfileInfo: {},\r\n\t\t\tready: false,\r\n\t\t\tcreating: false,\r\n\t\t\tuserId: \"\",\r\n\t\t\tshowuserselect: null,\r\n\t\t\tanyUrlMeta: String,\r\n\t\t\tjoinedMembers: [],\r\n\t\t\ttipvalue: null,\r\n\t\t\ttipuserindex: 0,\r\n\t\t\trecord: null,\r\n\t\t\trecordRmsData: [],\r\n\t\t\tisRecording: false,\r\n\r\n\t\t\tmediaRecorder: null,\r\n\t\t\taudioContext: null,\r\n\t\t\taudioAnalyser: null,\r\n\r\n\t\t\trecordTime: 0,\r\n\t\t\tinterval: null,\r\n\t\t\tcancelOpacity: 0,\r\n\t\t\tmicrophoneDisabled: false,\r\n\t\t\tprepareRecording: false,\r\n\r\n\t\t\tcancelledCordovaMediaRecorder: false,\r\n\r\n\t\t\tdonate: null\r\n\t\t};\r\n\t},\r\n\r\n\twatch: {\r\n\t\tusersForKeysHash: {\r\n\t\t\t//immediate: true,\r\n\t\t\thandler: function () {},\r\n\t\t},\r\n\t\ttipusers: function () {\r\n\t\t\tif (!this.tipusers.length) {\r\n\t\t\t\tthis.tipuserindex = 0;\r\n\t\t\t} else {\r\n\t\t\t\tif (this.tipuserindex > this.tipusers.length - 1) {\r\n\t\t\t\t\tthis.tipuserindex = this.tipusers.length - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\tbeforeDestroy() {\r\n\t\tif (this.audioContext) this.audioContext.close();\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tvoiceEnable() {\r\n\t\t\treturn this.$store.state.voiceMessagesEnabled;\r\n\t\t},\r\n\r\n\t\tconnect: function () {\r\n\t\t\treturn this.$store.state.contact;\r\n\t\t},\r\n\t\tpkoindisabled: function () {\r\n\t\t\treturn this.$store.state.pkoindisabled;\r\n\t\t},\r\n\r\n\t\tmenu: function () {\r\n\t\t\tvar menuItems = [];\r\n\r\n\t\t\tif (\r\n\t\t\t\twindow.POCKETNETINSTANCE &&\r\n\t\t\t\twindow.POCKETNETINSTANCE.mobile.supportimagegallery()\r\n\t\t\t) {\r\n\t\t\t\tmenuItems.push({\r\n\t\t\t\t\taction: this.cameraHandlerCustom,\r\n\t\t\t\t\ttext: \"button.takePhotoOrVideo\",\r\n\t\t\t\t\ticon: \"fas fa-camera\",\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmenuItems.push({\r\n\t\t\t\t\ttext: \"button.takePhotoOrVideo\",\r\n\t\t\t\t\ticon: \"fas fa-camera\",\r\n\r\n\t\t\t\t\tupload: {\r\n\t\t\t\t\t\tmultiple: true,\r\n\t\t\t\t\t\textensions: [\"jpg\", \"jpeg\", \"png\", \"webp\"],\r\n\t\t\t\t\t\tmaxsize: 100,\r\n\t\t\t\t\t\timages: {\r\n\t\t\t\t\t\t\tresize: {\r\n\t\t\t\t\t\t\t\ttype: \"fit\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\tstart : this.uploadStart,\r\n\t\t\t\t\t\terror : this.uploadError,\r\n\t\t\t\t\t\tuploaded : this.uploadUploaded,\r\n\t\t\t\t\t\tuploadedAll : this.uploadUploadedAll\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tmenuItems.push({\r\n\t\t\t\ttext: \"button.sendFile\",\r\n\t\t\t\ticon: \"fas fa-sticky-note\",\r\n\r\n\t\t\t\tupload: {\r\n\t\t\t\t\tmultiple: true,\r\n\t\t\t\t\textensions: [],\r\n\t\t\t\t\tmaxsize: 25,\r\n\t\t\t\t\timages: {\r\n\t\t\t\t\t\tresize: {\r\n\t\t\t\t\t\t\ttype: \"fit\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tstart : this.uploadStart,\r\n\t\t\t\t\terror : this.uploadError,\r\n\t\t\t\t\tuploaded : this.uploadUploaded,\r\n\t\t\t\t\tuploadedAll : this.uploadUploadedAll\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (this.transaction && !this.pkoindisabled) {\r\n\t\t\t\tmenuItems.unshift({\r\n\t\t\t\t\taction: this.sendtransactionWrapper,\r\n\t\t\t\t\ttext: \"button.sendCoins\",\r\n\t\t\t\t\ticon: \"fas fa-wallet\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn menuItems;\r\n\t\t},\r\n\r\n\t\t...mapState([\"chats\"]),\r\n\r\n\t\tuserlist: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\treturn this.core.mtrx.chatUsersInfo(this.chat.roomId, \"anotherChatUsers\");\r\n\t\t},\r\n\r\n\t\ttransaction: function () {\r\n\t\t\treturn f.deep(window, \"POCKETNETINSTANCE.platform.ui.wallet.donate\");\r\n\t\t},\r\n\r\n\t\tuusers: function () {\r\n\t\t\tif (this.u) {\r\n\t\t\t\treturn _.map(this.u.split(\",\"), (u) => {\r\n\t\t\t\t\treturn u;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\tausers: function () {\r\n\t\t\tif (this.u) {\r\n\t\t\t\treturn _.map(this.u.split(\",\"), (u) => {\r\n\t\t\t\t\treturn this.core.user.matrixId(u);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\tstateChat: function () {\r\n\t\t\tvar id = this.$route.query.id;\r\n\t\t\treturn this.$store.state.chatsMap[id];\r\n\t\t},\r\n\t\tinvited: function () {\r\n\t\t\tif (!this.chat) {\r\n\t\t\t\tif (this.u) return this.ausers;\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\r\n\t\t\treturn _.map(\r\n\t\t\t\t_.filter(this.chat.currentState.getMembers(), function (m, v) {\r\n\t\t\t\t\treturn m.membership === \"invite\";\r\n\t\t\t\t}),\r\n\t\t\t\tfunction (u) {\r\n\t\t\t\t\treturn u.userId;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tjoined: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\tlet roomId = this.chat.roomId;\r\n\t\t\tlet self = this;\r\n\t\t\tlet arr = [];\r\n\t\t\tlet members = 0;\r\n\r\n\t\t\tthis.chat.currentState.getMembers().forEach(function (user) {\r\n\t\t\t\tif (user.membership === \"join\") {\r\n\t\t\t\t\tarr.push(user.userId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn arr;\r\n\t\t},\r\n\r\n\t\ttipusers: function () {\r\n\t\t\tif (this.tipvalue === null) return [];\r\n\t\t\tif (this.tipvalue === \"\") return this.userlist;\r\n\r\n\t\t\tvar value = this.tipvalue.toLowerCase();\r\n\r\n\t\t\tvar u = _.filter(this.userlist, function (u) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tu.name.toLowerCase().indexOf(value) == 0 &&\r\n\t\t\t\t\tu.name.toLowerCase() != value\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\treturn u;\r\n\t\t},\r\n\r\n\t\tmaintipuser: function () {\r\n\t\t\tif (this.tipusers.length) {\r\n\t\t\t\treturn this.tipusers[this.tipuserindex || 0];\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tme() {\r\n\t\t\t/* Compare author and user bastyon id to prevent donate myself */\r\n\t\t\treturn this.authorId === this.core.user.userinfo?.source.address;\r\n\t\t}\r\n\t},\r\n\r\n\tcreated() {},\r\n\r\n\t///\r\n\r\n\tmounted() {\r\n\t\tthis.ready = true;\r\n\r\n\t\tif (!this.chat && this.core.mtrx.client) {\r\n\t\t\tthis.newchat().catch((e) => {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\twait: function () {\r\n\t\t\treturn this.$f.pretry(() => {\r\n\t\t\t\treturn this.core.mtrx.client && this.core.mtrx.access;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tbrowsetip: function (increase) {\r\n\t\t\tincrease ? this.tipuserindex++ : this.tipuserindex--;\r\n\r\n\t\t\tif (this.tipuserindex > this.tipusers.length - 1) {\r\n\t\t\t\tthis.tipuserindex = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.tipuserindex < 0) {\r\n\t\t\t\tthis.tipuserindex = this.tipusers.length - 1;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tselectcurrenttip: function () {\r\n\t\t\tthis.insertuser(this.tipusers[this.tipuserindex || 0]);\r\n\t\t},\r\n\r\n\t\tinsertuser: function (user = {}) {\r\n\t\t\tvar name = user.name || \"\";\r\n\r\n\t\t\tthis.$refs[\"newinput\"].inserttip(name);\r\n\t\t},\r\n\r\n\t\ttipBySearch: function (value) {\r\n\t\t\tthis.tipvalue = value;\r\n\t\t},\r\n\r\n\t\tshowuserselected: function (contact, action) {\r\n\t\t\tthis[action](contact);\r\n\t\t},\r\n\r\n\t\tresizeImage: function (base64) {\r\n\t\t\tvar ftype = base64.split(\";\")[0].split(\"/\")[1];\r\n\t\t\tvar images = new Images();\r\n\r\n\t\t\treturn images.resize[\"fit\"](base64, 1024, 1024, ftype, 0.95)\r\n\t\t\t\t.then((base64) => {\r\n\t\t\t\t\treturn Promise.resolve(base64);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tcameraHandlerCustom: function () {\r\n\t\t\tvar result = [];\r\n\r\n\t\t\twindow.POCKETNETINSTANCE.platform.ui.uploadImage({\r\n\t\t\t\tmultiple: true,\r\n\r\n\t\t\t\taction: ({ base64 }, resolve) => {\r\n\t\t\t\t\treturn this.resizeImage(base64)\r\n\t\t\t\t\t\t.then((base64) => {\r\n\t\t\t\t\t\t\treturn f.Base64.toFile(base64).then((file) => {\r\n\t\t\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\t\t\tbase64,\r\n\t\t\t\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tresult.push(data);\r\n\r\n\t\t\t\t\t\t\t\tthis.uploadUploaded(null, data);\r\n\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonSuccess: (imgs) => {\r\n\t\t\t\t\tthis.uploadUploadedAll();\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsendtransactionWrapper: function () {\r\n\t\t\tvar users = (() => {\r\n\t\t\t\tif (this.streamMode && this.authorId) {\r\n\t\t\t\t\t/* Donate only to author (stream mode) */\r\n\t\t\t\t\treturn [{\r\n\t\t\t\t\t\tid: this.authorId,\r\n\t\t\t\t\t\tsource: {\r\n\t\t\t\t\t\t\taddress: this.authorId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* Donate to chat participants */\r\n\t\t\t\t\treturn _.filter(\r\n\t\t\t\t\t\t_.map(this.joined, (j) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tthis.$f.deep(\r\n\t\t\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\t\t\t\"$store.state.users.\" + this.$f.getmatrixid(j)\r\n\t\t\t\t\t\t\t\t) || null\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t(r) => {\r\n\t\t\t\t\t\t\treturn r && r.source && r.id != this.core.user.userinfo?.id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t\t\r\n\t\t\tif (!users.length) {\r\n\t\t\t\treturn \"users.length\";\r\n\t\t\t}\r\n\r\n\t\t\tif (users.length > 1) {\r\n\t\t\t\tthis.core.store.commit(\"setmodal\", {\r\n\t\t\t\t\tcaption: this.$i18n.t(\"caption.sendTransactionTo\"),\r\n\t\t\t\t\ttype: \"showuserselect\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusers: users,\r\n\t\t\t\t\t\taction: \"sendtransaction\",\r\n\t\t\t\t\t\tuserselected: (c) => {\r\n\t\t\t\t\t\t\tthis.showuserselected(c, \"sendtransaction\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\t/*this.showuserselect = {\r\n\t\t\t\t  users : users,\r\n\t\t\t\t  action : 'sendtransaction'\r\n\t\t\t\t}*/\r\n\t\t\t} else {\r\n\t\t\t\tthis.sendtransaction(users[0]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsendtransaction: function (user) {\r\n\t\t\tif (this.donate) return;\r\n\r\n\t\t\tvar api = this.transaction;\r\n\r\n\t\t\t//TODO get address and send transaction\r\n\r\n\t\t\tapi({\r\n\t\t\t\troomid: this.chat.roomId,\r\n\t\t\t\treceiver: user.source.address,\r\n\t\t\t\tsend: !this.streamMode,\r\n\t\t\t\tshare: !this.streamMode\r\n\t\t\t}).then(transaction => {\r\n\t\t\t\tthis.donate = transaction;\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tremovetransaction: function () {\r\n\t\t\tthis.donate = null;\r\n\t\t},\r\n\r\n\t\temitInputData: function () {\r\n\t\t\tthis.$emit(\"emptyInput\");\r\n\t\t\tthis.upload = true;\r\n\t\t},\r\n\r\n\t\tHideUploadPic() {\r\n\t\t\tthis.upload = false;\r\n\t\t},\r\n\r\n\t\temitUrl: function (url) {\r\n\t\t\tthis.$emit(\"setMetaUrl\", url);\r\n\t\t},\r\n\r\n\t\tnewchat() {\r\n\t\t\tif (this.u) {\r\n\t\t\t\tthis.$store.state.globalpreloader = true;\r\n\t\t\t\tvar matrixId = null;\r\n\t\t\t\tvar myMatrixId = null;\r\n\t\t\t\tvar chat = null;\r\n\t\t\t\tvar id = \"\";\r\n\r\n\t\t\t\tthis.creating = true;\r\n\t\t\t\treturn this.core.user\r\n\t\t\t\t\t.usersInfo(this.uusers)\r\n\t\t\t\t\t.then((info) => {\r\n\t\t\t\t\t\tif (this.uusers.length == 1) {\r\n\t\t\t\t\t\t\tvar _info = info[0];\r\n\r\n\t\t\t\t\t\t\tif (!_info || !_info.keys || _info.keys.length < 12) {\r\n\t\t\t\t\t\t\t\tthis.$emit(\"cantchatcrypto\");\r\n\t\t\t\t\t\t\t\treturn Promise.reject(\"ny2\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.core.user.userinfo.keys.length < 12) {\r\n\t\t\t\t\t\t\tthis.$emit(\"cantchatcrypto\");\r\n\t\t\t\t\t\t\treturn Promise.reject(\"ny2\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//return Promise.reject('ny3')\r\n\r\n\t\t\t\t\t\tid = this.core.mtrx.kit.tetatetid(info[0], this.core.user.userinfo);\r\n\r\n\t\t\t\t\t\tmatrixId = this.core.user.matrixId(info[0].id);\r\n\t\t\t\t\t\tmyMatrixId = this.core.user.matrixId(this.core.user.userinfo.id);\r\n\r\n\t\t\t\t\t\tvar initialstate = [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttype: \"m.set.encrypted\",\r\n\t\t\t\t\t\t\t\tstate_key: \"\",\r\n\t\t\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\t\t\tencrypted: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\treturn this.core.mtrx.client.createRoom({\r\n\t\t\t\t\t\t\troom_alias_name: id,\r\n\t\t\t\t\t\t\tvisibility: \"private\",\r\n\t\t\t\t\t\t\tinvite: [matrixId],\r\n\t\t\t\t\t\t\tname: \"#\" + id,\r\n\t\t\t\t\t\t\tinitial_state: initialstate,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((_chat) => {\r\n\t\t\t\t\t\tchat = _chat;\r\n\t\t\t\t\t\tthis.$store.state.globalpreloader = false;\r\n\r\n\t\t\t\t\t\tlet m_chat = this.core.mtrx.client.getRoom(_chat.room_id);\r\n\t\t\t\t\t\tlet event = m_chat.currentState.getStateEvents(\r\n\t\t\t\t\t\t\t\"m.room.power_levels\"\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\treturn this.core.mtrx.client\r\n\t\t\t\t\t\t\t.setPowerLevel(chat.room_id, matrixId, 100, event[0])\r\n\t\t\t\t\t\t\t.catch((e) => {});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\tthis.creating = false;\r\n\r\n\t\t\t\t\t\tif (this.connect && this.connect == id) {\r\n\t\t\t\t\t\t\tthis.greetings();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.$store.commit(\"CONTACT\", false);\r\n\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tthis.creating = false;\r\n\r\n\t\t\t\t\t\tthis.$store.state.globalpreloader = false;\r\n\r\n\t\t\t\t\t\tif (e && e.errcode == \"M_ROOM_IN_USE\") {\r\n\t\t\t\t\t\t\treturn this.core.mtrx.client\r\n\t\t\t\t\t\t\t\t.joinRoom(\r\n\t\t\t\t\t\t\t\t\t\"#\" +\r\n\t\t\t\t\t\t\t\t\t\tid +\r\n\t\t\t\t\t\t\t\t\t\t\":\" +\r\n\t\t\t\t\t\t\t\t\t\tthis.core.mtrx.baseUrl.replace(\"https://\", \"\")\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.then(() => {})\r\n\t\t\t\t\t\t\t\t.catch((e) => {});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn Promise.reject(\"u\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmaySendMessage() {\r\n\t\t\treturn this.chat && this.chat.maySendMessage();\r\n\t\t},\r\n\r\n\t\tgreetings() {\r\n\t\t\tthis.send(\"\").then((r) => {\r\n\t\t\t\treturn Promise.resolve(r);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsendinput(text) {\r\n\t\t\tthis.send(text).then((r) => {\r\n\t\t\t\treturn Promise.resolve(r);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\ttextCutLimit: function (text, limit) {\r\n\t\t\ttext = text.trim();\r\n\t\t\tif (text.length <= limit) return text;\r\n\r\n\t\t\ttext = text.slice(0, limit);\r\n\r\n\t\t\treturn text.trim() + \"...\";\r\n\t\t},\r\n\r\n\t\treplaceMentions(text) {\r\n\t\t\t_.each(this.userlist, function (user) {\r\n\t\t\t\ttext = text.replace(\r\n\t\t\t\t\tnew RegExp(\"@\" + user.name, \"g\"),\r\n\t\t\t\t\t\"@\" + user.id + \":\" + user.name\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\treturn text;\r\n\t\t},\r\n\r\n\t\tclbkEncrypt(){\r\n\t\t\tthis.$emit('encrypt')\r\n\t\t},\r\n\r\n\t\tclbkEncrypted(){\r\n\t\t\tthis.$emit('encrypted')\r\n\r\n\t\t},\r\n\r\n\t\tsend(text) {\r\n\t\t\tif (!this.chat) {\r\n\t\t\t\tthis.newchat().catch((e) => {});\r\n\t\t\t}\r\n\r\n\t\t\t//return this.chat.pcrypto.getOrCreateCommonKey()\r\n\r\n\t\t\t//return this.chat.pcrypto.sendCommonKey()\r\n\r\n\t\t\t//return\r\n\r\n\t\t\tthis.$emit(\"sending\");\r\n\r\n\t\t\tif (!this.relationEvent) {\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\r\n\t\t\treturn this.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat && !this.creating;\r\n\t\t\t\t})\r\n\t\t\t\t.then(async (r) => {\r\n\t\t\t\t\tthis.$emit(\"sent\");\r\n\r\n\t\t\t\t\ttext = this.replaceMentions(text);\r\n\r\n\t\t\t\t\tif (this.relationEvent) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tthis.relationEvent.type == \"m.replace\" &&\r\n\t\t\t\t\t\t\tthis.relationEvent.event\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn this.core.mtrx\r\n\t\t\t\t\t\t\t\t.textEvent(this.chat, text, {\r\n\t\t\t\t\t\t\t\t\tencryptEvent : this.clbkEncrypt,\r\n\t\t\t\t\t\t\t\t\tencryptedEvent : this.clbkEncrypted\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\t\t\tr[\"m.relates_to\"] = {\r\n\t\t\t\t\t\t\t\t\t\trel_type: \"m.replace\",\r\n\t\t\t\t\t\t\t\t\t\tevent_id:\r\n\t\t\t\t\t\t\t\t\t\t\tthis.core.mtrx.clearEventId(this.relationEvent.event) ||\r\n\t\t\t\t\t\t\t\t\t\t\tf.makeid(),\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\tvar editEvent = r;\r\n\r\n\t\t\t\t\t\t\t\t\tthis.relationEvent.event.event.content.body = r.body;\r\n\t\t\t\t\t\t\t\t\tthis.relationEvent.event.event.content.block = r.block;\r\n\t\t\t\t\t\t\t\t\tthis.relationEvent.event.event.content.msgtype = r.msgtype;\r\n\r\n\t\t\t\t\t\t\t\t\tdelete this.relationEvent.event.event.decryptKey;\r\n\t\t\t\t\t\t\t\t\tdelete this.relationEvent.event.event.decrypted;\r\n\r\n\t\t\t\t\t\t\t\t\treturn this.core.mtrx.client.sendEvent(\r\n\t\t\t\t\t\t\t\t\t\tthis.chat.roomId,\r\n\t\t\t\t\t\t\t\t\t\t\"m.room.message\",\r\n\t\t\t\t\t\t\t\t\t\teditEvent\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\t\t\tthis.core.store.dispatch(\"FETCH_EVENTS\");\r\n\r\n\t\t\t\t\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\r\n\t\t\t\t\t\t\t\t\tthis.$emit(\"force\");\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst\r\n\t\t\t\t\t\tsendText = (text, params) => {\r\n\t\t\t\t\t\t\treturn this.core.mtrx.sendtext(this.chat, text, Object.assign({\r\n\t\t\t\t\t\t\t\trelation: this.relationEvent,\r\n\t\t\t\t\t\t\t}, params || {}), {\r\n\t\t\t\t\t\t\t\tencryptEvent : this.clbkEncrypt,\r\n\t\t\t\t\t\t\t\tencryptedEvent : this.clbkEncrypted\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata = {};\r\n\r\n\t\t\t\t\tif (this.donate) {\r\n\t\t\t\t\t\tconst donate = Object.assign(this.donate, {});\r\n\t\t\t\t\t\tthis.removetransaction();\r\n\t\t\t\t\t\tconst txid = await donate.send();\r\n\t\t\t\t\t\tdata.donateLink = txid;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn sendText(text, data);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tthis.$emit(\"sentMessageError\", {\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tpasteImage(data) {\r\n\t\t\tthis.sendImage({ base64: data });\r\n\t\t},\r\n\r\n\t\tsendImage: function ({ base64, file }) {\r\n\t\t\tvar id = f.makeid();\r\n\r\n\t\t\tvar meta = {\r\n\t\t\t\ttype: \"image\",\r\n\t\t\t\tid: id,\r\n\t\t\t\tbase64: base64,\r\n\t\t\t};\r\n\r\n\t\t\tthis.$emit(\"sendingData\", meta);\r\n\t\t\t//setTimeout(() => {\r\n\t\t\tthis.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat;\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tif (meta.aborted) return Promise.reject(\"aborted\");\r\n\r\n\t\t\t\t\treturn this.core.mtrx.sendImage(this.chat, base64, null, meta, {\r\n\t\t\t\t\t\trelation: this.relationEvent,\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\r\n\t\t\t\t\tthis.$emit(\"sentData\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\tthis.$emit(\"sentError\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t});\r\n\t\t\t//}, 5000)\r\n\t\t},\r\n\r\n\t\tcanencryptfilesize: function (file) {\r\n\t\t\tvar s = 10 * 1024 * 1024;\r\n\r\n\t\t\tif (!this.chat.pcrypto.canBeEncrypt()) {\r\n\t\t\t\treturn Promise.resolve(false);\r\n\t\t\t}\r\n\r\n\t\t\tif (file.size > s) {\r\n\t\t\t\treturn this.$dialog\r\n\t\t\t\t\t.confirm(\r\n\t\t\t\t\t\t\"Files larger than 10 megabytes are not encrypted. Do you want to send the file unencrypted?\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tokText: \"Yes\",\r\n\t\t\t\t\t\t\tcancelText: \"No, cancel\",\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\t.then((dialog) => {\r\n\t\t\t\t\t\treturn Promise.resolve(true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\treturn Promise.reject(\"cancel\");\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.resolve(false);\r\n\t\t},\r\n\r\n\t\tsendFile: function ({ file }) {\r\n\t\t\tvar id = f.makeid();\r\n\r\n\t\t\tvar meta = {\r\n\t\t\t\ttype: \"file\",\r\n\t\t\t\tid: id,\r\n\t\t\t\tinfo: {\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tthis.$emit(\"sendingData\", meta);\r\n\r\n\t\t\tthis.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat;\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\treturn this.canencryptfilesize(file);\r\n\t\t\t\t})\r\n\t\t\t\t.then((notenc) => {\r\n\t\t\t\t\treturn this.core.mtrx.sendFile(\r\n\t\t\t\t\t\tthis.chat,\r\n\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\tmeta,\r\n\t\t\t\t\t\t{ relation: this.relationEvent },\r\n\t\t\t\t\t\tnotenc\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\r\n\t\t\t\t\tthis.$emit(\"sentData\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\tthis.$emit(\"sentError\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tfocus: function () {\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].focus();\r\n\t\t},\r\n\r\n\t\tfocused: function () {\r\n\t\t\tthis.$emit(\"focused\");\r\n\t\t},\r\n\r\n\t\tblur: function () {\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].blur();\r\n\t\t},\r\n\r\n\t\tblurifempty: function () {\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].blurifempty();\r\n\t\t},\r\n\r\n\t\tchange: function () {},\r\n\r\n\t\tsetText: function (text) {\r\n\t\t\tthis.text = text;\r\n\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].setText(text);\r\n\t\t},\r\n\r\n\t\tkeyup: function (evt) {\r\n\t\t\tvar value = evt.target.value;\r\n\r\n\t\t\tif (value === \"\") {\r\n\t\t\t\tthis.$emit(\"inputClean\", false);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit(\"inputClean\", true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.text = value;\r\n\t\t\tthis.anyUrlMeta = f.getUrl(this.text);\r\n\r\n\t\t\tif (this.anyUrlMeta !== undefined) {\r\n\t\t\t\tthis.$emit(\"setMetaUrl\", this.anyUrlMeta);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit(\"inputClean\", false);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.chat)\r\n\t\t\t\tthis.core.mtrx.client.sendTyping(this.chat.roomId, true, 100);\r\n\t\t},\r\n\r\n\t\tuploadStart(item, files) {},\r\n\r\n\t\tuploadError(item, error) {\r\n\t\t\tthis.$store.commit(\"icon\", {\r\n\t\t\t\ticon: \"error\",\r\n\t\t\t\tmessage: error.text,\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetImg() {\r\n\t\t\treturn (this.imgs = true);\r\n\t\t},\r\n\t\tuploadSizeError(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t}\r\n\t\t},\r\n\t\tuploadUploaded(item, data) {\r\n\t\t\tconst validImageTypes = [\r\n\t\t\t\t\"image/gif\",\r\n\t\t\t\t\"image/jpeg\",\r\n\t\t\t\t\"image/png\",\r\n\t\t\t\t\"image/webp\",\r\n\t\t\t];\r\n\r\n\t\t\tif (!validImageTypes.includes(data.file.type)) {\r\n\t\t\t\tthis.sendFile(data);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.sendImage(data);\r\n\t\t\t}\r\n\t\t},\r\n\t\timageWH(file) {\r\n\t\t\tconst img = new Image();\r\n\t\t\tvar imgInfo = {};\r\n\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\timg.onload = function () {\r\n\t\t\t\t\timgInfo.w = this.width;\r\n\t\t\t\t\timgInfo.h = this.height;\r\n\t\t\t\t\tresolve(imgInfo);\r\n\t\t\t\t};\r\n\r\n\t\t\t\timg.onerror = function (e) {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t};\r\n\r\n\t\t\t\timg.src = file.base64;\r\n\t\t\t});\r\n\t\t},\r\n\t\tuploadUploadedAll(item, result) {\r\n\t\t\tthis.$store.state.loading = false;\r\n\t\t},\r\n\r\n\t\tcatchPermissonsError(err) {\r\n\t\t\tif (\r\n\t\t\t\terr == \"permissions\" ||\r\n\t\t\t\t(err.toString && err.toString().indexOf(\"Permission\") > -1)\r\n\t\t\t) {\r\n\t\t\t\tthis.microphoneDisabled = true;\r\n\r\n\t\t\t\tif (window.cordova) {\r\n\t\t\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micaccesscordova\"), {\r\n\t\t\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micaccessbrowser\"), {\r\n\t\t\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (err.toString && err.toString().indexOf(\"device not found\") > -1) {\r\n\t\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micdevicenotfound\"), {\r\n\t\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micaccesscommonproblem\"), {\r\n\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t});\r\n\r\n\t\t\tconsole.error(err);\r\n\t\t},\r\n\r\n\t\tgetFileIosCordova(path) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\twindow.resolveLocalFileSystemURL(\r\n\t\t\t\t\tpath,\r\n\t\t\t\t\t(entry) => {\r\n\t\t\t\t\t\tif (!entry) {\r\n\t\t\t\t\t\t\treturn reject(\"noentry\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tentry.file((file) => {\r\n\t\t\t\t\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\t\t\t\t\treader.onloadend = function () {\r\n\t\t\t\t\t\t\t\tvar blob = new Blob([new Uint8Array(this.result)], {\r\n\t\t\t\t\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tentry.remove();\r\n\r\n\t\t\t\t\t\t\t\tresolve(blob);\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\treader.onerror = (e) => {\r\n\t\t\t\t\t\t\t\tentry.remove();\r\n\r\n\t\t\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\treader.readAsArrayBuffer(file);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tinitRecordingCordova() {\r\n\t\t\tthis.prepareRecording = cancelable(\r\n\t\t\t\tthis.core.media\r\n\t\t\t\t\t.permissions({ audio: true })\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.microphoneDisabled = false;\r\n\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\r\n\t\t\t\t\t\tthis.catchPermissonsError(err);\r\n\r\n\t\t\t\t\t\treturn Promise.reject(err);\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\tthis.prepareRecording\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.microphoneDisabled = false;\r\n\r\n\t\t\t\t\tvar path = \"recording.mp3\";\r\n\r\n\t\t\t\t\tif (f.isios()) path = \"cdvfile://localhost/temporary/recording.m4a\";\r\n\r\n\t\t\t\t\tvar sec = 0;\r\n\r\n\t\t\t\t\tthis.audioContext = this.core.getAudioContext();\r\n\r\n\t\t\t\t\t//var startedTime = (new Date()).getTime() / 1000\r\n\r\n\t\t\t\t\tvar media = (this.cordovaMediaRecorder = new Media(\r\n\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.recordTime = 0;\r\n\r\n\t\t\t\t\t\t\tmedia.release();\r\n\r\n\t\t\t\t\t\t\tif (this.cancelledCordovaMediaRecorder) {\r\n\t\t\t\t\t\t\t\tthis.cancelledCordovaMediaRecorder = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar fu = null;\r\n\r\n\t\t\t\t\t\t\t/*if(f.isios()){ */\r\n\r\n\t\t\t\t\t\t\tfu = this.getFileIosCordova(\r\n\t\t\t\t\t\t\t\tf.isios()\r\n\t\t\t\t\t\t\t\t\t? path\r\n\t\t\t\t\t\t\t\t\t: window.cordova.file.externalDataDirectory + path\r\n\t\t\t\t\t\t\t).then((blob) => {\r\n\t\t\t\t\t\t\t\treturn Promise.resolve({\r\n\t\t\t\t\t\t\t\t\tdata: blob,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t/*}\r\n\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tfu = f.fetchLocal(path)\r\n\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\t\t\tfu.then((r) => {\r\n\t\t\t\t\t\t\t\t///temp\r\n\t\t\t\t\t\t\t\t/*if (f.isios())\r\n\t\t\t\t\t\t\tr.duration = (new Date()).getTime() / 1000 - startedTime\r\n\r\n\t\t\t\t\t\tconsole.log(\"R\", r)\r\n\r\n\t\t\t\t\t\t/*var e = {\r\n\t\t\t\t\t\t\tdata : r.data\r\n\t\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\t\t\t\tif (media.duration && media.duration > 0) {\r\n\t\t\t\t\t\t\t\t\tr.duration = media.duration;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tthis.createVoiceMessage(r, true);\r\n\r\n\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\tthis.clear();\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.finally(() => {});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\t\t\tthis.isRecording = false;\r\n\t\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tvar rmsdata = [];\r\n\r\n\t\t\t\t\tlet currentPlaying = this.$store.state.currentPlayingVoiceMessage;\r\n\r\n\t\t\t\t\tif (currentPlaying) {\r\n\t\t\t\t\t\tcurrentPlaying.pause();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.interval = setInterval(() => {\r\n\t\t\t\t\t\t// get media amplitude\r\n\r\n\t\t\t\t\t\tif (f.isios()) {\r\n\t\t\t\t\t\t\trmsdata.push(1);\r\n\r\n\t\t\t\t\t\t\tif (rmsdata.length > 50) rmsdata = _.last(rmsdata, 50);\r\n\r\n\t\t\t\t\t\t\tthis.recordRmsData = _.clone(rmsdata);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.cordovaMediaRecorder.getCurrentAmplitude(\r\n\t\t\t\t\t\t\t\t// success callback\r\n\t\t\t\t\t\t\t\t(amp) => {\r\n\t\t\t\t\t\t\t\t\trmsdata.push(amp * 1000);\r\n\r\n\t\t\t\t\t\t\t\t\tif (rmsdata.length > 50) rmsdata = _.last(rmsdata, 50);\r\n\r\n\t\t\t\t\t\t\t\t\tthis.recordRmsData = _.clone(rmsdata);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction (e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"E\", e);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsec = sec + 50;\r\n\r\n\t\t\t\t\t\tif (sec % 1000 === 0) this.recordTime = sec;\r\n\t\t\t\t\t}, 50);\r\n\r\n\t\t\t\t\tthis.isRecording = true;\r\n\t\t\t\t\tthis.cancelOpacity = 0;\r\n\t\t\t\t\tthis.recordRmsData = [];\r\n\t\t\t\t\tthis.recordTime = 0;\r\n\t\t\t\t\tthis.record = null;\r\n\r\n\t\t\t\t\tthis.cordovaMediaRecorder.startRecord();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.prepareRecording = null;\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tinitRecording() {\r\n\t\t\tif (\r\n\t\t\t\tthis.prepareRecording ||\r\n\t\t\t\tthis.isRecording ||\r\n\t\t\t\tthis.cordovaMediaRecorder\r\n\t\t\t)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (window.cordova && !f.isios()) {\r\n\t\t\t\treturn this.initRecordingCordova();\r\n\t\t\t}\r\n\r\n\t\t\tthis.prepareRecording = cancelable(\r\n\t\t\t\tthis.core\r\n\t\t\t\t\t.initMediaRecorder()\r\n\t\t\t\t\t.then((recorder) => {\r\n\t\t\t\t\t\tthis.microphoneDisabled = false;\r\n\r\n\t\t\t\t\t\tif (this.prepareRecording) {\r\n\t\t\t\t\t\t\treturn Promise.resolve(recorder);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trecorder.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\t\ttrack.stop();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tthis.catchPermissonsError(err);\r\n\t\t\t\t\t\treturn Promise.reject(err);\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\tthis.prepareRecording\r\n\t\t\t\t.then((recorder) => {\r\n\t\t\t\t\tthis.mediaRecorder = recorder;\r\n\r\n\t\t\t\t\tthis.audioContext = this.core.getAudioContext();\r\n\t\t\t\t\tthis.audioAnalyser = this.audioContext.createAnalyser();\r\n\r\n\t\t\t\t\t//var audioDataArray = new Uint8Array(this.audioAnalyser.frequencyBinCount)\r\n\r\n\t\t\t\t\tvar src = this.audioContext.createMediaStreamSource(\r\n\t\t\t\t\t\tthis.mediaRecorder.stream\r\n\t\t\t\t\t);\r\n\t\t\t\t\tsrc.connect(this.audioAnalyser);\r\n\r\n\t\t\t\t\tthis.startRecording();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.prepareRecording = null;\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tstartRecording() {\r\n\t\t\tlet currentPlaying = this.$store.state.currentPlayingVoiceMessage;\r\n\r\n\t\t\tif (currentPlaying) {\r\n\t\t\t\tcurrentPlaying.pause();\r\n\t\t\t}\r\n\r\n\t\t\tthis.$store.commit(\"SET_VOICERECORDING\", true);\r\n\r\n\t\t\tthis.isRecording = true;\r\n\t\t\tthis.cancelOpacity = 0;\r\n\t\t\tthis.recordRmsData = [];\r\n\t\t\tthis.recordTime = 0;\r\n\t\t\tthis.record = null;\r\n\t\t\tthis.mediaRecorder.start();\r\n\r\n\t\t\tvar sec = 0;\r\n\t\t\tvar rmsdata = [];\r\n\r\n\t\t\tthis.interval = setInterval(() => {\r\n\t\t\t\tvar dataArray = new Uint8Array(this.audioAnalyser.frequencyBinCount);\r\n\r\n\t\t\t\tthis.audioAnalyser.getByteFrequencyData(dataArray);\r\n\r\n\t\t\t\trmsdata.push(this.generateRms(dataArray));\r\n\r\n\t\t\t\tif (rmsdata.length > 50) rmsdata = _.last(rmsdata, 50);\r\n\r\n\t\t\t\tsec = sec + 50;\r\n\r\n\t\t\t\tthis.recordRmsData = _.clone(rmsdata);\r\n\r\n\t\t\t\tif (sec % 1000 === 0) {\r\n\t\t\t\t\tthis.recordTime = sec;\r\n\t\t\t\t}\r\n\t\t\t}, 50);\r\n\t\t},\r\n\r\n\t\tcheckaudioForSend: function (record, sendnow) {\r\n\t\t\tif (record.duration < 1) {\r\n\t\t\t\tthis.clear();\r\n\t\t\t} else {\r\n\t\t\t\tif (sendnow) {\r\n\t\t\t\t\tthis.sendVoiceMessage(record);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.record = record;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetduration(file) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tf.readFile(file)\r\n\t\t\t\t\t.then((arraybuffer) => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tthis.audioContext.decodeAudioData(arraybuffer, (buffer) => {\r\n\t\t\t\t\t\t\t\tresolve(buffer.duration);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(reject);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcreateVoiceMessage(event, sendnow) {\r\n\t\t\tvar c = () => {\r\n\t\t\t\t//this.record =\r\n\r\n\t\t\t\tthis.checkaudioForSend(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfile: event.data,\r\n\t\t\t\t\t\tid: f.makeid(),\r\n\t\t\t\t\t\tduration: event.duration,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsendnow\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\t\tif (event.duration) {\r\n\t\t\t\tc();\r\n\t\t\t} else {\r\n\t\t\t\tthis.getduration(event.data)\r\n\t\t\t\t\t.then((duration) => {\r\n\t\t\t\t\t\tevent.duration = duration;\r\n\r\n\t\t\t\t\t\tc();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/*f.readFile(event.data).then(arraybuffer => {\r\n\r\n\t\t\t\tconsole.log('arraybuffer', arraybuffer)\r\n\r\n\t\t\t\tthis.audioContext.decodeAudioData(arraybuffer, (buffer) => {\r\n\r\n\t\t\t\t\tconsole.log('this.record', this.record)\r\n\t\t\t\t\tconsole.log('this.buffer', buffer)\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tthis.record = {\r\n\t\t\t\t\t\tfile: event.data,\r\n\t\t\t\t\t\tid: f.makeid()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.record.duration = buffer.duration\r\n\r\n\t\t\t\t\tthis.checkaudioForSend(sendnow)\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tconsole.error('e', e)\r\n\t\t\t\tthis.clear()\r\n\t\t\t\t//\r\n\t\t\t})*/\r\n\t\t},\r\n\r\n\t\tgenerateRms(frequencies) {\r\n\t\t\treturn +Math.sqrt(\r\n\t\t\t\tfrequencies.reduce((a, b) => a + b ** 2) / frequencies.length\r\n\t\t\t).toPrecision(4);\r\n\t\t},\r\n\r\n\t\tstopRecording({ cancel, sendnow }) {\r\n\r\n\t\t\tthis.$store.commit(\"SET_VOICERECORDING\", false);\r\n\r\n\t\t\tif (this.prepareRecording) {\r\n\t\t\t\tthis.prepareRecording.cancel();\r\n\t\t\t\tthis.prepareRecording = null;\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isRecording = false;\r\n\r\n\t\t\tif (this.interval) {\r\n\t\t\t\tclearInterval(this.interval);\r\n\t\t\t\tthis.interval = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.mediaRecorder) {\r\n\t\t\t\tif (cancel) {\r\n\t\t\t\t\t//this.mediaRecorder.ondataavailable = () => { }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar hasdata = false\r\n\t\t\t\t\tthis.mediaRecorder.addEventListener(\"dataavailable\", (event) => {\r\n\t\t\t\t\t\tif(hasdata) return\r\n\r\n\t\t\t\t\t\thasdata = true\r\n\r\n\t\t\t\t\t\tthis.createVoiceMessage(event, sendnow);\r\n\t\t\t\t\t}); //ondataavailable = (event) => this.createVoiceMessage(event, sendnow)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.mediaRecorder.stop();\r\n\r\n\t\t\t\tthis.mediaRecorder.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.mediaRecorder = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cordovaMediaRecorder) {\r\n\t\t\t\tif (cancel) {\r\n\t\t\t\t\tthis.cancelledCordovaMediaRecorder = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelledCordovaMediaRecorder = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.cordovaMediaRecorder.stopRecord();\r\n\t\t\t\tthis.cordovaMediaRecorder = null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tasync sendVoiceMessage(record) {\r\n\t\t\tif (!record) record = this.record;\r\n\r\n\t\t\tif (!record) {\r\n\t\t\t\tthis.clear();\r\n\t\t\t}\r\n\r\n\t\t\tthis.recordRmsData = [];\r\n\r\n\t\t\tconst base64 = await this.core.convertAudioToBase64(record.file);\r\n\r\n\t\t\tconst id = f.makeid();\r\n\r\n\t\t\tconst meta = {\r\n\t\t\t\ttype: \"audio\",\r\n\t\t\t\tid: id,\r\n\t\t\t\tbase64: base64,\r\n\t\t\t};\r\n\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tthis.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat;\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\treturn this.core.mtrx.sendAudio(this.chat, base64, null, meta, {\r\n\t\t\t\t\t\trelation: this.relationEvent,\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tthis.$emit(\"sentError\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tclear() {\r\n\t\t\tthis.record = null;\r\n\t\t\tthis.recordRmsData = [];\r\n\t\t\tthis.recordTime = 0;\r\n\r\n\t\t\tif (this.interval) {\r\n\t\t\t\tclearInterval(this.interval);\r\n\t\t\t\tthis.interval = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cordovaMediaRecorder) {\r\n\t\t\t\tthis.cordovaMediaRecorder = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.mediaRecorder) {\r\n\t\t\t\tthis.mediaRecorder.stop();\r\n\t\t\t\tthis.mediaRecorder.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t});\r\n\t\t\t\tthis.mediaRecorder = null;\r\n\t\t\t}\r\n\r\n\t\t\t/*if (this.audioContext){\r\n\t\t\t\tthis.audioContext.close()\r\n\t\t\t}*/\r\n\t\t},\r\n\r\n\t\t/*async convertAudioToBase64(blob) {\r\n\t\t\tconst reader = new FileReader()\r\n\t\t\treader.readAsDataURL(blob)\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\treader.onloadend = () => {\r\n\t\t\t\t\tresolve(reader.result)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},*/\r\n\r\n\t\tsetOpacity(opacity) {\r\n\t\t\tthis.cancelOpacity = opacity;\r\n\t\t},\r\n\r\n\t\tshowinputmenu : function(){\r\n\t\t\t/*this.core.menu({\r\n\t\t\t\titems: this.menu,\r\n\t\t\t});*/\r\n\t\t\tthis.menuState.set({\r\n\t\t\t\titems: this.menu,\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=efa2321a&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=efa2321a&prod&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"efa2321a\",\n  null\n  ,true\n)\n\nexport default component.exports"],"sourceRoot":""}