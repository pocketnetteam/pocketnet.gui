(function(e){function t(t){for(var r,i,o=t[0],a=t[1],s=0,c=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&c.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);l&&l(t);while(c.length)c.shift()()}var r={},n={5:0};function i(e){return o.p+"matrix-element."+({}[e]||e)+".min.js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(e);var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(d);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,r[1](l)}n[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var a=window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=s;o(o.s="5a74")})({0:function(e,t){},"0086":function(t,r,n){function i(e){return-1!==e.type.indexOf("mouse")?e.clientX:e.touches[0].clientX}function o(e){return-1!==e.type.indexOf("mouse")?e.clientY:e.touches[0].clientY}var a=function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,r)}catch(e){}return t}(),s=0,c={install:function(e,t){var r=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",namespace:"touch"},t);function n(e){var t=this.$$touchObj,r=e.type.indexOf("touch")>=0,n=e.type.indexOf("mouse")>=0,a=this;r&&(s=e.timeStamp),n&&s&&e.timeStamp-s<350||t.touchStarted||(p(this),t.touchStarted=!0,t.touchMoved=!1,t.swipeOutBounded=!1,t.startX=i(e),t.startY=o(e),t.currentX=0,t.currentY=0,t.touchStartTime=e.timeStamp,t.touchHoldTimer=setTimeout((function(){t.touchHoldTimer=null,f(e,a,"touchhold")}),t.options.touchHoldTolerance),f(e,this,"start"))}function c(e){var t=this.$$touchObj;if(t.currentX=i(e),t.currentY=o(e),t.touchMoved){if(!t.swipeOutBounded){var r=t.options.swipeTolerance;t.swipeOutBounded=Math.abs(t.startX-t.currentX)>r&&Math.abs(t.startY-t.currentY)>r}}else{var n=t.options.tapTolerance;t.touchMoved=Math.abs(t.startX-t.currentX)>n||Math.abs(t.startY-t.currentY)>n,t.touchMoved&&(m(t),f(e,this,"moved"))}t.touchMoved&&f(e,this,"moving")}function l(){var e=this.$$touchObj;m(e),v(this),e.touchStarted=e.touchMoved=!1,e.startX=e.startY=0}function d(e){var t=this.$$touchObj,r=e.type.indexOf("touch")>=0,n=e.type.indexOf("mouse")>=0;r&&(s=e.timeStamp);var i=r&&!t.touchHoldTimer;if(m(t),t.touchStarted=!1,v(this),!(n&&s&&e.timeStamp-s<350))if(f(e,this,"end"),t.touchMoved){if(!t.swipeOutBounded){var o,a=t.options.swipeTolerance,c=Math.abs(t.startY-t.currentY),l=Math.abs(t.startX-t.currentX);(c>a||l>a)&&(o=c>l?t.startY>t.currentY?"top":"bottom":t.startX>t.currentX?"left":"right",t.callbacks["swipe."+o]?f(e,this,"swipe."+o,o):f(e,this,"swipe",o))}}else if(t.callbacks.longtap&&e.timeStamp-t.touchStartTime>t.options.longTapTimeInterval)e.cancelable&&e.preventDefault(),f(e,this,"longtap");else{if(t.callbacks.touchhold&&i)return void(e.cancelable&&e.preventDefault());f(e,this,"tap")}}function u(){p(this)}function h(){v(this)}function f(e,t,r,n){var i=t.$$touchObj,o=i&&i.callbacks[r]||[];if(0===o.length)return null;for(var a=0;a<o.length;a++){var s=o[a];s.modifiers.stop&&e.stopPropagation(),s.modifiers.prevent&&e.cancelable&&e.preventDefault(),s.modifiers.self&&e.target!==e.currentTarget||"function"===typeof s.value&&(n?s.value(n,e):s.value(e))}}function p(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.add(t)}function v(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.remove(t)}function m(e){e.touchHoldTimer&&(clearTimeout(e.touchHoldTimer),e.touchHoldTimer=null)}function g(e,t){var n=e.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:r};return t&&(n.options=Object.assign({},n.options,t)),e.$$touchObj=n,e.$$touchObj}e.directive(r.namespace,{bind:function(e,t){var r=g(e),i=!!a&&{passive:!0},o=t.arg||"tap";switch(o){case"swipe":var s=t.modifiers;if(s.left||s.right||s.top||s.bottom){for(var f in t.modifiers)if(["left","right","top","bottom"].indexOf(f)>=0){var p="swipe."+f;r.callbacks[p]=r.callbacks[p]||[],r.callbacks[p].push(t)}}else r.callbacks.swipe=r.callbacks.swipe||[],r.callbacks.swipe.push(t);break;case"start":case"moving":t.modifiers.disablePassive&&(i=!1);default:r.callbacks[o]=r.callbacks[o]||[],r.callbacks[o].push(t)}r.hasBindTouchEvents||(e.addEventListener("touchstart",n,i),e.addEventListener("touchmove",c,i),e.addEventListener("touchcancel",l),e.addEventListener("touchend",d),r.options.disableClick||(e.addEventListener("mousedown",n),e.addEventListener("mousemove",c),e.addEventListener("mouseup",d),e.addEventListener("mouseenter",u),e.addEventListener("mouseleave",h)),r.hasBindTouchEvents=!0)},unbind:function(e){e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",c),e.removeEventListener("touchcancel",l),e.removeEventListener("touchend",d),e.$$touchObj&&!e.$$touchObj.options.disableClick&&(e.removeEventListener("mousedown",n),e.removeEventListener("mousemove",c),e.removeEventListener("mouseup",d),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseleave",h)),delete e.$$touchObj}}),e.directive(r.namespace+"-class",{bind:function(e,t){g(e,{touchClass:t.value})}}),e.directive(r.namespace+"-options",{bind:function(e,t){g(e,t.value)}})}};t.exports=c},"00ce":function(t,r,n){"use strict";var i,o=n("a645"),a=n("417f"),s=n("dc99"),c=n("1409"),l=n("67ee"),d=n("0d25"),u=n("67d9"),h=Function,f=function(t){try{return h('"use strict"; return ('+t+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var v=function(){throw new d},m=p?function(){try{return v}catch(e){try{return p(arguments,"callee").get}catch(t){return v}}}():v,g=n("5156")(),y=n("0a36")(),b=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),_={},w="undefined"!==typeof Uint8Array&&b?b(Uint8Array):i,S={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":g&&b?b([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"===typeof Atomics?i:Atomics,"%BigInt%":"undefined"===typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":a,"%Float32Array%":"undefined"===typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":_,"%Int8Array%":"undefined"===typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&b?b(b([][Symbol.iterator]())):i,"%JSON%":"object"===typeof JSON?JSON:i,"%Map%":"undefined"===typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&g&&b?b((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?i:Promise,"%Proxy%":"undefined"===typeof Proxy?i:Proxy,"%RangeError%":s,"%ReferenceError%":c,"%Reflect%":"undefined"===typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&g&&b?b((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&b?b(""[Symbol.iterator]()):i,"%Symbol%":g?Symbol:i,"%SyntaxError%":l,"%ThrowTypeError%":m,"%TypedArray%":w,"%TypeError%":d,"%Uint8Array%":"undefined"===typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?i:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"===typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?i:WeakSet};if(b)try{null.error}catch(e){var E=b(b(e));S["%Error.prototype%"]=E}var k=function e(t){var r;if("%AsyncFunction%"===t)r=f("async function () {}");else if("%GeneratorFunction%"===t)r=f("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=f("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&b&&(r=b(i.prototype))}return S[t]=r,r},I={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=n("0f7c"),T=n("9671"),R=C.call(Function.call,Array.prototype.concat),x=C.call(Function.apply,Array.prototype.splice),O=C.call(Function.call,String.prototype.replace),M=C.call(Function.call,String.prototype.slice),A=C.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,j=function(e){var t=M(e,0,1),r=M(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return O(e,P,(function(e,t,r,i){n[n.length]=r?O(i,D,"$1"):t||e})),n},L=function(e,t){var r,n=e;if(T(I,n)&&(r=I[n],n="%"+r[0]+"%"),T(S,n)){var i=S[n];if(i===_&&(i=k(n)),"undefined"===typeof i&&!t)throw new d("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new l("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new d('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=j(e),n=r.length>0?r[0]:"",i=L("%"+n+"%",t),o=i.name,a=i.value,s=!1,c=i.alias;c&&(n=c[0],x(r,R([0,1],c)));for(var u=1,h=!0;u<r.length;u+=1){var f=r[u],v=M(f,0,1),m=M(f,-1);if(('"'===v||"'"===v||"`"===v||'"'===m||"'"===m||"`"===m)&&v!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&h||(s=!0),n+="."+f,o="%"+n+"%",T(S,o))a=S[o];else if(null!=a){if(!(f in a)){if(!t)throw new d("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&u+1>=r.length){var g=p(a,f);h=!!g,a=h&&"get"in g&&!("originalValue"in g.get)?g.get:a[f]}else h=T(a,f),a=a[f];h&&!s&&(S[o]=a)}}return a}},"00ee":function(e,t,r){"use strict";var n=r("b622"),i=n("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"0104":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"items"},[t("transition-group",{attrs:{name:"menulis2t",tag:"div"}},e._l(e.filteredItems,(function(r){return t("div",{key:r.click,staticClass:"item"},[e._t("default",(function(){return[t("router-link",{attrs:{to:"/"+r.route}},[t("div",{staticClass:"iwr"},[r.icon?t("i",{class:r.icon}):e._e(),t("span",[e._v(e._s(r.name&&"string"===typeof r.name?r.name:"undefined"))])])])]}),{item:r})],2)})),0)],1)])},i=[],o={name:"simpleMenu",props:{items:{type:Array,required:!0}},computed:{filteredItems:function(){return this.items.filter(e=>!e.hidden)}}},a=o,s=r("2877");function c(e){var t=r("0a7f");t.__inject__&&t.__inject__(e)}var l=Object(s["a"])(a,n,i,!1,c,"f8ab8b44",null,!0);t["a"]=l.exports},"0154":function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["SessionLoggedOut"]="Session.logged_out",e["NoConsent"]="no_consent"}(n||(n={}))},"0176":function(e,t,r){"use strict";var n=r("a593"),i=r("7769"),o=r("0a3f"),a=r("8b5c"),s=r("bfa8"),c=r("4563");function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){l(e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||a.adapter;return t(e).then((function(t){return l(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(l(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},"023f":function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("1467"),a=n("9060");r.NONCE_SIZE=8,r.LAST_BLOCK_FLAG=1,r.COUNTER_MAX=4294967295;class s{static importKey(e,t,r,n=new a.WebCryptoProvider){return i(this,void 0,void 0,(function*(){return new s(yield o.AEAD.importKey(e,r,n),t)}))}constructor(e,t){this._aead=e,this._nonce_encoder=new l(t)}seal(e,t=!1,r=new Uint8Array(0)){return i(this,void 0,void 0,(function*(){return this._aead.seal(e,this._nonce_encoder.next(t),r)}))}clear(){return this._aead.clear(),this}}r.StreamEncryptor=s;class c{static importKey(e,t,r,n=new a.WebCryptoProvider){return i(this,void 0,void 0,(function*(){return new c(yield o.AEAD.importKey(e,r,n),t)}))}constructor(e,t){this._aead=e,this._nonce_encoder=new l(t)}open(e,t=!1,r=new Uint8Array(0)){return i(this,void 0,void 0,(function*(){return this._aead.open(e,this._nonce_encoder.next(t),r)}))}clear(){return this._aead.clear(),this}}r.StreamDecryptor=c;class l{constructor(e){if(e.length!==r.NONCE_SIZE)throw new Error("STREAM: nonce must be 8-bits (got "+e.length);this.buffer=new ArrayBuffer(r.NONCE_SIZE+4+1),this.view=new DataView(this.buffer),this.array=new Uint8Array(this.buffer),this.array.set(e),this.counter=0,this.finished=!1}next(e){if(this.finished)throw new Error("STREAM: already finished");if(this.view.setInt32(8,this.counter,!1),e)this.view.setInt8(12,r.LAST_BLOCK_FLAG),this.finished=!0;else if(this.counter+=1,this.counter>r.COUNTER_MAX)throw new Error("STREAM counter overflowed");return this.array}}},"029d":function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientWidgetApi=void 0;var i=n("faa1"),o=n("316e"),a=n("1d04"),s=n("97c2"),c=n("ac71"),l=n("fc9b"),d=n("2501"),u=n("ac68"),h=n("e008"),f=n("7a3a"),p=n("d68a");function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(O){return{type:"throw",arg:O}}}e.wrap=l;var u={};function h(){}function f(){}function p(){}var g={};c(g,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(R([])));b&&b!==t&&r.call(b,o)&&(g=b);var _=p.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(n,o,a,s){var c=d(e[n],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==v(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return x()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),u;var i=d(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,n(_,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new S(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(_),c(_,s,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function g(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(error){return void r(error)}s.done?t(c):Promise.resolve(c).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))}}function b(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r["return"]||r["return"]()}finally{if(s)throw o}}}}function _(e,t){if(e){if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function C(e,t,r){return t&&I(e.prototype,t),r&&I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function x(e){var t=A();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function D(e,t,r){return t=j(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=L(e,"string");return"symbol"===v(t)?t:String(t)}function L(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function N(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new U(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function U(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return U=function(e){this.s=e,this.n=e.next},U.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s["return"];return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s["return"];return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new U(e)}var F=function(t){T(n,t);var r=x(n);function n(e,t,i){var s;if(k(this,n),s=r.call(this),s.widget=e,s.iframe=t,s.driver=i,D(M(s),"transport",void 0),D(M(s),"contentLoadedActionSent",!1),D(M(s),"allowedCapabilities",new Set),D(M(s),"allowedEvents",[]),D(M(s),"isStopped",!1),D(M(s),"turnServers",null),D(M(s),"contentLoadedWaitTimer",void 0),null===t||void 0===t||!t.contentWindow)throw new Error("No iframe supplied");if(!e)throw new Error("Invalid widget");if(!i)throw new Error("Invalid driver");return s.transport=new o.PostmessageTransport(a.WidgetApiDirection.ToWidget,e.id,t.contentWindow,window),s.transport.targetOrigin=e.origin,s.transport.on("message",s.handleMessage.bind(M(s))),t.addEventListener("load",s.onIframeLoad.bind(M(s))),s.transport.start(),s}return C(n,[{key:"hasCapability",value:function(e){return this.allowedCapabilities.has(e)}},{key:"canUseRoomTimeline",value:function(e){return this.hasCapability("org.matrix.msc2762.timeline:".concat(f.Symbols.AnyRoom))||this.hasCapability("org.matrix.msc2762.timeline:".concat(e))}},{key:"canSendRoomEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.allowedEvents.some((function(r){return r.matchesAsRoomEvent(d.EventDirection.Send,e,t)}))}},{key:"canSendStateEvent",value:function(e,t){return this.allowedEvents.some((function(r){return r.matchesAsStateEvent(d.EventDirection.Send,e,t)}))}},{key:"canSendToDeviceEvent",value:function(e){return this.allowedEvents.some((function(t){return t.matchesAsToDeviceEvent(d.EventDirection.Send,e)}))}},{key:"canReceiveRoomEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.allowedEvents.some((function(r){return r.matchesAsRoomEvent(d.EventDirection.Receive,e,t)}))}},{key:"canReceiveStateEvent",value:function(e,t){return this.allowedEvents.some((function(r){return r.matchesAsStateEvent(d.EventDirection.Receive,e,t)}))}},{key:"canReceiveToDeviceEvent",value:function(e){return this.allowedEvents.some((function(t){return t.matchesAsToDeviceEvent(d.EventDirection.Receive,e)}))}},{key:"canReceiveRoomAccountData",value:function(e){return this.allowedEvents.some((function(t){return t.matchesAsRoomAccountData(d.EventDirection.Receive,e)}))}},{key:"stop",value:function(){this.isStopped=!0,this.transport.stop()}},{key:"beginCapabilities",value:function(){var e,t=this;this.emit("preparing"),this.transport.send(s.WidgetApiToWidgetAction.Capabilities,{}).then((function(r){return e=r.capabilities,t.driver.validateCapabilities(new Set(r.capabilities))})).then((function(r){console.log("Widget ".concat(t.widget.id," is allowed capabilities:"),Array.from(r)),t.allowedCapabilities=r,t.allowedEvents=d.WidgetEventCapability.findEventCapabilities(r),t.notifyCapabilities(e),t.emit("ready")}))["catch"]((function(e){t.emit("error:preparing",e)}))}},{key:"notifyCapabilities",value:function(e){var t=this;this.transport.send(s.WidgetApiToWidgetAction.NotifyCapabilities,{requested:e,approved:Array.from(this.allowedCapabilities)})["catch"]((function(e){console.warn("non-fatal error notifying widget of approved capabilities:",e)})).then((function(){t.emit("capabilitiesNotified")}))}},{key:"onIframeLoad",value:function(e){this.widget.waitForIframeLoad?this.beginCapabilities():(console.log("waitForIframeLoad is false: waiting for widget to send contentLoaded"),this.contentLoadedWaitTimer=setTimeout((function(){console.error("Widget specified waitForIframeLoad=false but timed out waiting for contentLoaded event!")}),1e4),this.contentLoadedActionSent=!1)}},{key:"handleContentLoadedAction",value:function(e){if(void 0!==this.contentLoadedWaitTimer&&(clearTimeout(this.contentLoadedWaitTimer),this.contentLoadedWaitTimer=void 0),this.contentLoadedActionSent)throw new Error("Improper sequence: ContentLoaded Action can only be sent once after the widget loaded and should only be used if waitForIframeLoad is false (default=true)");this.widget.waitForIframeLoad?this.transport.reply(e,{error:{message:"Improper sequence: not expecting ContentLoaded event if waitForIframeLoad is true (default=true)"}}):(this.transport.reply(e,{}),this.beginCapabilities()),this.contentLoadedActionSent=!0}},{key:"replyVersions",value:function(e){this.transport.reply(e,{supported_versions:l.CurrentApiVersions})}},{key:"handleCapabilitiesRenegotiate",value:function(e){var t,r=this;this.transport.reply(e,{});var n=(null===(t=e.data)||void 0===t?void 0:t.capabilities)||[],i=new Set(n.filter((function(e){return!r.hasCapability(e)})));if(0===i.size)return this.notifyCapabilities([]);this.driver.validateCapabilities(i).then((function(e){e.forEach((function(e){return r.allowedCapabilities.add(e)}));var t=d.WidgetEventCapability.findEventCapabilities(e);return t.forEach((function(e){return r.allowedEvents.push(e)})),r.notifyCapabilities(Array.from(i))}))}},{key:"handleNavigate",value:function(t){var r,n,i=this;if(!this.hasCapability(c.MatrixCapabilities.MSC2931Navigate))return this.transport.reply(t,{error:{message:"Missing capability"}});if(null===(r=t.data)||void 0===r||!r.uri||null===(n=t.data)||void 0===n||!n.uri.toString().startsWith("https://matrix.to/#"))return this.transport.reply(t,{error:{message:"Invalid matrix.to URI"}});var o=function(e){return console.error("[ClientWidgetApi] Failed to handle navigation: ",e),i.transport.reply(t,{error:{message:"Error handling navigation"}})};try{this.driver.navigate(t.data.uri.toString())["catch"]((function(e){return o(e)})).then((function(){return i.transport.reply(t,{})}))}catch(e){return o(e)}}},{key:"handleOIDC",value:function(e){var t=this,r=1,n=function(n,i){return i=i||{},r>1?t.transport.send(s.WidgetApiToWidgetAction.OpenIDCredentials,E({state:n,original_request_id:e.requestId},i)):t.transport.reply(e,E({state:n},i))},i=function(i){return console.error("[ClientWidgetApi] Failed to handle OIDC: ",i),r>1?n(u.OpenIDRequestState.Blocked):t.transport.reply(e,{error:{message:i}})},o=new h.SimpleObservable((function(e){return e.state===u.OpenIDRequestState.PendingUserConfirmation&&r>1?(o.close(),i("client provided out-of-phase response to OIDC flow")):e.state===u.OpenIDRequestState.PendingUserConfirmation?(n(e.state),void r++):e.state!==u.OpenIDRequestState.Allowed||e.token?(e.state===u.OpenIDRequestState.Blocked&&(e.token=void 0),o.close(),n(e.state,e.token)):i("client provided invalid OIDC token for an allowed request")}));this.driver.askOpenID(o)}},{key:"handleReadRoomAccountData",value:function(e){var t=this,r=Promise.resolve([]);return r=this.driver.readRoomAccountData(e.data.type),this.canReceiveRoomAccountData(e.data.type)?r.then((function(r){t.transport.reply(e,{events:r})})):this.transport.reply(e,{error:{message:"Cannot read room account data of this type"}})}},{key:"handleReadEvents",value:function(e){var t=this;if(!e.data.type)return this.transport.reply(e,{error:{message:"Invalid request - missing event type"}});if(void 0!==e.data.limit&&(!e.data.limit||e.data.limit<0))return this.transport.reply(e,{error:{message:"Invalid request - limit out of range"}});var r=null;if(e.data.room_ids){r=e.data.room_ids,Array.isArray(r)||(r=[r]);var n,i=b(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!this.canUseRoomTimeline(o))return this.transport.reply(e,{error:{message:"Unable to access room timeline: ".concat(o)}})}}catch(d){i.e(d)}finally{i.f()}}var a=e.data.limit||0,s=e.data.since,c=Promise.resolve([]);if(void 0!==e.data.state_key){var l=!0===e.data.state_key?void 0:e.data.state_key.toString();if(!this.canReceiveStateEvent(e.data.type,null!==l&&void 0!==l?l:null))return this.transport.reply(e,{error:{message:"Cannot read state events of this type"}});c=this.driver.readStateEvents(e.data.type,l,a,r)}else{if(!this.canReceiveRoomEvent(e.data.type,e.data.msgtype))return this.transport.reply(e,{error:{message:"Cannot read room events of this type"}});c=this.driver.readRoomEvents(e.data.type,e.data.msgtype,a,r,s)}return c.then((function(r){return t.transport.reply(e,{events:r})}))}},{key:"handleSendEvent",value:function(e){var t=this;if(!e.data.type)return this.transport.reply(e,{error:{message:"Invalid request - missing event type"}});if(e.data.room_id&&!this.canUseRoomTimeline(e.data.room_id))return this.transport.reply(e,{error:{message:"Unable to access room timeline: ".concat(e.data.room_id)}});var r,n=void 0!==e.data.delay||void 0!==e.data.parent_delay_id;if(n&&!this.hasCapability(c.MatrixCapabilities.MSC4157SendDelayedEvent))return this.transport.reply(e,{error:{message:"Missing capability"}});if(void 0!==e.data.state_key){if(!this.canSendStateEvent(e.data.type,e.data.state_key))return this.transport.reply(e,{error:{message:"Cannot send state events of this type"}});var i,o;if(n)r=this.driver.sendDelayedEvent(null!==(i=e.data.delay)&&void 0!==i?i:null,null!==(o=e.data.parent_delay_id)&&void 0!==o?o:null,e.data.type,e.data.content||{},e.data.state_key,e.data.room_id);else r=this.driver.sendEvent(e.data.type,e.data.content||{},e.data.state_key,e.data.room_id)}else{var a,s,l=e.data.content||{},d=l["msgtype"];if(!this.canSendRoomEvent(e.data.type,d))return this.transport.reply(e,{error:{message:"Cannot send room events of this type"}});if(n)r=this.driver.sendDelayedEvent(null!==(a=e.data.delay)&&void 0!==a?a:null,null!==(s=e.data.parent_delay_id)&&void 0!==s?s:null,e.data.type,l,null,e.data.room_id);else r=this.driver.sendEvent(e.data.type,l,null,e.data.room_id)}r.then((function(r){return t.transport.reply(e,E({room_id:r.roomId},"eventId"in r?{event_id:r.eventId}:{delay_id:r.delayId}))}))["catch"]((function(r){return console.error("error sending event: ",r),t.transport.reply(e,{error:{message:"Error sending event"}})}))}},{key:"handleUpdateDelayedEvent",value:function(e){var t=this;if(!e.data.delay_id)return this.transport.reply(e,{error:{message:"Invalid request - missing delay_id"}});if(!this.hasCapability(c.MatrixCapabilities.MSC4157UpdateDelayedEvent))return this.transport.reply(e,{error:{message:"Missing capability"}});switch(e.data.action){case p.UpdateDelayedEventAction.Cancel:case p.UpdateDelayedEventAction.Restart:case p.UpdateDelayedEventAction.Send:this.driver.updateDelayedEvent(e.data.delay_id,e.data.action).then((function(){return t.transport.reply(e,{})}))["catch"]((function(r){return console.error("error updating delayed event: ",r),t.transport.reply(e,{error:{message:"Error updating delayed event"}})}));break;default:return this.transport.reply(e,{error:{message:"Invalid request - unsupported action"}})}}},{key:"handleSendToDevice",value:function(){var e=y(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.data.type){e.next=5;break}return e.next=3,this.transport.reply(t,{error:{message:"Invalid request - missing event type"}});case 3:e.next=32;break;case 5:if(t.data.messages){e.next=10;break}return e.next=8,this.transport.reply(t,{error:{message:"Invalid request - missing event contents"}});case 8:e.next=32;break;case 10:if("boolean"===typeof t.data.encrypted){e.next=15;break}return e.next=13,this.transport.reply(t,{error:{message:"Invalid request - missing encryption flag"}});case 13:e.next=32;break;case 15:if(this.canSendToDeviceEvent(t.data.type)){e.next=20;break}return e.next=18,this.transport.reply(t,{error:{message:"Cannot send to-device events of this type"}});case 18:e.next=32;break;case 20:return e.prev=20,e.next=23,this.driver.sendToDevice(t.data.type,t.data.encrypted,t.data.messages);case 23:return e.next=25,this.transport.reply(t,{});case 25:e.next=32;break;case 27:return e.prev=27,e.t0=e["catch"](20),console.error("error sending to-device event",e.t0),e.next=32,this.transport.reply(t,{error:{message:"Error sending event"}});case 32:case"end":return e.stop()}}),e,this,[[20,27]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pollTurnServers",value:function(){var e=y(m().mark((function e(t,r){var n,i,o,a,c,l;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.transport.send(s.WidgetApiToWidgetAction.UpdateTurnServers,r);case 3:n=!1,i=!1,e.prev=5,a=N(t);case 7:return e.next=9,a.next();case 9:if(!(n=!(c=e.sent).done)){e.next=16;break}return l=c.value,e.next=13,this.transport.send(s.WidgetApiToWidgetAction.UpdateTurnServers,l);case 13:n=!1,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](5),i=!0,o=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==a["return"]){e.next=27;break}return e.next=27,a["return"]();case 27:if(e.prev=27,!i){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(22);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](0),console.error("error polling for TURN servers",e.t1);case 37:case"end":return e.stop()}}),e,this,[[0,34],[5,18,22,32],[23,,27,31]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"handleWatchTurnServers",value:function(){var e=y(m().mark((function e(t){var r,n,i,o;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasCapability(c.MatrixCapabilities.MSC3846TurnServers)){e.next=5;break}return e.next=3,this.transport.reply(t,{error:{message:"Missing capability"}});case 3:e.next=30;break;case 5:if(!this.turnServers){e.next=10;break}return e.next=8,this.transport.reply(t,{});case 8:e.next=30;break;case 10:return e.prev=10,r=this.driver.getTurnServers(),e.next=14,r.next();case 14:if(n=e.sent,i=n.done,o=n.value,!i){e.next=19;break}throw new Error("Client refuses to provide any TURN servers");case 19:return e.next=21,this.transport.reply(t,{});case 21:this.pollTurnServers(r,o),this.turnServers=r,e.next=30;break;case 25:return e.prev=25,e.t0=e["catch"](10),console.error("error getting first TURN server results",e.t0),e.next=30,this.transport.reply(t,{error:{message:"TURN servers not available"}});case 30:case"end":return e.stop()}}),e,this,[[10,25]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleUnwatchTurnServers",value:function(){var e=y(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasCapability(c.MatrixCapabilities.MSC3846TurnServers)){e.next=5;break}return e.next=3,this.transport.reply(t,{error:{message:"Missing capability"}});case 3:e.next=15;break;case 5:if(this.turnServers){e.next=10;break}return e.next=8,this.transport.reply(t,{});case 8:e.next=15;break;case 10:return e.next=12,this.turnServers["return"](void 0);case 12:return this.turnServers=null,e.next=15,this.transport.reply(t,{});case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleReadRelations",value:function(){var e=y(m().mark((function e(t){var r,n,i=this;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.data.event_id){e.next=2;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Invalid request - missing event ID"}}));case 2:if(!(void 0!==t.data.limit&&t.data.limit<0)){e.next=4;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Invalid request - limit out of range"}}));case 4:if(void 0===t.data.room_id||this.canUseRoomTimeline(t.data.room_id)){e.next=6;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Unable to access room timeline: ".concat(t.data.room_id)}}));case 6:return e.prev=6,e.next=9,this.driver.readEventRelations(t.data.event_id,t.data.room_id,t.data.rel_type,t.data.event_type,t.data.from,t.data.to,t.data.limit,t.data.direction);case 9:return r=e.sent,n=r.chunk.filter((function(e){return void 0!==e.state_key?i.canReceiveStateEvent(e.type,e.state_key):i.canReceiveRoomEvent(e.type,e.content["msgtype"])})),e.abrupt("return",this.transport.reply(t,{chunk:n,prev_batch:r.prevBatch,next_batch:r.nextBatch}));case 14:return e.prev=14,e.t0=e["catch"](6),console.error("error getting the relations",e.t0),e.next=19,this.transport.reply(t,{error:{message:"Unexpected error while reading relations"}});case 19:case"end":return e.stop()}}),e,this,[[6,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleUserDirectorySearch",value:function(){var e=y(m().mark((function e(t){var r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasCapability(c.MatrixCapabilities.MSC3973UserDirectorySearch)){e.next=2;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Missing capability"}}));case 2:if("string"===typeof t.data.search_term){e.next=4;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Invalid request - missing search term"}}));case 4:if(!(void 0!==t.data.limit&&t.data.limit<0)){e.next=6;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Invalid request - limit out of range"}}));case 6:return e.prev=6,e.next=9,this.driver.searchUserDirectory(t.data.search_term,t.data.limit);case 9:return r=e.sent,e.abrupt("return",this.transport.reply(t,{limited:r.limited,results:r.results.map((function(e){return{user_id:e.userId,display_name:e.displayName,avatar_url:e.avatarUrl}}))}));case 13:return e.prev=13,e.t0=e["catch"](6),console.error("error searching in the user directory",e.t0),e.next=18,this.transport.reply(t,{error:{message:"Unexpected error while searching in the user directory"}});case 18:case"end":return e.stop()}}),e,this,[[6,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleGetMediaConfig",value:function(){var e=y(m().mark((function e(t){var r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasCapability(c.MatrixCapabilities.MSC4039UploadFile)){e.next=2;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Missing capability"}}));case 2:return e.prev=2,e.next=5,this.driver.getMediaConfig();case 5:return r=e.sent,e.abrupt("return",this.transport.reply(t,r));case 9:return e.prev=9,e.t0=e["catch"](2),console.error("error while getting the media configuration",e.t0),e.next=14,this.transport.reply(t,{error:{message:"Unexpected error while getting the media configuration"}});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleUploadFile",value:function(){var e=y(m().mark((function e(t){var r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasCapability(c.MatrixCapabilities.MSC4039UploadFile)){e.next=2;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Missing capability"}}));case 2:return e.prev=2,e.next=5,this.driver.uploadFile(t.data.file);case 5:return r=e.sent,e.abrupt("return",this.transport.reply(t,{content_uri:r.contentUri}));case 9:return e.prev=9,e.t0=e["catch"](2),console.error("error while uploading a file",e.t0),e.next=14,this.transport.reply(t,{error:{message:"Unexpected error while uploading a file"}});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleDownloadFile",value:function(){var e=y(m().mark((function e(t){var r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasCapability(c.MatrixCapabilities.MSC4039DownloadFile)){e.next=2;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Missing capability"}}));case 2:return e.prev=2,e.next=5,this.driver.downloadFile(t.data.content_uri);case 5:return r=e.sent,e.abrupt("return",this.transport.reply(t,{file:r.file}));case 9:e.prev=9,e.t0=e["catch"](2),console.error("error while downloading a file",e.t0),this.transport.reply(t,{error:{message:"Unexpected error while downloading a file"}});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleMessage",value:function(e){if(!this.isStopped){var t=new CustomEvent("action:".concat(e.detail.action),{detail:e.detail,cancelable:!0});if(this.emit("action:".concat(e.detail.action),t),!t.defaultPrevented)switch(e.detail.action){case s.WidgetApiFromWidgetAction.ContentLoaded:return this.handleContentLoadedAction(e.detail);case s.WidgetApiFromWidgetAction.SupportedApiVersions:return this.replyVersions(e.detail);case s.WidgetApiFromWidgetAction.SendEvent:return this.handleSendEvent(e.detail);case s.WidgetApiFromWidgetAction.SendToDevice:return this.handleSendToDevice(e.detail);case s.WidgetApiFromWidgetAction.GetOpenIDCredentials:return this.handleOIDC(e.detail);case s.WidgetApiFromWidgetAction.MSC2931Navigate:return this.handleNavigate(e.detail);case s.WidgetApiFromWidgetAction.MSC2974RenegotiateCapabilities:return this.handleCapabilitiesRenegotiate(e.detail);case s.WidgetApiFromWidgetAction.MSC2876ReadEvents:return this.handleReadEvents(e.detail);case s.WidgetApiFromWidgetAction.WatchTurnServers:return this.handleWatchTurnServers(e.detail);case s.WidgetApiFromWidgetAction.UnwatchTurnServers:return this.handleUnwatchTurnServers(e.detail);case s.WidgetApiFromWidgetAction.MSC3869ReadRelations:return this.handleReadRelations(e.detail);case s.WidgetApiFromWidgetAction.MSC3973UserDirectorySearch:return this.handleUserDirectorySearch(e.detail);case s.WidgetApiFromWidgetAction.BeeperReadRoomAccountData:return this.handleReadRoomAccountData(e.detail);case s.WidgetApiFromWidgetAction.MSC4039GetMediaConfigAction:return this.handleGetMediaConfig(e.detail);case s.WidgetApiFromWidgetAction.MSC4039UploadFileAction:return this.handleUploadFile(e.detail);case s.WidgetApiFromWidgetAction.MSC4039DownloadFileAction:return this.handleDownloadFile(e.detail);case s.WidgetApiFromWidgetAction.MSC4157UpdateDelayedEvent:return this.handleUpdateDelayedEvent(e.detail);default:return this.transport.reply(e.detail,{error:{message:"Unknown or unsupported action: "+e.detail.action}})}}}},{key:"takeScreenshot",value:function(){return this.transport.send(s.WidgetApiToWidgetAction.TakeScreenshot,{})}},{key:"updateVisibility",value:function(e){return this.transport.send(s.WidgetApiToWidgetAction.UpdateVisibility,{visible:e})}},{key:"sendWidgetConfig",value:function(e){return this.transport.send(s.WidgetApiToWidgetAction.WidgetConfig,e).then()}},{key:"notifyModalWidgetButtonClicked",value:function(e){return this.transport.send(s.WidgetApiToWidgetAction.ButtonClicked,{id:e}).then()}},{key:"notifyModalWidgetClose",value:function(e){return this.transport.send(s.WidgetApiToWidgetAction.CloseModalWidget,e).then()}},{key:"feedEvent",value:function(){var e=y(m().mark((function e(t,r){var n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.room_id===r||this.canUseRoomTimeline(t.room_id)){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.state_key||null===t.state_key){e.next=7;break}if(this.canReceiveStateEvent(t.type,t.state_key)){e.next=5;break}return e.abrupt("return");case 5:e.next=9;break;case 7:if(this.canReceiveRoomEvent(t.type,null===(n=t.content)||void 0===n?void 0:n["msgtype"])){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.transport.send(s.WidgetApiToWidgetAction.SendEvent,t);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"feedToDevice",value:function(){var e=y(m().mark((function e(t,r){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.canReceiveToDeviceEvent(t.type)){e.next=3;break}return e.next=3,this.transport.send(s.WidgetApiToWidgetAction.SendToDevice,E(E({},t),{},{encrypted:r}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),n}(i.EventEmitter);r.ClientWidgetApi=F},"0366":function(e,t,r){"use strict";var n=r("4625"),i=r("59ed"),o=r("40d5"),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},"0374":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyMsgType=void 0,t.isEventLike=o;var n,i=r("6682");function o(e,t){var r=e.content;return t===n.Text?i.M_MESSAGE.matches(e.type)||"m.room.message"===e.type&&"m.text"===(null===r||void 0===r?void 0:r["msgtype"]):t===n.Emote?i.M_EMOTE.matches(e.type)||"m.room.message"===e.type&&"m.emote"===(null===r||void 0===r?void 0:r["msgtype"]):t===n.Notice&&(i.M_NOTICE.matches(e.type)||"m.room.message"===e.type&&"m.notice"===(null===r||void 0===r?void 0:r["msgtype"]))}t.LegacyMsgType=n,function(e){e["Text"]="m.text",e["Notice"]="m.notice",e["Emote"]="m.emote"}(n||(t.LegacyMsgType=n={}))},"03a5":function(e,t,r){!function(t,r){e.exports=r()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=23)}([function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.DIALOG_TYPES={ALERT:"alert",CONFIRM:"confirm",PROMPT:"prompt"},i=t.CONFIRM_TYPES={BASIC:"basic",SOFT:"soft",HARD:"hard"};t.ANIMATION_TYPES={FADE:"dg-fade",ZOOM:"dg-zoom",BOUNCE:"dg-bounce"},t.CLASS_TYPES={MAIN_CONTENT:"mainContent",BODY:"body",TITLE:"title",FOOTER:"footer",OK_BTN:"okBtn",CANCEL_BTN:"cancelBtn"},t.DEFAULT_OPTIONS={html:!1,loader:!1,reverse:!1,backdropClose:!1,okText:"Continue",cancelText:"Close",view:null,type:i.BASIC,window:n.CONFIRM,message:"Proceed with the request?",clicksCount:3,animation:"zoom",customClass:"",verification:"continue",verificationHelp:'Type "[+:verification]" below to confirm',promptHelp:'Type in the box below and click "[+:okText]"'}},function(e,t,r){"use strict";r.r(t);var n=r(3),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(29)),i=r(16);t.default={data:function(){return{dialogsARR:[],registeredViews:{}}},created:function(){document.addEventListener("keydown",this.escapeKeyListener)},destroyed:function(){document.removeEventListener("keydown",this.escapeKeyListener)},watch:{dialogsARR:{handler:function(e){var t=document.getElementsByTagName("body")[0];t&&(e.length&&!t.classList.contains("dg-open")?t.classList.add("dg-open"):!e.length&&t&&t.classList.contains("dg-open")&&t.classList.remove("dg-open"))}}},methods:{commit:function(e){e.escapeKeyClose=!1,this.dialogsARR.push(e)},forceCloseAll:function(){var e=this;this.dialogsARR.forEach((function(t,r){return e.$delete(e.dialogsARR,r)}))},destroyDialog:function(e){var t=(0,i.firstIndex)(this.dialogsARR,e,"id");-1!==t&&this.$delete(this.dialogsARR,t)},escapeKeyListener:function(e){if(27===e.keyCode){var t=-1+this.dialogsARR.length;t>-1&&this.$set(this.dialogsARR[t],"escapeKeyClose",!0)}}},components:{DialogWindow:n.default}}},function(e,t,r){"use strict";r.r(t);var n=r(5),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(30)),i=r(1);t.default={data:function(){return{show:!0,closed:!1,endedAnimations:[]}},props:{options:{type:Object,required:!0},escapeKeyClose:{type:Boolean,default:!1},registeredViews:{type:Object,default:function(){return{}}}},watch:{escapeKeyClose:function(e){!0===e&&(this.cancelBtnDisabled?this.proceed():this.cancel())}},computed:{animation:function(){var e=this.options.animation.toUpperCase();return i.ANIMATION_TYPES.hasOwnProperty(e)?i.ANIMATION_TYPES[e]:i.ANIMATION_TYPES.ZOOM},loaderEnabled:function(){return!!this.options.loader},dialogView:function(){return(this.options.view?this.registeredViews[this.options.view]:null)||n.default},isHardConfirm:function(){return this.options.window===i.DIALOG_TYPES.CONFIRM&&this.options.type===i.CONFIRM_TYPES.HARD},isPrompt:function(){return this.options.window===i.DIALOG_TYPES.PROMPT}},methods:{closeAtOutsideClick:function(){!0===this.options.backdropClose&&(this.cancelBtnDisabled?this.proceed():this.cancel())},proceed:function(){this.loaderEnabled?(this.switchLoadingState(!0),this.options.promiseResolver({close:this.close,loading:this.switchLoadingState})):(this.options.promiseResolver(!0),this.close())},cancel:function(){!0!==this.loading&&this.close()},close:function(){this.show=!1,this.closed=!0},animationEnded:function(e){this.endedAnimations.push(e),-1!==this.endedAnimations.indexOf("backdrop")&&-1!==this.endedAnimations.indexOf("content")&&(this.options.promiseRejecter(!1),this.$emit("close",this.options.id))}},beforeDestroy:function(){!1===this.closed&&(this.cancelBtnDisabled?this.proceed():this.cancel())}}},function(e,t,r){"use strict";r.r(t);var n=r(7),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(13)),i=a(r(31)),o=a(r(32));function a(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{}},mixins:[n.default],mounted:function(){this.isHardConfirm&&this.$refs.inputElem&&this.$refs.inputElem.focus()},components:{CancelBtn:o.default,OkBtn:i.default}}},function(e,t,r){"use strict";r.r(t);var n=r(9),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(36)),i=r(1);t.default={data:function(){return{clicks_count:0}},props:{enabled:{required:!1,type:Boolean,default:!0},options:{required:!0,type:Object},focus:{required:!1,type:Boolean,default:!1},loading:{required:!1,type:Boolean,default:!1}},mounted:function(){this.focus&&this.$refs.btn.focus()},computed:{soft_confirm:function(){return this.options.type===i.CONFIRM_TYPES.SOFT},hard_confirm:function(){return this.options.type===i.CONFIRM_TYPES.HARD},is_disabled:function(){return this.$parent.okBtnDisabled},clicks_remaining:function(){return Math.max(this.options.clicksCount-this.clicks_count,0)}},methods:{proceed:function(){!this.is_disabled&&this.validateProceed()&&this.$emit("click")},validateProceed:function(){switch(this.options.type){case i.CONFIRM_TYPES.SOFT:return this.clicks_count++,this.clicks_count>=this.options.clicksCount;case i.CONFIRM_TYPES.BASIC:default:return!0}}},components:{BtnLoader:n.default}}},function(e,t,r){"use strict";r.r(t);var n=r(11),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{enabled:{required:!1,type:Boolean,default:!0},options:{required:!0,type:Object},focus:{required:!1,type:Boolean,default:!1},loading:{required:!1,type:Boolean,default:!1}},mounted:function(){this.focus&&this.$refs.btn.focus()}}},function(e,t,r){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=a(r(14)),o=a(r(15));function a(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{input:"",loading:!1}},props:{options:{type:Object,required:!0}},computed:{loaderEnabled:function(){return!!this.options.loader},isHardConfirm:function(){return this.options.window===n.DIALOG_TYPES.CONFIRM&&this.options.type===n.CONFIRM_TYPES.HARD},isPrompt:function(){return this.options.window===n.DIALOG_TYPES.PROMPT},leftBtnComponent:function(){return!1===this.options.reverse?"cancel-btn":"ok-btn"},rightBtnComponent:function(){return!0===this.options.reverse?"cancel-btn":"ok-btn"},hardConfirmHelpText:function(){var e=this;return this.options.verificationHelp.replace(/\[\+:(\w+)]/g,(function(t,r){return e.options[r]||t}))},promptHelpText:function(){var e=this;return this.options.promptHelp.replace(/\[\+:(\w+)]/g,(function(t,r){return e.options[r]||t}))}},mounted:function(){this.isHardConfirm&&this.$refs.inputElem&&this.$refs.inputElem.focus()},methods:{clickRightBtn:function(){this.options.reverse?this.cancel():this.proceed(this.getDefaultData())},clickLeftBtn:function(){this.options.reverse?this.proceed(this.getDefaultData()):this.cancel()},submitDialogForm:function(){this.okBtnDisabled||this.proceed(this.getDefaultData())},getDefaultData:function(){return this.isPrompt?this.input:null},proceed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loaderEnabled?(this.switchLoadingState(!0),this.options.promiseResolver({close:this.close,loading:this.switchLoadingState,data:e})):(this.options.promiseResolver({data:e}),this.close())},cancel:function(){!0!==this.loading&&this.close()},switchLoadingState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=!this.loading),this.loading=!!e},close:function(){this.$emit("close")}},mixins:[i.default,o.default]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={computed:{messageHasTitle:function(){var e=this.options.message;return"object"===(void 0===e?"undefined":n(e))&&null!==e&&e.title},messageTitle:function(){return this.messageHasTitle?this.options.message.title:null},messageBody:function(){var e=this.options.message;return"string"==typeof e?e:e.body||""}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.default={computed:{cancelBtnDisabled:function(){return this.options.window===n.DIALOG_TYPES.ALERT},okBtnDisabled:function(){return this.options.window===n.DIALOG_TYPES.CONFIRM&&this.options.type===n.CONFIRM_TYPES.HARD&&this.input!==this.options.verification},leftBtnEnabled:function(){return!1===this.cancelBtnDisabled||!0===this.options.reverse},rightBtnEnabled:function(){return!1===this.cancelBtnDisabled||!1===this.options.reverse},leftBtnFocus:function(){return!this.isHardConfirm&&!0===this.options.reverse},rightBtnFocus:function(){return!this.isHardConfirm&&!1===this.options.reverse},leftBtnText:function(){return this.options.reverse?this.options.okText:this.options.cancelText},rightBtnText:function(){return this.options.reverse?this.options.cancelText:this.options.okText}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElem=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?document.querySelectorAll(e):document.querySelector(e)},t.noop=function(){};var n=t.cloneObj=function(e){return Object.assign({},e)};t.mergeObjs=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return Object.assign.apply(Object,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.map(n)))},t.clickNode=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},t.firstIndex=function(e,t,r){var n=void 0,i=e.length;for(n=0;n<i;n++)if(e[n][r]===t)return n;return-1}},function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.dialogsARR,(function(t){return r("dialog-window",{key:t.id,attrs:{options:t,escapeKeyClose:t.escapeKeyClose,registeredViews:e.registeredViews},on:{close:e.destroyDialog}})})))},i=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}))},function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.options.customClass},[r("transition",{attrs:{name:"dg-backdrop",appear:""},on:{"after-leave":function(t){e.animationEnded("backdrop")}}},[e.show?r("div",{staticClass:"dg-backdrop"}):e._e()]),e._v(" "),r("transition",{attrs:{name:e.animation,appear:""},on:{"after-leave":function(t){e.animationEnded("content")}}},[e.show?r("div",{class:["dg-container",{"dg-container--has-input":e.isHardConfirm||e.isPrompt}],on:{click:e.closeAtOutsideClick}},[r("div",{staticClass:"dg-content-cont dg-content-cont--floating"},[r("div",{staticClass:"dg-main-content",on:{click:function(e){e.stopPropagation()}}},[r(e.dialogView,{tag:"component",attrs:{options:e.options},on:{close:e.close}})],1)])]):e._e()])],1)},i=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}))},function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dg-view-wrapper"},[r("div",{class:["dg-content-body",{"dg-content-body--has-title":e.messageHasTitle}]},[e.messageHasTitle?[e.options.html?r("h6",{staticClass:"dg-title",domProps:{innerHTML:e._s(e.messageTitle)}}):r("h6",{staticClass:"dg-title"},[e._v(e._s(e.messageTitle))])]:e._e(),e._v(" "),e.options.html?r("div",{staticClass:"dg-content",domProps:{innerHTML:e._s(e.messageBody)}}):r("div",{staticClass:"dg-content"},[e._v(e._s(e.messageBody))]),e._v(" "),e.isHardConfirm||e.isPrompt?r("form",{staticClass:"dg-form",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.submitDialogForm(t)}}},[r("label",{staticStyle:{"font-size":"13px"},attrs:{for:"dg-input-elem"}},[e._v(e._s(e.isPrompt?e.promptHelpText:e.hardConfirmHelpText))]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"inputElem",staticStyle:{width:"100%","margin-top":"10px",padding:"5px 15px","font-size":"16px","border-radius":"4px",border:"2px solid #eee"},attrs:{type:"text",placeholder:e.isPrompt?"":e.options.verification,autocomplete:"off",id:"dg-input-elem"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}})]):e._e()],2),e._v(" "),r("div",{staticClass:"dg-content-footer"},[r(e.leftBtnComponent,{tag:"button",attrs:{loading:e.loading,enabled:e.leftBtnEnabled,options:e.options,focus:e.leftBtnFocus},on:{click:function(t){e.clickLeftBtn()}}},[e.options.html?r("span",{domProps:{innerHTML:e._s(e.leftBtnText)}}):r("span",[e._v(e._s(e.leftBtnText))])]),e._v(" "),r(e.rightBtnComponent,{tag:"button",attrs:{loading:e.loading,enabled:e.rightBtnEnabled,options:e.options,focus:e.rightBtnFocus},on:{click:function(t){e.clickRightBtn()}}},[e.options.html?r("span",{domProps:{innerHTML:e._s(e.rightBtnText)}}):r("span",[e._v(e._s(e.rightBtnText))])]),e._v(" "),r("div",{staticClass:"dg-clear"})])])},i=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}))},function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.enabled?r("button",{ref:"btn",class:["dg-btn","dg-btn--ok",{"dg-btn--loading":e.loading},{"dg-pull-right":!e.options.reverse}],attrs:{disabled:e.is_disabled},on:{click:function(t){t.preventDefault(),e.proceed()}}},[r("span",{staticClass:"dg-btn-content"},[e._t("default"),e._v(" "),e.soft_confirm?r("span",[e._v("("+e._s(e.clicks_remaining)+")")]):e._e()],2),e._v(" "),e.loading?r("btn-loader",{tag:"span"}):e._e()]):e._e()},i=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}))},function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.enabled?r("button",{ref:"btn",class:["dg-btn","dg-btn--cancel",{"dg-pull-right":e.options.reverse}],on:{click:function(t){t.preventDefault(),e.$emit("click")}}},[e._t("default")],2):e._e()},i=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(24)),i=c(r(28)),o=r(1),a=c(r(35)),s=r(16);function c(e){return e&&e.__esModule?e:{default:e}}var l={},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.Vue=e,this.mounted=!1,this.$root={},this.registeredViews={},this.globalOptions=(0,s.mergeObjs)(o.DEFAULT_OPTIONS,t)};d.prototype.mountIfNotMounted=function(){var e=this;!0!==this.mounted&&(this.$root=function(){var t=e.Vue.extend(i.default),r=document.createElement("div");document.querySelector("body").appendChild(r);var n=new t;return n.registeredViews=e.registeredComponents(),n.$mount(r)}(),this.mounted=!0)},d.prototype.registeredComponents=function(){return l},d.prototype.registerComponent=function(e,t){this.mounted&&this.destroy(),l[e]=t},d.prototype.destroy=function(){if(!0===this.mounted){this.$root.forceCloseAll();var e=this.$root.$el;this.$root.$destroy(),this.$root.$off(),e.remove(),this.mounted=!1}},d.prototype.alert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&(t.message=e),this.open(o.DIALOG_TYPES.ALERT,t)},d.prototype.prompt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&(t.message=e),this.open(o.DIALOG_TYPES.PROMPT,t)},d.prototype.confirm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&(t.message=e),this.open(o.DIALOG_TYPES.CONFIRM,t)},d.prototype.open=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.mountIfNotMounted(),new n.default((function(n,i){r.id="dialog."+Date.now(),r.window=e,r.promiseResolver=n,r.promiseRejecter=i,t.$root.commit((0,s.mergeObjs)(t.globalOptions,r))}))},d.install=function(e,t){var r=new a.default(e);e.directive("confirm",r.confirmDefinition),e.dialog=new d(e,t),Object.defineProperties(e.prototype,{$dialog:{get:function(){return e.dialog}}})},t.default=d},function(e,t,r){(function(t){!function(r){var n=setTimeout;function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn((function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,n)}else(1===e._state?s:c)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof r)return void d(function(e,t){return function(){e.apply(t,arguments)}}(r,t),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)a(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var r=!1;try{e((function(e){r||(r=!0,s(t,e))}),(function(e){r||(r=!0,c(t,e))}))}catch(e){if(r)return;r=!0,c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(i);return a(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},o.all=function(e){return new o((function(t,r){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var i=n.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){o(e,t)}),r)}n[e]=a,0==--i&&t(n)}catch(e){r(e)}}for(var a=0;a<n.length;a++)o(a,n[a])}))},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o((function(t){t(e)}))},o.reject=function(e){return new o((function(t,r){r(e)}))},o.race=function(e){return new o((function(t,r){for(var n=0,i=e.length;n<i;n++)e[n].then(t,r)}))},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=o:r.Promise||(r.Promise=o)}(this)}).call(this,r(25).setImmediate)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(26),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(22))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i=1,o={},a=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&d(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var r=s.createElement("script");r.onreadystatechange=function(){d(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(d,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return o[i]=a,n(i),i++},c.clearImmediate=l}function l(e){delete o[e]}function d(e){if(a)setTimeout(d,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{l(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(22),r(27))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,l=[],d=!1,u=-1;function h(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&f())}function f(){if(!d){var e=s(h);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||d||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";r.r(t);var n=r(17),i=r(2);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);r(33);var a=r(0),s=Object(a.a)(i.default,n.a,n.b,!1,null,null,null);t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(18),i=r(4);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0),s=Object(a.a)(i.default,n.a,n.b,!1,null,null,null);t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(19),i=r(6);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0),s=Object(a.a)(i.default,n.a,n.b,!1,null,null,null);t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(20),i=r(8);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0),s=Object(a.a)(i.default,n.a,n.b,!1,null,null,null);t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(21),i=r(10);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0),s=Object(a.a)(i.default,n.a,n.b,!1,null,null,null);t.default=s.exports},function(e,t,r){"use strict";var n=r(12);r.n(n).a},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(16),a=r(1),s=function(e){Object.defineProperties(this,{Vue:{get:function(){return e}},confirmDefinition:{get:this.defineConfirm}})};s.prototype.getConfirmMessage=function(e){return e.value&&e.value.message?e.value.message:"string"==typeof e.value?e.value:null},s.prototype.getOptions=function(e){var t="object"===i(e.value)?(0,o.cloneObj)(e.value):{};return delete t.ok,delete t.cancel,e.arg&&a.CONFIRM_TYPES.hasOwnProperty(e.arg.toUpperCase())&&(t.type=a.CONFIRM_TYPES[e.arg.toUpperCase()]),t},s.prototype.getThenCallback=function(e,t){return e.value&&e.value.ok?function(r){return e.value.ok(n({},r,{node:t}))}:function(e){e.loading&&e.close(),t.removeEventListener("click",t.VuejsDialog.clickHandler,!0),(0,o.clickNode)(t),t.addEventListener("click",t.VuejsDialog.clickHandler,!0)}},s.prototype.getCatchCallback=function(e){return e.value&&e.value.cancel?e.value.cancel:o.noop},s.prototype.clickHandler=function(e,t,r){e.preventDefault(),e.stopImmediatePropagation();var n=this.getOptions(r),i=this.getConfirmMessage(r),o=this.getThenCallback(r,t),a=this.getCatchCallback(r);this.Vue.dialog.confirm(i,n).then(o).catch(a)},s.prototype.defineConfirm=function(){var e=this,t={bind:function(t,r){t.VuejsDialog=t.VuejsDialog||{},t.VuejsDialog.clickHandler=function(n){return e.clickHandler(n,t,r)},t.addEventListener("click",t.VuejsDialog.clickHandler,!0)},unbind:function(e){e.removeEventListener("click",e.VuejsDialog.clickHandler,!0)}};return t},t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(0),i=Object(n.a)({},(function(){return this.$createElement,this._self._c,this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"dg-btn-loader"},[t("span",{staticClass:"dg-circles"},[t("span",{staticClass:"dg-circle"}),this._v(" "),t("span",{staticClass:"dg-circle"}),this._v(" "),t("span",{staticClass:"dg-circle"})])])}],!1,null,null,null);t.default=i.exports}])}))},"044b":function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},"04e3":function(e,t,r){"use strict";r.d(t,"c",(function(){return v})),r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return g}));var n,i=r("9523"),o=r.n(i),a=r("8ed1"),s=null,c=0,l=()=>(null===s&&(s=new AudioContext),c++,s),d=()=>{var e;(c--,0===c)&&(null===(e=s)||void 0===e||e.close(),s=null)},u=r("5b5f"),h=r("936a"),f=r("d5da"),p=200,v=-60,m=8;(function(e){e["NewStream"]="new_stream",e["MuteStateChanged"]="mute_state_changed",e["LocalVolumeChanged"]="local_volume_changed",e["VolumeChanged"]="volume_changed",e["ConnectedChanged"]="connected_changed",e["Speaking"]="speaking",e["Disposed"]="disposed"})(n||(n={}));class g extends h["b"]{constructor(e){super(),o()(this,"stream",void 0),o()(this,"sdpMetadataStreamId",void 0),o()(this,"userId",void 0),o()(this,"deviceId",void 0),o()(this,"purpose",void 0),o()(this,"speakingVolumeSamples",void 0),o()(this,"client",void 0),o()(this,"call",void 0),o()(this,"roomId",void 0),o()(this,"audioMuted",void 0),o()(this,"videoMuted",void 0),o()(this,"localVolume",1),o()(this,"measuringVolumeActivity",!1),o()(this,"audioContext",void 0),o()(this,"analyser",void 0),o()(this,"frequencyBinCount",void 0),o()(this,"speakingThreshold",v),o()(this,"speaking",!1),o()(this,"volumeLooperTimeout",void 0),o()(this,"_disposed",!1),o()(this,"_connected",!1),o()(this,"onAddTrack",()=>{this.emit(n.NewStream,this.stream)}),o()(this,"onCallState",e=>{e===f["e"].Connected?this.connected=!0:e===f["e"].Connecting&&(this.connected=!1)}),o()(this,"volumeLooper",()=>{if(this.analyser&&this.measuringVolumeActivity){this.analyser.getFloatFrequencyData(this.frequencyBinCount);var e=-1/0;for(var t of this.frequencyBinCount)t>e&&(e=t);this.speakingVolumeSamples.shift(),this.speakingVolumeSamples.push(e),this.emit(n.VolumeChanged,e);var r=!1;for(var i of this.speakingVolumeSamples)if(i>this.speakingThreshold){r=!0;break}this.speaking!==r&&(this.speaking=r,this.emit(n.Speaking,this.speaking)),this.volumeLooperTimeout=setTimeout(this.volumeLooper,p)}}),this.client=e.client,this.call=e.call,this.roomId=e.roomId,this.userId=e.userId,this.deviceId=e.deviceId,this.purpose=e.purpose,this.audioMuted=e.audioMuted,this.videoMuted=e.videoMuted,this.speakingVolumeSamples=new Array(m).fill(-1/0),this.sdpMetadataStreamId=e.stream.id,this.updateStream(null,e.stream),this.stream=e.stream,this.hasAudioTrack&&this.initVolumeMeasuring(),e.call&&(e.call.addListener(f["d"].State,this.onCallState),this.onCallState(e.call.state))}get connected(){return this.isLocal()||this._connected}set connected(e){this._connected=e,this.emit(n.ConnectedChanged,this.connected)}get hasAudioTrack(){return this.stream.getAudioTracks().length>0}updateStream(e,t){if(t!==e){var r=this.measuringVolumeActivity;e&&(e.removeEventListener("addtrack",this.onAddTrack),this.measureVolumeActivity(!1)),this.stream=t,t.addEventListener("addtrack",this.onAddTrack),this.hasAudioTrack?(this.initVolumeMeasuring(),r&&this.measureVolumeActivity(!0)):this.measureVolumeActivity(!1),this.emit(n.NewStream,this.stream)}}initVolumeMeasuring(){if(this.hasAudioTrack){this.audioContext||(this.audioContext=l()),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.analyser.smoothingTimeConstant=.1;var e=this.audioContext.createMediaStreamSource(this.stream);e.connect(this.analyser),this.frequencyBinCount=new Float32Array(this.analyser.frequencyBinCount)}}getMember(){var e,t=this.client.getRoom(this.roomId);return null!==(e=null===t||void 0===t?void 0:t.getMember(this.userId))&&void 0!==e?e:null}isLocal(){return this.userId===this.client.getUserId()&&(void 0===this.deviceId||this.deviceId===this.client.getDeviceId())}isAudioMuted(){return 0===this.stream.getAudioTracks().length||this.audioMuted}isVideoMuted(){return 0===this.stream.getVideoTracks().length||this.videoMuted}isSpeaking(){return this.speaking}setNewStream(e){this.updateStream(this.stream,e)}setAudioVideoMuted(e,t){null!==e&&(this.audioMuted!==e&&this.speakingVolumeSamples.fill(-1/0),this.audioMuted=e),null!==t&&(this.videoMuted=t),this.emit(n.MuteStateChanged,this.audioMuted,this.videoMuted)}measureVolumeActivity(e){if(e){if(!this.analyser||!this.frequencyBinCount||!this.hasAudioTrack)return;this.measuringVolumeActivity=!0,this.volumeLooper()}else this.measuringVolumeActivity=!1,this.speakingVolumeSamples.fill(-1/0),this.emit(n.VolumeChanged,-1/0)}setSpeakingThreshold(e){this.speakingThreshold=e}clone(){var e=this.client.getMediaHandler(),t=this.stream.clone();return u["b"].log("CallFeed clone() cloning stream (originalStreamId=".concat(this.stream.id,", newStreamId").concat(t.id,")")),this.purpose===a["b"].Usermedia?e.userMediaStreams.push(t):e.screensharingStreams.push(t),new g({client:this.client,roomId:this.roomId,userId:this.userId,deviceId:this.deviceId,stream:t,purpose:this.purpose,audioMuted:this.audioMuted,videoMuted:this.videoMuted})}dispose(){var e,t;clearTimeout(this.volumeLooperTimeout),null===(e=this.stream)||void 0===e||e.removeEventListener("addtrack",this.onAddTrack),null===(t=this.call)||void 0===t||t.removeListener(f["d"].State,this.onCallState),this.audioContext&&(this.audioContext=void 0,this.analyser=void 0,d()),this._disposed=!0,this.emit(n.Disposed)}get disposed(){return this._disposed}set disposed(e){this._disposed=e}getLocalVolume(){return this.localVolume}setLocalVolume(e){this.localVolume=e,this.emit(n.LocalVolumeChanged,e)}}},"04f8":function(e,t,r){"use strict";var n=r("1212"),i=r("d039"),o=r("cfe9"),a=o.String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},"06cb":function(t,r,n){"use strict";n.d(r,"a",(function(){return f})),n.d(r,"b",(function(){return v})),n.d(r,"c",(function(){return m}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("5b5f"),l=n("b83f"),d=n("ac24"),u=n("aab2"),h=!1;class f{constructor(e){this.db=e,s()(this,"nextTxnId",0),e.onversionchange=()=>{c["b"].log("versionchange for indexeddb ".concat(this.db.name,": closing")),e.close()}}containsData(){return o()((function*(){throw Error("Not implemented for Backend")}))()}startup(){var e=this;return o()((function*(){return e}))()}deleteAllData(){return o()((function*(){throw Error("This is not implemented, call IDBFactory::deleteDatabase(dbName) instead.")}))()}getMigrationState(){var e=this;return o()((function*(){var t=d["b"].NOT_STARTED;return yield e.doTxn("readonly",[u["a"].STORE_ACCOUNT],e=>{var r=e.objectStore(u["a"].STORE_ACCOUNT),n=r.get(d["a"]);n.onsuccess=()=>{var e;t=null!==(e=n.result)&&void 0!==e?e:d["b"].NOT_STARTED}}),t}))()}setMigrationState(e){var t=this;return o()((function*(){yield t.doTxn("readwrite",[u["a"].STORE_ACCOUNT],t=>{var r=t.objectStore(u["a"].STORE_ACCOUNT);r.put(e,d["a"])})}))()}getOrAddOutgoingRoomKeyRequest(e){var t=e.requestBody;return new Promise((r,n)=>{var i=this.db.transaction("outgoingRoomKeyRequests","readwrite");i.onerror=n,this._getOutgoingRoomKeyRequest(i,t,n=>{if(n)return c["b"].log("already have key request outstanding for "+"".concat(t.room_id," / ").concat(t.session_id,": ")+"not sending another"),void r(n);c["b"].log("enqueueing key request for ".concat(t.room_id," / ")+t.session_id),i.oncomplete=()=>{r(e)};var o=i.objectStore("outgoingRoomKeyRequests");o.add(e)})})}getOutgoingRoomKeyRequest(e){return new Promise((t,r)=>{var n=this.db.transaction("outgoingRoomKeyRequests","readonly");n.onerror=r,this._getOutgoingRoomKeyRequest(n,e,e=>{t(e)})})}_getOutgoingRoomKeyRequest(e,t,r){var n=e.objectStore("outgoingRoomKeyRequests"),i=n.index("session"),o=i.openCursor([t.room_id,t.session_id]);o.onsuccess=()=>{var e=o.result;if(e){var n=e.value;Object(l["f"])(n.requestBody,t)?r(n):e.continue()}else r(null)}}getOutgoingRoomKeyRequestByState(e){if(0===e.length)return Promise.resolve(null);var t,r=0;function n(){var i=this.result;if(i)t=i.value;else if(r++,!(r>=e.length)){var o=e[r],a=this.source.openCursor(o);a.onsuccess=n}}var i=this.db.transaction("outgoingRoomKeyRequests","readonly"),o=i.objectStore("outgoingRoomKeyRequests"),a=e[r],s=o.index("state").openCursor(a);return s.onsuccess=n,b(i).then(()=>t)}getAllOutgoingRoomKeyRequestsByState(e){return new Promise((t,r)=>{var n=this.db.transaction("outgoingRoomKeyRequests","readonly"),i=n.objectStore("outgoingRoomKeyRequests"),o=i.index("state"),a=o.getAll(e);a.onsuccess=()=>t(a.result),a.onerror=()=>r(a.error)})}getOutgoingRoomKeyRequestsByTarget(e,t,r){var n=0,i=[];function o(){var a=this.result;if(a){var s=a.value;s.recipients.some(r=>r.userId===e&&r.deviceId===t)&&i.push(s),a.continue()}else{if(n++,n>=r.length)return;var c=r[n],l=this.source.openCursor(c);l.onsuccess=o}}var a=this.db.transaction("outgoingRoomKeyRequests","readonly"),s=a.objectStore("outgoingRoomKeyRequests"),c=r[n],l=s.index("state").openCursor(c);return l.onsuccess=o,b(a).then(()=>i)}updateOutgoingRoomKeyRequest(e,t,r){var n=null;function i(){var e=this.result;if(e){var i=e.value;i.state==t?(Object.assign(i,r),e.update(i),n=i):c["b"].warn("Cannot update room key request from ".concat(t," ")+"as it was already updated to ".concat(i.state))}}var o=this.db.transaction("outgoingRoomKeyRequests","readwrite"),a=o.objectStore("outgoingRoomKeyRequests").openCursor(e);return a.onsuccess=i,b(o).then(()=>n)}deleteOutgoingRoomKeyRequest(e,t){var r=this.db.transaction("outgoingRoomKeyRequests","readwrite"),n=r.objectStore("outgoingRoomKeyRequests").openCursor(e);return n.onsuccess=()=>{var e=n.result;if(e){var r=e.value;r.state==t?e.delete():c["b"].warn("Cannot delete room key request in state ".concat(r.state," ")+"(expected ".concat(t,")"))}},b(r)}getAccount(t,r){var n=t.objectStore("account"),i=n.get("-");i.onsuccess=function(){try{r(i.result||null)}catch(e){y(t,e)}}}storeAccount(e,t){var r=e.objectStore("account");r.put(t,"-")}getCrossSigningKeys(t,r){var n=t.objectStore("account"),i=n.get("crossSigningKeys");i.onsuccess=function(){try{r(i.result||null)}catch(e){y(t,e)}}}getSecretStorePrivateKey(t,r,n){var i=t.objectStore("account"),o=i.get("ssss_cache:".concat(n));o.onsuccess=function(){try{r(o.result||null)}catch(e){y(t,e)}}}storeCrossSigningKeys(e,t){var r=e.objectStore("account");r.put(t,"crossSigningKeys")}storeSecretStorePrivateKey(e,t,r){var n=e.objectStore("account");n.put(r,"ssss_cache:".concat(t))}countEndToEndSessions(t,r){var n=t.objectStore("sessions"),i=n.count();i.onsuccess=function(){try{r(i.result)}catch(e){y(t,e)}}}getEndToEndSessions(t,r,n){var i=r.objectStore("sessions"),o=i.index("deviceKey"),a=o.openCursor(t),s={};a.onsuccess=function(){var t=a.result;if(t)s[t.value.sessionId]={session:t.value.session,lastReceivedMessageTs:t.value.lastReceivedMessageTs},t.continue();else try{n(s)}catch(e){y(r,e)}}}getEndToEndSession(t,r,n,i){var o=n.objectStore("sessions"),a=o.get([t,r]);a.onsuccess=function(){try{a.result?i({session:a.result.session,lastReceivedMessageTs:a.result.lastReceivedMessageTs}):i(null)}catch(e){y(n,e)}}}getAllEndToEndSessions(t,r){var n=t.objectStore("sessions"),i=n.openCursor();i.onsuccess=function(){try{var n=i.result;n?(r(n.value),n.continue()):r(null)}catch(e){y(t,e)}}}storeEndToEndSession(e,t,r,n){var i=n.objectStore("sessions");i.put({deviceKey:e,sessionId:t,session:r.session,lastReceivedMessageTs:r.lastReceivedMessageTs})}storeEndToEndSessionProblem(e,t,r){var n=this;return o()((function*(){var i=n.db.transaction("session_problems","readwrite"),o=i.objectStore("session_problems");o.put({deviceKey:e,type:t,fixed:r,time:Date.now()}),yield b(i)}))()}getEndToEndSessionProblem(e,t){var r=this;return o()((function*(){var n=null,i=r.db.transaction("session_problems","readwrite"),o=i.objectStore("session_problems"),a=o.index("deviceKey"),s=a.getAll(e);return s.onsuccess=()=>{var e=s.result;if(e.length){e.sort((e,t)=>e.time-t.time);var r=e[e.length-1];for(var i of e)if(i.time>t)return void(n=Object.assign({},i,{fixed:r.fixed}));n=r.fixed?null:r}else n=null},yield b(i),n}))()}filterOutNotifiedErrorDevices(e){var t=this;return o()((function*(){var r=t.db.transaction("notified_error_devices","readwrite"),n=r.objectStore("notified_error_devices"),i=[];return yield Promise.all(e.map(e=>new Promise(t=>{var{userId:r,deviceInfo:o}=e,a=n.get([r,o.deviceId]);a.onsuccess=function(){a.result||(n.put({userId:r,deviceId:o.deviceId}),i.push(e)),t()}}))),i}))()}getEndToEndSessionsBatch(){var t=this;return o()((function*(){var r=[];return yield t.doTxn("readonly",[u["a"].STORE_SESSIONS],t=>{var n=t.objectStore(u["a"].STORE_SESSIONS),i=n.openCursor();i.onsuccess=function(){try{var n=i.result;n&&(r.push(n.value),r.length<d["c"]&&n.continue())}catch(e){y(t,e)}}}),0===r.length?null:r}))()}deleteEndToEndSessionsBatch(t){var r=this;return o()((function*(){yield r.doTxn("readwrite",[u["a"].STORE_SESSIONS],function(){var r=o()((function*(r){try{var n=r.objectStore(u["a"].STORE_SESSIONS),i=function*(){var e=n.delete([o,a]);yield new Promise(t=>{e.onsuccess=t})};for(var{deviceKey:o,sessionId:a}of t)yield*i()}catch(e){y(r,e)}}));return function(e){return r.apply(this,arguments)}}())}))()}getEndToEndInboundGroupSession(t,r,n,i){var o=!1,a=!1,s=n.objectStore("inbound_group_sessions"),c=s.get([t,r]);c.onsuccess=function(){try{o=c.result?c.result.session:null,!1!==a&&i(o,a)}catch(e){y(n,e)}};var l=n.objectStore("inbound_group_sessions_withheld"),d=l.get([t,r]);d.onsuccess=function(){try{a=d.result?d.result.session:null,!1!==o&&i(o,a)}catch(e){y(n,e)}}}getAllEndToEndInboundGroupSessions(t,r){var n=t.objectStore("inbound_group_sessions"),i=n.openCursor();i.onsuccess=function(){var n=i.result;if(n){try{r({senderKey:n.value.senderCurve25519Key,sessionId:n.value.sessionId,sessionData:n.value.session})}catch(e){y(t,e)}n.continue()}else try{r(null)}catch(e){y(t,e)}}}addEndToEndInboundGroupSession(e,t,r,n){var i=n.objectStore("inbound_group_sessions"),o=i.add({senderCurve25519Key:e,sessionId:t,session:r});o.onerror=r=>{var i;"ConstraintError"===(null===(i=o.error)||void 0===i?void 0:i.name)?(r.stopPropagation(),r.preventDefault(),c["b"].log("Ignoring duplicate inbound group session: "+e+" / "+t)):y(n,new Error("Failed to add inbound group session: "+o.error))}}storeEndToEndInboundGroupSession(e,t,r,n){var i=n.objectStore("inbound_group_sessions");i.put({senderCurve25519Key:e,sessionId:t,session:r})}storeEndToEndInboundGroupSessionWithheld(e,t,r,n){var i=n.objectStore("inbound_group_sessions_withheld");i.put({senderCurve25519Key:e,sessionId:t,session:r})}countEndToEndInboundGroupSessions(){var e=this;return o()((function*(){var t=0;return yield e.doTxn("readonly",[u["a"].STORE_INBOUND_GROUP_SESSIONS],e=>{var r=e.objectStore(u["a"].STORE_INBOUND_GROUP_SESSIONS),n=r.count();n.onsuccess=()=>{t=n.result}}),t}))()}getEndToEndInboundGroupSessionsBatch(){var t=this;return o()((function*(){var r=[];return yield t.doTxn("readonly",[u["a"].STORE_INBOUND_GROUP_SESSIONS,u["a"].STORE_BACKUP],t=>{var n=t.objectStore(u["a"].STORE_INBOUND_GROUP_SESSIONS),i=t.objectStore(u["a"].STORE_BACKUP),o=n.openCursor();o.onsuccess=function(){try{var n=o.result;if(n){var a=i.get(n.key);a.onsuccess=()=>{r.push({senderKey:n.value.senderCurve25519Key,sessionId:n.value.sessionId,sessionData:n.value.session,needsBackup:void 0!==a.result}),r.length<d["c"]&&n.continue()}}}catch(e){y(t,e)}}}),0===r.length?null:r}))()}deleteEndToEndInboundGroupSessionsBatch(t){var r=this;return o()((function*(){yield r.doTxn("readwrite",[u["a"].STORE_INBOUND_GROUP_SESSIONS],function(){var r=o()((function*(r){try{var n=r.objectStore(u["a"].STORE_INBOUND_GROUP_SESSIONS),i=function*(){var e=n.delete([o,a]);yield new Promise(t=>{e.onsuccess=t})};for(var{senderKey:o,sessionId:a}of t)yield*i()}catch(e){y(r,e)}}));return function(e){return r.apply(this,arguments)}}())}))()}getEndToEndDeviceData(t,r){var n=t.objectStore("device_data"),i=n.get("-");i.onsuccess=function(){try{r(i.result||null)}catch(e){y(t,e)}}}storeEndToEndDeviceData(e,t){var r=t.objectStore("device_data");r.put(e,"-")}storeEndToEndRoom(e,t,r){var n=r.objectStore("rooms");n.put(t,e)}getEndToEndRooms(t,r){var n={},i=t.objectStore("rooms"),o=i.openCursor();o.onsuccess=function(){var i=o.result;if(i)n[i.key]=i.value,i.continue();else try{r(n)}catch(e){y(t,e)}}}getSessionsNeedingBackup(e){return new Promise((t,r)=>{var n=[],i=this.db.transaction(["sessions_needing_backup","inbound_group_sessions"],"readonly");i.onerror=r,i.oncomplete=function(){t(n)};var o=i.objectStore("sessions_needing_backup"),a=i.objectStore("inbound_group_sessions"),s=o.openCursor();s.onsuccess=function(){var t=s.result;if(t){var r=a.get(t.key);r.onsuccess=function(){n.push({senderKey:r.result.senderCurve25519Key,sessionId:r.result.sessionId,sessionData:r.result.session})},(!e||n.length<e)&&t.continue()}}})}countSessionsNeedingBackup(e){e||(e=this.db.transaction("sessions_needing_backup","readonly"));var t=e.objectStore("sessions_needing_backup");return new Promise((e,r)=>{var n=t.count();n.onerror=r,n.onsuccess=()=>e(n.result)})}unmarkSessionsNeedingBackup(e,t){var r=this;return o()((function*(){t||(t=r.db.transaction("sessions_needing_backup","readwrite"));var n=t.objectStore("sessions_needing_backup");yield Promise.all(e.map(e=>new Promise((t,r)=>{var i=n.delete([e.senderKey,e.sessionId]);i.onsuccess=t,i.onerror=r})))}))()}markSessionsNeedingBackup(e,t){var r=this;return o()((function*(){t||(t=r.db.transaction("sessions_needing_backup","readwrite"));var n=t.objectStore("sessions_needing_backup");yield Promise.all(e.map(e=>new Promise((t,r)=>{var i=n.put({senderCurve25519Key:e.senderKey,sessionId:e.sessionId});i.onsuccess=t,i.onerror=r})))}))()}addSharedHistoryInboundGroupSession(e,t,r,n){n||(n=this.db.transaction("shared_history_inbound_group_sessions","readwrite"));var i=n.objectStore("shared_history_inbound_group_sessions"),o=i.get([e]);o.onsuccess=()=>{var{sessions:n}=o.result||{sessions:[]};n.push([t,r]),i.put({roomId:e,sessions:n})}}getSharedHistoryInboundGroupSessions(e,t){t||(t=this.db.transaction("shared_history_inbound_group_sessions","readonly"));var r=t.objectStore("shared_history_inbound_group_sessions"),n=r.get([e]);return new Promise((e,t)=>{n.onsuccess=()=>{var{sessions:t}=n.result||{sessions:[]};e(t)},n.onerror=t})}addParkedSharedHistory(e,t,r){r||(r=this.db.transaction("parked_shared_history","readwrite"));var n=r.objectStore("parked_shared_history"),i=n.get([e]);i.onsuccess=()=>{var{parked:r}=i.result||{parked:[]};r.push(t),n.put({roomId:e,parked:r})}}takeParkedSharedHistory(e,t){t||(t=this.db.transaction("parked_shared_history","readwrite"));var r=t.objectStore("parked_shared_history").openCursor(e);return new Promise((e,t)=>{r.onsuccess=()=>{var t=r.result;if(t){var n=t.value;t.delete(),e(n)}else e([])},r.onerror=t})}doTxn(e,t,r){var n,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c["b"];if(h){var a=this.nextTxnId++;n=Date.now(),i="".concat(e," crypto store transaction ").concat(a," in ").concat(t),o.debug("Starting ".concat(i))}var s=this.db.transaction(t,e),l=b(s),d=r(s);return h&&l.then(()=>{var e=Date.now()-n;o.debug("Finished ".concat(i,", took ").concat(e," ms"))},()=>{var e=Date.now()-n;o.error("Failed ".concat(i,", took ").concat(e," ms"))}),l.then(()=>d)}}var p=[e=>{g(e)},e=>{e.createObjectStore("account")},e=>{var t=e.createObjectStore("sessions",{keyPath:["deviceKey","sessionId"]});t.createIndex("deviceKey","deviceKey")},e=>{e.createObjectStore("inbound_group_sessions",{keyPath:["senderCurve25519Key","sessionId"]})},e=>{e.createObjectStore("device_data")},e=>{e.createObjectStore("rooms")},e=>{e.createObjectStore("sessions_needing_backup",{keyPath:["senderCurve25519Key","sessionId"]})},e=>{e.createObjectStore("inbound_group_sessions_withheld",{keyPath:["senderCurve25519Key","sessionId"]})},e=>{var t=e.createObjectStore("session_problems",{keyPath:["deviceKey","time"]});t.createIndex("deviceKey","deviceKey"),e.createObjectStore("notified_error_devices",{keyPath:["userId","deviceId"]})},e=>{e.createObjectStore("shared_history_inbound_group_sessions",{keyPath:["roomId"]})},e=>{e.createObjectStore("parked_shared_history",{keyPath:["roomId"]})}],v=p.length;function m(e,t){c["b"].log("Upgrading IndexedDBCryptoStore from version ".concat(t)+" to ".concat(v)),p.forEach((r,n)=>{t<=n&&r(e)})}function g(e){var t=e.createObjectStore("outgoingRoomKeyRequests",{keyPath:"requestId"});t.createIndex("session",["requestBody.room_id","requestBody.session_id"]),t.createIndex("state","state")}function y(e,t){e._mx_abortexception=t;try{e.abort()}catch(t){}}function b(e){return new Promise((t,r)=>{e.oncomplete=()=>{void 0!==e._mx_abortexception&&r(e._mx_abortexception),t(null)},e.onerror=t=>{void 0!==e._mx_abortexception?r(e._mx_abortexception):(c["b"].log("Error performing indexeddb txn",t),r(e.error))},e.onabort=t=>{void 0!==e._mx_abortexception?r(e._mx_abortexception):(c["b"].log("Error performing indexeddb txn",t),r(e.error))}})}},"06cf":function(e,t,r){"use strict";var n=r("83ab"),i=r("c65b"),o=r("d1e7"),a=r("5c6c"),s=r("fc6a"),c=r("a04b"),l=r("1a2d"),d=r("0cfb"),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=s(e),t=c(t),d)try{return u(e,t)}catch(error){}if(l(e,t))return a(!i(o.f,e,t),e[t])}},"070f":function(t,r,n){"use strict";n.d(r,"e",(function(){return d})),n.d(r,"a",(function(){return u})),n.d(r,"c",(function(){return h})),n.d(r,"d",(function(){return v})),n.d(r,"b",(function(){return g}));var i=n("c973"),o=n.n(i),a=n("b40f"),s=n("5b5f"),c=n("b83f"),l=n("c4c5");function d(e){var t=new AbortController;return setTimeout(()=>{t.abort()},e),t.signal}function u(e){var t=new AbortController;function r(){for(var t of e)t.removeEventListener("abort",n)}function n(){t.abort(),r()}for(var i of e){if(i.aborted){n();break}i.addEventListener("abort",n)}return{signal:t.signal,cleanup:r}}function h(t,r){var n,i,o;try{o=p(t)}catch(e){return e}return"application/json"===(null===(n=o)||void 0===n?void 0:n.type)&&r?new l["c"](JSON.parse(r),t.status,f(t)?t.responseURL:t.url):"text/plain"===(null===(i=o)||void 0===i?void 0:i.type)?new l["b"]("Server returned ".concat(t.status," error: ").concat(r),t.status):new l["b"]("Server returned ".concat(t.status," error"),t.status)}function f(e){return"getResponseHeader"in e}function p(t){var r;if(r=f(t)?t.getResponseHeader("Content-Type"):t.headers.get("Content-Type"),!r)return null;try{return Object(a["parse"])(r)}catch(e){throw new Error("Error parsing Content-Type '".concat(r,"': ").concat(e))}}function v(e,t){return m.apply(this,arguments)}function m(){return m=o()((function*(e,t){var r=0,n=null;while(r<e)try{if(r>0){var i=1e3*Math.pow(2,r);s["b"].log("network operation failed ".concat(r," times, retrying in ").concat(i,"ms...")),yield Object(c["K"])(i)}return yield t()}catch(o){if(!(o instanceof l["a"]))throw o;r+=1,n=o}throw n})),m.apply(this,arguments)}function g(e,t,r){if(t>4)return-1;if(e instanceof l["a"]&&!r)return-1;if(e.httpStatus&&(400===e.httpStatus||403===e.httpStatus||401===e.httpStatus))return-1;if("AbortError"===e.name)return-1;if("M_TOO_LARGE"===e.name)return-1;if("M_LIMIT_EXCEEDED"===e.name){var n=e.data.retry_after_ms;if(n>0)return n}return 1e3*Math.pow(2,t)}},"07c6":function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},"07dc":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".pmenu.minimized[data-v-521a3d2d]{display:none}.pmenu.minimized.active[data-v-521a3d2d]{display:block}.pmenu.minimized.active .menubgwrapper[data-v-521a3d2d]{top:0;z-index:9000;border-radius:10px;overflow:hidden;border-top-right-radius:0;border-top-left-radius:0;width:344px;left:auto}.menubgwrapper[data-v-521a3d2d]{position:absolute;z-index:100;bottom:0;left:0;top:-55px;right:0}.menubgwrapper[data-v-521a3d2d] .items{max-height:500px;overflow-y:auto;border-radius:3px;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}.menuwrapper[data-v-521a3d2d]{padding:1em;z-index:100}.backgr[data-v-521a3d2d],.menuwrapper[data-v-521a3d2d]{position:absolute;bottom:0;left:0;right:0}.backgr[data-v-521a3d2d]{background:rgba(var(--background-total-theme),.15);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);top:0;transition:.3s}.cancelWrapper[data-v-521a3d2d]{border-radius:3px;padding-left:.5em;padding-right:.5em;color:rgb(var(--neutral-grad-3))}.cancelWrapper .menu-item[data-v-521a3d2d]{margin-top:0;background:transparent;box-shadow:none;box-shadow:0 5px 5px -3px rgba(var(--color-shadow-base),.4)}.menu-item[data-v-521a3d2d]{padding:.5em;background:rgb(var(--background-total-theme));border-top:1px solid rgba(var(--neutral-grad-3),.5);line-height:44px;margin-top:.25em;display:flex;border-radius:10px;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);cursor:pointer}.menu-item .title[data-v-521a3d2d]{flex-grow:2;padding-right:44px;text-align:center}.menu-item .iconWrapper[data-v-521a3d2d]{width:44px;text-align:center}",""]),e.exports=t},"07fa":function(e,t,r){"use strict";var n=r("50c4");e.exports=function(e){return n(e.length)}},"0804":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var n=r("9523"),i=r.n(n);class o{constructor(e){this.target=e,i()(this,"reEmitters",new WeakMap)}reEmit(e,t){var r=this,n=this.reEmitters.get(e);n||(n=new Map,this.reEmitters.set(e,n));var i=function(t){if(n.has(t))return"continue";var i=function(){if("error"!==t||0!==r.target.listenerCount("error")){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r.target.emit(t,...i,e)}};e.on(t,i),n.set(t,i)};for(var o of t)i(o)}stopReEmitting(e,t){var r=this.reEmitters.get(e);if(r){for(var n of t)e.off(n,r.get(n)),r.delete(n);0===r.size&&this.reEmitters.delete(e)}}}class a extends o{constructor(e){super(e)}reEmit(e,t){super.reEmit(e,t)}stopReEmitting(e,t){super.stopReEmitting(e,t)}}},"0825":function(e){e.exports=JSON.parse('{"caption":{"create":"Crea","addGroupNamePlaceHolder":"Aggiungi il nome del gruppo","addPublicChatName":"Aggiungi nome chat pubblica","createPublicChat":"Crea chat pubblica","chatTopic":"Argomento rinominato","publicRoomTitle":"Stanza pubblica","asModerator":"come moderatore","marked":"contrassegnato","unmarked":"non segnato","removeBan":"Rimuovi divieto","cancelModeration":"Rimuovere la moderazione","uploadFiles":"Carica file","header":"intestazione","dragAndDropAFile":"Drag and drop file","chatInvite":"Sei stato invitato a chattare con:","cantJoin":"Non puoi entrare in chat con:","chatInviteDecline":"Puoi unirti in chat o declinare l\'invito","creatorLeft":"Perché il creatore ha lasciato la chat","encrypted":"Criptato","noImages":"Non ci sono ancora immagini in questa chat","noFiles":"Non ci sono ancora files in questa chat","inviteUser":"Invita utente","invite":"Invita","add":"Aggiungi","mute":"Disattiva audio","unmute":"Riattiva audio","leave":"Lascia","Info":"Info","new":"Nuovo","typing":"sta scrivendo","accNotFound":"La tua registrazione è in corso, attendi...","emptyList":"la lista è vuota (filtrata o semplicemente vuota)","welcome":"Benvenuto in chat","startNewChat":"Inizia una nuova chat","chats":"Chat","shareWith":"Condividi con","newChat":"Nuova chat","moveToChat":"Sposta in chat","queryNoResults":"La ricerca non ha dato risultati","needMoreCharacters":"Scrivi più caratteri","createGroup":"Crea gruppo","unabletoDecrypt":"* Impossibile decifrare","messageDeleted":"Messaggio eliminato","sentImage":"Immagine inviata","sentVoiceMessage":"inviato un messaggio vocale","invitationToChat":"Invito alla chat","invitationToRoom":"Invitation to room","leftChat":"ha lasciato la chat","joined":"si è aggiunto","chatRenamed":"Chat rinominata in ","recentComment":"Commento recente: ","share":"CONDIVIDI","followers":"Followers","reputation":"Reputazione","unsubscribe":"Annullare l\'iscrizione","following":"Following","theme":"Tema:","contacts":"Contatti","other":"Ricerca globale","phoneContacts":"Contatti del telefono","chooseInviteMedia":"Scegli come vuoi invitare:","admin":"Admin","moderator":"Moderatore","videocall":"Videochiamata","call":"Chiama","leaveAndDelete":"Lascia e Cancella","donate":"Dona","makeModerator":"Rendi moderatore","ban":"Ban","kick":"Butta fuori","members":"Membri","media":"Media","files":"Files","contactsList":"Lista contatti","send":"invia","pageCaption":"Didascalia pagina","caption":"didascalia","text":"testo","placeholder":"placeholder","sendTransactionTo":"Invia transazione a","toBePaidByReceiver":"Da pagare da parte del ricevente","toBePaidBySender":"Da pagare da parte del mittente","source":"Fonte","amount":"Importo","receiver":"Ricevente","message":"Messaggio","includeFeesInAmount":"Includere le commissioni nell\'importo","transactionFees":"Commissioni di transazione","totalAmount":"Importo totale","balanceTooLow":"Saldo non sufficiente","transactionError":"Errore. non è possibile effettuare la transazione","calculateFees":"Calcolare le commissioni","startChatWith":"Iniziare la chat con","searchResult":"Risultato della ricerca","joinedInTheChat":"si è unito alla chat","invited":"invitato ","hasInvited":"invitato ","inTheChat":" nella chat","banned":"bannato","andRoom":"e stanza","left":"ha lasciato","theChat":" la chat ","made":"ha rest ","aModerator":" un moderatore","editedChatNameTo ":"ha modificato il nome della chat in ","somebody":"qualcuno","sent":"inviato","PKOINto":" PKOIN a ","response":"Risposta","messagefrom":"Messaggio inoltrato","edited":"Modificato","settings":"Impostazioni","unauthorized":"Non autorizzato","search":"Ricerca","replyOnMessage":"Rispondi","editMessage":"Modifica messaggio","inviteFriend":"Invita amici","emptyContactList":"La lista dei contatti è vuota","joinApp":"Connettiti in una chat privata con me","hasInvitedToJoin":"È privata e NON è collegata al tuo numero di telefono. Chattiamo!","contactsempty":"Non hai ancora contatti, cercali e aggiungili","usernotgen":"L\'utente non ha ancora generato le sue chiavi di crittografia. Potrai chattare con loro quando le loro chiavi saranno generate..","younotgen":"Per favore aspetta un minuto mentre generiamo le tue chiavi crittografiche","messageRead":"Messaggio letto","open":"Apri","You":"Tu","chatsearchingempty":"No chats found for the specified filter","sendmessage":"Send message","messages":"Messages","you":"You","sentfile":"sent file:","administrators":"Proprietario","moderators":"Moderatori","participants":"Partecipanti","streamChat":"Chatta in streaming","membersList":"Elenco dei membri","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"Email","refillNamePlaceholder":"Refill name"},"message":{},"button":{"starChatButton":"Iniziare la chat","decline":"Rifiuta","declineandignore":"Ignora utente","join":"Unisciti","ok":"Ok","save":"Salva","copy":"Copia","forward":"Inoltra","delete":"Elimina","resend":"Resend","reply":"Rispondi","share":"Condividere","download":"Download","downloaded":"Scaricato","goToPocketnetProfile":"Vai al profilo","sendFile":"Invia file","takePhotoOrVideo":"Invia immagine","sendCoins":"Invia PKOIN","edit":"Modifica","select":"Selezionare","block":"Blocca","unblock":"Sblocca","blockUser":"Blocca utente","Complain":"Segnala","chat":"Chiacchierata","donations":"Donazioni"},"type":{"publicgroup":"Crea gruppo pubblico","privategroup":"Crea gruppo privato","one":"Chat privata con un utente"},"typelabel":{"publicgroup":"Creazione gruppo pubblico","privategroup":"Creazione gruppo privato","one":"Creazione di una chat privata"},"yes":"Sì","cancel":"Annulla","teamMessages":{"1-title":"Benvenuti nella chat privata","1-list1":"Chat privata NON collegata al tuo numero di telefono","1-list2":"Crittografia End-To-End di ogni conversazione 1-on-1 di default","1-list3":"Tutte le immagini inviate o ricevute attraverso la chat sono memorizzate in modo criptato","1-list4":"La cronologia dei messaggi viene salvata solo per 7 giorni","2-title":"Annuncio importante!","2-message1":"Recentemente abbiamo rilasciato i seguenti importanti aggiornamenti:","2-list1":"Chat privata criptata non collegata al tuo numero di telefono","2-list2":"Possibilità di donare PKOIN ai blogger","2-list3":"Video e Live Streaming","2-message2":"Invita i tuoi amici ora e fai parte del grande futuro dell\'internet decentralizzato!","2-button":"Invita i tuoi amici"},"error_generic":"Something went wrong, please try again later.","sendingerror":"An error occurred while sending the message","details":"Details","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found"}')},"082a":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return c}));var n,i,o=r("c973"),a=r.n(o);(function(e){e[e["Stable"]=0]="Stable",e[e["Unstable"]=1]="Unstable",e[e["Unsupported"]=2]="Unsupported"})(n||(n={})),function(e){e["Thread"]="Thread",e["ThreadUnreadNotifications"]="ThreadUnreadNotifications",e["LoginTokenRequest"]="LoginTokenRequest",e["RelationBasedRedactions"]="RelationBasedRedactions",e["AccountDataDeletion"]="AccountDataDeletion",e["RelationsRecursion"]="RelationsRecursion",e["IntentionalMentions"]="IntentionalMentions",e["MigrateServerNameToVia"]="MigrateServerNameToVia"}(i||(i={}));var s={[i.Thread]:{unstablePrefixes:["org.matrix.msc3440"],matrixVersion:"v1.3"},[i.ThreadUnreadNotifications]:{unstablePrefixes:["org.matrix.msc3771","org.matrix.msc3773"],matrixVersion:"v1.4"},[i.LoginTokenRequest]:{unstablePrefixes:["org.matrix.msc3882"]},[i.RelationBasedRedactions]:{unstablePrefixes:["org.matrix.msc3912"]},[i.AccountDataDeletion]:{unstablePrefixes:["org.matrix.msc3391"]},[i.RelationsRecursion]:{unstablePrefixes:["org.matrix.msc3981"]},[i.IntentionalMentions]:{unstablePrefixes:["org.matrix.msc3952_intentional_mentions"],matrixVersion:"v1.7"},[i.MigrateServerNameToVia]:{unstablePrefixes:["org.matrix.msc4156"]}};function c(e){return l.apply(this,arguments)}function l(){return l=a()((function*(e){var t=new Map;for(var[r,i]of Object.entries(s)){var o,a,c,l,d=null!==(o=null===(a=e.versions)||void 0===a?void 0:a.includes(i.matrixVersion||""))&&void 0!==o&&o,u=null!==(c=null===(l=i.unstablePrefixes)||void 0===l?void 0:l.every(t=>{var r;return!0===(null===(r=e.unstable_features)||void 0===r?void 0:r[t])}))&&void 0!==c&&c;d?t.set(r,n.Stable):u?t.set(r,n.Unstable):t.set(r,n.Unsupported)}return t})),l.apply(this,arguments)}},"084f":function(e,t,r){var n=r("e54e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("48c881ef",n,e)}},"087f":function(e,t,r){var n=r("3fb5"),i=r("b672"),o=r("8707").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function c(){this.init(),this._w=s,i.call(this,64,56)}function l(e){return e<<5|e>>>27}function d(e){return e<<30|e>>>2}function u(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,c=0;c<16;++c)t[c]=e.readInt32BE(4*c);for(;c<80;++c)t[c]=t[c-3]^t[c-8]^t[c-14]^t[c-16];for(var h=0;h<80;++h){var f=~~(h/20),p=l(r)+u(f,n,i,o)+s+t[h]+a[f]|0;s=o,o=i,i=d(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},c.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},"08da":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"fixedOnPageTop",class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active},attrs:{id:"topheader"},on:{mouseleave:e.mouseleave}},[t("div",{staticClass:"topheader",class:e.classstyle||""},[t("div",{staticClass:"work"},[t("div",{staticClass:"headerLine"},[t("div",{staticClass:"leftIcon icon",on:{mouseenter:e.mouseenter}},[e._t("left",(function(){return[e._v("   ")]}))],2),t("div",{staticClass:"leftaddIcon iconsmall"},[e._t("leftadd",(function(){return[e._v("   ")]}))],2),t("div",{staticClass:"infoPart",on:{mouseenter:e.mouseenter}},[t("div",[e._t("info",(function(){return[e._v("   ")]}))],2)]),t("div",{staticClass:"rightaddIcons iconsmall"},[e._t("rightadd",(function(){return[e._v("   ")]}))],2),t("div",{staticClass:"rightIcons icon"},[e._t("right",(function(){return[e._v("   ")]}))],2)]),e._t("additional")],2)])])},i=[],o=r("2f62"),a={name:"topheader",props:{classstyle:""},data:function(){return{loading:!1}},created:function(){},watch:{},computed:Object(o["d"])({auth:e=>e.auth,pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:e=>e.active}),methods:{mouseenter:function(){this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"header"})},mouseleave:function(){this.$store.state.autohide&&this.$store.commit("active",!1),this.$store.commit("blockactive",{value:!1,item:"header"})}}},s=a,c=r("2877");function l(e){var t=r("1347");t.__inject__&&t.__inject__(e)}var d=Object(c["a"])(s,n,i,!1,l,"b9eeb9ae",null,!0);t["a"]=d.exports},"0904":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".userspicwrapper[data-v-2d8181cb]{width:44px;height:44px;background:rgb(var(--background-main));line-height:44px;text-align:center;font-size:.8em;color:rgb(var(--color-bg-ac-2));position:relative}.userspicwrapper[data-v-2d8181cb],.userspicwrapper[data-v-2d8181cb] .bgimage{border-radius:50%}.swiperWrapperFlex[data-v-2d8181cb]{margin:0 auto}.icon[data-v-2d8181cb]{position:absolute;right:70%;top:70%;font-size:1em;width:20px;height:20px;line-height:20px;background:transparent;border-radius:20px;color:rgb(var(--color-txt-gray));opacity:.8;z-index:3}.icon.active[data-v-2d8181cb]{color:rgb(var(--color-txt-ac))}.userspic[data-v-2d8181cb]{position:relative}.iconPreview[data-v-2d8181cb]{width:44px;height:44px;border-radius:50%}",""]),e.exports=t},"097b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"0a06":function(e,t,r){"use strict";var n=r("c532"),i=r("30b5"),o=r("f6b4"),a=r("5270"),s=r("4a7b"),c=r("848b"),l=c.validators;function d(e){this.defaults=e,this.interceptors={request:new o,response:new o}}d.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=s(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean,"1.0.0"),forcedJSONParsing:l.transitional(l.boolean,"1.0.0"),clarifyTimeoutError:l.transitional(l.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!n){var d=[a,void 0];Array.prototype.unshift.apply(d,r),d=d.concat(o),i=Promise.resolve(e);while(d.length)i=i.then(d.shift(),d.shift());return i}var u=e;while(r.length){var h=r.shift(),f=r.shift();try{u=h(u)}catch(error){f(error);break}}try{i=a(u)}catch(error){return Promise.reject(error)}while(o.length)i=i.then(o.shift(),o.shift());return i},d.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){d.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}))}})),e.exports=d},"0a36":function(e,t,r){"use strict";var n={__proto__:null,foo:{}},i=Object;e.exports=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof i)}},"0a3f":function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"0a7f":function(e,t,r){"use strict";r.r(t);var n=r("130c");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"0ac3":function(e,t,r){t=e.exports=r("6f2e"),t.Stream=t,t.Readable=t,t.Writable=r("6ffa"),t.Duplex=r("d6dd"),t.Transform=r("dcd0"),t.PassThrough=r("aa69")},"0b1a":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"0b25":function(e,t,r){"use strict";var n=r("5926"),i=r("50c4"),o=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw new o("Wrong length or index");return r}},"0cfb":function(e,t,r){"use strict";var n=r("83ab"),i=r("d039"),o=r("cc12");e.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d25":function(e,t,r){"use strict";e.exports=TypeError},"0d26":function(e,t,r){"use strict";var n=r("e330"),i=Error,o=n("".replace),a=function(e){return String(new i(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);e.exports=function(e,t){if(c&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=o(e,s,"");return e}},"0d51":function(e,t,r){"use strict";var n=String;e.exports=function(e){try{return n(e)}catch(error){return"Object"}}},"0db6":function(e,t,r){"use strict";var n=r("c9b8").codes.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var a=i(t,o,r);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0){var s=o?r:"highWaterMark";throw new n(s,a)}return Math.floor(a)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},"0df6":function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"0f7c":function(e,t,r){"use strict";var n=r("688e");e.exports=Function.prototype.bind||n},1:function(e,t){},"101d":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return p}));var n,i=r("c973"),o=r.n(i),a=r("9523"),s=r.n(a),c=r("edaf"),l=r("5b5f"),d=r("60af"),u=r("936a"),h=r("299a");(function(e){e["Add"]="Relations.add",e["Remove"]="Relations.remove",e["Redaction"]="Relations.redaction"})(n||(n={}));var f=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return[t,...r].includes(e)};class p extends u["b"]{constructor(e,t,r,i){var a;super(),a=this,this.relationType=e,this.eventType=t,this.altEventTypes=i,s()(this,"relationEventIds",new Set),s()(this,"relations",new Set),s()(this,"annotationsByKey",{}),s()(this,"annotationsBySender",{}),s()(this,"sortedAnnotationsByKey",[]),s()(this,"targetEvent",null),s()(this,"creationEmitted",!1),s()(this,"client",void 0),s()(this,"onEventStatus",(e,t)=>{e.isSending()?t===c["a"].CANCELLED&&(e.removeListener(c["c"].Status,this.onEventStatus),this.removeEvent(e)):e.removeListener(c["c"].Status,this.onEventStatus)}),s()(this,"onBeforeRedaction",function(){var e=o()((function*(e){if(a.relations.has(e)){if(a.relations.delete(e),a.relationType===d["h"].Annotation)a.removeAnnotationFromAggregation(e);else if(a.relationType===d["h"].Replace&&a.targetEvent&&!a.targetEvent.isState()){var t=a.getLastReplacement();a.targetEvent.makeReplaced(t)}e.removeListener(c["c"].BeforeRedaction,a.onBeforeRedaction),a.emit(n.Redaction,e)}}));return function(t){return e.apply(this,arguments)}}()),this.client=r instanceof h["c"]?r.client:r}addEvent(e){var t=this;return o()((function*(){if(!t.relationEventIds.has(e.getId())){var r=e.getRelation();if(r){var i=r.rel_type,o=e.getType();if(t.relationType===i&&f(o,t.eventType,t.altEventTypes)){if(e.isSending()&&e.on(c["c"].Status,t.onEventStatus),t.relations.add(e),t.relationEventIds.add(e.getId()),t.relationType===d["h"].Annotation)t.addAnnotationToAggregation(e);else if(t.relationType===d["h"].Replace&&t.targetEvent&&!t.targetEvent.isState()){var a=t.getLastReplacement();t.targetEvent.makeReplaced(a)}e.on(c["c"].BeforeRedaction,t.onBeforeRedaction),t.emit(n.Add,e),t.maybeEmitCreated()}else l["b"].error("Event relation info doesn't match this container")}else l["b"].error("Event must have relation info")}}))()}removeEvent(e){var t=this;return o()((function*(){if(t.relations.has(e)){if(t.relations.delete(e),t.relationType===d["h"].Annotation)t.removeAnnotationFromAggregation(e);else if(t.relationType===d["h"].Replace&&t.targetEvent&&!t.targetEvent.isState()){var r=t.getLastReplacement();t.targetEvent.makeReplaced(r)}t.emit(n.Remove,e)}}))()}getRelations(){return[...this.relations]}addAnnotationToAggregation(e){var t,{key:r}=null!==(t=e.getRelation())&&void 0!==t?t:{};if(r){var n=this.annotationsByKey[r];n||(n=this.annotationsByKey[r]=new Set,this.sortedAnnotationsByKey.push([r,n])),n.add(e),this.sortedAnnotationsByKey.sort((e,t)=>{var r=e[1],n=t[1];return n.size-r.size});var i=e.getSender(),o=this.annotationsBySender[i];o||(o=this.annotationsBySender[i]=new Set),o.add(e)}}removeAnnotationFromAggregation(e){var t,{key:r}=null!==(t=e.getRelation())&&void 0!==t?t:{};if(r){var n=this.annotationsByKey[r];n&&(n.delete(e),this.sortedAnnotationsByKey.sort((e,t)=>{var r=e[1],n=t[1];return n.size-r.size}));var i=e.getSender(),o=this.annotationsBySender[i];o&&o.delete(e)}}getSortedAnnotationsByKey(){return this.relationType!==d["h"].Annotation?null:this.sortedAnnotationsByKey}getAnnotationsBySender(){return this.relationType!==d["h"].Annotation?null:this.annotationsBySender}getLastReplacement(){if(this.relationType!==d["h"].Replace)return null;if(!this.targetEvent)return null;var e=this.targetEvent.getServerAggregatedRelation(d["h"].Replace),t=null===e||void 0===e?void 0:e.origin_server_ts,r=this.getRelations().reduce((e,r)=>r.getSender()!==this.targetEvent.getSender()||t&&t>r.getTs()||e&&e.getTs()>r.getTs()?e:r,null);return this.client,r}setTargetEvent(e){var t=this;return o()((function*(){if(!t.targetEvent){if(t.targetEvent=e,t.relationType===d["h"].Replace&&!t.targetEvent.isState()){var r=t.getLastReplacement();r&&t.targetEvent.makeReplaced(r)}t.maybeEmitCreated()}}))()}maybeEmitCreated(){this.creationEmitted||this.targetEvent&&this.relations.size&&(this.creationEmitted=!0,this.targetEvent.emit(c["c"].RelationsCreated,this.relationType,this.eventType))}}},1027:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".items .item[data-v-f8ab8b44]{opacity:1}.items .item i[data-v-f8ab8b44]{width:2em;opacity:.7;font-size:.9em}.items .item .iwr[data-v-f8ab8b44]{padding:1em 1.5em}.items .item.signout[data-v-f8ab8b44]{font-weight:700;color:rgb(var(--color-txt-ac))}.menulist-enter-active[data-v-f8ab8b44],.menulist-leave-active[data-v-f8ab8b44]{transition:all 1s}.menulist-enter[data-v-f8ab8b44],.menulist-leave-to[data-v-f8ab8b44]{opacity:0;transform:translateY(30px)}",""]),e.exports=t},1073:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return s}));var n,i=r("9523"),o=r.n(i),a=r("936a");(function(e){e["DisplayName"]="User.displayName",e["AvatarUrl"]="User.avatarUrl",e["Presence"]="User.presence",e["CurrentlyActive"]="User.currentlyActive",e["LastPresenceTs"]="User.lastPresenceTs"})(n||(n={}));class s extends a["b"]{constructor(e){super(),this.userId=e,o()(this,"modified",-1),o()(this,"displayName",void 0),o()(this,"rawDisplayName",void 0),o()(this,"avatarUrl",void 0),o()(this,"presenceStatusMsg",void 0),o()(this,"presence","offline"),o()(this,"lastActiveAgo",0),o()(this,"lastPresenceTs",0),o()(this,"currentlyActive",!1),o()(this,"events",{}),this.displayName=e,this.rawDisplayName=e,this.updateModifiedTime()}static createUser(e,t){var r=new s(e);return t.reEmitter.reEmit(r,[n.AvatarUrl,n.DisplayName,n.Presence,n.CurrentlyActive,n.LastPresenceTs]),r}setPresenceEvent(e){if("m.presence"===e.getType()){var t=null===this.events.presence;this.events.presence=e;var r=[];for(var i of((e.getContent().presence!==this.presence||t)&&r.push(n.Presence),e.getContent().avatar_url&&e.getContent().avatar_url!==this.avatarUrl&&r.push(n.AvatarUrl),e.getContent().displayname&&e.getContent().displayname!==this.displayName&&r.push(n.DisplayName),void 0!==e.getContent().currently_active&&e.getContent().currently_active!==this.currentlyActive&&r.push(n.CurrentlyActive),this.presence=e.getContent().presence,r.push(n.LastPresenceTs),e.getContent().status_msg&&(this.presenceStatusMsg=e.getContent().status_msg),e.getContent().displayname&&(this.displayName=e.getContent().displayname),e.getContent().avatar_url&&(this.avatarUrl=e.getContent().avatar_url),this.lastActiveAgo=e.getContent().last_active_ago,this.lastPresenceTs=Date.now(),this.currentlyActive=e.getContent().currently_active,this.updateModifiedTime(),r))this.emit(i,e,this)}}setDisplayName(e){var t=this.displayName;this.displayName=e,e!==t&&this.updateModifiedTime()}setRawDisplayName(e){this.rawDisplayName=e}setAvatarUrl(e){var t=this.avatarUrl;this.avatarUrl=e,e!==t&&this.updateModifiedTime()}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}getLastActiveTs(){return this.lastPresenceTs-this.lastActiveAgo}}},"115b":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".upload[data-v-3fad2ed3]{width:100%}.uploadWrapper[data-v-3fad2ed3]{position:relative}.uploadWrapper .inputWrapper[data-v-3fad2ed3],.uploadWrapper .inputWrapper input[data-v-3fad2ed3]{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0}",""]),e.exports=t},"118b":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".actions[data-v-7999c80f]{padding-top:9em}.connect[data-v-7999c80f]{padding-top:2em}.connect[data-v-7999c80f] .previewWrapper{display:block;max-width:70%;margin:0 auto;padding:2em 0}.connect[data-v-7999c80f] .iconWrapper{margin:0 auto}.connect[data-v-7999c80f] .infoWrapper{padding:0}.connect .connectCaption[data-v-7999c80f]{max-width:70%;margin:0 auto}.connect .connectCaption span[data-v-7999c80f]{font-size:.8em}#userUnauthorized[data-v-7999c80f]{height:100%}#userUnauthorized.bin[data-v-7999c80f]{transition:.3s}#userUnauthorized.bin.minimized .wrapper[data-v-7999c80f]{top:60px;bottom:100px}#userUnauthorized.bin.minimized[data-v-7999c80f]:not(.active){width:44px}#userUnauthorized.bin.minimized:not(.active) .actions[data-v-7999c80f]{display:none}#userUnauthorized.bin.active .wrapper[data-v-7999c80f]{width:344px;transform:translateX(-300px)}.table[data-v-7999c80f]{height:100%}.table .cell[data-v-7999c80f]{vertical-align:middle}",""]),e.exports=t},1212:function(e,t,r){"use strict";var n,i,o=r("cfe9"),a=r("b5db"),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,d=l&&l.v8;d&&(n=d.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(i=+n[1]))),e.exports=i},"123d":function(t,r,n){"use strict";n.d(r,"a",(function(){return i})),n.d(r,"b",(function(){return f}));var i,o=n("c973"),a=n.n(o),s=n("9523"),c=n.n(s),l=n("9c88"),d=n("5b5f"),u=216e5,h=3e4;(function(e){e["Stable"]="stable",e["Unstable"]="unstable"})(i||(i={}));class f{constructor(t){var r=this;this.http=t,c()(this,"capabilities",void 0),c()(this,"retryTimeout",void 0),c()(this,"refreshTimeout",void 0),c()(this,"fetchCapabilities",a()((function*(){var e=yield r.http.authedRequest(l["i"].Get,"/capabilities");return r.capabilities=e["capabilities"],r.capabilities}))),c()(this,"poll",a()((function*(){try{yield r.fetchCapabilities(),r.clearTimeouts(),r.refreshTimeout=setTimeout(r.poll,u),d["b"].debug("Fetched new server capabilities")}catch(e){r.clearTimeouts();var t=Math.floor(h+5e3*Math.random());r.retryTimeout=setTimeout(r.poll,t),d["b"].warn("Failed to refresh capabilities: retrying in ".concat(t,"ms"),e)}})))}start(){this.poll().then()}stop(){this.clearTimeouts()}getCachedCapabilities(){return this.capabilities}clearTimeouts(){this.refreshTimeout&&(clearInterval(this.refreshTimeout),this.refreshTimeout=void 0),this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=void 0)}}},"130c":function(e,t,r){var n=r("1027");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("22c7414c",n,e)}},1347:function(e,t,r){"use strict";r.r(t);var n=r("b244");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"13d2":function(e,t,r){"use strict";var n=r("e330"),i=r("d039"),o=r("1626"),a=r("1a2d"),s=r("83ab"),c=r("5e77").CONFIGURABLE,l=r("8925"),d=r("69f3"),u=d.enforce,h=d.get,f=String,p=Object.defineProperty,v=n("".slice),m=n("".replace),g=n([].join),y=s&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===v(f(t),0,7)&&(t="["+m(f(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||c&&e.name!==t)&&(s?p(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&a(r,"arity")&&e.length!==r.arity&&p(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(error){}var n=u(e);return a(n,"source")||(n.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||l(this)}),"toString")},"13d5":function(e,t,r){"use strict";var n=r("23e7"),i=r("d58f").left,o=r("a640"),a=r("1212"),s=r("9adc"),c=!s&&a>79&&a<83,l=c||!o("reduce");n({target:"Array",proto:!0,forced:l},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},1409:function(e,t,r){"use strict";e.exports=ReferenceError},"143a":function(e,t,r){var n=r("24fb"),i=r("8db5"),o=r("78db"),a=r("c275");t=n(!1),t.i(i),t.i(o),t.i(a),t.push([e.i,"",""]),e.exports=t},1461:function(e,t,r){"use strict";r.r(t),r.d(t,"DecryptionFailureCode",(function(){return n})),r.d(t,"UserVerificationStatus",(function(){return d})),r.d(t,"DeviceVerificationStatus",(function(){return u})),r.d(t,"CrossSigningKey",(function(){return i})),r.d(t,"EventShieldColour",(function(){return o})),r.d(t,"EventShieldReason",(function(){return a})),r.d(t,"VerificationRequestEvent",(function(){return l["b"]})),r.d(t,"VerificationPhase",(function(){return l["a"]})),r.d(t,"VerifierEvent",(function(){return l["c"]})),r.d(t,"canAcceptVerificationRequest",(function(){return l["d"]}));var n,i,o,a,s=r("9523"),c=r.n(s),l=r("7963");(function(e){e["MEGOLM_UNKNOWN_INBOUND_SESSION_ID"]="MEGOLM_UNKNOWN_INBOUND_SESSION_ID",e["MEGOLM_KEY_WITHHELD"]="MEGOLM_KEY_WITHHELD",e["MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE"]="MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE",e["OLM_UNKNOWN_MESSAGE_INDEX"]="OLM_UNKNOWN_MESSAGE_INDEX",e["HISTORICAL_MESSAGE_NO_KEY_BACKUP"]="HISTORICAL_MESSAGE_NO_KEY_BACKUP",e["HISTORICAL_MESSAGE_BACKUP_UNCONFIGURED"]="HISTORICAL_MESSAGE_BACKUP_UNCONFIGURED",e["HISTORICAL_MESSAGE_WORKING_BACKUP"]="HISTORICAL_MESSAGE_WORKING_BACKUP",e["HISTORICAL_MESSAGE_USER_NOT_JOINED"]="HISTORICAL_MESSAGE_USER_NOT_JOINED",e["UNKNOWN_ERROR"]="UNKNOWN_ERROR",e["MEGOLM_BAD_ROOM"]="MEGOLM_BAD_ROOM",e["MEGOLM_MISSING_FIELDS"]="MEGOLM_MISSING_FIELDS",e["OLM_DECRYPT_GROUP_MESSAGE_ERROR"]="OLM_DECRYPT_GROUP_MESSAGE_ERROR",e["OLM_BAD_ENCRYPTED_MESSAGE"]="OLM_BAD_ENCRYPTED_MESSAGE",e["OLM_BAD_RECIPIENT"]="OLM_BAD_RECIPIENT",e["OLM_BAD_RECIPIENT_KEY"]="OLM_BAD_RECIPIENT_KEY",e["OLM_BAD_ROOM"]="OLM_BAD_ROOM",e["OLM_BAD_SENDER_CHECK_FAILED"]="OLM_BAD_SENDER_CHECK_FAILED",e["OLM_BAD_SENDER"]="OLM_BAD_SENDER",e["OLM_FORWARDED_MESSAGE"]="OLM_FORWARDED_MESSAGE",e["OLM_MISSING_CIPHERTEXT"]="OLM_MISSING_CIPHERTEXT",e["OLM_NOT_INCLUDED_IN_RECIPIENTS"]="OLM_NOT_INCLUDED_IN_RECIPIENTS",e["UNKNOWN_ENCRYPTION_ALGORITHM"]="UNKNOWN_ENCRYPTION_ALGORITHM"})(n||(n={}));class d{constructor(e,t,r){this.crossSigningVerified=e,this.crossSigningVerifiedBefore=t,this.tofu=r}isVerified(){return this.isCrossSigningVerified()}isCrossSigningVerified(){return this.crossSigningVerified}wasCrossSigningVerified(){return this.crossSigningVerifiedBefore}isTofu(){return this.tofu}}class u{constructor(e){var t,r,n,i,o;c()(this,"signedByOwner",void 0),c()(this,"crossSigningVerified",void 0),c()(this,"tofu",void 0),c()(this,"localVerified",void 0),c()(this,"trustCrossSignedDevices",void 0),this.signedByOwner=null!==(t=e.signedByOwner)&&void 0!==t&&t,this.crossSigningVerified=null!==(r=e.crossSigningVerified)&&void 0!==r&&r,this.tofu=null!==(n=e.tofu)&&void 0!==n&&n,this.localVerified=null!==(i=e.localVerified)&&void 0!==i&&i,this.trustCrossSignedDevices=null!==(o=e.trustCrossSignedDevices)&&void 0!==o&&o}isVerified(){return this.localVerified||this.trustCrossSignedDevices&&this.crossSigningVerified}}(function(e){e["Master"]="master",e["SelfSigning"]="self_signing",e["UserSigning"]="user_signing"})(i||(i={})),function(e){e[e["NONE"]=0]="NONE",e[e["GREY"]=1]="GREY",e[e["RED"]=2]="RED"}(o||(o={})),function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["UNVERIFIED_IDENTITY"]=1]="UNVERIFIED_IDENTITY",e[e["UNSIGNED_DEVICE"]=2]="UNSIGNED_DEVICE",e[e["UNKNOWN_DEVICE"]=3]="UNKNOWN_DEVICE",e[e["AUTHENTICITY_NOT_GUARANTEED"]=4]="AUTHENTICITY_NOT_GUARANTEED",e[e["MISMATCHED_SENDER_KEY"]=5]="MISMATCHED_SENDER_KEY"}(a||(a={}))},1467:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("9060"),a=n("956b");class s{static importKey(e,t,r=new o.WebCryptoProvider){return i(this,void 0,void 0,(function*(){return new s(yield a.SIV.importKey(e,t,r))}))}constructor(e){this._siv=e}seal(e,t,r=new Uint8Array(0)){return i(this,void 0,void 0,(function*(){return this._siv.seal(e,[r,t])}))}open(e,t,r=new Uint8Array(0)){return i(this,void 0,void 0,(function*(){return this._siv.open(e,[r,t])}))}clear(){return this._siv.clear(),this}}r.AEAD=s},"14d9":function(e,t,r){"use strict";var n=r("23e7"),i=r("7b0b"),o=r("07fa"),a=r("3a34"),s=r("3511"),c=r("d039"),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(error){return error instanceof TypeError}},u=l||!d();n({target:"Array",proto:!0,arity:1,forced:u},{push:function(e){var t=i(this),r=o(t),n=arguments.length;s(r+n);for(var c=0;c<n;c++)t[r]=arguments[c],r++;return a(t,r),r}})},1626:function(e,t,r){"use strict";var n="object"==typeof document&&document.all;e.exports="undefined"==typeof n&&void 0!==n?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}},1696:function(e,t,r){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(t in e[t]=n,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||!0!==o.enumerable)return!1}return!0}},1787:function(e,t,r){"use strict";var n=r("861d");e.exports=function(e){return n(e)||null===e}},"179b":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".default .preloader span[data-v-64c94140]:nth-child(2){animation:circle2-64c94140 1.5s infinite;transition-timing-function:ease-in-out;transform:translateX(1px);transform:scale(1.3);transform:translateY(1px)}.default .preloader span[data-v-64c94140]:first-child{animation:circle1-64c94140 1.5s infinite;transition-timing-function:ease-in-out;transform:translateX(1px) translateY(1px) scale(.7)}.default .preloader span[data-v-64c94140]:nth-child(3){animation:circle3-64c94140 1.5s infinite;transition-timing-function:ease-in-out;transform:translateX(1px);transform:scale(.7);transform:translateY(1px)}.spinner-eff.spinner-eff-3 .circle[data-v-64c94140]{border-radius:100px;position:absolute;left:0;right:0;margin:auto;transform:scale(1);transform-origin:center center}.spinner-eff.spinner-eff-3 .circle-1[data-v-64c94140]{width:100%;height:100%;background-color:#000;top:0;animation:pulse-64c94140 1.6s linear 0s infinite}.spinner-eff.spinner-eff-3 .circle-2[data-v-64c94140]{width:66.6%;height:66.6%;background-color:rgba(4,31,104,.4);top:16.5%;animation:pulse-2-64c94140 1.6s linear 0s infinite}.spinner-eff.spinner-eff-3 .circle-3[data-v-64c94140]{width:33.3%;height:33.3%;background-color:rgba(0,70,128,.6);top:33.3%}@keyframes circle1-64c94140{0%{transform:translateY(5px) translateX(0) scale(1.3)}50%{transform:translateY(0) translateX(23px) scale(2);background-color:#041f68}to{transform:translateY(5px) translateX(0) scale(1.3)}}@keyframes circle2-64c94140{0%{transform:translateY(10px) translateX(0) scale(1.3);background-color:transparent}50%{transform:translateY(17px) translateX(0) scale(2);background-color:#041f68}to{transform:translateY(10px) translateX(0) scale(1.3);background-color:transparent}}@keyframes circle3-64c94140{0%{transform:translateY(5px) translateX(0) scale(1.3)}50%{transform:translateY(0) translateX(-23px) scale(2);background-color:#041f68}to{transform:translateY(5px) translateX(0) scale(1.3)}}@keyframes pulse-64c94140{0%{transform:scale(0)}50%{transform:scale(1.3);opacity:0}to{transform:scale(1.3);opacity:0}}@keyframes pulse-2-64c94140{0%{transform:scale(0)}to{transform:scale(1.3);opacity:0}}",""]),e.exports=t},"182d":function(e,t,r){"use strict";var n=r("f8cd"),i=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new i("Wrong offset");return r}},"18e8":function(e,t,r){"use strict";function n(e){return i(e)&&"string"===typeof e}function i(e){return null!==e&&void 0!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.isOptionalAString=n,t.isProvided=i},"19aa":function(e,t,r){"use strict";var n=r("3a9b"),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},"1a2d":function(e,t,r){"use strict";var n=r("e330"),i=r("7b0b"),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},"1a66":function(e,t,r){"use strict";function n(e){return[1e3+(e[0]<<5|e[1]>>3),1e3+((7&e[1])<<10|e[2]<<2|e[3]>>6),1e3+((63&e[3])<<7|e[4]>>1)]}r.d(t,"a",(function(){return n}))},"1a95":function(e,t,r){var n=r("54dd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("8e8730c4",n,e)}},"1b71":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.m-message-container{position:fixed;z-index:1010;pointer-events:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;padding:15px}.m-message-container.is-top-center,.m-message-container.is-top-left,.m-message-container.is-top-right{width:100%;top:0;left:0}.m-message-container.is-top-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.m-message-container.is-top-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-container.is-top-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.m-message-container.is-center{width:100%;height:100%;left:0;top:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.m-message-container.is-bottom-center,.m-message-container.is-bottom-left,.m-message-container.is-bottom-right{bottom:0;left:0;width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.m-message-container.is-bottom-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.m-message-container.is-bottom-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-container.is-bottom-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.m-message-container.has-mask{background-color:hsla(0,0%,100%,.5);width:100%;height:100%;pointer-events:all}.m-message-wrapper{display:inline-block;max-width:500px}.m-message-wrapper+.m-message-wrapper{margin-top:15px}.m-message-wrapper:after,.m-message-wrapper:before{content:"";clear:both;display:table}.m-message-icons{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;margin-right:10px}.m-message--title{font-size:14px;font-weight:600;overflow:hidden;color:#646464;text-overflow:ellipsis;white-space:nowrap}.m-message-content{-webkit-box-sizing:border-box;box-sizing:border-box;overflow:auto;width:100%}.m-message-content .listPreview{cursor:pointer}.m-message-content .listPreview .invitedEvent{width:180px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-content .listPreview .invitedEvent span{display:block;font-size:.8em}.m-message-content .listPreview .invitedEvent .txt{color:#707070}.m-message-content .listPreview .invitedEvent .txtNew{color:#06823a}.m-message-content .listPreview .linkPreview span:first-letter{text-transform:uppercase}.m-message-content .listPreview .linkPreview .senderName{font-weight:700;color:#002a52}.m-message-content .listPreview .linkPreview .linkTitle{color:#707070}.m-message-content .listPreview .linkPreview .pocketnetLink{color:#002a52}.m-message-content .listPreview .previewMessageList span{color:#707070;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left}.m-message-content .listPreview .previewMessage{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.m-message-content .listPreview .previewMessage span{display:block;color:#707070;font-size:.8em;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left;max-width:150px}.m-message--description{line-height:1.6;color:#777}.m-message--title+.m-message--description{margin-top:5px}.m-message--icon{width:25px;height:25px;vertical-align:middle;display:inline-block;border-radius:50%}.m-message--control{position:relative;height:100%;-ms-flex-item-align:start;align-self:flex-start;white-space:nowrap;margin-right:-5px;margin-left:10px}.m-message--button{border:none;outline:none;background:none;cursor:pointer;font-size:15px;color:#646464;font-weight:600;padding:0;width:20px;height:20px;line-height:20px;text-align:center;vertical-align:middle}.m-message--button:hover{color:#f56c6c}.m-message--arrow-down.is-collapsed{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.m-message-fade-enter-active{-webkit-animation:m-message-fade-in-down .3s;animation:m-message-fade-in-down .3s}.m-message-fade-leave-active{-webkit-animation:m-message-fade-out .3s;animation:m-message-fade-out .3s}@-webkit-keyframes m-message-fade-in-down{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes m-message-fade-in-down{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes m-message-fade-out{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:-45px}}@keyframes m-message-fade-out{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:-45px}}',""]),e.exports=t},"1c00":function(t,r,n){"use strict";n.d(r,"a",(function(){return S})),n.d(r,"b",(function(){return E}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("3eed"),l=n.n(c),d=n("60af"),u=n("5b5f"),h=n("b83f"),f=n("2f36");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class m{constructor(e,t,r){this.client=e,this.indexEvent=t,this.directory=r}get id(){var e=this.indexEvent.getStateKey();if(!e)throw new Error("State key not found for branch");return e}get isActive(){return!0===this.indexEvent.getContent()["active"]}get version(){var e;return null!==(e=this.indexEvent.getContent()["version"])&&void 0!==e?e:1}get roomId(){return this.indexEvent.getRoomId()}delete(){var e=this;return o()((function*(){yield e.client.sendStateEvent(e.roomId,d["r"].name,{},e.id),yield e.client.redactEvent(e.roomId,e.id);var t=(yield e.getVersionHistory())[1];t&&(yield t.delete())}))()}getName(){return this.indexEvent.getContent()["name"]||"Unnamed File"}setName(e){var t=this;return o()((function*(){yield t.client.sendStateEvent(t.roomId,d["r"].name,v(v({},t.indexEvent.getContent()),{},{name:e}),t.id)}))()}isLocked(){return this.indexEvent.getContent()["locked"]||!1}setLocked(e){var t=this;return o()((function*(){yield t.client.sendStateEvent(t.roomId,d["r"].name,v(v({},t.indexEvent.getContent()),{},{locked:e}),t.id)}))()}getFileInfo(){var e=this;return o()((function*(){var t=yield e.getFileEvent(),r=t.getOriginalContent()["file"],n=e.client.mxcUrlToHttp(r["url"]);if(!n)throw new Error("No HTTP URL available for ".concat(r["url"]));return{info:r,httpUrl:n}}))()}getFileEvent(){var e=this;return o()((function*(){var t=e.client.getRoom(e.roomId);if(!t)throw new Error("Unknown room");var r=t.getUnfilteredTimelineSet().findEventById(e.id);while(!r&&t.getLiveTimeline().getState(f["b"].BACKWARDS).paginationToken)yield e.client.scrollback(t,100),r=t.getUnfilteredTimelineSet().findEventById(e.id);if(!r)throw new Error("Failed to find event");return yield e.client.decryptEventIfNeeded(r),r}))()}createNewVersion(e,t,r,n){var i=this;return o()((function*(){var o=yield i.directory.createFile(e,t,r,v(v({},null!==n&&void 0!==n?n:{}),{},{"m.new_content":!0,"m.relates_to":{rel_type:d["h"].Replace,event_id:i.id}}));return yield i.client.sendStateEvent(i.roomId,d["r"].name,{active:!0,name:e,version:i.version+1},o["event_id"]),yield i.client.sendStateEvent(i.roomId,d["r"].name,v(v({},i.indexEvent.getContent()),{},{active:!1}),i.id),o}))()}getVersionHistory(){var e=this;return o()((function*(){var t=[];t.push(e);var r=e.client.getRoom(e.roomId);if(!r)throw new Error("Invalid or unknown room");var n,i=[...r.getLiveTimeline().getEvents()].reverse(),o=yield e.getFileEvent();do{if(n=i.find(e=>e.replacingEventId()===o.getId()),n){var a=e.directory.getFile(n.getId());if(!a)break;t.push(a),o=n}}while(n);return t}))()}}var g=n("4e99"),y=n("3925");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w,S={invite:100,kick:100,ban:100,redact:50,state_default:50,events_default:50,users_default:0,events:{[d["b"].RoomPowerLevels]:100,[d["b"].RoomHistoryVisibility]:100,[d["b"].RoomTombstone]:100,[d["b"].RoomEncryption]:100,[d["b"].RoomName]:50,[d["b"].RoomMessage]:50,[d["b"].RoomMessageEncrypted]:50,[d["b"].Sticker]:50},users:{}};(function(e){e["Viewer"]="viewer",e["Editor"]="editor",e["Owner"]="owner"})(w||(w={}));class E{constructor(e,t){if(this.client=e,this.roomId=t,s()(this,"room",void 0),this.room=this.client.getRoom(this.roomId),!this.room)throw new Error("Unknown room")}get id(){return this.roomId}get isTopLevel(){var e=this.room.currentState.getStateEvents(d["b"].SpaceParent);return null===e||void 0===e||!e.length||e.every(e=>{var t;return!(null!==(t=e.getContent())&&void 0!==t&&t["via"])})}setName(e){var t=this;return o()((function*(){yield t.client.sendStateEvent(t.roomId,d["b"].RoomName,{name:e},"")}))()}invite(e){var t=arguments,r=this;return o()((function*(){var n=!(t.length>1&&void 0!==t[1])||t[1],i=!(t.length>2&&void 0!==t[2])||t[2],o=[r.retryInvite(e)];return n&&o.push(...r.getDirectories().map(t=>t.invite(e,n,i))),Promise.all(o).then(()=>{i&&Object(g["a"])(r.room)&&r.client.sendSharedHistoryKeys(r.roomId,[e])})}))()}retryInvite(e){var t=this;return Object(h["J"])(o()((function*(){yield t.client.invite(t.roomId,e).catch(e=>{if("M_FORBIDDEN"===(null===e||void 0===e?void 0:e.errcode))throw new l.a.AbortError(e);throw e})})))}setPermissions(e,t){var r=this;return o()((function*(){var n,i=r.room.currentState.getStateEvents(d["b"].RoomPowerLevels,"");if(Array.isArray(i))throw new Error("Unexpected return type for power levels");var o=(null===i||void 0===i?void 0:i.getContent())||{},a=o["users_default"]||0,s=o["events_default"]||50,c=(null===(n=o["events"])||void 0===n?void 0:n[d["b"].RoomPowerLevels])||100,l=o["users"]||{};switch(t){case w.Viewer:l[e]=a;break;case w.Editor:l[e]=s;break;case w.Owner:l[e]=c;break;default:throw new Error("Invalid role: "+t)}o["users"]=l,yield r.client.sendStateEvent(r.roomId,d["b"].RoomPowerLevels,o,"")}))()}getPermissions(e){var t,r,n=this.room.currentState.getStateEvents(d["b"].RoomPowerLevels,"");if(Array.isArray(n))throw new Error("Unexpected return type for power levels");var i=(null===n||void 0===n?void 0:n.getContent())||{},o=i["users_default"]||0,a=i["events_default"]||50,s=(null===(t=i["events"])||void 0===t?void 0:t[d["b"].RoomPowerLevels])||100,c=(null===(r=i["users"])||void 0===r?void 0:r[e])||o;return c>=s?w.Owner:c>=a?w.Editor:w.Viewer}createDirectory(e){var t=this;return o()((function*(){var r=yield t.client.unstableCreateFileTree(e);return yield t.client.sendStateEvent(t.roomId,d["b"].SpaceChild,{via:[t.client.getDomain()]},r.roomId),yield t.client.sendStateEvent(r.roomId,d["b"].SpaceParent,{via:[t.client.getDomain()]},t.roomId),r}))()}getDirectories(){var t=[],r=this.room.currentState.getStateEvents(d["b"].SpaceChild);for(var n of r)try{var i=n.getStateKey();if(i){var o=this.client.unstableGetFileTreeSpace(i);o&&t.push(o)}}catch(e){u["b"].warn("Unable to create tree space instance for listing. Are we joined?",e)}return t}getDirectory(e){return this.getDirectories().find(t=>t.roomId===e)}delete(){var e=this;return o()((function*(){var t=e.getDirectories();for(var r of t)yield r.delete();var n=[y["a"].Invite,y["a"].Knock,y["a"].Join],i=e.room.currentState.getStateEvents(d["b"].RoomMember);for(var o of i){var a=o.getStateKey()!==e.client.getUserId();if(a&&n.includes(o.getContent().membership)){var s=o.getStateKey();if(!s)throw new Error("State key not found for branch");yield e.client.kick(e.roomId,s,"Room deleted")}}yield e.client.leave(e.roomId)}))()}getOrderedChildren(e){var t=e.map(e=>({roomId:e.getStateKey(),order:e.getContent()["order"]})).filter(e=>e.roomId);return t.sort((e,t)=>{if(e.order&&!t.order)return-1;if(!e.order&&t.order)return 1;if(e.order||t.order)return Object(h["t"])(e.order,t.order);var r,n,i,o,a=this.client.getRoom(e.roomId),s=this.client.getRoom(t.roomId);if(!a||!s)return Object(h["t"])(e.roomId,t.roomId);var c=null!==(r=null===(n=a.currentState.getStateEvents(d["b"].RoomCreate,""))||void 0===n?void 0:n.getTs())&&void 0!==r?r:0,l=null!==(i=null===(o=s.currentState.getStateEvents(d["b"].RoomCreate,""))||void 0===o?void 0:o.getTs())&&void 0!==i?i:0;return c===l?Object(h["t"])(e.roomId,t.roomId):c-l}),t}getParentRoom(){var e=this.room.currentState.getStateEvents(d["b"].SpaceParent),t=e[0];if(!t)throw new Error("Expected to have a parent in a non-top level space");var r=t.getStateKey();if(!r)throw new Error("No state key found for parent");var n=this.client.getRoom(r);if(!n)throw new Error("Unable to locate room for parent");return n}getOrder(){if(this.isTopLevel)return-1;var e=this.getParentRoom(),t=e.currentState.getStateEvents(d["b"].SpaceChild),r=this.getOrderedChildren(t);return r.findIndex(e=>e.roomId===this.roomId)}setOrder(e){var t=this;return o()((function*(){var r;if(t.isTopLevel)throw new Error("Cannot set order of top level spaces currently");var n=t.getParentRoom(),i=n.currentState.getStateEvents(d["b"].SpaceChild),o=t.getOrderedChildren(i);e=Math.max(Math.min(e,o.length-1),0);var a=t.getOrder(),s=a<e;s&&e===o.length-1?e--:s||0!==e||e++;var c=o[s?e:e-1],l=o[s?e+1:e],u=h["a"][0],f=!1;if(c)if(e===o.length-1)null!==l&&void 0!==l&&l.order&&(u=Object(h["w"])(l.order));else{var p=null===c||void 0===c?void 0:c.order,v=null===l||void 0===l?void 0:l.order;p&&v?u=p===v?Object(h["w"])(p):Object(h["c"])(p,v):p?u=Object(h["w"])(p):v?u=Object(h["z"])(v):f=!0}else null!==l&&void 0!==l&&l.order&&(u=Object(h["z"])(l.order));if(f){for(var m,g=0;g<=e;g++){var y=o[g];if(0===g&&(m=y.order),y.order)m=y.order;else{var b;m=m?Object(h["w"])(m):h["a"][0];var w=n.currentState.getStateEvents(d["b"].SpaceChild,y.roomId),S=null!==(b=null===w||void 0===w?void 0:w.getContent())&&void 0!==b?b:{via:[t.client.getDomain()]};yield t.client.sendStateEvent(n.roomId,d["b"].SpaceChild,_(_({},S),{},{order:m}),y.roomId)}}m&&(u=Object(h["w"])(m))}var E=n.currentState.getStateEvents(d["b"].SpaceChild,t.roomId),k=null!==(r=null===E||void 0===E?void 0:E.getContent())&&void 0!==r?r:{via:[t.client.getDomain()]};yield t.client.sendStateEvent(n.roomId,d["b"].SpaceChild,_(_({},k),{},{order:u}),t.roomId)}))()}createFile(e,t,r,n){var i=this;return o()((function*(){var o,{content_uri:a}=yield i.client.uploadContent(t,{includeFilename:!1});r.url=a;var s={msgtype:d["e"].File,body:e,url:a,file:r};n=null!==(o=n)&&void 0!==o?o:{},n["m.new_content"]&&(n["m.new_content"]=s);var c=yield i.client.sendMessage(i.roomId,_(_(_({},n),s),{},{[d["s"].name]:{}}));return yield i.client.sendStateEvent(i.roomId,d["r"].name,{active:!0,name:e},c["event_id"]),c}))()}getFile(e){var t=this.room.currentState.getStateEvents(d["r"].name,e);return t?new m(this.client,t,this):null}listFiles(){return this.listAllFiles().filter(e=>e.isActive)}listAllFiles(){var e,t=null!==(e=this.room.currentState.getStateEvents(d["r"].name))&&void 0!==e?e:[];return t.map(e=>new m(this.client,e,this))}}},"1d02":function(e,t,r){"use strict";var n=r("ebb5"),i=r("a258").findLastIndex,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("findLastIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"1d04":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetApiDirection=void 0,t.invertedDirection=i;var n=function(e){return e["ToWidget"]="toWidget",e["FromWidget"]="fromWidget",e}({});function i(e){if(e===n.ToWidget)return n.FromWidget;if(e===n.FromWidget)return n.ToWidget;throw new Error("Invalid direction")}t.WidgetApiDirection=n},"1d0f":function(e,t,r){},"1d2b":function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},"1d80":function(e,t,r){"use strict";var n=r("7234"),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},"1da1":function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,c,"next",e)}function c(e){n(a,i,o,s,c,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return i}))},"1dea":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"1fb5":function(e,t,r){"use strict";t.byteLength=d,t.toByteArray=h,t.fromByteArray=v;for(var n=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function d(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function u(e,t,r){return 3*(t+r)/4-r}function h(e){var t,r,n=l(e),a=n[0],s=n[1],c=new o(u(e,a,s)),d=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[d++]=255&t),1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c}function f(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function p(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(f(n));return i.join("")}function v(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(p(e,s,s+a>c?c:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"1fc7":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"#linepreloader[data-v-d10d1e22]{display:inline-block;font-size:0;padding:0}#linepreloader span[data-v-d10d1e22]{vertical-align:middle;border-radius:50%;background:rgb(var(--neutral-grad-2));display:inline-block;width:6px;height:6px;margin:3px 2px;animation:linepreloader-d10d1e22 .8s linear infinite alternate}#linepreloader span[data-v-d10d1e22]:first-child{animation-delay:-.8s}#linepreloader span[data-v-d10d1e22]:nth-child(2){animation-delay:-.53333s}#linepreloader span[data-v-d10d1e22]:nth-child(3){animation-delay:-.26666s}@keyframes linepreloader-d10d1e22{0%{transform:scale(0)}to{transform:scale(1)}}",""]),e.exports=t},2:function(e,t){},2005:function(e,t,r){"use strict";var n=r("75bd"),i=TypeError;e.exports=function(e){if(n(e))throw new i("ArrayBuffer is detached");return e}},"203b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2055:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".menuitem[data-v-6d0a1598]{display:flex;padding:1em;align-items:center;background:rgb(var(--neutral-grad-0));color:rgb(var(--neutral-grad-4));margin-bottom:.5em;border-radius:22px}.menuitem.good[data-v-6d0a1598]{color:rgb(var(--color-good))}.menuitem.bad[data-v-6d0a1598]{color:rgb(var(--color-bad))}.menuitem i[data-v-6d0a1598]{width:33px;text-align:center;margin-right:.5em}[data-v-6d0a1598] .simplelist .item:last-child .menuitem{margin-bottom:0}@media(pointer:fine){.menuitem[data-v-6d0a1598]{cursor:pointer;transition:.3s}.menuitem[data-v-6d0a1598]:hover{background:rgb(var(--neutral-grad-1))}}",""]),e.exports=t},"206d":function(t,r,n){(function(r){var i,o,a=n("8707").Buffer,s=n("7d2a"),c=n("9f9d"),l=n("e07b"),d=n("8be6"),u=r.crypto&&r.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function p(e){if(r.process&&!r.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==f[e])return f[e];i=i||a.alloc(8);var t=m(i,i,10,128,e).then((function(){return!0})).catch((function(){return!1}));return f[e]=t,t}function v(){return o||(o=r.process&&r.process.nextTick?r.process.nextTick:r.queueMicrotask?r.queueMicrotask:r.setImmediate?r.setImmediate:r.setTimeout,o)}function m(e,t,r,n,i){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:i}},e,n<<3)})).then((function(e){return a.from(e)}))}function g(e,t){e.then((function(e){v()((function(){t(null,e)}))}),(function(e){v()((function(){t(e)}))}))}t.exports=function(t,n,i,o,a,u){"function"===typeof a&&(u=a,a=void 0),a=a||"sha1";var f=h[a.toLowerCase()];if(f&&"function"===typeof r.Promise){if(s(i,o),t=d(t,c,"Password"),n=d(n,c,"Salt"),"function"!==typeof u)throw new Error("No callback provided to pbkdf2");g(p(f).then((function(e){return e?m(t,n,i,o,f):l(t,n,i,o,a)})),u)}else v()((function(){var r;try{r=l(t,n,i,o,a)}catch(e){return u(e)}u(null,r)}))}}).call(this,n("c8ba"))},2100:function(t,r,n){"use strict";var i=n("a593"),o=n("e1d0"),a=n("ad9d"),s=n("daf5"),c=n("5896"),l=n("232d");t.exports=function(t){return new Promise((function(r,d){var u=t.data,h=t.headers;i.isFormData(u)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",v=t.auth.password||"";h.Authorization="Basic "+btoa(p+":"+v)}if(f.open(t.method.toUpperCase(),a(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?f.response:f.responseText,i={data:n,status:f.status,statusText:f.statusText,headers:e,config:t,request:f};o(r,d,i),f=null}},f.onerror=function(){d(l("Network Error",t,null,f)),f=null},f.ontimeout=function(){d(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var m=n("b57f"),g=(t.withCredentials||c(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in f&&i.forEach(h,(function(e,t){"undefined"===typeof u&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(e){f&&(f.abort(),d(e),f=null)})),void 0===u&&(u=null),f.send(u)}))}},2149:function(e,t,r){"use strict";r.r(t);var n=r("46c6");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"21a6":function(e,t,r){(function(r){var n,i,o;(function(r,a){i=[],n=a,o="function"===typeof n?n.apply(t,i):n,void 0===o||(e.exports=o)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){c(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,r){var s=a.URL||a.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?o(c):i(c.href)?n(e,t,r):o(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,a){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),r);else if(i(e))n(e,r,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,r,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var o="application/octet-stream"===e.type,c=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&c||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},d.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,h=u.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});a.saveAs=c.saveAs=c,e.exports=c}))}).call(this,r("c8ba"))},"21e2":function(e,t,r){var n=r("b639"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},2328:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("9523"),i=r.n(n),o=r("edaf"),a=r("60af");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){var r=Boolean(t.preventReEmit),n=!1!==t.decrypt;function i(s){t.toDevice&&delete s.room_id;var l,d=e.getRoom(s.room_id);d&&void 0===s.state_key&&(l=d.findEventById(s.event_id)),!l||l.status?l=new o["b"](s):(l.setUnsigned(c(c({},l.getUnsigned()),s.unsigned)),r=!0);var u=l.getServerAggregatedRelation(a["h"].Replace);if(null!==u&&void 0!==u&&u.content){var h=i(u);l.makeReplaced(h)}var f=null===d||void 0===d?void 0:d.findThreadForEvent(l);return f&&l.setThread(f),l.isEncrypted()&&(r||e.reEmitter.reEmit(l,[o["c"].Decrypted]),n&&e.decryptEventIfNeeded(l)),r||(e.reEmitter.reEmit(l,[o["c"].Replaced,o["c"].VisibilityChange]),null===d||void 0===d||d.reEmitter.reEmit(l,[o["c"].BeforeRedaction])),l}return i}},"232d":function(e,t,r){"use strict";var n=r("d164");e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},2335:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},2370:function(e,t,r){"use strict";function n(e){return null!==e&&void 0!==e}r.d(t,"a",(function(){return n}))},"23cb":function(e,t,r){"use strict";var n=r("5926"),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},"23e7":function(e,t,r){"use strict";var n=r("cfe9"),i=r("06cf").f,o=r("9112"),a=r("cb2d"),s=r("6374"),c=r("e893"),l=r("94ca");e.exports=function(e,t){var r,d,u,h,f,p,v=e.target,m=e.global,g=e.stat;if(d=m?n:g?n[v]||s(v,{}):n[v]&&n[v].prototype,d)for(u in t){if(f=t[u],e.dontCallGetSet?(p=i(d,u),h=p&&p.value):h=d[u],r=l(m?u:v+(g?".":"#")+u,e.forced),!r&&void 0!==h){if(typeof f==typeof h)continue;c(f,h)}(e.sham||h&&h.sham)&&o(f,"sham",!0),a(d,u,f,e)}}},"241c":function(e,t,r){"use strict";var n=r("ca84"),i=r("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},2444:function(t,r,n){"use strict";(function(r){var i=n("c532"),o=n("c8af"),a=n("387f"),s={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function l(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof r&&"[object process]"===Object.prototype.toString.call(r))&&(e=n("b50d")),e}function d(t,r,n){if(i.isString(t))try{return(r||JSON.parse)(t),i.trim(t)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(t)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:l(),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),d(e)):e}],transformResponse:[function(t){var r=this.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||o&&i.isString(t)&&t.length)try{return JSON.parse(t)}catch(e){if(s){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(s)})),t.exports=u}).call(this,n("4362"))},"249d":function(e,t,r){"use strict";var n=r("23e7"),i=r("41f6");i&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},"24aa":function(e,t,r){var n=r("07dc");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("08d52a1a",n,e)}},"24fb":function(e,t,r){"use strict";function n(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"===typeof btoa){var o=i(n),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}function i(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(r," */")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=n(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"===typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&i[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},2501:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=u(e,"string");return"symbol"===n(t)?t:String(t)}function u(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetEventCapability=t.EventKind=t.EventDirection=void 0;var h=function(e){return e["Event"]="event",e["State"]="state_event",e["ToDevice"]="to_device",e["RoomAccount"]="room_account",e}({});t.EventKind=h;var f=function(e){return e["Send"]="send",e["Receive"]="receive",e}({});t.EventDirection=f;var p=function(){function e(t,r,n,i,o){s(this,e),this.direction=t,this.eventType=r,this.kind=n,this.keyStr=i,this.raw=o}return l(e,[{key:"matchesAsStateEvent",value:function(e,t,r){return this.kind===h.State&&(this.direction===e&&(this.eventType===t&&(null===this.keyStr||this.keyStr===r)))}},{key:"matchesAsToDeviceEvent",value:function(e,t){return this.kind===h.ToDevice&&(this.direction===e&&this.eventType===t)}},{key:"matchesAsRoomEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.kind===h.Event&&(this.direction===e&&(this.eventType===t&&("m.room.message"!==this.eventType||(null===this.keyStr||this.keyStr===r))))}},{key:"matchesAsRoomAccountData",value:function(e,t){return this.kind===h.RoomAccount&&(this.direction===e&&this.eventType===t)}}],[{key:"forStateEvent",value:function(t,r,n){r=r.replace(/#/g,"\\#"),n=null!==n&&void 0!==n?"#".concat(n):"";var i="org.matrix.msc2762.".concat(t,".state_event:").concat(r).concat(n);return e.findEventCapabilities([i])[0]}},{key:"forToDeviceEvent",value:function(t,r){var n="org.matrix.msc3819.".concat(t,".to_device:").concat(r);return e.findEventCapabilities([n])[0]}},{key:"forRoomEvent",value:function(t,r){var n="org.matrix.msc2762.".concat(t,".event:").concat(r);return e.findEventCapabilities([n])[0]}},{key:"forRoomMessageEvent",value:function(t,r){r=null===r||void 0===r?"":r;var n="org.matrix.msc2762.".concat(t,".event:m.room.message#").concat(r);return e.findEventCapabilities([n])[0]}},{key:"forRoomAccountData",value:function(t,r){var n="com.beeper.capabilities.".concat(t,".room_account_data:").concat(r);return e.findEventCapabilities([n])[0]}},{key:"findEventCapabilities",value:function(t){var r,n=[],o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=null,c=void 0,l=null;if(a.startsWith("org.matrix.msc2762.send.event:")?(s=f.Send,l=h.Event,c=a.substring("org.matrix.msc2762.send.event:".length)):a.startsWith("org.matrix.msc2762.send.state_event:")?(s=f.Send,l=h.State,c=a.substring("org.matrix.msc2762.send.state_event:".length)):a.startsWith("org.matrix.msc3819.send.to_device:")?(s=f.Send,l=h.ToDevice,c=a.substring("org.matrix.msc3819.send.to_device:".length)):a.startsWith("org.matrix.msc2762.receive.event:")?(s=f.Receive,l=h.Event,c=a.substring("org.matrix.msc2762.receive.event:".length)):a.startsWith("org.matrix.msc2762.receive.state_event:")?(s=f.Receive,l=h.State,c=a.substring("org.matrix.msc2762.receive.state_event:".length)):a.startsWith("org.matrix.msc3819.receive.to_device:")?(s=f.Receive,l=h.ToDevice,c=a.substring("org.matrix.msc3819.receive.to_device:".length)):a.startsWith("com.beeper.capabilities.receive.room_account_data:")&&(s=f.Receive,l=h.RoomAccount,c=a.substring("com.beeper.capabilities.receive.room_account_data:".length)),null!==s&&null!==l&&void 0!==c){var d=c.startsWith("m.room.message#")||l===h.State,u=null;if(c.includes("#")&&d){var p=c.split("#"),v=p.findIndex((function(e){return!e.endsWith("\\")}));c=p.slice(0,v+1).map((function(e){return e.endsWith("\\")?e.substring(0,e.length-1):e})).join("#"),u=p.slice(v+1).join("#")}n.push(new e(s,c,l,u,a))}}}catch(m){o.e(m)}finally{o.f()}return n}}]),e}();t.WidgetEventCapability=p},"252c":function(e,t,r){"use strict";(function(e){function n(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var r=e.indexOf("Trident/");if(r>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):-1}r.d(t,"a",(function(){return a}));var i=void 0;function o(){o.init||(o.init=!0,i=-1!==n())}var a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{compareAndNotify:function(){this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify"))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!i&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),delete this._resizeObject.onload)}},mounted:function(){var e=this;o(),this.$nextTick((function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight}));var t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",i&&this.$el.appendChild(t),t.data="about:blank",i||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()}};function s(e){e.component("resize-observer",a),e.component("ResizeObserver",a)}var c={version:"0.4.5",install:s},l=null;"undefined"!==typeof window?l=window.Vue:"undefined"!==typeof e&&(l=e.Vue),l&&l.use(c)}).call(this,r("c8ba"))},"256a":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetParser=void 0;var n=r("fc01"),i=r("37ee");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function s(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function u(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=f(e,"string");return"symbol"===o(t)?t:String(t)}function f(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var p=function(){function e(){l(this,e)}return u(e,null,[{key:"parseAccountData",value:function(t){if(!t)return[];for(var r=[],n=0,i=Object.keys(t);n<i.length;n++){var o=i[n],a=t[o];if(a&&(("m.widget"===a.type||"im.vector.modular.widgets"===a.type)&&a.sender)){var s=a.state_key||a.id;if(s===o){var c={content:a.content,sender:a.sender,type:"m.widget",state_key:o,event_id:"$example",room_id:"!example",origin_server_ts:1},l=e.parseRoomWidget(c);l&&r.push(l)}}}return r}},{key:"parseWidgetsFromRoomState",value:function(t){if(!t)return[];var r,n=[],i=a(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=e.parseRoomWidget(o);s&&n.push(s)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"parseRoomWidget",value:function(t){if(!t)return null;if("m.widget"!==t.type&&"im.vector.modular.widgets"!==t.type)return null;var r=t.content||{},n={id:t.state_key,creatorUserId:r["creatorUserId"]||t.sender,name:r["name"],type:r["type"],url:r["url"],waitForIframeLoad:r["waitForIframeLoad"],data:r["data"]};return e.processEstimatedWidget(n)}},{key:"processEstimatedWidget",value:function(e){return e.id&&e.creatorUserId&&e.type&&(0,i.isValidUrl)(e.url)?new n.Widget(e):null}}]),e}();t.WidgetParser=p},"25a6":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.roomId=e}}},2714:function(t,r,n){(function(r){var i="function"===typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=i&&o&&"function"===typeof o.get?o.get:null,s=i&&Map.prototype.forEach,c="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=c&&l&&"function"===typeof l.get?l.get:null,u=c&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype,f=h?WeakMap.prototype.has:null,p="function"===typeof WeakSet&&WeakSet.prototype,v=p?WeakSet.prototype.has:null,m="function"===typeof WeakRef&&WeakRef.prototype,g=m?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,b=Object.prototype.toString,_=Function.prototype.toString,w=String.prototype.match,S=String.prototype.slice,E=String.prototype.replace,k=String.prototype.toUpperCase,I=String.prototype.toLowerCase,C=RegExp.prototype.test,T=Array.prototype.concat,R=Array.prototype.join,x=Array.prototype.slice,O=Math.floor,M="function"===typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,D="function"===typeof Symbol&&"object"===typeof Symbol.iterator,j="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===D||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,N=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function U(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||C.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var n=e<0?-O(-e):O(e);if(n!==e){var i=String(n),o=S.call(t,i.length+1);return E.call(i,r,"$&_")+"."+E.call(E.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(t,r,"$&_")}var F=n(4),B=F.custom,K=X(B)?B:null;function q(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function V(e){return E.call(String(e),/"/g,"&quot;")}function W(e){return"[object Array]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function $(e){return"[object Date]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function z(e){return"[object RegExp]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function G(e){return"[object Error]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function H(e){return"[object String]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function Y(e){return"[object Number]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function J(e){return"[object Boolean]"===te(e)&&(!j||!("object"===typeof e&&j in e))}function X(t){if(D)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!P)return!1;try{return P.call(t),!0}catch(e){}return!1}function Z(t){if(!t||"object"!==typeof t||!M)return!1;try{return M.call(t),!0}catch(e){}return!1}t.exports=function e(t,n,i,o){var c=n||{};if(ee(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ee(c,"maxStringLength")&&("number"===typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!ee(c,"customInspect")||c.customInspect;if("boolean"!==typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ee(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ee(c,"numericSeparator")&&"boolean"!==typeof c.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=c.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return de(t,c);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var f=String(t);return h?U(t,f):f}if("bigint"===typeof t){var p=String(t)+"n";return h?U(t,p):p}var v="undefined"===typeof c.depth?5:c.depth;if("undefined"===typeof i&&(i=0),i>=v&&v>0&&"object"===typeof t)return W(t)?"[Array]":"[Object]";var m=me(c,i);if("undefined"===typeof o)o=[];else if(ne(o,t)>=0)return"[Circular]";function g(t,r,n){if(r&&(o=x.call(o),o.push(r)),n){var a={depth:c.depth};return ee(c,"quoteStyle")&&(a.quoteStyle=c.quoteStyle),e(t,a,i+1,o)}return e(t,c,i+1,o)}if("function"===typeof t&&!z(t)){var b=re(t),_=ye(t,g);return"[Function"+(b?": "+b:" (anonymous)")+"]"+(_.length>0?" { "+R.call(_,", ")+" }":"")}if(X(t)){var w=D?E.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!==typeof t||D?w:he(w)}if(le(t)){for(var k="<"+I.call(String(t.nodeName)),C=t.attributes||[],O=0;O<C.length;O++)k+=" "+C[O].name+"="+q(V(C[O].value),"double",c);return k+=">",t.childNodes&&t.childNodes.length&&(k+="..."),k+="</"+I.call(String(t.nodeName))+">",k}if(W(t)){if(0===t.length)return"[]";var A=ye(t,g);return m&&!ve(A)?"["+ge(A,m)+"]":"[ "+R.call(A,", ")+" ]"}if(G(t)){var B=ye(t,g);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===B.length?"["+String(t)+"]":"{ ["+String(t)+"] "+R.call(B,", ")+" }":"{ ["+String(t)+"] "+R.call(T.call("[cause]: "+g(t.cause),B),", ")+" }"}if("object"===typeof t&&l){if(K&&"function"===typeof t[K]&&F)return F(t,{depth:v-i});if("symbol"!==l&&"function"===typeof t.inspect)return t.inspect()}if(ie(t)){var Q=[];return s&&s.call(t,(function(e,r){Q.push(g(r,t,!0)+" => "+g(e,t))})),pe("Map",a.call(t),Q,m)}if(se(t)){var ue=[];return u&&u.call(t,(function(e){ue.push(g(e,t))})),pe("Set",d.call(t),ue,m)}if(oe(t))return fe("WeakMap");if(ce(t))return fe("WeakSet");if(ae(t))return fe("WeakRef");if(Y(t))return he(g(Number(t)));if(Z(t))return he(g(M.call(t)));if(J(t))return he(y.call(t));if(H(t))return he(g(String(t)));if("undefined"!==typeof window&&t===window)return"{ [object Window] }";if("undefined"!==typeof globalThis&&t===globalThis||"undefined"!==typeof r&&t===r)return"{ [object globalThis] }";if(!$(t)&&!z(t)){var be=ye(t,g),_e=N?N(t)===Object.prototype:t instanceof Object||t.constructor===Object,we=t instanceof Object?"":"null prototype",Se=!_e&&j&&Object(t)===t&&j in t?S.call(te(t),8,-1):we?"Object":"",Ee=_e||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"",ke=Ee+(Se||we?"["+R.call(T.call([],Se||[],we||[]),": ")+"] ":"");return 0===be.length?ke+"{}":m?ke+"{"+ge(be,m)+"}":ke+"{ "+R.call(be,", ")+" }"}return String(t)};var Q=Object.prototype.hasOwnProperty||function(e){return e in this};function ee(e,t){return Q.call(e,t)}function te(e){return b.call(e)}function re(e){if(e.name)return e.name;var t=w.call(_.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function ne(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function ie(t){if(!a||!t||"object"!==typeof t)return!1;try{a.call(t);try{d.call(t)}catch(r){return!0}return t instanceof Map}catch(e){}return!1}function oe(t){if(!f||!t||"object"!==typeof t)return!1;try{f.call(t,f);try{v.call(t,v)}catch(r){return!0}return t instanceof WeakMap}catch(e){}return!1}function ae(t){if(!g||!t||"object"!==typeof t)return!1;try{return g.call(t),!0}catch(e){}return!1}function se(t){if(!d||!t||"object"!==typeof t)return!1;try{d.call(t);try{a.call(t)}catch(r){return!0}return t instanceof Set}catch(e){}return!1}function ce(t){if(!v||!t||"object"!==typeof t)return!1;try{v.call(t,v);try{f.call(t,f)}catch(r){return!0}return t instanceof WeakSet}catch(e){}return!1}function le(e){return!(!e||"object"!==typeof e)&&("undefined"!==typeof HTMLElement&&e instanceof HTMLElement||"string"===typeof e.nodeName&&"function"===typeof e.getAttribute)}function de(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return de(S.call(e,0,t.maxStringLength),t)+n}var i=E.call(E.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ue);return q(i,"single",t)}function ue(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+k.call(t.toString(16))}function he(e){return"Object("+e+")"}function fe(e){return e+" { ? }"}function pe(e,t,r,n){var i=n?ge(r,n):R.call(r,", ");return e+" ("+t+") {"+i+"}"}function ve(e){for(var t=0;t<e.length;t++)if(ne(e[t],"\n")>=0)return!1;return!0}function me(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;r=R.call(Array(e.indent+1)," ")}return{base:r,prev:R.call(Array(t+1),r)}}function ge(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+R.call(e,","+r)+"\n"+t.prev}function ye(e,t){var r=W(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=ee(e,i)?t(e[i],e):""}var o,a="function"===typeof A?A(e):[];if(D){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in e)ee(e,c)&&(r&&String(Number(c))===c&&c<e.length||D&&o["$"+c]instanceof Symbol||(C.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"===typeof A)for(var l=0;l<a.length;l++)L.call(e,a[l])&&n.push("["+t(a[l])+"]: "+t(e[a[l]],e));return n}}).call(this,n("c8ba"))},"271a":function(e,t,r){"use strict";var n=r("cb2d"),i=r("e330"),o=r("577e"),a=r("d6d6"),s=URLSearchParams,c=s.prototype,l=i(c.getAll),d=i(c.has),u=new s("a=1");!u.has("a",2)&&u.has("a",void 0)||n(c,"has",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return d(this,e);var n=l(this,e);a(t,1);var i=o(r),s=0;while(s<n.length)if(n[s++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},"27bf":function(e,t,r){"use strict";e.exports=d;var n=r("c9b8").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r("b19a");function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r("3fb5")(d,c),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,r){r(new i("_transform()"))},d.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},2834:function(e,t,r){"use strict";var n=r("ebb5"),i=r("e330"),o=r("59ed"),a=r("dfb9"),s=n.aTypedArray,c=n.getTypedArrayConstructor,l=n.exportTypedArrayMethod,d=i(n.TypedArrayPrototype.sort);l("toSorted",(function(e){void 0!==e&&o(e);var t=s(this),r=a(c(t),t);return d(r,e)}))},"283b":function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),function(e){e["Read"]="m.read",e["FullyRead"]="m.fully_read",e["ReadPrivate"]="m.read.private"}(n||(n={}));var i="main"},2877:function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}r.d(t,"a",(function(){return n}))},2940:function(e,t,r){"use strict";r.r(t);var n=r("24aa");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},2975:function(t,r,n){"use strict";n.d(r,"b",(function(){return u["c"]})),n.d(r,"a",(function(){return u["a"]}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("5b5f"),l=n("75c9"),d=n("e1d9"),u=n("500a"),h=n("1461"),f=n("4b9e"),p=d["a"].DeviceVerification;class v extends u["d"]{constructor(){super(...arguments),s()(this,"sessionPrepared",!1),s()(this,"prepPromise",null)}ensureSession(e){return this.prepPromise?this.prepPromise:this.sessionPrepared?Promise.resolve():(this.prepPromise=this.crypto.downloadKeys(e).then(()=>this.crypto.ensureOlmSessionsForUsers(e)).then(()=>{this.sessionPrepared=!0}).finally(()=>{this.prepPromise=null}),this.prepPromise)}encryptMessage(e,t,r){var n=this;return o()((function*(){var i=yield e.getEncryptionTargetMembers(),o=i.map((function(e){return e.userId}));yield n.ensureSession(o);var a={room_id:e.roomId,type:t,content:r},s={algorithm:l["OLM_ALGORITHM"],sender_key:n.olmDevice.deviceCurve25519Key,ciphertext:{}},c=[];for(var d of o){var u=n.crypto.getStoredDevicesForUser(d)||[];for(var h of u){var f=h.getIdentityKey();f!=n.olmDevice.deviceCurve25519Key&&(h.verified!=p.BLOCKED&&c.push(l["encryptMessageForDevice"](s.ciphertext,n.userId,n.deviceId,n.olmDevice,d,h,a)))}}return Promise.all(c).then(()=>s)}))()}}class m extends u["b"]{decryptEvent(t){var r=this;return o()((function*(){var n=t.getWireContent(),i=n.sender_key,o=n.ciphertext;if(!o)throw new f["a"](h["DecryptionFailureCode"].OLM_MISSING_CIPHERTEXT,"Missing ciphertext");if(!(r.olmDevice.deviceCurve25519Key in o))throw new f["a"](h["DecryptionFailureCode"].OLM_NOT_INCLUDED_IN_RECIPIENTS,"Not included in recipients");var a,s=o[r.olmDevice.deviceCurve25519Key];try{a=yield r.decryptMessage(i,s)}catch(e){throw new f["a"](h["DecryptionFailureCode"].OLM_BAD_ENCRYPTED_MESSAGE,"Bad Encrypted Message",{sender:i,err:e})}var c=JSON.parse(a);if(c.recipient!=r.userId)throw new f["a"](h["DecryptionFailureCode"].OLM_BAD_RECIPIENT,"Message was intended for "+c.recipient);if(c.recipient_keys.ed25519!=r.olmDevice.deviceEd25519Key)throw new f["a"](h["DecryptionFailureCode"].OLM_BAD_RECIPIENT_KEY,"Message not intended for this device",{intended:c.recipient_keys.ed25519,our_key:r.olmDevice.deviceEd25519Key});var d=r.crypto.deviceList.getUserByIdentityKey(l["OLM_ALGORITHM"],i);if(void 0===d||null===d){try{yield r.crypto.deviceList.downloadKeys([t.getSender()],!1)}catch(e){throw new f["a"](h["DecryptionFailureCode"].OLM_BAD_SENDER_CHECK_FAILED,"Could not verify sender identity",{sender:i,err:e})}d=r.crypto.deviceList.getUserByIdentityKey(l["OLM_ALGORITHM"],i)}if(d!==t.getSender()&&void 0!==d&&null!==d)throw new f["a"](h["DecryptionFailureCode"].OLM_BAD_SENDER,"Message claimed to be from "+t.getSender(),{real_sender:d});if(c.sender!=t.getSender())throw new f["a"](h["DecryptionFailureCode"].OLM_FORWARDED_MESSAGE,"Message forwarded from "+c.sender,{reported_sender:t.getSender()});if(c.room_id!==t.getRoomId())throw new f["a"](h["DecryptionFailureCode"].OLM_BAD_ROOM,"Message intended for room "+c.room_id,{reported_room:t.getRoomId()||"ROOM_ID_UNDEFINED"});var u=c.keys||{};return{clearEvent:c,senderCurve25519Key:i,claimedEd25519Key:u.ed25519||null}}))()}decryptMessage(e,t){if(0!==t.type)return this.reallyDecryptMessage(e,t);var r=this.olmDevice.olmPrekeyPromise.then(()=>this.reallyDecryptMessage(e,t));return this.olmDevice.olmPrekeyPromise=r.catch(()=>{}),r}reallyDecryptMessage(t,r){var n=this;return o()((function*(){var i,o=yield n.olmDevice.getSessionIdsForDevice(t),a={};for(var s of o)try{var l=yield n.olmDevice.decryptMessage(t,s,r.type,r.body);return c["b"].log("Decrypted Olm message from "+t+" with session "+s),l}catch(e){var d=yield n.olmDevice.matchesSession(t,s,r.type,r.body);if(d)throw new Error("Error decrypting prekey message with existing session id "+s+": "+e.message);a[s]=e.message}if(0!==r.type){if(0===o.length)throw new Error("No existing sessions");throw new Error("Error decrypting non-prekey message with existing sessions: "+JSON.stringify(a))}try{i=yield n.olmDevice.createInboundSession(t,r.type,r.body)}catch(e){throw a["(new)"]=e.message,new Error("Error decrypting prekey message: "+JSON.stringify(a))}return c["b"].log("created new inbound Olm session ID "+i.session_id+" with "+t),i.payload}))()}}Object(u["f"])(l["OLM_ALGORITHM"],v,m);n("4e99")},"299a":function(t,r,n){"use strict";n.d(r,"a",(function(){return Y})),n.d(r,"b",(function(){return G})),n.d(r,"d",(function(){return H})),n.d(r,"c",(function(){return Z})),n.d(r,"e",(function(){return Q}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("9c0b"),l=n("3777"),d=n("2f36"),u=n("6280"),h=n("b83f"),f=n("edaf"),p=n("e9dd"),v=n("976c"),m=n("25a6"),g=n("5b5f"),y=n("0804"),b=n("60af"),_=n("afe6"),w=n("9f65"),S=n("866a"),E=n("6642"),k=n("3ba7"),I=n("283b"),C=n("2b78"),T=n("7ccd"),R=n("c04e");class x{constructor(e){s()(this,"room",void 0),s()(this,"threadedReceipts",void 0),s()(this,"unthreadedReceipts",void 0),s()(this,"danglingReceipts",void 0),s()(this,"onTimelineEvent",e=>{var t=e.getId();if(t){var r=this.danglingReceipts.remove(t);null===r||void 0===r||r.forEach(e=>{e.receipt.thread_id?this.threadedReceipts.set(e.receipt.thread_id,e.eventId,e.receiptType,e.userId,e.receipt.ts,e.synthetic):this.unthreadedReceipts.set(t,e.receiptType,e.userId,e.receipt.ts,e.synthetic)})}}),this.room=e,this.threadedReceipts=new D(e),this.unthreadedReceipts=new P(e),this.danglingReceipts=new j,e.on(H.Timeline,this.onTimelineEvent)}add(e,t){for(var[r,n]of Object.entries(e))for(var[i,o]of Object.entries(n))for(var[a,s]of Object.entries(o)){var c=this.room.findEventById(r);c?s.thread_id?this.threadedReceipts.set(s.thread_id,r,i,a,s.ts,t):this.unthreadedReceipts.set(r,i,a,s.ts,t):this.danglingReceipts.add(new M(r,i,a,s,t))}}hasUserReadEvent(e,t){var r=this.unthreadedReceipts.get(e);if(r&&N(r.eventId,t,this.room))return!0;var n=this.room.findEventById(t);if(!n)return g["b"].warn("hasUserReadEvent event ID ".concat(t," not found in room ").concat(this.room.roomId,": this shouldn't happen!")),!1;var i=Object(_["m"])(n),o=this.threadedReceipts.get(i,e);return!(!o||!N(o.eventId,t,this.room))||!!this.userSentLatestEventInThread(i,e)}userSentLatestEventInThread(e,t){var r,n=e===I["a"]?this.room.getLiveTimeline().getEvents():null===(r=this.room.getThread(e))||void 0===r?void 0:r.timeline;return!!(n&&n.length>0&&n[n.length-1].getSender()===t)}}class O{constructor(e,t,r){this.eventId=e,this.receiptType=t,this.ts=r}}class M{constructor(e,t,r,n,i){this.eventId=e,this.receiptType=t,this.userId=r,this.receipt=n,this.synthetic=i}}class A{constructor(e){s()(this,"room",void 0),s()(this,"real",void 0),s()(this,"synthetic",void 0),this.room=e,this.real=void 0,this.synthetic=void 0}set(e,t){e?this.synthetic=t:this.real=t,this.synthetic&&this.real&&N(this.real.eventId,this.synthetic.eventId,this.room)&&(this.synthetic=void 0)}get(){var e;return null!==(e=this.synthetic)&&void 0!==e?e:this.real}getByType(e){return e?this.synthetic:this.real}}class P{constructor(e){s()(this,"room",void 0),s()(this,"data",void 0),this.room=e,this.data=new Map}set(e,t,r,n,i){var o=L(this.data,r,()=>new A(this.room)),a=o.getByType(i);a&&U(a.eventId,e,this.room)||o.set(i,new O(e,t,n))}get(e){var t;return null===(t=this.data.get(e))||void 0===t?void 0:t.get()}}class D{constructor(e){s()(this,"room",void 0),s()(this,"data",void 0),this.room=e,this.data=new Map}set(e,t,r,n,i,o){var a=L(this.data,e,()=>new P(this.room));a.set(t,r,n,i,o)}get(e,t){var r;return null===(r=this.data.get(e))||void 0===r?void 0:r.get(t)}}class j{constructor(){s()(this,"data",new Map)}add(e){var t=L(this.data,e.eventId,()=>[]);t.push(e)}remove(e){var t=this.data.get(e);return this.data.delete(e),t}}function L(e,t,r){var n=e.get(t);if(n)return n;var i=r();return e.set(t,i),i}function N(e,t,r){var n=r.compareEventOrdering(e,t);return null!==n&&n>=0}function U(e,t,r){var n=r.compareEventOrdering(e,t);return null!==n&&n>0}function F(e,t,r){var n=e.findEventById(t),i=e.findEventById(r);if(!n||!i)return null;var o=Object(_["l"])(n),a=Object(_["l"])(i);return o&&a?B(e,t,r,n,i):K(t,r,n,i)}function B(e,t,r,n,i){var o=e.getUnfilteredTimelineSet(),a=o.compareEventOrdering(t,r);if(null!==a)return a;var s=o.getTimelineForEvent(t);if(s===o.getLiveTimeline())return 1;var c=o.getTimelineForEvent(r);return c===o.getLiveTimeline()?-1:q(n,i)}function K(e,t,r,n){var i=Object(_["m"])(r),o=Object(_["m"])(n),a=r.getThread();return a&&i===o?a.timelineSet.compareEventOrdering(e,t):q(r,n)}function q(e,t){var r=e.getTs(),n=t.getTs();return r<n?-1:r>n?1:0}var V=n("3925"),W=n("123d");function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G,H,Y="10",J=["1","2","3","4","5","6","7","8","9","10"],X=30;(function(e){e["Highlight"]="highlight",e["Total"]="total"})(G||(G={})),function(e){e["MyMembership"]="Room.myMembership",e["Tags"]="Room.tags",e["AccountData"]="Room.accountData",e["Receipt"]="Room.receipt",e["Name"]="Room.name",e["Avatar"]="Room.avater",e["Redaction"]="Room.redaction",e["RedactionCancelled"]="Room.redactionCancelled",e["LocalEchoUpdated"]="Room.localEchoUpdated",e["Timeline"]="Room.timeline",e["TimelineReset"]="Room.timelineReset",e["TimelineRefresh"]="Room.TimelineRefresh",e["OldStateUpdated"]="Room.OldStateUpdated",e["CurrentStateUpdated"]="Room.CurrentStateUpdated",e["HistoryImportedWithinTimeline"]="Room.historyImportedWithinTimeline",e["UnreadNotifications"]="Room.UnreadNotifications",e["Summary"]="Room.Summary"}(H||(H={}));class Z extends T["a"]{constructor(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),n=this,this.roomId=e,this.client=t,this.myUserId=r,this.opts=i,s()(this,"reEmitter",void 0),s()(this,"txnToEvent",new Map),s()(this,"notificationCounts",{}),s()(this,"threadNotifications",new Map),s()(this,"cachedThreadReadReceipts",new Map),s()(this,"oldestThreadedReceiptTs",1/0),s()(this,"unthreadedReceipts",new Map),s()(this,"timelineSets",void 0),s()(this,"polls",new Map),s()(this,"threadsTimelineSets",[]),s()(this,"filteredTimelineSets",{}),s()(this,"timelineNeedsRefresh",!1),s()(this,"pendingEventList",void 0),s()(this,"blacklistUnverifiedDevices",void 0),s()(this,"selfMembership",void 0),s()(this,"summaryHeroes",null),s()(this,"getTypeWarning",!1),s()(this,"getVersionWarning",!1),s()(this,"membersPromise",void 0),s()(this,"name",void 0),s()(this,"normalizedName",void 0),s()(this,"tags",{}),s()(this,"accountData",new Map),s()(this,"summary",null),s()(this,"oldState",void 0),s()(this,"currentState",void 0),s()(this,"relations",void 0),s()(this,"threads",new Map),s()(this,"visibilityEvents",new Map),s()(this,"roomReceipts",new x(this)),s()(this,"threadTimelineSetsPromise",null),s()(this,"threadsReady",!1),s()(this,"updateThreadRootEvents",(e,t,r)=>{var n,i;e.length&&(this.updateThreadRootEvent(null===(n=this.threadsTimelineSets)||void 0===n?void 0:n[0],e,t,r),e.hasCurrentUserParticipated&&this.updateThreadRootEvent(null===(i=this.threadsTimelineSets)||void 0===i?void 0:i[1],e,t,r))}),s()(this,"updateThreadRootEvent",(e,t,r,n)=>{e&&t.rootEvent&&(n&&e.removeEvent(t.id),k["e"].hasServerSideSupport?e.addLiveEvent(t.rootEvent,{duplicateStrategy:l["a"].Replace,fromCache:!1,roomState:this.currentState}):e.addEventToTimeline(t.rootEvent,e.getLiveTimeline(),{toStartOfTimeline:r}))}),s()(this,"applyRedaction",e=>{if(e.isRedaction()){var t=e.event.redacts,r=t?this.findEventById(t):void 0;if(r){var n=r.threadRootId;if(r.makeRedacted(e,this),r.isState()){var i=this.currentState.getStateEvents(r.getType(),r.getStateKey());(null===i||void 0===i?void 0:i.getId())===r.getId()&&this.currentState.setStateEvents([r])}this.emit(H.Redaction,e,this,n),this.visibilityEvents.delete(t),r.isVisibilityEvent()&&this.redactVisibilityChangeEvent(e)}}}),this.setMaxListeners(100),this.reEmitter=new y["b"](this),i.pendingEventOrdering=i.pendingEventOrdering||_["e"].Chronological,this.name=e,this.normalizedName=e,this.relations=new C["a"](this.client,this),this.on(H.Receipt,this.onReceipt),this.timelineSets=[new l["b"](this,i)],this.reEmitter.reEmit(this.getUnfilteredTimelineSet(),[H.Timeline,H.TimelineReset]),this.fixUpLegacyTimelineFields(),this.opts.pendingEventOrdering===_["e"].Detached&&(this.pendingEventList=[],this.client.store.getPendingEvents(this.roomId).then(e=>{var r=this.client.getEventMapper({toDevice:!1,decrypt:!1});e.forEach(function(){var e=o()((function*(e){var i=r(e);yield t.decryptEventIfNeeded(i),i.setStatus(p["a"].NOT_SENT),n.addPendingEvent(i,i.getTxnId())}));return function(t){return e.apply(this,arguments)}}())})),this.opts.lazyLoadMembers?this.membersPromise=void 0:this.membersPromise=Promise.resolve(!1)}createThreadsTimelineSets(){var t=this;return o()((function*(){var r;if(t.threadTimelineSetsPromise)return t.threadTimelineSetsPromise;if(null!==(r=t.client)&&void 0!==r&&r.supportsThreads())try{t.threadTimelineSetsPromise=Promise.all([t.createThreadTimelineSet(),t.createThreadTimelineSet(k["g"].My)]);var n=yield t.threadTimelineSetsPromise;return t.threadsTimelineSets[0]=n[0],t.threadsTimelineSets[1]=n[1],n}catch(e){return t.threadTimelineSetsPromise=null,null}return null}))()}decryptCriticalEvents(){var e=this;return o()((function*(){if(e.client.isCryptoEnabled()){var t=e.getEventReadUpTo(e.client.getUserId(),!0),r=e.getLiveTimeline().getEvents(),n=r.findIndex(e=>e.event.event_id===t),i=r.slice(n).reverse().map(t=>e.client.decryptEventIfNeeded(t));yield Promise.allSettled(i)}}))()}decryptAllEvents(){var e=this;return o()((function*(){if(e.client.isCryptoEnabled()){var t=e.getUnfilteredTimelineSet().getLiveTimeline().getEvents().slice(0).reverse().map(t=>e.client.decryptEventIfNeeded(t));yield Promise.allSettled(t)}}))()}getCreator(){var e,t=this.currentState.getStateEvents(b["b"].RoomCreate,"");return null!==(e=null===t||void 0===t?void 0:t.getSender())&&void 0!==e?e:null}getVersion(){var e,t=this.currentState.getStateEvents(b["b"].RoomCreate,"");return t?null!==(e=t.getContent()["room_version"])&&void 0!==e?e:"1":(this.getVersionWarning||(g["b"].warn("[getVersion] Room "+this.roomId+" does not have an m.room.create event"),this.getVersionWarning=!0),"1")}getRecommendedVersion(){var t=this;return o()((function*(){var r={};try{r=yield t.client.getCapabilities()}catch(e){}var n=r["m.room_versions"];if(!n)for(var i of(n={default:Y,available:{}},J))n.available[i]=W["a"].Stable;var o=t.checkVersionAgainstCapability(n);if(o.urgent&&o.needsUpgrade){g["b"].warn("Refreshing room version capability because the server looks to be supporting a newer room version we don't know about.");try{r=yield t.client.fetchCapabilities()}catch(e){g["b"].warn("Failed to refresh room version capabilities",e)}if(n=r["m.room_versions"],!n)return g["b"].warn("No room version capability - assuming upgrade required."),o;o=t.checkVersionAgainstCapability(n)}return o}))()}checkVersionAgainstCapability(e){var t=this.getVersion();g["b"].log("[".concat(this.roomId,"] Current version: ").concat(t)),g["b"].log("[".concat(this.roomId,"] Version capability: "),e);var r={version:t,needsUpgrade:!1,urgent:!1};if(t===e.default)return r;var n=Object.keys(e.available).filter(t=>"stable"===e.available[t]);return n.includes(t)||(r.version=e.default,r.needsUpgrade=!0,r.urgent=!!this.getVersion().match(/^[0-9]+[0-9.]*$/g),r.urgent?g["b"].warn("URGENT upgrade required on ".concat(this.roomId)):g["b"].warn("Non-urgent upgrade required on ".concat(this.roomId))),r}userMayUpgradeRoom(e){return this.currentState.maySendStateEvent(b["b"].RoomTombstone,e)}getPendingEvents(){if(!this.pendingEventList)throw new Error("Cannot call getPendingEvents with pendingEventOrdering == "+this.opts.pendingEventOrdering);return this.pendingEventList}removePendingEvent(e){if(!this.pendingEventList)throw new Error("Cannot call removePendingEvent with pendingEventOrdering == "+this.opts.pendingEventOrdering);var t=Object(h["F"])(this.pendingEventList,(function(t){return t.getId()==e}),!1);return this.savePendingEvents(),t}hasPendingEvent(e){var t,r;return null!==(t=null===(r=this.pendingEventList)||void 0===r?void 0:r.some(t=>t.getId()===e))&&void 0!==t&&t}getPendingEvent(e){var t,r;return null!==(t=null===(r=this.pendingEventList)||void 0===r?void 0:r.find(t=>t.getId()===e))&&void 0!==t?t:null}getLiveTimeline(){return this.getUnfilteredTimelineSet().getLiveTimeline()}get timeline(){return this.getLiveTimeline().getEvents()}getLastActiveTimestamp(){var e=this.getLiveTimeline(),t=e.getEvents();if(t.length){var r=t[t.length-1];return r.getTs()}return Number.MIN_SAFE_INTEGER}getLastLiveEvent(){var e,t,r=this.getLiveTimeline().getEvents(),n=r[r.length-1],i=this.getLastThread();if(!i)return n;var o=i.events[i.events.length-1];return(null!==(e=null===n||void 0===n?void 0:n.getTs())&&void 0!==e?e:0)>(null!==(t=null===o||void 0===o?void 0:o.getTs())&&void 0!==t?t:0)?n:o}getLastThread(){return this.getThreads().reduce((e,t)=>{var r,n;if(!e)return t;var i=t.events[t.events.length-1],o=e.events[e.events.length-1];return(null!==(r=null===i||void 0===i?void 0:i.getTs())&&void 0!==r?r:0)>=(null!==(n=null===o||void 0===o?void 0:o.getTs())&&void 0!==n?n:0)?t:e},void 0)}getMyMembership(){var e;return null!==(e=this.selfMembership)&&void 0!==e?e:V["a"].Leave}getDMInviter(){var e=this.getMember(this.myUserId);if(e)return e.getDMInviter();if(this.selfMembership===V["a"].Invite){var t,r=this.getInvitedAndJoinedMemberCount();if(2===r)return null===(t=this.summaryHeroes)||void 0===t?void 0:t[0]}}guessDMUserId(){var e=this.getMember(this.myUserId);if(e){var t=e.getDMInviter();if(t)return t}if(Array.isArray(this.summaryHeroes)&&this.summaryHeroes.length)return this.summaryHeroes[0];var r=this.currentState.getMembers(),n=r.find(e=>e.userId!==this.myUserId);return n?n.userId:this.myUserId}getFunctionalMembers(){var e=this.currentState.getStateEvents(b["n"].name,"");return Array.isArray(null===e||void 0===e?void 0:e.getContent().service_members)?e.getContent().service_members:[]}getAvatarFallbackMember(){var e,t=this.getFunctionalMembers(),r=0;if(this.getMembers().forEach(e=>{"join"!==e.membership&&"invite"!==e.membership||t.includes(e.userId)||r++}),!(r>2)){var n=null===(e=this.summaryHeroes)||void 0===e?void 0:e.filter(e=>!t.includes(e)),i=Array.isArray(n)&&n.length;if(i){var o=n.map(e=>this.getMember(e)).find(e=>!!e);if(o)return o}var a=this.getMembers(),s=null===a||void 0===a?void 0:a.filter(e=>!t.includes(e.userId));if(s.length<=2){var c=s.find(e=>e.userId!==this.myUserId);if(c)return c}if(i){var l=n.map(e=>this.client.getUser(e)).find(e=>!!e);if(l){var d=new v["a"](this.roomId,l.userId);return d.user=l,d}}}}updateMyMembership(e){var t=this.selfMembership;this.selfMembership=e,t!==e&&(e===V["a"].Leave&&this.cleanupAfterLeaving(),this.emit(H.MyMembership,this,e,t))}loadMembersFromServer(){var e=this;return o()((function*(){var t=e.client.store.getSyncToken(),r=yield e.client.members(e.roomId,void 0,V["a"].Leave,null!==t&&void 0!==t?t:void 0);return r.chunk}))()}loadMembers(){var e=this;return o()((function*(){var t=!1,r=yield e.client.store.getOutOfBandMembers(e.roomId);(null===r||e.hasEncryptionStateEvent())&&(t=!0,r=yield e.loadMembersFromServer(),g["b"].log("LL: got ".concat(r.length," ")+"members from server for room ".concat(e.roomId)));var n=r.filter(h["x"]).map(e.client.getEventMapper());return{memberEvents:n,fromServer:t}}))()}membersLoaded(){return!this.opts.lazyLoadMembers||this.currentState.outOfBandMembersReady()}loadMembersIfNeeded(){if(this.membersPromise)return this.membersPromise;this.currentState.markOutOfBandMembersStarted();var e=this.loadMembers().then(e=>(this.currentState.setOutOfBandMembers(e.memberEvents),e.fromServer)).catch(e=>{throw this.membersPromise=void 0,this.currentState.markOutOfBandMembersFailed(),e});return e.then(e=>{if(e){var t=this.currentState.getMembers().filter(e=>e.isOutOfBand()).map(e=>{var t;return null===(t=e.events.member)||void 0===t?void 0:t.event});g["b"].log("LL: telling store to write ".concat(t.length)+" members for room ".concat(this.roomId));var r=this.client.store;return r.setOutOfBandMembers(this.roomId,t).catch(e=>{g["b"].log("LL: storing OOB room members failed, oh well",e)})}}).catch(e=>{g["b"].error(e)}),this.membersPromise=e,this.membersPromise}clearLoadedMembersIfNeeded(){var e=this;return o()((function*(){e.opts.lazyLoadMembers&&e.membersPromise&&(yield e.loadMembersIfNeeded(),yield e.client.store.clearOutOfBandMembers(e.roomId),e.currentState.clearOutOfBandMembers(),e.membersPromise=void 0)}))()}cleanupAfterLeaving(){this.clearLoadedMembersIfNeeded().catch(e=>{g["b"].error("error after clearing loaded members from "+"room ".concat(this.roomId," after leaving")),g["b"].log(e)})}refreshLiveTimeline(){var e=this;return o()((function*(){var t=e.getLiveTimeline(),r=t.getPaginationToken(d["b"].FORWARDS),n=t.getPaginationToken(d["b"].BACKWARDS),i=t.getEvents(),o=i[i.length-1];g["b"].log("[refreshLiveTimeline for ".concat(e.roomId,"] at ")+"mostRecentEventInTimeline=".concat(o&&o.getId()," ")+"liveTimelineBefore=".concat(t.toString()," ")+"forwardPaginationToken=".concat(r," ")+"backwardPaginationToken=".concat(n));var a,s=e.getUnfilteredTimelineSet();o?(e.resetLiveTimeline(null,null),e.emit(H.TimelineRefresh,e,s),a=yield e.client.getEventTimeline(s,o.getId())):a=yield e.client.getLatestTimeline(s);var c=s.getLiveTimeline();!c||null===c.getPaginationToken(d["a"].Forward)&&null===c.getPaginationToken(d["a"].Backward)&&0===c.getEvents().length?(g["b"].log("[refreshLiveTimeline for ".concat(e.roomId,"] using our new live timeline")),a.setPaginationToken(r,d["b"].FORWARDS),s.setLiveTimeline(a),e.fixUpLegacyTimelineFields()):g["b"].log("[refreshLiveTimeline for ".concat(e.roomId,"] `/sync` or some other request beat us to creating a new ")+"live timeline after we reset it. We'll use that instead since any events in the scrollback from this timeline will include the history."),e.setTimelineNeedsRefresh(!1),e.emit(H.TimelineRefresh,e,s)}))()}resetLiveTimeline(e,t){for(var r of this.timelineSets)r.resetLiveTimeline(null!==e&&void 0!==e?e:void 0,null!==t&&void 0!==t?t:void 0);for(var n of this.threads.values())n.resetLiveTimeline(e,t);this.fixUpLegacyTimelineFields()}fixUpLegacyTimelineFields(){var e=this.oldState,t=this.currentState;this.oldState=this.getLiveTimeline().getState(d["b"].BACKWARDS),this.currentState=this.getLiveTimeline().getState(d["b"].FORWARDS),e!==this.oldState&&this.emit(H.OldStateUpdated,this,e,this.oldState),t!==this.currentState&&(this.emit(H.CurrentStateUpdated,this,t,this.currentState),this.reEmitter.stopReEmitting(t,[S["b"].Events,S["b"].Members,S["b"].NewMember,S["b"].Update,S["b"].Marker,E["b"].New,E["b"].Update,E["b"].Destroy,E["b"].LivenessChange]),this.reEmitter.reEmit(this.currentState,[S["b"].Events,S["b"].Members,S["b"].NewMember,S["b"].Update,S["b"].Marker,E["b"].New,E["b"].Update,E["b"].Destroy,E["b"].LivenessChange]))}onReceipt(e){this.hasEncryptionStateEvent()&&this.clearNotificationsOnReceipt(e)}clearNotificationsOnReceipt(e){var t=[],r=!1,n=e.getContent();for(var i of Object.values(n))for(var[o,a]of Object.entries(i))if(h["s"](o)&&a)for(var[s,c]of Object.entries(a))if(c&&"object"===typeof c){var l=c;s===this.client.getUserId()&&(void 0===l.thread_id?r=!0:"string"===typeof l.thread_id&&t.push(l.thread_id))}for(var d of(r&&(t=this.getThreads().filter(e=>this.getThreadUnreadNotificationCount(e.id,G.Total)>0||this.getThreadUnreadNotificationCount(e.id,G.Highlight)>0).map(e=>e.id),t.push("main")),t)){var u,f=20,p="main"===d?this.getLiveTimeline():null===(u=this.getThread(d))||void 0===u?void 0:u.liveTimeline;if(p){for(var v=p.getEvents(),m=0,y=v.length-1;y>=0;y--){var b;if(y===v.length-f)return;var _=v[y];if(this.hasUserReadEvent(this.client.getUserId(),_.getId()))break;var w=this.client.getPushActionsForEvent(_);m+=null!==w&&void 0!==w&&null!==(b=w.tweaks)&&void 0!==b&&b.highlight?1:0}"main"===d?this.setUnreadNotificationCount(G.Highlight,m):this.setThreadUnreadNotificationCount(d,G.Highlight,m)}else g["b"].warn("Couldn't find timeline for thread ID ".concat(d," in room ").concat(this.roomId))}}getTimelineSets(){return this.timelineSets}getUnfilteredTimelineSet(){return this.timelineSets[0]}getTimelineForEvent(e){var t=this.findEventById(e),r=this.findThreadForEvent(t);return r?r.timelineSet.getTimelineForEvent(e):this.getUnfilteredTimelineSet().getTimelineForEvent(e)}addTimeline(){return this.getUnfilteredTimelineSet().addTimeline()}setTimelineNeedsRefresh(e){this.timelineNeedsRefresh=e}getTimelineNeedsRefresh(){return this.timelineNeedsRefresh}findEventById(e){var t=this.getUnfilteredTimelineSet().findEventById(e);if(!t)for(var r=this.getThreads(),n=0;n<r.length;n++){var i=r[n];if(t=i.findEventById(e),t)return t}return t}getUnreadNotificationCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.Total,t=this.getRoomUnreadNotificationCount(e);for(var r of this.threadNotifications.values()){var n;t+=null!==(n=r[e])&&void 0!==n?n:0}return t}getUnreadCountForEventContext(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.Total,r=arguments.length>1?arguments[1]:void 0,n=!!r.threadRootId&&!r.isThreadRoot;return null!==(e=n?this.getThreadUnreadNotificationCount(r.threadRootId,t):this.getRoomUnreadNotificationCount(t))&&void 0!==e?e:0}getRoomUnreadNotificationCount(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.Total;return null!==(e=this.notificationCounts[t])&&void 0!==e?e:0}getThreadUnreadNotificationCount(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.Total;return null!==(t=null===(r=this.threadNotifications.get(e))||void 0===r?void 0:r[n])&&void 0!==t?t:0}hasThreadUnreadNotification(){for(var e of this.threadNotifications.values()){var t,r;if((null!==(t=e.highlight)&&void 0!==t?t:0)>0||(null!==(r=e.total)&&void 0!==r?r:0)>0)return!0}return!1}setThreadUnreadNotificationCount(e,t,r){var n,i,o=z({highlight:null===(n=this.threadNotifications.get(e))||void 0===n?void 0:n.highlight,total:null===(i=this.threadNotifications.get(e))||void 0===i?void 0:i.total},{[t]:r});this.threadNotifications.set(e,o),this.emit(H.UnreadNotifications,o,e)}get threadsAggregateNotificationType(){var e=null;for(var t of this.threadNotifications.values()){var r,n;if((null!==(r=t.highlight)&&void 0!==r?r:0)>0)return G.Highlight;(null!==(n=t.total)&&void 0!==n?n:0)>0&&!e&&(e=G.Total)}return e}resetThreadUnreadNotificationCountFromSync(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.hasEncryptionStateEvent();for(var[r,n]of this.threadNotifications)e.includes(r)||(n.total=0,t||(n.highlight=0));this.emit(H.UnreadNotifications)}setUnreadNotificationCount(e,t){this.notificationCounts[e]=t,this.emit(H.UnreadNotifications,this.notificationCounts)}setUnread(e,t){return this.setUnreadNotificationCount(e,t)}setSummary(e){var t=e["m.heroes"],r=e["m.joined_member_count"],n=e["m.invited_member_count"];Number.isInteger(r)&&this.currentState.setJoinedMemberCount(r),Number.isInteger(n)&&this.currentState.setInvitedMemberCount(n),Array.isArray(t)&&(this.summaryHeroes=t.filter(e=>e!==this.myUserId)),this.emit(H.Summary,e)}setBlacklistUnverifiedDevices(e){this.blacklistUnverifiedDevices=e}getBlacklistUnverifiedDevices(){return void 0===this.blacklistUnverifiedDevices?null:this.blacklistUnverifiedDevices}getAvatarUrl(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.currentState.getStateEvents(b["b"].RoomAvatar,"");if(!o&&!i)return null;var a=o?o.getContent().url:null;return a?Object(u["a"])(e,a,t,r,n):null}getMxcAvatarUrl(){var e,t;return(null===(e=this.currentState.getStateEvents(b["b"].RoomAvatar,""))||void 0===e||null===(t=e.getContent())||void 0===t?void 0:t.url)||null}getCanonicalAlias(){var e=this.currentState.getStateEvents(b["b"].RoomCanonicalAlias,"");return e&&e.getContent().alias||null}getAltAliases(){var e=this.currentState.getStateEvents(b["b"].RoomCanonicalAlias,"");return e&&e.getContent().alt_aliases||[]}addEventsToTimeline(e,t,r,n){r.getTimelineSet().addEventsToTimeline(e,t,r,n)}getThread(e){var t;return null!==(t=this.threads.get(e))&&void 0!==t?t:null}getThreads(){return Array.from(this.threads.values())}getMember(e){return this.currentState.getMember(e)}getMembers(){return this.currentState.getMembers()}getJoinedMembers(){return this.getMembersWithMembership(V["a"].Join)}getJoinedMemberCount(){return this.currentState.getJoinedMemberCount()}getInvitedMemberCount(){return this.currentState.getInvitedMemberCount()}getInvitedAndJoinedMemberCount(){return this.getInvitedMemberCount()+this.getJoinedMemberCount()}getMembersWithMembership(e){return this.currentState.getMembers().filter((function(t){return t.membership===e}))}getEncryptionTargetMembers(){var e=this;return o()((function*(){yield e.loadMembersIfNeeded();var t=e.getMembersWithMembership(V["a"].Join);return e.shouldEncryptForInvitedMembers()&&(t=t.concat(e.getMembersWithMembership(V["a"].Invite))),t}))()}shouldEncryptForInvitedMembers(){var e,t=this.currentState.getStateEvents(b["b"].RoomHistoryVisibility,"");return"joined"!==(null===t||void 0===t||null===(e=t.getContent())||void 0===e?void 0:e.history_visibility)}getDefaultRoomName(e){return this.calculateRoomName(e,!0)}hasMembershipState(e,t){var r=this.getMember(e);return!!r&&r.membership===t}getOrCreateFilteredTimelineSet(e){var{prepopulateTimeline:t=!0,useSyncEvents:r=!0,pendingEvents:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.filteredTimelineSets[e.filterId])return this.filteredTimelineSets[e.filterId];var i=Object.assign({filter:e,pendingEvents:n},this.opts),o=new l["b"](this,i);this.reEmitter.reEmit(o,[H.Timeline,H.TimelineReset]),r&&(this.filteredTimelineSets[e.filterId]=o,this.timelineSets.push(o));var a=this.getLiveTimeline();if(t){a.getEvents().forEach((function(e){o.addLiveEvent(e)}));var s=a;while(s.getNeighbouringTimeline(d["b"].BACKWARDS))s=s.getNeighbouringTimeline(d["b"].BACKWARDS);o.getLiveTimeline().setPaginationToken(s.getPaginationToken(d["b"].BACKWARDS),d["b"].BACKWARDS)}else if(r){var c=a.getPaginationToken(d["a"].Forward);o.getLiveTimeline().setPaginationToken(c,d["a"].Backward)}return o}getThreadListFilter(){var e=arguments,t=this;return o()((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:k["g"].All,n=t.client.getUserId(),i=new w["a"](n),o={room:{timeline:{[k["a"].name]:[k["d"].name]}}};r===k["g"].My&&(o.room.timeline[k["b"].name]=[n]),i.setDefinition(o);var a=yield t.client.getOrCreateFilter("THREAD_PANEL_".concat(t.roomId,"_").concat(r),i);return i.filterId=a,i}))()}createThreadTimelineSet(e){var t=this;return o()((function*(){var r;if(k["e"].hasServerSideListSupport)r=new l["b"](t,z(z({},t.opts),{},{pendingEvents:!1}),void 0,void 0,null!==e&&void 0!==e?e:k["g"].All),t.reEmitter.reEmit(r,[H.Timeline,H.TimelineReset]);else if(k["e"].hasServerSideSupport){var n=yield t.getThreadListFilter(e);r=t.getOrCreateFilteredTimelineSet(n,{prepopulateTimeline:!1,useSyncEvents:!1,pendingEvents:!1})}else r=new l["b"](t,{pendingEvents:!1}),Array.from(t.threads).forEach(n=>{var[,i]=n;if(0!==i.length){var o=i.timeline.some(e=>e.getSender()===t.client.getUserId());(e!==k["g"].My||o)&&r.getLiveTimeline().addEvent(i.rootEvent,{toStartOfTimeline:!1})}});return r}))()}processThreadRoots(e,t){if(this.client.supportsThreads())for(var r of e)d["b"].setEventMetadata(r,this.currentState,t),this.getThread(r.getId())||this.createThread(r.getId(),r,[],t)}fetchRoomThreads(){var e=this;return o()((function*(){if(!e.threadsReady&&e.client.supportsThreads()){if(k["e"].hasServerSideListSupport)yield Promise.all([e.fetchRoomThreadList(k["g"].All),e.fetchRoomThreadList(k["g"].My)]);else{var t=yield e.getThreadListFilter(),{chunk:r}=yield e.client.createMessagesRequest(e.roomId,"",Number.MAX_SAFE_INTEGER,d["a"].Backward,t);if(!r.length)return;var n,i=r.map(e.client.getEventMapper()).sort((e,t)=>{var r=e.getServerAggregatedRelation(k["d"].name),n=t.getServerAggregatedRelation(k["d"].name);return r.latest_event.origin_server_ts-n.latest_event.origin_server_ts}),o=e.getLiveTimeline().getState(d["b"].FORWARDS);for(var a of i){var s,c={duplicateStrategy:l["a"].Ignore,fromCache:!1,roomState:o};null===(s=e.threadsTimelineSets[0])||void 0===s||s.addLiveEvent(a,c);var u,h=a.getServerAggregatedRelation(k["d"].name);if(null!==h&&void 0!==h&&h.current_user_participated)null===(u=e.threadsTimelineSets[1])||void 0===u||u.addLiveEvent(a,c),n=a}e.processThreadRoots(i,!0),e.client.decryptEventIfNeeded(i[i.length-1]),n&&e.client.decryptEventIfNeeded(n)}e.on(k["f"].NewReply,e.onThreadReply),e.on(k["f"].Update,e.onThreadUpdate),e.on(k["f"].Delete,e.onThreadDelete),e.threadsReady=!0}}))()}processPollEvents(e){var t=this;return o()((function*(){for(var r of e)try{if(!r.isEncrypted()&&!Object(R["c"])(r))continue;yield t.client.decryptEventIfNeeded(r),t.processPollEvent(r)}catch(n){g["b"].warn("Error processing poll event",r.getId(),n)}}))()}processPollEvent(e){var t=this;return o()((function*(){if(e.isDecryptionFailure())e.once(f["c"].Decrypted,e=>{t.processPollEvent(e)});else if(c["M_POLL_START"].matches(e.getType()))try{var r=new R["a"](e,t.client,t);t.polls.set(e.getId(),r),t.emit(R["b"].New,r),e.once(f["c"].BeforeRedaction,e=>{t.polls.delete(e.getId())})}catch(o){}else{var n=e.relationEventId;if(n&&t.polls.has(n)){var i=t.polls.get(n);null===i||void 0===i||i.onNewRelation(e)}}}))()}fetchRoomThreadList(e){var t=this;return o()((function*(){if(t.client.supportsThreads()&&0!==t.threadsTimelineSets.length){var r=e===k["g"].My?t.threadsTimelineSets[1]:t.threadsTimelineSets[0],{chunk:n,end:i}=yield t.client.createThreadListMessagesRequest(t.roomId,null,void 0,d["a"].Backward,r.threadListType,r.getFilter());if(r.getLiveTimeline().setPaginationToken(null!==i&&void 0!==i?i:null,d["a"].Backward),n.length){var o=n.map(t.client.getEventMapper());t.processThreadRoots(o,!0);var a=t.getLiveTimeline().getState(d["b"].FORWARDS);for(var s of o)r.addLiveEvent(s,{duplicateStrategy:l["a"].Replace,fromCache:!1,roomState:a})}}}))()}onThreadUpdate(e){this.updateThreadRootEvents(e,!1,!1)}onThreadReply(e){this.updateThreadRootEvents(e,!1,!0)}onThreadDelete(e){var t;this.threads.delete(e.id);var r=this.getTimelineForEvent(e.id),n=null===r||void 0===r||null===(t=r.getEvents())||void 0===t?void 0:t.find(t=>t.getId()===e.id);for(var i of(n?e.clearEventMetadata(n):g["b"].debug("onThreadDelete: Could not find root event in room timeline"),this.threadsTimelineSets))i.removeEvent(e.id)}removeFilteredTimelineSet(e){var t=this.filteredTimelineSets[e.filterId];delete this.filteredTimelineSets[e.filterId];var r=this.timelineSets.indexOf(t);r>-1&&this.timelineSets.splice(r,1)}eventShouldLiveIn(e,t,r){var n;if(null===(n=this.client)||void 0===n||!n.supportsThreads())return{shouldLiveInRoom:!0,shouldLiveInThread:!1};if(e.isThreadRoot||null!==r&&void 0!==r&&r.has(e.getId()))return{shouldLiveInRoom:!0,shouldLiveInThread:!0,threadId:e.getId()};var i,o,a=e.isRelation(k["d"].name),s=e.getAssociatedId(),c=e.threadRootId;if(s&&!a&&(c===s||null!==r&&void 0!==r&&r.has(s)))return{shouldLiveInRoom:!0,shouldLiveInThread:!1};s&&(i=null!==(o=this.findEventById(s))&&void 0!==o?o:null===t||void 0===t?void 0:t.find(e=>e.getId()===s));return i&&!a?this.eventShouldLiveIn(i,t,r):void 0!=c?{shouldLiveInRoom:!1,shouldLiveInThread:!0,threadId:c}:!s||e.replyEventId?{shouldLiveInRoom:!0,shouldLiveInThread:!1}:{shouldLiveInRoom:!1,shouldLiveInThread:!1}}findThreadForEvent(e){if(!e)return null;var{threadId:t}=this.eventShouldLiveIn(e);return t?this.getThread(t):null}addThreadedEvents(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getThread(e);if(n)n.addEvents(t,r);else{var i,o=null!==(i=this.findEventById(e))&&void 0!==i?i:t.find(t=>t.getId()===e);this.createThread(e,o,t,r)}}processThreadedEvents(e,t){e.forEach(this.applyRedaction);var r={};for(var n of e){var i,{threadId:o,shouldLiveInThread:a}=this.eventShouldLiveIn(n);a&&!r[o]&&(r[o]=[]),null===(i=r[o])||void 0===i||i.push(n)}Object.entries(r).map(e=>{var[r,n]=e;return this.addThreadedEvents(r,n,t)})}createThread(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;if(this.threads.has(e))return this.threads.get(e);if(t){var o=this.relations.getAllChildEventsForEvent(t.getId());null!==o&&void 0!==o&&o.length&&(n=n.concat(o.filter(e=>!e.isRelation(b["h"].Replace))))}var a=new k["e"](e,t,{room:this,client:this.client,pendingEventOrdering:this.opts.pendingEventOrdering,receipts:null!==(r=this.cachedThreadReadReceipts.get(e))&&void 0!==r?r:[]});return this.reEmitter.reEmit(a,[k["f"].Delete,k["f"].Update,k["f"].NewReply,H.Timeline,H.TimelineReset]),this.cachedThreadReadReceipts.delete(e),this.threads.set(a.id,a),a.addEvents(n,!1),this.threadsReady&&a.initialEventsFetched&&this.updateThreadRootEvents(a,i,!1),this.emit(k["f"].New,a,i),a}processLiveEvent(e){this.applyRedaction(e),e.isVisibilityEvent()&&this.applyNewVisibilityEvent(e),this.applyPendingVisibilityEvents(e);var t=e.getUnsigned().transaction_id;if(!t&&e.getSender()===this.myUserId)for(var[r,n]of this.txnToEvent)if(n.getId()===e.getId()){g["b"].debug("processLiveEvent: found sent event without txn ID: ",r,e.getId());var i=e.getUnsigned();i.transaction_id=r,e.setUnsigned(i);break}}addLiveEvent(e,t){var{duplicateStrategy:r,timelineWasEmpty:n,fromCache:i}=t;for(var o of this.timelineSets)o.addLiveEvent(e,{duplicateStrategy:r,fromCache:i,timelineWasEmpty:n});e.sender&&e.getType()!==b["b"].RoomRedaction&&this.addReceipt(Object(T["b"])(e.sender.userId,e,I["b"].Read),!0)}addPendingEvent(e,t){if(e.status!==p["a"].SENDING&&e.status!==p["a"].NOT_SENT)throw new Error("addPendingEvent called on an event with status "+e.status);if(this.txnToEvent.get(t))throw new Error("addPendingEvent called on an event with known txnId "+t);if(d["b"].setEventMetadata(e,this.getLiveTimeline().getState(d["b"].FORWARDS),!1),this.txnToEvent.set(t,e),this.pendingEventList){if(this.pendingEventList.some(e=>e.status===p["a"].NOT_SENT)&&(g["b"].warn("Setting event as NOT_SENT due to messages in the same state"),e.setStatus(p["a"].NOT_SENT)),this.pendingEventList.push(e),this.savePendingEvents(),e.isRelation()&&this.aggregateNonLiveRelation(e),e.isRedaction()){var r=e.event.redacts,n=this.pendingEventList.find(e=>e.getId()===r);!n&&r&&(n=this.findEventById(r)),n&&(n.markLocallyRedacted(e),this.emit(H.Redaction,e,this,n.threadRootId))}}else for(var i of this.timelineSets)i.getFilter()?i.getFilter().filterRoomTimeline([e]).length&&i.addEventToTimeline(e,i.getLiveTimeline(),{toStartOfTimeline:!1}):i.addEventToTimeline(e,i.getLiveTimeline(),{toStartOfTimeline:!1});this.emit(H.LocalEchoUpdated,e,this)}savePendingEvents(){if(this.pendingEventList){var e=this.pendingEventList.map(e=>z(z({},e.event),{},{txn_id:e.getTxnId()})).filter(e=>{var t=e.type===b["b"].RoomMessageEncrypted,r=this.hasEncryptionStateEvent();return t||!r});this.client.store.setPendingEvents(this.roomId,e)}}aggregateNonLiveRelation(e){this.relations.aggregateChildEvent(e)}getEventForTxnId(e){return this.txnToEvent.get(e)}handleRemoteEcho(e,t){var r=t.getId(),n=e.getId(),i=t.status;g["b"].debug("Got remote echo for event ".concat(r," -> ").concat(n," old status ").concat(i)),this.txnToEvent.delete(e.getUnsigned().transaction_id),this.pendingEventList&&this.removePendingEvent(r),t.handleRemoteEcho(e.event);var{shouldLiveInRoom:o,threadId:a}=this.eventShouldLiveIn(e),s=a?this.getThread(a):null;if(null===s||void 0===s||s.setEventMetadata(t),null===s||void 0===s||s.timelineSet.handleRemoteEcho(t,r,n),o)for(var c of this.timelineSets)c.handleRemoteEcho(t,r,n);this.emit(H.LocalEchoUpdated,t,this,r,i)}updatePendingEvent(e,t,r){if(g["b"].log("setting pendingEvent status to ".concat(t," in ").concat(e.getRoomId()," ")+"event ID ".concat(e.getId()," -> ").concat(r)),t==p["a"].SENT&&!r)throw new Error("updatePendingEvent called with status=SENT, but no new event id");if(t==p["a"].SENT){var n=this.getTimelineForEvent(r);if(n){var i=this.findEventById(r),o=null===i||void 0===i?void 0:i.getUnsigned().transaction_id;if(!o&&i){var a=i.getUnsigned();a.transaction_id=e.getTxnId(),i.setUnsigned(a),this.removeEvent(i.getId()),this.handleRemoteEcho(i,e)}return}}var s=e.status,c=e.getId();if(!s)throw new Error("updatePendingEventStatus called on an event which is not a local echo.");var l=ee[s];if(null===l||void 0===l||!l.includes(t))throw new Error("Invalid EventStatus transition ".concat(s,"->").concat(t));if(e.setStatus(t),t==p["a"].SENT){e.replaceLocalEventId(r);var{shouldLiveInRoom:d,threadId:u}=this.eventShouldLiveIn(e),h=u?this.getThread(u):void 0;if(null===h||void 0===h||h.setEventMetadata(e),null===h||void 0===h||h.timelineSet.replaceEventId(c,r),d)for(var f of this.timelineSets)f.replaceEventId(c,r)}else if(t==p["a"].CANCELLED){if(this.pendingEventList){var v=this.getPendingEvent(c);this.removePendingEvent(c),null!==v&&void 0!==v&&v.isRedaction()&&this.revertRedactionLocalEcho(v)}this.removeEvent(c)}this.savePendingEvents(),this.emit(H.LocalEchoUpdated,e,this,c,s)}revertRedactionLocalEcho(e){var t=e.event.redacts;if(t){var r=this.getUnfilteredTimelineSet().findEventById(t);r&&(r.unmarkLocallyRedacted(),this.emit(H.RedactionCancelled,e,this),r.isRelation()&&this.aggregateNonLiveRelation(r))}}addLiveEvents(t,r){var n=this;return o()((function*(){var{duplicateStrategy:i,fromCache:o,timelineWasEmpty:a=!1}=null!==r&&void 0!==r?r:{};if(i&&-1===["replace","ignore"].indexOf(i))throw new Error("duplicateStrategy MUST be either 'replace' or 'ignore'");for(var s=0;s<n.timelineSets.length;s++){var c=n.timelineSets[s].getLiveTimeline();if(c.getPaginationToken(d["b"].FORWARDS))throw new Error("live timeline "+s+" is no longer live - it has a pagination token ("+c.getPaginationToken(d["b"].FORWARDS)+")");if(c.getNeighbouringTimeline(d["b"].FORWARDS))throw new Error("live timeline ".concat(s," is no longer live - it has a neighbouring timeline"))}var l=n.findThreadRoots(t),u={},h={duplicateStrategy:i,fromCache:o,timelineWasEmpty:a},p=[...t];for(var v of t){var m,y,_;if(n.processLiveEvent(v),v.getUnsigned().transaction_id){var w=n.txnToEvent.get(v.getUnsigned().transaction_id);if(w){n.handleRemoteEcho(v,w);continue}}var S,{shouldLiveInRoom:E,shouldLiveInThread:k,threadId:I}=n.eventShouldLiveIn(v,p,l);if(!k&&!E&&v.isRelation())try{var C=new f["b"](yield n.client.fetchRoomEvent(n.roomId,v.relationEventId));if(p.push(C),C.threadRootId){l.add(C.threadRootId);var T=v.getUnsigned();T[b["m"].name]=C.threadRootId,v.setUnsigned(T)}({shouldLiveInRoom:E,shouldLiveInThread:k,threadId:I}=n.eventShouldLiveIn(v,p,l))}catch(e){g["b"].error("Failed to load parent event of unhandled relation",e)}if(k&&!u[null!==(m=I)&&void 0!==m?m:""])u[null!==(S=I)&&void 0!==S?S:""]=[];null===(y=u[null!==(_=I)&&void 0!==_?_:""])||void 0===y||y.push(v),E?n.addLiveEvent(v,h):!k&&v.isRelation()&&n.relations.aggregateChildEvent(v)}Object.entries(u).forEach(e=>{var[t,r]=e;n.addThreadedEvents(t,r,!1)})}))()}partitionThreadedEvents(e){var t=0,r=1,n=2;if(this.client.supportsThreads()){var i=this.findThreadRoots(e);return e.reduce((o,a)=>{var{shouldLiveInRoom:s,shouldLiveInThread:c,threadId:l}=this.eventShouldLiveIn(a,e,i);return s&&o[t].push(a),c&&(a.setThreadId(null!==l&&void 0!==l?l:""),o[r].push(a)),c||s||o[n].push(a),o},[[],[],[]])}return[e,[],[]]}findThreadRoots(e){var t=new Set;for(var r of e){var n=r.threadRootId;void 0!=n&&t.add(n)}return t}addReceipt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getContent();this.roomReceipts.add(r,t),Object.keys(r).forEach(e=>{Object.keys(r[e]).forEach(n=>{Object.keys(r[e][n]).forEach(i=>{var o,a,s,c,l=r[e][n][i],d=!l.thread_id||l.thread_id===I["a"],u=d?this:this.threads.get(null!==(o=l.thread_id)&&void 0!==o?o:"");if(u){if(u.addReceiptToStructure(e,n,i,l,t),!t&&this.client.isInitialSyncComplete()&&i===this.client.getUserId()){var h=u.timeline[u.timeline.length-1];h&&e===h.getId()&&i===h.getSender()&&(u.setUnread(G.Total,0),u.setUnread(G.Highlight,0))}}else this.cachedThreadReadReceipts.set(l.thread_id,[...null!==(c=this.cachedThreadReadReceipts.get(l.thread_id))&&void 0!==c?c:[],{eventId:e,receiptType:n,userId:i,receipt:l,synthetic:t}]);var f=this.client.getUserId();i===f&&!d&&l.ts<this.oldestThreadedReceiptTs&&(this.oldestThreadedReceiptTs=l.ts),!l.thread_id&&l.ts>(null!==(a=null===(s=this.unthreadedReceipts.get(i))||void 0===s?void 0:s.ts)&&void 0!==a?a:0)&&this.unthreadedReceipts.set(i,l)})})}),this.emit(H.Receipt,e,this)}addEphemeralEvents(e){for(var t of e)t.getType()===b["b"].Typing?this.currentState.setTypingEvent(t):t.getType()===b["b"].Receipt&&this.addReceipt(t)}removeEvents(e){for(var t of e)this.removeEvent(t)}removeEvent(e){var t=!1;for(var r of this.timelineSets){var n=r.removeEvent(e);n&&(n.isRedaction()&&this.revertRedactionLocalEcho(n),t=!0)}return t}recalculate(){var e=this.currentState.getStateEvents(b["b"].RoomMember,this.myUserId);if(e){var t=e.getContent().membership;if(this.updateMyMembership(t),t===V["a"].Invite){var r=e.getUnsigned().invite_room_state||[];r.forEach(e=>{var t=this.currentState.getStateEvents(e.type,e.state_key);t||this.currentState.setStateEvents([new f["b"]({type:e.type,state_key:e.state_key,content:e.content,event_id:"$fake"+Date.now(),room_id:this.roomId,sender:this.myUserId})])})}}var n=this.name;this.name=this.calculateRoomName(this.myUserId),this.normalizedName=Object(h["y"])(this.name),this.summary=new m["a"](this.roomId,{title:this.name}),n!==this.name&&this.emit(H.Name,this)}addTags(e){this.tags=e.getContent().tags||{},this.emit(H.Tags,e,this)}addAccountData(e){for(var t of e){"m.tag"===t.getType()&&this.addTags(t);var r=t.getType(),n=this.accountData.get(r);this.accountData.set(r,t),this.emit(H.AccountData,t,this,n)}}getAccountData(e){return this.accountData.get(e)}maySendMessage(){return this.getMyMembership()===V["a"].Join&&(this.hasEncryptionStateEvent()?this.currentState.maySendEvent(b["b"].RoomMessageEncrypted,this.myUserId):this.currentState.maySendEvent(b["b"].RoomMessage,this.myUserId))}canInvite(e){var t=this.getMyMembership()===V["a"].Join,r=this.currentState.getStateEvents(b["b"].RoomPowerLevels,""),n=r&&r.getContent(),i=this.getMember(e);return n&&i&&n.invite>i.powerLevel&&(t=!1),t}getJoinRule(){return this.currentState.getJoinRule()}getHistoryVisibility(){return this.currentState.getHistoryVisibility()}getGuestAccess(){return this.currentState.getGuestAccess()}getType(){var e=this.currentState.getStateEvents(b["b"].RoomCreate,"");if(e)return e.getContent()[b["i"]];this.getTypeWarning||(g["b"].warn("[getType] Room "+this.roomId+" does not have an m.room.create event"),this.getTypeWarning=!0)}isSpaceRoom(){return this.getType()===b["j"].Space}isCallRoom(){return this.getType()===b["j"].UnstableCall}isElementVideoRoom(){return this.getType()===b["j"].ElementVideo}findPredecessor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getLiveTimeline().getState(d["b"].FORWARDS);return t?t.findPredecessor(e):null}roomNameGenerator(e){if(this.client.roomNameGenerator){var t=this.client.roomNameGenerator(this.roomId,e);if(null!==t)return t}switch(e.type){case Q.Actual:return e.name;case Q.Generated:switch(e.subtype){case"Inviting":return"Inviting ".concat(te(e.names,e.count));default:return te(e.names,e.count)}case Q.EmptyRoom:return e.oldName?"Empty room (was ".concat(e.oldName,")"):"Empty room"}}calculateRoomName(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var r=this.currentState.getStateEvents(b["b"].RoomName,"");if(null!==r&&void 0!==r&&r.getContent().name)return this.roomNameGenerator({type:Q.Actual,name:r.getContent().name})}var n=this.getCanonicalAlias();if(n)return this.roomNameGenerator({type:Q.Actual,name:n});var i=this.currentState.getJoinedMemberCount(),o=this.currentState.getInvitedMemberCount(),a=i+o-1,s=this.getFunctionalMembers(),c=[];if(this.summaryHeroes)this.summaryHeroes.forEach(e=>{if(s.includes(e))a--;else{var t=this.getMember(e);c.push(t?t.name:e)}});else{var l=this.currentState.getMembers().filter(t=>t.userId!==e&&(t.membership===V["a"].Invite||t.membership===V["a"].Join));l=l.filter(e=>{var{userId:t}=e;return!s.includes(t)||(a--,!1)});var d=new Intl.Collator;l.sort((e,t)=>d.compare(e.userId,t.userId)),l=l.slice(0,5),c=l.map(e=>e.name)}if(a)return this.roomNameGenerator({type:Q.Generated,names:c,count:a});var u=this.getMyMembership();if(u==V["a"].Join){var h=this.currentState.getStateEvents(b["b"].RoomThirdPartyInvite);if(null!==h&&void 0!==h&&h.length){var f=h.map(e=>e.getContent().display_name);return this.roomNameGenerator({type:Q.Generated,subtype:"Inviting",names:f,count:f.length+1})}}var p,v=c;return v.length||(v=this.currentState.getMembers().filter(t=>t.userId!==e&&t.membership!==V["a"].Invite&&t.membership!==V["a"].Join).map(e=>e.name)),v.length&&(p=this.roomNameGenerator({type:Q.Generated,names:v,count:v.length+1})),this.roomNameGenerator({type:Q.EmptyRoom,oldName:p})}applyNewVisibilityEvent(e){var t=e.asVisibilityChange();if(t){var r=e.getSender();if(r){var n=b["a"].name&&this.currentState.maySendStateEvent(b["a"].name,r)||b["a"].altName&&this.currentState.maySendStateEvent(b["a"].altName,r);if(n){var i=this.visibilityEvents.get(t.eventId);if(i){for(var o=i.length-1,a=Math.max(0,i.length-X);o>=a;--o){var s=i[o];if(s.getTs()<e.getTs())break}-1===o?i.unshift(e):i.splice(o+1,0,e)}else this.visibilityEvents.set(t.eventId,[e]);var c=this.findEventById(t.eventId);c&&c.applyVisibilityEvent(t)}}}}redactVisibilityChangeEvent(e){if(!e.isVisibilityEvent)throw new Error("expected a visibility change event");var t=e.getRelation(),r=null===t||void 0===t?void 0:t.event_id,n=this.visibilityEvents.get(r);if(n){var i=n.findIndex(t=>t.getId()===e.getId());if(-1!==i&&(n.splice(i,1),i===n.length)){var o=this.findEventById(r);if(!o)return;if(0===i)this.visibilityEvents.delete(r),o.applyVisibilityEvent();else{var a=n[n.length-1],s=a.asVisibilityChange();if(!s)throw new Error("at this stage, visibility changes should be well-formed");o.applyVisibilityEvent(s)}}}}applyPendingVisibilityEvents(e){var t=this.visibilityEvents.get(e.getId());if(t&&0!=t.length){var r=t[t.length-1],n=r.asVisibilityChange();n&&(n.visible,r.getTs()<e.getTs()||e.applyVisibilityEvent(n))}}getOldestThreadedReceiptTs(){return this.oldestThreadedReceiptTs}hasUserReadEvent(e,t){return this.roomReceipts.hasUserReadEvent(e,t)}getLastUnthreadedReceiptFor(e){return this.unthreadedReceipts.get(e)}fixupNotifications(e){super.fixupNotifications(e);var t=this.getThreads().filter(e=>this.getThreadUnreadNotificationCount(e.id,G.Total)>0);for(var r of t)r.fixupNotifications(e)}compareEventOrdering(e,t){return F(this,e,t)}hasEncryptionStateEvent(){var e;return Boolean(null===(e=this.getLiveTimeline().getState(d["b"].FORWARDS))||void 0===e?void 0:e.getStateEvents(b["b"].RoomEncryption,""))}}var Q,ee={[p["a"].ENCRYPTING]:[p["a"].SENDING,p["a"].NOT_SENT,p["a"].CANCELLED],[p["a"].SENDING]:[p["a"].ENCRYPTING,p["a"].QUEUED,p["a"].NOT_SENT,p["a"].SENT],[p["a"].QUEUED]:[p["a"].SENDING,p["a"].NOT_SENT,p["a"].CANCELLED],[p["a"].SENT]:[],[p["a"].NOT_SENT]:[p["a"].SENDING,p["a"].QUEUED,p["a"].CANCELLED],[p["a"].CANCELLED]:[]};function te(e,t){var r=t-1;if(e.length){if(1===e.length&&r<=1)return e[0];if(2===e.length&&r<=2)return"".concat(e[0]," and ").concat(e[1]);var n=r>1;return n?"".concat(e[0]," and ").concat(r," others"):"".concat(e[0]," and 1 other")}return"Empty room"}(function(e){e[e["EmptyRoom"]=0]="EmptyRoom",e[e["Generated"]=1]="Generated",e[e["Actual"]=2]="Actual"})(Q||(Q={}))},"29b9":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"2a07":function(e,t,r){"use strict";var n=r("cfe9"),i=r("9adc");e.exports=function(e){if(i){try{return n.process.getBuiltinModule(e)}catch(error){}try{return Function('return require("'+e+'")')()}catch(error){}}}},"2a22":function(t,r,n){"use strict";(function(t){n.d(r,"b",(function(){return i})),n.d(r,"c",(function(){return o})),n.d(r,"a",(function(){return f}));var i,o,a=n("c973"),s=n.n(a),c=n("9523"),l=n.n(c),d=n("5b5f"),u=n("9c88"),h=n("306c");(function(e){e["SUCCESS"]="SUCCESS",e["IGNORE"]="IGNORE",e["PROMPT"]="PROMPT",e["FAIL_PROMPT"]="FAIL_PROMPT",e["FAIL_ERROR"]="FAIL_ERROR"})(i||(i={})),function(e){e["Invalid"]="Invalid homeserver discovery response",e["GenericFailure"]="Failed to get autodiscovery configuration from server",e["InvalidHsBaseUrl"]="Invalid base_url for m.homeserver",e["InvalidHomeserver"]="Homeserver URL does not appear to be a valid Matrix homeserver",e["InvalidIsBaseUrl"]="Invalid base_url for m.identity_server",e["InvalidIdentityServer"]="Identity server URL does not appear to be a valid identity server",e["InvalidIs"]="Invalid identity server discovery response",e["MissingWellknown"]="No .well-known JSON file found",e["InvalidJson"]="Invalid JSON",e["UnsupportedHomeserverSpecVersion"]="The homeserver does not meet the version requirements"}(o||(o={}));class f{static fromDiscoveryConfig(e){var t=this;return s()((function*(){var r,n={"m.homeserver":{state:f.FAIL_ERROR,error:f.ERROR_INVALID,base_url:null},"m.identity_server":{state:f.PROMPT,error:null,base_url:null}};if(null===e||void 0===e||!e["m.homeserver"])return d["b"].error("No m.homeserver key in config"),n["m.homeserver"].state=f.FAIL_PROMPT,n["m.homeserver"].error=f.ERROR_INVALID,Promise.resolve(n);if(!e["m.homeserver"]["base_url"])return d["b"].error("No m.homeserver base_url in config"),n["m.homeserver"].state=f.FAIL_PROMPT,n["m.homeserver"].error=f.ERROR_INVALID_HS_BASE_URL,Promise.resolve(n);var o=t.sanitizeWellKnownUrl(e["m.homeserver"]["base_url"]);if(!o)return d["b"].error("Invalid base_url for m.homeserver"),n["m.homeserver"].error=f.ERROR_INVALID_HS_BASE_URL,Promise.resolve(n);var a=yield t.fetchWellKnownObject("".concat(o,"/_matrix/client/versions"));if(!a||!Array.isArray(null===(r=a.raw)||void 0===r?void 0:r["versions"]))return d["b"].error("Invalid /versions response"),n["m.homeserver"].error=f.ERROR_INVALID_HOMESERVER,n["m.homeserver"].base_url=o,Promise.resolve(n);var s=new Set(a.raw["versions"]),c=!1;for(var l of h["a"])if(s.has(l)){c=!0;break}if(!c)return d["b"].error("Homeserver does not meet version requirements"),n["m.homeserver"].error=f.ERROR_UNSUPPORTED_HOMESERVER_SPEC_VERSION,n["m.homeserver"].base_url=o,Promise.resolve(n);n["m.homeserver"]={state:f.SUCCESS,error:null,base_url:o};var u="";if(e["m.identity_server"]){var p={"m.homeserver":n["m.homeserver"],"m.identity_server":{state:f.FAIL_PROMPT,error:f.ERROR_INVALID_IS,base_url:null}};if(u=t.sanitizeWellKnownUrl(e["m.identity_server"]["base_url"]),!u)return d["b"].error("Invalid base_url for m.identity_server"),p["m.identity_server"].error=f.ERROR_INVALID_IS_BASE_URL,Promise.resolve(p);var v=yield t.fetchWellKnownObject("".concat(u,"/_matrix/identity/v2"));if(null===v||void 0===v||!v.raw||v.action!==i.SUCCESS)return d["b"].error("Invalid /v2 response"),p["m.identity_server"].error=f.ERROR_INVALID_IDENTITY_SERVER,p["m.identity_server"].base_url=u,Promise.resolve(p)}return u&&u.toString().length>0&&(n["m.identity_server"]={state:f.SUCCESS,error:null,base_url:u}),Object.keys(e).forEach(t=>{if("m.homeserver"===t||"m.identity_server"===t){var r=["error","state","base_url"];for(var i of Object.keys(e[t]))r.includes(i)||(n[t][i]=e[t][i])}else n[t]=e[t]}),Promise.resolve(n)}))()}static findClientConfig(e){var t=this;return s()((function*(){if(!e||"string"!==typeof e||0===e.length)throw new Error("'domain' must be a string of non-zero length");var r={"m.homeserver":{state:f.FAIL_ERROR,error:f.ERROR_INVALID,base_url:null},"m.identity_server":{state:f.PROMPT,error:null,base_url:null}},n=e.includes("://")?e:"https://".concat(e),o=yield t.fetchWellKnownObject("".concat(n,"/.well-known/matrix/client"));return o&&o.action===i.SUCCESS?f.fromDiscoveryConfig(o.raw):(d["b"].error("No response or error when parsing .well-known"),o.reason&&d["b"].error(o.reason),o.action===i.IGNORE?r["m.homeserver"]={state:f.PROMPT,error:null,base_url:null}:(r["m.homeserver"].state=f.FAIL_PROMPT,r["m.homeserver"].error=f.ERROR_INVALID),Promise.resolve(r))}))()}static getRawClientConfig(e){var t=this;return s()((function*(){var r;if(!e||"string"!==typeof e||0===e.length)throw new Error("'domain' must be a string of non-zero length");var n=yield t.fetchWellKnownObject("https://".concat(e,"/.well-known/matrix/client"));return n&&null!==(r=n.raw)&&void 0!==r?r:{}}))()}static sanitizeWellKnownUrl(t){if(!t)return!1;try{var r,n;try{n=new URL(t)}catch(e){d["b"].error("Could not parse url",e)}if(null===(r=n)||void 0===r||!r.hostname)return!1;if("http:"!==n.protocol&&"https:"!==n.protocol)return!1;var i=n.port?":".concat(n.port):"",o=n.pathname?n.pathname:"",a="".concat(n.protocol,"//").concat(n.hostname).concat(i).concat(o);return a.endsWith("/")&&(a=a.substring(0,a.length-1)),a}catch(e){return d["b"].error(e),!1}}static fetch(e,r){return this.fetchFn?this.fetchFn(e,r):t.fetch(e,r)}static setFetchFn(e){f.fetchFn=e}static fetchWellKnownObject(e){return s()((function*(){var t;try{if(t=yield f.fetch(e,{method:u["i"].Get,signal:Object(u["n"])(5e3)}),404===t.status)return{raw:{},action:i.IGNORE,reason:f.ERROR_MISSING_WELLKNOWN};if(!t.ok)return{raw:{},action:i.FAIL_PROMPT,reason:"General failure"}}catch(a){var r=a,n="";return"object"===typeof r&&(n=null===r||void 0===r?void 0:r.message),{error:r,raw:{},action:i.FAIL_PROMPT,reason:n||"General failure"}}try{return{raw:yield t.json(),action:i.SUCCESS}}catch(a){var o=a;return{error:o,raw:{},action:i.FAIL_PROMPT,reason:"SyntaxError"===(null===o||void 0===o?void 0:o.name)?f.ERROR_INVALID_JSON:f.ERROR_INVALID}}}))()}}l()(f,"ERROR_INVALID",o.Invalid),l()(f,"ERROR_GENERIC_FAILURE",o.GenericFailure),l()(f,"ERROR_INVALID_HS_BASE_URL",o.InvalidHsBaseUrl),l()(f,"ERROR_INVALID_HOMESERVER",o.InvalidHomeserver),l()(f,"ERROR_INVALID_IS_BASE_URL",o.InvalidIsBaseUrl),l()(f,"ERROR_INVALID_IDENTITY_SERVER",o.InvalidIdentityServer),l()(f,"ERROR_INVALID_IS",o.InvalidIs),l()(f,"ERROR_MISSING_WELLKNOWN",o.MissingWellknown),l()(f,"ERROR_INVALID_JSON",o.InvalidJson),l()(f,"ERROR_UNSUPPORTED_HOMESERVER_SPEC_VERSION",o.UnsupportedHomeserverSpecVersion),l()(f,"ALL_ERRORS",Object.keys(o)),l()(f,"FAIL_ERROR",i.FAIL_ERROR),l()(f,"FAIL_PROMPT",i.FAIL_PROMPT),l()(f,"PROMPT",i.PROMPT),l()(f,"SUCCESS",i.SUCCESS),l()(f,"fetchFn",void 0)}).call(this,n("c8ba"))},"2a49":function(e,t,r){var n=r("76d8");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("18f26841",n,e)}},"2aa9":function(t,r,n){"use strict";var i=n("00ce"),o=i("%Object.getOwnPropertyDescriptor%",!0);if(o)try{o([],"length")}catch(e){o=null}t.exports=o},"2aaa":function(e,t,r){e.exports=r("faa1").EventEmitter},"2b19":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"2b78":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("9523"),i=r.n(n),o=r("101d"),a=r("edaf");class s{constructor(e,t){this.client=e,this.room=t,i()(this,"relations",new Map)}getChildEventsForEvent(e,t,r){var n,i;return null===(n=this.relations.get(e))||void 0===n||null===(i=n.get(t))||void 0===i?void 0:i.get(r)}getAllChildEventsForEvent(e){var t,r=null!==(t=this.relations.get(e))&&void 0!==t?t:new Map,n=[];for(var i of r.values())for(var o of i.values())n.push(...o.getRelations());return n}aggregateParentEvent(e){var t=this.relations.get(e.getId());if(t)for(var r of t.values())for(var n of r.values())n.setTargetEvent(e)}aggregateChildEvent(e,t){if(!e.isRedacted()&&e.status!==a["a"].CANCELLED){var r=e.getRelation();if(r){var n=()=>{e.isDecryptionFailure()?e.once(a["c"].Decrypted,n):this.aggregateChildEvent(e,t)};if(e.isBeingDecrypted()||e.shouldAttemptDecryption())e.once(a["c"].Decrypted,n);else{var{event_id:i,rel_type:s}=r,c=e.getType(),l=this.relations.get(i);l||(l=new Map,this.relations.set(i,l));var d=l.get(s);d||(d=new Map,l.set(s,d));var u=d.get(c);if(!u){var h,f,p;u=new o["a"](s,c,this.client),d.set(c,u);var v=null!==(h=this.room)&&void 0!==h?h:null===t||void 0===t?void 0:t.room,m=null!==(f=null!==(p=null===t||void 0===t?void 0:t.findEventById(i))&&void 0!==p?p:null===v||void 0===v?void 0:v.findEventById(i))&&void 0!==f?f:null===v||void 0===v?void 0:v.getPendingEvent(i);m&&u.setTargetEvent(m)}u.addEvent(e)}}}}}},"2ba4":function(e,t,r){"use strict";var n=r("40d5"),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},"2bea":function(e,t,r){var n,i;/*! async-each - MIT License (c) 2016 Paul Miller (paulmillr.com) */(function(r){"use strict";var o=function(e,t,r){if(!Array.isArray(e))throw new TypeError("each() expects array as first argument");if("function"!==typeof t)throw new TypeError("each() expects function as second argument");"function"!==typeof r&&(r=Function.prototype);var n=e.length;if(0===n)return r(void 0,e);var i=new Array(n),o=0,a=!1;e.forEach((function(e,s){t(e,(function(e,t){if(!a)return e?(a=!0,r(e)):(i[s]=t,o+=1,o===n?r(void 0,i):void 0)}))}))};n=[],i=function(){return o}.apply(t,n),void 0===i||(e.exports=i)})()},"2c64":function(e,t,r){var n=r("e5a3");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("34de112b",n,e)}},"2c66":function(e,t,r){"use strict";var n=r("83ab"),i=r("edd0"),o=r("75bd"),a=ArrayBuffer.prototype;n&&!("detached"in a)&&i(a,"detached",{configurable:!0,get:function(){return o(this)}})},"2c89":function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function l(e){var t=p();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t="function"===typeof Map?new Map:void 0;return h=function(e){if(null===e||!v(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)},h(e)}function f(e,t,r){return f=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=Function.bind.apply(e,n),o=new i;return r&&m(o,r.prototype),o},f.apply(null,arguments)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.InvalidEventError=void 0;var y=function(e){c(r,e);var t=l(r);function r(e){return s(this,r),t.call(this,e)}return a(r)}(h(Error));r.InvalidEventError=y},"2d4c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"2d83":function(e,t,r){"use strict";var n=r("387f");e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},"2db5":function(e,t,r){var n={"./cmn.json":"96ee","./de.json":"6ce2","./en.json":"edd4","./es.json":"a306","./fr.json":"f693","./it.json":"0825","./kr.json":"c1af","./ru.json":"7704"};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="2db5"},"2e42":function(e,t,r){"use strict";r.r(t);var n=r("63d4");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"2e4b":function(e,t,r){var n=r("69d0");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("53ab5eb3",n,e)}},"2e67":function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"2ed3":function(e,t,r){var n=r("611d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("39e9524a",n,e)}},"2f30":function(e,t,r){var n=r("8153");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("0c455dc4",n,e)}},"2f36":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return c}));var n,i=r("9523"),o=r.n(i),a=r("866a"),s=r("60af");(function(e){e["Backward"]="b",e["Forward"]="f"})(n||(n={}));class c{static setEventMetadata(e,t,r){var n,i,o,a;null!==(n=e.sender)&&void 0!==n&&null!==(i=n.events)&&void 0!==i&&i.member||(e.sender=t.getSentinelMember(e.getSender())),null!==(o=e.target)&&void 0!==o&&null!==(a=o.events)&&void 0!==a&&a.member||e.getType()!==s["b"].RoomMember||(e.target=t.getSentinelMember(e.getStateKey())),e.isState()&&r&&(e.forwardLooking=!1)}constructor(e){var t,r;this.eventTimelineSet=e,o()(this,"roomId",void 0),o()(this,"name",void 0),o()(this,"events",[]),o()(this,"baseIndex",0),o()(this,"startState",void 0),o()(this,"endState",void 0),o()(this,"startToken",null),o()(this,"endToken",null),o()(this,"prevTimeline",null),o()(this,"nextTimeline",null),o()(this,"paginationRequests",{[n.Backward]:null,[n.Forward]:null}),this.roomId=null!==(t=null===(r=e.room)||void 0===r?void 0:r.roomId)&&void 0!==t?t:null,this.roomId&&(this.startState=new a["a"](this.roomId,void 0,!0),this.endState=new a["a"](this.roomId)),this.paginationRequests={b:null,f:null},this.name=this.roomId+":"+(new Date).toISOString()}initialiseState(e){var t,r,{timelineWasEmpty:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.events.length>0)throw new Error("Cannot initialise state after events are added");null===(t=this.startState)||void 0===t||t.setStateEvents(e,{timelineWasEmpty:n}),null===(r=this.endState)||void 0===r||r.setStateEvents(e,{timelineWasEmpty:n})}forkLive(e){var t=this.getState(e),r=new c(this.eventTimelineSet);return r.startState=null===t||void 0===t?void 0:t.clone(),r.endState=t,this.endState=null===t||void 0===t?void 0:t.clone(),r}fork(e){var t=this.getState(e),r=new c(this.eventTimelineSet);return r.startState=null===t||void 0===t?void 0:t.clone(),r.endState=null===t||void 0===t?void 0:t.clone(),r}getRoomId(){return this.roomId}getFilter(){return this.eventTimelineSet.getFilter()}getTimelineSet(){return this.eventTimelineSet}getBaseIndex(){return this.baseIndex}getEvents(){return this.events}getState(e){if(e==c.BACKWARDS)return this.startState;if(e==c.FORWARDS)return this.endState;throw new Error("Invalid direction '"+e+"'")}getPaginationToken(e){return this.roomId?this.getState(e).paginationToken:e===n.Backward?this.startToken:this.endToken}setPaginationToken(e,t){this.roomId?this.getState(t).paginationToken=e:t===n.Backward?this.startToken=e:this.endToken=e}getNeighbouringTimeline(e){if(e==c.BACKWARDS)return this.prevTimeline;if(e==c.FORWARDS)return this.nextTimeline;throw new Error("Invalid direction '"+e+"'")}setNeighbouringTimeline(e,t){if(this.getNeighbouringTimeline(t))throw new Error("timeline already has a neighbouring timeline - cannot reset neighbour (direction: "+t+")");if(t==c.BACKWARDS)this.prevTimeline=e;else{if(t!=c.FORWARDS)throw new Error("Invalid direction '"+t+"'");this.nextTimeline=e}this.setPaginationToken(null,t)}addEvent(e){var{toStartOfTimeline:t,roomState:r,timelineWasEmpty:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{toStartOfTimeline:!1};r||(r=t?this.startState:this.endState);var i,o,a=this.getTimelineSet();a.room&&(c.setEventMetadata(e,r,t),e.isState()&&a.room.getUnfilteredTimelineSet()===a&&(null===(i=r)||void 0===i||i.setStateEvents([e],{timelineWasEmpty:n}),e.sender&&(e.getType()!==s["b"].RoomMember||t)||c.setEventMetadata(e,r,t)));o=t?0:this.events.length,this.events.splice(o,0,e),t&&this.baseIndex++}insertEvent(e,t,r){var n=this.getTimelineSet();n.room&&(c.setEventMetadata(e,r,!1),e.isState()&&n.room.getUnfilteredTimelineSet()===n&&(r.setStateEvents([e],{}),e.sender&&e.getType()!==s["b"].RoomMember||c.setEventMetadata(e,r,!1))),this.events.splice(t,0,e)}removeEvent(e){for(var t=this.events.length-1;t>=0;t--){var r=this.events[t];if(r.getId()==e)return this.events.splice(t,1),t<this.baseIndex&&this.baseIndex--,r}return null}toString(){return this.name}}o()(c,"BACKWARDS",n.Backward),o()(c,"FORWARDS",n.Forward)},"2f62":function(t,r,n){"use strict";(function(t){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function i(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:n});else{var r=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,r.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}n.d(r,"b",(function(){return N})),n.d(r,"c",(function(){return L})),n.d(r,"d",(function(){return D}));var o="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},a=o.__VUE_DEVTOOLS_GLOBAL_HOOK__;function s(e){a&&(e._devtoolHook=a,a.emit("vuex:init",e),a.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){a.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){a.emit("vuex:action",e,t)}),{prepend:!0}))}function c(e,t){return e.filter(t)[0]}function l(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var r=c(t,(function(t){return t.original===e}));if(r)return r.copy;var n=Array.isArray(e)?[]:{};return t.push({original:e,copy:n}),Object.keys(e).forEach((function(r){n[r]=l(e[r],t)})),n}function d(e,t){Object.keys(e).forEach((function(r){return t(e[r],r)}))}function u(e){return null!==e&&"object"===typeof e}function h(e){return e&&"function"===typeof e.then}function f(e,t){return function(){return e(t)}}var p=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=("function"===typeof r?r():r)||{}},v={namespaced:{configurable:!0}};v.namespaced.get=function(){return!!this._rawModule.namespaced},p.prototype.addChild=function(e,t){this._children[e]=t},p.prototype.removeChild=function(e){delete this._children[e]},p.prototype.getChild=function(e){return this._children[e]},p.prototype.hasChild=function(e){return e in this._children},p.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},p.prototype.forEachChild=function(e){d(this._children,e)},p.prototype.forEachGetter=function(e){this._rawModule.getters&&d(this._rawModule.getters,e)},p.prototype.forEachAction=function(e){this._rawModule.actions&&d(this._rawModule.actions,e)},p.prototype.forEachMutation=function(e){this._rawModule.mutations&&d(this._rawModule.mutations,e)},Object.defineProperties(p.prototype,v);var m=function(e){this.register([],e,!1)};function g(e,t,r){if(t.update(r),r.modules)for(var n in r.modules){if(!t.getChild(n))return void 0;g(e.concat(n),t.getChild(n),r.modules[n])}}m.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},m.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,r){return t=t.getChild(r),e+(t.namespaced?r+"/":"")}),"")},m.prototype.update=function(e){g([],this.root,e)},m.prototype.register=function(e,t,r){var n=this;void 0===r&&(r=!0);var i=new p(t,r);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&d(t.modules,(function(t,i){n.register(e.concat(i),t,r)}))},m.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1],n=t.getChild(r);n&&n.runtime&&t.removeChild(r)},m.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1];return!!t&&t.hasChild(r)};var y;var b=function(e){var t=this;void 0===e&&(e={}),!y&&"undefined"!==typeof window&&window.Vue&&P(window.Vue);var r=e.plugins;void 0===r&&(r=[]);var n=e.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new m(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new y,this._makeLocalGettersCache=Object.create(null);var i=this,o=this,a=o.dispatch,c=o.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,r){return c.call(i,e,t,r)},this.strict=n;var l=this._modules.root.state;k(this,l,[],this._modules.root),E(this,l),r.forEach((function(e){return e(t)}));var d=void 0!==e.devtools?e.devtools:y.config.devtools;d&&s(this)},_={state:{configurable:!0}};function w(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function S(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;k(e,r,[],e._modules.root,!0),E(e,r,t)}function E(e,t,r){var n=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,o={};d(i,(function(t,r){o[r]=f(t,e),Object.defineProperty(e.getters,r,{get:function(){return e._vm[r]},enumerable:!0})}));var a=y.config.silent;y.config.silent=!0,e._vm=new y({data:{$$state:t},computed:o}),y.config.silent=a,e.strict&&O(e),n&&(r&&e._withCommit((function(){n._data.$$state=null})),y.nextTick((function(){return n.$destroy()})))}function k(e,t,r,n,i){var o=!r.length,a=e._modules.getNamespace(r);if(n.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=n),!o&&!i){var s=M(t,r.slice(0,-1)),c=r[r.length-1];e._withCommit((function(){y.set(s,c,n.state)}))}var l=n.context=I(e,a,r);n.forEachMutation((function(t,r){var n=a+r;T(e,n,t,l)})),n.forEachAction((function(t,r){var n=t.root?r:a+r,i=t.handler||t;R(e,n,i,l)})),n.forEachGetter((function(t,r){var n=a+r;x(e,n,t,l)})),n.forEachChild((function(n,o){k(e,t,r.concat(o),n,i)}))}function I(e,t,r){var n=""===t,i={dispatch:n?e.dispatch:function(r,n,i){var o=A(r,n,i),a=o.payload,s=o.options,c=o.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:n?e.commit:function(r,n,i){var o=A(r,n,i),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(i,{getters:{get:n?function(){return e.getters}:function(){return C(e,t)}},state:{get:function(){return M(e.state,r)}}}),i}function C(e,t){if(!e._makeLocalGettersCache[t]){var r={},n=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,n)===t){var o=i.slice(n);Object.defineProperty(r,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}function T(e,t,r,n){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){r.call(e,n.state,t)}))}function R(e,t,r,n){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t){var i=r.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t);return h(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}function x(e,t,r,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return r(n.state,n.getters,e.state,e.getters)})}function O(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function M(e,t){return t.reduce((function(e,t){return e[t]}),e)}function A(e,t,r){return u(e)&&e.type&&(r=t,t=e,e=e.type),{type:e,payload:t,options:r}}function P(e){y&&e===y||(y=e,i(y))}_.state.get=function(){return this._vm._data.$$state},_.state.set=function(e){0},b.prototype.commit=function(e,t,r){var n=this,i=A(e,t,r),o=i.type,a=i.payload,s=(i.options,{type:o,payload:a}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,n.state)})))},b.prototype.dispatch=function(t,r){var n=this,i=A(t,r),o=i.type,a=i.payload,s={type:o,payload:a},c=this._actions[o];if(c){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(e){0}var l=c.length>1?Promise.all(c.map((function(e){return e(a)}))):c[0](a);return new Promise((function(t,r){l.then((function(r){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(e){0}t(r)}),(function(t){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(e){0}r(t)}))}))}},b.prototype.subscribe=function(e,t){return w(e,this._subscribers,t)},b.prototype.subscribeAction=function(e,t){var r="function"===typeof e?{before:e}:e;return w(r,this._actionSubscribers,t)},b.prototype.watch=function(e,t,r){var n=this;return this._watcherVM.$watch((function(){return e(n.state,n.getters)}),t,r)},b.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},b.prototype.registerModule=function(e,t,r){void 0===r&&(r={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),k(this,this.state,e,this._modules.get(e),r.preserveState),E(this,this.state)},b.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var r=M(t.state,e.slice(0,-1));y.delete(r,e[e.length-1])})),S(this)},b.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},b.prototype.hotUpdate=function(e){this._modules.update(e),S(this,!0)},b.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(b.prototype,_);var D=K((function(e,t){var r={};return F(t).forEach((function(t){var n=t.key,i=t.val;r[n]=function(){var t=this.$store.state,r=this.$store.getters;if(e){var n=q(this.$store,"mapState",e);if(!n)return;t=n.context.state,r=n.context.getters}return"function"===typeof i?i.call(this,t,r):t[i]},r[n].vuex=!0})),r})),j=K((function(e,t){var r={};return F(t).forEach((function(t){var n=t.key,i=t.val;r[n]=function(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];var n=this.$store.commit;if(e){var o=q(this.$store,"mapMutations",e);if(!o)return;n=o.context.commit}return"function"===typeof i?i.apply(this,[n].concat(t)):n.apply(this.$store,[i].concat(t))}})),r})),L=K((function(e,t){var r={};return F(t).forEach((function(t){var n=t.key,i=t.val;i=e+i,r[n]=function(){if(!e||q(this.$store,"mapGetters",e))return this.$store.getters[i]},r[n].vuex=!0})),r})),N=K((function(e,t){var r={};return F(t).forEach((function(t){var n=t.key,i=t.val;r[n]=function(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];var n=this.$store.dispatch;if(e){var o=q(this.$store,"mapActions",e);if(!o)return;n=o.context.dispatch}return"function"===typeof i?i.apply(this,[n].concat(t)):n.apply(this.$store,[i].concat(t))}})),r})),U=function(e){return{mapState:D.bind(null,e),mapGetters:L.bind(null,e),mapMutations:j.bind(null,e),mapActions:N.bind(null,e)}};function F(e){return B(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function B(e){return Array.isArray(e)||u(e)}function K(e){return function(t,r){return"string"!==typeof t?(r=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,r)}}function q(e,t,r){var n=e._modulesNamespaceMap[r];return n}function V(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var r=e.filter;void 0===r&&(r=function(e,t,r){return!0});var n=e.transformer;void 0===n&&(n=function(e){return e});var i=e.mutationTransformer;void 0===i&&(i=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var a=e.actionTransformer;void 0===a&&(a=function(e){return e});var s=e.logMutations;void 0===s&&(s=!0);var c=e.logActions;void 0===c&&(c=!0);var d=e.logger;return void 0===d&&(d=console),function(e){var u=l(e.state);"undefined"!==typeof d&&(s&&e.subscribe((function(e,o){var a=l(o);if(r(e,u,a)){var s=z(),c=i(e),h="mutation "+e.type+s;W(d,h,t),d.log("%c prev state","color: #9E9E9E; font-weight: bold",n(u)),d.log("%c mutation","color: #03A9F4; font-weight: bold",c),d.log("%c next state","color: #4CAF50; font-weight: bold",n(a)),$(d)}u=a})),c&&e.subscribeAction((function(e,r){if(o(e,r)){var n=z(),i=a(e),s="action "+e.type+n;W(d,s,t),d.log("%c action","color: #03A9F4; font-weight: bold",i),$(d)}})))}}function W(t,r,n){var i=n?t.groupCollapsed:t.group;try{i.call(t,r)}catch(e){t.log(r)}}function $(t){try{t.groupEnd()}catch(e){t.log("—— log end ——")}}function z(){var e=new Date;return" @ "+H(e.getHours(),2)+":"+H(e.getMinutes(),2)+":"+H(e.getSeconds(),2)+"."+H(e.getMilliseconds(),3)}function G(e,t){return new Array(t+1).join(e)}function H(e,t){return G("0",t-e.toString().length)+e}var Y={Store:b,install:P,version:"3.6.2",mapState:D,mapMutations:j,mapGetters:L,mapActions:N,createNamespacedHelpers:U,createLogger:V};r["a"]=Y}).call(this,n("c8ba"))},"2f86":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixWidgetType=void 0;var n=function(e){return e["Custom"]="m.custom",e["JitsiMeet"]="m.jitsi",e["Stickerpicker"]="m.stickerpicker",e}({});t.MatrixWidgetType=n},3:function(e,t){},3016:function(e,t,r){"use strict";r.r(t);var n=r("a2bc");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"302d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"305b":function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.EmoteEvent=void 0;var o=n("d3d5"),a=n("6682"),s=n("4a30");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=f(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},h.apply(this,arguments)}function f(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=_(e),null===e)break;return e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e){var t=b();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var w=function(e){p(r,e);var t=m(r);function r(e){return l(this,r),t.call(this,e)}return u(r,[{key:"isEmote",get:function(){return!0}},{key:"isEquivalentTo",value:function(e){return(0,s.isEventTypeSame)(e,a.M_EMOTE)||h(_(r.prototype),"isEquivalentTo",this).call(this,e)}},{key:"serialize",value:function(){var e=h(_(r.prototype),"serialize",this).call(this);return e.content["msgtype"]="m.emote",e}}],[{key:"from",value:function(e,t){var n;return new r({type:a.M_EMOTE.name,content:(n={},c(n,a.M_TEXT.name,e),c(n,a.M_HTML.name,t),n)})}}]),r}(o.MessageEvent);r.EmoteEvent=w},"305c":function(e,t,r){"use strict";r.r(t);var n=r("3288");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},3068:function(e,t,r){"use strict";var n,i;r.d(t,"a",(function(){return i})),function(e){e["RoomId"]="room_id",e["Sender"]="sender"}(n||(n={})),function(e){e["Recent"]="recent",e["Rank"]="rank"}(i||(i={}))},"306c":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=["v1.1","v1.2","v1.3","v1.4","v1.5","v1.6","v1.7","v1.8","v1.9"];n[0],n[n.length-1]},"30b5":function(e,t,r){"use strict";var n=r("c532");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},3139:function(t,r,n){"use strict";(function(t){n("d9e2"),n("14d9"),n("13d5"),n("2c66"),n("249d"),n("40e9"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("b7ef"),n("88a7"),n("271a"),n("5494");var i=null,o={sha224:function(e){i||(i=n("98e6"));var t=i("sha224");return t.update(e),t.digest()},language:function(){var e;return e=window.navigator.languages?window.navigator.languages[0]:window.navigator.userLanguage||window.navigator.language,e},deep:function(e,t){var r=_.isArray(t)?t:t.split("."),n=r[0];if("undefined"!=typeof e&&e)return"undefined"!=typeof e[n]?(r.splice(0,1),0===r.length?e[n]:o.deep(e[n],r)):void 0}},a=function(e,t,r,n,i,o){i||(i={r:25,g:250,b:50}),o||(o={x:25,offset:[0,0]});var s,c=e.width,l=e.height,d=r.frequencyBinCount,u=new Uint8Array(d),h=c/d/2.5,f=o.x;r.getByteFrequencyData(u),t.clearRect(0,0,c,l);for(var p=0;p<d;p++){s=u[p];var v=s+i.r*(p/d),m=i.g*(p/d),g=i.b,y=-Math.abs(p-d/2)/d+.5;p>o.offset[0]&&p<d-o.offset[1]&&(t.fillStyle="rgba("+v+","+m+","+g+","+2*y+")",t.fillRect(f,l/2-s*y,h,s*y*2)),f+=h+1}requestAnimationFrame((function(){n()?t.clearRect(0,0,c,l):a(e,t,r,n,i,o)}))},s=function(e,t){return e=parseInt(e),t=parseInt(t),Math.floor(Math.random()*(t-e+1))+e};o.permutations=function(e,t){t||(t=1);var r=[],n=[],i=[],o=e.length;function a(s){for(var c=0;c<o;c++)i[c]||(i[c]=!0,n[s]=e[c],s<t-1?a(s+1,c+1):r.push([].concat(n)),i[c]=!1)}return a(0),r};var c=function(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(r){return console.warn("Copy to clipboard failed.",r),!1}finally{document.body.removeChild(t)}}},l=function(e){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}if(!e)return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t();for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=0;i<16;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},d=function(e){if(!e||!e.split)return e;var t=["2ndEdison, 3dCarbon","A-Pmcs"],r=["TO","K","X","10X","THE","AN","AND","OR","AT","BUT","BY","FOR","IN","OF","OFF","ON","OUT","PER","UP","VIA","AS","FOR"],n=["2MCBL","USA","TONS","BHCC","LLC","LTD","1BWK","AGMA","VIII","XIII","BHCC"],i=["LAS","LAW","SON","DEE","ST","PET","BIG","WAY","AIR","ALL","TOP","JOY","CO","INC","INC.","AVE","PAY","ST.","FOX","CAR","TAX","DAY","MAN","CO.","NEW"],o=new RegExp(i.join("|")),a=new RegExp(n.join("|")),s=e.split(" ").map((function(e){if(t.some((function(t){return t.toUpperCase()===e})))return t.find((function(t){return t.toUpperCase()===e}));if(r.some((function(t){if(t===e)return!0;for(var r=t.split(" "),n=0;n<r.length;n++)if(/[0-9]/.test(r[n])&&/ST|ND|RD|TH|K/.test(r[n+1]+r[n+2]))return!0;return!1})))return e.toLowerCase();if(o.test(e))return e[0]+e.slice(1).toLowerCase();if(e.replace(/\(|\)/g,"").length<=3||a.test(e))return e;var n=e.toLowerCase().replace(/[A-Za-z]/,(function(e){return e.toUpperCase()})),i=[];i.push(n[0]);for(var s=0;s<n.length;s++)n[s+1]&&(/\.|\/|[0-9]|\&|\-|\s/.test(n[s])||"mc"===(n[s-1]+n[s]).toLowerCase())?i.push(n[s+1].toUpperCase()):n[s+1]&&i.push(n[s+1]);return i.join("")}));return u(s.join(" "))},u=function(e){return e[0].toUpperCase()+e.substr(1)},h=function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()},f=function(e){var t=e.split(" ");return _.map(t,(function(e){return h(e)})).join(" ")},p=function(e,t){var r={};return _.each(e,(function(e,n){var i=t(e,n);i&&(r[i]||(r[i]=[]),r[i].push(e))})),r},v=function(e,t,r){t||(t=$("body,html")),r||(r=200),t.animate({scrollTop:e},r)},m=function(e,t,r){e||(e=$(this));var n=e.offset(),i=(e.height()-$(window).height())/2;if(n){var o=n.top+i;v(o,t,r)}},g=function(e,t){e||(e=""),t||(t="");var r=function(e){return e.split(/[ \t\v\r\n\f,.]+/)},n=function(e){var t=r(e).join(" ");return t.toLowerCase().replace(/[^a-zа-я0-9&]*/g,"")},i=function(e){for(var t={},r=function(t){var r;return r=t<0||t>=e.length?"_":e[t],r},n=-1;n<=e.length;n++){for(var i="",o=n-1;o<=n+1;o++)i+=r(o);t[i]=1}return t},o=i(n(e)),a=i(n(t)),s=0,c=Math.max(_.toArray(o).length,_.toArray(a).length);return _.each(o,(function(e,t){a[t]&&s++})),s/c},y=function(e,t,r){return new Promise((n,i)=>{b(e,n,t,r)})},b=function(e,t,r,n){if(e())t&&t();else{r||(r=20);var i=0,o=setInterval((function(){(e()||n&&n<=i)&&(clearInterval(o),t&&t()),i+=r}),r)}},w=function(e){var t=S(k(I(E(e),8*e.length)));return t.toLowerCase()};function S(e){for(var t,r="0123456789ABCDEF",n="",i=0;i<e.length;i++)t=e.charCodeAt(i),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}function E(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function k(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function I(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=r,c=n,l=i,d=o;n=O(n=O(n=O(n=O(n=x(n=x(n=x(n=x(n=R(n=R(n=R(n=R(n=T(n=T(n=T(n=T(n,i=T(i,o=T(o,r=T(r,n,i,o,e[a+0],7,-680876936),n,i,e[a+1],12,-389564586),r,n,e[a+2],17,606105819),o,r,e[a+3],22,-1044525330),i=T(i,o=T(o,r=T(r,n,i,o,e[a+4],7,-176418897),n,i,e[a+5],12,1200080426),r,n,e[a+6],17,-1473231341),o,r,e[a+7],22,-45705983),i=T(i,o=T(o,r=T(r,n,i,o,e[a+8],7,1770035416),n,i,e[a+9],12,-1958414417),r,n,e[a+10],17,-42063),o,r,e[a+11],22,-1990404162),i=T(i,o=T(o,r=T(r,n,i,o,e[a+12],7,1804603682),n,i,e[a+13],12,-40341101),r,n,e[a+14],17,-1502002290),o,r,e[a+15],22,1236535329),i=R(i,o=R(o,r=R(r,n,i,o,e[a+1],5,-165796510),n,i,e[a+6],9,-1069501632),r,n,e[a+11],14,643717713),o,r,e[a+0],20,-373897302),i=R(i,o=R(o,r=R(r,n,i,o,e[a+5],5,-701558691),n,i,e[a+10],9,38016083),r,n,e[a+15],14,-660478335),o,r,e[a+4],20,-405537848),i=R(i,o=R(o,r=R(r,n,i,o,e[a+9],5,568446438),n,i,e[a+14],9,-1019803690),r,n,e[a+3],14,-187363961),o,r,e[a+8],20,1163531501),i=R(i,o=R(o,r=R(r,n,i,o,e[a+13],5,-1444681467),n,i,e[a+2],9,-51403784),r,n,e[a+7],14,1735328473),o,r,e[a+12],20,-1926607734),i=x(i,o=x(o,r=x(r,n,i,o,e[a+5],4,-378558),n,i,e[a+8],11,-2022574463),r,n,e[a+11],16,1839030562),o,r,e[a+14],23,-35309556),i=x(i,o=x(o,r=x(r,n,i,o,e[a+1],4,-1530992060),n,i,e[a+4],11,1272893353),r,n,e[a+7],16,-155497632),o,r,e[a+10],23,-1094730640),i=x(i,o=x(o,r=x(r,n,i,o,e[a+13],4,681279174),n,i,e[a+0],11,-358537222),r,n,e[a+3],16,-722521979),o,r,e[a+6],23,76029189),i=x(i,o=x(o,r=x(r,n,i,o,e[a+9],4,-640364487),n,i,e[a+12],11,-421815835),r,n,e[a+15],16,530742520),o,r,e[a+2],23,-995338651),i=O(i,o=O(o,r=O(r,n,i,o,e[a+0],6,-198630844),n,i,e[a+7],10,1126891415),r,n,e[a+14],15,-1416354905),o,r,e[a+5],21,-57434055),i=O(i,o=O(o,r=O(r,n,i,o,e[a+12],6,1700485571),n,i,e[a+3],10,-1894986606),r,n,e[a+10],15,-1051523),o,r,e[a+1],21,-2054922799),i=O(i,o=O(o,r=O(r,n,i,o,e[a+8],6,1873313359),n,i,e[a+15],10,-30611744),r,n,e[a+6],15,-1560198380),o,r,e[a+13],21,1309151649),i=O(i,o=O(o,r=O(r,n,i,o,e[a+4],6,-145523070),n,i,e[a+11],10,-1120210379),r,n,e[a+2],15,718787259),o,r,e[a+9],21,-343485551),r=M(r,s),n=M(n,c),i=M(i,l),o=M(o,d)}return Array(r,n,i,o)}function C(e,t,r,n,i,o){return M(A(M(M(t,e),M(n,o)),i),r)}function T(e,t,r,n,i,o,a){return C(t&r|~t&n,e,t,i,o,a)}function R(e,t,r,n,i,o,a){return C(t&n|r&~n,e,t,i,o,a)}function x(e,t,r,n,i,o,a){return C(t^r^n,e,t,i,o,a)}function O(e,t,r,n,i,o,a){return C(r^(t|~n),e,t,i,o,a)}function M(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function A(e,t){return e<<t|e>>>32-t}var P=function(e,t,r){r||(r=200);var n=function(){e((function(e){e?t&&t():setTimeout(n,r)}))};n()},D=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("android")>-1;if(t)return!0},j=function(){return $("html").hasClass("mobile")},L=function(){return $("html").hasClass("mobile")||$("html").hasClass("tablet")},N=function(e,t,r){return r||(r=20),t&&clearTimeout(t),t=setTimeout(e,r),t},U=(s=function(e,t){return e=parseInt(e),t=parseInt(t),Math.floor(Math.random()*(t-e+1))+e},function(e){return B(F(e))}),F=function(e){return(e||"").replace(/^\s+/,"")},B=function(e){return(e||"").replace(/\s+$/,"")},K=function(e){for(var t=0,r="",n=0;n<e.length;n++){t=e.charCodeAt(n),t>255&&(t-=848),t=t.toString(16);while(t.length<2)t="0"+t;r+=t}return r},q=function(e){if(!e)return null;if(e.toString){var t=e.toString();if("[object Object]"!=t)return t}return _.isObject(e)?JSON.stringify(e):e},V={},W=function(e){if(V[e])return V[e];for(var t=0,r="",n=2;n<=e.length;n+=2)t=parseInt(e.substring(n-2,n),16),t>=128&&(t+=848),t=String.fromCharCode("0x"+t.toString(16)),r+=t;return V[e]=r,r},z=function(e){let t=new Image;return t.src=e.base64,e.width=t.width,e.height=t.height,e},G=["bastyon.com","pocketnet.app","zoom.us","youtube","facebook","instagram","vk.com","twitter","pinterest","vimeo","ask.fm","change.org","wikipedia","livejournal","linkedin","myspace","reddit","tumblr","ok.ru","flickr","google","yandex","yahoo","bing","gmail","mail"],H=function(e){return _.find(G,(function(t){return e.indexOf(t)>-1}))},Y=function(e){var t=linkify.find(e);if(t.length)return t[0].href},J=function(e){return e.replace(/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/g,"")},X=function(e=""){var t=Z(e);if(!t)return"";var r=t.split("@");return r[1]?r[1]:""},Z=function(e){return null===e||void 0===e?void 0:e.split(":")[0]},Q=function(e){var t;return null===e||void 0===e||null===(t=e.split(":")[0])||void 0===t?void 0:t.replace("@","")},ee=function(e,t){return e||(e=""),0==e.indexOf("@")?e:"@"+e+":"+t},te=function(e,t){var r={};Object.keys(e).filter((function(r){return e[r]!==t[r]})).map((function(t){var n={};n[t]=e[t],r=Object.assign(r,n)}));return r},re=function(e,t){var r=e.map((function(e){return e.id})),n=t.map((function(e){return e.id})),i=[];return r.forEach((function(e){i.push(t[n.indexOf(e)])})),i},ne=function(e,t=2){if(0===e)return"0 Bytes";const r=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,o)).toFixed(n))+" "+i[o]},ie=function(e){var t=new URL(e);return{post:t.searchParams.get("s"),user:t.pathname.replace("/","")}},oe=function(e){var t=["www.youtube.com","youtube.com","youtu.be"],r=["www.vimeo.com","vimeo.com"],n=["peer.tube","peertube.social"],i=new URL(e);return t.indexOf(i.hostname)>-1?"https://www.youtube.com/embed/"+i.searchParams.get("v"):r.indexOf(i.hostname)>-1?"https://player.vimeo.com/video"+i.pathname:n.indexOf(i.hostname)>-1?"https://pocketnetpeertube1.nohost.me/"+i.pathname.replace("watch","embed"):void 0},ae=function(e,t){return e.slice(0,t)+"..."},se=function(e){var t=Y(e);return e.replace(t,"")},ce=function(e){var t=new Date(1e3*e),r=t.getFullYear(),n=t.getMonth(),i=t.getDate(),o=t.getHours()>13?"PM":"AM",a=t.getHours()>13?t.getHours()-12:t.getHours(),s=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${c[n]} ${i}, ${r} at ${a}:${s} ${o}`},le=function(e,t){var r=e/t,n='<i class="fas fa-star"></i>',i='<i class="fas fa-star-half-alt"></i>',o='<i class="far fa-star"></i>',a=["","","","",""];return 0===e?a.map(e=>o):a.map(e=>r>=1?(r--,n):r<1&&r>=.5?(r--,i):r<.5?(r--,o):void 0)},de=function(e){var t=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom,n=document.documentElement.clientHeight,i=r-t,o=r>=.8*i,a=r<=n+.2*i;return!(!o||!a)},ue=function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return window.btoa(t)},he=function(e){for(var t=window.atob(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n.buffer},fe={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,n,i,o,a,s,c="",l=0;e=fe._utf8_encode(e);while(l<e.length)t=e.charCodeAt(l++),r=e.charCodeAt(l++),n=e.charCodeAt(l++),i=t>>2,o=(3&t)<<4|r>>4,a=(15&r)<<2|n>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),c=c+fe._keyStr.charAt(i)+fe._keyStr.charAt(o)+fe._keyStr.charAt(a)+fe._keyStr.charAt(s);return c},decode:function(e){var t,r,n,i,o,a,s,c="",l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<e.length)i=fe._keyStr.indexOf(e.charAt(l++)),o=fe._keyStr.indexOf(e.charAt(l++)),a=fe._keyStr.indexOf(e.charAt(l++)),s=fe._keyStr.indexOf(e.charAt(l++)),t=i<<2|o>>4,r=(15&o)<<4|a>>2,n=(3&a)<<6|s,c+=String.fromCharCode(t),64!=a&&(c+=String.fromCharCode(r)),64!=s&&(c+=String.fromCharCode(n));return c=fe._utf8_decode(c),c},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){var t="",r=0,n=0,i=0,o=0;while(r<e.length)n=e.charCodeAt(r),n<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),i=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&i),r+=3);return t},fromFile:e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onloadend=()=>t(n.result),n.onerror=e=>r(e)}),toFileFetch:function(e){return fetch(e).then(e=>e.blob()).then(e=>new(window.wFile||window.File)([e],"File name",{type:"image/png"}))},toFile:function(t){try{var r=t.split(","),n=r[0].match(/:(.*?);/)[1],i=atob(r[1]),o=i.length,a=new Uint8Array(o);while(o--)a[o]=i.charCodeAt(o);var s=new(window.wFile||window.File)([a],"Filename",{type:n});return Promise.resolve(s)}catch(e){return Promise.reject(e)}}};function pe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}o.copyArrayBuffer=function(e){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},o.readFile=function(e){let t=new FileReader;return window.cordova&&(t=t._realReader),t.readAsArrayBuffer(e),new Promise((e,r)=>{t.onloadend=function(r){e(t.result)},t.onerror=function(){r(t.error)}})},o.fetchLocal=function(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.onload=function(){var e=n.getResponseHeader("content-type");t({data:new Blob([n.response],{type:e,name:"file"})})},n.onerror=function(t){console.error(t,e),r(new TypeError("Local request failed"))},n.open("GET",e),n.responseType="arraybuffer",n.send(null)}))},o.superXSS=function(e,t){t||(t={stripIgnoreTag:!0,whiteList:{}});var r=e.length,n=filterXSS(e,t);return n.length&&r!=n.length?o.superXSS(n,t):n},o.saveFileCordova=function(e,t,r,n){var i="";switch(device.platform){case"Android":i="file:///storage/emulated/0/";break;case"iOS":i=cordova.file.cacheDirectory;break}o.isios()&&n&&(i=cordova.file.documentsDirectory),console.log("file, name",e,t,n);var a=function(n){console.log("success"),n.getDirectory("Download",{exclusive:!1,create:!0},(function(n){n.getFile(t,{create:!0,exclusive:!1},(function(n){var i=n.toURL(),o=!1;console.log("entry",n),n.createWriter((function(a){console.log("myFileUrl",i),a.onwriteend=function(e){o||(console.log("evt",e),window.galleryRefresh&&window.galleryRefresh.refresh(i,(function(e){}),(function(e){})),r&&r({name:t,url:i,nativeURL:n.nativeURL}))},a.onerror=function(e){o=!0,console.error(e),r&&r(null,e)},a.seek(0),a.write(e)}),(function(e){console.error(e),r&&r(null,e)}))}),(function(e){console.error(e),r&&r(null,e)}))}),(function(e){console.error(e),r&&r(null,e)}))},s=function(e){console.error(e),r&&r(null,e)};n&&!o.isios()?window.requestFileSystem(LocalFileSystem.PERSISTENT,0,(function(e){a(e.root)}),(function(n){o.saveFileCordova(e,t,r)})):window.resolveLocalFileSystemURL(i,a,s)},o.isios=function(){return window.cordova&&window.device&&"iOS"==deep(window,"device.platform")||pe()},o.now=function(e){var t=e||new Date,r=t.getTime()+60*t.getTimezoneOffset()*1e3,n=new Date(r);return n.toString(),n},o.date={addseconds:function(e,t){e||(e=new Date);var r=e.getTime()+1e3*t,n=new Date(r);return n}},o.getservers=function(e,t,r){if(!e.length)return[];t||(t=1),t>e.length&&(t=e.length);var n=o.permutations(e,t),i=o.helpers.base58.decode(r)%n.length;return n[i]},o.helpers={base58:{ALPHABET:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ALPHABET_MAP:{},i:0,encode(e){const{ALPHABET:t,ALPHABET_MAP:r}=this;let{i:n}=this;if(!Object.keys(r).length)while(n<t.length)r[t.charAt(n)]=n,n++;var i,o,a;if(0===e.length)return"";n=void 0,a=void 0,o=[0],n=0;while(n<e.length){a=0;while(a<o.length)o[a]<<=8,a++;o[0]+=e[n],i=0,a=0;while(a<o.length)o[a]+=i,i=o[a]/58|0,o[a]%=58,++a;while(i)o.push(i%58),i=i/58|0;n++}n=0;while(0===e[n]&&n<e.length-1)o.push(0),n++;return o.reverse().map((function(e){return t[e]})).join("")},decode(e){const{ALPHABET:r,ALPHABET_MAP:n}=this;let{i:i}=this;if(!Object.keys(n).length)while(i<r.length)n[r.charAt(i)]=i,i++;var o,a,s,c;if(0===e.length)return new("undefined"!==typeof Uint8Array&&null!==Uint8Array?Uint8Array:t)(0);i=void 0,c=void 0,o=[0],i=0;while(i<e.length){if(a=e[i],!(a in n))throw"Base58.decode received unacceptable input. Character '"+a+"' is not in the Base58 alphabet.";c=0;while(c<o.length)o[c]*=58,c++;o[0]+=n[a],s=0,c=0;while(c<o.length)o[c]+=s,s=o[c]>>8,o[c]&=255,++c;while(s)o.push(255&s),s>>=8;i++}i=0;while("1"===e[i]&&i<e.length-1)o.push(0),i++;const l=new Uint8Array(o.reverse());let d=t.from(l);return d.readUIntBE(0,l.length)}}},o.getCaretPosition=function(e){if(document.selection){e.focus();var t=document.selection.createRange(),r=t.text.length;t.moveStart("character",-e.value.length);var n=t.text.length-r;return{start:n,end:n+r}}return null!==e&&void 0!==e&&e.selectionStart||"0"===(null===e||void 0===e?void 0:e.selectionStart)?{start:e.selectionStart,end:e.selectionEnd}:{start:0,end:0}},o.setCaretPosition=function(e,t,r){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,r);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n.select()}},o.processArray=function(e,t){var r=[];return e.reduce((function(e,n){return e.then((function(){return t(n).then((function(e){return r.push(e),r}))}))}),Promise.resolve())},o.bw=function(e){return e.split(/[ \t\v\r\n\f,.]+/)},o.stringComparison=function(e,t,r=.5){var n=o.bw(e),i=o.bw(t);return _.filter(n,(function(e){return _.find(i,(function(t){return o.wordComparison(e,t)>r}))})).length>0},o.wordComparison=function(e,t){e||(e=""),t||(t="");var r=function(e){var t=_.sortBy(o.bw(e),(function(e){return e.length})).join(" ");return t.toLowerCase().replace(/[^\p{L}\p{N}\p{Z}]/gu,"")},n=function(e){for(var t={},r=function(t){var r;return r=t<0||t>=e.length?"_":e[t],r},n=-1;n<=e.length;n++){for(var i="",o=n-1;o<=n+1;o++)i+=r(o);t[i]=1}return t},i=n(r(e)),a=n(r(t)),s=0,c=Math.max(_.toArray(i).length,_.toArray(a).length);return _.each(i,(function(e,t){a[t]&&s++})),s/c},o.format_date=function(e){var t=moment();if(0===t.diff(e,"days")&&moment(e).day()==t.day())return t.diff(e,"hours")<12?moment(moment.utc(e).toDate()).local().fromNow():new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});var r=moment(e);return t.year()===r.year()?r.local().format("D MMMM, HH:mm"):r.local().format("D MMMM YYYY")},o.clientsearch=function(e,t,r){var n=e,i=n.toLowerCase().replace(/[^\p{L}\p{N}\p{Z}]/gu,"");return _.filter(t,(function(e){var t=e;if(_.isObject(t)){if(!r)return;t=r(t)}if(t){var a=t,s=a.toLowerCase().replace(/[^\p{L}\p{N}\p{Z}]/gu,"");return!!(s&&s.indexOf(i)>-1||o.stringComparison(n,a,.9))||void 0}}))},o.ObjDiff=te,o._arrayBufferToBase64=ue,o._base64ToArrayBuffer=he,o.Base64=fe,o.getmatrixidFA=Z,o.getmatrixid=Q,o.getMatrixIdFull=ee,o.formatBytes=ne,o.filterByUserId=re,o.trim=U,o.isAndroid=D,o.isMobile=j,o.isTablet=L,o.rand=s,o.group=p,o.flball=d,o.flb=u,o.flbs=h,o.flbb=f,o.makeid=l,o.scrollTo=m,o.stringEq=g,o.pretry=y,o.retry=b,o.retryLazy=P,o.slowMade=N,o.renderFrameEqualizer=a,o.hexEncode=K,o.hexDecode=W,o.imgDimensions=z,o.getUrl=Y,o.getTxt=J,o.poketnetUrlParser=ie,o.textFormatter=ae,o.urlSeparator=se,o.dateParser=ce,o.setRating=le,o.videoUrlParser=oe,o.isVisible=de,o.copytext=c,o.md5=w,o.knsite=H,o.stringify=q,o.getminiappid=X,r["a"]=o}).call(this,n("b639").Buffer)},"314e":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".previewWrapper[data-v-43f2d6ca]{display:flex;align-items:center;width:100%}.previewWrapper .settingsWrapper[data-v-43f2d6ca]{width:50px;text-align:center;opacity:.2}.previewWrapper .iconWrapper[data-v-43f2d6ca]{width:44px}.previewWrapper .infoWrapper[data-v-43f2d6ca]{padding-left:.5em;flex-grow:1}.emptyEvent span[data-v-43f2d6ca]{color:rgb(var(--color-good));font-size:.8em}.contacts-preview[data-v-43f2d6ca]{padding:8px 0;width:100%}.summaryLine[data-v-43f2d6ca]{display:flex}.summaryLine .caption[data-v-43f2d6ca]{flex-grow:1}.summaryLine .caption[data-v-43f2d6ca] span{font-size:.9em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}",""]),e.exports=t},"315c":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.userpic[data-v-69908458]{width:100%;border-radius:50%;background:rgb(var(--neutral-grad-1));line-height:44px;text-align:center;color:rgb(var(--neutral-grad-2));position:relative}.userpic .bgimage[data-v-69908458],.userpic[data-v-69908458] .bgimage{width:100%;height:100%;border-radius:50%;position:relative;z-index:1}.userpic .userpicSquareWrapper[data-v-69908458]{padding-top:100%;position:relative}.userpic .userpicSquareInnerWrapper[data-v-69908458]{position:absolute;left:0;right:0;top:0;bottom:0}.icon[data-v-69908458]{position:absolute;right:70%;top:70%;font-size:1em;width:20px;height:20px;line-height:20px;background:transparent;border-radius:20px;color:rgb(var(--color-txt-gray));opacity:.8;z-index:3}.icon.active[data-v-69908458]{color:rgb(var(--color-txt-ac))}.charAvatar[data-v-69908458]{text-transform:uppercase;position:absolute;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;text-align:center;z-index:2;opacity:.9}.charAvatar i[data-v-69908458],.charAvatar span[data-v-69908458]{flex-grow:1;color:rgb(var(--neutral-grad-2))}.statusIcon[data-v-69908458]{position:absolute;right:-10%;bottom:-10%;display:flex;align-items:center;text-align:center;z-index:3;border-radius:50%;background:rgba(var(--neutral-grad-4),1);width:2em;height:2em;font-size:.6em}.statusIcon i[data-v-69908458],.statusIcon span[data-v-69908458]{flex-grow:1;color:rgb(var(--neutral-grad-2))}.invite i[data-v-69908458]{display:flex;height:100%;justify-content:center;align-items:center}.ban[data-v-69908458]:after,.blocked[data-v-69908458]:after,.leave[data-v-69908458]:after{content:"";position:absolute;left:0;right:0;top:0;bottom:0;background:rgb(var(--neutral-grad-2))!important;opacity:.7;border-radius:50%;z-index:2}',""]),e.exports=t},"316e":function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PostmessageTransport=void 0;var i=n("faa1"),o=n("dcab");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function u(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=g();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t,r){return t=_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=w(e,"string");return"symbol"===a(t)?t:String(t)}function w(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var S=function(e){h(r,e);var t=p(r);function r(e,n,i,o){var a;return l(this,r),a=t.call(this),a.sendDirection=e,a.initialWidgetId=n,a.transportWindow=i,a.inboundWindow=o,b(m(a),"strictOriginCheck",!1),b(m(a),"targetOrigin","*"),b(m(a),"timeoutSeconds",10),b(m(a),"_ready",!1),b(m(a),"_widgetId",null),b(m(a),"outboundRequests",new Map),b(m(a),"stopController",new AbortController),a._widgetId=n,a}return u(r,[{key:"ready",get:function(){return this._ready}},{key:"widgetId",get:function(){return this._widgetId||null}},{key:"nextRequestId",get:function(){var e="widgetapi-".concat(Date.now()),t=0,r=e;while(this.outboundRequests.has(r))r="".concat(e,"-").concat(t++);return this.outboundRequests.set(r,null),r}},{key:"sendInternal",value:function(e){console.log("[PostmessageTransport] Sending object to ".concat(this.targetOrigin,": "),e),this.transportWindow.postMessage(e,this.targetOrigin)}},{key:"reply",value:function(e,t){return this.sendInternal(c(c({},e),{},{response:t}))}},{key:"send",value:function(e,t){return this.sendComplete(e,t).then((function(e){return e.response}))}},{key:"sendComplete",value:function(e,t){var r=this;if(!this.ready||!this.widgetId)return Promise.reject(new Error("Not ready or unknown widget ID"));var n={api:this.sendDirection,widgetId:this.widgetId,requestId:this.nextRequestId,action:e,data:t};return e===o.WidgetApiToWidgetAction.UpdateVisibility&&(n["visible"]=t["visible"]),new Promise((function(e,t){var i=function(t){c(),e(t)},o=function(e){c(),t(e)},a=setTimeout((function(){return o(new Error("Request timed out"))}),1e3*(r.timeoutSeconds||1)),s=function(){return o(new Error("Transport stopped"))};r.stopController.signal.addEventListener("abort",s);var c=function(){r.outboundRequests["delete"](n.requestId),clearTimeout(a),r.stopController.signal.removeEventListener("abort",s)};r.outboundRequests.set(n.requestId,{request:n,resolve:i,reject:o}),r.sendInternal(n)}))}},{key:"start",value:function(){var e=this;this.inboundWindow.addEventListener("message",(function(t){e.handleMessage(t)})),this._ready=!0}},{key:"stop",value:function(){this._ready=!1,this.stopController.abort()}},{key:"handleMessage",value:function(e){if(!this.stopController.signal.aborted&&e.data&&(!this.strictOriginCheck||e.origin===window.origin)){var t=e.data;if(t.action&&t.requestId&&t.widgetId)if(t.response){if(t.api!==this.sendDirection)return;this.handleResponse(t)}else{var r=t;if(r.api!==(0,o.invertedDirection)(this.sendDirection))return;this.handleRequest(r)}}}},{key:"handleRequest",value:function(e){if(this.widgetId){if(this.widgetId!==e.widgetId)return}else this._widgetId=e.widgetId;this.emit("message",new CustomEvent("message",{detail:e}))}},{key:"handleResponse",value:function(e){if(e.widgetId===this.widgetId){var t=this.outboundRequests.get(e.requestId);if(t)if((0,o.isErrorResponse)(e.response)){var r=e.response;t.reject(new Error(r.error.message))}else t.resolve(e)}}}]),r}(i.EventEmitter);r.PostmessageTransport=S},"31c4":function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.NoticeEvent=void 0;var o=n("d3d5"),a=n("6682"),s=n("4a30");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=f(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},h.apply(this,arguments)}function f(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=_(e),null===e)break;return e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e){var t=b();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var w=function(e){p(r,e);var t=m(r);function r(e){return l(this,r),t.call(this,e)}return u(r,[{key:"isNotice",get:function(){return!0}},{key:"isEquivalentTo",value:function(e){return(0,s.isEventTypeSame)(e,a.M_NOTICE)||h(_(r.prototype),"isEquivalentTo",this).call(this,e)}},{key:"serialize",value:function(){var e=h(_(r.prototype),"serialize",this).call(this);return e.content["msgtype"]="m.notice",e}}],[{key:"from",value:function(e,t){var n;return new r({type:a.M_NOTICE.name,content:(n={},c(n,a.M_TEXT.name,e),c(n,a.M_HTML.name,t),n)})}}]),r}(o.MessageEvent);r.NoticeEvent=w},"31d8":function(t,r,n){"use strict";(function(t){n.d(r,"a",(function(){return v})),n.d(r,"b",(function(){return m}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("5b5f"),l=n("aab2"),d=n("1461"),u=n("4b9e"),h=49152;class f extends Error{constructor(){super(...arguments),s()(this,"data",{errcode:"M_TOO_LARGE",error:"Payload too large for encrypted message"})}}function p(e){if(void 0===e)throw new Error("payloadString undefined");if(e.length>h)throw new f("Message too long (".concat(e.length," bytes). ")+"The maximum for an encrypted message is ".concat(h," bytes."))}class v{constructor(e){this.cryptoStore=e,s()(this,"pickleKey","DEFAULT_KEY"),s()(this,"deviceCurve25519Key",null),s()(this,"deviceEd25519Key",null),s()(this,"maxOneTimeKeys",null),s()(this,"outboundGroupSessionStore",{}),s()(this,"inboundGroupSessionMessageIndexes",{}),s()(this,"sessionsInProgress",{}),s()(this,"olmPrekeyPromise",Promise.resolve())}static getOlmVersion(){return t.Olm.get_library_version()}init(){var e=arguments,r=this;return o()((function*(){var n,{pickleKey:i,fromExportedDevice:o}=e.length>0&&void 0!==e[0]?e[0]:{},a=new t.Olm.Account;try{o?(i&&c["b"].warn("ignoring opts.pickleKey because opts.fromExportedDevice is present."),r.pickleKey=o.pickleKey,yield r.initialiseFromExportedDevice(o,a)):(i&&(r.pickleKey=i),yield r.initialiseAccount(a)),n=JSON.parse(a.identity_keys()),r.maxOneTimeKeys=a.max_number_of_one_time_keys()}finally{a.free()}r.deviceCurve25519Key=n.curve25519,r.deviceEd25519Key=n.ed25519}))()}initialiseFromExportedDevice(e,t){var r=this;return o()((function*(){yield r.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT,l["a"].STORE_SESSIONS],t=>{r.cryptoStore.storeAccount(t,e.pickledAccount),e.sessions.forEach(e=>{var{deviceKey:n,sessionId:i}=e,o={session:e.session,lastReceivedMessageTs:e.lastReceivedMessageTs};r.cryptoStore.storeEndToEndSession(n,i,o,t)})}),t.unpickle(r.pickleKey,e.pickledAccount)}))()}initialiseAccount(e){var t=this;return o()((function*(){yield t.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT],r=>{t.cryptoStore.getAccount(r,n=>{null!==n?e.unpickle(t.pickleKey,n):(e.create(),n=e.pickle(t.pickleKey),t.cryptoStore.storeAccount(r,n))})})}))()}getAccount(e,r){this.cryptoStore.getAccount(e,e=>{var n=new t.Olm.Account;try{n.unpickle(this.pickleKey,e),r(n)}finally{n.free()}})}storeAccount(e,t){this.cryptoStore.storeAccount(e,t.pickle(this.pickleKey))}export(){var e=this;return o()((function*(){var t={pickleKey:e.pickleKey};return yield e.cryptoStore.doTxn("readonly",[l["a"].STORE_ACCOUNT,l["a"].STORE_SESSIONS],r=>{e.cryptoStore.getAccount(r,e=>{t.pickledAccount=e}),t.sessions=[],e.cryptoStore.getAllEndToEndSessions(r,e=>{t.sessions.push(e)})}),t}))()}getSession(e,t,r,n){this.cryptoStore.getEndToEndSession(e,t,r,e=>{this.unpickleSession(e,n)})}unpickleSession(e,r){var n=new t.Olm.Session;try{n.unpickle(this.pickleKey,e.session);var i=Object.assign({},e,{session:n});r(i)}finally{n.free()}}saveSession(e,t,r){var n=t.session.session_id();c["b"].debug("Saving Olm session ".concat(n," with device ").concat(e,": ").concat(t.session.describe()));var i=Object.assign(t,{session:t.session.pickle(this.pickleKey)});this.cryptoStore.storeEndToEndSession(e,n,i,r)}getUtility(e){var r=new t.Olm.Utility;try{return e(r)}finally{r.free()}}sign(e){var t=this;return o()((function*(){var r;return yield t.cryptoStore.doTxn("readonly",[l["a"].STORE_ACCOUNT],n=>{t.getAccount(n,t=>{r=t.sign(e)})}),r}))()}getOneTimeKeys(){var e=this;return o()((function*(){var t;return yield e.cryptoStore.doTxn("readonly",[l["a"].STORE_ACCOUNT],r=>{e.getAccount(r,e=>{t=JSON.parse(e.one_time_keys())})}),t}))()}maxNumberOfOneTimeKeys(){var e;return null!==(e=this.maxOneTimeKeys)&&void 0!==e?e:-1}markKeysAsPublished(){var e=this;return o()((function*(){yield e.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT],t=>{e.getAccount(t,r=>{r.mark_keys_as_published(),e.storeAccount(t,r)})})}))()}generateOneTimeKeys(e){return this.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT],t=>{this.getAccount(t,r=>{r.generate_one_time_keys(e),this.storeAccount(t,r)})})}generateFallbackKey(){var e=this;return o()((function*(){yield e.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT],t=>{e.getAccount(t,r=>{r.generate_fallback_key(),e.storeAccount(t,r)})})}))()}getFallbackKey(){var e=this;return o()((function*(){var t;return yield e.cryptoStore.doTxn("readonly",[l["a"].STORE_ACCOUNT],r=>{e.getAccount(r,e=>{t=JSON.parse(e.unpublished_fallback_key())})}),t}))()}forgetOldFallbackKey(){var e=this;return o()((function*(){yield e.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT],t=>{e.getAccount(t,r=>{r.forget_old_fallback_key(),e.storeAccount(t,r)})})}))()}createOutboundSession(e,r){var n=this;return o()((function*(){var i;return yield n.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT,l["a"].STORE_SESSIONS],o=>{n.getAccount(o,a=>{var s=new t.Olm.Session;try{s.create_outbound(a,e,r),i=s.session_id(),n.storeAccount(o,a);var c={session:s,lastReceivedMessageTs:Date.now()};n.saveSession(e,c,o)}finally{s.free()}})},c["b"].getChild("[createOutboundSession]")),i}))()}createInboundSession(e,r,n){var i=this;return o()((function*(){if(0!==r)throw new Error("Need messageType == 0 to create inbound session");var o;return yield i.cryptoStore.doTxn("readwrite",[l["a"].STORE_ACCOUNT,l["a"].STORE_SESSIONS],a=>{i.getAccount(a,s=>{var c=new t.Olm.Session;try{c.create_inbound_from(s,e,n),s.remove_one_time_keys(c),i.storeAccount(a,s);var l=c.decrypt(r,n),d={session:c,lastReceivedMessageTs:Date.now()};i.saveSession(e,d,a),o={payload:l,session_id:c.session_id()}}finally{c.free()}})},c["b"].getChild("[createInboundSession]")),o}))()}getSessionIdsForDevice(t){var r=this;return o()((function*(){var n,i=c["b"].getChild("[getSessionIdsForDevice]");if(t in r.sessionsInProgress){i.debug("Waiting for Olm session for ".concat(t," to be created"));try{yield r.sessionsInProgress[t]}catch(e){}}return yield r.cryptoStore.doTxn("readonly",[l["a"].STORE_SESSIONS],e=>{r.cryptoStore.getEndToEndSessions(t,e,e=>{n=Object.keys(e)})},i),n}))()}getSessionIdForDevice(e){var t=arguments,r=this;return o()((function*(){var n=t.length>1&&void 0!==t[1]&&t[1],i=t.length>2?t[2]:void 0,o=yield r.getSessionInfoForDevice(e,n,i);if(0===o.length)return null;for(var a=0,s=1;s<o.length;s++){var c=o[s],l=void 0===c.lastReceivedMessageTs?0:c.lastReceivedMessageTs,d=o[a],u=void 0===d.lastReceivedMessageTs?0:d.lastReceivedMessageTs;(l>u||l===u&&c.sessionId<d.sessionId)&&(a=s)}return o[a].sessionId}))()}getSessionInfoForDevice(t){var r=arguments,n=this;return o()((function*(){var i=r.length>1&&void 0!==r[1]&&r[1],o=r.length>2&&void 0!==r[2]?r[2]:c["b"];if(o=o.getChild("[getSessionInfoForDevice]"),t in n.sessionsInProgress&&!i){o.debug("Waiting for Olm session for ".concat(t," to be created"));try{yield n.sessionsInProgress[t]}catch(e){}}var a=[];return yield n.cryptoStore.doTxn("readonly",[l["a"].STORE_SESSIONS],e=>{n.cryptoStore.getEndToEndSessions(t,e,e=>{var t=Object.keys(e).sort(),r=function(t){n.unpickleSession(e[t],e=>{a.push({lastReceivedMessageTs:e.lastReceivedMessageTs,hasReceivedMessage:e.session.has_received_message(),sessionId:t})})};for(var i of t)r(i)})},o),a}))()}encryptMessage(e,t,r){var n=this;return o()((function*(){var i;return p(r),yield n.cryptoStore.doTxn("readwrite",[l["a"].STORE_SESSIONS],o=>{n.getSession(e,t,o,a=>{var s=a.session.describe();c["b"].log("encryptMessage: Olm Session ID "+t+" to "+e+": "+s),i=a.session.encrypt(r),n.saveSession(e,a,o)})},c["b"].getChild("[encryptMessage]")),i}))()}decryptMessage(e,t,r,n){var i=this;return o()((function*(){var o;return yield i.cryptoStore.doTxn("readwrite",[l["a"].STORE_SESSIONS],a=>{i.getSession(e,t,a,s=>{var l=s.session.describe();c["b"].log("decryptMessage: Olm Session ID "+t+" from "+e+": "+l),o=s.session.decrypt(r,n),s.lastReceivedMessageTs=Date.now(),i.saveSession(e,s,a)})},c["b"].getChild("[decryptMessage]")),o}))()}matchesSession(e,t,r,n){var i=this;return o()((function*(){return 0===r&&(yield i.cryptoStore.doTxn("readonly",[l["a"].STORE_SESSIONS],r=>{i.getSession(e,t,r,e=>{o=e.session.matches_inbound(n)})},c["b"].getChild("[matchesSession]")),o);var o}))()}recordSessionProblem(e,t,r){var n=this;return o()((function*(){c["b"].info("Recording problem on olm session with ".concat(e," of type ").concat(t,". Recreating: ").concat(r)),yield n.cryptoStore.storeEndToEndSessionProblem(e,t,r)}))()}sessionMayHaveProblems(e,t){return this.cryptoStore.getEndToEndSessionProblem(e,t)}filterOutNotifiedErrorDevices(e){return this.cryptoStore.filterOutNotifiedErrorDevices(e)}saveOutboundGroupSession(e){this.outboundGroupSessionStore[e.session_id()]=e.pickle(this.pickleKey)}getOutboundGroupSession(e,r){var n=this.outboundGroupSessionStore[e];if(void 0===n)throw new Error("Unknown outbound group session "+e);var i=new t.Olm.OutboundGroupSession;try{return i.unpickle(this.pickleKey,n),r(i)}finally{i.free()}}createOutboundGroupSession(){var e=new t.Olm.OutboundGroupSession;try{return e.create(),this.saveOutboundGroupSession(e),e.session_id()}finally{e.free()}}encryptGroupMessage(e,t){return c["b"].log("encrypting msg with megolm session ".concat(e)),p(t),this.getOutboundGroupSession(e,e=>{var r=e.encrypt(t);return this.saveOutboundGroupSession(e),r})}getOutboundGroupSessionKey(e){return this.getOutboundGroupSession(e,(function(e){return{chain_index:e.message_index(),key:e.session_key()}}))}unpickleInboundGroupSession(e,r){var n=new t.Olm.InboundGroupSession;try{return n.unpickle(this.pickleKey,e.session),r(n)}finally{n.free()}}getInboundGroupSession(e,t,r,n,i){this.cryptoStore.getEndToEndInboundGroupSession(t,r,n,(t,r)=>{if(null!==t){if(null!==e&&e!==t.room_id)throw new Error("Mismatched room_id for inbound group session (expected "+t.room_id+", was "+e+")");this.unpickleInboundGroupSession(t,e=>{i(e,t,r)})}else i(null,null,r)})}addInboundGroupSession(e,r,n,i,a,s,d){var u=arguments,h=this;return o()((function*(){var o=u.length>7&&void 0!==u[7]?u[7]:{};yield h.cryptoStore.doTxn("readwrite",[l["a"].STORE_INBOUND_GROUP_SESSIONS,l["a"].STORE_INBOUND_GROUP_SESSIONS_WITHHELD,l["a"].STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS],l=>{h.getInboundGroupSession(e,r,i,l,(u,f)=>{var p=new t.Olm.InboundGroupSession;try{if(d?p.import_session(a):p.create(a),i!=p.session_id())throw new Error("Mismatched group session ID from senderKey: "+r);if(u&&(c["b"].log("Update for megolm session ".concat(r,"|").concat(i)),u.first_known_index()<=p.first_known_index())){if(!f.untrusted||o.untrusted)return void c["b"].log("Keeping existing megolm session ".concat(r,"|").concat(i));if(u.first_known_index()<p.first_known_index())return void(u.export_session(p.first_known_index())===p.export_session(p.first_known_index())?(c["b"].info("Upgrading trust of existing megolm session "+"".concat(r,"|").concat(i," based on newly-received trusted session")),f.untrusted=!1,h.cryptoStore.storeEndToEndInboundGroupSession(r,i,f,l)):c["b"].warn("Newly-received megolm session ".concat(r,"|$sessionId}")+" does not match existing session! Keeping existing session"))}c["b"].debug("Storing megolm session ".concat(r,"|").concat(i," with first index ")+p.first_known_index());var v=Object.assign({},o,{room_id:e,session:p.pickle(h.pickleKey),keysClaimed:s,forwardingCurve25519KeyChain:n});h.cryptoStore.storeEndToEndInboundGroupSession(r,i,v,l),!u&&o.sharedHistory&&h.cryptoStore.addSharedHistoryInboundGroupSession(e,r,i,l)}finally{p.free()}})},c["b"].getChild("[addInboundGroupSession]"))}))()}addInboundGroupSessionWithheld(e,t,r,n,i){var a=this;return o()((function*(){yield a.cryptoStore.doTxn("readwrite",[l["a"].STORE_INBOUND_GROUP_SESSIONS_WITHHELD],o=>{a.cryptoStore.storeEndToEndInboundGroupSessionWithheld(t,r,{room_id:e,code:n,reason:i},o)})}))()}decryptGroupMessage(t,r,n,i,a,s){var h=this;return o()((function*(){var o,f=null;if(yield h.cryptoStore.doTxn("readwrite",[l["a"].STORE_INBOUND_GROUP_SESSIONS,l["a"].STORE_INBOUND_GROUP_SESSIONS_WITHHELD],c=>{h.getInboundGroupSession(t,r,n,c,(t,l,p)=>{if(null!==t&&null!==l){var v;try{v=t.decrypt(i)}catch(e){if("OLM.UNKNOWN_MESSAGE_INDEX"===(null===e||void 0===e?void 0:e.message)&&p){var m="m.unverified"===p.code?d["DecryptionFailureCode"].MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE:d["DecryptionFailureCode"].MEGOLM_KEY_WITHHELD;o=new u["a"](m,g(p),{session:r+"|"+n})}else o=e;return}var y=v.plaintext;if(void 0===y)y=v;else{var b=r+"|"+n+"|"+v.message_index;if(b in h.inboundGroupSessionMessageIndexes){var _=h.inboundGroupSessionMessageIndexes[b];if(_.id!==a||_.timestamp!==s)return void(o=new Error("Duplicate message index, possible replay attack: "+b))}h.inboundGroupSessionMessageIndexes[b]={id:a,timestamp:s}}l.session=t.pickle(h.pickleKey),h.cryptoStore.storeEndToEndInboundGroupSession(r,n,l,c),f={result:y,keysClaimed:l.keysClaimed||{},senderKey:r,forwardingCurve25519KeyChain:l.forwardingCurve25519KeyChain||[],untrusted:!!l.untrusted}}else{if(p){var w="m.unverified"===p.code?d["DecryptionFailureCode"].MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE:d["DecryptionFailureCode"].MEGOLM_KEY_WITHHELD;o=new u["a"](w,g(p),{session:r+"|"+n})}f=null}})},c["b"].getChild("[decryptGroupMessage]")),o)throw o;return f}))()}hasInboundSessionKeys(e,t,r){var n=this;return o()((function*(){var i;return yield n.cryptoStore.doTxn("readonly",[l["a"].STORE_INBOUND_GROUP_SESSIONS,l["a"].STORE_INBOUND_GROUP_SESSIONS_WITHHELD],o=>{n.cryptoStore.getEndToEndInboundGroupSession(t,r,o,n=>{null!==n?e!==n.room_id?(c["b"].warn("requested keys for inbound group session ".concat(t,"|")+"".concat(r,", with incorrect room_id ")+"(expected ".concat(n.room_id,", ")+"was ".concat(e,")")),i=!1):i=!0:i=!1})},c["b"].getChild("[hasInboundSessionKeys]")),i}))()}getInboundGroupSessionKey(e,t,r,n){var i=this;return o()((function*(){var o=null;return yield i.cryptoStore.doTxn("readonly",[l["a"].STORE_INBOUND_GROUP_SESSIONS,l["a"].STORE_INBOUND_GROUP_SESSIONS_WITHHELD],a=>{i.getInboundGroupSession(e,t,r,a,(e,t)=>{if(null!==e&&null!==t){void 0===n&&(n=e.first_known_index());var r=e.export_session(n),i=t.keysClaimed||{},a=i.ed25519||null,s=t.forwardingCurve25519KeyChain||[],c="untrusted"in t?t.untrusted:s.length>0;o={chain_index:n,key:r,forwarding_curve25519_key_chain:s,sender_claimed_ed25519_key:a,shared_history:t.sharedHistory||!1,untrusted:c}}else o=null})},c["b"].getChild("[getInboundGroupSessionKey]")),o}))()}exportInboundGroupSession(e,t,r){return this.unpickleInboundGroupSession(r,n=>{var i=n.first_known_index();return{sender_key:e,sender_claimed_keys:r.keysClaimed,room_id:r.room_id,session_id:t,session_key:n.export_session(i),forwarding_curve25519_key_chain:r.forwardingCurve25519KeyChain||[],first_known_index:n.first_known_index(),"org.matrix.msc3061.shared_history":r.sharedHistory||!1}})}getSharedHistoryInboundGroupSessions(e){var t=this;return o()((function*(){var r;return yield t.cryptoStore.doTxn("readonly",[l["a"].STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS],n=>{r=t.cryptoStore.getSharedHistoryInboundGroupSessions(e,n)},c["b"].getChild("[getSharedHistoryInboundGroupSessionsForRoom]")),r}))()}verifySignature(e,t,r){this.getUtility((function(n){n.ed25519_verify(e,t,r)}))}}var m={"m.unverified":"The sender has disabled encrypting to unverified devices.","m.blacklisted":"The sender has blocked you.","m.unauthorised":"You are not authorised to read the message.","m.no_olm":"Unable to establish a secure channel."};function g(e){return e.code&&e.code in m?m[e.code]:e.reason?e.reason:"decryption key withheld"}}).call(this,n("c8ba"))},"31f5":function(t,r,n){"use strict";(function(t,i){n.d(r,"d",(function(){return ne})),n.d(r,"b",(function(){return ie})),n.d(r,"a",(function(){return se})),n.d(r,"c",(function(){return ce}));var o=n("c973"),a=n.n(o),s=n("9523"),c=n.n(s),l=n("d190"),d=n.n(l),u=n("ec26"),h=n("60af"),f=n("0804"),p=n("5b5f"),v=n("31d8"),m=n("75c9"),g=n("a788"),y=n("e1d9"),b=n("2975"),_=n("9d2e"),w=n("c24c"),S=n("4837"),E=n("bcb3"),k=n("3af6"),I=n("aab2"),C=n("504a"),T=n("b7d3"),R=n("87bd"),x=n("b7a0"),O=n("6608"),M=n("7fe8"),A=n("e297"),P=n("3212"),D=n("62a0"),j=n("c889"),L=n("dbc5"),N=n("77db"),U=n("299a"),F=n("976c"),B=n("edaf"),K=n("afe6"),q=n("6aa0"),V=n("936a"),W=n("4b9e"),$=n("866a"),z=n("b83f"),G=n("5cf1"),H=n("1461"),Y=n("881f"),J=n("9c88"),X=n("da1e"),Z=n("3925");function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=y["a"].DeviceVerification,re={[C["b"].NAME]:C["b"],[T["a"].NAME]:T["a"],[C["d"]]:P["a"],[C["c"]]:P["a"]};C["b"].NAME,T["a"].NAME;function ne(){return Boolean(globalThis.Olm)}var ie,oe=36e5,ae=3e5;(function(e){e["DeviceVerificationChanged"]="deviceVerificationChanged",e["UserTrustStatusChanged"]="userTrustStatusChanged",e["UserCrossSigningUpdated"]="userCrossSigningUpdated",e["RoomKeyRequest"]="crypto.roomKeyRequest",e["RoomKeyRequestCancellation"]="crypto.roomKeyRequestCancellation",e["KeyBackupStatus"]="crypto.keyBackupStatus",e["KeyBackupFailed"]="crypto.keyBackupFailed",e["KeyBackupSessionsRemaining"]="crypto.keyBackupSessionsRemaining",e["KeyBackupDecryptionKeyCached"]="crypto.keyBackupDecryptionKeyCached",e["KeySignatureUploadFailure"]="crypto.keySignatureUploadFailure",e["VerificationRequest"]="crypto.verification.request",e["VerificationRequestReceived"]="crypto.verificationRequestReceived",e["Warning"]="crypto.warning",e["WillUpdateDevices"]="crypto.willUpdateDevices",e["DevicesUpdated"]="crypto.devicesUpdated",e["KeysChanged"]="crossSigning.keysChanged",e["LegacyCryptoStoreMigrationProgress"]="crypto.legacyCryptoStoreMigrationProgress"})(ie||(ie={}));class se extends V["b"]{static getOlmVersion(){return v["a"].getOlmVersion()}constructor(t,r,n,i,o,s){var l;if(super(),l=this,this.baseApis=t,this.userId=r,this.deviceId=n,this.clientStore=i,this.cryptoStore=o,c()(this,"backupManager",void 0),c()(this,"crossSigningInfo",void 0),c()(this,"olmDevice",void 0),c()(this,"deviceList",void 0),c()(this,"dehydrationManager",void 0),c()(this,"secretStorage",void 0),c()(this,"roomList",void 0),c()(this,"reEmitter",void 0),c()(this,"verificationMethods",void 0),c()(this,"supportedAlgorithms",void 0),c()(this,"outgoingRoomKeyRequestManager",void 0),c()(this,"toDeviceVerificationRequests",void 0),c()(this,"inRoomVerificationRequests",void 0),c()(this,"trustCrossSignedDevices",!0),c()(this,"lastOneTimeKeyCheck",null),c()(this,"oneTimeKeyCheckInProgress",!1),c()(this,"roomEncryptors",new Map),c()(this,"roomDecryptors",new Map),c()(this,"deviceKeys",{}),c()(this,"globalBlacklistUnverifiedDevices",!1),c()(this,"globalErrorOnUnknownDevices",!0),c()(this,"receivedRoomKeyRequests",[]),c()(this,"receivedRoomKeyRequestCancellations",[]),c()(this,"processingRoomKeyRequests",!1),c()(this,"lazyLoadMembers",!1),c()(this,"roomDeviceTrackingState",{}),c()(this,"forceNewSessionRetryTime",new z["b"](()=>new z["b"](()=>0))),c()(this,"sendKeyRequestsImmediately",!1),c()(this,"oneTimeKeyCount",void 0),c()(this,"needsNewFallback",void 0),c()(this,"fallbackCleanup",void 0),c()(this,"onDeviceListUserCrossSigningUpdated",function(){var e=a()((function*(e){if(e===l.userId){var t=l.deviceList.getStoredCrossSigningForUser(e),r=t?t.getId():null,n=l.crossSigningInfo.getId(),i=n!==r;n&&r&&!i?yield l.checkOwnCrossSigningTrust():(l.storeTrustedSelfKeys(null),l.emit(ie.KeysChanged,{}),l.emit(ie.UserTrustStatusChanged,l.userId,l.checkUserTrust(e)))}else{yield l.checkDeviceVerifications(e);var o=l.deviceList.getStoredCrossSigningForUser(e);o&&(o.updateCrossSigningVerifiedBefore(l.checkUserTrust(e).isCrossSigningVerified()),l.deviceList.setRawStoredCrossSigningForUser(e,o.toStorage())),l.emit(ie.UserTrustStatusChanged,e,l.checkUserTrust(e))}}));return function(t){return e.apply(this,arguments)}}()),c()(this,"onMembership",(t,r,n)=>{try{this.onRoomMembership(t,r,n)}catch(e){p["b"].error("Error handling membership change:",e)}}),c()(this,"onToDeviceEvent",t=>{try{p["b"].log("received to-device ".concat(t.getType()," from: ")+"".concat(t.getSender()," id: ").concat(t.getContent()[h["k"]])),"m.room_key"==t.getType()||"m.forwarded_room_key"==t.getType()?this.onRoomKeyEvent(t):"m.room_key_request"==t.getType()?this.onRoomKeyRequestEvent(t):"m.secret.request"===t.getType()?this.secretStorage.onRequestReceived(t):"m.secret.send"===t.getType()?this.secretStorage.onSecretReceived(t):"m.room_key.withheld"===t.getType()?this.onRoomKeyWithheldEvent(t):t.getContent().transaction_id?this.onKeyVerificationMessage(t):"m.bad.encrypted"===t.getContent().msgtype?this.onToDeviceBadEncrypted(t):(t.isBeingDecrypted()||t.shouldAttemptDecryption())&&(t.isBeingDecrypted()||t.attemptDecryption(this),t.once(B["c"].Decrypted,e=>{this.onToDeviceEvent(e)}))}catch(e){p["b"].error("Error handling toDeviceEvent:",e)}}),c()(this,"onTimelineEvent",(function(e,t,r,n){var{liveEvent:i=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(M["a"].validateEvent(e,l.baseApis)){var o=e=>{var t=new M["a"](l.baseApis,e.getRoomId());return new O["g"](t,l.verificationMethods,l.baseApis)};l.handleVerificationEvent(e,l.inRoomVerificationRequests,o,i)}})),p["b"].debug("Crypto: initialising roomlist..."),this.roomList=new q["a"](o),this.reEmitter=new f["b"](this),s)for(var d of(this.verificationMethods=new Map,s))"string"===typeof d?re[d]&&this.verificationMethods.set(d,re[d]):d["NAME"]?this.verificationMethods.set(d["NAME"],d):p["b"].warn("Excluding unknown verification method ".concat(d));else this.verificationMethods=new Map(Object.entries(re));this.backupManager=new N["a"](t,a()((function*(){var e=yield l.getSessionBackupPrivateKey();if(e)return e;var t=yield l.secretStorage.get("m.megolm_backup.v1");if(t){var r=ce(t);if(r){var n=yield l.secretStorage.getKey();yield l.secretStorage.store("m.megolm_backup.v1",r,[n[0]])}return Object(X["a"])(r||t)}if(l.baseApis.cryptoCallbacks&&l.baseApis.cryptoCallbacks.getBackupKey)return l.baseApis.cryptoCallbacks.getBackupKey();throw new Error("Unable to get private key")}))),this.olmDevice=new v["a"](o),this.deviceList=new g["a"](t,o,this.olmDevice),this.deviceList.on(ie.UserCrossSigningUpdated,this.onDeviceListUserCrossSigningUpdated),this.reEmitter.reEmit(this.deviceList,[ie.DevicesUpdated,ie.WillUpdateDevices]),this.supportedAlgorithms=Array.from(b["a"].keys()),this.outgoingRoomKeyRequestManager=new k["a"](t,this.deviceId,this.cryptoStore),this.toDeviceVerificationRequests=new A["b"],this.inRoomVerificationRequests=new M["b"];var u=this.baseApis.cryptoCallbacks||{},m=Object(_["d"])(o,this.olmDevice);this.crossSigningInfo=new _["a"](r,u,m),this.secretStorage=new S["a"](t,u,t),this.dehydrationManager=new L["b"](this),!u.getCrossSigningKey&&u.getSecretStorageKey&&(u.getCrossSigningKey=function(){var e=a()((function*(e){return _["a"].getFromSecretStorage(e,l.secretStorage)}));return function(t){return e.apply(this,arguments)}}())}init(){var e=arguments,r=this;return a()((function*(){var{exportedOlmDevice:n,pickleKey:i}=e.length>0&&void 0!==e[0]?e[0]:{};p["b"].log("Crypto: initialising Olm..."),yield t.Olm.init(),p["b"].log(n?"Crypto: initialising Olm device from exported device...":"Crypto: initialising Olm device..."),yield r.olmDevice.init({fromExportedDevice:n,pickleKey:i}),p["b"].log("Crypto: loading device list..."),yield r.deviceList.load(),r.deviceKeys["ed25519:"+r.deviceId]=r.olmDevice.deviceEd25519Key,r.deviceKeys["curve25519:"+r.deviceId]=r.olmDevice.deviceCurve25519Key,p["b"].log("Crypto: fetching own devices...");var o=r.deviceList.getRawStoredDevicesForUser(r.userId);if(o||(o={}),!o[r.deviceId]){p["b"].log("Crypto: adding this device to the store...");var a={keys:r.deviceKeys,algorithms:r.supportedAlgorithms,verified:te.VERIFIED,known:!0};o[r.deviceId]=a,r.deviceList.storeDevicesForUser(r.userId,o),r.deviceList.saveIfDirty()}yield r.cryptoStore.doTxn("readonly",[I["a"].STORE_ACCOUNT],e=>{r.cryptoStore.getCrossSigningKeys(e,e=>{e&&0!==Object.keys(e).length&&(p["b"].log("Loaded cross-signing public keys from crypto store"),r.crossSigningInfo.setKeys(e))})}),r.deviceList.startTrackingDeviceList(r.userId),p["b"].debug("Crypto: initialising roomlist..."),yield r.roomList.init(),p["b"].log("Crypto: checking for key backup..."),r.backupManager.checkAndStart()}))()}getVersion(){var e=se.getOlmVersion();return"Olm ".concat(e[0],".").concat(e[1],".").concat(e[2])}getTrustCrossSignedDevices(){return this.trustCrossSignedDevices}getCryptoTrustCrossSignedDevices(){return this.trustCrossSignedDevices}setTrustCrossSignedDevices(e){for(var t of(this.trustCrossSignedDevices=e,this.deviceList.getKnownUserIds())){var r=this.deviceList.getRawStoredDevicesForUser(t);for(var n of Object.keys(r)){var i=this.checkDeviceTrust(t,n);if(!i.isLocallyVerified()&&i.isCrossSigningVerified()){var o=this.deviceList.getStoredDevice(t,n);this.emit(ie.DeviceVerificationChanged,t,n,o)}}}}setCryptoTrustCrossSignedDevices(e){this.setTrustCrossSignedDevices(e)}createRecoveryKeyFromPassphrase(e){return a()((function*(){var r=new t.Olm.PkDecryption;try{if(e){var n=yield Object(R["b"])(e);r.init_with_private_key(n.key);var i=r.get_private_key();return{keyInfo:{passphrase:{algorithm:"m.pbkdf2",iterations:n.iterations,salt:n.salt}},privateKey:i,encodedPrivateKey:Object(x["b"])(i)}}r.generate_key();var o=r.get_private_key();return{privateKey:o,encodedPrivateKey:Object(x["b"])(o)}}finally{null===r||void 0===r||r.free()}}))()}userHasCrossSigningKeys(){var e=arguments,t=this;return a()((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:t.userId;return yield t.downloadKeys([r]),null!==t.deviceList.getStoredCrossSigningForUser(r)}))()}isCrossSigningReady(){var e=this;return a()((function*(){var t=e.crossSigningInfo.getId(),r=(yield e.crossSigningInfo.isStoredInKeyCache())||(yield e.crossSigningInfo.isStoredInSecretStorage(e.secretStorage));return!(!t||!r)}))()}isSecretStorageReady(){var e=this;return a()((function*(){var t=yield e.secretStorage.hasKey(),r=yield e.crossSigningInfo.isStoredInSecretStorage(e.secretStorage),n=!e.backupManager.getKeyBackupEnabled()||(yield e.baseApis.isKeyBackupKeyStored());return!!(t&&r&&n)}))()}getCrossSigningStatus(){var e=this;return a()((function*(){var t,r,n,i=Boolean(e.crossSigningInfo.getId()),o=Boolean(yield e.crossSigningInfo.isStoredInSecretStorage(e.secretStorage)),a=e.crossSigningInfo.getCacheCallbacks(),s=Boolean(yield null===(t=a.getCrossSigningKeyCache)||void 0===t?void 0:t.call(a,"master")),c=Boolean(yield null===(r=a.getCrossSigningKeyCache)||void 0===r?void 0:r.call(a,"self_signing")),l=Boolean(yield null===(n=a.getCrossSigningKeyCache)||void 0===n?void 0:n.call(a,"user_signing"));return{publicKeysOnDevice:i,privateKeysInSecretStorage:o,privateKeysCachedLocally:{masterKey:s,selfSigningKey:c,userSigningKey:l}}}))()}bootstrapCrossSigning(){var e=arguments,t=this;return a()((function*(){var{authUploadDeviceSigningKeys:r,setupNewCrossSigning:n}=e.length>0&&void 0!==e[0]?e[0]:{};p["b"].log("Bootstrapping cross-signing");var i=t.baseApis.cryptoCallbacks,o=new w["a"](t.baseApis.store.accountData,i),s=new _["a"](t.userId,o.crossSigningCallbacks,o.crossSigningCallbacks),c=function(){var e=a()((function*(){s.resetKeys(),yield t.signObject(s.keys.master),o.addCrossSigningKeys(r,s.keys);var e=t.deviceList.getStoredDevice(t.userId,t.deviceId),n=yield s.signDevice(t.userId,e);o.addKeySignature(t.userId,t.deviceId,n),t.backupManager.backupInfo&&(yield s.signObject(t.backupManager.backupInfo.auth_data,"master"),o.addSessionBackup(t.backupManager.backupInfo))}));return function(){return e.apply(this,arguments)}}(),l=t.crossSigningInfo.getId(),d=yield t.crossSigningInfo.isStoredInKeyCache(),u=yield t.crossSigningInfo.isStoredInSecretStorage(t.secretStorage),h=d||u;p["b"].log({setupNewCrossSigning:n,publicKeysOnDevice:l,privateKeysInCache:d,privateKeysInStorage:u,privateKeysExistSomewhere:h}),!h||n?(p["b"].log("Cross-signing private keys not found locally or in secret storage, creating new keys"),yield c()):l&&d?p["b"].log("Cross-signing public keys trusted and private keys found locally"):u&&(p["b"].log("Cross-signing private keys not found locally, but they are available in secret storage, reading storage and caching locally"),yield t.checkOwnCrossSigningTrust({allowPrivateKeyRequests:!0}));var f=o.crossSigningCallbacks.privateKeys;if(f.size&&!t.baseApis.cryptoCallbacks.saveCrossSigningKeys){var v=new G["ServerSideSecretStorageImpl"](o.accountDataClientAdapter,o.ssssCryptoCallbacks);(yield v.hasKey())&&(p["b"].log("Storing new cross-signing private keys in secret storage"),yield _["a"].storeInSecretStorage(f,v))}var m=o.buildOperation();yield m.apply(t),yield o.persist(t),p["b"].log("Cross-signing ready")}))()}bootstrapSecretStorage(){var t=arguments,r=this;return a()((function*(){var{createSecretStorageKey:n=a()((function*(){return{}})),keyBackupInfo:i,setupNewKeyBackup:o,setupNewSecretStorage:s,getKeyBackupPassphrase:c}=t.length>0&&void 0!==t[0]?t[0]:{};p["b"].log("Bootstrapping Secure Secret Storage");var l=r.baseApis.cryptoCallbacks,d=new w["a"](r.baseApis.store.accountData,l),u=new G["ServerSideSecretStorageImpl"](d.accountDataClientAdapter,d.ssssCryptoCallbacks),h=null,f=function(){var e=a()((function*(e){var{keyId:t,keyInfo:r}=yield u.addKey(G["SECRET_STORAGE_ALGORITHM_V1_AES"],e);return d.ssssCryptoCallbacks.addPrivateKey(t,r,e.key),yield u.setDefaultKeyId(t),t}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=a()((function*(e,t){if(!t.mac){var n,i,o=yield null===(n=(i=r.baseApis.cryptoCallbacks).getSecretStorageKey)||void 0===n?void 0:n.call(i,{keys:{[e]:t}},"");if(o){var a=o[1];d.ssssCryptoCallbacks.addPrivateKey(e,t,a);var{iv:s,mac:c}=yield Object(j["a"])(a);t.iv=s,t.mac=c,yield d.setAccountData("m.secret_storage.key.".concat(e),t)}}}));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var t=a()((function*(t){if(r.crossSigningInfo.getId()&&(yield r.crossSigningInfo.isStoredInKeyCache("master")))try{p["b"].log("Adding cross-signing signature to key backup"),yield r.crossSigningInfo.signObject(t,"master")}catch(e){p["b"].error("Signing key backup with cross-signing keys failed",e)}else p["b"].warn("Cross-signing keys not available, skipping signature on key backup")}));return function(e){return t.apply(this,arguments)}}(),g=yield r.secretStorage.getKey(),[y,b]=g||[null,null],S=!s&&b&&b.algorithm===G["SECRET_STORAGE_ALGORITHM_V1_AES"];if(p["b"].log({keyBackupInfo:i,setupNewKeyBackup:o,setupNewSecretStorage:s,storageExists:S,oldKeyInfo:b}),S||i)if(!S&&i){p["b"].log("Secret storage does not exist, using key backup key");var E=(yield r.getSessionBackupPrivateKey())||(yield null===c||void 0===c?void 0:c()),k={key:E};i.auth_data.private_key_salt&&i.auth_data.private_key_iterations&&(k.passphrase={algorithm:"m.pbkdf2",iterations:i.auth_data.private_key_iterations,salt:i.auth_data.private_key_salt,bits:256}),h=yield f(k),yield u.store("m.megolm_backup.v1",Object(X["b"])(E),[h]),yield m(i.auth_data),d.addSessionBackup(i)}else p["b"].log("Secret storage exists"),b&&b.algorithm===G["SECRET_STORAGE_ALGORITHM_V1_AES"]&&(yield v(y,b));else{p["b"].log("Secret storage does not exist, creating new storage key");var{keyInfo:I,privateKey:C}=yield n();h=yield f({passphrase:null===I||void 0===I?void 0:I.passphrase,key:C,name:null===I||void 0===I?void 0:I.name})}if(!r.baseApis.cryptoCallbacks.saveCrossSigningKeys&&(yield r.isCrossSigningReady())&&(h||!(yield r.crossSigningInfo.isStoredInSecretStorage(u)))){p["b"].log("Copying cross-signing private keys from cache to secret storage");var T=yield r.crossSigningInfo.getCrossSigningKeysFromCache();yield _["a"].storeInSecretStorage(T,u)}if(o&&!i){p["b"].log("Creating new message key backup version");var R=yield r.baseApis.prepareKeyBackupVersion(null,{secureSecretStorage:!1}),O=Object(x["a"])(R.recovery_key);yield u.store("m.megolm_backup.v1",Object(X["b"])(O));var M={algorithm:R.algorithm,auth_data:R.auth_data};yield m(M.auth_data),yield r.signObject(M.auth_data),d.addSessionBackup(M)}var A=yield u.get("m.megolm_backup.v1");if(A){p["b"].info("Got session backup key from secret storage: caching");var P=ce(A);if(P){var D=h||y;yield u.store("m.megolm_backup.v1",P,D?[D]:null)}var L=new Uint8Array(Object(X["a"])(P||A));d.addSessionBackupPrivateKeyToCache(L)}else if(r.backupManager.getKeyBackupEnabled()){var N=(yield r.getSessionBackupPrivateKey())||(yield null===c||void 0===c?void 0:c());if(!N)return void p["b"].error("Key backup is enabled but couldn't get key backup key!");p["b"].info("Got session backup key from cache/user that wasn't in SSSS: saving to SSSS"),yield u.store("m.megolm_backup.v1",Object(X["b"])(N))}var U=d.buildOperation();yield U.apply(r),yield d.persist(r),p["b"].log("Secure Secret Storage ready")}))()}resetKeyBackup(){var e=this;return a()((function*(){yield e.backupManager.deleteAllKeyBackupVersions();var t=yield e.backupManager.prepareKeyBackupVersion();yield e.signObject(t.auth_data);var{version:r}=yield e.baseApis.http.authedRequest(J["i"].Post,"/room_keys/version",void 0,t,{prefix:J["a"].V3});p["b"].log("Created backup version ".concat(r));var n=t.privateKey;yield e.secretStorage.store("m.megolm_backup.v1",Object(X["b"])(n)),yield e.storeSessionBackupPrivateKey(n),yield e.backupManager.checkAndStart(),yield e.backupManager.scheduleAllGroupSessionsForBackup()}))()}deleteKeyBackupVersion(e){var t=this;return a()((function*(){yield t.backupManager.deleteKeyBackupVersion(e)}))()}addSecretStorageKey(e,t,r){return this.secretStorage.addKey(e,t,r)}hasSecretStorageKey(e){return this.secretStorage.hasKey(e)}getSecretStorageKey(e){return this.secretStorage.getKey(e)}storeSecret(e,t,r){return this.secretStorage.store(e,t,r)}getSecret(e){return this.secretStorage.get(e)}isSecretStored(e){return this.secretStorage.isStored(e)}requestSecret(e,t){return t||(t=Object.keys(this.deviceList.getRawStoredDevicesForUser(this.userId))),this.secretStorage.request(e,t)}getDefaultSecretStorageKeyId(){return this.secretStorage.getDefaultKeyId()}setDefaultSecretStorageKeyId(e){return this.secretStorage.setDefaultKeyId(e)}checkSecretStorageKey(e,t){return this.secretStorage.checkKey(e,t)}checkSecretStoragePrivateKey(e,r){var n=null;try{n=new t.Olm.PkDecryption;var i=n.init_with_private_key(e);return i===r}finally{var o;null===(o=n)||void 0===o||o.free()}}getSessionBackupPrivateKey(){var e=this;return a()((function*(){var t=yield new Promise(t=>{e.cryptoStore.doTxn("readonly",[I["a"].STORE_ACCOUNT],r=>{e.cryptoStore.getSecretStorePrivateKey(r,t,"m.megolm_backup.v1")})}),r=null;if("string"===typeof t&&(r=new Uint8Array(Object(X["a"])(ce(t)||t)),yield e.storeSessionBackupPrivateKey(r)),t&&"object"===typeof t&&"ciphertext"in t){var n=i.from(e.olmDevice.pickleKey),o=yield Object(j["b"])(t,n,"m.megolm_backup.v1");r=Object(X["a"])(o)}return r}))()}storeSessionBackupPrivateKey(e,t){var r=this;return a()((function*(){if(!(e instanceof Uint8Array))throw new Error("storeSessionBackupPrivateKey expects Uint8Array, got ".concat(e));var t=i.from(r.olmDevice.pickleKey),n=yield Object(j["c"])(Object(X["b"])(e),t,"m.megolm_backup.v1");return r.cryptoStore.doTxn("readwrite",[I["a"].STORE_ACCOUNT],e=>{r.cryptoStore.storeSecretStorePrivateKey(e,"m.megolm_backup.v1",n)})}))()}getActiveSessionBackupVersion(){var e=this;return a()((function*(){var t;return e.backupManager.getKeyBackupEnabled()&&null!==(t=e.backupManager.version)&&void 0!==t?t:null}))()}isKeyBackupTrusted(e){var t=this;return a()((function*(){var r=yield t.backupManager.isKeyBackupTrusted(e);return Object(N["c"])(r)}))()}checkKeyBackupAndEnable(){var e=this;return a()((function*(){var t=yield e.backupManager.checkKeyBackup();return t&&t.backupInfo?{backupInfo:t.backupInfo,trustInfo:Object(N["c"])(t.trustInfo)}:null}))()}checkCrossSigningPrivateKey(e,r){var n=null;try{n=new t.Olm.PkSigning;var i=n.init_with_seed(e);return i===r}finally{var o;null===(o=n)||void 0===o||o.free()}}afterCrossSigningLocalKeyChange(){var t=this;return a()((function*(){p["b"].info("Starting cross-signing key change post-processing");var r=t.deviceList.getStoredDevice(t.userId,t.deviceId),n=yield t.crossSigningInfo.signDevice(t.userId,r);p["b"].info("Starting background key sig upload for ".concat(t.deviceId));var i=e=>{var{shouldEmit:r=!1}=e;return t.baseApis.uploadKeySignatures({[t.userId]:{[t.deviceId]:n}}).then(e=>{var{failures:n}=e||{};if(Object.keys(n||[]).length>0)throw r&&t.baseApis.emit(ie.KeySignatureUploadFailure,n,"afterCrossSigningLocalKeyChange",i),new D["d"]("Key upload failed",{failures:n});p["b"].info("Finished background key sig upload for ".concat(t.deviceId))}).catch(e=>{p["b"].error("Error during background key sig upload for ".concat(t.deviceId),e)})};i({shouldEmit:!0});var o=t.baseApis.cryptoCallbacks.shouldUpgradeDeviceVerifications;if(o){p["b"].info("Starting device verification upgrade");var a={};for(var[s,c]of Object.entries(t.deviceList.crossSigningInfo)){var l=yield t.checkForDeviceVerificationUpgrade(s,_["a"].fromStorage(c,s));l&&(a[s]=l)}if(Object.keys(a).length>0){p["b"].info("Found ".concat(Object.keys(a).length," verif users to upgrade"));try{var d=yield o({users:a});if(d)for(var u of d)u in a&&(yield t.baseApis.setDeviceVerified(u,a[u].crossSigningInfo.getId()))}catch(e){p["b"].log("shouldUpgradeDeviceVerifications threw an error: not upgrading",e)}}p["b"].info("Finished device verification upgrade")}p["b"].info("Finished cross-signing key change post-processing")}))()}checkForDeviceVerificationUpgrade(e,t){var r=this;return a()((function*(){var n=r.crossSigningInfo.checkUserTrust(t);if(t.firstUse&&!n.isVerified()){var i=r.deviceList.getRawStoredDevicesForUser(e),o=yield r.checkForValidDeviceSignature(e,t.keys.master,i);if(o.length)return{devices:o.map(e=>y["a"].fromStorage(i[e],e)),crossSigningInfo:t}}}))()}checkForValidDeviceSignature(t,r,n){var i=this;return a()((function*(){var o=[];if(n&&r.signatures&&r.signatures[t])for(var a of Object.keys(r.signatures[t])){var[,s]=a.split(":",2);if(s in n&&n[s].verified===te.VERIFIED)try{yield m["verifySignature"](i.olmDevice,r,t,s,n[s].keys[a]),o.push(s)}catch(e){}}return o}))()}getCrossSigningKeyId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E["a"].Master;return Promise.resolve(this.getCrossSigningId(e))}getCrossSigningId(e){return this.crossSigningInfo.getId(e)}getStoredCrossSigningForUser(e){return this.deviceList.getStoredCrossSigningForUser(e)}checkUserTrust(e){var t=this.deviceList.getStoredCrossSigningForUser(e);return t?this.crossSigningInfo.checkUserTrust(t):new _["c"](!1,!1,!1)}getUserVerificationStatus(e){var t=this;return a()((function*(){return t.checkUserTrust(e)}))()}getDeviceVerificationStatus(e,t){var r=this;return a()((function*(){var n=r.deviceList.getStoredDevice(e,t);return n?r.checkDeviceInfoTrust(e,n):null}))()}checkDeviceTrust(e,t){var r=this.deviceList.getStoredDevice(e,t);return this.checkDeviceInfoTrust(e,r)}checkDeviceInfoTrust(e,t){var r=!(null===t||void 0===t||!t.isVerified()),n=this.deviceList.getStoredCrossSigningForUser(e);if(t&&n){var i=this.trustCrossSignedDevices||e===this.userId;return this.crossSigningInfo.checkDeviceTrust(n,t,r,i)}return new _["b"](!1,!1,r,!1)}checkIfOwnDeviceCrossSigned(e){var t,r=this.deviceList.getStoredDevice(this.userId,e);if(!r)return!1;var n=this.deviceList.getStoredCrossSigningForUser(this.userId);return null!==(t=null===n||void 0===n?void 0:n.checkDeviceTrust(n,r,!1,!0).isCrossSigningVerified())&&void 0!==t&&t}checkOwnCrossSigningTrust(){var e=arguments,t=this;return a()((function*(){var{allowPrivateKeyRequests:r=!1}=e.length>0&&void 0!==e[0]?e[0]:{},n=t.userId;yield t.downloadKeys([t.userId]);var i=yield t.crossSigningInfo.getCrossSigningKeysFromCache(),o=t.deviceList.getStoredCrossSigningForUser(n);if(o){var a=o.getId(),s=t.crossSigningInfo.getId()!==a,c=o.getId()&&!i.has("master");if(s&&p["b"].info("Got new master public key",a),r&&(s||c)){p["b"].info("Attempting to retrieve cross-signing master private key");var l=null;try{var d=yield t.crossSigningInfo.getCrossSigningKey("master",a);l=d[1],p["b"].info("Got cross-signing master private key")}finally{var u;null===(u=l)||void 0===u||u.free()}}var h=t.crossSigningInfo.getId("self_signing"),f=t.crossSigningInfo.getId("user_signing");t.storeTrustedSelfKeys(o.keys);var v=h!==o.getId("self_signing"),m=f!==o.getId("user_signing"),g=o.getId("self_signing")&&!i.has("self_signing"),y=o.getId("user_signing")&&!i.has("user_signing"),b={};if(v&&p["b"].info("Got new self-signing key",o.getId("self_signing")),r&&(v||g)){p["b"].info("Attempting to retrieve cross-signing self-signing private key");var _=null;try{var w=yield t.crossSigningInfo.getCrossSigningKey("self_signing",o.getId("self_signing"));_=w[1],p["b"].info("Got cross-signing self-signing private key")}finally{var S;null===(S=_)||void 0===S||S.free()}var E=t.deviceList.getStoredDevice(t.userId,t.deviceId),k=yield t.crossSigningInfo.signDevice(t.userId,E);b[t.deviceId]=k}if(m&&p["b"].info("Got new user-signing key",o.getId("user_signing")),r&&(m||y)){p["b"].info("Attempting to retrieve cross-signing user-signing private key");var I=null;try{var C=yield t.crossSigningInfo.getCrossSigningKey("user_signing",o.getId("user_signing"));I=C[1],p["b"].info("Got cross-signing user-signing private key")}finally{var T;null===(T=I)||void 0===T||T.free()}}if(s){var R=t.crossSigningInfo.keys.master;yield t.signObject(R);var x=R.signatures[t.userId]["ed25519:"+t.deviceId];b[t.crossSigningInfo.getId()]=Object.assign({},R,{signatures:{[t.userId]:{["ed25519:"+t.deviceId]:x}}})}var O=Object.keys(b);if(O.length){var M=e=>{var{shouldEmit:r=!1}=e;return p["b"].info("Starting background key sig upload for ".concat(O)),t.baseApis.uploadKeySignatures({[t.userId]:b}).then(e=>{var{failures:n}=e||{};if(p["b"].info("Finished background key sig upload for ".concat(O)),Object.keys(n||[]).length>0)throw r&&t.baseApis.emit(ie.KeySignatureUploadFailure,n,"checkOwnCrossSigningTrust",M),new D["d"]("Key upload failed",{failures:n})}).catch(e=>{p["b"].error("Error during background key sig upload for ".concat(O),e)})};M({shouldEmit:!0})}t.emit(ie.UserTrustStatusChanged,n,t.checkUserTrust(n)),s&&(t.emit(ie.KeysChanged,{}),yield t.afterCrossSigningLocalKeyChange()),yield t.backupManager.checkKeyBackup()}else p["b"].error("Got cross-signing update event for user "+n+" but no new cross-signing information found!")}))()}getBackupDecryptor(e,t){return a()((function*(){if(!(t instanceof Uint8Array))throw new Error("getBackupDecryptor expects Uint8Array");var r=yield N["a"].makeAlgorithm(e,a()((function*(){return t})));return(yield r.keyMatches(t))?new N["b"](r):Promise.reject(new J["f"]({errcode:K["d"].RESTORE_BACKUP_ERROR_BAD_KEY}))}))()}importBackedUpRoomKeys(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.source="backup",this.importRoomKeys(e,r)}storeTrustedSelfKeys(e){var t=this;return a()((function*(){e?t.crossSigningInfo.setKeys(e):t.crossSigningInfo.clearKeys(),yield t.cryptoStore.doTxn("readwrite",[I["a"].STORE_ACCOUNT],e=>{t.cryptoStore.storeCrossSigningKeys(e,t.crossSigningInfo.keys)})}))()}checkDeviceVerifications(e){var t=this;return a()((function*(){var r=t.baseApis.cryptoCallbacks.shouldUpgradeDeviceVerifications;if(r){if(p["b"].info("Starting device verification upgrade for ".concat(e)),t.crossSigningInfo.keys.user_signing){var n=t.deviceList.getStoredCrossSigningForUser(e);if(n){var i=yield t.checkForDeviceVerificationUpgrade(e,n);if(i){var o=yield r({users:{[e]:i}});o.includes(e)&&(yield t.baseApis.setDeviceVerified(e,n.getId()))}}}p["b"].info("Finished device verification upgrade for ".concat(e))}}))()}enableLazyLoading(){this.lazyLoadMembers=!0}registerEventHandlers(e){e.on(F["b"].Membership,this.onMembership),e.on(K["b"].ToDeviceEvent,this.onToDeviceEvent),e.on(U["d"].Timeline,this.onTimelineEvent),e.on(B["c"].Decrypted,this.onTimelineEvent)}start(){p["b"].warn("MatrixClient.crypto.start() is deprecated")}stop(){this.outgoingRoomKeyRequestManager.stop(),this.deviceList.stop(),this.dehydrationManager.stop(),this.backupManager.stop()}getDeviceEd25519Key(){return this.olmDevice.deviceEd25519Key}getDeviceCurve25519Key(){return this.olmDevice.deviceCurve25519Key}getOwnDeviceKeys(){var e=this;return a()((function*(){if(!e.olmDevice.deviceCurve25519Key)throw new Error("Curve25519 key not yet created");if(!e.olmDevice.deviceEd25519Key)throw new Error("Ed25519 key not yet created");return{ed25519:e.olmDevice.deviceEd25519Key,curve25519:e.olmDevice.deviceCurve25519Key}}))()}setGlobalBlacklistUnverifiedDevices(e){this.globalBlacklistUnverifiedDevices=e}getGlobalBlacklistUnverifiedDevices(){return this.globalBlacklistUnverifiedDevices}uploadDeviceKeys(){var e={algorithms:this.supportedAlgorithms,device_id:this.deviceId,keys:this.deviceKeys,user_id:this.userId};return this.signObject(e).then(()=>this.baseApis.uploadKeysRequest({device_keys:e}))}getNeedsNewFallback(){return!!this.needsNewFallback}maybeUploadOneTimeKeys(){var e=this,t=6e4,r=5;if(!this.oneTimeKeyCheckInProgress){var n=Date.now();if(!(null!==this.lastOneTimeKeyCheck&&n-this.lastOneTimeKeyCheck<t)){this.lastOneTimeKeyCheck=n;var i=this.olmDevice.maxNumberOfOneTimeKeys(),o=Math.floor(i/2),s=function(){var t=a()((function*(t){while(o>t||e.getNeedsNewFallback()){if(o>t){p["b"].info("generating oneTimeKeys");var n=Math.min(o-t,r);yield e.olmDevice.generateOneTimeKeys(n)}if(e.getNeedsNewFallback()){var i=yield e.olmDevice.getFallbackKey();i.curve25519&&0!=Object.keys(i.curve25519).length||(p["b"].info("generating fallback key"),e.fallbackCleanup&&(clearTimeout(e.fallbackCleanup),delete e.fallbackCleanup),yield e.olmDevice.generateFallbackKey())}p["b"].info("calling uploadOneTimeKeys");var a=yield e.uploadOneTimeKeys();if(!a.one_time_key_counts||!a.one_time_key_counts.signed_curve25519)throw new Error("response for uploading keys does not contain one_time_key_counts.signed_curve25519");t=a.one_time_key_counts.signed_curve25519}}));return function(e){return t.apply(this,arguments)}}();this.oneTimeKeyCheckInProgress=!0,Promise.resolve().then(()=>void 0!==this.oneTimeKeyCount?Promise.resolve(this.oneTimeKeyCount):this.baseApis.uploadKeysRequest({}).then(e=>e.one_time_key_counts.signed_curve25519||0)).then(e=>s(e)).catch(e=>{p["b"].error("Error uploading one-time keys",e.stack||e)}).finally(()=>{this.oneTimeKeyCount=void 0,this.oneTimeKeyCheckInProgress=!1})}}}uploadOneTimeKeys(){var e=this;return a()((function*(){var t,r=[];if(e.getNeedsNewFallback()){t={};var n=yield e.olmDevice.getFallbackKey();for(var[i,o]of Object.entries(n.curve25519)){var a={key:o,fallback:!0};t["signed_curve25519:"+i]=a,r.push(e.signObject(a))}e.needsNewFallback=!1}var s=yield e.olmDevice.getOneTimeKeys(),c={};for(var l in s.curve25519)if(s.curve25519.hasOwnProperty(l)){var d={key:s.curve25519[l]};c["signed_curve25519:"+l]=d,r.push(e.signObject(d))}yield Promise.all(r);var u={one_time_keys:c};t&&(u["org.matrix.msc2732.fallback_keys"]=t,u["fallback_keys"]=t);var h=yield e.baseApis.uploadKeysRequest(u);return t&&(e.fallbackCleanup=setTimeout(()=>{delete e.fallbackCleanup,e.olmDevice.forgetOldFallbackKey()},36e5)),yield e.olmDevice.markKeysAsPublished(),h}))()}downloadKeys(e,t){return this.deviceList.downloadKeys(e,!!t)}getStoredDevicesForUser(e){return this.deviceList.getStoredDevicesForUser(e)}getUserDeviceInfo(e){var t=arguments,r=this;return a()((function*(){var n=t.length>1&&void 0!==t[1]&&t[1],i=new Map,o=[],a=function*(e){var t=yield r.getStoredDevicesForUser(e);if(t){var n=new Map(t.map(t=>[t.deviceId,Object(Y["a"])(t,e)]));i.set(e,n)}else o.push(e)};for(var s of e)yield*a(s);if(n&&o.length>0){var c=yield r.downloadKeys(o);c.forEach((e,t)=>{var r=new Map;e.forEach((e,n)=>r.set(n,Object(Y["a"])(e,t))),i.set(t,r)})}return i}))()}getStoredDevice(e,t){return this.deviceList.getStoredDevice(e,t)}saveDeviceList(e){return this.deviceList.saveIfDirty(e)}setDeviceVerified(e,t){var r=arguments,n=this;return a()((function*(){var i=!(r.length>2&&void 0!==r[2])||r[2];yield n.setDeviceVerification(e,t,i)}))()}crossSignDevice(e){var t=this;return a()((function*(){yield t.setDeviceVerified(t.userId,e,!0)}))()}setDeviceVerification(e,t){var r=arguments,n=this;return a()((function*(){var i=r.length>2&&void 0!==r[2]?r[2]:null,o=r.length>3&&void 0!==r[3]?r[3]:null,s=r.length>4&&void 0!==r[4]?r[4]:null,c=r.length>5?r[5]:void 0,l=n.deviceList.getStoredCrossSigningForUser(e);if((null===l||void 0===l?void 0:l.getId())===t){if(null!==o||null!==s)throw new Error("Cannot set blocked or known for a cross-signing key");if(!i)throw new Error("Cannot set a cross-signing key as unverified");var d=c?Object.values(c)[0]:null;if(c&&(1!==Object.values(c).length||d!==l.getId()))throw new Error("Key did not match expected value: expected ".concat(l.getId(),", got ").concat(d));if(n.crossSigningInfo.getId()||e!==n.crossSigningInfo.userId||(n.storeTrustedSelfKeys(l.keys),n.emit(ie.UserTrustStatusChanged,n.userId,n.checkUserTrust(e))),e!==n.userId){p["b"].info("Master key "+l.getId()+" for "+e+" marked verified. Signing...");var u=yield n.crossSigningInfo.signUser(l);if(u){var h=function(){var r=a()((function*(r){var{shouldEmit:i=!1}=r;p["b"].info("Uploading signature for "+e+"...");var o=yield n.baseApis.uploadKeySignatures({[e]:{[t]:u}}),{failures:a}=o||{};if(Object.keys(a||[]).length>0)throw i&&n.baseApis.emit(ie.KeySignatureUploadFailure,a,"setDeviceVerification",h),new D["d"]("Key upload failed",{failures:a})}));return function(e){return r.apply(this,arguments)}}();yield h({shouldEmit:!0})}return u}return l}var f=n.deviceList.getRawStoredDevicesForUser(e);if(!f||!f[t])throw new Error("Unknown device "+e+":"+t);var v=f[t],m=v.verified;if(i){if(c)for(var[g,b]of Object.entries(c))if(v.keys[g]!==b)throw new Error("Key did not match expected value: expected ".concat(b,", got ").concat(v.keys[g]));m=te.VERIFIED}else null!==i&&m==te.VERIFIED&&(m=te.UNVERIFIED);o?m=te.BLOCKED:null!==o&&m==te.BLOCKED&&(m=te.UNVERIFIED);var _=v.known;if(null!==s&&(_=s),v.verified===m&&v.known===_||(v.verified=m,v.known=_,n.deviceList.storeDevicesForUser(e,f),n.deviceList.saveIfDirty()),i&&e===n.userId){var w;p["b"].info("Own device "+t+" marked verified: signing");var S=n.checkDeviceTrust(e,t);if(S.isCrossSigningVerified()?p["b"].log("Own device ".concat(t," already cross-signing verified")):w=yield n.crossSigningInfo.signDevice(e,y["a"].fromStorage(v,t)),w){var E=function(){var r=a()((function*(r){var{shouldEmit:i=!1}=r;p["b"].info("Uploading signature for "+t);var o=yield n.baseApis.uploadKeySignatures({[e]:{[t]:w}}),{failures:a}=o||{};if(Object.keys(a||[]).length>0)throw i&&n.baseApis.emit(ie.KeySignatureUploadFailure,a,"setDeviceVerification",E),new D["d"]("Key upload failed",{failures:a})}));return function(e){return r.apply(this,arguments)}}();yield E({shouldEmit:!0})}}var k=y["a"].fromStorage(v,t);return n.emit(ie.DeviceVerificationChanged,e,t,k),k}))()}findVerificationRequestDMInProgress(e,t){return this.inRoomVerificationRequests.findRequestInProgress(e,t)}getVerificationRequestsToDeviceInProgress(e){return this.toDeviceVerificationRequests.getRequestsInProgress(e)}requestVerificationDM(e,t){var r=this.inRoomVerificationRequests.findRequestInProgress(t);if(r)return Promise.resolve(r);var n=new M["a"](this.baseApis,t,e);return this.requestVerificationWithChannel(e,n,this.inRoomVerificationRequests)}requestVerification(e,t){t||(t=Object.keys(this.deviceList.getRawStoredDevicesForUser(e)));var r=this.toDeviceVerificationRequests.findRequestInProgress(e,t);if(r)return Promise.resolve(r);var n=new A["a"](this.baseApis,e,t,A["a"].makeTransactionId());return this.requestVerificationWithChannel(e,n,this.toDeviceVerificationRequests)}requestOwnUserVerification(){return this.requestVerification(this.userId)}requestDeviceVerification(e,t){return this.requestVerification(e,[t])}requestVerificationWithChannel(e,t,r){var n=this;return a()((function*(){var e=new O["g"](t,n.verificationMethods,n.baseApis);t.transactionId&&r.setRequestByChannel(t,e),yield e.sendRequest();var i=r.getRequestByChannel(t);return i?e=i:(p["b"].log("Crypto: adding new request to "+"requestsByTxnId with id ".concat(t.transactionId," ").concat(t.roomId)),r.setRequestByChannel(t,e)),e}))()}beginKeyVerification(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i){if(n=this.toDeviceVerificationRequests.getRequestBySenderAndTxnId(t,i),!n)throw new Error("No request found for user ".concat(t," with ")+"transactionId ".concat(i))}else{i=A["a"].makeTransactionId();var o=new A["a"](this.baseApis,t,[r],i,r);n=new O["g"](o,this.verificationMethods,this.baseApis),this.toDeviceVerificationRequests.setRequestBySenderAndTxnId(t,i,n)}return n.beginKeyVerification(e,{userId:t,deviceId:r})}legacyDeviceVerification(e,t,r){var n=this;return a()((function*(){var i=A["a"].makeTransactionId(),o=new A["a"](n.baseApis,e,[t],i,t),a=new O["g"](o,n.verificationMethods,n.baseApis);n.toDeviceVerificationRequests.setRequestBySenderAndTxnId(e,i,a);var s=a.beginKeyVerification(r,{userId:e,deviceId:t});return yield Promise.race([s.verify(),a.waitFor(e=>e.started)]),a}))()}getOlmSessionsForUser(e){var t=this;return a()((function*(){var r=t.getStoredDevicesForUser(e)||[],n={};for(var i of r){var o=i.getIdentityKey(),a=yield t.olmDevice.getSessionInfoForDevice(o);n[i.deviceId]={deviceIdKey:o,sessions:a}}return n}))()}getEventSenderDeviceInfo(e){var t=e.getSenderKey(),r=e.getWireContent().algorithm;if(!t||!r)return null;if(e.isKeySourceUntrusted())return null;var n=this.deviceList.getDeviceByIdentityKey(r,t);if(null===n)return null;var i=e.getClaimedEd25519Key();return i?i!==n.getFingerprint()?(p["b"].warn("Event "+e.getId()+" claims ed25519 key "+i+" but sender device has key "+n.getFingerprint()),null):n:(p["b"].warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),null)}getEventEncryptionInfo(e){var t,r,n={};if(n.senderKey=null!==(t=e.getSenderKey())&&void 0!==t?t:void 0,n.algorithm=e.getWireContent().algorithm,!n.senderKey||!n.algorithm)return n.encrypted=!1,n;n.encrypted=!0,e.isKeySourceUntrusted()?n.authenticated=!1:n.authenticated=!0,n.sender=null!==(r=this.deviceList.getDeviceByIdentityKey(n.algorithm,n.senderKey))&&void 0!==r?r:void 0;var i=e.getClaimedEd25519Key();return i||(p["b"].warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),n.mismatchedSender=!0),n.sender&&i!==n.sender.getFingerprint()&&(p["b"].warn("Event "+e.getId()+" claims ed25519 key "+i+"but sender device has key "+n.sender.getFingerprint()),n.mismatchedSender=!0),n}getEncryptionInfoForEvent(e){var t=this;return a()((function*(){var r=t.getEventEncryptionInfo(e);if(!r.encrypted)return null;var n=e.getSender();if(!n||r.mismatchedSender)return{shieldColour:H["EventShieldColour"].RED,shieldReason:H["EventShieldReason"].MISMATCHED_SENDER_KEY};var i=t.checkUserTrust(n);if(!i.isCrossSigningVerified())return r.authenticated?{shieldColour:H["EventShieldColour"].NONE,shieldReason:null}:{shieldColour:H["EventShieldColour"].GREY,shieldReason:H["EventShieldReason"].AUTHENTICITY_NOT_GUARANTEED};var o=n&&r.sender&&(yield t.getDeviceVerificationStatus(n,r.sender.deviceId));return o?o.isVerified()?r.authenticated?{shieldColour:H["EventShieldColour"].NONE,shieldReason:null}:{shieldColour:H["EventShieldColour"].GREY,shieldReason:H["EventShieldReason"].AUTHENTICITY_NOT_GUARANTEED}:{shieldColour:H["EventShieldColour"].RED,shieldReason:H["EventShieldReason"].UNSIGNED_DEVICE}:{shieldColour:H["EventShieldColour"].GREY,shieldReason:H["EventShieldReason"].UNKNOWN_DEVICE}}))()}forceDiscardSession(e){var t=this.roomEncryptors.get(e);if(void 0===t)throw new Error("Room not encrypted");if(void 0===t.forceDiscardSession)throw new Error("Room encryption algorithm doesn't support session discarding");return t.forceDiscardSession(),Promise.resolve()}setRoomEncryption(e,t,r){var n=this;return a()((function*(){var i=n.clientStore.getRoom(e);if(!i)throw new Error("Unable to enable encryption tracking devices in unknown room ".concat(e));yield n.setRoomEncryptionImpl(i,t),n.lazyLoadMembers||r||n.deviceList.refreshOutdatedDeviceLists()}))()}setRoomEncryptionImpl(e,t){var r=this;return a()((function*(){var n=e.roomId;if(t.algorithm){var i=r.roomList.getRoomEncryption(n);if(i&&JSON.stringify(i)!=JSON.stringify(t))p["b"].error("Ignoring m.room.encryption event which requests a change of config in "+n);else{var o=r.roomEncryptors.get(n);if(!o){var a=null;i||(a=r.roomList.setRoomEncryption(n,t));var s=b["b"].get(t.algorithm);if(!s)throw new Error("Unable to encrypt with "+t.algorithm);var c=new s({userId:r.userId,deviceId:r.deviceId,crypto:r,olmDevice:r.olmDevice,baseApis:r.baseApis,roomId:n,config:t});if(r.roomEncryptors.set(n,c),a&&(yield a),p["b"].log("Enabling encryption in ".concat(n)),e.membersLoaded())yield r.trackRoomDevicesImpl(e);else{var l=t=>{e.off($["b"].Update,l),e.membersLoaded()&&r.trackRoomDevicesImpl(e).catch(e=>{p["b"].error("Error enabling device tracking in ".concat(n),e)})};e.on($["b"].Update,l)}}}}else p["b"].log("Ignoring setRoomEncryption with no algorithm")}))()}trackRoomDevices(e){var t=this.clientStore.getRoom(e);if(!t)throw new Error("Unable to start tracking devices in unknown room ".concat(e));return this.trackRoomDevicesImpl(t)}trackRoomDevicesImpl(e){var t=this,r=e.roomId,n=function(){var n=a()((function*(){if(t.roomEncryptors.has(r)){p["b"].log("Starting to track devices for room ".concat(r," ..."));var n=yield e.getEncryptionTargetMembers();n.forEach(e=>{t.deviceList.startTrackingDeviceList(e.userId)})}}));return function(){return n.apply(this,arguments)}}(),i=this.roomDeviceTrackingState[r];return i||(i=n(),this.roomDeviceTrackingState[r]=i.catch(e=>{throw delete this.roomDeviceTrackingState[r],e})),i}ensureOlmSessionsForUsers(e,t){var r=new Map;for(var n of e){var i=[];r.set(n,i);var o=this.getStoredDevicesForUser(n)||[];for(var a of o){var s=a.getIdentityKey();s!=this.olmDevice.deviceCurve25519Key&&(a.verified!=te.BLOCKED&&i.push(a))}}return m["ensureOlmSessionsForDevices"](this.olmDevice,this.baseApis,r,t)}exportRoomKeys(){var e=this;return a()((function*(){var t=[];return yield e.cryptoStore.doTxn("readonly",[I["a"].STORE_INBOUND_GROUP_SESSIONS],r=>{e.cryptoStore.getAllEndToEndInboundGroupSessions(r,r=>{if(null!==r){var n=e.olmDevice.exportInboundGroupSession(r.senderKey,r.sessionId,r.sessionData);delete n.first_known_index,n.algorithm=m["MEGOLM_ALGORITHM"],t.push(n)}})}),t}))()}exportRoomKeysAsJson(){var e=this;return a()((function*(){return JSON.stringify(yield e.exportRoomKeys())}))()}importRoomKeys(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0,n=0,i=e.length;function o(){var e;null===(e=t.progressCallback)||void 0===e||e.call(t,{stage:"load_keys",successes:r,failures:n,total:i})}return Promise.all(e.map(e=>{if(!e.room_id||!e.algorithm)return p["b"].warn("ignoring room key entry with missing fields",e),n++,t.progressCallback&&o(),null;var i=this.getRoomDecryptor(e.room_id,e.algorithm);return i.importRoomKey(e,t).finally(()=>{r++,t.progressCallback&&o()})})).then()}importRoomKeysAsJson(e,t){var r=this;return a()((function*(){return yield r.importRoomKeys(JSON.parse(e))}))()}countSessionsNeedingBackup(){return this.backupManager.countSessionsNeedingBackup()}prepareToEncrypt(e){var t=this.roomEncryptors.get(e.roomId);t&&t.prepareToEncrypt(e)}encryptEvent(e,t){var r=this;return a()((function*(){var n=e.getRoomId(),i=r.roomEncryptors.get(n);if(!i)throw new Error("Room "+n+" was previously configured to use encryption, but is no longer. Perhaps the homeserver is hiding the configuration event.");yield r.trackRoomDevicesImpl(t);var o=e.getContent(),a=o["m.relates_to"];a&&(o=Object.assign({},o),delete o["m.relates_to"]);var s=o["io.element.performance_metrics"];s&&(o=Object.assign({},o),delete o["io.element.performance_metrics"]);var c=yield i.encryptMessage(t,e.getType(),o);a&&(c["m.relates_to"]=a),s&&(c["io.element.performance_metrics"]=s),e.makeEncrypted("m.room.encrypted",c,r.olmDevice.deviceCurve25519Key,r.olmDevice.deviceEd25519Key)}))()}decryptEvent(t){var r=this;return a()((function*(){if(t.isRedacted()){var n=new B["b"](ee({room_id:t.getRoomId()},t.getUnsigned().redacted_because)),i=t.getUnsigned().redacted_because;if(n.isEncrypted())try{var o=yield r.decryptEvent(n);i=o.clearEvent}catch(e){p["b"].warn("Decryption of redaction failed. Falling back to unencrypted event.",e)}return{clearEvent:{room_id:t.getRoomId(),type:"m.room.message",content:{},unsigned:{redacted_because:i}}}}var a=t.getWireContent(),s=r.getRoomDecryptor(t.getRoomId(),a.algorithm);return s.decryptEvent(t)}))()}processDeviceLists(e){var t=this;return a()((function*(){yield t.evalDeviceListChanges(e)}))()}requestRoomKey(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.outgoingRoomKeyRequestManager.queueRoomKeyRequest(e,t,r).then(()=>{this.sendKeyRequestsImmediately&&this.outgoingRoomKeyRequestManager.sendQueuedRequests()}).catch(e=>{p["b"].error("Error requesting key for event",e)})}cancelRoomKeyRequest(e){this.outgoingRoomKeyRequestManager.cancelRoomKeyRequest(e).catch(e=>{p["b"].warn("Error clearing pending room key requests",e)})}cancelAndResendAllOutgoingKeyRequests(){var e=this;return a()((function*(){yield e.outgoingRoomKeyRequestManager.cancelAndResendAllOutgoingRequests()}))()}onCryptoEvent(e,t){var r=this;return a()((function*(){var n=t.getContent();yield r.setRoomEncryptionImpl(e,n)}))()}onSyncWillProcess(e){var t=this;return a()((function*(){e.oldSyncToken||(p["b"].log("Initial sync performed - resetting device tracking state"),t.deviceList.stopTrackingAllDeviceLists(),t.deviceList.startTrackingDeviceList(t.userId),t.roomDeviceTrackingState={}),t.sendKeyRequestsImmediately=!1}))()}onSyncCompleted(e){var t=this;return a()((function*(){var r;t.deviceList.setSyncToken(null!==(r=e.nextSyncToken)&&void 0!==r?r:null),t.deviceList.saveIfDirty(),t.deviceList.startTrackingDeviceList(t.userId),t.deviceList.refreshOutdatedDeviceLists(),e.catchingUp||(t.maybeUploadOneTimeKeys(),t.processReceivedRoomKeyRequests(),t.outgoingRoomKeyRequestManager.sendQueuedRequests(),t.sendKeyRequestsImmediately=!0)}))()}evalDeviceListChanges(e){var t=this;return a()((function*(){if(Array.isArray(null===e||void 0===e?void 0:e.changed)&&e.changed.forEach(e=>{t.deviceList.invalidateUserDeviceList(e)}),Array.isArray(null===e||void 0===e?void 0:e.left)&&e.left.length){var r=new Set(yield t.getTrackedE2eUsers());e.left.forEach(e=>{r.has(e)||t.deviceList.stopTrackingDeviceList(e)})}}))()}getTrackedE2eUsers(){var e=this;return a()((function*(){var t=[];for(var r of e.getTrackedE2eRooms()){var n=yield r.getEncryptionTargetMembers();for(var i of n)t.push(i.userId)}return t}))()}getTrackedE2eRooms(){return this.clientStore.getRooms().filter(e=>{var t=this.roomEncryptors.get(e.roomId);if(!t)return!1;if(!this.roomDeviceTrackingState[e.roomId])return!1;var r=e.getMyMembership();return r===Z["a"].Join||r===Z["a"].Invite})}encryptAndSendToDevices(t,r){var n=this;return a()((function*(){var i={eventType:h["b"].RoomMessageEncrypted,batch:[]};try{yield Promise.all(t.map(function(){var e=a()((function*(e){var{userId:t,deviceInfo:o}=e,a=o.deviceId,s={algorithm:m["OLM_ALGORITHM"],sender_key:n.olmDevice.deviceCurve25519Key,ciphertext:{},[h["k"]]:Object(u["a"])()};i.batch.push({userId:t,deviceId:a,payload:s}),yield m["ensureOlmSessionsForDevices"](n.olmDevice,n.baseApis,new Map([[t,[o]]])),yield m["encryptMessageForDevice"](s.ciphertext,n.userId,n.deviceId,n.olmDevice,t,o,r)}));return function(t){return e.apply(this,arguments)}}())),i.batch=i.batch.filter(e=>Object.keys(e.payload.ciphertext).length>0||(p["b"].log("No ciphertext for device ".concat(e.userId,":").concat(e.deviceId,": pruning")),!1));try{yield n.baseApis.queueToDevice(i)}catch(e){throw p["b"].error("sendToDevice failed",e),e}}catch(e){throw p["b"].error("encryptAndSendToDevices promises failed",e),e}}))()}preprocessToDeviceMessages(e){return a()((function*(){return e.filter(e=>{var t;return!(e.type===h["b"].RoomMessageEncrypted&&!["m.olm.v1.curve25519-aes-sha2"].includes(null===(t=e.content)||void 0===t?void 0:t.algorithm))||(p["b"].log("Ignoring invalid encrypted to-device event from "+e.sender),!1)})}))()}updateOneTimeKeyCount(e){if(!isFinite(e))throw new TypeError("Parameter for updateOneTimeKeyCount has to be a number");this.oneTimeKeyCount=e}processKeyCounts(e,t){return void 0!==e&&this.updateOneTimeKeyCount(e["signed_curve25519"]||0),void 0!==t&&(this.needsNewFallback=!t.includes("signed_curve25519")),Promise.resolve()}onRoomKeyEvent(e){var t=e.getContent();if(t.room_id&&t.algorithm){this.backupManager.checkedForBackup||this.backupManager.checkAndStart();var r=this.getRoomDecryptor(t.room_id,t.algorithm);r.onRoomKeyEvent(e)}else p["b"].error("key event is missing fields")}onRoomKeyWithheldEvent(e){var t=e.getContent();if(("m.no_olm"===t.code||t.room_id&&t.session_id)&&t.algorithm&&t.sender_key){p["b"].info("Got room key withheld event from ".concat(e.getSender()," ")+"for ".concat(t.algorithm," session ").concat(t.sender_key,"|").concat(t.session_id," ")+"in room ".concat(t.room_id," with code ").concat(t.code," (").concat(t.reason,")"));var r=this.getRoomDecryptor(t.room_id,t.algorithm);if(r.onRoomKeyWithheldEvent&&r.onRoomKeyWithheldEvent(e),!t.room_id){var n=this.getRoomDecryptors(t.algorithm);for(var i of n)i.retryDecryptionFromSender(t.sender_key)}}else p["b"].error("key withheld event is missing fields")}onKeyVerificationMessage(e){if(A["a"].validateEvent(e,this.baseApis)){var t=e=>{if(A["a"].canCreateRequest(A["a"].getEventType(e))){var t=e.getContent(),r=t&&t.from_device;if(r){var n=e.getSender(),i=new A["a"](this.baseApis,n,[r]);return new O["g"](i,this.verificationMethods,this.baseApis)}}};this.handleVerificationEvent(e,this.toDeviceVerificationRequests,t)}}handleVerificationEvent(e,t,r){var n=arguments,i=this;return a()((function*(){var o,a,s=!(n.length>3&&void 0!==n[3])||n[3];if(e.isSending()&&e.status!=B["a"].SENT)try{yield new Promise((t,r)=>{o=t,a=()=>{e.status==B["a"].CANCELLED&&r(new Error("Event status set to CANCELLED."))},e.once(B["c"].LocalEventIdReplaced,o),e.on(B["c"].Status,a)})}catch(u){return void p["b"].error("error while waiting for the verification event to be sent: ",u)}finally{e.removeListener(B["c"].LocalEventIdReplaced,o),e.removeListener(B["c"].Status,a)}var c=t.getRequest(e),l=!1;if(!c){if(c=r(e),!c)return void p["b"].log("Crypto: could not find VerificationRequest for "+"".concat(e.getType(),", and could not create one, so ignoring."));l=!0,t.setRequest(e,c)}e.setVerificationRequest(c);try{yield c.channel.handleEvent(e,c,s)}catch(u){p["b"].error("error while handling verification event",u)}var d=l&&!c.initiatedByMe&&!c.invalid&&!c.observeOnly;d&&(i.baseApis.emit(ie.VerificationRequest,c),i.baseApis.emit(ie.VerificationRequestReceived,c))}))()}onToDeviceBadEncrypted(e){var t=this;return a()((function*(){var r=e.getWireContent(),n=e.getSender(),i=r.algorithm,o=r.sender_key;t.baseApis.emit(K["b"].UndecryptableToDeviceEvent,e);var a=()=>{var e=t.getRoomDecryptors(m["MEGOLM_ALGORITHM"]);for(var r of e)r.retryDecryptionFromSender(o)};if(void 0!==n&&void 0!==o&&void 0!==o){var s=t.forceNewSessionRetryTime.getOrCreate(n),c=s.getOrCreate(o);if(c>Date.now())return p["b"].debug("New session already forced with device ".concat(n,":").concat(o,": ")+"not forcing another until at least ".concat(new Date(c).toUTCString())),yield t.olmDevice.recordSessionProblem(o,"wedged",!0),void a();s.set(o,Date.now()+ae);var l=t.deviceList.getDeviceByIdentityKey(i,o);if(!l&&(yield t.downloadKeys([n],!1),l=t.deviceList.getDeviceByIdentityKey(i,o),!l))return p["b"].info("Couldn't find device for identity key "+o+": not re-establishing session"),yield t.olmDevice.recordSessionProblem(o,"wedged",!1),void a();var d=new Map([[n,[l]]]);yield m["ensureOlmSessionsForDevices"](t.olmDevice,t.baseApis,d,!0),s.set(o,Date.now()+oe);var f={algorithm:m["OLM_ALGORITHM"],sender_key:t.olmDevice.deviceCurve25519Key,ciphertext:{},[h["k"]]:Object(u["a"])()};yield m["encryptMessageForDevice"](f.ciphertext,t.userId,t.deviceId,t.olmDevice,n,l,{type:"m.dummy"}),yield t.olmDevice.recordSessionProblem(o,"wedged",!0),a(),yield t.baseApis.sendToDevice("m.room.encrypted",new Map([[n,new Map([[l.deviceId,f]])]]));var v=yield t.outgoingRoomKeyRequestManager.getOutgoingSentRoomKeyRequest(n,l.deviceId);for(var g of v)t.requestRoomKey(g.requestBody,g.recipients,!0)}}))()}onRoomMembership(e,t,r){var n=t.roomId,i=this.roomEncryptors.get(n);if(i){var o;if(n in this.roomDeviceTrackingState)t.membership==Z["a"].Join?(p["b"].log("Join event for "+t.userId+" in "+n),this.deviceList.startTrackingDeviceList(t.userId)):t.membership==Z["a"].Invite&&null!==(o=this.clientStore.getRoom(n))&&void 0!==o&&o.shouldEncryptForInvitedMembers()&&(p["b"].log("Invite event for "+t.userId+" in "+n),this.deviceList.startTrackingDeviceList(t.userId));i.onRoomMembership(e,t,r)}}onRoomKeyRequestEvent(e){var t=e.getContent();if("request"===t.action){var r=new le(e);this.receivedRoomKeyRequests.push(r)}else if("request_cancellation"===t.action){var n=new de(e);this.receivedRoomKeyRequestCancellations.push(n)}}processReceivedRoomKeyRequests(){var t=this;return a()((function*(){if(!t.processingRoomKeyRequests){t.processingRoomKeyRequests=!0;try{var r=t.receivedRoomKeyRequests;t.receivedRoomKeyRequests=[];var n=t.receivedRoomKeyRequestCancellations;t.receivedRoomKeyRequestCancellations=[],yield Promise.all(r.map(e=>t.processReceivedRoomKeyRequest(e))),yield Promise.all(n.map(e=>t.processReceivedRoomKeyRequestCancellation(e)))}catch(e){p["b"].error("Error processing room key requsts: ".concat(e))}finally{t.processingRoomKeyRequests=!1}}}))()}processReceivedRoomKeyRequest(t){var r=this;return a()((function*(){var n=t.userId,i=t.deviceId,o=t.requestBody,a=o.room_id,s=o.algorithm;if(p["b"].log("m.room_key_request from ".concat(n,":").concat(i)+" for ".concat(a," / ").concat(o.session_id," (id ").concat(t.requestId,")")),n===r.userId)if(i!==r.deviceId)if(r.roomDecryptors.has(a)){var c=r.roomDecryptors.get(a).get(s);if(c)if(yield c.hasKeysForKeyRequest(t)){if(t.share=()=>{c.shareKeysWithDevice(t)},r.checkDeviceTrust(n,i).isVerified())return p["b"].log("device is already verified: sharing keys"),void t.share();r.emit(ie.RoomKeyRequest,t)}else p["b"].log("room key request for unknown session ".concat(a," / ")+o.session_id);else p["b"].log("room key request for unknown alg ".concat(s," in room ").concat(a))}else p["b"].log("room key request for unencrypted room ".concat(a));else p["b"].log("Ignoring room key request from ourselves");else{if(!r.roomEncryptors.get(a))return void p["b"].debug("room key request for unencrypted room ".concat(a));var l=r.roomEncryptors.get(a),d=r.deviceList.getStoredDevice(n,i);if(!d)return void p["b"].debug("Ignoring keyshare for unknown device ".concat(n,":").concat(i));try{yield l.reshareKeyWithDevice(o.sender_key,o.session_id,n,d)}catch(e){p["b"].warn("Failed to re-share keys for session "+o.session_id+" with device "+n+":"+d.deviceId,e)}}}))()}processReceivedRoomKeyRequestCancellation(e){var t=this;return a()((function*(){p["b"].log("m.room_key_request cancellation for ".concat(e.userId,":")+"".concat(e.deviceId," (id ").concat(e.requestId,")")),t.emit(ie.RoomKeyRequestCancellation,e)}))()}getRoomDecryptor(e,t){var r,n;if(e&&(r=this.roomDecryptors.get(e),r||(r=new Map,this.roomDecryptors.set(e,r)),n=r.get(t),n))return n;var i=b["a"].get(t);if(!i)throw new W["a"](H["DecryptionFailureCode"].UNKNOWN_ENCRYPTION_ALGORITHM,'Unknown encryption algorithm "'+t+'".');return n=new i({userId:this.userId,crypto:this,olmDevice:this.olmDevice,baseApis:this.baseApis,roomId:null!==e&&void 0!==e?e:void 0}),r&&r.set(t,n),n}getRoomDecryptors(e){var t=[];for(var r of this.roomDecryptors.values())r.has(e)&&t.push(r.get(e));return t}signObject(e){var t=this;return a()((function*(){var r=new Map(Object.entries(e.signatures||{})),n=e.unsigned;delete e.signatures,delete e.unsigned;var i=r.get(t.userId)||{};r.set(t.userId,i),i["ed25519:"+t.deviceId]=yield t.olmDevice.sign(d.a.stringify(e)),e.signatures=Object(z["C"])(r),void 0!==n&&(e.unsigned=n)}))()}isRoomEncrypted(e){return this.roomList.isRoomEncrypted(e)}isEncryptionEnabledInRoom(e){var t=this;return a()((function*(){return t.isRoomEncrypted(e)}))()}getRoomEncryption(e){return this.roomList.getRoomEncryption(e)}isDehydrationSupported(){return a()((function*(){return!1}))()}startDehydration(e){return a()((function*(){throw new Error("Not implemented")}))()}}function ce(e){if("string"!==typeof e||e.indexOf(",")<0)return null;var t=Uint8Array.from(e.split(","),e=>parseInt(e));return Object(X["b"])(t)}class le{constructor(e){c()(this,"userId",void 0),c()(this,"deviceId",void 0),c()(this,"requestId",void 0),c()(this,"requestBody",void 0),c()(this,"share",void 0);var t=e.getContent();this.userId=e.getSender(),this.deviceId=t.requesting_device_id,this.requestId=t.request_id,this.requestBody=t.body||{},this.share=()=>{throw new Error("don't know how to share keys for this request yet")}}}class de{constructor(e){c()(this,"userId",void 0),c()(this,"deviceId",void 0),c()(this,"requestId",void 0);var t=e.getContent();this.userId=e.getSender(),this.deviceId=t.requesting_device_id,this.requestId=t.request_id}}}).call(this,n("c8ba"),n("b639").Buffer)},3212:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("eaff");class c extends s["b"]{constructor(){super(...arguments),a()(this,"doVerification",i()((function*(){throw new Error("Verification is not possible with this method")})))}static factory(e,t,r,n,i,o){return new c(e,t,r,n,i,o)}static get NAME(){return"org.matrix.illegal_method"}}},3267:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("3ba7");function i(e){return t=>{var r,i,o,a;return(null===(r=t.content)||void 0===r||null===(i=r["m.relates_to"])||void 0===i?void 0:i.event_id)!==e||(null===(o=t.content)||void 0===o||null===(a=o["m.relates_to"])||void 0===a?void 0:a.rel_type)===n["d"].name}}},3288:function(e,t,r){var n=r("6e66");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("495438d9",n,e)}},"32dd":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".bgimage[data-v-b55021d2]{width:100%;height:100%;opacity:0;transition:.3s}.bgimage.loaded[data-v-b55021d2]{opacity:1}",""]),e.exports=t},3441:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.menu?t("transition",{attrs:{name:e.menu.fromtop?"slideDownModal":"fademodal"}},[t("modal",{attrs:{fromtop:e.menu.fromtop,mclass:"small likemenu active"+(e.menu.fromtop?" fromtop":"")},on:{close:e.hidePopup},scopedSlots:e._u([{key:"body",fn:function(){return[t("listmenuwithupload",{attrs:{items:e.menu.items,close:e.hidePopup}})]},proxy:!0}],null,!1,1356322483)})],1):e._e()},i=[],o=r("0104"),a=r("2f62"),s={name:"pmenu",components:{simpleMenu:o["a"]},inject:["menuState"],data:function(){return{last:null}},computed:{...Object(a["d"])({pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,mobile:e=>e.mobile,active:e=>e.active,hiddenInParent:e=>e.hiddenInParent}),menu(){return this.menuState.get()}},methods:{menuItemClick(e){this.menu&&(this.last=this.menu,this.menu.handler(e,this.menu.item,{hidePopup:this.hidePopup,showPopup:this.showPopup}))},showPopup:function(){this.last&&(this.menuState.set(this.last),this.$emit("setmenu",this.last),this.last=null)},hidePopup(){this.menuState.set(null),this.$emit("setmenu",null)}}},c=s,l=r("2877");function d(e){var t=r("2940");t.__inject__&&t.__inject__(e)}var u=Object(l["a"])(c,n,i,!1,d,"521a3d2d",null,!0);t["a"]=u.exports},3455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"34bd":function(e,t,r){},3511:function(e,t,r){"use strict";var n=TypeError,i=9007199254740991;e.exports=function(e){if(e>i)throw n("Maximum allowed index exceeded");return e}},"35aa":function(e,t,r){"use strict";r.r(t);var n=r("cda2");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"35d6":function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=o[0],s=o[1],c=o[2],l=o[3],d={id:e+":"+i,css:s,media:c,sourceMap:l};n[a]?n[a].parts.push(d):r.push(n[a]={id:a,parts:[d]})}return r}function i(e,t,r){var i=n(e,t);o(i,r)}function o(e,t){const r=t._injectedStyles||(t._injectedStyles={});for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(!o){for(var a=0;a<i.parts.length;a++)s(i.parts[a],t);r[i.id]=!0}}}function a(e){var t=document.createElement("style");return t.type="text/css",e.appendChild(t),t}function s(e,t){var r=a(t),n=e.css,i=e.media,o=e.sourceMap;if(i&&r.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r.styleSheet)r.styleSheet.cssText=n;else{while(r.firstChild)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(n))}}r.r(t),r.d(t,"default",(function(){return i}))},"35d9":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".footer-chat[data-v-3bd2d533]{bottom:0;left:0;right:0;background:rgb(var(--background-total-theme));border-top:1px solid rgb(var(--background-secondary-theme));position:absolute;height:90px;padding-bottom:30px}.footer-chat.bout[data-v-3bd2d533]{position:fixed;will-change:transform}.footer-chat .work[data-v-3bd2d533]{height:100%;padding:0!important}.footer-chat.bin[data-v-3bd2d533]{border-top:0;position:static}.footer-chat.fix[data-v-3bd2d533]{position:absolute;height:auto}.footer-chat.fix.minimized[data-v-3bd2d533]{background:transparent;padding-bottom:0}.footer-chat.fix.minimized .menuItems[data-v-3bd2d533]{display:block;transition:.3s;padding-top:.5em}.footer-chat.fix.minimized .menuItems a[data-v-3bd2d533]{padding:0}.footer-chat.fix.minimized .menuItems .menuItem[data-v-3bd2d533]{width:44px;height:44px;background:rgba(var(--neutral-grad-3),.4);color:rgba(var(--neutral-grad-3),.8);border-radius:50%;border:1px solid transparent;margin-bottom:.25em;line-height:40px;transition:.3s}.footer-chat.fix.minimized .menuItems .menuItem .icon[data-v-3bd2d533]{color:rgb(var(--background-total-theme))}.footer-chat.fix.minimized .menuItems .menuItem .label[data-v-3bd2d533]{display:none}.footer-chat.fix.minimized .menuItems .menuItem i[data-v-3bd2d533]{vertical-align:middle;font-size:.8em}.footer-chat.fix.minimized .menuItems .menuItem.active[data-v-3bd2d533]{text-shadow:0 0 20px rgb(var(--color-bg-ac-bright)),0 0 20px rgb(var(--color-bg-ac-bright)),0 0 20px rgb(var(--color-bg-ac-bright)),0 0 20px rgb(var(--color-bg-ac-bright)),0 0 20px rgb(var(--color-bg-ac-bright));background:rgba(var(--color-bg-ac-bright),.9);border:1px solid rgba(var(--color-bg-ac-bright),.9);color:rgb(var(--background-total-theme))}.footer-chat.fix.minimized .menuItems .menuItem.active .icon[data-v-3bd2d533]{color:rgb(var(--background-total-theme))}.footer-chat.fix.minimized .menuItems .menuItem[data-v-3bd2d533]:hover:not(.active){background:rgba(var(--color-bg-ac-bright),.95);color:#fff;text-shadow:0 0 10px rgb(var(--color-bg-ac-bright)),0 0 15px rgb(var(--color-bg-ac-bright)),0 0 20px rgb(var(--color-bg-ac-bright)),0 0 25px rgb(var(--color-bg-ac-bright)),0 0 30px #02061a,0 0 35px rgb(var(--color-bg-ac-bright)),0 0 40px #02061a}.footer-chat.fix.minimized.active .menuItems[data-v-3bd2d533]{border-top:0}.menuItems[data-v-3bd2d533]{display:flex;justify-content:space-around;align-items:center;height:100%}.menuItems a[data-v-3bd2d533]{display:block;flex-grow:1;text-align:center;padding:1em;color:#213850}.menuItems .icon[data-v-3bd2d533]{font-size:.9em;color:rgba(var(--color-txt-gray-dark),.7)}.menuItems .label[data-v-3bd2d533]{font-size:.7em;position:absolute;bottom:0;left:0;right:0;line-height:1em;text-align:center;opacity:.7}.menuItems .menuItem[data-v-3bd2d533]{position:relative;text-align:center;cursor:pointer;width:64px;height:44px;line-height:44px}.menuItems .menuItem.active .icon[data-v-3bd2d533]{color:rgb(var(--color-txt-ac))}.menuItems .menuItem .unseen[data-v-3bd2d533]{position:absolute;width:22px;height:22px;right:-10%;bottom:-10%;background:rgba(var(--color-txt-ac),.9);line-height:22px;text-align:center;font-weight:500;border-radius:50%;z-index:2;font-size:.6em;color:rgb(var(--text-on-bg-ac-color))}",""]),e.exports=t},"36f2":function(e,t,r){"use strict";var n,i,o,a,s=r("cfe9"),c=r("2a07"),l=r("dbe5"),d=s.structuredClone,u=s.ArrayBuffer,h=s.MessageChannel,f=!1;if(l)f=function(e){d(e,{transfer:[e]})};else if(u)try{h||(n=c("worker_threads"),n&&(h=n.MessageChannel)),h&&(i=new h,o=new u(2),a=function(e){i.port1.postMessage(null,[e])},2===o.byteLength&&(a(o),0===o.byteLength&&(f=a)))}catch(error){}e.exports=f},3715:function(t,r,n){"use strict";n.d(r,"a",(function(){return h}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("866a"),l=n("b83f"),d=n("3925");function u(e){var t="string"===typeof e&&!!e&&"undefined"!==e&&"null"!==e;return t||"number"===typeof e}class h{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,"rooms",{}),s()(this,"users",{}),s()(this,"syncToken",null),s()(this,"filters",new l["b"](()=>new Map)),s()(this,"accountData",new Map),s()(this,"localStorage",void 0),s()(this,"oobMembers",new Map),s()(this,"pendingEvents",{}),s()(this,"clientOptions",void 0),s()(this,"pendingToDeviceBatches",[]),s()(this,"nextToDeviceBatchId",0),s()(this,"createUser",void 0),s()(this,"onRoomMember",(e,t,r)=>{var n;if(r.membership!==d["a"].Invite){var i=this.users[r.userId]||(null===(n=this.createUser)||void 0===n?void 0:n.call(this,r.userId));r.name&&(i.setDisplayName(r.name),r.events.member&&i.setRawDisplayName(r.events.member.getDirectionalContent().displayname)),r.events.member&&r.events.member.getContent().avatar_url&&i.setAvatarUrl(r.events.member.getContent().avatar_url),this.users[i.userId]=i}}),this.localStorage=e.localStorage}getSyncToken(){return this.syncToken}isNewlyCreated(){return Promise.resolve(!0)}setSyncToken(e){this.syncToken=e}storeRoom(e){this.rooms[e.roomId]=e,e.currentState.on(c["b"].Members,this.onRoomMember),e.currentState.getMembers().forEach(t=>{this.onRoomMember(null,e.currentState,t)})}setUserCreator(e){this.createUser=e}getRoom(e){return this.rooms[e]||null}getRooms(){return Object.values(this.rooms)}removeRoom(e){this.rooms[e]&&this.rooms[e].currentState.removeListener(c["b"].Members,this.onRoomMember),delete this.rooms[e]}getRoomSummaries(){return Object.values(this.rooms).map((function(e){return e.summary}))}storeUser(e){this.users[e.userId]=e}getUser(e){return this.users[e]||null}getUsers(){return Object.values(this.users)}scrollback(e,t){return[]}storeEvents(e,t,r,n){}storeFilter(e){null!==e&&void 0!==e&&e.userId&&null!==e&&void 0!==e&&e.filterId&&this.filters.getOrCreate(e.userId).set(e.filterId,e)}getFilter(e,t){var r;return(null===(r=this.filters.get(e))||void 0===r?void 0:r.get(t))||null}getFilterIdByName(t){if(!this.localStorage)return null;var r="mxjssdk_memory_filter_"+t;try{var n=this.localStorage.getItem(r);if(u(n))return n}catch(e){}return null}setFilterIdByName(t,r){if(this.localStorage){var n="mxjssdk_memory_filter_"+t;try{u(r)?this.localStorage.setItem(n,r):this.localStorage.removeItem(n)}catch(e){}}}storeAccountDataEvents(e){e.forEach(e=>{var t=!Object.keys(e.getContent()).length;t?this.accountData.delete(e.getType()):this.accountData.set(e.getType(),e)})}getAccountData(e){return this.accountData.get(e)}setSyncData(e){return Promise.resolve()}wantsSave(){return!1}save(e){return Promise.resolve()}startup(){return Promise.resolve()}getSavedSync(){return Promise.resolve(null)}getSavedSyncToken(){return Promise.resolve(null)}deleteAllData(){return this.rooms={},this.users={},this.syncToken=null,this.filters=new l["b"](()=>new Map),this.accountData=new Map,Promise.resolve()}getOutOfBandMembers(e){return Promise.resolve(this.oobMembers.get(e)||null)}setOutOfBandMembers(e,t){return this.oobMembers.set(e,t),Promise.resolve()}clearOutOfBandMembers(e){return this.oobMembers.delete(e),Promise.resolve()}getClientOptions(){return Promise.resolve(this.clientOptions)}storeClientOptions(e){return this.clientOptions=Object.assign({},e),Promise.resolve()}getPendingEvents(e){var t=this;return o()((function*(){var r;return null!==(r=t.pendingEvents[e])&&void 0!==r?r:[]}))()}setPendingEvents(e,t){var r=this;return o()((function*(){r.pendingEvents[e]=t}))()}saveToDeviceBatches(e){for(var t of e)this.pendingToDeviceBatches.push({id:this.nextToDeviceBatchId++,eventType:t.eventType,txnId:t.txnId,batch:t.batch});return Promise.resolve()}getOldestToDeviceBatch(){var e=this;return o()((function*(){return 0===e.pendingToDeviceBatches.length?null:e.pendingToDeviceBatches[0]}))()}removeToDeviceBatch(e){return this.pendingToDeviceBatches=this.pendingToDeviceBatches.filter(t=>t.id!==e),Promise.resolve()}destroy(){return o()((function*(){}))()}}},"371b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3777:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return f}));var n,i,o=r("9523"),a=r.n(o),s=r("2f36"),c=r("5b5f"),l=r("299a"),d=r("936a"),u=r("2b78"),h=!0;n=h?c["b"].log.bind(c["b"]):function(){},function(e){e["Ignore"]="ignore",e["Replace"]="replace"}(i||(i={}));class f extends d["b"]{constructor(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;super(),this.room=e,this.thread=c,this.threadListType=l,a()(this,"relations",void 0),a()(this,"timelineSupport",void 0),a()(this,"displayPendingEvents",void 0),a()(this,"liveTimeline",void 0),a()(this,"timelines",void 0),a()(this,"_eventIdToTimeline",new Map),a()(this,"filter",void 0),this.timelineSupport=Boolean(i.timelineSupport),this.liveTimeline=new s["b"](this),this.displayPendingEvents=!1!==i.pendingEvents,this.timelines=[this.liveTimeline],this._eventIdToTimeline=new Map,this.filter=i.filter,this.relations=null!==(t=null===(r=this.room)||void 0===r?void 0:r.relations)&&void 0!==t?t:new u["a"](null!==(n=null===e||void 0===e?void 0:e.client)&&void 0!==n?n:o)}getTimelines(){return this.timelines}getFilter(){return this.filter}setFilter(e){this.filter=e}getPendingEvents(){return this.room&&this.displayPendingEvents?this.room.getPendingEvents():[]}getLiveTimeline(){return this.liveTimeline}setLiveTimeline(e){this.liveTimeline=e}eventIdToTimeline(e){return this._eventIdToTimeline.get(e)}replaceEventId(e,t){var r=this._eventIdToTimeline.get(e);r&&(this._eventIdToTimeline.delete(e),this._eventIdToTimeline.set(t,r))}resetLiveTimeline(e,t){var r=!this.timelineSupport||!t,n=this.liveTimeline,i=r?n.forkLive(s["b"].FORWARDS):n.fork(s["b"].FORWARDS);r?(this.timelines=[i],this._eventIdToTimeline=new Map):this.timelines.push(i),t&&n.setPaginationToken(t,s["b"].FORWARDS),i.setPaginationToken(null!==e&&void 0!==e?e:null,s["b"].BACKWARDS),this.liveTimeline=i,this.emit(l["d"].TimelineReset,this.room,this,r)}getTimelineForEvent(e){if(null===e||void 0===e)return null;var t=this._eventIdToTimeline.get(e);return void 0===t?null:t}findEventById(e){var t=this.getTimelineForEvent(e);if(t)return t.getEvents().find((function(t){return t.getId()==e}))}addTimeline(){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");var e=new s["b"](this);return this.timelines.push(e),e}addEventsToTimeline(e,t,r,i){if(!r)throw new Error("'timeline' not specified for EventTimelineSet.addEventsToTimeline");if(!t&&r==this.liveTimeline)throw new Error("EventTimelineSet.addEventsToTimeline cannot be used for adding events to the live timeline - use Room.addLiveEvents instead");if(!this.filter||(e=this.filter.filterRoomTimeline(e),e.length)){var o=t?s["b"].BACKWARDS:s["b"].FORWARDS,a=t?s["b"].FORWARDS:s["b"].BACKWARDS,l=!1,d=!1;for(var u of e){var h=u.getId(),f=this._eventIdToTimeline.get(h);if(f)if(d=!1,f!=r){var p=r.getNeighbouringTimeline(o);if(p)n(f==p?"Event "+h+" in neighbouring timeline - switching to "+f:"Event "+h+" already in a different timeline "+f),r=f;else{c["b"].info("Already have timeline for "+h+" - joining timeline "+r+" to "+f);var v=f===this.liveTimeline,m=r===this.liveTimeline,g=o===s["b"].BACKWARDS&&v,y=o===s["b"].FORWARDS&&m;g||y?(g&&c["b"].warn("Refusing to set a preceding existingTimeLine on our timeline as the existingTimeLine is live ("+f+")"),y&&c["b"].warn("Refusing to set our preceding timeline on a existingTimeLine as our timeline is live ("+r+")")):(r.setNeighbouringTimeline(f,o),f.setNeighbouringTimeline(r,a),r=f,l=!0)}}else n("Event "+h+" already in timeline "+r);else this.addEventToTimeline(u,r,{toStartOfTimeline:t}),d=!0,l=!0}if(d||!l){if(o===s["b"].FORWARDS&&r===this.liveTimeline)return c["b"].warn({lastEventWasNew:d,didUpdate:l}),void c["b"].warn("Refusing to set forwards pagination token of live timeline "+"".concat(r," to ").concat(i));r.setPaginationToken(null!==i&&void 0!==i?i:null,o)}}}addLiveEvent(e){var{duplicateStrategy:t,fromCache:r,roomState:o,timelineWasEmpty:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.filter){var c=this.filter.filterRoomTimeline([e]);if(!c.length)return}var l=this._eventIdToTimeline.get(e.getId());if(l)if(t===i.Replace){n("EventTimelineSet.addLiveEvent: replacing duplicate event "+e.getId());for(var d=l.getEvents(),u=0;u<d.length;u++)if(d[u].getId()===e.getId()){o||(o=l.getState(s["b"].FORWARDS)),s["b"].setEventMetadata(e,o,!1),d[u]=e;break}}else n("EventTimelineSet.addLiveEvent: ignoring duplicate event "+e.getId());else this.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:!1,fromCache:r,roomState:o,timelineWasEmpty:a})}addEventToTimeline(e,t,r){var n,i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,s=!!r;if("object"===typeof r?({toStartOfTimeline:s,fromCache:o=!1,roomState:a,timelineWasEmpty:n}=r):void 0!==r&&c["b"].warn("Overload deprecated: `EventTimelineSet.addEventToTimeline(event, timeline, toStartOfTimeline, fromCache?, roomState?)` is deprecated in favor of the overload with `EventTimelineSet.addEventToTimeline(event, timeline, IAddEventToTimelineOptions)`"),t.getTimelineSet()!==this)throw new Error("EventTimelineSet.addEventToTimeline: Timeline=".concat(t.toString(),' does not belong " +\n                "in timelineSet(threadId=').concat(null===(i=this.thread)||void 0===i?void 0:i.id,")"));var d=e.getId();if(this.relations.aggregateParentEvent(e),this.relations.aggregateChildEvent(e,this),this.room&&!this.canContain(e)){var u,h="event=".concat(d);return e.threadRootId&&(h+="(belongs to thread=".concat(e.threadRootId,")")),void c["b"].warn("EventTimelineSet.addEventToTimeline: Ignoring ".concat(h," that does not belong ")+"in timeline=".concat(t.toString()," timelineSet(threadId=").concat(null===(u=this.thread)||void 0===u?void 0:u.id,")"))}t.addEvent(e,{toStartOfTimeline:s,roomState:a,timelineWasEmpty:n}),this._eventIdToTimeline.set(d,t);var f={timeline:t,liveEvent:!s&&t==this.liveTimeline&&!o};this.emit(l["d"].Timeline,e,this.room,Boolean(s),!1,f)}insertEventIntoTimeline(e,t,r){var n;if(t.getTimelineSet()!==this)throw new Error("EventTimelineSet.insertEventIntoTimeline: Timeline=".concat(t.toString(),' does not belong " +\n                "in timelineSet(threadId=').concat(null===(n=this.thread)||void 0===n?void 0:n.id,")"));var i=e.getId();if(this.relations.aggregateParentEvent(e),this.relations.aggregateChildEvent(e,this),this.room&&!this.canContain(e)){var o,a="event=".concat(i);return e.threadRootId&&(a+="(belongs to thread=".concat(e.threadRootId,")")),void c["b"].warn("EventTimelineSet.insertEventIntoTimeline: Ignoring ".concat(a," that does not belong ")+"in timeline=".concat(t.toString()," timelineSet(threadId=").concat(null===(o=this.thread)||void 0===o?void 0:o.id,")"))}var s=e.relationEventId;if(s){for(var d=this.findEventById(s),u=t.getEvents(),h=void 0!==d?u.indexOf(d):0,f=h;f<u.length;f++){var p=u[f];if(p.getTs()>e.getTs())break}t.insertEvent(e,f,r),this._eventIdToTimeline.set(i,t);var v={timeline:t,liveEvent:!1};this.emit(l["d"].Timeline,e,this.room,!1,!1,v)}else this.addEventToTimeline(e,t,{toStartOfTimeline:!1,fromCache:!1,timelineWasEmpty:!1,roomState:r})}handleRemoteEcho(e,t,r){var n=this._eventIdToTimeline.get(t);n?(this._eventIdToTimeline.delete(t),this._eventIdToTimeline.set(r,n)):this.filter&&!this.filter.filterRoomTimeline([e]).length||this.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:!1})}removeEvent(e){var t=this._eventIdToTimeline.get(e);if(!t)return null;var r=t.removeEvent(e);if(r){this._eventIdToTimeline.delete(e);var n={timeline:t};this.emit(l["d"].Timeline,r,this.room,void 0,!0,n)}return r}compareEventOrdering(e,t){if(e==t)return 0;var r=this._eventIdToTimeline.get(e),n=this._eventIdToTimeline.get(t);if(void 0===r)return null;if(void 0===n)return null;if(r===n){for(var i=void 0,o=void 0,a=r.getEvents(),c=0;c<a.length&&(void 0===i||void 0===o);c++){var l=a[c].getId();l==e&&(i=c),l==t&&(o=c)}var d=i-o;return d<0?-1:d>0?1:0}var u=r;while(u){if(u===n)return-1;u=u.getNeighbouringTimeline(s["b"].FORWARDS)}u=r;while(u){if(u===n)return 1;u=u.getNeighbouringTimeline(s["b"].BACKWARDS)}return null}canContain(e){if(!this.room)throw new Error("Cannot call `EventTimelineSet::canContain without a `room` set. Set the room when creating the EventTimelineSet to call this method.");var t,{threadId:r,shouldLiveInRoom:n,shouldLiveInThread:i}=this.room.eventShouldLiveIn(e);if(this.thread)return this.thread.id===r;n||i||c["b"].warn("EventTimelineSet:canContain event encountered which cannot be added to any timeline roomId=".concat(null===(t=this.room)||void 0===t?void 0:t.roomId," eventId=").concat(e.getId()," threadId=").concat(e.threadRootId));return n}}},"37ee":function(t,r,n){"use strict";function i(t){if(!t)return!1;try{var r=new URL(t);return"http"===r.protocol||"https"===r.protocol}catch(e){if(e instanceof TypeError)return!1;throw e}}Object.defineProperty(r,"__esModule",{value:!0}),r.isValidUrl=i},3838:function(t,r,n){"use strict";n.d(r,"d",(function(){return F})),n.d(r,"g",(function(){return B})),n.d(r,"c",(function(){return q})),n.d(r,"f",(function(){return V})),n.d(r,"b",(function(){return W})),n.d(r,"h",(function(){return J})),n.d(r,"e",(function(){return $})),n.d(r,"a",(function(){return Q}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("936a"),l=n("04e3"),d=n("d5da"),u=n("866a"),h=n("5b5f"),f=n("0804"),p=n("8ed1"),v=n("60af"),m=n("cdd2"),g=n("d76e"),y=n("b83f");class b{constructor(){s()(this,"bandwidth",{}),s()(this,"bitrate",{}),s()(this,"packetLoss",{}),s()(this,"transport",[])}}class w{static buildBandwidthReport(e){var t=e.availableIncomingBitrate,r=e.availableOutgoingBitrate;return{download:t?Math.round(t/1e3):0,upload:r?Math.round(r/1e3):0}}}class S{static buildReport(e,t,r,n){var i=null===e||void 0===e?void 0:e.get(t.localCandidateId),o=null===e||void 0===e?void 0:e.get(t.remoteCandidateId);if(o&&i){var a=void 0!==o.ip?o.ip:o.address,s=o.port,c="".concat(a,":").concat(s),l=void 0!==i.ip?i.ip:i.address,d=i.port,u="".concat(l,":").concat(d),h=o.protocol;r.some(e=>e.ip===c&&e.type===h&&e.localIp===u)||r.push({ip:c,type:h,localIp:u,isFocus:n,localCandidateType:i.candidateType,remoteCandidateType:o.candidateType,networkType:i.networkType,rtt:t.currentRoundTripTime?1e3*t.currentRoundTripTime:NaN})}return r}}var E=n("93be");class k{constructor(){s()(this,"ssrcToMid",{local:new Map,remote:new Map})}findMidBySsrc(e,t){var r;return this.ssrcToMid[t].forEach((t,n)=>{t.find(t=>t==e)&&(r=n)}),r}parse(e,t){var r=Object(E["parse"])(e),n=new Map;r.media.forEach(e=>{if(e.mid&&"video"===e.type||"audio"===e.type){var t,r=[];null===(t=e.ssrcs)||void 0===t||t.forEach(e=>{"cname"===e.attribute&&r.push("".concat(e.id))}),n.set("".concat(e.mid),r)}}),this.ssrcToMid[t]=n}getSsrcToMidMap(e){return this.ssrcToMid[e]}}class I{constructor(e){this.pc=e}getLocalTracks(e){var t=t=>null!==t&&t.kind===e;return this.pc.getTransceivers().filter(e=>"sendonly"===e.currentDirection||"sendrecv"===e.currentDirection).filter(e=>null!==e.sender).map(e=>e.sender).map(e=>e.track).filter(t)}getTackById(e){return this.pc.getTransceivers().map(t=>null!==(null===t||void 0===t?void 0:t.sender.track)&&t.sender.track.id===e?t.sender.track:null!==(null===t||void 0===t?void 0:t.receiver.track)&&t.receiver.track.id===e?t.receiver.track:void 0).find(e=>void 0!==e)}getLocalTrackIdByMid(e){var t=this.pc.getTransceivers().find(t=>t.mid===e);if(void 0!==t&&t.sender&&t.sender.track)return t.sender.track.id}getRemoteTrackIdByMid(e){var t=this.pc.getTransceivers().find(t=>t.mid===e);if(void 0!==t&&t.receiver&&t.receiver.track)return t.receiver.track.id}getActiveSimulcastStreams(){return 3}getTransceiverByTrackId(e){return this.pc.getTransceivers().find(t=>t.receiver.track.id===e||null!==t.sender.track&&t.sender.track.id===e)}}class C{constructor(e,t,r){this.trackId=e,this.type=t,this.kind=r,s()(this,"loss",{packetsTotal:0,packetsLost:0,isDownloadStream:!1}),s()(this,"bitrate",{download:0,upload:0}),s()(this,"resolution",{width:-1,height:-1}),s()(this,"audioConcealment",{concealedAudio:0,totalAudioDuration:0}),s()(this,"framerate",0),s()(this,"jitter",0),s()(this,"codec",""),s()(this,"isAlive",!0),s()(this,"isMuted",!1),s()(this,"isEnabled",!0)}getType(){return this.type}setLoss(e){this.loss=e}getLoss(){return this.loss}setResolution(e){this.resolution=e}getResolution(){return this.resolution}setFramerate(e){this.framerate=e}getFramerate(){return this.framerate}setBitrate(e){this.bitrate=e}getBitrate(){return this.bitrate}setCodec(e){return this.codec=e,!0}getCodec(){return this.codec}resetBitrate(){this.bitrate={download:0,upload:0}}set alive(e){this.isAlive=e}get alive(){return this.isAlive}set muted(e){this.isMuted=e}get muted(){return this.isMuted}set enabled(e){this.isEnabled=e}get enabled(){return this.isEnabled}setJitter(e){this.jitter=e}getJitter(){return this.jitter}setAudioConcealment(e,t){this.audioConcealment.concealedAudio=e,this.audioConcealment.totalAudioDuration=t}getAudioConcealment(){return this.audioConcealment}}class T{constructor(e,t){this.mediaSsrcHandler=e,this.mediaTrackHandler=t,s()(this,"track2stats",new Map)}findTrack2Stats(e,t){var r;if(e.trackIdentifier)r=e.trackIdentifier;else if(e.mid)r="remote"===t?this.mediaTrackHandler.getRemoteTrackIdByMid(e.mid):this.mediaTrackHandler.getLocalTrackIdByMid(e.mid);else if(e.ssrc){var n=this.mediaSsrcHandler.findMidBySsrc(e.ssrc,t);if(!n)return;r="remote"===t?this.mediaTrackHandler.getRemoteTrackIdByMid(e.mid):this.mediaTrackHandler.getLocalTrackIdByMid(e.mid)}if(r){var i=this.track2stats.get(r);if(!i){var o=this.mediaTrackHandler.getTackById(r);if(void 0===o)return;var a="audio"===o.kind?o.kind:"video";i=new C(r,t,a),this.track2stats.set(r,i)}return i}}findLocalVideoTrackStats(e){var t=this.mediaTrackHandler.getLocalTracks("video");if(0!==t.length)return this.findTrack2Stats(e,"local")}getTrack2stats(){return this.track2stats}findTransceiverByTrackId(e){return this.mediaTrackHandler.getTransceiverByTrackId(e)}}class R{static getNonNegativeValue(e){var t=e;return"number"!==typeof t&&(t=Number(t)),isNaN(t)?0:Math.max(0,t)}}class x{static buildFramerateResolution(e,t){var r={height:t.frameHeight,width:t.frameWidth},n=t.framesPerSecond;r.height&&r.width&&e.setResolution(r),e.setFramerate(Math.round(n||0))}static calculateSimulcastFramerate(e,t,r,n){var i=e.getFramerate();if(!i){if(r){var o=t.timestamp-r.timestamp;if(o>0&&t.framesSent){var a=t.framesSent-r.framesSent;i=a/o*1e3}}if(!i)return}i=n?Math.round(i/n):0,e.setFramerate(i)}static buildCodec(e,t,r){var n=null===e||void 0===e?void 0:e.get(r.codecId);if(n){var i=n.mimeType.split("/")[1];i&&t.setCodec(i)}}static buildBitrateReceived(e,t,r){e.setBitrate({download:x.calculateBitrate(t.bytesReceived,r.bytesReceived,t.timestamp,r.timestamp),upload:0})}static buildBitrateSend(e,t,r){e.setBitrate({download:0,upload:this.calculateBitrate(t.bytesSent,r.bytesSent,t.timestamp,r.timestamp)})}static buildPacketsLost(e,t,r){var n="outbound-rtp"===t.type?"packetsSent":"packetsReceived",i=t[n];(!i||i<0)&&(i=0);var o=R.getNonNegativeValue(r[n]),a=Math.max(0,i-o),s=R.getNonNegativeValue(t.packetsLost),c=R.getNonNegativeValue(r.packetsLost),l=Math.max(0,s-c);e.setLoss({packetsTotal:a+l,packetsLost:l,isDownloadStream:"outbound-rtp"!==t.type})}static calculateBitrate(e,t,r,n){var i=R.getNonNegativeValue(e),o=R.getNonNegativeValue(t),a=Math.max(0,i-o),s=r-n,c=0;return s>0&&(c=Math.round(8*a/s)),c}static setTrackStatsState(e,t){var r;if(void 0!==t){var n="remote"===e.getType()?t.receiver.track:null===t||void 0===t||null===(r=t.sender)||void 0===r?void 0:r.track;void 0!==n&&null!==n&&"ended"!==n.readyState?(e.muted=n.muted,e.enabled=n.enabled,e.alive=!0):e.alive=!1}else e.alive=!1}static buildTrackSummary(e){var t={count:0,muted:0,maxJitter:0,maxPacketLoss:0,concealedAudio:0,totalAudio:0},r={count:0,muted:0,maxJitter:0,maxPacketLoss:0,concealedAudio:0,totalAudio:0},n=e.filter(e=>"remote"===e.getType()),i=n.filter(e=>"audio"===e.kind);return n.forEach(e=>{var n,o,a="video"===e.kind?t:r;(a.count++,e.alive&&e.muted&&a.muted++,a.maxJitter<e.getJitter()&&(a.maxJitter=e.getJitter()),a.maxPacketLoss<e.getLoss().packetsLost&&(a.maxPacketLoss=e.getLoss().packetsLost),i.length>0)&&(a.concealedAudio+=null===(n=e.getAudioConcealment())||void 0===n?void 0:n.concealedAudio,a.totalAudio+=null===(o=e.getAudioConcealment())||void 0===o?void 0:o.totalAudioDuration)}),{audioTrackSummary:r,videoTrackSummary:t}}static buildJitter(e,t){if("inbound-rtp"===t.type){var r=null===t||void 0===t?void 0:t.jitter;if(void 0!==r){var n=R.getNonNegativeValue(r);e.setJitter(Math.round(1e3*n))}else e.setJitter(-1)}}static buildAudioConcealment(e,t){if("inbound-rtp"===t.type){var r=1e3*(null===t||void 0===t?void 0:t.totalSamplesDuration)/(null===t||void 0===t?void 0:t.totalSamplesReceived),n=r*(null===t||void 0===t?void 0:t.concealedSamples),i=1e3*(null===t||void 0===t?void 0:t.totalSamplesDuration);e.setAudioConcealment(n,i)}}}class O{static build(e){var t={},r={download:0,upload:0},n={download:0,upload:0},i=0,o=0,a={local:new Map,remote:new Map},s={local:new Map,remote:new Map},c={local:new Map,remote:new Map},l=new Map,d=new Map,u=0,h=0,f=0,p=0,v=0,m=0;for(var[g,y]of e){var b=y.getLoss(),_=b.isDownloadStream?"download":"upload";if(r[_]+=b.packetsTotal,n[_]+=b.packetsLost,i+=y.getBitrate().download,o+=y.getBitrate().upload,"audio"===y.kind){var w=y.getAudioConcealment();v+=w.concealedAudio,m+=w.totalAudioDuration,u+=y.getBitrate().download,h+=y.getBitrate().upload}else f+=y.getBitrate().download,p+=y.getBitrate().upload;a[y.getType()].set(g,y.getResolution()),s[y.getType()].set(g,y.getFramerate()),c[y.getType()].set(g,y.getCodec()),"remote"===y.getType()&&(l.set(g,y.getJitter()),"audio"===y.kind&&d.set(g,y.getAudioConcealment())),y.resetBitrate()}return t.bitrate={upload:o,download:i},t.bitrate.audio={upload:h,download:u},t.bitrate.video={upload:p,download:f},t.packetLoss={total:O.calculatePacketLoss(n.download+n.upload,r.download+r.upload),download:O.calculatePacketLoss(n.download,r.download),upload:O.calculatePacketLoss(n.upload,r.upload)},t.audioConcealment=d,t.totalAudioConcealment={concealedAudio:v,totalAudioDuration:m},t.framerate=s,t.resolution=a,t.codec=c,t.jitter=l,t}static calculatePacketLoss(e,t){return!t||t<=0||!e||e<=0?0:Math.round(e/t*100)}}class M{static buildCallFeedReport(e,t,r){var n=r.getTransceivers(),i=[],o=[];return n.forEach(e=>{var t,r=null!==(t=e.sender)&&void 0!==t&&t.track?M.buildTrackStats(e.sender.track,"sender"):null,n=M.buildTrackStats(e.receiver.track,"receiver");i.push({mid:null==e.mid?"null":e.mid,direction:e.direction,currentDirection:null==e.currentDirection?"null":e.currentDirection,sender:r,receiver:n})}),{callId:e,opponentMemberId:t,transceiver:i,callFeeds:o}}static buildTrackStats(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--",i=null===(t=e.getSettings())||void 0===t?void 0:t.deviceId,o=null===(r=e.getConstraints())||void 0===r?void 0:r.deviceId;return{id:e.id,kind:e.kind,settingDeviceId:i||"unknown",constrainDeviceId:o||"unknown",muted:e.muted,enabled:e.enabled,readyState:e.readyState,label:n}}static expandCallFeedReport(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown";return e.callFeeds||(e.callFeeds=[]),t.forEach(t=>{var n=t.stream.getAudioTracks(),i=t.stream.getVideoTracks(),o=n.length>0?M.buildTrackStats(t.stream.getAudioTracks()[0],t.purpose):null,a=i.length>0?M.buildTrackStats(t.stream.getVideoTracks()[0],t.purpose):null,s={stream:t.stream.id,type:t.isLocal()?"local":"remote",audio:o,video:a,purpose:t.purpose,prefix:r,isVideoMuted:t.isVideoMuted(),isAudioMuted:t.isAudioMuted()};e.callFeeds.push(s)}),e}}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class D{constructor(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.callId=e,this.opponentMemberId=t,this.pc=r,this.emitter=n,this.isFocus=i,s()(this,"isActive",!0),s()(this,"previousStatsReport",void 0),s()(this,"currentStatsReport",void 0),s()(this,"connectionStats",new b),s()(this,"trackStats",void 0),r.addEventListener("signalingstatechange",this.onSignalStateChange.bind(this)),this.trackStats=new T(new k,new I(r))}processStats(e,t){var r=this;return o()((function*(){var n={isFirstCollection:void 0===r.previousStatsReport,receivedMedia:0,receivedAudioMedia:0,receivedVideoMedia:0,audioTrackSummary:{count:0,muted:0,maxPacketLoss:0,maxJitter:0,concealedAudio:0,totalAudio:0},videoTrackSummary:{count:0,muted:0,maxPacketLoss:0,maxJitter:0,concealedAudio:0,totalAudio:0}};if(r.isActive){var i=r.pc.getStats();if("function"===typeof(null===i||void 0===i?void 0:i.then))return i.then(i=>{var o,a;r.currentStatsReport="function"===typeof(null===i||void 0===i?void 0:i.result)?i.result():i;try{r.processStatsReport(e,t)}catch(error){return r.handleError(error),n}r.previousStatsReport=r.currentStatsReport,n.receivedMedia=r.connectionStats.bitrate.download,n.receivedAudioMedia=(null===(o=r.connectionStats.bitrate.audio)||void 0===o?void 0:o.download)||0,n.receivedVideoMedia=(null===(a=r.connectionStats.bitrate.video)||void 0===a?void 0:a.download)||0;var s=x.buildTrackSummary(Array.from(r.trackStats.getTrack2stats().values()));return P(P({},n),{},{audioTrackSummary:s.audioTrackSummary,videoTrackSummary:s.videoTrackSummary})}).catch(e=>(r.handleError(e),n));r.isActive=!1}return Promise.resolve(n)}))()}processStatsReport(e,t){var r,n=new Map;n.callId=this.callId,n.opponentMemberId=this.opponentMemberId,null===(r=this.currentStatsReport)||void 0===r||r.forEach(e=>{var t=this.previousStatsReport?this.previousStatsReport.get(e.id):null;if("candidate-pair"===e.type&&e.nominated&&"succeeded"===e.state)this.connectionStats.bandwidth=w.buildBandwidthReport(e),this.connectionStats.transport=S.buildReport(this.currentStatsReport,e,this.connectionStats.transport,this.isFocus);else if("inbound-rtp"===e.type||"outbound-rtp"===e.type){var r=this.trackStats.findTrack2Stats(e,"inbound-rtp"===e.type?"remote":"local");if(!r)return;if(t&&x.buildPacketsLost(r,e,t),"inbound-rtp"===e.type){x.buildFramerateResolution(r,e),t&&x.buildBitrateReceived(r,e,t);var i=this.trackStats.findTransceiverByTrackId(r.trackId);x.setTrackStatsState(r,i),x.buildJitter(r,e),x.buildAudioConcealment(r,e)}else t&&(n.set(r.trackId,R.getNonNegativeValue(e.bytesSent)),x.buildBitrateSend(r,e,t));x.buildCodec(this.currentStatsReport,r,e)}else if("track"===e.type&&"video"===e.kind&&!e.remoteSource){var o=this.trackStats.findLocalVideoTrackStats(e);if(!o)return;x.buildFramerateResolution(o,e),x.calculateSimulcastFramerate(o,e,t,this.trackStats.mediaTrackHandler.getActiveSimulcastStreams())}}),this.emitter.emitByteSendReport(n),this.emitter.emitCallFeedReport(M.buildCallFeedReport(this.callId,this.opponentMemberId,this.pc)),this.processAndEmitConnectionStatsReport()}setActive(e){this.isActive=e}getActive(){return this.isActive}handleError(e){this.isActive=!1,h["b"].warn("CallStatsReportGatherer ".concat(this.callId," processStatsReport fails and set to inactive ").concat(e))}processAndEmitConnectionStatsReport(){var e=O.build(this.trackStats.getTrack2stats());e.callId=this.callId,e.opponentMemberId=this.opponentMemberId,this.connectionStats.bandwidth=e.bandwidth,this.connectionStats.bitrate=e.bitrate,this.connectionStats.packetLoss=e.packetLoss,this.emitter.emitConnectionStatsReport(P(P({},e),{},{transport:this.connectionStats.transport})),this.connectionStats.transport=[]}stopProcessingStats(){}onSignalStateChange(){"stable"===this.pc.signalingState&&(this.pc.currentRemoteDescription&&this.trackStats.mediaSsrcHandler.parse(this.pc.currentRemoteDescription.sdp,"remote"),this.pc.currentLocalDescription&&this.trackStats.mediaSsrcHandler.parse(this.pc.currentLocalDescription.sdp,"local"))}setOpponentMemberId(e){this.opponentMemberId=e}}var j=n("8559");class L extends c["b"]{emitByteSendReport(e){this.emit(j["a"].BYTE_SENT_STATS,e)}emitConnectionStatsReport(e){this.emit(j["a"].CONNECTION_STATS,e)}emitCallFeedReport(e){this.emit(j["a"].CALL_FEED_REPORT,e)}emitSummaryStatsReport(e){this.emit(j["a"].SUMMARY_STATS,e)}}class N{constructor(e){this.emitter=e}build(e){var t=e.filter(e=>!e.isFirstCollection),r=t.length,n=e.length;if(0!==r){var i={receivedAudio:0,receivedVideo:0,receivedMedia:0,concealedAudio:0,totalAudio:0},o=0,a=0;t.forEach(e=>{this.countTrackListReceivedMedia(i,e),this.countConcealedAudio(i,e),o=this.buildMaxJitter(o,e),a=this.buildMaxPacketLoss(a,e)});var s=5,c={percentageReceivedMedia:Number((i.receivedMedia/r).toFixed(s)),percentageReceivedVideoMedia:Number((i.receivedVideo/r).toFixed(s)),percentageReceivedAudioMedia:Number((i.receivedAudio/r).toFixed(s)),maxJitter:o,maxPacketLoss:a,percentageConcealedAudio:Number(i.totalAudio>0?(i.concealedAudio/i.totalAudio).toFixed(s):0),peerConnections:n};this.emitter.emitSummaryStatsReport(c)}}static extendSummaryReport(e,t){var r=[],n=[];for(var i of t)for(var o of(n.push(i),i[1]))r.push(o);e.opponentDevicesInCall=Math.max(0,r.length-1),e.opponentUsersInCall=Math.max(0,n.length-1),e.diffDevicesToPeerConnections=Math.max(0,r.length-1)-e.peerConnections,e.ratioPeerConnectionToDevices=0==Math.max(0,r.length-1)?0:e.peerConnections/(r.length-1)}countTrackListReceivedMedia(e,t){var r=!1,n=!1;(t.receivedAudioMedia>0||0===t.audioTrackSummary.count)&&(e.receivedAudio++,r=!0),(t.receivedVideoMedia>0||0===t.videoTrackSummary.count||t.videoTrackSummary.muted>0&&t.videoTrackSummary.muted===t.videoTrackSummary.count)&&(e.receivedVideo++,n=!0),n&&r&&e.receivedMedia++}buildMaxJitter(e,t){return e<t.videoTrackSummary.maxJitter&&(e=t.videoTrackSummary.maxJitter),e<t.audioTrackSummary.maxJitter&&(e=t.audioTrackSummary.maxJitter),e}buildMaxPacketLoss(e,t){return e<t.videoTrackSummary.maxPacketLoss&&(e=t.videoTrackSummary.maxPacketLoss),e<t.audioTrackSummary.maxPacketLoss&&(e=t.audioTrackSummary.maxPacketLoss),e}countConcealedAudio(e,t){e.concealedAudio+=t.audioTrackSummary.concealedAudio,e.totalAudio+=t.audioTrackSummary.totalAudio}}class U{constructor(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;this.groupCallId=e,this.userId=t,this.interval=r,s()(this,"timer",void 0),s()(this,"gatherers",new Map),s()(this,"reports",new L),s()(this,"summaryStatsReportGatherer",new N(this.reports))}start(){void 0===this.timer&&this.interval>0&&(this.timer=setInterval(()=>{this.processStats()},this.interval))}stop(){void 0!==this.timer&&(clearInterval(this.timer),this.gatherers.forEach(e=>e.stopProcessingStats()))}hasStatsReportGatherer(e){return this.gatherers.has(e)}addStatsReportGatherer(e,t,r){return!this.hasStatsReportGatherer(e)&&(this.gatherers.set(e,new D(e,t,r,this.reports)),!0)}removeStatsReportGatherer(e){return this.gatherers.delete(e)}getStatsReportGatherer(e){return this.hasStatsReportGatherer(e)?this.gatherers.get(e):void 0}updateOpponentMember(e,t){var r;null===(r=this.getStatsReportGatherer(e))||void 0===r||r.setOpponentMemberId(t)}processStats(){var e=[];this.gatherers.forEach(t=>{e.push(t.processStats(this.groupCallId,this.userId))}),Promise.all(e).then(e=>this.summaryStatsReportGatherer.build(e)).catch(e=>{h["b"].error("Could not build summary stats report",e)})}setInterval(e){this.interval=e}}var F,B,K,q,V,W,$,z=n("3925");function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(function(e){e["Ring"]="m.ring",e["Prompt"]="m.prompt",e["Room"]="m.room"})(F||(F={})),function(e){e["Video"]="m.video",e["Voice"]="m.voice"}(B||(B={})),function(e){e["CallEnded"]="call_ended"}(K||(K={})),function(e){e["GroupCallStateChanged"]="group_call_state_changed",e["ActiveSpeakerChanged"]="active_speaker_changed",e["CallsChanged"]="calls_changed",e["UserMediaFeedsChanged"]="user_media_feeds_changed",e["ScreenshareFeedsChanged"]="screenshare_feeds_changed",e["LocalScreenshareStateChanged"]="local_screenshare_state_changed",e["LocalMuteStateChanged"]="local_mute_state_changed",e["ParticipantsChanged"]="participants_changed",e["Error"]="group_call_error"}(q||(q={})),function(e){e["ConnectionStats"]="GroupCall.connection_stats",e["ByteSentStats"]="GroupCall.byte_sent_stats",e["SummaryStats"]="GroupCall.summary_stats",e["CallFeedStats"]="GroupCall.call_feed_stats"}(V||(V={})),function(e){e["NoUserMedia"]="no_user_media",e["UnknownDevice"]="unknown_device",e["PlaceCallFailed"]="place_call_failed"}(W||(W={}));class Y extends Error{constructor(e,t,r){r?(super(t+": "+r),s()(this,"code",void 0)):(super(t),s()(this,"code",void 0)),this.code=e}}class J extends Y{constructor(e){super(W.UnknownDevice,"No device found for "+e),this.userId=e}}Error;(function(e){e["LocalCallFeedUninitialized"]="local_call_feed_uninitialized",e["InitializingLocalCallFeed"]="initializing_local_call_feed",e["LocalCallFeedInitialized"]="local_call_feed_initialized",e["Entered"]="entered",e["Ended"]="ended"})($||($={}));var X=36e5;function Z(e){var t;return(null===(t=e.getOpponentMember())||void 0===t?void 0:t.userId)||e.invitee||null}class Q extends c["b"]{constructor(e,t,r,n,i,o,a,c,p){var m,g,y=arguments.length>9&&void 0!==arguments[9]&&arguments[9],b=arguments.length>10?arguments[10]:void 0;super(),this.client=e,this.room=t,this.type=r,this.isPtt=n,this.intent=i,this.dataChannelsEnabled=a,this.dataChannelOptions=c,this.useLivekit=y,s()(this,"activeSpeakerInterval",1e3),s()(this,"retryCallInterval",5e3),s()(this,"participantTimeout",15e3),s()(this,"pttMaxTransmitTime",2e4),s()(this,"activeSpeaker",void 0),s()(this,"localCallFeed",void 0),s()(this,"localScreenshareFeed",void 0),s()(this,"localDesktopCapturerSourceId",void 0),s()(this,"userMediaFeeds",[]),s()(this,"screenshareFeeds",[]),s()(this,"groupCallId",void 0),s()(this,"allowCallWithoutVideoAndAudio",void 0),s()(this,"calls",new Map),s()(this,"callHandlers",new Map),s()(this,"activeSpeakerLoopInterval",void 0),s()(this,"retryCallLoopInterval",void 0),s()(this,"retryCallCounts",new Map),s()(this,"reEmitter",void 0),s()(this,"transmitTimer",null),s()(this,"participantsExpirationTimer",null),s()(this,"resendMemberStateTimer",null),s()(this,"initWithAudioMuted",!1),s()(this,"initWithVideoMuted",!1),s()(this,"initCallFeedPromise",void 0),s()(this,"_livekitServiceURL",void 0),s()(this,"stats",void 0),s()(this,"statsCollectIntervalTime",0),s()(this,"onConnectionStats",e=>{this.emit(V.ConnectionStats,{report:e})}),s()(this,"onByteSentStats",e=>{this.emit(V.ByteSentStats,{report:e})}),s()(this,"onSummaryStats",e=>{N.extendSummaryReport(e,this.participants),this.emit(V.SummaryStats,{report:e})}),s()(this,"onCallFeedReport",e=>{this.localCallFeed&&(e=M.expandCallFeedReport(e,[this.localCallFeed],"from-local-feed"));var t=[];this.forEachCall(r=>{r.callId===e.callId&&r.getFeeds().forEach(e=>t.push(e))}),e=M.expandCallFeedReport(e,t,"from-call-feed"),this.emit(V.CallFeedStats,{report:e})}),s()(this,"_state",$.LocalCallFeedUninitialized),s()(this,"_participants",new Map),s()(this,"_creationTs",null),s()(this,"_enteredViaAnotherSession",!1),s()(this,"onIncomingCall",e=>{var t,r;if(e.roomId===this.room.roomId)if(e.state===d["e"].Ringing){if(!e.groupCallId||e.groupCallId!==this.groupCallId)return h["b"].log("GroupCall ".concat(this.groupCallId," onIncomingCall() ignored because it doesn't match the current group call")),void e.reject();var n=null===(t=e.getOpponentMember())||void 0===t?void 0:t.userId;if(void 0!==n)if(this.useLivekit)h["b"].info("Received incoming call whilst in signaling-only mode! Ignoring.");else{var i=null!==(r=this.calls.get(n))&&void 0!==r?r:new Map,o=i.get(e.getOpponentDeviceId());if((null===o||void 0===o?void 0:o.callId)!==e.callId){h["b"].log("GroupCall ".concat(this.groupCallId," onIncomingCall() incoming call (userId=").concat(n,", callId=").concat(e.callId,")")),o&&o.hangup(d["c"].Replaced,!1),i.set(e.getOpponentDeviceId(),e),this.calls.set(n,i),this.initCall(e);var a=this.getLocalFeeds().map(e=>e.clone());if(!this.callExpected(e))for(var s of a)Object(d["h"])(s.stream.getAudioTracks(),!1),Object(d["h"])(s.stream.getVideoTracks(),!1);e.answerWithCallFeeds(a),this.emit(q.CallsChanged,this.calls)}}else h["b"].warn("GroupCall ".concat(this.groupCallId," onIncomingCall() incoming call with no member - ignoring"))}else h["b"].warn("GroupCall ".concat(this.groupCallId," onIncomingCall() incoming call no longer in ringing state - ignoring"))}),s()(this,"onRetryCallLoop",()=>{var e=!1;for(var[{userId:t},r]of this.participants){var n=this.calls.get(t),i=this.retryCallCounts.get(t);for(var[o,a]of r){var s,c,l=null===n||void 0===n?void 0:n.get(o),d=null!==(s=null===(c=i)||void 0===c?void 0:c.get(o))&&void 0!==s?s:0;(null===l||void 0===l?void 0:l.getOpponentSessionId())!==a.sessionId&&this.wantsOutgoingCall(t,o)&&d<3&&(void 0===i&&(i=new Map,this.retryCallCounts.set(t,i)),i.set(o,d+1),e=!0)}}e&&this.placeOutgoingCalls()}),s()(this,"onCallFeedsChanged",e=>{var t=Z(e),r=e.getOpponentDeviceId();if(!t)throw new Error("Cannot change call feeds without user id");var n=this.getUserMediaFeed(t,r),i=e.remoteUsermediaFeed,o=i!==n,a=this.calls.get(t),s=null===a||void 0===a?void 0:a.get(r);if((null===s||void 0===s?void 0:s.callId)===e.callId){o&&(!n&&i?this.addUserMediaFeed(i):n&&i?this.replaceUserMediaFeed(n,i):n&&!i&&this.removeUserMediaFeed(n));var c=this.getScreenshareFeed(t,r),l=e.remoteScreensharingFeed,d=l!==c;d&&(!c&&l?this.addScreenshareFeed(l):c&&l?this.replaceScreenshareFeed(c,l):c&&!l&&this.removeScreenshareFeed(c))}}),s()(this,"onCallStateChanged",(e,t,r)=>{var n;if(t!==d["e"].Ended){var i=this.localCallFeed.isAudioMuted();e.localUsermediaStream&&e.isMicrophoneMuted()!==i&&e.setMicrophoneMuted(i);var o=this.localCallFeed.isVideoMuted();e.localUsermediaStream&&e.isLocalVideoMuted()!==o&&e.setLocalVideoMuted(o);var a=null===(n=e.getOpponentMember())||void 0===n?void 0:n.userId;if(t===d["e"].Connected&&a){var s=this.retryCallCounts.get(a);null===s||void 0===s||s.delete(e.getOpponentDeviceId()),0===(null===s||void 0===s?void 0:s.size)&&this.retryCallCounts.delete(a)}}}),s()(this,"onCallHangup",e=>{var t,r;if(e.hangupReason!==d["c"].Replaced){var n=null!==(t=null===(r=e.getOpponentMember())||void 0===r?void 0:r.userId)&&void 0!==t?t:this.room.getMember(e.invitee).userId,i=this.calls.get(n);(null===i||void 0===i?void 0:i.get(e.getOpponentDeviceId()))===e&&(this.disposeCall(e,e.hangupReason),i.delete(e.getOpponentDeviceId()),0===i.size&&this.calls.delete(n),this.emit(q.CallsChanged,this.calls))}}),s()(this,"onCallReplaced",(e,t)=>{var r=e.getOpponentMember().userId,n=this.calls.get(r);void 0===n&&(n=new Map,this.calls.set(r,n)),e.hangup(d["c"].Replaced,!1),this.initCall(t),n.set(e.getOpponentDeviceId(),t),this.emit(q.CallsChanged,this.calls)}),s()(this,"onActiveSpeakerLoop",()=>{var e=void 0,t=void 0;for(var r of this.userMediaFeeds)if(!(r.isLocal()&&this.userMediaFeeds.length>1)){var n=r.speakingVolumeSamples.reduce((e,t)=>e+Math.max(t,l["c"])),i=n/r.speakingVolumeSamples.length;(!e||i>e)&&(e=i,t=r)}t&&this.activeSpeaker!==t&&e&&e>l["c"]&&(this.activeSpeaker=t,this.emit(q.ActiveSpeakerChanged,this.activeSpeaker))}),s()(this,"onRoomState",()=>this.updateParticipants()),s()(this,"onParticipantsChanged",()=>{this.forEachCall(e=>{var t=this.callExpected(e);for(var r of e.getLocalFeeds())Object(d["h"])(r.stream.getAudioTracks(),!r.isAudioMuted()&&t),Object(d["h"])(r.stream.getVideoTracks(),!r.isVideoMuted()&&t)}),this.state!==$.Entered||this.useLivekit||this.placeOutgoingCalls()}),s()(this,"onStateChanged",(e,t)=>{e!==$.Entered&&t!==$.Entered&&e!==$.Ended||(this.updateParticipants(),this.updateMemberState().catch(e=>h["b"].error("GroupCall ".concat(this.groupCallId,' onStateChanged() failed to update member state devices"'),e)))}),s()(this,"onLocalFeedsChanged",()=>{this.state===$.Entered&&this.updateMemberState().catch(e=>h["b"].error("GroupCall ".concat(this.groupCallId," onLocalFeedsChanged() failed to update member state feeds"),e))}),this.reEmitter=new f["a"](this),this.groupCallId=null!==o&&void 0!==o?o:Object(d["g"])(),this._livekitServiceURL=b,this.creationTs=null!==(m=null===(g=t.currentState.getStateEvents(v["b"].GroupCallPrefix,this.groupCallId))||void 0===g?void 0:g.getTs())&&void 0!==m?m:null,this.updateParticipants(),t.on(u["b"].Update,this.onRoomState),this.on(q.ParticipantsChanged,this.onParticipantsChanged),this.on(q.GroupCallStateChanged,this.onStateChanged),this.on(q.LocalScreenshareStateChanged,this.onLocalFeedsChanged),this.allowCallWithoutVideoAndAudio=!!p}create(){var e=this;return o()((function*(){return e.creationTs=Date.now(),e.client.groupCallEventHandler.groupCalls.set(e.room.roomId,e),e.client.emit(g["b"].Outgoing,e),yield e.sendCallStateEvent(),e}))()}sendCallStateEvent(){var e=this;return o()((function*(){var t={"m.intent":e.intent,"m.type":e.type,"io.element.ptt":e.isPtt,dataChannelsEnabled:e.dataChannelsEnabled,dataChannelOptions:e.dataChannelsEnabled?e.dataChannelOptions:void 0};e.livekitServiceURL&&(t["io.element.livekit_service_url"]=e.livekitServiceURL),yield e.client.sendStateEvent(e.room.roomId,v["b"].GroupCallPrefix,t,e.groupCallId)}))()}get livekitServiceURL(){return this._livekitServiceURL}updateLivekitServiceURL(e){return this._livekitServiceURL=e,this.sendCallStateEvent()}get state(){return this._state}set state(e){var t=this._state;e!==t&&(this._state=e,this.emit(q.GroupCallStateChanged,e,t))}get participants(){return this._participants}set participants(e){var t=this._participants,r=(e,t)=>e.sessionId===t.sessionId&&e.screensharing===t.screensharing,n=(e,t)=>Object(y["v"])(e,t,r);Object(y["v"])(e,t,n)||(this._participants=e,this.emit(q.ParticipantsChanged,e))}get creationTs(){return this._creationTs}set creationTs(e){this._creationTs=e}get enteredViaAnotherSession(){return this._enteredViaAnotherSession}set enteredViaAnotherSession(e){this._enteredViaAnotherSession=e,this.updateParticipants()}forEachCall(e){for(var t of this.calls.values())for(var r of t.values())e(r)}getLocalFeeds(){var e=[];return this.localCallFeed&&e.push(this.localCallFeed),this.localScreenshareFeed&&e.push(this.localScreenshareFeed),e}hasLocalParticipant(){var e,t;return null!==(e=null===(t=this.participants.get(this.room.getMember(this.client.getUserId())))||void 0===t?void 0:t.has(this.client.getDeviceId()))&&void 0!==e&&e}callExpected(e){var t,r=Z(e),n=null===r?null:this.room.getMember(r),i=e.getOpponentDeviceId();return null!==n&&void 0!==i&&void 0!==(null===(t=this.participants.get(n))||void 0===t?void 0:t.get(i))}initLocalCallFeed(){var e=this;return o()((function*(){if(e.useLivekit)h["b"].info("Livekit group call: not starting local call feed.");else{if(e.state!==$.LocalCallFeedUninitialized)throw new Error('Cannot initialize local call feed in the "'.concat(e.state,'" state.'));if(e.state=$.InitializingLocalCallFeed,e.initCallFeedPromise)return e.initCallFeedPromise;try{e.initCallFeedPromise=e.initLocalCallFeedInternal(),yield e.initCallFeedPromise}finally{e.initCallFeedPromise=void 0}}}))()}initLocalCallFeedInternal(){var e=this;return o()((function*(){var t;h["b"].log("GroupCall ".concat(e.groupCallId," initLocalCallFeedInternal() running"));try{t=yield e.client.getMediaHandler().getUserMediaStream(!0,e.type===B.Video)}catch(error){if(!e.allowCallWithoutVideoAndAudio)throw e.state=$.LocalCallFeedUninitialized,error;t=new MediaStream}if(e._state!==$.InitializingLocalCallFeed)throw e.client.getMediaHandler().stopUserMediaStream(t),new Error("Group call disposed while gathering media stream");var r=new l["a"]({client:e.client,roomId:e.room.roomId,userId:e.client.getUserId(),deviceId:e.client.getDeviceId(),stream:t,purpose:p["b"].Usermedia,audioMuted:e.initWithAudioMuted||0===t.getAudioTracks().length||e.isPtt,videoMuted:e.initWithVideoMuted||0===t.getVideoTracks().length});Object(d["h"])(t.getAudioTracks(),!r.isAudioMuted()),Object(d["h"])(t.getVideoTracks(),!r.isVideoMuted()),e.localCallFeed=r,e.addUserMediaFeed(r),e.state=$.LocalCallFeedInitialized}))()}updateLocalUsermediaStream(e){var t=this;return o()((function*(){if(t.localCallFeed){var r=t.localCallFeed.stream;t.localCallFeed.setNewStream(e);var n=t.localCallFeed.isAudioMuted(),i=t.localCallFeed.isVideoMuted();h["b"].log("GroupCall ".concat(t.groupCallId," updateLocalUsermediaStream() (oldStreamId=").concat(r.id,", newStreamId=").concat(e.id,", micShouldBeMuted=").concat(n,", vidShouldBeMuted=").concat(i,")")),Object(d["h"])(e.getAudioTracks(),!n),Object(d["h"])(e.getVideoTracks(),!i),t.client.getMediaHandler().stopUserMediaStream(r)}}))()}enter(){var e=this;return o()((function*(){if(e.state===$.LocalCallFeedUninitialized)yield e.initLocalCallFeed();else if(e.state!==$.LocalCallFeedInitialized)throw new Error('Cannot enter call in the "'.concat(e.state,'" state'));for(var t of(h["b"].log("GroupCall ".concat(e.groupCallId," enter() running")),e.state=$.Entered,e.client.on(m["b"].Incoming,e.onIncomingCall),e.client.callEventHandler.calls.values()))e.onIncomingCall(t);e.useLivekit||(e.retryCallLoopInterval=setInterval(e.onRetryCallLoop,e.retryCallInterval),e.activeSpeaker=void 0,e.onActiveSpeakerLoop(),e.activeSpeakerLoopInterval=setInterval(e.onActiveSpeakerLoop,e.activeSpeakerInterval))}))()}dispose(){var e;this.localCallFeed&&(this.removeUserMediaFeed(this.localCallFeed),this.localCallFeed=void 0),this.localScreenshareFeed&&(this.client.getMediaHandler().stopScreensharingStream(this.localScreenshareFeed.stream),this.removeScreenshareFeed(this.localScreenshareFeed),this.localScreenshareFeed=void 0,this.localDesktopCapturerSourceId=void 0),this.client.getMediaHandler().stopAllStreams(),null!==this.transmitTimer&&(clearTimeout(this.transmitTimer),this.transmitTimer=null),void 0!==this.retryCallLoopInterval&&(clearInterval(this.retryCallLoopInterval),this.retryCallLoopInterval=void 0),null!==this.participantsExpirationTimer&&(clearTimeout(this.participantsExpirationTimer),this.participantsExpirationTimer=null),this.state===$.Entered&&(this.forEachCall(e=>e.hangup(d["c"].UserHangup,!1)),this.activeSpeaker=void 0,clearInterval(this.activeSpeakerLoopInterval),this.retryCallCounts.clear(),clearInterval(this.retryCallLoopInterval),this.client.removeListener(m["b"].Incoming,this.onIncomingCall),null===(e=this.stats)||void 0===e||e.stop())}leave(){this.dispose(),this.state=$.LocalCallFeedUninitialized}terminate(){var e=arguments,t=this;return o()((function*(){var r=!(e.length>0&&void 0!==e[0])||e[0];if(t.dispose(),t.room.off(u["b"].Update,t.onRoomState),t.client.groupCallEventHandler.groupCalls.delete(t.room.roomId),t.client.emit(g["b"].Ended,t),t.state=$.Ended,r){var n=t.room.currentState.getStateEvents(v["b"].GroupCallPrefix,t.groupCallId);yield t.client.sendStateEvent(t.room.roomId,v["b"].GroupCallPrefix,H(H({},n.getContent()),{},{"m.terminated":K.CallEnded}),t.groupCallId)}}))()}isLocalVideoMuted(){return!this.localCallFeed||this.localCallFeed.isVideoMuted()}isMicrophoneMuted(){return!this.localCallFeed||this.localCallFeed.isAudioMuted()}setMicrophoneMuted(e){var t=this;return o()((function*(){if(!e&&!(yield t.client.getMediaHandler().hasAudioDevice()))return!1;var r=!e&&t.isPtt;t.isPtt&&(!e&&t.isMicrophoneMuted()?t.transmitTimer=setTimeout(()=>{t.setMicrophoneMuted(!0)},t.pttMaxTransmitTime):e&&!t.isMicrophoneMuted()&&(null!==t.transmitTimer&&clearTimeout(t.transmitTimer),t.transmitTimer=null)),t.forEachCall(t=>{var r;return null===(r=t.localUsermediaFeed)||void 0===r?void 0:r.setAudioVideoMuted(e,null)});var n=function(){var e=o()((function*(){var e=[];t.forEachCall(t=>e.push(t.sendMetadataUpdate())),yield Promise.all(e).catch(e=>h["b"].info("GroupCall ".concat(t.groupCallId," setMicrophoneMuted() failed to send some metadata updates"),e))}));return function(){return e.apply(this,arguments)}}();if(r&&(yield n()),t.localCallFeed){h["b"].log("GroupCall ".concat(t.groupCallId," setMicrophoneMuted() (streamId=").concat(t.localCallFeed.stream.id,", muted=").concat(e,")"));var i=yield t.checkAudioPermissionIfNecessary(e);if(!i)return!1;t.localCallFeed.setAudioVideoMuted(e,null),Object(d["h"])(t.localCallFeed.stream.getAudioTracks(),!e)}else h["b"].log("GroupCall ".concat(t.groupCallId," setMicrophoneMuted() no stream muted (muted=").concat(e,")")),t.initWithAudioMuted=e;return t.forEachCall(r=>Object(d["h"])(r.localUsermediaFeed.stream.getAudioTracks(),!e&&t.callExpected(r))),t.emit(q.LocalMuteStateChanged,e,t.isLocalVideoMuted()),r||(yield n()),!0}))()}checkAudioPermissionIfNecessary(t){var r=this;return o()((function*(){try{if(!t&&r.localCallFeed&&!r.localCallFeed.hasAudioTrack){var n=yield r.client.getMediaHandler().getUserMediaStream(!0,!r.localCallFeed.isVideoMuted());if(0===(null===n||void 0===n?void 0:n.getTracks().length))return h["b"].log("GroupCall ".concat(r.groupCallId," setMicrophoneMuted() no device to receive local stream, muted=").concat(t)),!1}}catch(e){return h["b"].log("GroupCall ".concat(r.groupCallId," setMicrophoneMuted() no device or permission to receive local stream, muted=").concat(t)),!1}return!0}))()}setLocalVideoMuted(e){var t=this;return o()((function*(){if(!e&&!(yield t.client.getMediaHandler().hasVideoDevice()))return!1;if(t.localCallFeed){h["b"].log("GroupCall ".concat(t.groupCallId," setLocalVideoMuted() (stream=").concat(t.localCallFeed.stream.id,", muted=").concat(e,")"));try{var r=yield t.client.getMediaHandler().getUserMediaStream(!0,!e);yield t.updateLocalUsermediaStream(r),t.localCallFeed.setAudioVideoMuted(null,e),Object(d["h"])(t.localCallFeed.stream.getVideoTracks(),!e)}catch(_){return h["b"].log("GroupCall ".concat(t.groupCallId," setLocalVideoMuted() no device or permission to receive local stream, muted=").concat(e)),!1}}else h["b"].log("GroupCall ".concat(t.groupCallId," setLocalVideoMuted() no stream muted (muted=").concat(e,")")),t.initWithVideoMuted=e;var n=[];return t.forEachCall(t=>n.push(t.setLocalVideoMuted(e))),yield Promise.all(n),t.forEachCall(r=>Object(d["h"])(r.localUsermediaFeed.stream.getVideoTracks(),!e&&t.callExpected(r))),t.emit(q.LocalMuteStateChanged,t.isMicrophoneMuted(),e),!0}))()}setScreensharingEnabled(e){var t=arguments,r=this;return o()((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:{};if(e===r.isScreensharing())return e;if(!e)return r.forEachCall(e=>{e.localScreensharingFeed&&e.removeLocalFeed(e.localScreensharingFeed)}),r.client.getMediaHandler().stopScreensharingStream(r.localScreenshareFeed.stream),r.removeScreenshareFeed(r.localScreenshareFeed),r.localScreenshareFeed=void 0,r.localDesktopCapturerSourceId=void 0,r.emit(q.LocalScreenshareStateChanged,!1,void 0,void 0),!1;try{h["b"].log("GroupCall ".concat(r.groupCallId," setScreensharingEnabled() is asking for screensharing permissions"));var i=yield r.client.getMediaHandler().getScreensharingStream(n),o=function*(e){var t=()=>{r.setScreensharingEnabled(!1),e.removeEventListener("ended",t)};e.addEventListener("ended",t)};for(var a of i.getTracks())yield*o(a);return h["b"].log("GroupCall ".concat(r.groupCallId," setScreensharingEnabled() granted screensharing permissions. Setting screensharing enabled on all calls")),r.localDesktopCapturerSourceId=n.desktopCapturerSourceId,r.localScreenshareFeed=new l["a"]({client:r.client,roomId:r.room.roomId,userId:r.client.getUserId(),deviceId:r.client.getDeviceId(),stream:i,purpose:p["b"].Screenshare,audioMuted:!1,videoMuted:!1}),r.addScreenshareFeed(r.localScreenshareFeed),r.emit(q.LocalScreenshareStateChanged,!0,r.localScreenshareFeed,r.localDesktopCapturerSourceId),r.forEachCall(e=>e.pushLocalFeed(r.localScreenshareFeed.clone())),!0}catch(error){if(n.throwOnFail)throw error;return h["b"].error("GroupCall ".concat(r.groupCallId," setScreensharingEnabled() enabling screensharing error"),error),r.emit(q.Error,new Y(W.NoUserMedia,"Failed to get screen-sharing stream: ",error)),!1}}))()}isScreensharing(){return!!this.localScreenshareFeed}wantsOutgoingCall(e,t){var r=this.client.getUserId(),n=this.client.getDeviceId();return e>=r&&(e!==r||t>n)}placeOutgoingCalls(){var e=this,t=!1,r=function(r){var n,o=null!==(n=e.calls.get(r))&&void 0!==n?n:new Map,a=function(n){var i=o.get(n);if((null===i||void 0===i?void 0:i.getOpponentSessionId())!==c.sessionId&&e.wantsOutgoingCall(r,n)){t=!0,void 0!==i&&(h["b"].debug("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() replacing call (userId=").concat(r,", deviceId=").concat(n,", callId=").concat(i.callId,")")),i.hangup(d["c"].NewSession,!1));var a=Object(d["f"])(e.client,e.room.roomId,{invitee:r,opponentDeviceId:n,opponentSessionId:c.sessionId,groupCallId:e.groupCallId});null===a?(h["b"].error("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() failed to create call (userId=").concat(r,", device=").concat(n,")")),o.delete(n)):(e.initCall(a),o.set(n,a),h["b"].debug("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() placing call (userId=").concat(r,", deviceId=").concat(n,", sessionId=").concat(c.sessionId,")")),a.placeCallWithCallFeeds(e.getLocalFeeds().map(e=>e.clone()),c.screensharing).then(()=>{e.dataChannelsEnabled&&a.createDataChannel("datachannel",e.dataChannelOptions)}).catch(t=>{h["b"].warn("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() failed to place call (userId=").concat(r,")"),t),t instanceof d["b"]&&t.code===W.UnknownDevice?e.emit(q.Error,t):e.emit(q.Error,new Y(W.PlaceCallFailed,"Failed to place call to ".concat(r))),a.hangup(d["c"].SignallingFailed,!1),o.get(n)===a&&o.delete(n)}))}};for(var[s,c]of i)a(s);o.size>0?e.calls.set(r,o):e.calls.delete(r)};for(var[{userId:n},i]of this.participants)r(n);t&&this.emit(q.CallsChanged,this.calls)}getMemberStateEvents(e){return void 0===e?this.room.currentState.getStateEvents(v["b"].GroupCallMemberPrefix):this.room.currentState.getStateEvents(v["b"].GroupCallMemberPrefix,e)}initCall(e){var t=Z(e);if(!t)throw new Error("Cannot init call without user id");var r=()=>this.onCallFeedsChanged(e),n=(t,r)=>this.onCallStateChanged(e,t,r),i=this.onCallHangup,o=t=>this.onCallReplaced(e,t),a=this.callHandlers.get(t);void 0===a&&(a=new Map,this.callHandlers.set(t,a)),a.set(e.getOpponentDeviceId(),{onCallFeedsChanged:r,onCallStateChanged:n,onCallHangup:i,onCallReplaced:o}),e.on(d["d"].FeedsChanged,r),e.on(d["d"].State,n),e.on(d["d"].Hangup,i),e.on(d["d"].Replaced,o),e.isPtt=this.isPtt,this.reEmitter.reEmit(e,Object.values(d["d"])),e.initStats(this.getGroupCallStats()),r()}disposeCall(e,t){var r=Z(e),n=e.getOpponentDeviceId();if(!r)throw new Error("Cannot dispose call without user id");var i=this.callHandlers.get(r),{onCallFeedsChanged:o,onCallStateChanged:a,onCallHangup:s,onCallReplaced:c}=i.get(n);if(e.removeListener(d["d"].FeedsChanged,o),e.removeListener(d["d"].State,a),e.removeListener(d["d"].Hangup,s),e.removeListener(d["d"].Replaced,c),i.delete(r),0===i.size&&this.callHandlers.delete(r),e.hangupReason!==d["c"].Replaced){var l=this.getUserMediaFeed(r,n);l&&this.removeUserMediaFeed(l);var u=this.getScreenshareFeed(r,n);u&&this.removeScreenshareFeed(u)}}getUserMediaFeed(e,t){return this.userMediaFeeds.find(r=>r.userId===e&&r.deviceId===t)}addUserMediaFeed(e){this.userMediaFeeds.push(e),e.measureVolumeActivity(!0),this.emit(q.UserMediaFeedsChanged,this.userMediaFeeds)}replaceUserMediaFeed(e,t){var r=this.userMediaFeeds.findIndex(t=>t.userId===e.userId&&t.deviceId===e.deviceId);if(-1===r)throw new Error("Couldn't find user media feed to replace");this.userMediaFeeds.splice(r,1,t),e.dispose(),t.measureVolumeActivity(!0),this.emit(q.UserMediaFeedsChanged,this.userMediaFeeds)}removeUserMediaFeed(e){var t=this.userMediaFeeds.findIndex(t=>t.userId===e.userId&&t.deviceId===e.deviceId);if(-1===t)throw new Error("Couldn't find user media feed to remove");this.userMediaFeeds.splice(t,1),e.dispose(),this.emit(q.UserMediaFeedsChanged,this.userMediaFeeds),this.activeSpeaker===e&&(this.activeSpeaker=this.userMediaFeeds[0],this.emit(q.ActiveSpeakerChanged,this.activeSpeaker))}getScreenshareFeed(e,t){return this.screenshareFeeds.find(r=>r.userId===e&&r.deviceId===t)}addScreenshareFeed(e){this.screenshareFeeds.push(e),this.emit(q.ScreenshareFeedsChanged,this.screenshareFeeds)}replaceScreenshareFeed(e,t){var r=this.screenshareFeeds.findIndex(t=>t.userId===e.userId&&t.deviceId===e.deviceId);if(-1===r)throw new Error("Couldn't find screenshare feed to replace");this.screenshareFeeds.splice(r,1,t),e.dispose(),this.emit(q.ScreenshareFeedsChanged,this.screenshareFeeds)}removeScreenshareFeed(e){var t=this.screenshareFeeds.findIndex(t=>t.userId===e.userId&&t.deviceId===e.deviceId);if(-1===t)throw new Error("Couldn't find screenshare feed to remove");this.screenshareFeeds.splice(t,1),e.dispose(),this.emit(q.ScreenshareFeedsChanged,this.screenshareFeeds)}updateParticipants(){var e=this.room.getMember(this.client.getUserId());if(e)if(null!==this.participantsExpirationTimer&&(clearTimeout(this.participantsExpirationTimer),this.participantsExpirationTimer=null),this.state!==$.Ended){var t=new Map,r=Date.now(),n=this.state===$.Entered||this.enteredViaAnotherSession,i=1/0;for(var o of this.getMemberStateEvents()){var a=this.room.getMember(o.getStateKey()),s=o.getContent(),c=Array.isArray(s["m.calls"])?s["m.calls"]:[],l=c.find(e=>e["m.call_id"]===this.groupCallId),d=Array.isArray(null===l||void 0===l?void 0:l["m.devices"])?l["m.devices"]:[],u=d.filter(e=>"string"===typeof e.device_id&&"string"===typeof e.session_id&&"number"===typeof e.expires_ts&&e.expires_ts>r&&Array.isArray(e.feeds));if(n||(null===a||void 0===a?void 0:a.userId)!==this.client.getUserId()||(u=u.filter(e=>e.device_id!==this.client.getDeviceId())),u.length>0&&(null===a||void 0===a?void 0:a.membership)===z["a"].Join){var f=new Map;for(var v of(t.set(a,f),u))f.set(v.device_id,{sessionId:v.session_id,screensharing:v.feeds.some(e=>e.purpose===p["b"].Screenshare)}),v.expires_ts<i&&(i=v.expires_ts)}}if(n){var m=t.get(e);void 0===m&&(m=new Map,t.set(e,m)),m.has(this.client.getDeviceId())||m.set(this.client.getDeviceId(),{sessionId:this.client.getSessionId(),screensharing:this.getLocalFeeds().some(e=>e.purpose===p["b"].Screenshare)})}this.participants=t,i<1/0&&(this.participantsExpirationTimer=setTimeout(()=>this.updateParticipants(),i-r))}else this.participants=new Map;else h["b"].warn("GroupCall ".concat(this.groupCallId," updateParticipants() tried to update participants before local room member is available"))}updateDevices(e){var t=arguments,r=this;return o()((function*(){var n,i=t.length>1&&void 0!==t[1]&&t[1],o=Date.now(),a=r.client.getUserId(),s=r.getMemberStateEvents(a),c=null!==(n=null===s||void 0===s?void 0:s.getContent())&&void 0!==n?n:{},l=Array.isArray(c["m.calls"])?c["m.calls"]:[],d=null,u=[];for(var h of l)h["m.call_id"]===r.groupCallId?d=h:u.push(h);null===d&&(d={});var f=Array.isArray(d["m.devices"])?d["m.devices"]:[],p=f.filter(e=>"string"===typeof e.device_id&&"string"===typeof e.session_id&&"number"===typeof e.expires_ts&&e.expires_ts>o&&Array.isArray(e.feeds)),m=e(p);if(null!==m){var g=[...u];m.length>0&&g.push(H(H({},d),{},{"m.call_id":r.groupCallId,"m.devices":m}));var y={"m.calls":g};yield r.client.sendStateEvent(r.room.roomId,v["b"].GroupCallMemberPrefix,y,a,{keepAlive:i})}}))()}addDeviceToMemberState(){var e=this;return o()((function*(){yield e.updateDevices(t=>[...t.filter(t=>t.device_id!==e.client.getDeviceId()),{device_id:e.client.getDeviceId(),session_id:e.client.getSessionId(),expires_ts:Date.now()+X,feeds:e.getLocalFeeds().map(e=>({purpose:e.purpose}))}])}))()}updateMemberState(){var t=this;return o()((function*(){null!==t.resendMemberStateTimer&&(clearInterval(t.resendMemberStateTimer),t.resendMemberStateTimer=null),t.state===$.Entered?(yield t.addDeviceToMemberState(),t.resendMemberStateTimer=setInterval(o()((function*(){h["b"].log("GroupCall ".concat(t.groupCallId,' updateMemberState() resending call member state"'));try{yield t.addDeviceToMemberState()}catch(e){h["b"].error("GroupCall ".concat(t.groupCallId," updateMemberState() failed to resend call member state"),e)}})),3*X/4)):yield t.updateDevices(e=>e.filter(e=>e.device_id!==t.client.getDeviceId()),!0)}))()}cleanMemberState(){var e=this;return o()((function*(){var{devices:t}=yield e.client.getDevices(),r=new Map(t.map(e=>[e.device_id,e]));yield e.updateDevices(t=>{var n=t.filter(t=>{var n=r.get(t.device_id);return void 0!==(null===n||void 0===n?void 0:n.last_seen_ts)&&!(t.device_id===e.client.getDeviceId()&&e.state!==$.Entered&&!e.enteredViaAnotherSession)});return n.length===t.length?null:n})}))()}getGroupCallStats(){if(void 0===this.stats){var e=this.client.getUserId()||"unknown";this.stats=new U(this.groupCallId,e,this.statsCollectIntervalTime),this.stats.reports.on(j["a"].CONNECTION_STATS,this.onConnectionStats),this.stats.reports.on(j["a"].BYTE_SENT_STATS,this.onByteSentStats),this.stats.reports.on(j["a"].SUMMARY_STATS,this.onSummaryStats),this.stats.reports.on(j["a"].CALL_FEED_REPORT,this.onCallFeedReport)}return this.stats}setGroupCallStatsInterval(e){this.statsCollectIntervalTime=e,void 0!==this.stats&&(this.stats.stop(),this.stats.setInterval(e),e>0&&this.stats.start())}}},"387f":function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},3883:function(e,t,r){"use strict";r.r(t);var n=r("918e");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"388d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetDriver=void 0;var n=r("dcab");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=l(e,"string");return"symbol"===i(t)?t:String(t)}function l(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var d=function(){function e(){o(this,e)}return s(e,[{key:"validateCapabilities",value:function(e){return Promise.resolve(new Set)}},{key:"sendEvent",value:function(e,t){return Promise.reject(new Error("Failed to override function"))}},{key:"sendDelayedEvent",value:function(e,t,r,n){return Promise.reject(new Error("Failed to override function"))}},{key:"updateDelayedEvent",value:function(e,t){return Promise.reject(new Error("Failed to override function"))}},{key:"sendToDevice",value:function(e,t,r){return Promise.reject(new Error("Failed to override function"))}},{key:"readRoomAccountData",value:function(e){return Promise.resolve([])}},{key:"readRoomEvents",value:function(e,t,r){return Promise.resolve([])}},{key:"readStateEvents",value:function(e,t,r){return Promise.resolve([])}},{key:"readEventRelations",value:function(e,t,r,n,i,o,a,s){return Promise.resolve({chunk:[]})}},{key:"askOpenID",value:function(e){e.update({state:n.OpenIDRequestState.Blocked})}},{key:"navigate",value:function(e){throw new Error("Navigation is not implemented")}},{key:"getTurnServers",value:function(){throw new Error("TURN server support is not implemented")}},{key:"searchUserDirectory",value:function(e,t){return Promise.resolve({limited:!1,results:[]})}},{key:"getMediaConfig",value:function(){throw new Error("Get media config is not implemented")}},{key:"uploadFile",value:function(e){throw new Error("Upload file is not implemented")}},{key:"downloadFile",value:function(e){throw new Error("Download file is not implemented")}}]),e}();t.WidgetDriver=d},3925:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["Ban"]="ban",e["Invite"]="invite",e["Join"]="join",e["Knock"]="knock",e["Leave"]="leave"}(n||(n={}))},3934:function(e,t,r){"use strict";var n=r("c532");e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return function(){return!0}}()},"396a":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var n,i=r("9523"),o=r.n(i);(function(e){e[e["Blocked"]=-1]="Blocked",e[e["Unverified"]=0]="Unverified",e[e["Verified"]=1]="Verified"})(n||(n={}));class a{constructor(e){o()(this,"deviceId",void 0),o()(this,"userId",void 0),o()(this,"algorithms",void 0),o()(this,"keys",void 0),o()(this,"verified",void 0),o()(this,"signatures",void 0),o()(this,"displayName",void 0),o()(this,"dehydrated",!1),this.deviceId=e.deviceId,this.userId=e.userId,this.algorithms=e.algorithms,this.keys=e.keys,this.verified=e.verified||n.Unverified,this.signatures=e.signatures||new Map,this.displayName=e.displayName,this.dehydrated=!!e.dehydrated}getFingerprint(){return this.keys.get("ed25519:".concat(this.deviceId))}getIdentityKey(){return this.keys.get("curve25519:".concat(this.deviceId))}}},"399f":function(t,r,n){(function(t){(function(t,r){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function o(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"===typeof t?t.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:n(5).Buffer}catch(e){}function c(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void i(!1,"Invalid character in "+e)}function l(e,t,r){var n=c(e,r);return r-1>=t&&(n|=c(e,r-1)<<4),n}function d(e,t,r,n){for(var o=0,a=0,s=Math.min(e.length,r),c=t;c<s;c++){var l=e.charCodeAt(c)-48;o*=n,a=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&a<n,"Invalid character"),o+=a}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(a.isBN=function(e){return e instanceof a||null!==e&&"object"===typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var n=0;"-"===e[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,r):(this._parseBase(e,t,n),"le"===r&&this._initArray(this.toArray(),t,r)))},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(i("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++);return this._strip()},a.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=l(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else{var s=e.length-t;for(n=s%2===0?t+1:t;n<e.length;n+=2)i=l(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8}this._strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,c=0,l=r;l<s;l+=n)c=d(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var u=1;for(c=d(e,l,e.length,t),l=0;l<a;l++)u*=t;this.imuln(u),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){u(e,this)},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){while(this.length<e)this.words[this.length++]=0;return this},a.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){a.prototype.inspect=h}else a.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(e,t){var r;if(e=e||10,t=0|t||1,16===e||"hex"===e){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],c=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,n+=2,n>=26&&(n-=26,a--),r=0!==o||a!==this.length-1?f[6-c.length]+c+r:c+r}0!==o&&(r=o.toString(16)+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],d=v[e];r="";var u=this.clone();u.negative=0;while(!u.isZero()){var h=u.modrn(d).toString(e);u=u.idivn(d),r=u.isZero()?h+r:f[l-h.length]+h+r}this.isZero()&&(r="0"+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var m=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function g(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}function y(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,c=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var d=c>>>26,u=67108863&c,h=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=h;f++){var p=l-f|0;i=0|e.words[p],o=0|t.words[f],a=i*o+u,d+=a/67108864|0,u=67108863&a}r.words[l]=0|u,c=0|d}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}a.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var a=m(e,o),s="le"===t?"LE":"BE";return this["_toArrayLike"+s](a,n),a},a.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length){e[r++]=n;while(r<e.length)e[r++]=0}},a.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0){e[r--]=n;while(r>=0)e[r--]=0}},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){while(this.length<e.length)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return i(0===(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return i(0===(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return i(0===(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){i("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){i("number"===typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},a.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,a=0;a<n.length;a++)t=(0|r.words[a])-(0|n.words[a])+o,o=t>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)t=(0|r.words[a])+o,o=t>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var b=function(e,t,r){var n,i,o,a=e.words,s=t.words,c=r.words,l=0,d=0|a[0],u=8191&d,h=d>>>13,f=0|a[1],p=8191&f,v=f>>>13,m=0|a[2],g=8191&m,y=m>>>13,b=0|a[3],_=8191&b,w=b>>>13,S=0|a[4],E=8191&S,k=S>>>13,I=0|a[5],C=8191&I,T=I>>>13,R=0|a[6],x=8191&R,O=R>>>13,M=0|a[7],A=8191&M,P=M>>>13,D=0|a[8],j=8191&D,L=D>>>13,N=0|a[9],U=8191&N,F=N>>>13,B=0|s[0],K=8191&B,q=B>>>13,V=0|s[1],W=8191&V,$=V>>>13,z=0|s[2],G=8191&z,H=z>>>13,Y=0|s[3],J=8191&Y,X=Y>>>13,Z=0|s[4],Q=8191&Z,ee=Z>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ce=8191&se,le=se>>>13,de=0|s[8],ue=8191&de,he=de>>>13,fe=0|s[9],pe=8191&fe,ve=fe>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(u,K),i=Math.imul(u,q),i=i+Math.imul(h,K)|0,o=Math.imul(h,q);var me=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,K),i=Math.imul(p,q),i=i+Math.imul(v,K)|0,o=Math.imul(v,q),n=n+Math.imul(u,W)|0,i=i+Math.imul(u,$)|0,i=i+Math.imul(h,W)|0,o=o+Math.imul(h,$)|0;var ge=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,K),i=Math.imul(g,q),i=i+Math.imul(y,K)|0,o=Math.imul(y,q),n=n+Math.imul(p,W)|0,i=i+Math.imul(p,$)|0,i=i+Math.imul(v,W)|0,o=o+Math.imul(v,$)|0,n=n+Math.imul(u,G)|0,i=i+Math.imul(u,H)|0,i=i+Math.imul(h,G)|0,o=o+Math.imul(h,H)|0;var ye=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,K),i=Math.imul(_,q),i=i+Math.imul(w,K)|0,o=Math.imul(w,q),n=n+Math.imul(g,W)|0,i=i+Math.imul(g,$)|0,i=i+Math.imul(y,W)|0,o=o+Math.imul(y,$)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,H)|0,i=i+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(u,J)|0,i=i+Math.imul(u,X)|0,i=i+Math.imul(h,J)|0,o=o+Math.imul(h,X)|0;var be=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,K),i=Math.imul(E,q),i=i+Math.imul(k,K)|0,o=Math.imul(k,q),n=n+Math.imul(_,W)|0,i=i+Math.imul(_,$)|0,i=i+Math.imul(w,W)|0,o=o+Math.imul(w,$)|0,n=n+Math.imul(g,G)|0,i=i+Math.imul(g,H)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,H)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,X)|0,i=i+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(u,Q)|0,i=i+Math.imul(u,ee)|0,i=i+Math.imul(h,Q)|0,o=o+Math.imul(h,ee)|0;var _e=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(C,K),i=Math.imul(C,q),i=i+Math.imul(T,K)|0,o=Math.imul(T,q),n=n+Math.imul(E,W)|0,i=i+Math.imul(E,$)|0,i=i+Math.imul(k,W)|0,o=o+Math.imul(k,$)|0,n=n+Math.imul(_,G)|0,i=i+Math.imul(_,H)|0,i=i+Math.imul(w,G)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,J)|0,i=i+Math.imul(g,X)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,X)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,ee)|0,i=i+Math.imul(v,Q)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(u,re)|0,i=i+Math.imul(u,ne)|0,i=i+Math.imul(h,re)|0,o=o+Math.imul(h,ne)|0;var we=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(x,K),i=Math.imul(x,q),i=i+Math.imul(O,K)|0,o=Math.imul(O,q),n=n+Math.imul(C,W)|0,i=i+Math.imul(C,$)|0,i=i+Math.imul(T,W)|0,o=o+Math.imul(T,$)|0,n=n+Math.imul(E,G)|0,i=i+Math.imul(E,H)|0,i=i+Math.imul(k,G)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(_,J)|0,i=i+Math.imul(_,X)|0,i=i+Math.imul(w,J)|0,o=o+Math.imul(w,X)|0,n=n+Math.imul(g,Q)|0,i=i+Math.imul(g,ee)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0,n=n+Math.imul(p,re)|0,i=i+Math.imul(p,ne)|0,i=i+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(u,oe)|0,i=i+Math.imul(u,ae)|0,i=i+Math.imul(h,oe)|0,o=o+Math.imul(h,ae)|0;var Se=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(A,K),i=Math.imul(A,q),i=i+Math.imul(P,K)|0,o=Math.imul(P,q),n=n+Math.imul(x,W)|0,i=i+Math.imul(x,$)|0,i=i+Math.imul(O,W)|0,o=o+Math.imul(O,$)|0,n=n+Math.imul(C,G)|0,i=i+Math.imul(C,H)|0,i=i+Math.imul(T,G)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(E,J)|0,i=i+Math.imul(E,X)|0,i=i+Math.imul(k,J)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(_,Q)|0,i=i+Math.imul(_,ee)|0,i=i+Math.imul(w,Q)|0,o=o+Math.imul(w,ee)|0,n=n+Math.imul(g,re)|0,i=i+Math.imul(g,ne)|0,i=i+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0,n=n+Math.imul(p,oe)|0,i=i+Math.imul(p,ae)|0,i=i+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0,n=n+Math.imul(u,ce)|0,i=i+Math.imul(u,le)|0,i=i+Math.imul(h,ce)|0,o=o+Math.imul(h,le)|0;var Ee=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(j,K),i=Math.imul(j,q),i=i+Math.imul(L,K)|0,o=Math.imul(L,q),n=n+Math.imul(A,W)|0,i=i+Math.imul(A,$)|0,i=i+Math.imul(P,W)|0,o=o+Math.imul(P,$)|0,n=n+Math.imul(x,G)|0,i=i+Math.imul(x,H)|0,i=i+Math.imul(O,G)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(C,J)|0,i=i+Math.imul(C,X)|0,i=i+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=i+Math.imul(E,ee)|0,i=i+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=i+Math.imul(_,ne)|0,i=i+Math.imul(w,re)|0,o=o+Math.imul(w,ne)|0,n=n+Math.imul(g,oe)|0,i=i+Math.imul(g,ae)|0,i=i+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,n=n+Math.imul(p,ce)|0,i=i+Math.imul(p,le)|0,i=i+Math.imul(v,ce)|0,o=o+Math.imul(v,le)|0,n=n+Math.imul(u,ue)|0,i=i+Math.imul(u,he)|0,i=i+Math.imul(h,ue)|0,o=o+Math.imul(h,he)|0;var ke=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,K),i=Math.imul(U,q),i=i+Math.imul(F,K)|0,o=Math.imul(F,q),n=n+Math.imul(j,W)|0,i=i+Math.imul(j,$)|0,i=i+Math.imul(L,W)|0,o=o+Math.imul(L,$)|0,n=n+Math.imul(A,G)|0,i=i+Math.imul(A,H)|0,i=i+Math.imul(P,G)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(x,J)|0,i=i+Math.imul(x,X)|0,i=i+Math.imul(O,J)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(C,Q)|0,i=i+Math.imul(C,ee)|0,i=i+Math.imul(T,Q)|0,o=o+Math.imul(T,ee)|0,n=n+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,i=i+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(_,oe)|0,i=i+Math.imul(_,ae)|0,i=i+Math.imul(w,oe)|0,o=o+Math.imul(w,ae)|0,n=n+Math.imul(g,ce)|0,i=i+Math.imul(g,le)|0,i=i+Math.imul(y,ce)|0,o=o+Math.imul(y,le)|0,n=n+Math.imul(p,ue)|0,i=i+Math.imul(p,he)|0,i=i+Math.imul(v,ue)|0,o=o+Math.imul(v,he)|0,n=n+Math.imul(u,pe)|0,i=i+Math.imul(u,ve)|0,i=i+Math.imul(h,pe)|0,o=o+Math.imul(h,ve)|0;var Ie=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,W),i=Math.imul(U,$),i=i+Math.imul(F,W)|0,o=Math.imul(F,$),n=n+Math.imul(j,G)|0,i=i+Math.imul(j,H)|0,i=i+Math.imul(L,G)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(A,J)|0,i=i+Math.imul(A,X)|0,i=i+Math.imul(P,J)|0,o=o+Math.imul(P,X)|0,n=n+Math.imul(x,Q)|0,i=i+Math.imul(x,ee)|0,i=i+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(C,re)|0,i=i+Math.imul(C,ne)|0,i=i+Math.imul(T,re)|0,o=o+Math.imul(T,ne)|0,n=n+Math.imul(E,oe)|0,i=i+Math.imul(E,ae)|0,i=i+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,n=n+Math.imul(_,ce)|0,i=i+Math.imul(_,le)|0,i=i+Math.imul(w,ce)|0,o=o+Math.imul(w,le)|0,n=n+Math.imul(g,ue)|0,i=i+Math.imul(g,he)|0,i=i+Math.imul(y,ue)|0,o=o+Math.imul(y,he)|0,n=n+Math.imul(p,pe)|0,i=i+Math.imul(p,ve)|0,i=i+Math.imul(v,pe)|0,o=o+Math.imul(v,ve)|0;var Ce=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,G),i=Math.imul(U,H),i=i+Math.imul(F,G)|0,o=Math.imul(F,H),n=n+Math.imul(j,J)|0,i=i+Math.imul(j,X)|0,i=i+Math.imul(L,J)|0,o=o+Math.imul(L,X)|0,n=n+Math.imul(A,Q)|0,i=i+Math.imul(A,ee)|0,i=i+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,n=n+Math.imul(x,re)|0,i=i+Math.imul(x,ne)|0,i=i+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(C,oe)|0,i=i+Math.imul(C,ae)|0,i=i+Math.imul(T,oe)|0,o=o+Math.imul(T,ae)|0,n=n+Math.imul(E,ce)|0,i=i+Math.imul(E,le)|0,i=i+Math.imul(k,ce)|0,o=o+Math.imul(k,le)|0,n=n+Math.imul(_,ue)|0,i=i+Math.imul(_,he)|0,i=i+Math.imul(w,ue)|0,o=o+Math.imul(w,he)|0,n=n+Math.imul(g,pe)|0,i=i+Math.imul(g,ve)|0,i=i+Math.imul(y,pe)|0,o=o+Math.imul(y,ve)|0;var Te=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,J),i=Math.imul(U,X),i=i+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(j,Q)|0,i=i+Math.imul(j,ee)|0,i=i+Math.imul(L,Q)|0,o=o+Math.imul(L,ee)|0,n=n+Math.imul(A,re)|0,i=i+Math.imul(A,ne)|0,i=i+Math.imul(P,re)|0,o=o+Math.imul(P,ne)|0,n=n+Math.imul(x,oe)|0,i=i+Math.imul(x,ae)|0,i=i+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,n=n+Math.imul(C,ce)|0,i=i+Math.imul(C,le)|0,i=i+Math.imul(T,ce)|0,o=o+Math.imul(T,le)|0,n=n+Math.imul(E,ue)|0,i=i+Math.imul(E,he)|0,i=i+Math.imul(k,ue)|0,o=o+Math.imul(k,he)|0,n=n+Math.imul(_,pe)|0,i=i+Math.imul(_,ve)|0,i=i+Math.imul(w,pe)|0,o=o+Math.imul(w,ve)|0;var Re=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,Q),i=Math.imul(U,ee),i=i+Math.imul(F,Q)|0,o=Math.imul(F,ee),n=n+Math.imul(j,re)|0,i=i+Math.imul(j,ne)|0,i=i+Math.imul(L,re)|0,o=o+Math.imul(L,ne)|0,n=n+Math.imul(A,oe)|0,i=i+Math.imul(A,ae)|0,i=i+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,n=n+Math.imul(x,ce)|0,i=i+Math.imul(x,le)|0,i=i+Math.imul(O,ce)|0,o=o+Math.imul(O,le)|0,n=n+Math.imul(C,ue)|0,i=i+Math.imul(C,he)|0,i=i+Math.imul(T,ue)|0,o=o+Math.imul(T,he)|0,n=n+Math.imul(E,pe)|0,i=i+Math.imul(E,ve)|0,i=i+Math.imul(k,pe)|0,o=o+Math.imul(k,ve)|0;var xe=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,re),i=Math.imul(U,ne),i=i+Math.imul(F,re)|0,o=Math.imul(F,ne),n=n+Math.imul(j,oe)|0,i=i+Math.imul(j,ae)|0,i=i+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,n=n+Math.imul(A,ce)|0,i=i+Math.imul(A,le)|0,i=i+Math.imul(P,ce)|0,o=o+Math.imul(P,le)|0,n=n+Math.imul(x,ue)|0,i=i+Math.imul(x,he)|0,i=i+Math.imul(O,ue)|0,o=o+Math.imul(O,he)|0,n=n+Math.imul(C,pe)|0,i=i+Math.imul(C,ve)|0,i=i+Math.imul(T,pe)|0,o=o+Math.imul(T,ve)|0;var Oe=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,oe),i=Math.imul(U,ae),i=i+Math.imul(F,oe)|0,o=Math.imul(F,ae),n=n+Math.imul(j,ce)|0,i=i+Math.imul(j,le)|0,i=i+Math.imul(L,ce)|0,o=o+Math.imul(L,le)|0,n=n+Math.imul(A,ue)|0,i=i+Math.imul(A,he)|0,i=i+Math.imul(P,ue)|0,o=o+Math.imul(P,he)|0,n=n+Math.imul(x,pe)|0,i=i+Math.imul(x,ve)|0,i=i+Math.imul(O,pe)|0,o=o+Math.imul(O,ve)|0;var Me=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(U,ce),i=Math.imul(U,le),i=i+Math.imul(F,ce)|0,o=Math.imul(F,le),n=n+Math.imul(j,ue)|0,i=i+Math.imul(j,he)|0,i=i+Math.imul(L,ue)|0,o=o+Math.imul(L,he)|0,n=n+Math.imul(A,pe)|0,i=i+Math.imul(A,ve)|0,i=i+Math.imul(P,pe)|0,o=o+Math.imul(P,ve)|0;var Ae=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(U,ue),i=Math.imul(U,he),i=i+Math.imul(F,ue)|0,o=Math.imul(F,he),n=n+Math.imul(j,pe)|0,i=i+Math.imul(j,ve)|0,i=i+Math.imul(L,pe)|0,o=o+Math.imul(L,ve)|0;var Pe=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,pe),i=Math.imul(U,ve),i=i+Math.imul(F,pe)|0,o=Math.imul(F,ve);var De=(l+n|0)+((8191&i)<<13)|0;return l=(o+(i>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=me,c[1]=ge,c[2]=ye,c[3]=be,c[4]=_e,c[5]=we,c[6]=Se,c[7]=Ee,c[8]=ke,c[9]=Ie,c[10]=Ce,c[11]=Te,c[12]=Re,c[13]=xe,c[14]=Oe,c[15]=Me,c[16]=Ae,c[17]=Pe,c[18]=De,0!==l&&(c[19]=l,r.length++),r};function _(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,c=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=c;l++){var d=o-l,u=0|e.words[d],h=0|t.words[l],f=u*h,p=67108863&f;a=a+(f/67108864|0)|0,p=p+s|0,s=67108863&p,a=a+(p>>>26)|0,i+=a>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function w(e,t,r){return _(e,t,r)}function S(e,t){this.x=e,this.y=t}Math.imul||(b=y),a.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?b(this,e,t):n<63?y(this,e,t):n<1024?_(this,e,t):w(this,e,t),r},S.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},S.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},S.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},S.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,c=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),d=0;d<i;d+=s)for(var u=c,h=l,f=0;f<a;f++){var p=r[d+f],v=n[d+f],m=r[d+f+a],g=n[d+f+a],y=u*m-h*g;g=u*g+h*m,m=y,r[d+f]=p+m,n[d+f]=v+g,r[d+f+a]=p-m,n[d+f+a]=v-g,f!==s&&(y=c*u-l*h,h=c*h+l*u,u=y)}},S.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},S.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},S.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},S.prototype.convert13b=function(e,t,r,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)r[a]=0;i(0===o),i(0===(-8192&o))},S.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},S.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),c=new Array(n),l=new Array(n),d=new Array(n),u=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,l,n),this.transform(a,o,s,c,n,i),this.transform(l,o,d,u,n,i);for(var f=0;f<n;f++){var p=s[f]*d[f]-c[f]*u[f];c[f]=s[f]*u[f]+c[f]*d[f],s[f]=p}return this.conjugate(s,c,n),this.transform(s,c,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),w(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"===typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=g(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length;n++,r=r.sqr())if(0!==t[n])break;if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){i("number"===typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,c=(0|this.words[t])-s<<r;this.words[t]=c|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},a.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var n;i("number"===typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,c=r;if(n-=a,n=Math.max(0,n),c){for(var l=0;l<a;l++)c.words[l]=this.words[l];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var d=0;for(l=this.length-1;l>=0&&(0!==d||l>=n);l--){var u=0|this.words[l];this.words[l]=d<<26-o|u>>>o,d=u&s}return c&&0!==d&&(c.words[c.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return!1;var o=this.words[r];return!!(o&n)},a.prototype.imaskn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return i("number"===typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(i("number"===typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var n,o,a=e.length+r;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+r])+s;var c=(0|e.words[n])*t;o-=67108863&c,s=(o>>26)-(c/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)o=(0|this.words[n+r])+s,s=o>>26,this.words[n+r]=67108863&o;if(0===s)return this._strip();for(i(-1===s),s=0,n=0;n<this.length;n++)o=-(0|this.words[n])+s,s=o>>26,this.words[n]=67108863&o;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,o=0|i.words[i.length-1],s=this._countBits(o);r=26-s,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,l=n.length-i.length;if("mod"!==t){c=new a(null),c.length=l+1,c.words=new Array(c.length);for(var d=0;d<c.length;d++)c.words[d]=0}var u=n.clone()._ishlnsubmul(i,1,l);0===u.negative&&(n=u,c&&(c.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);f=Math.min(f/o|0,67108863),n._ishlnsubmul(i,f,h);while(0!==n.negative)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);c&&(c.words[h]=f)}return c&&c._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},a.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(n=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(n=s.div.neg()),{div:n,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var n,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(r*n+(0|this.words[o]))%e;return t?-n:n},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*r;this.words[n]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var n=new a(1),o=new a(0),s=new a(0),c=new a(1),l=0;while(t.isEven()&&r.isEven())t.iushrn(1),r.iushrn(1),++l;var d=r.clone(),u=t.clone();while(!t.isZero()){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0){t.iushrn(h);while(h-- >0)(n.isOdd()||o.isOdd())&&(n.iadd(d),o.isub(u)),n.iushrn(1),o.iushrn(1)}for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0){r.iushrn(p);while(p-- >0)(s.isOdd()||c.isOdd())&&(s.iadd(d),c.isub(u)),s.iushrn(1),c.iushrn(1)}t.cmp(r)>=0?(t.isub(r),n.isub(s),o.isub(c)):(r.isub(t),s.isub(n),c.isub(o))}return{a:s,b:c,gcd:r.iushln(l)}},a.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var n,o=new a(1),s=new a(0),c=r.clone();while(t.cmpn(1)>0&&r.cmpn(1)>0){for(var l=0,d=1;0===(t.words[0]&d)&&l<26;++l,d<<=1);if(l>0){t.iushrn(l);while(l-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var u=0,h=1;0===(r.words[0]&h)&&u<26;++u,h<<=1);if(u>0){r.iushrn(u);while(u-- >0)s.isOdd()&&s.iadd(c),s.iushrn(1)}t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return n=0===t.cmpn(1)?o:s,n.cmpn(0)<0&&n.iadd(e),n},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);do{while(t.isEven())t.iushrn(1);while(r.isEven())r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}while(1);return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0===(1&this.words[0])},a.prototype.isOdd=function(){return 1===(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){i("number"===typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new x(e)},a.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};function k(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"===typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},k.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},k.prototype.split=function(e,t){e.iushrn(this.n,0,t)},k.prototype.imulK=function(e){return e.imul(this.k)},o(I,k),I.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},I.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},o(C,k),o(T,k),o(R,k),R.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(E[e])return E[e];var t;if("k256"===e)t=new I;else if("p224"===e)t=new C;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new R}return E[e]=t,t},x.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){i(0===(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2===1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}var n=this.m.subn(1),o=0;while(!n.isZero()&&0===n.andln(1))o++,n.iushrn(1);i(!n.isZero());var s=new a(1).toRed(this),c=s.redNeg(),l=this.m.subn(1).iushrn(1),d=this.m.bitLength();d=new a(2*d*d).toRed(this);while(0!==this.pow(d,l).cmp(c))d.redIAdd(c);var u=this.pow(d,n),h=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=o;while(0!==f.cmp(s)){for(var v=f,m=0;0!==v.cmp(s);m++)v=v.redSqr();i(m<p);var g=this.pow(u,new a(1).iushln(p-m-1));h=h.redMul(g),u=g.redSqr(),f=f.redMul(u),p=m}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=new Array(1<<r);n[0]=new a(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],s=0,c=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var d=t.words[i],u=l-1;u>=0;u--){var h=d>>u&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,c++,(c===r||0===i&&0===u)&&(o=this.mul(o,n[s]),c=0,s=0)):c=0}l=26}return o},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},o(O,x),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}})(t,this)}).call(this,n("62e4")(t))},"3a34":function(e,t,r){"use strict";var n=r("83ab"),i=r("e8b5"),o=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(error){return error instanceof TypeError}}();e.exports=s?function(e,t){if(i(e)&&!a(e,"length").writable)throw new o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"3a7c":function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function n(e){return"boolean"===typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"===typeof e}function s(e){return"string"===typeof e}function c(e){return"symbol"===typeof e}function l(e){return void 0===e}function d(e){return"[object RegExp]"===m(e)}function u(e){return"object"===typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function f(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"===typeof e}function v(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=c,t.isUndefined=l,t.isRegExp=d,t.isObject=u,t.isDate=h,t.isError=f,t.isFunction=p,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(this,r("b639").Buffer)},"3a8c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"3a9b":function(e,t,r){"use strict";var n=r("e330");e.exports=n({}.isPrototypeOf)},"3ad9":function(e,t,r){"use strict";r.r(t);var n=r("6649");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"3af6":function(t,r,n){"use strict";n.d(r,"b",(function(){return p})),n.d(r,"a",(function(){return m}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("ec26"),l=n("5b5f"),d=n("60af"),u=n("b83f");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p,v=500;(function(e){e[e["Unsent"]=0]="Unsent",e[e["Sent"]=1]="Sent",e[e["CancellationPending"]=2]="CancellationPending",e[e["CancellationPendingAndWillResend"]=3]="CancellationPendingAndWillResend"})(p||(p={}));class m{constructor(e,t,r){this.baseApis=e,this.deviceId=t,this.cryptoStore=r,s()(this,"sendOutgoingRoomKeyRequestsTimer",void 0),s()(this,"sendOutgoingRoomKeyRequestsRunning",!1),s()(this,"clientRunning",!0)}stop(){l["b"].log("stopping OutgoingRoomKeyRequestManager"),this.clientRunning=!1}sendQueuedRequests(){this.startTimer()}queueRoomKeyRequest(t,r){var n=arguments,i=this;return o()((function*(){var o=n.length>2&&void 0!==n[2]&&n[2],a=yield i.cryptoStore.getOutgoingRoomKeyRequest(t);if(a)switch(a.state){case p.CancellationPendingAndWillResend:case p.Unsent:return;case p.CancellationPending:var s=o?p.CancellationPendingAndWillResend:p.Sent;yield i.cryptoStore.updateOutgoingRoomKeyRequest(a.requestId,p.CancellationPending,{state:s,cancellationTxnId:i.baseApis.makeTxnId()});break;case p.Sent:if(o){var c=p.CancellationPendingAndWillResend,d=yield i.cryptoStore.updateOutgoingRoomKeyRequest(a.requestId,p.Sent,{state:c,cancellationTxnId:i.baseApis.makeTxnId(),requestTxnId:i.baseApis.makeTxnId()});if(!d)return i.queueRoomKeyRequest(t,r,o);try{yield i.sendOutgoingRoomKeyRequestCancellation(d,!0)}catch(e){l["b"].error("Error sending room key request cancellation; will retry later.",e)}}break;default:throw new Error("unhandled state: "+a.state)}else yield i.cryptoStore.getOrAddOutgoingRoomKeyRequest({requestBody:t,recipients:r,requestId:i.baseApis.makeTxnId(),state:p.Unsent})}))()}cancelRoomKeyRequest(e){return this.cryptoStore.getOutgoingRoomKeyRequest(e).then(t=>{if(t)switch(t.state){case p.CancellationPending:case p.CancellationPendingAndWillResend:return;case p.Unsent:return l["b"].log("deleting unnecessary room key request for "+g(e)),this.cryptoStore.deleteOutgoingRoomKeyRequest(t.requestId,p.Unsent);case p.Sent:return this.cryptoStore.updateOutgoingRoomKeyRequest(t.requestId,p.Sent,{state:p.CancellationPending,cancellationTxnId:this.baseApis.makeTxnId()}).then(t=>{t?this.sendOutgoingRoomKeyRequestCancellation(t).catch(e=>{l["b"].error("Error sending room key request cancellation; will retry later.",e),this.startTimer()}):l["b"].log("Tried to cancel room key request for "+g(e)+" but it was already cancelled in another tab")});default:throw new Error("unhandled state: "+t.state)}})}getOutgoingSentRoomKeyRequest(e,t){return this.cryptoStore.getOutgoingRoomKeyRequestsByTarget(e,t,[p.Sent])}cancelAndResendAllOutgoingRequests(){var e=this;return o()((function*(){var t=yield e.cryptoStore.getAllOutgoingRoomKeyRequestsByState(p.Sent);return Promise.all(t.map(t=>{var{requestBody:r,recipients:n}=t;return e.queueRoomKeyRequest(r,n,!0)}))}))()}startTimer(){if(!this.sendOutgoingRoomKeyRequestsTimer){var e=()=>{if(this.sendOutgoingRoomKeyRequestsRunning)throw new Error("RoomKeyRequestSend already in progress!");this.sendOutgoingRoomKeyRequestsRunning=!0,this.sendOutgoingRoomKeyRequests().finally(()=>{this.sendOutgoingRoomKeyRequestsRunning=!1}).catch(e=>{l["b"].warn("error in OutgoingRoomKeyRequestManager: ".concat(e))})};this.sendOutgoingRoomKeyRequestsTimer=setTimeout(e,v)}}sendOutgoingRoomKeyRequests(){var t=this;return o()((function*(){if(t.clientRunning){var r=yield t.cryptoStore.getOutgoingRoomKeyRequestByState([p.CancellationPending,p.CancellationPendingAndWillResend,p.Unsent]);if(r)try{switch(r.state){case p.Unsent:yield t.sendOutgoingRoomKeyRequest(r);break;case p.CancellationPending:yield t.sendOutgoingRoomKeyRequestCancellation(r);break;case p.CancellationPendingAndWillResend:yield t.sendOutgoingRoomKeyRequestCancellation(r,!0);break}return t.sendOutgoingRoomKeyRequests()}catch(e){l["b"].error("Error sending room key request; will retry later.",e),t.sendOutgoingRoomKeyRequestsTimer=void 0}else t.sendOutgoingRoomKeyRequestsTimer=void 0}else t.sendOutgoingRoomKeyRequestsTimer=void 0}))()}sendOutgoingRoomKeyRequest(e){l["b"].log("Requesting keys for ".concat(g(e.requestBody))+" from ".concat(y(e.recipients))+"(id ".concat(e.requestId,")"));var t={action:"request",requesting_device_id:this.deviceId,request_id:e.requestId,body:e.requestBody};return this.sendMessageToDevices(t,e.recipients,e.requestTxnId||e.requestId).then(()=>this.cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,p.Unsent,{state:p.Sent}))}sendOutgoingRoomKeyRequestCancellation(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l["b"].log("Sending cancellation for key request for "+"".concat(g(e.requestBody)," to ")+"".concat(y(e.recipients)," ")+"(cancellation id ".concat(e.cancellationTxnId,")"));var r={action:"request_cancellation",requesting_device_id:this.deviceId,request_id:e.requestId};return this.sendMessageToDevices(r,e.recipients,e.cancellationTxnId).then(()=>t?this.cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,p.CancellationPendingAndWillResend,{state:p.Unsent}):this.cryptoStore.deleteOutgoingRoomKeyRequest(e.requestId,p.CancellationPending))}sendMessageToDevices(e,t,r){var n=new u["b"](()=>new Map);for(var i of t){var o=n.getOrCreate(i.userId);o.set(i.deviceId,f(f({},e),{},{[d["k"]]:Object(c["a"])()}))}return this.baseApis.sendToDevice(d["b"].RoomKeyRequest,n,r)}}function g(e){return e.room_id+" / "+e.session_id}function y(e){return"[".concat(e.map(e=>"".concat(e.userId,":").concat(e.deviceId)).join(","),"]")}},"3ba7":function(t,r,n){"use strict";n.d(r,"f",(function(){return i})),n.d(r,"c",(function(){return o})),n.d(r,"h",(function(){return k})),n.d(r,"e",(function(){return I})),n.d(r,"b",(function(){return R})),n.d(r,"a",(function(){return x})),n.d(r,"d",(function(){return O})),n.d(r,"g",(function(){return T})),n.d(r,"i",(function(){return M}));var i,o,a=n("c973"),s=n.n(a),c=n("9523"),l=n.n(c),d=n("afe6"),u=n("0804"),h=n("60af"),f=n("edaf"),p=n("2f36"),v=n("3777"),m=n("299a"),g=n("a74c"),y=n("5b5f"),b=n("7ccd"),_=n("283b"),w=n("082a");function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){return e?o.Stable:t?o.Experimental:o.None}(function(e){e["New"]="Thread.new",e["Update"]="Thread.update",e["NewReply"]="Thread.newReply",e["ViewThread"]="Thread.viewThread",e["Delete"]="Thread.delete"})(i||(i={})),function(e){e[e["None"]=0]="None",e[e["Experimental"]=1]="Experimental",e[e["Stable"]=2]="Stable"}(o||(o={}));class I extends b["a"]{constructor(e,t,r){var n,o;if(super(),n=this,this.id=e,this.rootEvent=t,l()(this,"timelineSet",void 0),l()(this,"_currentUserParticipated",!1),l()(this,"reEmitter",void 0),l()(this,"lastEvent",void 0),l()(this,"replyCount",0),l()(this,"lastPendingEvent",void 0),l()(this,"pendingReplyCount",0),l()(this,"room",void 0),l()(this,"client",void 0),l()(this,"pendingEventOrdering",void 0),l()(this,"processRootEventPromise",void 0),l()(this,"initialEventsFetched",!I.hasServerSideSupport),l()(this,"initalEventFetchProm",void 0),l()(this,"replayEvents",[]),l()(this,"onTimelineReset",s()((function*(){yield n.processRootEventPromise,n.processRootEventPromise=void 0}))),l()(this,"onBeforeRedaction",(e,t)=>{null!==e&&void 0!==e&&e.isRelation(O.name)&&this.room.eventShouldLiveIn(e).threadId===this.id&&e.getId()!==this.id&&!t.status&&(this.replyCount--,this.updatePendingReplyCount(),this.emit(i.Update,this))}),l()(this,"onRedaction",function(){var e=s()((function*(e,t,r){if(r===n.id)if(n.replyCount<=0){for(var o of n.timeline)n.clearEventMetadata(o);n.lastEvent=n.rootEvent,n._currentUserParticipated=!1,n.emit(i.Delete,n)}else{var a;(null===(a=n.lastEvent)||void 0===a?void 0:a.getId())===e.getAssociatedId()&&(yield n.processRootEventPromise,n.processRootEventPromise=void 0),yield n.updateThreadMetadata()}}));return function(t,r,n){return e.apply(this,arguments)}}()),l()(this,"onTimelineEvent",(e,t,r)=>{if(!r){var n=e.getSender();n&&t&&this.shouldSendLocalEchoReceipt(n,e)&&t.addLocalEchoReceipt(n,e,_["b"].Read),e.getId()!==this.id&&e.isRelation(O.name)&&this.replyCount++}this.onEcho(e,null!==r&&void 0!==r&&r)}),l()(this,"onLocalEcho",e=>{this.onEcho(e,!1)}),l()(this,"onEcho",function(){var e=s()((function*(e,t){e.threadRootId===n.id&&n.lastEvent!==e&&(yield n.updateThreadMetadata(),e.isRelation(O.name)&&(t||(n.lastEvent=void 0,n.emit(i.NewReply,n,e))))}));return function(t,r){return e.apply(this,arguments)}}()),this.setMaxListeners(1e3),null===r||void 0===r||!r.room)throw new Error("element-web#22141: A thread requires a room in order to function");this.room=r.room,this.client=r.client,this.pendingEventOrdering=null!==(o=r.pendingEventOrdering)&&void 0!==o?o:d["e"].Chronological,this.timelineSet=new v["b"](this.room,{timelineSupport:!0,pendingEvents:!0},this.client,this),this.reEmitter=new u["b"](this),this.reEmitter.reEmit(this.timelineSet,[m["d"].Timeline,m["d"].TimelineReset]),this.room.on(f["c"].BeforeRedaction,this.onBeforeRedaction),this.room.on(m["d"].Redaction,this.onRedaction),this.room.on(m["d"].LocalEchoUpdated,this.onLocalEcho),this.room.on(m["d"].TimelineReset,this.onTimelineReset),this.timelineSet.on(m["d"].Timeline,this.onTimelineEvent),this.processReceipts(r.receipts),this.updateThreadMetadata(),this.setEventMetadata(this.rootEvent)}fetchRootEvent(){var t=this;return s()((function*(){try{var r=yield t.client.fetchRoomEvent(t.roomId,t.id),n=t.client.getEventMapper();t.rootEvent=n(r)}catch(e){y["b"].error("Failed to fetch thread root to construct thread with",e)}yield t.processEvent(t.rootEvent)}))()}static setServerSideSupport(e){I.hasServerSideSupport=e,e!==o.Stable&&(R.setPreferUnstable(!0),x.setPreferUnstable(!0),O.setPreferUnstable(!0))}static setServerSideListSupport(e){I.hasServerSideListSupport=e}static setServerSideFwdPaginationSupport(e){I.hasServerSideFwdPaginationSupport=e}shouldSendLocalEchoReceipt(e,t){var r,n=null!==(r=this.client.canSupport.get(w["a"].RelationsRecursion))&&void 0!==r?r:w["b"].Unsupported;if(n===w["b"].Unsupported){var i,o=null===(i=this.getReadReceiptForUserId(e))||void 0===i?void 0:i.eventId;if(o){var a=this.findEventById(o);if(a&&a.getTs()>t.getTs())return!1}}return!0}get roomState(){return this.room.getLiveTimeline().getState(p["b"].FORWARDS)}addEventToTimeline(e,t){this.findEventById(e.getId())||this.timelineSet.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:t,fromCache:!1,roomState:this.roomState})}insertEventIntoTimeline(e){var t=e.getId();t&&(this.findEventById(t)||this.timelineSet.insertEventIntoTimeline(e,this.liveTimeline,this.roomState))}addEvents(e,t){e.forEach(e=>this.addEvent(e,t,!1)),this.updateThreadMetadata()}addEvent(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setEventMetadata(e);var n=this.lastReply(),o=!n||e.localTimestamp>=n.localTimestamp;if(I.hasServerSideSupport){if(e.isRelation(h["h"].Annotation)||e.isRelation(h["h"].Replace))return void this.addRelatedThreadEvent(e,t);!t&&o?(this.addEventToTimeline(e,!1),this.fetchEditsWhereNeeded(e)):t?this.addEventToTimeline(e,t):this.insertEventIntoTimeline(e)}else this.addEventToTimeline(e,t),this.client.decryptEventIfNeeded(e);e.getId()!==this.id&&e.isRelation(O.name)&&!t&&o&&(this.lastEvent=void 0),r&&(this.emit(i.NewReply,this,e),this.updateThreadMetadata())}addRelatedThreadEvent(e,t){var r,n;if(this.initialEventsFetched){var i,o=null!==(i=this.client.canSupport.get(w["a"].RelationsRecursion))&&void 0!==i?i:w["b"].Unsupported;o===w["b"].Unsupported?this.insertEventIntoTimeline(e):this.addEventToTimeline(e,t)}else{var a;null===(a=this.replayEvents)||void 0===a||a.push(e)}null===(r=this.timelineSet.relations)||void 0===r||r.aggregateParentEvent(e),null===(n=this.timelineSet.relations)||void 0===n||n.aggregateChildEvent(e,this.timelineSet)}processEvent(e){var t=this;return s()((function*(){e&&(t.setEventMetadata(e),yield t.fetchEditsWhereNeeded(e))}))()}processReceipts(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var{eventId:t,receiptType:r,userId:n,receipt:i,synthetic:o}of e)this.addReceiptToStructure(t,r,n,i,o)}getRootEventBundledRelationship(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rootEvent;return null===e||void 0===e?void 0:e.getServerAggregatedRelation(O.name)}processRootEvent(){var e=this;return s()((function*(){var t=e.getRootEventBundledRelationship();if(I.hasServerSideSupport&&t){e.replyCount=t.count,e._currentUserParticipated=!!t.current_user_participated;var r=e.client.getEventMapper();e.lastEvent=r(E(E({},t.latest_event),{},{room_id:e.roomId})),e.updatePendingReplyCount(),yield e.processEvent(e.lastEvent)}}))()}updatePendingReplyCount(){var e=this.pendingEventOrdering===d["e"].Detached?this.room.getPendingEvents():this.events,t=e.filter(e=>{var t;return e.threadRootId===this.id&&e.isRelation(O.name)&&null!==e.status&&e.getId()!==(null===(t=this.lastEvent)||void 0===t?void 0:t.getId())});this.lastPendingEvent=t.length?t[t.length-1]:void 0,this.pendingReplyCount=t.length}resetLiveTimeline(e,t){var r=this;return s()((function*(){var n=r.liveTimeline;r.timelineSet.resetLiveTimeline(null!==e&&void 0!==e?e:void 0,null!==t&&void 0!==t?t:void 0);var i,o,a,s,c=r.liveTimeline;if(e){var l=yield r.client.createMessagesRequest(r.roomId,e,1,p["a"].Forward);i=l.end}if(t){var d=yield r.client.createMessagesRequest(r.roomId,t,1,p["a"].Backward);o=d.start}t&&n.getPaginationToken(p["a"].Forward)===t&&n.setPaginationToken(null!==(a=o)&&void 0!==a?a:null,p["a"].Forward);e&&c.getPaginationToken(p["a"].Backward)===e&&c.setPaginationToken(null!==(s=i)&&void 0!==s?s:null,p["a"].Backward)}))()}updateThreadFromRootEvent(){var e=this;return s()((function*(){I.hasServerSideSupport&&(e.initialEventsFetched||e.lastEvent||(yield e.processRootEvent()),yield e.fetchRootEvent()),yield e.processRootEvent()}))()}updateThreadMetadata(){var t=this;return s()((function*(){if(t.updatePendingReplyCount(),t.processRootEventPromise||(t.processRootEventPromise=t.updateThreadFromRootEvent()),yield t.processRootEventPromise,!t.initialEventsFetched)if(t.initalEventFetchProm)yield t.initalEventFetchProm;else try{for(var r of(t.timelineSet.resetLiveTimeline(),0===t.replyCount&&t.rootEvent?(t.timelineSet.addEventsToTimeline([t.rootEvent],!0,t.liveTimeline,null),t.liveTimeline.setPaginationToken(null,p["a"].Backward)):(t.initalEventFetchProm=t.client.paginateEventTimeline(t.liveTimeline,{backwards:!0}),yield t.initalEventFetchProm),t.initialEventsFetched=!0,t.replayEvents))t.addEvent(r,!1);t.replayEvents=null,t.emit(m["d"].TimelineReset,t.room,t.timelineSet,!0)}catch(e){y["b"].error("Failed to load start of newly created thread: ",e),t.initialEventsFetched=!1}t.emit(i.Update,t)}))()}fetchEditsWhereNeeded(){var t=arguments,r=this;return s()((function*(){var n,i=null!==(n=r.client.canSupport.get(w["a"].RelationsRecursion))&&void 0!==n?n:w["b"].Unsupported;if(i===w["b"].Unsupported){for(var o=t.length,a=new Array(o),c=0;c<o;c++)a[c]=t[c];return Promise.all(a.filter(C).map(function(){var t=s()((function*(t){try{var n=yield r.client.relations(r.roomId,t.getId(),h["h"].Replace,t.getType(),{limit:1});if(n.events.length){var i=n.events[0];t.makeReplaced(i),r.insertEventIntoTimeline(i)}}catch(e){y["b"].error("Failed to load edits for encrypted thread event",e)}}));return function(e){return t.apply(this,arguments)}}()))}}))()}setEventMetadata(e){e&&(p["b"].setEventMetadata(e,this.roomState,!1),e.setThread(this))}clearEventMetadata(e){var t,r,n;e&&(e.setThread(void 0),null===(t=e.event)||void 0===t||(null===(r=t.unsigned)||void 0===r||(null===(n=r["m.relations"])||void 0===n||delete n[O.name])))}findEventById(e){return this.timelineSet.findEventById(e)}lastReply(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.isRelation(O.name),t=this.timeline.length-1;t>=0;t--){var r=this.timeline[t];if(e(r))return r}return null}get roomId(){return this.room.roomId}get length(){return this.replyCount+this.pendingReplyCount}get replyToEvent(){var e,t;return null!==(e=null!==(t=this.lastPendingEvent)&&void 0!==t?t:this.lastEvent)&&void 0!==e?e:this.lastReply()}get timeline(){return this.events}get events(){return this.liveTimeline.getEvents()}has(e){return this.timelineSet.findEventById(e)instanceof f["b"]}get hasCurrentUserParticipated(){return this._currentUserParticipated}get liveTimeline(){return this.timelineSet.getLiveTimeline()}getUnfilteredTimelineSet(){return this.timelineSet}addReceipt(e,t){throw new Error("Unsupported function on the thread model")}getEventReadUpTo(e,t){var r=e===this.client.getUserId(),n=this.timeline[this.timeline.length-1];if(r&&n){var i=n.getTs()<this.room.getOldestThreadedReceiptTs(),o=n.getId();if(i&&o)return o}var a=super.getEventReadUpTo(e,t);if(n){var s=this.room.getLastUnthreadedReceiptFor(e);if(!s)return a;for(var c=(null===(l=this.timeline)||void 0===l?void 0:l.length)-1;c>=0;--c){var l,d,u=this.timeline[c];if(u.getId()===a)return a;if(u.getTs()<s.ts)return null!==(d=u.getId())&&void 0!==d?d:a}}return a}hasUserReadEvent(e,t){if(e===this.client.getUserId()){var r,n,i,o,a,s,c=(null!==(r=null===(n=this.lastReply())||void 0===n?void 0:n.getTs())&&void 0!==r?r:0)<this.room.getOldestThreadedReceiptTs(),l=null!==(i=null===(o=this.room.getLastUnthreadedReceiptFor(e))||void 0===o?void 0:o.ts)&&void 0!==i?i:0,d=(null!==(a=null===this||void 0===this||null===(s=this.lastReply())||void 0===s?void 0:s.getTs())&&void 0!==a?a:0)<l;if(c||d)return!0}return this.room.hasUserReadEvent(e,t)}setUnread(e,t){return this.room.setThreadUnreadNotificationCount(this.id,e,t)}getLastUnthreadedReceiptFor(e){return this.room.getLastUnthreadedReceiptFor(e)}}function C(e){return e.isEncrypted()&&(e.isRelation(O.name)||e.isThreadRoot)}l()(I,"hasServerSideSupport",o.None),l()(I,"hasServerSideListSupport",o.None),l()(I,"hasServerSideFwdPaginationSupport",o.None);var T,R=new g["b"]("related_by_senders","io.element.relation_senders"),x=new g["b"]("related_by_rel_types","io.element.relation_types"),O=new g["b"]("m.thread","io.element.thread");function M(e){switch(e){case T.My:return"participated";default:return"all"}}(function(e){e[e["My"]=0]="My",e[e["All"]=1]="All"})(T||(T={}))},"3baa":function(e,t){var r=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(r).forEach((function(e){var t=r[e];t.forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},"3bbe":function(e,t,r){"use strict";var n=r("1787"),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},"3c16":function(e,t,r){"use strict";r.r(t);var n=r("9251");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"3c5d":function(e,t,r){"use strict";var n=r("cfe9"),i=r("c65b"),o=r("ebb5"),a=r("07fa"),s=r("182d"),c=r("7b0b"),l=r("d039"),d=n.RangeError,u=n.Int8Array,h=u&&u.prototype,f=h&&h.set,p=o.aTypedArray,v=o.exportTypedArrayMethod,m=!l((function(){var e=new Uint8ClampedArray(2);return i(f,e,{length:1,0:3},1),3!==e[1]})),g=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));v("set",(function(e){p(this);var t=s(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(m)return i(f,this,r,t);var n=this.length,o=a(r),l=0;if(o+t>n)throw new d("Wrong length");while(l<o)this[t+l]=r[l++]}),!m||g)},"3d21":function(e,t,r){"use strict";var n,i,o,a,s,c;r.d(t,"f",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),function(e){e["Public"]="public",e["Private"]="private"}(n||(n={})),function(e){e["PrivateChat"]="private_chat",e["TrustedPrivateChat"]="trusted_private_chat",e["PublicChat"]="public_chat"}(i||(i={})),function(e){e["Public"]="public",e["Invite"]="invite",e["Private"]="private",e["Knock"]="knock",e["Restricted"]="restricted"}(o||(o={})),function(e){e["RoomMembership"]="m.room_membership"}(a||(a={})),function(e){e["CanJoin"]="can_join",e["Forbidden"]="forbidden"}(s||(s={})),function(e){e["Invited"]="invited",e["Joined"]="joined",e["Shared"]="shared",e["WorldReadable"]="world_readable"}(c||(c={}))},"3db6":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("8e08"));var i=r("1467");t.AEAD=i.AEAD;var o=r("956b");t.SIV=o.SIV;var a=r("023f");t.StreamEncryptor=a.StreamEncryptor,t.StreamDecryptor=a.StreamDecryptor;var s=r("8e26");t.CMAC=s.CMAC;var c=r("9bed");t.PMAC=c.PMAC;var l=r("b07c");t.PolyfillCryptoProvider=l.PolyfillCryptoProvider;var d=r("9060");t.WebCryptoProvider=d.WebCryptoProvider},"3dc0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new Uint8Array([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0]);function i(e){return n[e]}t.ctz=i},"3eb1":function(e,t,r){"use strict";var n=r("0f7c"),i=r("00ce"),o=r("d009"),a=r("0d25"),s=i("%Function.prototype.apply%"),c=i("%Function.prototype.call%"),l=i("%Reflect.apply%",!0)||n.call(c,s),d=r("71c9"),u=i("%Math.max%");e.exports=function(e){if("function"!==typeof e)throw new a("a function is required");var t=l(n,c,arguments);return o(t,1+u(0,e.length-(arguments.length-1)),!0)};var h=function(){return l(n,s,arguments)};d?d(e.exports,"apply",{value:h}):e.exports.apply=h},"3eed":function(e,t,r){"use strict";const n=r("a448"),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const a=(e,t,r)=>{const n=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=n,e},s=e=>i.includes(e),c=(e,t)=>new Promise((r,i)=>{t={onFailedAttempt:()=>{},retries:10,...t};const c=n.operation(t);c.attempt(async n=>{try{r(await e(n))}catch(error){if(!(error instanceof Error))return void i(new TypeError(`Non-error was thrown: "${error}". You should only throw errors.`));if(error instanceof o)c.stop(),i(error.originalError);else if(error instanceof TypeError&&!s(error.message))c.stop(),i(error);else{a(error,n,t);try{await t.onFailedAttempt(error)}catch(error){return void i(error)}c.retry(error)||i(c.mainError())}}})});e.exports=c,e.exports.default=c,e.exports.AbortError=o},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},4:function(e,t){},4082:function(e,t,r){var n=r("f0e4");function i(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},"40d5":function(e,t,r){"use strict";var n=r("d039");e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"40e1":function(e,t,r){"use strict";r.r(t);var n=r("ef4e");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"40e9":function(e,t,r){"use strict";var n=r("23e7"),i=r("41f6");i&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},4127:function(e,t,r){"use strict";var n=r("5402"),i=r("d233"),o=r("b313"),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=Array.prototype.push,d=function(e,t){l.apply(e,c(t)?t:[t])},u=Date.prototype.toISOString,h=o["default"],f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:i.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},p=function(e){return"string"===typeof e||"number"===typeof e||"boolean"===typeof e||"symbol"===typeof e||"bigint"===typeof e},v={},m=function e(t,r,o,a,s,l,u,h,m,g,y,b,_,w,S,E,k,I){var C=t,T=I,R=0,x=!1;while(void 0!==(T=T.get(v))&&!x){var O=T.get(t);if(R+=1,"undefined"!==typeof O){if(O===R)throw new RangeError("Cyclic object value");x=!0}"undefined"===typeof T.get(v)&&(R=0)}if("function"===typeof g?C=g(r,C):C instanceof Date?C=_(C):"comma"===o&&c(C)&&(C=i.maybeMap(C,(function(e){return e instanceof Date?_(e):e}))),null===C){if(l)return m&&!E?m(r,f.encoder,k,"key",w):r;C=""}if(p(C)||i.isBuffer(C)){if(m){var M=E?r:m(r,f.encoder,k,"key",w);return[S(M)+"="+S(m(C,f.encoder,k,"value",w))]}return[S(r)+"="+S(String(C))]}var A,P=[];if("undefined"===typeof C)return P;if("comma"===o&&c(C))E&&m&&(C=i.maybeMap(C,m)),A=[{value:C.length>0?C.join(",")||null:void 0}];else if(c(g))A=g;else{var D=Object.keys(C);A=y?D.sort(y):D}var j=h?r.replace(/\./g,"%2E"):r,L=a&&c(C)&&1===C.length?j+"[]":j;if(s&&c(C)&&0===C.length)return L+"[]";for(var N=0;N<A.length;++N){var U=A[N],F="object"===typeof U&&"undefined"!==typeof U.value?U.value:C[U];if(!u||null!==F){var B=b&&h?U.replace(/\./g,"%2E"):U,K=c(C)?"function"===typeof o?o(L,B):L:L+(b?"."+B:"["+B+"]");I.set(t,R);var q=n();q.set(v,I),d(P,e(F,K,o,a,s,l,u,h,"comma"===o&&E&&c(C)?null:m,g,y,b,_,w,S,E,k,q))}}return P},g=function(e){if(!e)return f;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.encodeDotInKeys&&"boolean"!==typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o["default"];if("undefined"!==typeof e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,i=o.formatters[r],l=f.filter;if(("function"===typeof e.filter||c(e.filter))&&(l=e.filter),n=e.arrayFormat in s?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":f.arrayFormat,"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var d="undefined"===typeof e.allowDots?!0===e.encodeDotInKeys||f.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:d,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:"undefined"===typeof e.delimiter?f.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:f.encode,encodeDotInKeys:"boolean"===typeof e.encodeDotInKeys?e.encodeDotInKeys:f.encodeDotInKeys,encoder:"function"===typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:l,format:r,formatter:i,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}};e.exports=function(e,t){var r,i,o=e,a=g(t);"function"===typeof a.filter?(i=a.filter,o=i("",o)):c(a.filter)&&(i=a.filter,r=i);var l=[];if("object"!==typeof o||null===o)return"";var u=s[a.arrayFormat],h="comma"===u&&a.commaRoundTrip;r||(r=Object.keys(o)),a.sort&&r.sort(a.sort);for(var f=n(),p=0;p<r.length;++p){var v=r[p];a.skipNulls&&null===o[v]||d(l,m(o[v],v,u,h,a.allowEmptyArrays,a.strictNullHandling,a.skipNulls,a.encodeDotInKeys,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,f))}var y=l.join(a.delimiter),b=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),y.length>0?b+y:""}},"417f":function(e,t,r){"use strict";e.exports=EvalError},"41f6":function(e,t,r){"use strict";var n=r("cfe9"),i=r("e330"),o=r("7282"),a=r("0b25"),s=r("2005"),c=r("b620"),l=r("36f2"),d=r("dbe5"),u=n.structuredClone,h=n.ArrayBuffer,f=n.DataView,p=Math.min,v=h.prototype,m=f.prototype,g=i(v.slice),y=o(v,"resizable","get"),b=o(v,"maxByteLength","get"),_=i(m.getInt8),w=i(m.setInt8);e.exports=(d||l)&&function(e,t,r){var n,i=c(e),o=void 0===t?i:a(t),v=!y||!y(e);if(s(e),d&&(e=u(e,{transfer:[e]}),i===o&&(r||v)))return e;if(i>=o&&(!r||v))n=g(e,0,o);else{var m=r&&!v&&b?{maxByteLength:b(e)}:void 0;n=new h(o,m);for(var S=new f(e),E=new f(n),k=p(o,i),I=0;I<k;I++)w(E,I,_(S,I))}return d||l(e),n}},4243:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"429b":function(e,t,r){e.exports=r("faa1").EventEmitter},4327:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".modal-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(var(--color-shadow-base),.85);display:block;justify-content:center;opacity:1;display:flex;align-items:center}@media(pointer:fine){.modal-backdrop{cursor:pointer;transition:.3s}.modal-backdrop:hover{background:rgba(var(--color-shadow-base),.8)}}#modal{position:fixed;left:0;top:0;bottom:0;right:0;z-index:2023}#modal .notificationWrapper{padding:.5em;padding-left:0;padding-right:0;position:absolute;left:50%;right:0;top:0;z-index:10000;max-width:640px;margin-left:-320px}#modal .notificationWrapper .notificaion{box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}#modal .modal-body{padding-bottom:var(--app-margin-bottom)}#modal .swipable{position:absolute;left:0;right:0;top:0;bottom:0}#modal.hasnotification .modal-wrapper{top:100px}#modal.small .modal-body{padding-bottom:0}#modal.small .swipable{position:static}#modal.small .modal-wrapper{top:auto;max-height:90vh}#modal.small .modal-wrapper .modal{max-height:90vh;position:static}#modal.likelabel{top:auto}#modal.likelabel .modal-body,#modal.likelabel .modal-wrapper{padding-bottom:0}#modal.likelabel .modal{background:rgb(var(--color-bg-ac-bright));padding:1em;color:rgb(var(--text-on-bg-ac-color));text-align:center}#modal.likelabel .modal-header{position:absolute;background:transparent;left:auto}#modal.likelabel .modal-close{color:rgb(var(--text-on-bg-ac-color))}#modal.likelabel .modal-backdrop,#modal.likemenu .modal-header{display:none}#modal.likemenu .modal{border-top-left-radius:22px;border-top-right-radius:22px}#modal.likemenu .modal-body{padding:1em;padding-bottom:calc(60px + var(--app-margin-bottom, 0))}#modal.likemenu .modal-body>div{padding-bottom:1em}#modal.likemenu.fromtop .modal-wrapper{top:0;bottom:auto}#modal.likemenu.fromtop .modal{border-radius:0;border-bottom-left-radius:22px;border-bottom-right-radius:22px}#modal.likemenu.fromtop .modal-body{padding:1em;padding-top:calc(60px + var(--app-margin-top, 0))}#modal.likemenu.fromtop .modal-body>div{padding-bottom:1em}#modal.withoutheader .modal-header{display:none}#modal .stickedTop{top:0}#modal.absoluteContent .modal-header{position:absolute}#modal.absoluteContent .modal-body{position:absolute;left:0;bottom:0;right:0;top:55px}#modal.absoluteContent .absmodal{width:100%;height:100%}#modal.fastmenu .modal-backdrop{background:rgba(var(--color-shadow-base),.95)}#modal.fastmenu .modal-wrapper{top:0}#modal.fastmenu .closecsscross{display:none}#modal.fastmenu .modal-body{top:0}#modal.fastmenu .modal{border-radius:0;background:transparent;color:rgba(var(--text-on-bg-shadow-color),.7)}#modal.cover .modal-close{margin-right:.5em}#modal.cover .modal-header{height:84px;align-items:center;margin-top:1em}#modal.cover .modal-header .headerWrapper span{font-size:2em}#modal.cover .modal-wrapper{top:0}#modal.cover .modal{border-radius:0}#modal.topsearching .modal-body{padding-bottom:0}#modal.topsearching .swipable{position:static}#modal.topsearching .headerWrapper{margin:0 auto;padding:0}#modal.topsearching .headerWrapper span{font-size:.8em;font-weight:400}#modal.topsearching .modal-close{display:none}#modal.topsearching .modal-wrapper{top:0;bottom:auto;max-height:90vh}#modal.topsearching .modal-wrapper .modal{padding-top:4em;padding-bottom:5px;max-height:90vh;position:static;border-radius:0;border:0;border-bottom-left-radius:20px;border-bottom-right-radius:20px;border-bottom:1px solid rgba(var(--neutral-grad-3),.2)}#modal.minimized .modal-wrapper{top:-30px;bottom:-4px;left:auto;right:0;width:344px;position:fixed;z-index:2023222;border-bottom:0}#modal.minimized .modal-backdrop{left:auto;border-radius:8px;bottom:-4px;top:-60px;right:0;width:344px;position:fixed}#modal.minimized .modal::-webkit-scrollbar{width:0!important}#modal.minimized.bin{display:none}#modal.minimized.bin.active{display:block}#modal.minimized.bin .modal-backdrop,#modal.minimized.bin .modal-wrapper{position:absolute}#modal.minimized.small .modal-wrapper{top:auto}#modal.minimized.fromtop .modal-wrapper{top:-61px;bottom:auto}.modal-wrapper{left:50%;margin-left:-320px;top:7%;overflow:hidden;max-width:640px}.modal,.modal-wrapper{position:absolute;right:0;bottom:0}.modal{border-top-left-radius:10px;border-top-right-radius:10px;border-top:1px solid rgba(var(--neutral-grad-3),.2);background:rgb(var(--background-total-theme));overflow-x:hidden;margin:0 auto;box-shadow:0 7px 12px -5px rgba(var(--color-shadow-base),.7);left:0;top:0;overscroll-behavior:contain}.modal-close{margin-left:auto;padding:1em;width:50px;text-align:center;color:rgb(var(--neutral-grad-4));cursor:pointer;z-index:1}.modal-close:hover{color:rgb(var(--text-color))}.modal-footer,.modal-header{display:flex;margin:0 auto}.modal-header{color:rgb(var(--text-color));font-weight:700;position:sticky;display:flex;justify-content:space-between;left:0;top:0;right:0;z-index:10;background:rgb(var(--background-total-theme))}.modal-header .headerWrapper{padding:1em}.modal-footer{justify-content:flex-end}.mwork{padding:1em 1em}.modal-body{padding:0}.eff{text-align:center;color:rgb(var(--color-txt-ac));width:100%}.eff i{font-size:.2em}.btn-close{border:none;padding:1em;cursor:pointer;font-weight:700;color:rgb(var(--neutral-grad-4));background:transparent}.btn-success{color:#fff;background:rgb(var(--color-bg-ac));border:1px solid rgb(var(--color-bg-ac))}@media only screen and (max-width:768px){.modal-wrapper{left:0;margin-left:0;max-width:none}.modal{min-width:0;width:100%;height:100%}.modal #topheader{padding-top:0!important}.modal-footer{position:absolute;bottom:0;right:0;left:0}#modal .notificationWrapper{left:0;padding-left:.5em;padding-right:.5em;max-width:none;margin-left:0}#modal.hasnotification .modal-wrapper{left:.5em;bottom:.5em;right:.5em;border-radius:24px}}.separator{width:5px}",""]),e.exports=t},4328:function(e,t,r){"use strict";var n=r("4127"),i=r("9e6a"),o=r("b313");e.exports={formats:o,parse:i,stringify:n}},4362:function(e,t,r){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,n="/";t.cwd=function(){return n},t.chdir=function(t){e||(e=r("df7c")),n=e.resolve(t,n)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},4437:function(e,t,r){var n=r("4a23");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("1853c26e",n,e)}},"44ad":function(e,t,r){"use strict";var n=r("e330"),i=r("d039"),o=r("c6b6"),a=Object,s=n("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?s(e,""):a(e)}:a},4563:function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4574:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"",""]),e.exports=t},"45cf":function(e,t,r){"use strict";r.r(t);var n=r("2ed3");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},4625:function(e,t,r){"use strict";var n=r("c6b6"),i=r("e330");e.exports=function(e){if("Function"===n(e))return i(e)}},"463e":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".searchWrapperEA .searchWrapper[data-v-6a2059ba]{padding:0 .25em}.searchWrapper[data-v-6a2059ba],.searchWrapperEA .searchWrapper[data-v-6a2059ba]{background:rgb(var(--background-secondary-theme))}.searchWrapper[data-v-6a2059ba]{display:flex;justify-content:stretch;overflow:hidden;border-radius:32px;color:rgb(var(--neutral-grad-2));align-items:center}.searchWrapper .inputWrapper[data-v-6a2059ba]{flex:1;margin-left:.25em}.searchWrapper .inputWrapper input[data-v-6a2059ba]{color:rgb(var(--text-color));padding:0;height:44px;width:100%;font-size:.9em}.searchWrapper .inputWrapper+.iconWrapper i[data-v-6a2059ba]{color:rgb(var(--neutral-grad-4))}.searchWrapper .iconWrapper[data-v-6a2059ba]{text-align:center}.searchWrapper .iconWrapper i[data-v-6a2059ba]{font-size:.8em;width:100%}.searchWrapper .iconWrapper .fa-angle-left[data-v-6a2059ba]{font-size:1em;color:rgb(var(--color-txt-ac));transition:color .3s}.searchWrapper .iconWrapper .fa-angle-left[data-v-6a2059ba]:hover{color:rgb(var(--neutral-grad-3))}#search[data-v-6a2059ba]{padding:0 1em;width:100%}#search.minimized:not(.active) .searchWrapper[data-v-6a2059ba]{border-radius:0;background:transparent;padding:0}#search.minimized:not(.active) .searchWrapper .inputWrapper[data-v-6a2059ba]{display:none}#search.minimized:not(.active) .searchWrapper .iconWrapper[data-v-6a2059ba]{text-align:center;width:44px;height:44px;line-height:44px;padding:0;border-radius:50%;background:rgba(var(--color-txt-gray-dark),.4);color:rgba(var(--color-txt-gray-dark),.8)}#search.minimized:not(.active) .searchWrapper .iconWrapper i[data-v-6a2059ba]{font-size:.8em}#search.collapsed[data-v-6a2059ba]{padding:0}#search.collapsed .searchWrapper[data-v-6a2059ba]{background:none}#search.collapsed .searchWrapper .inputWrapper[data-v-6a2059ba],#search.collapsed .searchWrapper .matches[data-v-6a2059ba]{overflow:hidden;padding:0;width:0}#search.collapsed .searchWrapper .inputWrapper input[data-v-6a2059ba],#search.collapsed .searchWrapper .matches input[data-v-6a2059ba]{padding:0}#search.collapsed .searchWrapper .iconWrapper[data-v-6a2059ba]{width:auto}#search.expanded[data-v-6a2059ba]{position:absolute;left:0;bottom:0;right:0;padding-bottom:.5em}#search.expanded.bin[data-v-6a2059ba]{padding-bottom:.25em}#search.expanded .searchWrapper .iconWrapper[data-v-6a2059ba]{min-width:44px}.searchWrapperEA #search[data-v-6a2059ba]{display:block;padding:0 .25em;position:static;transform:none}.iconWrapper i[data-v-6a2059ba]{color:rgb(var(--neutral-grad-4));cursor:pointer}.matches[data-v-6a2059ba]{font-size:.8em;display:flex;margin-right:.5em;align-items:center;-webkit-touch-callout:none;-webkit-user-select:none;-webkit-user-select--khtml-user-select:none;-webkit-user-select--khtml-user-select--moz-user-select:none;-webkit-user-select--khtml-user-select--moz-user-select--ms-user-select:none;-webkit-user-select--khtml-user-select--moz-user-select--ms-user-select-user-select:none}.matches i[data-v-6a2059ba],.matches span[data-v-6a2059ba]{padding:.5em}.matches i[data-v-6a2059ba]{background:rgb(var(--background-secondary-theme))}.matches .current-match[data-v-6a2059ba],.matches i[data-v-6a2059ba]{color:rgb(var(--neutral-grad-4))}.matches .next-match[data-v-6a2059ba],.matches .prev-match[data-v-6a2059ba]{cursor:pointer}",""]),e.exports=t},"467f":function(e,t,r){"use strict";var n=r("2d83");e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},4681:function(e,t,r){"use strict";(function(t){function r(e,r){var o=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(a,this,e)):t.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!r&&e?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(n,o,e)):t.nextTick(n,o,e):r?(t.nextTick(i,o),r(e)):t.nextTick(i,o)})),this)}function n(e,t){a(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}function s(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:r,undestroy:o,errorOrDestroy:s}}).call(this,r("4362"))},"46c6":function(e,t,r){var n=r("c8de");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("13d0212c",n,e)}},"480c":function(t,r,n){"use strict";(function(t){n.d(r,"c",(function(){return I})),n.d(r,"a",(function(){return x})),n.d(r,"e",(function(){return P})),n.d(r,"f",(function(){return D})),n.d(r,"b",(function(){return j})),n.d(r,"d",(function(){return L}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("1073"),l=n("299a"),d=n("b83f"),u=n("9f65"),h=n("2f36"),f=n("5b5f"),p=n("afe6"),v=n("9c88"),m=n("60af"),g=n("866a"),y=n("976c"),b=n("6642"),_=n("886e"),w=n("082a"),S=n("3925");function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I,C=!0,T=8e4,R=3;(function(e){e["Error"]="ERROR",e["Prepared"]="PREPARED",e["Stopped"]="STOPPED",e["Syncing"]="SYNCING",e["Catchup"]="CATCHUP",e["Reconnecting"]="RECONNECTING"})(I||(I={}));var x,O=["org.matrix.msc2716v3"];function M(e,t){return"FILTER_SYNC_".concat(e)+(t?"_"+t:"")}function A(){C&&f["b"].log(...arguments)}function P(e){return k({initialSyncLimit:8,resolveInvitesToProfiles:!1,pollTimeout:3e4,pendingEventOrdering:p["e"].Chronological,threadSupport:!1},e)}function D(e){return k({canResetEntireTimeline:e=>!1},e)}(function(e){e["Offline"]="offline",e["Online"]="online",e["Unavailable"]="unavailable"})(x||(x={}));class j{constructor(e,t,r){var n=this;this.client=e,s()(this,"opts",void 0),s()(this,"syncOpts",void 0),s()(this,"_peekRoom",null),s()(this,"currentSyncRequest",void 0),s()(this,"abortController",void 0),s()(this,"syncState",null),s()(this,"syncStateData",void 0),s()(this,"catchingUp",!1),s()(this,"running",!1),s()(this,"keepAliveTimer",void 0),s()(this,"connectionReturnedDefer",void 0),s()(this,"notifEvents",[]),s()(this,"failedSyncCount",0),s()(this,"storeIsInvalid",!1),s()(this,"presence",void 0),s()(this,"getPushRules",o()((function*(){try{A("Getting push rules...");var e=yield n.client.getPushRules();A("Got push rules"),n.client.pushRules=e}catch(t){if(f["b"].error("Getting push rules failed",t),n.shouldAbortSync(t))return;return A("Waiting for saved sync before retrying push rules..."),yield n.recoverFromSyncStartupError(n.savedSyncPromise,t),n.getPushRules()}}))),s()(this,"buildDefaultFilter",()=>{var e=new u["a"](this.client.credentials.userId);return this.client.canSupport.get(w["a"].ThreadUnreadNotifications)!==w["b"].Unsupported&&e.setUnreadThreadNotifications(!0),e}),s()(this,"prepareLazyLoadingForSync",o()((function*(){var e;(A("Prepare lazy loading for sync..."),n.client.isGuest()&&(n.opts.lazyLoadMembers=!1),n.opts.lazyLoadMembers&&(A("Enabling lazy load on sync filter..."),n.opts.filter||(n.opts.filter=n.buildDefaultFilter()),n.opts.filter.setLazyLoadMembers(!0)),n.opts.lazyLoadMembers)&&(null===(e=n.syncOpts.crypto)||void 0===e||e.enableLazyLoading())}))),s()(this,"storeClientOptions",o()((function*(){try{A("Storing client options..."),yield n.client.storeClientOptions(),A("Stored client options")}catch(e){throw f["b"].error("Storing client options failed",e),e}}))),s()(this,"getFilter",o()((function*(){var e,t;A("Getting filter..."),e=n.opts.filter?n.opts.filter:n.buildDefaultFilter();try{t=yield n.client.getOrCreateFilter(M(n.client.credentials.userId),e)}catch(r){return f["b"].error("Getting filter failed",r),n.shouldAbortSync(r)?{}:(A("Waiting for saved sync before retrying filter..."),yield n.recoverFromSyncStartupError(n.savedSyncPromise,r),n.getFilter())}return{filter:e,filterId:t}}))),s()(this,"savedSyncPromise",void 0),s()(this,"onOnline",()=>{A("Browser thinks we are back online"),this.startKeepAlives(0)}),this.opts=P(t),this.syncOpts=D(r),e.getNotifTimelineSet()&&e.reEmitter.reEmit(e.getNotifTimelineSet(),[l["d"].Timeline,l["d"].TimelineReset])}createRoom(e){var t=L(this.client,e,this.opts);return t.on(g["b"].Marker,(e,r)=>{this.onMarkerStateEvent(t,e,r)}),t}onMarkerStateEvent(e,t){var{timelineWasEmpty:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r)f["b"].debug("MarkerState: Ignoring markerEventId=".concat(t.getId()," in roomId=").concat(e.roomId," ")+"because the timeline was empty before the marker arrived which means there is nothing to refresh.");else{var n=O.includes(e.getVersion())||t.getSender()===e.getCreator();n?(f["b"].debug("MarkerState: Timeline needs to be refreshed because "+"a new markerEventId=".concat(t.getId()," was sent in roomId=").concat(e.roomId)),e.setTimelineNeedsRefresh(!0),e.emit(l["d"].HistoryImportedWithinTimeline,t,e)):f["b"].debug("MarkerState: Ignoring markerEventId=".concat(t.getId()," in roomId=").concat(e.roomId," because ")+"MSC2716 is not supported in the room version or for any room version, the marker wasn't sent by the room creator.")}}syncLeftRooms(){var e=this;return o()((function*(){var t,r=e.client,n=new u["a"](e.client.credentials.userId);n.setTimelineLimit(1),n.setIncludeLeaveRooms(!0);var i=e.opts.pollTimeout+T,a=yield r.getOrCreateFilter(M(r.credentials.userId,"LEFT_ROOMS"),n),s={timeout:0,filter:a},c=yield r.http.authedRequest(v["i"].Get,"/sync",s,void 0,{localTimeoutMs:i}),l=[];null!==(t=c.rooms)&&void 0!==t&&t.leave&&(l=e.mapSyncResponseToRoomArray(c.rooms.leave));var d=yield Promise.all(l.map(function(){var t=o()((function*(t){var n=t.room;if(t.isBrandNewRoom){t.timeline=t.timeline||{prev_batch:null,events:[]};var i=e.mapSyncEventsFormat(t.timeline,n),o=e.mapSyncEventsFormat(t.state,n);return n.getLiveTimeline().setPaginationToken(t.timeline.prev_batch,h["b"].BACKWARDS),yield e.injectRoomEvents(n,o,i),n.recalculate(),r.store.storeRoom(n),r.emit(p["b"].Room,n),e.processEventsForNotifs(n,i),n}}));return function(e){return t.apply(this,arguments)}}()));return d.filter(Boolean)}))()}peek(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if((null===(t=this._peekRoom)||void 0===t?void 0:t.roomId)===e)return Promise.resolve(this._peekRoom);var n=this.client;return this._peekRoom=this.createRoom(e),this.client.roomInitialSync(e,r).then(t=>{var r;if((null===(r=this._peekRoom)||void 0===r?void 0:r.roomId)!==e)throw new Error("Peeking aborted");t.messages=t.messages||{chunk:[]},t.messages.chunk=t.messages.chunk||[],t.state=t.state||[];var i=Object(d["g"])(t.state).map(n.getEventMapper()),o=t.state.map(n.getEventMapper()),a=t.messages.chunk.map(n.getEventMapper());return Array.isArray(t.presence)&&t.presence.map(n.getEventMapper()).forEach((function(e){var t=n.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):(t=c["a"].createUser(e.getContent().user_id,n),t.setPresenceEvent(e),n.store.storeUser(t)),n.emit(p["b"].Event,e)})),t.messages.start&&(this._peekRoom.oldState.paginationToken=t.messages.start),this._peekRoom.oldState.setStateEvents(i),this._peekRoom.currentState.setStateEvents(o),this.resolveInvites(this._peekRoom),this._peekRoom.recalculate(),this._peekRoom.addEventsToTimeline(a.reverse(),!0,this._peekRoom.getLiveTimeline(),t.messages.start),n.store.storeRoom(this._peekRoom),n.emit(p["b"].Room,this._peekRoom),this.peekPoll(this._peekRoom),this._peekRoom})}stopPeeking(){this._peekRoom=null}peekPoll(e,t){var r,n=this;this._peekRoom===e?this.client.http.authedRequest(v["i"].Get,"/events",{room_id:e.roomId,timeout:String(3e4),from:t},void 0,{localTimeoutMs:5e4,abortSignal:null===(r=this.abortController)||void 0===r?void 0:r.signal}).then(function(){var t=o()((function*(t){if(n._peekRoom===e){t.chunk.filter((function(e){return"m.presence"===e.type})).map(n.client.getEventMapper()).forEach(e=>{var t=n.client.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):(t=c["a"].createUser(e.getContent().user_id,n.client),t.setPresenceEvent(e),n.client.store.storeUser(t)),n.client.emit(p["b"].Event,e)});var r=t.chunk.filter((function(t){return t.room_id===e.roomId&&t.event_id})).map(n.client.getEventMapper());yield e.addLiveEvents(r),n.peekPoll(e,t.end)}else A("Stopped peeking in room %s",e.roomId)}));return function(e){return t.apply(this,arguments)}}(),r=>{f["b"].error("[%s] Peek poll failed: %s",e.roomId,r),setTimeout(()=>{this.peekPoll(e,t)},3e4)}):A("Stopped peeking in room %s",e.roomId)}getSyncState(){return this.syncState}getSyncStateData(){var e;return null!==(e=this.syncStateData)&&void 0!==e?e:null}recoverFromSyncStartupError(e,t){var r=this;return o()((function*(){yield e;var n=r.startKeepAlives();r.updateSyncState(I.Error,{error:t}),yield n}))()}shouldAbortSync(e){return"M_UNKNOWN_TOKEN"===e.errcode&&(f["b"].warn("Token no longer valid - assuming logout"),this.stop(),this.updateSyncState(I.Error,{error:e}),!0)}sync(){var e=this;return o()((function*(){var r,n;if(e.running=!0,e.abortController=new AbortController,null===(r=t.window)||void 0===r||null===(n=r.addEventListener)||void 0===n||n.call(r,"online",e.onOnline,!1),e.client.isGuest())return e.doSync({});A("Getting saved sync token...");var i=e.client.store.getSavedSyncToken().then(e=>(A("Got saved sync token"),e));e.savedSyncPromise=e.client.store.getSavedSync().then(t=>{if(A("Got reply from saved sync, exists? ".concat(!!t)),t)return e.syncFromCache(t)}).catch(e=>{f["b"].error("Getting saved sync failed",e)}),yield e.getPushRules(),yield e.prepareLazyLoadingForSync(),yield e.storeClientOptions();var{filterId:o,filter:a}=yield e.getFilter();if(a){if(e.client.resetNotifTimelineSet(),!e.currentSyncRequest){var s=o,c=yield i;if(c)A("Sending first sync request...");else{A("Sending initial sync request...");var l=e.buildDefaultFilter();l.setDefinition(a.getDefinition()),l.setTimelineLimit(e.opts.initialSyncLimit),s=JSON.stringify(l.getDefinition())}e.currentSyncRequest=e.doSyncRequest({filter:s},c)}return A("Waiting for saved sync before starting sync processing..."),yield e.savedSyncPromise,e.doSync({filter:o})}}))()}stop(){var e,r,n;A("SyncApi.stop"),null===(e=t.window)||void 0===e||null===(r=e.removeEventListener)||void 0===r||r.call(e,"online",this.onOnline,!1),this.running=!1,null===(n=this.abortController)||void 0===n||n.abort(),this.keepAliveTimer&&(clearTimeout(this.keepAliveTimer),this.keepAliveTimer=void 0)}retryImmediately(){return!!this.connectionReturnedDefer&&(this.startKeepAlives(0),!0)}syncFromCache(t){var r=this;return o()((function*(){A("sync(): not doing HTTP hit, instead returning stored /sync data");var n=t.nextBatch;r.client.store.setSyncToken(n);var i={nextSyncToken:n,catchingUp:!1,fromCache:!0},o={next_batch:n,rooms:t.roomsData,account_data:{events:t.accountData}};try{yield r.processSyncResponse(i,o)}catch(e){f["b"].error("Error processing cached sync",e)}r.storeIsInvalid||r.updateSyncState(I.Prepared,i)}))()}doSync(t){var r=this;return o()((function*(){while(r.running){var n=r.client.store.getSyncToken(),i=void 0;try{r.currentSyncRequest||(r.currentSyncRequest=r.doSyncRequest(t,n)),i=yield r.currentSyncRequest}catch(e){var o=yield r.onSyncError(e);if(o)return;continue}finally{r.currentSyncRequest=void 0}r.client.store.setSyncToken(i.next_batch),r.failedSyncCount=0;var a={oldSyncToken:null!==n&&void 0!==n?n:void 0,nextSyncToken:i.next_batch,catchingUp:r.catchingUp};r.syncOpts.crypto&&(yield r.syncOpts.crypto.onSyncWillProcess(a));try{yield r.processSyncResponse(a,i)}catch(e){f["b"].error("Caught /sync error",e),r.client.emit(p["b"].SyncUnexpectedError,e)}yield r.client.store.setSyncData(i),a.catchingUp=r.catchingUp,t.hasSyncedBefore||(r.updateSyncState(I.Prepared,a),t.hasSyncedBefore=!0),r.syncOpts.cryptoCallbacks&&(yield r.syncOpts.cryptoCallbacks.onSyncCompleted(a)),r.updateSyncState(I.Syncing,a),r.client.store.wantsSave()&&(r.syncOpts.crypto&&(yield r.syncOpts.crypto.saveDeviceList(0)),yield r.client.store.save())}r.running||(A("Sync no longer running: exiting."),r.connectionReturnedDefer&&(r.connectionReturnedDefer.reject(),r.connectionReturnedDefer=void 0),r.updateSyncState(I.Stopped))}))()}doSyncRequest(e,t){var r,n=this.getSyncParams(e,t);return this.client.http.authedRequest(v["i"].Get,"/sync",n,void 0,{localTimeoutMs:n.timeout+T,abortSignal:null===(r=this.abortController)||void 0===r?void 0:r.signal})}getSyncParams(e,t){var r=this.opts.pollTimeout;(this.getSyncState()!==I.Syncing||this.catchingUp)&&(this.catchingUp=!0,r=0);var n=e.filter;this.client.isGuest()&&!n&&(n=this.getGuestFilter());var i={filter:n,timeout:r};return this.opts.disablePresence?i.set_presence=x.Offline:void 0!==this.presence&&(i.set_presence=this.presence),t?i.since=t:i._cacheBuster=Date.now(),[I.Reconnecting,I.Error].includes(this.getSyncState())&&(i.timeout=0),i}setPresence(e){this.presence=e}onSyncError(e){var t=this;return o()((function*(){if(!t.running)return A("Sync no longer running: exiting"),t.connectionReturnedDefer&&(t.connectionReturnedDefer.reject(),t.connectionReturnedDefer=void 0),t.updateSyncState(I.Stopped),!0;if(f["b"].error("/sync error %s",e),t.shouldAbortSync(e))return!0;t.failedSyncCount++,f["b"].log("Number of consecutive failed sync requests:",t.failedSyncCount),A("Starting keep-alive");var r=t.startKeepAlives();t.currentSyncRequest=void 0,t.updateSyncState(t.failedSyncCount>=R?I.Error:I.Reconnecting,{error:e});var n=yield r;return n&&t.getSyncState()===I.Error&&t.updateSyncState(I.Catchup,{catchingUp:!0}),!1}))()}processSyncResponse(e,t){var r=this;return o()((function*(){var n,i,a,s,u=r.client;if(Array.isArray(null===(n=t.presence)||void 0===n?void 0:n.events)&&t.presence.events.filter(d["x"]).map(u.getEventMapper()).forEach((function(e){var t=u.store.getUser(e.getSender());t?t.setPresenceEvent(e):(t=c["a"].createUser(e.getSender(),u),t.setPresenceEvent(e),u.store.storeUser(t)),u.emit(p["b"].Event,e)})),Array.isArray(null===(i=t.account_data)||void 0===i?void 0:i.events)){var v=t.account_data.events.filter(d["x"]).map(u.getEventMapper()),g=v.reduce((e,t)=>(e[t.getType()]=u.store.getAccountData(t.getType()),e),{});u.store.storeAccountDataEvents(v),v.forEach((function(e){if(e.getType()===m["b"].PushRules){var t=e.getContent();u.setPushRules(t)}var r=g[e.getType()];return u.emit(p["b"].AccountData,e,r),e}))}if(t.to_device&&Array.isArray(t.to_device.events)&&t.to_device.events.length>0){var y=t.to_device.events.filter(d["x"]);r.syncOpts.cryptoCallbacks&&(y=yield r.syncOpts.cryptoCallbacks.preprocessToDeviceMessages(y));var b=[];y.map(u.getEventMapper({toDevice:!0})).map(e=>{if("m.key.verification.cancel"===e.getType()){var t=e.getContent()["transaction_id"];t&&b.push(t)}return e}).forEach((function(e){var t=e.getContent();if("m.room.message"!=e.getType()||"m.bad.encrypted"!=t.msgtype){if("m.key.verification.start"===e.getType()||"m.key.verification.request"===e.getType()){var r=t["transaction_id"];b.includes(r)&&e.flagCancelled()}u.emit(p["b"].ToDeviceEvent,e)}else f["b"].log("Ignoring undecryptable to-device event from "+e.getSender())}))}else r.catchingUp=!1;var w=[],S=[],E=[],k=[];t.rooms&&(t.rooms.invite&&(w=r.mapSyncResponseToRoomArray(t.rooms.invite)),t.rooms.join&&(S=r.mapSyncResponseToRoomArray(t.rooms.join)),t.rooms.leave&&(E=r.mapSyncResponseToRoomArray(t.rooms.leave)),t.rooms.knock&&(k=r.mapSyncResponseToRoomArray(t.rooms.knock))),r.notifEvents=[],yield Object(d["A"])(w,function(){var e=o()((function*(e){var t,n=e.room,i=r.mapSyncEventsFormat(e.invite_state,n);yield r.injectRoomEvents(n,i);var o=null===(t=n.currentState.getStateEvents(m["b"].RoomMember,u.getUserId()))||void 0===t?void 0:t.getSender(),a=u.crypto;if(a){var s=yield a.cryptoStore.takeParkedSharedHistory(n.roomId);for(var c of s)c.senderId===o&&(yield a.olmDevice.addInboundGroupSession(n.roomId,c.senderKey,c.forwardingCurve25519KeyChain,c.sessionId,c.sessionKey,c.keysClaimed,!0,{sharedHistory:!0,untrusted:!0}))}e.isBrandNewRoom?(n.recalculate(),u.store.storeRoom(n),u.emit(p["b"].Room,n)):n.recalculate(),i.forEach((function(e){u.emit(p["b"].Event,e)}))}));return function(t){return e.apply(this,arguments)}}()),yield Object(d["A"])(S,function(){var t=o()((function*(t){var n,i=t.room,o=r.mapSyncEventsFormat(t.state,i),a=r.mapSyncEventsFormat(t.timeline,i,!1),s=r.mapSyncEventsFormat(t.ephemeral),c=r.mapSyncEventsFormat(t.account_data),d=r.isRoomEncrypted(i,o,a);if(t.unread_notifications){var v,g;if(!d||0===t.unread_notifications.notification_count)i.setUnreadNotificationCount(l["b"].Total,null!==(v=t.unread_notifications.notification_count)&&void 0!==v?v:0);if(!d||i.getUnreadNotificationCount(l["b"].Highlight)<=0)i.setUnreadNotificationCount(l["b"].Highlight,null!==(g=t.unread_notifications.highlight_count)&&void 0!==g?g:0)}var y=null!==(n=t[_["a"].name])&&void 0!==n?n:t[_["a"].altName];if(y)for(var[b,w]of(i.resetThreadUnreadNotificationCountFromSync(Object.keys(y)),Object.entries(y))){var S;if(!d||0===w.notification_count)i.setThreadUnreadNotificationCount(b,l["b"].Total,null!==(S=w.notification_count)&&void 0!==S?S:0);var E,k=i.getThreadUnreadNotificationCount(b,l["b"].Highlight)<=0;if(!d||d&&k)i.setThreadUnreadNotificationCount(b,l["b"].Highlight,null!==(E=w.highlight_count)&&void 0!==E?E:0)}else i.resetThreadUnreadNotificationCountFromSync();if(t.timeline=t.timeline||{},t.isBrandNewRoom)null!==t.timeline.prev_batch&&i.getLiveTimeline().setPaginationToken(t.timeline.prev_batch,h["b"].BACKWARDS);else if(t.timeline.limited){for(var I,C=!0,T=a.length-1;T>=0;T--){var R=a[T].getId();if(i.getTimelineForEvent(R)){A("Already have event ".concat(R," in limited sync - not resetting")),C=!1,a.splice(0,T);break}}if(C)i.resetLiveTimeline(t.timeline.prev_batch,r.syncOpts.canResetEntireTimeline(i.roomId)?null:null!==(I=e.oldSyncToken)&&void 0!==I?I:null),u.resetNotifTimelineSet()}if(r.syncOpts.cryptoCallbacks)for(var x of o.concat(a))x.isState()&&x.getType()===m["b"].RoomEncryption&&""===x.getStateKey()&&(yield r.syncOpts.cryptoCallbacks.onCryptoEvent(i,x));try{yield r.injectRoomEvents(i,o,a,e.fromCache)}catch(x){f["b"].error("Failed to process events on room ".concat(i.roomId,":"),x)}t.summary&&i.setSummary(t.summary),i.addEphemeralEvents(s),i.addAccountData(c),i.recalculate(),t.isBrandNewRoom&&(u.store.storeRoom(i),u.emit(p["b"].Room,i)),r.processEventsForNotifs(i,a);var O=e=>u.emit(p["b"].Event,e);o.forEach(O),a.forEach(O),s.forEach(O),c.forEach(O),i.decryptCriticalEvents()}));return function(e){return t.apply(this,arguments)}}()),yield Object(d["A"])(E,function(){var e=o()((function*(e){var t=e.room,n=r.mapSyncEventsFormat(e.state,t),i=r.mapSyncEventsFormat(e.timeline,t),o=r.mapSyncEventsFormat(e.account_data);yield r.injectRoomEvents(t,n,i),t.addAccountData(o),t.recalculate(),e.isBrandNewRoom&&(u.store.storeRoom(t),u.emit(p["b"].Room,t)),r.processEventsForNotifs(t,i),n.forEach((function(e){u.emit(p["b"].Event,e)})),i.forEach((function(e){u.emit(p["b"].Event,e)})),o.forEach((function(e){u.emit(p["b"].Event,e)}))}));return function(t){return e.apply(this,arguments)}}()),yield Object(d["A"])(k,function(){var e=o()((function*(e){var t=e.room,n=r.mapSyncEventsFormat(e.knock_state,t);yield r.injectRoomEvents(t,n),e.isBrandNewRoom?(t.recalculate(),u.store.storeRoom(t),u.emit(p["b"].Room,t)):t.recalculate(),n.forEach((function(e){u.emit(p["b"].Event,e)}))}));return function(t){return e.apply(this,arguments)}}()),e.oldSyncToken&&r.notifEvents.length&&(r.notifEvents.sort((function(e,t){return e.getTs()-t.getTs()})),r.notifEvents.forEach((function(e){var t;null===(t=u.getNotifTimelineSet())||void 0===t||t.addLiveEvent(e)}))),t.device_lists&&r.syncOpts.cryptoCallbacks&&(yield r.syncOpts.cryptoCallbacks.processDeviceLists(t.device_lists)),yield null===(a=r.syncOpts.cryptoCallbacks)||void 0===a?void 0:a.processKeyCounts(t.device_one_time_keys_count,null!==(s=t.device_unused_fallback_key_types)&&void 0!==s?s:t["org.matrix.msc2732.device_unused_fallback_key_types"])}))()}startKeepAlives(e){return void 0===e&&(e=2e3+Math.floor(5e3*Math.random())),null!==this.keepAliveTimer&&clearTimeout(this.keepAliveTimer),e>0?this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this),e):this.pokeKeepAlive(),this.connectionReturnedDefer||(this.connectionReturnedDefer=Object(d["i"])()),this.connectionReturnedDefer.promise}pokeKeepAlive(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.running)return clearTimeout(this.keepAliveTimer),void(this.connectionReturnedDefer&&(this.connectionReturnedDefer.reject("SyncApi.stop() was called"),this.connectionReturnedDefer=void 0));var r=()=>{clearTimeout(this.keepAliveTimer),this.connectionReturnedDefer&&(this.connectionReturnedDefer.resolve(t),this.connectionReturnedDefer=void 0)};this.client.http.request(v["i"].Get,"/_matrix/client/versions",void 0,void 0,{prefix:"",localTimeoutMs:15e3,abortSignal:null===(e=this.abortController)||void 0===e?void 0:e.signal}).then(()=>{r()},e=>{400==e.httpStatus||404==e.httpStatus?this.keepAliveTimer=setTimeout(r,2e3):(t=!0,this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this,t),5e3+Math.floor(5e3*Math.random())),this.updateSyncState(I.Error,{error:e}))})}mapSyncResponseToRoomArray(e){var t=this.client;return Object.keys(e).filter(e=>!Object(d["M"])(e)).map(r=>{var n=t.store.getRoom(r),i=!1;return n||(n=this.createRoom(r),i=!0),k(k({},e[r]),{},{room:n,isBrandNewRoom:i})})}mapSyncEventsFormat(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!Array.isArray(e.events))return[];var n=this.client.getEventMapper({decrypt:r});return e.events.filter(d["x"]).map((function(e){return t&&(e.room_id=t.roomId),n(e)}))}resolveInvites(e){if(e&&this.opts.resolveInvitesToProfiles){var t=this.client;e.getMembersWithMembership(S["a"].Invite).forEach((function(r){if(!r.requestedProfileInfo){r.requestedProfileInfo=!0;var n,i=t.getUser(r.userId);n=i?Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):t.getProfileInfo(r.userId),n.then((function(t){var n=r.events.member;(null===n||void 0===n?void 0:n.getContent().membership)===S["a"].Invite&&(n.getContent().avatar_url=t.avatar_url,n.getContent().displayname=t.displayname,r.setMembershipEvent(n,e.currentState))}),(function(e){}))}}))}}findEncryptionEvent(e){return null===e||void 0===e?void 0:e.find(e=>e.getType()===m["b"].RoomEncryption&&""===e.getStateKey())}isRoomEncrypted(e,t,r){return e.hasEncryptionStateEvent()||!!this.findEncryptionEvent(t)||!!this.findEncryptionEvent(r)}injectRoomEvents(e,t,r){var n=arguments,i=this;return o()((function*(){var o=n.length>3&&void 0!==n[3]&&n[3],a=e.getLiveTimeline(),s=0==a.getEvents().length;if(s){for(var c of t)i.client.getPushActionsForEvent(c);a.initialiseState(t,{timelineWasEmpty:s})}i.resolveInvites(e),e.recalculate(),s||(e.oldState.setStateEvents(t||[]),e.currentState.setStateEvents(t||[])),yield e.addLiveEvents(r||[],{fromCache:o,timelineWasEmpty:s}),i.client.processBeaconEvents(e,r)}))()}processEventsForNotifs(e,t){if(this.client.getNotifTimelineSet())for(var r of t){var n,i=this.client.getPushActionsForEvent(r);null!==i&&void 0!==i&&i.notify&&null!==(n=i.tweaks)&&void 0!==n&&n.highlight&&this.notifEvents.push(r)}}getGuestFilter(){return"{}"}updateSyncState(e,t){var r=this.syncState;this.syncState=e,this.syncStateData=t,this.client.emit(p["b"].Sync,this.syncState,r,t)}}function L(e,t,r){var{timelineSupport:n}=e,i=new l["c"](t,e,e.getUserId(),{lazyLoadMembers:r.lazyLoadMembers,pendingEventOrdering:r.pendingEventOrdering,timelineSupport:n});return e.reEmitter.reEmit(i,[l["d"].Name,l["d"].Avatar,l["d"].Redaction,l["d"].RedactionCancelled,l["d"].Receipt,l["d"].Tags,l["d"].LocalEchoUpdated,l["d"].AccountData,l["d"].MyMembership,l["d"].Timeline,l["d"].TimelineReset,g["b"].Events,g["b"].Members,g["b"].NewMember,g["b"].Update,b["b"].New,b["b"].Update,b["b"].Destroy,b["b"].LivenessChange]),i.on(g["b"].NewMember,(t,r,n)=>{var i;n.user=null!==(i=e.getUser(n.userId))&&void 0!==i?i:void 0,e.reEmitter.reEmit(n,[y["b"].Name,y["b"].Typing,y["b"].PowerLevel,y["b"].Membership])}),i}}).call(this,n("c8ba"))},"480d":function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},4837:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("5cf1"),c=r("ec26"),l=r("b83f"),d=r("60af"),u=r("5b5f"),h=r("75c9");class f{constructor(e,t){this.baseApis=e,this.cryptoCallbacks=t,a()(this,"requests",new Map)}request(e,t){var r=this.baseApis.makeTxnId(),n=Object(l["i"])();this.requests.set(r,{name:e,devices:t,deferred:n});var i=e=>{var i={action:"request_cancellation",requesting_device_id:this.baseApis.deviceId,request_id:r},o=new Map;for(var a of t)o.set(a,i);this.baseApis.sendToDevice("m.secret.request",new Map([[this.baseApis.getUserId(),o]])),n.reject(new Error(e||"Cancelled"))},o={name:e,action:"request",requesting_device_id:this.baseApis.deviceId,request_id:r,[d["k"]]:Object(c["a"])()},a=new Map;for(var s of t)a.set(s,o);return u["b"].info("Request secret ".concat(e," from ").concat(t,", id ").concat(r)),this.baseApis.sendToDevice("m.secret.request",new Map([[this.baseApis.getUserId(),a]])),{requestId:r,promise:n.promise,cancel:i}}onRequestReceived(e){var t=this;return i()((function*(){var r=e.getSender(),n=e.getContent();if(r===t.baseApis.getUserId()&&n.name&&n.action&&n.requesting_device_id&&n.request_id){var i=n.requesting_device_id;if("request_cancellation"===n.action);else if("request"===n.action){if(i===t.baseApis.deviceId)return;if(u["b"].info("received request for secret ("+r+", "+i+", "+n.request_id+")"),!t.cryptoCallbacks.onSecretRequested)return;var o=yield t.cryptoCallbacks.onSecretRequested(r,i,n.request_id,n.name,t.baseApis.checkDeviceTrust(r,i));if(o){u["b"].info("Preparing ".concat(n.name," secret for ").concat(i));var a={type:"m.secret.send",content:{request_id:n.request_id,secret:o}},s={algorithm:h["OLM_ALGORITHM"],sender_key:t.baseApis.crypto.olmDevice.deviceCurve25519Key,ciphertext:{},[d["k"]]:Object(c["a"])()};yield h["ensureOlmSessionsForDevices"](t.baseApis.crypto.olmDevice,t.baseApis,new Map([[r,[t.baseApis.getStoredDevice(r,i)]]])),yield h["encryptMessageForDevice"](s.ciphertext,t.baseApis.getUserId(),t.baseApis.deviceId,t.baseApis.crypto.olmDevice,r,t.baseApis.getStoredDevice(r,i),a);var l=new Map([[r,new Map([[i,s]])]]);u["b"].info("Sending ".concat(n.name," secret for ").concat(i)),t.baseApis.sendToDevice("m.room.encrypted",l)}else u["b"].info("Request denied for ".concat(n.name," secret for ").concat(i))}}}))()}onSecretReceived(e){if(e.getSender()===this.baseApis.getUserId())if(h["isOlmEncrypted"](e)){var t=e.getContent(),r=this.baseApis.crypto.deviceList.getUserByIdentityKey(h["OLM_ALGORITHM"],e.getSenderKey()||"");if(r===e.getSender()){u["b"].log("got secret share for request",t.request_id);var n=this.requests.get(t.request_id);if(n){var i=this.baseApis.crypto.deviceList.getDeviceByIdentityKey(h["OLM_ALGORITHM"],e.getSenderKey());if(!i)return void u["b"].log("secret share from unknown device with key",e.getSenderKey());if(!n.devices.includes(i.deviceId))return void u["b"].log("unsolicited secret share from device",i.deviceId);var o=this.baseApis.crypto.checkDeviceInfoTrust(e.getSender(),i);if(!o.isVerified())return void u["b"].log("secret share from unverified device");u["b"].log("Successfully received secret ".concat(n.name," ")+"from ".concat(i.deviceId)),n.deferred.resolve(t.secret)}}else u["b"].error("sending device does not belong to the user it claims to be from")}else u["b"].error("secret event not properly encrypted")}}class p{constructor(e,t,r){a()(this,"storageImpl",void 0),a()(this,"sharingImpl",void 0),this.storageImpl=new s["ServerSideSecretStorageImpl"](e,t),this.sharingImpl=new f(r,t)}getDefaultKeyId(){return this.storageImpl.getDefaultKeyId()}setDefaultKeyId(e){return this.storageImpl.setDefaultKeyId(e)}addKey(e,t,r){return this.storageImpl.addKey(e,t,r)}getKey(e){return this.storageImpl.getKey(e)}hasKey(e){return this.storageImpl.hasKey(e)}checkKey(e,t){return this.storageImpl.checkKey(e,t)}store(e,t,r){return this.storageImpl.store(e,t,r)}get(e){return this.storageImpl.get(e)}isStored(e){var t=this;return i()((function*(){return t.storageImpl.isStored(e)}))()}request(e,t){return this.sharingImpl.request(e,t)}onRequestReceived(e){return this.sharingImpl.onRequestReceived(e)}onSecretReceived(e){this.sharingImpl.onSecretReceived(e)}}},"485a":function(e,t,r){"use strict";var n=r("c65b"),i=r("1626"),o=r("861d"),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&i(r=e.toString)&&!o(s=n(r,e)))return s;if(i(r=e.valueOf)&&!o(s=n(r,e)))return s;if("string"!==t&&i(r=e.toString)&&!o(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},"490a":function(e,t,r){"use strict";function n(e,t,r){for(var n=Object.assign({},t.data,{matrix_room_id:r.widgetRoomId||"",matrix_user_id:r.currentUserId,matrix_display_name:r.userDisplayName||r.currentUserId,matrix_avatar_url:r.userHttpAvatarUrl||"",matrix_widget_id:t.id,"org.matrix.msc2873.client_id":r.clientId||"","org.matrix.msc2873.client_theme":r.clientTheme||"","org.matrix.msc2873.client_language":r.clientLanguage||"","org.matrix.msc3819.matrix_device_id":r.deviceId||"","org.matrix.msc4039.matrix_base_url":r.baseUrl||""}),o=e,a=0,s=Object.keys(n);a<s.length;a++){var c=s[a],l="$".concat(c).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),d=new RegExp(l,"g");o=o.replace(d,encodeURIComponent(i(n[c])))}return o}function i(e){return null===e||void 0===e?"".concat(e):String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.runTemplate=n,t.toString=i},"4a0c":function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},"4a1e":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",[t("transition",{attrs:{name:e.transition,mode:e.mode}},[e._t("default")],2),t("div",{staticClass:"overlay-top"}),t("div",{staticClass:"overlay-right"}),t("div",{staticClass:"overlay-bottom"}),t("div",{staticClass:"overlay-left"})],1)},i=[],o={name:"vue-page-transition",props:["name"],data(){return{transition:"fade",mode:"out-in"}},created(){this.$router.beforeEach((e,t,r)=>{this.transition=e.meta.transition?e.meta.transition:this.$props.name,r()})}},a=o,s=r("2877");function c(e){var t=r("3016");t.__inject__&&t.__inject__(e);var n=r("3ad9");n.__inject__&&n.__inject__(e)}var l=Object(s["a"])(a,n,i,!1,c,"a8099538",null,!0);t["a"]=l.exports},"4a23":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'#preloader[data-v-64c94140]{position:fixed;top:0;left:0;right:0;bottom:0;background:transparent;z-index:3500}#preloader .iospreloadercenter[data-v-64c94140]{position:absolute;left:50%;top:50%;margin-left:-33px;margin-top:-33px}#preloader.minimized[data-v-64c94140]{display:none}#preloader.minimized.active[data-v-64c94140]{display:block;width:344px;right:.5em;bottom:1em;top:124px;left:auto}.default .preloader[data-v-64c94140]{height:90px;text-align:center;overflow:hidden;padding:10px 0;margin:0 auto;filter:url(#love);position:absolute;left:50%;top:50%;margin-top:-45px;margin-left:-60px;opacity:.85}.default .preloader span[data-v-64c94140]{width:20px;height:20px;background-color:transparent;display:inline-block;border-radius:50%;margin:10px}.spinner-eff[data-v-64c94140]{position:relative;width:66px;height:66px}.spinner-eff .spinner-bar[data-v-64c94140]:after,.spinner-eff .spinner-bar[data-v-64c94140]:before,.spinner-eff[data-v-64c94140]:after,.spinner-eff[data-v-64c94140]:before{content:"";display:block}',""]),e.exports=t},"4a30":function(e,t,r){"use strict";function n(e,t){if("string"===typeof e)return"string"===typeof t?t===e:t.matches(e);if("string"===typeof t)return e.matches(t);var r=t,n=e;return r.matches(n.name)||r.matches(n.altName)}Object.defineProperty(t,"__esModule",{value:!0}),t.isEventTypeSame=n},"4a7b":function(e,t,r){"use strict";var n=r("c532");e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function l(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(e[i],t[i])}n.forEach(i,(function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),n.forEach(o,l),n.forEach(a,(function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(void 0,t[i])})),n.forEach(s,(function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))}));var d=i.concat(o).concat(a).concat(s),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===d.indexOf(e)}));return n.forEach(u,l),r}},"4aa5":function(e,t,r){var n=r("e63a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("6a06b25c",n,e)}},"4ac5":function(e,t,r){"use strict";r.r(t);var n=r("c20d");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"4b11":function(e,t,r){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},"4b80":function(e,t,r){"use strict";r.r(t);var n=r("2a49");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"4b9e":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("9523"),i=r.n(n);class o extends Error{constructor(e,t,r){super(t),this.code=e,i()(this,"detailedString",void 0),this.name="DecryptionError",this.detailedString=a(this,r)}}function a(e,t){var r=e.name+"[msg: "+e.message;return t&&(r+=", "+Object.keys(t).map(e=>e+": "+t[e]).join(", ")),r+="]",r}},"4c02":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));var n,i,o=r("a74c"),a=new o["c"]("delegated_oidc_compatibility","org.matrix.msc3824.delegated_oidc_compatibility");(function(e){e["Gitlab"]="gitlab",e["Github"]="github",e["Apple"]="apple",e["Google"]="google",e["Facebook"]="facebook",e["Twitter"]="twitter"})(n||(n={})),function(e){e["LOGIN"]="login",e["REGISTER"]="register"}(i||(i={}))},"4c0c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"4d5e":function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});class o{constructor(e,t){this.key=e,this.crypto=t}static importKey(e,t){return i(this,void 0,void 0,(function*(){if(16!==t.length&&32!==t.length)throw new Error(`Miscreant: invalid key length: ${t.length} (expected 16 or 32 bytes)`);const r=yield e.subtle.importKey("raw",t,"AES-CTR",!1,["encrypt"]);return new o(r,e)}))}encryptCtr(e,t){return i(this,void 0,void 0,(function*(){const r=yield this.crypto.subtle.encrypt({name:"AES-CTR",counter:e,length:16},this.key,t);return new Uint8Array(r)}))}clear(){return this}}r.default=o},"4d64":function(e,t,r){"use strict";var n=r("fc6a"),i=r("23cb"),o=r("07fa"),a=function(e){return function(t,r,a){var s=n(t),c=o(s);if(0===c)return!e&&-1;var l,d=i(a,c);if(e&&r!==r){while(c>d)if(l=s[d++],l!==l)return!0}else for(;c>d;d++)if((e||d in s)&&s[d]===r)return e||d||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4e99":function(t,r,n){"use strict";n.d(r,"a",(function(){return w}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("ec26"),l=n("5b5f"),d=n("75c9"),u=n("500a"),h=n("31d8"),f=n("60af"),p=n("3af6"),v=n("b83f"),m=n("3925"),g=n("1461"),y=n("4b9e");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t,r,n=null===e||void 0===e||null===(t=e.currentState)||void 0===t?void 0:t.getStateEvents("m.room.history_visibility",""),i=null===n||void 0===n||null===(r=n.getContent())||void 0===r?void 0:r.history_visibility;return["world_readable","shared"].includes(i)}var S=e=>"string"===typeof e.ciphertext?!!e.ciphertext.length:!!Object.keys(e.ciphertext).length;class E{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.sessionId=e,this.sharedHistory=t,s()(this,"useCount",0),s()(this,"creationTime",void 0),s()(this,"sharedWithDevices",new v["b"](()=>new Map)),s()(this,"blockedDevicesNotified",new v["b"](()=>new Map)),this.creationTime=(new Date).getTime()}needsRotation(e,t){var r=(new Date).getTime()-this.creationTime;return(this.useCount>=e||r>=t)&&(l["b"].log("Rotating megolm session after "+this.useCount+" messages, "+r+"ms"),!0)}markSharedWithDevice(e,t,r,n){this.sharedWithDevices.getOrCreate(e).set(t,{deviceKey:r,messageIndex:n})}markNotifiedBlockedDevice(e,t){this.blockedDevicesNotified.getOrCreate(e).set(t,!0)}sharedWithTooManyDevices(e){for(var[t,r]of this.sharedWithDevices){if(!e.has(t))return l["b"].log("Starting new megolm session because we shared with "+t),!0;for(var[n]of r){var i;if(null===(i=e.get(t))||void 0===i||!i.get(n))return l["b"].log("Starting new megolm session because we shared with "+t+":"+n),!0}}return!1}}class k extends u["d"]{constructor(e){var t,r,n,i;super(e),s()(this,"setupPromise",Promise.resolve(null)),s()(this,"outboundSessions",{}),s()(this,"sessionRotationPeriodMsgs",void 0),s()(this,"sessionRotationPeriodMs",void 0),s()(this,"encryptionPreparation",void 0),s()(this,"roomId",void 0),s()(this,"prefixedLogger",void 0),this.roomId=e.roomId,this.prefixedLogger=l["b"].getChild("[".concat(this.roomId," encryption]")),this.sessionRotationPeriodMsgs=null!==(t=null===(r=e.config)||void 0===r?void 0:r.rotation_period_msgs)&&void 0!==t?t:100,this.sessionRotationPeriodMs=null!==(n=null===(i=e.config)||void 0===i?void 0:i.rotation_period_ms)&&void 0!==n?n:6048e5}ensureOutboundSession(e,t,r){var n=arguments,i=this;return o()((function*(){var a=n.length>3&&void 0!==n[3]&&n[3],s=function(){var n=o()((function*(n){var o=w(e),s=yield i.prepareSession(t,o,n);return yield i.shareSession(t,o,a,r,s),s}));return function(e){return n.apply(this,arguments)}}(),c=i.setupPromise.then(s);return i.setupPromise=c.catch(e=>(i.prefixedLogger.error("Failed to setup outbound session",e),null)),c}))()}prepareSession(e,t,r){var n=this;return o()((function*(){var i,o;return r&&t!==r.sharedHistory&&(r=null),null!==(i=r)&&void 0!==i&&i.needsRotation(n.sessionRotationPeriodMsgs,n.sessionRotationPeriodMs)&&(n.prefixedLogger.debug("Starting new megolm session because we need to rotate."),r=null),null!==(o=r)&&void 0!==o&&o.sharedWithTooManyDevices(e)&&(r=null),r||(n.prefixedLogger.debug("Starting new megolm session"),r=yield n.prepareNewSession(t),n.prefixedLogger.debug("Started new megolm session ".concat(r.sessionId)),n.outboundSessions[r.sessionId]=r),r}))()}shareSession(e,t,r,n,i){var a=this;return o()((function*(){var s={};for(var[c,l]of e)for(var[u,h]of l){var f,p=h.getIdentityKey();p!=a.olmDevice.deviceCurve25519Key&&(null!==(f=i.sharedWithDevices.get(c))&&void 0!==f&&f.get(u)||(s[c]=s[c]||[],s[c].push(h)))}var m=a.olmDevice.getOutboundGroupSessionKey(i.sessionId),g={type:"m.room_key",content:{algorithm:d["MEGOLM_ALGORITHM"],room_id:a.roomId,session_id:i.sessionId,session_key:m.key,chain_index:m.chain_index,"org.matrix.msc3061.shared_history":t}},[y,b]=yield d["getExistingOlmSessions"](a.olmDevice,a.baseApis,s);yield Promise.all([o()((function*(){var e=Array.from(b.entries()).map(e=>{var[t,r]=e;return Array.from(r.entries()).map(e=>{var[r,n]=e;return"".concat(t,"/").concat(r,": ").concat(n.sessionId)})}).flat(1);a.prefixedLogger.debug("Sharing keys with devices with existing Olm sessions:",e),yield a.shareKeyWithOlmSessions(i,m,g,b),a.prefixedLogger.debug("Shared keys with existing Olm sessions")}))(),o()((function*(){var e=Array.from(y.entries()).map(e=>{var[t,r]=e;return r.map(e=>"".concat(t,"/").concat(e.deviceId))}).flat(1);a.prefixedLogger.debug("Sharing keys (start phase 1) with devices without existing Olm sessions:",e);var t=[],n=Date.now(),s=[];yield a.shareKeyWithDevices(i,m,g,y,t,r?1e4:2e3,s),a.prefixedLogger.debug("Shared keys (end phase 1) with devices without existing Olm sessions"),!r&&Date.now()-n<1e4?o()((function*(){var e=new v["b"](()=>[]),r=new Set;for(var n of s)r.add(n);var o=[];for(var{userId:c,deviceInfo:l}of t){var d=c.slice(c.indexOf(":")+1);r.has(d)?e.getOrCreate(c).push(l):o.push({userId:c,deviceInfo:l})}var u=Array.from(e.entries()).map(e=>{var[t,r]=e;return r.map(e=>"".concat(t,"/").concat(e.deviceId))}).flat(1);u.length>0&&(a.prefixedLogger.debug("Sharing keys (start phase 2) with devices without existing Olm sessions:",u),yield a.shareKeyWithDevices(i,m,g,e,o,3e4),a.prefixedLogger.debug("Shared keys (end phase 2) with devices without existing Olm sessions")),yield a.notifyFailedOlmDevices(i,m,o)}))():yield a.notifyFailedOlmDevices(i,m,t)}))(),o()((function*(){a.prefixedLogger.debug("There are ".concat(n.size," blocked devices:"),Array.from(n.entries()).map(e=>{var[t,r]=e;return Array.from(r.entries()).map(e=>{var[r,n]=e;return"".concat(t,"/").concat(r)})}).flat(1));var e=new v["b"](()=>new Map),t=0;for(var[r,o]of n)for(var[s,c]of o){var l;void 0===(null===(l=i.blockedDevicesNotified.get(r))||void 0===l?void 0:l.get(s))&&(e.getOrCreate(r).set(s,{device:c}),t++)}t&&(a.prefixedLogger.debug("Notifying ".concat(t," newly blocked devices:"),Array.from(e.entries()).map(e=>{var[t,r]=e;return Object.entries(r).map(e=>{var[r,n]=e;return"".concat(t,"/").concat(r)})}).flat(1)),yield a.notifyBlockedDevices(i,e),a.prefixedLogger.debug("Notified ".concat(t," newly blocked devices")))}))()])}))()}prepareNewSession(e){var t=this;return o()((function*(){var r=t.olmDevice.createOutboundGroupSession(),n=t.olmDevice.getOutboundGroupSessionKey(r);return yield t.olmDevice.addInboundGroupSession(t.roomId,t.olmDevice.deviceCurve25519Key,[],r,n.key,{ed25519:t.olmDevice.deviceEd25519Key},!1,{sharedHistory:e}),t.crypto.backupManager.backupGroupSession(t.olmDevice.deviceCurve25519Key,r),new E(r,e)}))()}getDevicesWithoutSessions(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var[n,i]of t){var o=e.get(n);for(var a of i){var s=a.deviceId,c=null===o||void 0===o?void 0:o.get(s);null!==c&&void 0!==c&&c.sessionId||(r.push({userId:n,deviceInfo:a}),null===o||void 0===o||o.delete(s))}}return r}splitDevices(e){var t=20,r=[],n=[r];for(var[i,o]of e){for(var a of o.values())r.push({userId:i,deviceInfo:a.device});r.length>t&&(r=[],n.push(r))}return 0===r.length&&n.pop(),n}encryptAndSendKeysToDevices(e,t,r,n){return this.crypto.encryptAndSendToDevices(r,n).then(()=>{for(var n of r)e.markSharedWithDevice(n.userId,n.deviceInfo.deviceId,n.deviceInfo.getIdentityKey(),t)}).catch(e=>{throw this.prefixedLogger.error("failed to encryptAndSendToDevices",e),e})}sendBlockedNotificationsToDevices(e,t,r){var n=this;return o()((function*(){var i=new v["b"](()=>new Map);for(var o of t){var a=o.userId,s=o.deviceInfo,l=s.deviceInfo,d=l.deviceId,u=_(_({},r),{},{code:s.code,reason:s.reason,[f["k"]]:Object(c["a"])()});"m.no_olm"===u.code&&(delete u.room_id,delete u.session_id),i.getOrCreate(a).set(d,u)}for(var[h,p]of(yield n.baseApis.sendToDevice("m.room_key.withheld",i),i))for(var m of p.keys())e.markNotifiedBlockedDevice(h,m)}))()}reshareKeyWithDevice(e,t,r,n){var i=this;return o()((function*(){var o,a=i.outboundSessions[t];if(a)if(a.sharedWithDevices.has(r)){var s=null===(o=a.sharedWithDevices.get(r))||void 0===o?void 0:o.get(n.deviceId);if(void 0!==s)if(s.deviceKey===n.getIdentityKey()){var l=yield i.olmDevice.getInboundGroupSessionKey(i.roomId,e,t,s.messageIndex);if(l){yield d["ensureOlmSessionsForDevices"](i.olmDevice,i.baseApis,new Map([[r,[n]]]));var u={type:"m.forwarded_room_key",content:{algorithm:d["MEGOLM_ALGORITHM"],room_id:i.roomId,session_id:t,session_key:l.key,chain_index:l.chain_index,sender_key:e,sender_claimed_ed25519_key:l.sender_claimed_ed25519_key,forwarding_curve25519_key_chain:l.forwarding_curve25519_key_chain,"org.matrix.msc3061.shared_history":l.shared_history||!1}},h={algorithm:d["OLM_ALGORITHM"],sender_key:i.olmDevice.deviceCurve25519Key,ciphertext:{},[f["k"]]:Object(c["a"])()};yield d["encryptMessageForDevice"](h.ciphertext,i.userId,i.deviceId,i.olmDevice,r,n,u),yield i.baseApis.sendToDevice("m.room.encrypted",new Map([[r,new Map([[n.deviceId,h]])]])),i.prefixedLogger.debug("Re-shared key for megolm session ".concat(e,"|").concat(t," with ").concat(r,":").concat(n.deviceId))}else i.prefixedLogger.warn("No inbound session key found for megolm session ".concat(e,"|").concat(t,": not re-sharing keys"))}else i.prefixedLogger.warn("Megolm session ".concat(e,"|").concat(t," has been shared with device ").concat(n.deviceId," but ")+"with identity key ".concat(s.deviceKey,". Key is now ").concat(n.getIdentityKey(),"!"));else i.prefixedLogger.debug("megolm session ".concat(e,"|").concat(t," never shared with device ").concat(r,":").concat(n.deviceId))}else i.prefixedLogger.debug("megolm session ".concat(e,"|").concat(t," never shared with user ").concat(r));else i.prefixedLogger.debug("megolm session ".concat(e,"|").concat(t," not found: not re-sharing keys"))}))()}shareKeyWithDevices(e,t,r,n,i,a,s){var c=this;return o()((function*(){var o=yield d["ensureOlmSessionsForDevices"](c.olmDevice,c.baseApis,n,!1,a,s,c.prefixedLogger);c.getDevicesWithoutSessions(o,n,i),yield c.shareKeyWithOlmSessions(e,t,r,o)}))()}shareKeyWithOlmSessions(t,r,n,i){var a=this;return o()((function*(){for(var o=a.splitDevices(i),s=0;s<o.length;s++){var c="megolm keys for ".concat(t.sessionId," (slice ").concat(s+1,"/").concat(o.length,")");try{a.prefixedLogger.debug("Sharing ".concat(c),o[s].map(e=>"".concat(e.userId,"/").concat(e.deviceInfo.deviceId))),yield a.encryptAndSendKeysToDevices(t,r.chain_index,o[s],n),a.prefixedLogger.debug("Shared ".concat(c))}catch(e){throw a.prefixedLogger.error("Failed to share ".concat(c)),e}}}))()}notifyFailedOlmDevices(e,t,r){var n=this;return o()((function*(){for(var{userId:i,deviceInfo:o}of(n.prefixedLogger.debug("Notifying ".concat(r.length," devices we failed to create Olm sessions")),r)){var a=o.deviceId;e.markSharedWithDevice(i,a,o.getIdentityKey(),t.chain_index)}var s=yield n.olmDevice.filterOutNotifiedErrorDevices(r);n.prefixedLogger.debug("Need to notify ".concat(s.length," failed devices which haven't been notified before"));var c=new v["b"](()=>new Map);for(var{userId:l,deviceInfo:d}of s)c.getOrCreate(l).set(d.deviceId,{device:{code:"m.no_olm",reason:h["b"]["m.no_olm"],deviceInfo:d}});yield n.notifyBlockedDevices(e,c),n.prefixedLogger.debug("Notified ".concat(s.length," devices we failed to create Olm sessions"))}))()}notifyBlockedDevices(t,r){var n=this;return o()((function*(){for(var i={room_id:n.roomId,session_id:t.sessionId,algorithm:d["MEGOLM_ALGORITHM"],sender_key:n.olmDevice.deviceCurve25519Key},o=n.splitDevices(r),a=0;a<o.length;a++)try{yield n.sendBlockedNotificationsToDevices(t,o[a],i),n.prefixedLogger.debug("Completed blacklist notification for ".concat(t.sessionId," ")+"(slice ".concat(a+1,"/").concat(o.length,")"))}catch(e){throw n.prefixedLogger.debug("blacklist notification for ".concat(t.sessionId," ")+"(slice ".concat(a+1,"/").concat(o.length,") failed")),e}}))()}prepareToEncrypt(t){var r=this;if(t.roomId!==this.roomId)throw new Error("MegolmEncryption.prepareToEncrypt called on unexpected room");if(null!=this.encryptionPreparation){var n=Date.now()-this.encryptionPreparation.startTime;return this.prefixedLogger.debug("Already started preparing to encrypt for this room ".concat(n,"ms ago, skipping")),this.encryptionPreparation.cancel}this.prefixedLogger.debug("Preparing to encrypt events");var i=!1,a=()=>i;return this.encryptionPreparation={startTime:Date.now(),promise:o()((function*(){try{var n=yield r.getDevicesInRoom(t,!1,a);if(null===n)return;var[i,o]=n;r.crypto.globalErrorOnUnknownDevices&&r.removeUnknownDevices(i),r.prefixedLogger.debug("Ensuring outbound megolm session"),yield r.ensureOutboundSession(t,i,o,!0),r.prefixedLogger.debug("Ready to encrypt events")}catch(e){r.prefixedLogger.error("Failed to prepare to encrypt events",e)}finally{delete r.encryptionPreparation}}))(),cancel:()=>{i=!0,delete this.encryptionPreparation}},this.encryptionPreparation.cancel}encryptMessage(t,r,n){var i=this;return o()((function*(){if(i.prefixedLogger.debug("Starting to encrypt event"),null!=i.encryptionPreparation)try{yield i.encryptionPreparation.promise}catch(e){}var o=i.isVerificationEvent(r,n),[a,s]=yield i.getDevicesInRoom(t,o);i.crypto.globalErrorOnUnknownDevices&&i.checkForUnknownDevices(a);var c=yield i.ensureOutboundSession(t,a,s),l={room_id:i.roomId,type:r,content:n},u=i.olmDevice.encryptGroupMessage(c.sessionId,JSON.stringify(l)),h={algorithm:d["MEGOLM_ALGORITHM"],sender_key:i.olmDevice.deviceCurve25519Key,ciphertext:u,session_id:c.sessionId,device_id:i.deviceId};return c.useCount++,h}))()}isVerificationEvent(e,t){switch(e){case f["b"].KeyVerificationCancel:case f["b"].KeyVerificationDone:case f["b"].KeyVerificationMac:case f["b"].KeyVerificationStart:case f["b"].KeyVerificationKey:case f["b"].KeyVerificationReady:case f["b"].KeyVerificationAccept:return!0;case f["b"].RoomMessage:return t["msgtype"]===f["e"].KeyVerificationRequest;default:return!1}}forceDiscardSession(){this.setupPromise=this.setupPromise.then(()=>null)}checkForUnknownDevices(e){var t=new v["b"](()=>new Map);for(var[r,n]of e)for(var[i,o]of n)o.isUnverified()&&!o.isKnown()&&t.getOrCreate(r).set(i,o);if(t.size)throw new u["e"]("This room contains unknown devices which have not been verified. We strongly recommend you verify them before continuing.",t)}removeUnknownDevices(e){for(var[t,r]of e){for(var[n,i]of r)i.isUnverified()&&!i.isKnown()&&r.delete(n);0===r.size&&e.delete(t)}}getDevicesInRoom(e){var t=arguments,r=this;return o()((function*(){var n=t.length>1&&void 0!==t[1]&&t[1],i=t.length>2?t[2]:void 0,o=yield e.getEncryptionTargetMembers();r.prefixedLogger.debug("Encrypting for users (shouldEncryptForInvitedMembers: ".concat(e.shouldEncryptForInvitedMembers(),"):"),o.map(e=>"".concat(e.userId," (").concat(e.membership,")")));var a=o.map((function(e){return e.userId})),s=r.crypto.globalBlacklistUnverifiedDevices,c=e.getBlacklistUnverifiedDevices();"boolean"===typeof c&&(s=c);var l=yield r.crypto.downloadKeys(a,!1);if(!0===(null===i||void 0===i?void 0:i()))return null;var d=new v["b"](()=>new Map);for(var[u,f]of l)for(var[p,m]of f){if(void 0!==i&&(yield Object(v["o"])()),!0===(null===i||void 0===i?void 0:i()))return null;var g=r.crypto.checkDeviceTrust(u,p);if(m.isBlocked()||!g.isVerified()&&s&&!n){var y=d.getOrCreate(u),b=m.isBlocked();y.set(p,{code:b?"m.blacklisted":"m.unverified",reason:h["b"][b?"m.blacklisted":"m.unverified"],deviceInfo:m}),f.delete(p)}}return[l,d]}))()}}class I extends u["b"]{constructor(e){super(e),s()(this,"pendingEvents",new Map),s()(this,"olmlib",d),s()(this,"roomId",void 0),s()(this,"prefixedLogger",void 0),this.roomId=e.roomId,this.prefixedLogger=l["b"].getChild("[".concat(this.roomId," decryption]"))}decryptEvent(t){var r=this;return o()((function*(){var n,i=t.getWireContent();if(!i.sender_key||!i.session_id||!i.ciphertext)throw new y["a"](g["DecryptionFailureCode"].MEGOLM_MISSING_FIELDS,"Missing fields in input");r.addEventToPendingList(t);try{n=yield r.olmDevice.decryptGroupMessage(t.getRoomId(),i.sender_key,i.session_id,i.ciphertext,t.getId(),t.getTs())}catch(e){if("DecryptionError"===e.name)throw e;var o=g["DecryptionFailureCode"].OLM_DECRYPT_GROUP_MESSAGE_ERROR;throw"OLM.UNKNOWN_MESSAGE_INDEX"===(null===e||void 0===e?void 0:e.message)&&(r.requestKeysForEvent(t),o=g["DecryptionFailureCode"].OLM_UNKNOWN_MESSAGE_INDEX),new y["a"](o,e instanceof Error?e.message:"Unknown Error: Error is undefined",{session:i.sender_key+"|"+i.session_id})}if(null===n){r.crypto.backupManager.queryKeyBackupRateLimited(t.getRoomId(),i.session_id).catch(()=>{}),r.requestKeysForEvent(t);var a=yield r.olmDevice.sessionMayHaveProblems(i.sender_key,t.getTs()-12e4);if(a){r.prefixedLogger.info("When handling UISI from ".concat(t.getSender()," (sender key ").concat(i.sender_key,"): ")+"recent session problem with that sender:",a);var s=C[a.type]||C.unknown;throw a.fixed&&(s+=" Trying to create a new secure channel and re-requesting the keys."),new y["a"](g["DecryptionFailureCode"].MEGOLM_UNKNOWN_INBOUND_SESSION_ID,s,{session:i.sender_key+"|"+i.session_id})}throw new y["a"](g["DecryptionFailureCode"].MEGOLM_UNKNOWN_INBOUND_SESSION_ID,"The sender's device has not sent us the keys for this message.",{session:i.sender_key+"|"+i.session_id})}n.untrusted||r.removeEventFromPendingList(t);var c=JSON.parse(n.result);if(c.room_id!==t.getRoomId())throw new y["a"](g["DecryptionFailureCode"].MEGOLM_BAD_ROOM,"Message intended for room "+c.room_id);return{clearEvent:c,senderCurve25519Key:n.senderKey,claimedEd25519Key:n.keysClaimed.ed25519,forwardingCurve25519KeyChain:n.forwardingCurve25519KeyChain,untrusted:n.untrusted}}))()}requestKeysForEvent(e){var t=e.getWireContent(),r=e.getKeyRequestRecipients(this.userId);this.crypto.requestRoomKey({room_id:e.getRoomId(),algorithm:t.algorithm,sender_key:t.sender_key,session_id:t.session_id},r)}addEventToPendingList(e){var t,r=e.getWireContent(),n=r.sender_key,i=r.session_id;this.pendingEvents.has(n)||this.pendingEvents.set(n,new Map);var o=this.pendingEvents.get(n);o.has(i)||o.set(i,new Set),null===(t=o.get(i))||void 0===t||t.add(e)}removeEventFromPendingList(e){var t=e.getWireContent(),r=t.sender_key,n=t.session_id,i=this.pendingEvents.get(r),o=null===i||void 0===i?void 0:i.get(n);o&&(o.delete(e),0===o.size&&i.delete(n),0===i.size&&this.pendingEvents.delete(r))}roomKeyFromEvent(e){var t=e.getSenderKey(),r=e.getContent(),n={};if(r.room_id&&r.session_key&&r.session_id&&r.algorithm){if(d["isOlmEncrypted"](e)){r["org.matrix.msc3061.shared_history"]&&(n.sharedHistory=!0);var i={senderKey:t,sessionId:r.session_id,sessionKey:r.session_key,extraSessionData:n,exportFormat:!1,roomId:r.room_id,algorithm:r.algorithm,forwardingKeyChain:[],keysClaimed:e.getKeysClaimed()};return i}this.prefixedLogger.error("key event not properly encrypted")}else this.prefixedLogger.error("key event is missing fields")}forwardedRoomKeyFromEvent(e){var t=this.roomKeyFromEvent(e);if(t){var r=e.getSenderKey(),n=e.getContent(),i=this.baseApis.crypto.deviceList.getUserByIdentityKey(d["OLM_ALGORITHM"],r),o=n.sender_key,a=n.sender_claimed_ed25519_key,s=Array.isArray(n.forwarding_curve25519_key_chain)?n.forwarding_curve25519_key_chain:[];if(s=s.slice(),s.push(r),i===e.getSender())if(o){if(a){var c={ed25519:a};return t.senderKey=o,t.keysClaimed=c,t.exportFormat=!0,t.forwardingKeyChain=s,t.extraSessionData.untrusted=!0,t}this.prefixedLogger.error("forwarded_room_key_event is missing sender_claimed_ed25519_key field")}else this.prefixedLogger.error("forwarded_room_key event is missing sender_key field");else this.prefixedLogger.error("sending device does not belong to the user it claims to be from")}}shouldAcceptForwardedKey(e,t){var r=this;return o()((function*(){var n,i=e.getSenderKey(),o=null!==(n=r.crypto.deviceList.getDeviceByIdentityKey(d["OLM_ALGORITHM"],i))&&void 0!==n?n:void 0,a=r.crypto.checkDeviceInfoTrust(e.getSender(),o),s=e.getSender()===r.baseApis.getUserId(),c=a.isVerified()&&s,l=yield r.wasRoomKeyRequested(e,t),u=r.wasRoomKeyForwardedByInviter(e,t),h=r.wasRoomKeyForwardedAsHistory(t);return l&&c||u&&h}))()}wasRoomKeyRequested(e,t){var r=this;return o()((function*(){var n=yield r.crypto.cryptoStore.getOutgoingRoomKeyRequestsByTarget(e.getSender(),"*",[p["b"].Sent]);return n.some(e=>e.requestBody.room_id===t.roomId&&e.requestBody.session_id===t.sessionId)}))()}wasRoomKeyForwardedByInviter(e,t){var r,n,i,o=this.baseApis.getRoom(t.roomId),a=e.getSenderKey();if(!a)return!1;var s=this.crypto.deviceList.getUserByIdentityKey(d["OLM_ALGORITHM"],a);if(!s)return!1;var c=null===o||void 0===o||null===(r=o.getMember(this.userId))||void 0===r?void 0:r.events.member,l=(null===c||void 0===c?void 0:c.getSender())===s||(null===c||void 0===c||null===(n=c.getUnsigned())||void 0===n?void 0:n.prev_sender)===s&&(null===c||void 0===c||null===(i=c.getPrevContent())||void 0===i?void 0:i.membership)===m["a"].Invite;return!(!o||!l)}wasRoomKeyForwardedAsHistory(e){var t=this.baseApis.getRoom(e.roomId);return!(!t||!e.extraSessionData.sharedHistory)}shouldParkForwardedKey(e){var t=this.baseApis.getRoom(e.roomId);return!(t||!e.extraSessionData.sharedHistory)}parkForwardedKey(e,t){var r=this;return o()((function*(){var n={senderId:e.getSender(),senderKey:t.senderKey,sessionId:t.sessionId,sessionKey:t.sessionKey,keysClaimed:t.keysClaimed,forwardingCurve25519KeyChain:t.forwardingKeyChain};yield r.crypto.cryptoStore.doTxn("readwrite",["parked_shared_history"],e=>r.crypto.cryptoStore.addParkedSharedHistory(t.roomId,n,e),l["b"].getChild("[addParkedSharedHistory]"))}))()}addRoomKey(t){var r=this;return o()((function*(){try{yield r.olmDevice.addInboundGroupSession(t.roomId,t.senderKey,t.forwardingKeyChain,t.sessionId,t.sessionKey,t.keysClaimed,t.exportFormat,t.extraSessionData),(yield r.retryDecryption(t.senderKey,t.sessionId,!t.extraSessionData.untrusted))&&r.crypto.cancelRoomKeyRequest({algorithm:t.algorithm,room_id:t.roomId,session_id:t.sessionId,sender_key:t.senderKey}),yield r.crypto.backupManager.backupGroupSession(t.senderKey,t.sessionId)}catch(e){r.prefixedLogger.error("Error handling m.room_key_event: ".concat(e))}}))()}onForwardedRoomKey(e){var t=this;return o()((function*(){var r=t.forwardedRoomKeyFromEvent(e);r&&((yield t.shouldAcceptForwardedKey(e,r))?yield t.addRoomKey(r):t.shouldParkForwardedKey(r)&&(yield t.parkForwardedKey(e,r)))}))()}onRoomKeyEvent(e){var t=this;return o()((function*(){if("m.forwarded_room_key"==e.getType())yield t.onForwardedRoomKey(e);else{var r=t.roomKeyFromEvent(e);if(!r)return;yield t.addRoomKey(r)}}))()}onRoomKeyWithheldEvent(e){var t=this;return o()((function*(){var r=e.getContent(),n=r.sender_key;"m.no_olm"===r.code?yield t.onNoOlmWithheldEvent(e):"m.unavailable"===r.code||(yield t.olmDevice.addInboundGroupSessionWithheld(r.room_id,n,r.session_id,r.code,r.reason)),r.session_id?yield t.retryDecryption(n,r.session_id):yield t.retryDecryptionFromSender(n)}))()}onNoOlmWithheldEvent(e){var t=this;return o()((function*(){var r=e.getContent(),n=r.sender_key,i=e.getSender();if(t.prefixedLogger.warn("".concat(i,":").concat(n," was unable to establish an olm session with us")),yield t.olmDevice.getSessionIdForDevice(n))return t.prefixedLogger.debug("New session already created.  Not creating a new one."),void(yield t.olmDevice.recordSessionProblem(n,"no_olm",!0));var o=t.crypto.deviceList.getDeviceByIdentityKey(r.algorithm,n);if(!o&&(yield t.crypto.downloadKeys([i],!1),o=t.crypto.deviceList.getDeviceByIdentityKey(r.algorithm,n),!o))return t.prefixedLogger.info("Couldn't find device for identity key "+n+": not establishing session"),void(yield t.olmDevice.recordSessionProblem(n,"no_olm",!1));yield d["ensureOlmSessionsForDevices"](t.olmDevice,t.baseApis,new Map([[i,[o]]]),!1);var a={algorithm:d["OLM_ALGORITHM"],sender_key:t.olmDevice.deviceCurve25519Key,ciphertext:{},[f["k"]]:Object(c["a"])()};yield d["encryptMessageForDevice"](a.ciphertext,t.userId,void 0,t.olmDevice,i,o,{type:"m.dummy"}),yield t.olmDevice.recordSessionProblem(n,"no_olm",!0),yield t.baseApis.sendToDevice("m.room.encrypted",new Map([[i,new Map([[o.deviceId,a]])]]))}))()}hasKeysForKeyRequest(e){var t=e.requestBody;return this.olmDevice.hasInboundSessionKeys(t.room_id,t.sender_key,t.session_id)}shareKeysWithDevice(e){var t=e.userId,r=e.deviceId,n=this.crypto.getStoredDevice(t,r),i=e.requestBody;this.olmlib.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,new Map([[t,[n]]])).then(e=>{var n,o=null===(n=e.get(t))||void 0===n?void 0:n.get(r);return null!==o&&void 0!==o&&o.sessionId?(this.prefixedLogger.debug("sharing keys for session "+i.sender_key+"|"+i.session_id+" with device "+t+":"+r),this.buildKeyForwardingMessage(i.room_id,i.sender_key,i.session_id)):null}).then(e=>{var i={algorithm:d["OLM_ALGORITHM"],sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{},[f["k"]]:Object(c["a"])()};return this.olmlib.encryptMessageForDevice(i.ciphertext,this.userId,void 0,this.olmDevice,t,n,e).then(()=>this.baseApis.sendToDevice("m.room.encrypted",new Map([[t,new Map([[r,i]])]])))})}buildKeyForwardingMessage(e,t,r){var n=this;return o()((function*(){var i=yield n.olmDevice.getInboundGroupSessionKey(e,t,r);return{type:"m.forwarded_room_key",content:{algorithm:d["MEGOLM_ALGORITHM"],room_id:e,sender_key:t,sender_claimed_ed25519_key:i.sender_claimed_ed25519_key,session_id:r,session_key:i.key,chain_index:i.chain_index,forwarding_curve25519_key_chain:i.forwarding_curve25519_key_chain,"org.matrix.msc3061.shared_history":i.shared_history||!1}}}))()}importRoomKey(e){var{untrusted:t,source:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return(t||e.untrusted)&&(n.untrusted=!0),e["org.matrix.msc3061.shared_history"]&&(n.sharedHistory=!0),this.olmDevice.addInboundGroupSession(e.room_id,e.sender_key,e.forwarding_curve25519_key_chain,e.session_id,e.session_key,e.sender_claimed_keys,!0,n).then(()=>{"backup"!==r&&this.crypto.backupManager.backupGroupSession(e.sender_key,e.session_id).catch(e=>{this.prefixedLogger.debug("Failed to back up megolm session",e)}),this.retryDecryption(e.sender_key,e.session_id,!n.untrusted)})}retryDecryption(t,r,n){var i=this;return o()((function*(){var a,s=i.pendingEvents.get(t);if(!s)return!0;var c=s.get(r);if(!c)return!0;var l=[...c];return i.prefixedLogger.debug("Retrying decryption on events:",l.map(e=>"".concat(e.getId()))),yield Promise.all(l.map(function(){var t=o()((function*(t){try{yield t.attemptDecryption(i.crypto,{isRetry:!0,forceRedecryptIfUntrusted:n})}catch(e){}}));return function(e){return t.apply(this,arguments)}}())),!(null!==(a=i.pendingEvents.get(t))&&void 0!==a&&a.has(r))}))()}retryDecryptionFromSender(t){var r=this;return o()((function*(){var n=r.pendingEvents.get(t);return!n||(r.pendingEvents.delete(t),yield Promise.all([...n].map(function(){var t=o()((function*(t){var[n,i]=t;yield Promise.all([...i].map(function(){var t=o()((function*(t){try{yield t.attemptDecryption(r.crypto)}catch(e){}}));return function(e){return t.apply(this,arguments)}}()))}));return function(e){return t.apply(this,arguments)}}())),!r.pendingEvents.has(t))}))()}sendSharedHistoryInboundSessions(e){var t=this;return o()((function*(){yield d["ensureOlmSessionsForDevices"](t.olmDevice,t.baseApis,e);var r=yield t.olmDevice.getSharedHistoryInboundGroupSessions(t.roomId);for(var[n,i]of(t.prefixedLogger.debug("Sharing history in with users ".concat(Array.from(e.keys())),r.map(e=>{var[t,r]=e;return"".concat(t,"|").concat(r)})),r)){var o=yield t.buildKeyForwardingMessage(t.roomId,n,i),a=[],s=new Map;for(var[l,u]of e){var h=new Map;for(var p of(s.set(l,h),u)){var v={algorithm:d["OLM_ALGORITHM"],sender_key:t.olmDevice.deviceCurve25519Key,ciphertext:{},[f["k"]]:Object(c["a"])()};h.set(p.deviceId,v),a.push(d["encryptMessageForDevice"](v.ciphertext,t.userId,void 0,t.olmDevice,l,p,o))}}for(var[m,g]of(yield Promise.all(a),s)){for(var[y,b]of g)S(b)||(t.prefixedLogger.debug("No ciphertext for device "+m+":"+y+": pruning"),g.delete(y));0===g.size&&(t.prefixedLogger.debug("Pruned all devices for user "+m),s.delete(m))}if(0===s.size)return void t.prefixedLogger.debug("No users left to send to: aborting");yield t.baseApis.sendToDevice("m.room.encrypted",s)}}))()}}var C={no_olm:"The sender was unable to establish a secure channel.",unknown:"The secure channel with the sender was corrupted."};Object(u["f"])(d["MEGOLM_ALGORITHM"],k,I)},"4ea1":function(e,t,r){"use strict";var n=r("d429"),i=r("ebb5"),o=r("bcbf"),a=r("5926"),s=r("f495"),c=i.aTypedArray,l=i.getTypedArrayConstructor,d=i.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(error){return 8===error}}();d("with",{with:function(e,t){var r=c(this),i=a(e),d=o(r)?s(t):+t;return n(r,l(r),i,d)}}["with"],!u)},"4f52":function(e,t,r){"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},c=(e,t,r,s)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let c of o(t))a.call(e,c)||c===r||n(e,c,{get:()=>t[c],enumerable:!(s=i(t,c))||s.enumerable});return e},l=e=>c(n({},"__esModule",{value:!0}),e),d={};s(d,{AccessTokenEvents:()=>R,CheckSessionIFrame:()=>x,ErrorResponse:()=>C,ErrorTimeout:()=>T,InMemoryWebStorage:()=>O,Log:()=>p,Logger:()=>v,MetadataService:()=>A,OidcClient:()=>Q,OidcClientSettingsStore:()=>U,SessionMonitor:()=>ee,SigninResponse:()=>G,SigninState:()=>V,SignoutResponse:()=>Y,State:()=>q,User:()=>te,UserManager:()=>_e,UserManagerSettingsStore:()=>le,Version:()=>Se,WebStorageStateStore:()=>P}),e.exports=l(d);var u,h,f={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},p=(e=>(e[e["NONE"]=0]="NONE",e[e["ERROR"]=1]="ERROR",e[e["WARN"]=2]="WARN",e[e["INFO"]=3]="INFO",e[e["DEBUG"]=4]="DEBUG",e))(p||{});(e=>{function t(){u=3,h=f}function r(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");u=e}function n(e){h=e}e.reset=t,e.setLevel=r,e.setLogger=n})(p||(p={}));var v=class e{constructor(e){this._name=e}debug(...t){u>=4&&h.debug(e._format(this._name,this._method),...t)}info(...t){u>=3&&h.info(e._format(this._name,this._method),...t)}warn(...t){u>=2&&h.warn(e._format(this._name,this._method),...t)}error(...t){u>=1&&h.error(e._format(this._name,this._method),...t)}throw(e){throw this.error(e),e}create(e){const t=Object.create(this);return t._method=e,t.debug("begin"),t}static createStatic(t,r){const n=new e(`${t}.${r}`);return n.debug("begin"),n}static _format(e,t){const r=`[${e}]`;return t?`${r} ${t}:`:r}static debug(t,...r){u>=4&&h.debug(e._format(t),...r)}static info(t,...r){u>=3&&h.info(e._format(t),...r)}static warn(t,...r){u>=2&&h.warn(e._format(t),...r)}static error(t,...r){u>=1&&h.error(e._format(t),...r)}};p.reset();var m="10000000-1000-4000-8000-100000000000",g=e=>btoa([...new Uint8Array(e)].map(e=>String.fromCharCode(e)).join("")),y=class e{static _randomWord(){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}static generateUUIDv4(){const t=m.replace(/[018]/g,t=>(+t^e._randomWord()&15>>+t/4).toString(16));return t.replace(/-/g,"")}static generateCodeVerifier(){return e.generateUUIDv4()+e.generateUUIDv4()+e.generateUUIDv4()}static async generateCodeChallenge(e){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{const t=new TextEncoder,r=t.encode(e),n=await crypto.subtle.digest("SHA-256",r);return g(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(t){throw v.error("CryptoUtils.generateCodeChallenge",t),t}}static generateBasicAuth(e,t){const r=new TextEncoder,n=r.encode([e,t].join(":"));return g(n)}},b=class{constructor(e){this._name=e,this._logger=new v(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){const t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}async raise(...e){this._logger.debug("raise:",...e);for(const t of this._callbacks)await t(...e)}},_=r("f761"),w=class{static decode(e){try{return(0,_.jwtDecode)(e)}catch(t){throw v.error("JwtUtils.decode",t),t}}},S=class{static center({...e}){var t;return null==e.width&&(e.width=null!=(t=[800,720,600,480].find(e=>e<=window.outerWidth/1.618))?t:360),null!=e.left||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),null!=e.height&&(null!=e.top||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,e])=>null!=e).map(([e,t])=>`${e}=${"boolean"!==typeof t?t:t?"yes":"no"}`).join(",")}},E=class e extends b{constructor(){super(...arguments),this._logger=new v(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const t=this._expiration-e.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=e.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){const r=this._logger.create("init");t=Math.max(Math.floor(t),1);const n=e.getEpochTime()+t;if(this.expiration===n&&this._timerHandle)return void r.debug("skipping since already initialized for expiration at",this.expiration);this.cancel(),r.debug("using duration",t),this._expiration=n;const i=Math.min(t,5);this._timerHandle=setInterval(this._callback,1e3*i)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},k=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");const r=new URL(e,"http://127.0.0.1"),n=r["fragment"===t?"hash":"search"];return new URLSearchParams(n.slice(1))}},I=";",C=class extends Error{constructor(e,t){var r,n,i;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw v.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=null!=(r=e.error_description)?r:null,this.error_uri=null!=(n=e.error_uri)?n:null,this.state=e.userState,this.session_state=null!=(i=e.session_state)?i:null,this.url_state=e.url_state}},T=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},R=class{constructor(e){this._logger=new v("AccessTokenEvents"),this._expiringTimer=new E("Access token expiring"),this._expiredTimer=new E("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){const t=this._logger.create("load");if(e.access_token&&void 0!==e.expires_in){const r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){let e=r-this._expiringNotificationTimeInSeconds;e<=0&&(e=1),t.debug("registering expiring timer, raising in",e,"seconds"),this._expiringTimer.init(e)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const n=r+1;t.debug("registering expired timer, raising in",n,"seconds"),this._expiredTimer.init(n)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},x=class{constructor(e,t,r,n,i){this._callback=e,this._client_id=t,this._intervalInSeconds=n,this._stopOnError=i,this._logger=new v("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=e=>{e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(e.data+" message from check session op iframe"))};const o=new URL(r);this._frame_origin=o.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=o.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;const t=()=>{this._frame.contentWindow&&this._session_state&&this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,1e3*this._intervalInSeconds)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},O=class{constructor(){this._logger=new v("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},M=class{constructor(e=[],t=null,r={}){this._jwtHandler=t,this._extraHeaders=r,this._logger=new v("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){const{timeoutInSeconds:r,...n}=t;if(!r)return await fetch(e,n);const i=new AbortController,o=setTimeout(()=>i.abort(),1e3*r);try{const r=await fetch(e,{...t,signal:i.signal});return r}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new T("Network timed out");throw a}finally{clearTimeout(o)}}async getJson(e,{token:t,credentials:r}={}){const n=this._logger.create("getJson"),i={Accept:this._contentTypes.join(", ")};let o;t&&(n.debug("token passed, setting Authorization header"),i["Authorization"]="Bearer "+t),this.appendExtraHeaders(i);try{n.debug("url:",e),o=await this.fetchWithTimeout(e,{method:"GET",headers:i,credentials:r})}catch(c){throw n.error("Network Error"),c}n.debug("HTTP response received, status",o.status);const a=o.headers.get("Content-Type");if(a&&!this._contentTypes.find(e=>a.startsWith(e))&&n.throw(new Error(`Invalid response Content-Type: ${null!=a?a:"undefined"}, from URL: ${e}`)),o.ok&&this._jwtHandler&&(null==a?void 0:a.startsWith("application/jwt")))return await this._jwtHandler(await o.text());let s;try{s=await o.json()}catch(c){if(n.error("Error parsing JSON response",c),o.ok)throw c;throw new Error(`${o.statusText} (${o.status})`)}if(!o.ok){if(n.error("Error from server:",s),s.error)throw new C(s);throw new Error(`${o.statusText} (${o.status}): ${JSON.stringify(s)}`)}return s}async postForm(e,{body:t,basicAuth:r,timeoutInSeconds:n,initCredentials:i}){const o=this._logger.create("postForm"),a={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};let s;void 0!==r&&(a["Authorization"]="Basic "+r),this.appendExtraHeaders(a);try{o.debug("url:",e),s=await this.fetchWithTimeout(e,{method:"POST",headers:a,body:t,timeoutInSeconds:n,credentials:i})}catch(u){throw o.error("Network error"),u}o.debug("HTTP response received, status",s.status);const c=s.headers.get("Content-Type");if(c&&!this._contentTypes.find(e=>c.startsWith(e)))throw new Error(`Invalid response Content-Type: ${null!=c?c:"undefined"}, from URL: ${e}`);const l=await s.text();let d={};if(l)try{d=JSON.parse(l)}catch(u){if(o.error("Error parsing JSON response",u),s.ok)throw u;throw new Error(`${s.statusText} (${s.status})`)}if(!s.ok){if(o.error("Error from server:",d),d.error)throw new C(d,t);throw new Error(`${s.statusText} (${s.status}): ${JSON.stringify(d)}`)}return d}appendExtraHeaders(e){const t=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),n=["authorization","accept","content-type"];0!==r.length&&r.forEach(r=>{if(n.includes(r.toLocaleLowerCase()))return void t.warn("Protected header could not be overridden",r,n);const i="function"===typeof this._extraHeaders[r]?this._extraHeaders[r]():this._extraHeaders[r];i&&""!==i&&(e[r]=i)})}},A=class{constructor(e){this._settings=e,this._logger=new v("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new M(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);const t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){const r=this._logger.create(`_getMetadataProperty('${e}')`),n=await this.getMetadata();if(r.debug("resolved"),void 0===n[e]){if(!0===t)return void r.warn("Metadata does not contain optional property");r.throw(new Error("Metadata does not contain property "+e))}return n[e]}async getSigningKeys(){const e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;const t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);const r=await this._jsonService.getJson(t);if(e.debug("got key set",r),!Array.isArray(r.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},P=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new v("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){this._logger.create(`get('${e}')`),e=this._prefix+e;const t=await this._store.getItem(e);return t}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;const t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");const e=await this._store.length,t=[];for(let r=0;r<e;r++){const e=await this._store.key(r);e&&0===e.indexOf(this._prefix)&&t.push(e.substr(this._prefix.length))}return t}},D="code",j="openid",L="client_secret_post",N=900,U=class{constructor({authority:e,metadataUrl:t,metadata:r,signingKeys:n,metadataSeed:i,client_id:o,client_secret:a,response_type:s=D,scope:c=j,redirect_uri:l,post_logout_redirect_uri:d,client_authentication:u=L,prompt:h,display:f,max_age:p,ui_locales:v,acr_values:m,resource:g,response_mode:y,filterProtocolClaims:b=!0,loadUserInfo:_=!1,staleStateAgeInSeconds:w=N,mergeClaimsStrategy:S={array:"replace"},disablePKCE:E=!1,stateStore:k,revokeTokenAdditionalContentTypes:I,fetchRequestCredentials:C,refreshTokenAllowedScope:T,extraQueryParams:R={},extraTokenParams:x={},extraHeaders:M={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=i,this.signingKeys=n,this.client_id=o,this.client_secret=a,this.response_type=s,this.scope=c,this.redirect_uri=l,this.post_logout_redirect_uri=d,this.client_authentication=u,this.prompt=h,this.display=f,this.max_age=p,this.ui_locales=v,this.acr_values=m,this.resource=g,this.response_mode=y,this.filterProtocolClaims=null==b||b,this.loadUserInfo=!!_,this.staleStateAgeInSeconds=w,this.mergeClaimsStrategy=S,this.disablePKCE=!!E,this.revokeTokenAdditionalContentTypes=I,this.fetchRequestCredentials=C||"same-origin",k)this.stateStore=k;else{const e="undefined"!==typeof window?window.localStorage:new O;this.stateStore=new P({store:e})}this.refreshTokenAllowedScope=T,this.extraQueryParams=R,this.extraTokenParams=x,this.extraHeaders=M}},F=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new v("UserInfoService"),this._getClaimsFromJwt=async e=>{const t=this._logger.create("_getClaimsFromJwt");try{const r=w.decode(e);return t.debug("JWT decoding successful"),r}catch(r){throw t.error("Error parsing JWT response"),r}},this._jsonService=new M(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){const t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));const r=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",r);const n=await this._jsonService.getJson(r,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",n),n}},B=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new v("TokenClient"),this._jsonService=new M(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:n=this._settings.client_secret,...i}){const o=this._logger.create("exchangeCode");r||o.throw(new Error("A client_id is required")),t||o.throw(new Error("A redirect_uri is required")),i.code||o.throw(new Error("A code is required"));const a=new URLSearchParams({grant_type:e,redirect_uri:t});for(const[d,u]of Object.entries(i))null!=u&&a.set(d,u);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw o.throw(new Error("A client_secret is required")),null;s=y.generateBasicAuth(r,n);break;case"client_secret_post":a.append("client_id",r),n&&a.append("client_secret",n);break}const c=await this._metadataService.getTokenEndpoint(!1);o.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:a,basicAuth:s,initCredentials:this._settings.fetchRequestCredentials});return o.debug("got response"),l}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:n=this._settings.scope,...i}){const o=this._logger.create("exchangeCredentials");t||o.throw(new Error("A client_id is required"));const a=new URLSearchParams({grant_type:e,scope:n});for(const[d,u]of Object.entries(i))null!=u&&a.set(d,u);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw o.throw(new Error("A client_secret is required")),null;s=y.generateBasicAuth(t,r);break;case"client_secret_post":a.append("client_id",t),r&&a.append("client_secret",r);break}const c=await this._metadataService.getTokenEndpoint(!1);o.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:a,basicAuth:s,initCredentials:this._settings.fetchRequestCredentials});return o.debug("got response"),l}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:n,...i}){const o=this._logger.create("exchangeRefreshToken");t||o.throw(new Error("A client_id is required")),i.refresh_token||o.throw(new Error("A refresh_token is required"));const a=new URLSearchParams({grant_type:e});for(const[d,u]of Object.entries(i))Array.isArray(u)?u.forEach(e=>a.append(d,e)):null!=u&&a.set(d,u);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw o.throw(new Error("A client_secret is required")),null;s=y.generateBasicAuth(t,r);break;case"client_secret_post":a.append("client_id",t),r&&a.append("client_secret",r);break}const c=await this._metadataService.getTokenEndpoint(!1);o.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:a,basicAuth:s,timeoutInSeconds:n,initCredentials:this._settings.fetchRequestCredentials});return o.debug("got response"),l}async revoke(e){var t;const r=this._logger.create("revoke");e.token||r.throw(new Error("A token is required"));const n=await this._metadataService.getRevocationEndpoint(!1);r.debug("got revocation endpoint, revoking "+(null!=(t=e.token_type_hint)?t:"default token type"));const i=new URLSearchParams;for(const[o,a]of Object.entries(e))null!=a&&i.set(o,a);i.set("client_id",this._settings.client_id),this._settings.client_secret&&i.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(n,{body:i}),r.debug("got response")}},K=class{constructor(e,t,r){this._settings=e,this._metadataService=t,this._claimsService=r,this._logger=new v("ResponseValidator"),this._userInfoService=new F(this._settings,this._metadataService),this._tokenClient=new B(this._settings,this._metadataService)}async validateSigninResponse(e,t){const r=this._logger.create("validateSigninResponse");this._processSigninState(e,t),r.debug("state processed"),await this._processCode(e,t),r.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,null==t?void 0:t.skipUserInfo,e.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(e,t){const r=this._logger.create("validateCredentialsResponse");e.isOpenId&&e.id_token&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),r.debug("claims processed")}async validateRefreshResponse(e,t){const r=this._logger.create("validateRefreshResponse");e.userState=t.data,null!=e.session_state||(e.session_state=t.session_state),null!=e.scope||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),r.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);const n=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,n),r.debug("claims processed")}validateSignoutResponse(e,t){const r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new C(e)}_processSigninState(e,t){const r=this._logger.create("_processSigninState");if(t.id!==e.state&&r.throw(new Error("State does not match")),t.client_id||r.throw(new Error("No client_id on state")),t.authority||r.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&r.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&r.throw(new Error("client_id mismatch on settings vs. signin state")),r.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,null!=e.scope||(e.scope=t.scope),e.error)throw r.warn("Response was error",e.error),new C(e);t.code_verifier&&!e.code&&r.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,r=!0){const n=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token)return void n.debug("not loading user info");n.debug("loading user info");const i=await this._userInfoService.getClaims(e.access_token);n.debug("user info claims received from user info endpoint"),r&&i.sub!==e.profile.sub&&n.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(i)),n.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){const r=this._logger.create("_processCode");if(e.code){r.debug("Validating code");const n=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,n)}else r.debug("No code to process")}_validateIdTokenAttributes(e,t){var r;const n=this._logger.create("_validateIdTokenAttributes");n.debug("decoding ID Token JWT");const i=w.decode(null!=(r=e.id_token)?r:"");if(i.sub||n.throw(new Error("ID Token is missing a subject claim")),t){const e=w.decode(t);i.sub!==e.sub&&n.throw(new Error("sub in id_token does not match current sub")),i.auth_time&&i.auth_time!==e.auth_time&&n.throw(new Error("auth_time in id_token does not match original auth_time")),i.azp&&i.azp!==e.azp&&n.throw(new Error("azp in id_token does not match original azp")),!i.azp&&e.azp&&n.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=i}},q=class e{constructor(e){this.id=e.id||y.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=E.getEpochTime(),this.request_type=e.request_type,this.url_state=e.url_state}toStorageString(){return new v("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return v.createStatic("State","fromStorageString"),Promise.resolve(new e(JSON.parse(t)))}static async clearStaleState(t,r){const n=v.createStatic("State","clearStaleState"),i=E.getEpochTime()-r,o=await t.getAllKeys();n.debug("got keys",o);for(let s=0;s<o.length;s++){const r=o[s],c=await t.get(r);let l=!1;if(c)try{const t=await e.fromStorageString(c);n.debug("got item from key:",r,t.created),t.created<=i&&(l=!0)}catch(a){n.error("Error parsing state for key:",r,a),l=!0}else n.debug("no item in storage for key:",r),l=!0;l&&(n.debug("removed item for key:",r),t.remove(r))}}},V=class e extends q{constructor(e){super(e),this.code_verifier=e.code_verifier,this.code_challenge=e.code_challenge,this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}static async create(t){const r=!0===t.code_verifier?y.generateCodeVerifier():t.code_verifier||void 0,n=r?await y.generateCodeChallenge(r):void 0;return new e({...t,code_verifier:r,code_challenge:n})}toStorageString(){return new v("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){v.createStatic("SigninState","fromStorageString");const r=JSON.parse(t);return e.create(r)}},W=class e{constructor(e){this.url=e.url,this.state=e.state}static async create({url:t,authority:r,client_id:n,redirect_uri:i,response_type:o,scope:a,state_data:s,response_mode:c,request_type:l,client_secret:d,nonce:u,url_state:h,resource:f,skipUserInfo:p,extraQueryParams:v,extraTokenParams:m,disablePKCE:g,...y}){if(!t)throw this._logger.error("create: No url passed"),new Error("url");if(!n)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!i)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!o)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!a)throw this._logger.error("create: No scope passed"),new Error("scope");if(!r)throw this._logger.error("create: No authority passed"),new Error("authority");const b=await V.create({data:s,request_type:l,url_state:h,code_verifier:!g,client_id:n,authority:r,redirect_uri:i,response_mode:c,client_secret:d,scope:a,extraTokenParams:m,skipUserInfo:p}),_=new URL(t);_.searchParams.append("client_id",n),_.searchParams.append("redirect_uri",i),_.searchParams.append("response_type",o),_.searchParams.append("scope",a),u&&_.searchParams.append("nonce",u);let w=b.id;if(h&&(w=`${w}${I}${h}`),_.searchParams.append("state",w),b.code_challenge&&(_.searchParams.append("code_challenge",b.code_challenge),_.searchParams.append("code_challenge_method","S256")),f){const e=Array.isArray(f)?f:[f];e.forEach(e=>_.searchParams.append("resource",e))}for(const[e,S]of Object.entries({response_mode:c,...y,...v}))null!=S&&_.searchParams.append(e,S.toString());return new e({url:_.href,state:b})}};W._logger=new v("SigninRequest");var $=W,z="openid",G=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){const e=decodeURIComponent(this.state).split(I);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(I))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-E.getEpochTime()}set expires_in(e){"string"===typeof e&&(e=Number(e)),void 0!==e&&e>=0&&(this.expires_at=Math.floor(e)+E.getEpochTime())}get isOpenId(){var e;return(null==(e=this.scope)?void 0:e.split(" ").includes(z))||!!this.id_token}},H=class{constructor({url:e,state_data:t,id_token_hint:r,post_logout_redirect_uri:n,extraQueryParams:i,request_type:o,client_id:a}){if(this._logger=new v("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");const s=new URL(e);r&&s.searchParams.append("id_token_hint",r),a&&s.searchParams.append("client_id",a),n&&(s.searchParams.append("post_logout_redirect_uri",n),t&&(this.state=new q({data:t,request_type:o}),s.searchParams.append("state",this.state.id)));for(const[c,l]of Object.entries({...i}))null!=l&&s.searchParams.append(c,l.toString());this.url=s.href}},Y=class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},J=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],X=["sub","iss","aud","exp","iat"],Z=class{constructor(e){this._settings=e,this._logger=new v("ClaimsService")}filterProtocolClaims(e){const t={...e};if(this._settings.filterProtocolClaims){let e;e=Array.isArray(this._settings.filterProtocolClaims)?this._settings.filterProtocolClaims:J;for(const r of e)X.includes(r)||delete t[r]}return t}mergeClaims(e,t){const r={...e};for(const[n,i]of Object.entries(t))if(r[n]!==i)if(Array.isArray(r[n])||Array.isArray(i))if("replace"==this._settings.mergeClaimsStrategy.array)r[n]=i;else{const e=Array.isArray(r[n])?r[n]:[r[n]];for(const t of Array.isArray(i)?i:[i])e.includes(t)||e.push(t);r[n]=e}else"object"===typeof r[n]&&"object"===typeof i?r[n]=this.mergeClaims(r[n],i):r[n]=i;return r}},Q=class{constructor(e,t){this._logger=new v("OidcClient"),this.settings=e instanceof U?e:new U(e),this.metadataService=null!=t?t:new A(this.settings),this._claimsService=new Z(this.settings),this._validator=new K(this.settings,this.metadataService,this._claimsService),this._tokenClient=new B(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:r,request_type:n,id_token_hint:i,login_hint:o,skipUserInfo:a,nonce:s,url_state:c,response_type:l=this.settings.response_type,scope:d=this.settings.scope,redirect_uri:u=this.settings.redirect_uri,prompt:h=this.settings.prompt,display:f=this.settings.display,max_age:p=this.settings.max_age,ui_locales:v=this.settings.ui_locales,acr_values:m=this.settings.acr_values,resource:g=this.settings.resource,response_mode:y=this.settings.response_mode,extraQueryParams:b=this.settings.extraQueryParams,extraTokenParams:_=this.settings.extraTokenParams}){const w=this._logger.create("createSigninRequest");if("code"!==l)throw new Error("Only the Authorization Code flow (with PKCE) is supported");const S=await this.metadataService.getAuthorizationEndpoint();w.debug("Received authorization endpoint",S);const E=await $.create({url:S,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:u,response_type:l,scope:d,state_data:e,url_state:c,prompt:h,display:f,max_age:p,ui_locales:v,id_token_hint:i,login_hint:o,acr_values:m,resource:g,request:t,request_uri:r,extraQueryParams:b,extraTokenParams:_,request_type:n,response_mode:y,client_secret:this.settings.client_secret,skipUserInfo:a,nonce:s,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();const k=E.state;return await this.settings.stateStore.set(k.id,k.toStorageString()),E}async readSigninResponseState(e,t=!1){const r=this._logger.create("readSigninResponseState"),n=new G(k.readParams(e,this.settings.response_mode));if(!n.state)throw r.throw(new Error("No state in response")),null;const i=await this.settings.stateStore[t?"remove":"get"](n.state);if(!i)throw r.throw(new Error("No matching state found in storage")),null;const o=await V.fromStorageString(i);return{state:o,response:n}}async processSigninResponse(e){const t=this._logger.create("processSigninResponse"),{state:r,response:n}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(n,r),n}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r=!1,extraTokenParams:n={}}){const i=await this._tokenClient.exchangeCredentials({username:e,password:t,...n}),o=new G(new URLSearchParams);return Object.assign(o,i),await this._validator.validateCredentialsResponse(o,r),o}async useRefreshToken({state:e,redirect_uri:t,resource:r,timeoutInSeconds:n,extraTokenParams:i}){var o;const a=this._logger.create("useRefreshToken");let s;if(void 0===this.settings.refreshTokenAllowedScope)s=e.scope;else{const t=this.settings.refreshTokenAllowedScope.split(" "),r=(null==(o=e.scope)?void 0:o.split(" "))||[];s=r.filter(e=>t.includes(e)).join(" ")}const c=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:s,redirect_uri:t,resource:r,timeoutInSeconds:n,...i}),l=new G(new URLSearchParams);return Object.assign(l,c),a.debug("validating response",l),await this._validator.validateRefreshResponse(l,{...e,scope:s}),l}async createSignoutRequest({state:e,id_token_hint:t,client_id:r,request_type:n,post_logout_redirect_uri:i=this.settings.post_logout_redirect_uri,extraQueryParams:o=this.settings.extraQueryParams}={}){const a=this._logger.create("createSignoutRequest"),s=await this.metadataService.getEndSessionEndpoint();if(!s)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",s),r||!i||t||(r=this.settings.client_id);const c=new H({url:s,id_token_hint:t,client_id:r,post_logout_redirect_uri:i,state_data:e,extraQueryParams:o,request_type:n});await this.clearStaleState();const l=c.state;return l&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(l.id,l.toStorageString())),c}async readSignoutResponseState(e,t=!1){const r=this._logger.create("readSignoutResponseState"),n=new Y(k.readParams(e,this.settings.response_mode));if(!n.state){if(r.debug("No state in response"),n.error)throw r.warn("Response was error:",n.error),new C(n);return{state:void 0,response:n}}const i=await this.settings.stateStore[t?"remove":"get"](n.state);if(!i)throw r.throw(new Error("No matching state found in storage")),null;const o=await q.fromStorageString(i);return{state:o,response:n}}async processSignoutResponse(e){const t=this._logger.create("processSignoutResponse"),{state:r,response:n}=await this.readSignoutResponseState(e,!0);return r?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(n,r)):t.debug("No state from storage; skipping response validation"),n}clearStaleState(){return this._logger.create("clearStaleState"),q.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},ee=class{constructor(e){this._userManager=e,this._logger=new v("SessionMonitor"),this._start=async e=>{const t=e.session_state;if(!t)return;const r=this._logger.create("_start");if(e.profile?(this._sub=e.profile.sub,r.debug("session_state",t,", sub",this._sub)):(this._sub=void 0,r.debug("session_state",t,", anonymous user")),this._checkSessionIFrame)this._checkSessionIFrame.start(t);else try{const e=await this._userManager.metadataService.getCheckSessionIframe();if(e){r.debug("initializing check session iframe");const n=this._userManager.settings.client_id,i=this._userManager.settings.checkSessionIntervalInSeconds,o=this._userManager.settings.stopCheckSessionOnError,a=new x(this._callback,n,e,i,o);await a.load(),this._checkSessionIFrame=a,a.start(t)}else r.warn("no check session iframe found in the metadata")}catch(n){r.error("Error from getCheckSessionIframe:",n instanceof Error?n.message:n)}},this._stop=()=>{const e=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const t=setInterval(async()=>{clearInterval(t);try{const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub?{sub:e.sub}:null};this._start(t)}}catch(r){e.error("error from querySessionStatus",r instanceof Error?r.message:r)}},1e3)}},this._callback=async()=>{const e=this._logger.create("_callback");try{const t=await this._userManager.querySessionStatus();let r=!0;t&&this._checkSessionIFrame?t.sub===this._sub?(r=!1,this._checkSessionIFrame.start(t.session_state),e.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",t.session_state),await this._userManager.events._raiseUserSessionChanged()):e.debug("different subject signed into OP",t.sub):e.debug("subject no longer signed into OP"),r?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():e.debug("no change in session detected, no event to raise")}catch(t){this._sub&&(e.debug("Error calling queryCurrentSigninSession; raising signed out event",t),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(e=>{this._logger.error(e)})}async _init(){this._logger.create("_init");const e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub?{sub:e.sub}:null};this._start(t)}}}},te=class e{constructor(e){var t;this.id_token=e.id_token,this.session_state=null!=(t=e.session_state)?t:null,this.access_token=e.access_token,this.refresh_token=e.refresh_token,this.token_type=e.token_type,this.scope=e.scope,this.profile=e.profile,this.expires_at=e.expires_at,this.state=e.userState,this.url_state=e.url_state}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-E.getEpochTime()}set expires_in(e){void 0!==e&&(this.expires_at=Math.floor(e)+E.getEpochTime())}get expired(){const e=this.expires_in;if(void 0!==e)return e<=0}get scopes(){var e,t;return null!=(t=null==(e=this.scope)?void 0:e.split(" "))?t:[]}toStorageString(){return new v("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return v.createStatic("User","fromStorageString"),new e(JSON.parse(t))}},re="oidc-client",ne=class{constructor(){this._abort=new b("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){const t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);const{url:r,keepOpen:n}=await new Promise((r,n)=>{const i=i=>{var o;const a=i.data,s=null!=(o=e.scriptOrigin)?o:window.location.origin;if(i.origin===s&&(null==a?void 0:a.source)===re){try{const r=k.readParams(a.url,e.response_mode).get("state");if(r||t.warn("no state found in response url"),i.source!==this._window&&r!==e.state)return}catch(c){this._dispose(),n(new Error("Invalid response from window"))}r(a)}};window.addEventListener("message",i,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",i,!1)),this._disposeHandlers.add(this._abort.addHandler(e=>{this._dispose(),n(e)}))});return t.debug("got response from window"),this._dispose(),n||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(const e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,r=!1,n=window.location.origin){e.postMessage({source:re,url:t,keepOpen:r},n)}},ie={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},oe="_blank",ae=60,se=2,ce=10,le=class extends U{constructor(e){const{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:r=e.post_logout_redirect_uri,popupWindowFeatures:n=ie,popupWindowTarget:i=oe,redirectMethod:o="assign",redirectTarget:a="self",iframeNotifyParentOrigin:s=e.iframeNotifyParentOrigin,iframeScriptOrigin:c=e.iframeScriptOrigin,silent_redirect_uri:l=e.redirect_uri,silentRequestTimeoutInSeconds:d=ce,automaticSilentRenew:u=!0,validateSubOnSilentRenew:h=!0,includeIdTokenInSilentRenew:f=!1,monitorSession:p=!1,monitorAnonymousSession:v=!1,checkSessionIntervalInSeconds:m=se,query_status_response_type:g="code",stopCheckSessionOnError:y=!0,revokeTokenTypes:b=["access_token","refresh_token"],revokeTokensOnSignout:_=!1,includeIdTokenInSilentSignout:w=!1,accessTokenExpiringNotificationTimeInSeconds:S=ae,userStore:E}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=n,this.popupWindowTarget=i,this.redirectMethod=o,this.redirectTarget=a,this.iframeNotifyParentOrigin=s,this.iframeScriptOrigin=c,this.silent_redirect_uri=l,this.silentRequestTimeoutInSeconds=d,this.automaticSilentRenew=u,this.validateSubOnSilentRenew=h,this.includeIdTokenInSilentRenew=f,this.monitorSession=p,this.monitorAnonymousSession=v,this.checkSessionIntervalInSeconds=m,this.stopCheckSessionOnError=y,this.query_status_response_type=g,this.revokeTokenTypes=b,this.revokeTokensOnSignout=_,this.includeIdTokenInSilentSignout=w,this.accessTokenExpiringNotificationTimeInSeconds=S,E)this.userStore=E;else{const e="undefined"!==typeof window?window.sessionStorage:new O;this.userStore=new P({store:e})}}},de=class e extends ne{constructor({silentRequestTimeoutInSeconds:t=ce}){super(),this._logger=new v("IFrameWindow"),this._timeoutInSeconds=t,this._frame=e.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",window.document.body.appendChild(e),e}async navigate(e){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const t=setTimeout(()=>{this._abort.raise(new T("IFrame timed out without a response"))},1e3*this._timeoutInSeconds);return this._disposeHandlers.add(()=>clearTimeout(t)),await super.navigate(e)}close(){var e;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",e=>{var t;const r=e.target;null==(t=r.parentNode)||t.removeChild(r),this._abort.raise(new Error("IFrame removed from DOM"))},!0),null==(e=this._frame.contentWindow)||e.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(e,t){return super._notifyParent(window.parent,e,!1,t)}},ue=class{constructor(e){this._settings=e,this._logger=new v("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new de({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),de.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},he=500,fe=1e3,pe=class extends ne{constructor({popupWindowTarget:e=oe,popupWindowFeatures:t={}}){super(),this._logger=new v("PopupWindow");const r=S.center({...ie,...t});this._window=window.open(void 0,e,S.serialize(r)),t.closePopupWindowAfterInSeconds&&t.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{this._window&&"boolean"===typeof this._window.closed&&!this._window.closed?this.close():this._abort.raise(new Error("Popup blocked by user"))},t.closePopupWindowAfterInSeconds*fe)}async navigate(e){var t;null==(t=this._window)||t.focus();const r=setInterval(()=>{this._window&&!this._window.closed||this._abort.raise(new Error("Popup closed by user"))},he);return this._disposeHandlers.add(()=>clearInterval(r)),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},ve=class{constructor(e){this._settings=e,this._logger=new v("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new pe({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,{keepOpen:t=!1}){this._logger.create("callback"),pe.notifyOpener(e,t)}},me=class{constructor(e){this._settings=e,this._logger=new v("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var r;this._logger.create("prepare");let n=window.self;"top"===t&&(n=null!=(r=window.top)?r:window.self);const i=n.location[e].bind(n.location);let o;return{navigate:async e=>{this._logger.create("navigate");const t=new Promise((e,t)=>{o=t});return i(e.url),await t},close:()=>{this._logger.create("close"),null==o||o(new Error("Redirect aborted")),n.stop()}}}async callback(){}},ge=class extends R{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new v("UserManagerEvents"),this._userLoaded=new b("User loaded"),this._userUnloaded=new b("User unloaded"),this._silentRenewError=new b("Silent renew error"),this._userSignedIn=new b("User signed in"),this._userSignedOut=new b("User signed out"),this._userSessionChanged=new b("User session changed")}async load(e,t=!0){super.load(e),t&&await this._userLoaded.raise(e)}async unload(){super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},ye=class{constructor(e){this._userManager=e,this._logger=new v("SilentRenewService"),this._isStarted=!1,this._retryTimer=new E("Retry Silent Renew"),this._tokenExpiring=async()=>{const e=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),e.debug("silent token renewal successful")}catch(t){if(t instanceof T)return e.warn("ErrorTimeout from signinSilent:",t,"retry in 5s"),void this._retryTimer.init(5);e.error("Error from signinSilent:",t),await this._userManager.events._raiseSilentRenewError(t)}}}async start(){const e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},be=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},_e=class{constructor(e,t,r,n){this._logger=new v("UserManager"),this.settings=new le(e),this._client=new Q(e),this._redirectNavigator=null!=t?t:new me(this.settings),this._popupNavigator=null!=r?r:new ve(this.settings),this._iframeNavigator=null!=n?n:new ue(this.settings),this._events=new ge(this.settings),this._silentRenewService=new ye(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new ee(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){const e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),await this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){const e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");const{redirectMethod:t,...r}=e,n=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...r},n)}async signinRedirectCallback(e=window.location.href){const t=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(e);return r.profile&&r.profile.sub?t.info("success, signed in subject",r.profile.sub):t.info("no subject"),r}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:r=!1}){const n=this._logger.create("signinResourceOwnerCredential"),i=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});n.debug("got signin response");const o=await this._buildUser(i);return o.profile&&o.profile.sub?n.info("success, signed in subject",o.profile.sub):n.info("no subject"),o}async signinPopup(e={}){const t=this._logger.create("signinPopup"),{popupWindowFeatures:r,popupWindowTarget:n,...i}=e,o=this.settings.popup_redirect_uri;o||t.throw(new Error("No popup_redirect_uri configured"));const a=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:n}),s=await this._signin({request_type:"si:p",redirect_uri:o,display:"popup",...i},a);return s&&(s.profile&&s.profile.sub?t.info("success, signed in subject",s.profile.sub):t.info("no subject")),s}async signinPopupCallback(e=window.location.href,t=!1){const r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async signinSilent(e={}){var t;const r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:n,...i}=e;let o=await this._loadUser();if(null==o?void 0:o.refresh_token){r.debug("using refresh token");const e=new be(o);return await this._useRefreshToken({state:e,redirect_uri:i.redirect_uri,resource:i.resource,extraTokenParams:i.extraTokenParams,timeoutInSeconds:n})}const a=this.settings.silent_redirect_uri;let s;a||r.throw(new Error("No silent_redirect_uri configured")),o&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",o.profile.sub),s=o.profile.sub);const c=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n});return o=await this._signin({request_type:"si:s",redirect_uri:a,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==o?void 0:o.id_token:void 0,...i},c,s),o&&((null==(t=o.profile)?void 0:t.sub)?r.info("success, signed in subject",o.profile.sub):r.info("no subject")),o}async _useRefreshToken(e){const t=await this._client.useRefreshToken({...e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),r=new te({...e.state,...t});return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(e=window.location.href){const t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){const{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){const{state:r}=await this._client.readSignoutResponseState(e);if(r)switch(r.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){const t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...n}=e,i=this.settings.silent_redirect_uri;i||t.throw(new Error("No silent_redirect_uri configured"));const o=await this._loadUser(),a=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),s=await this._signinStart({request_type:"si:s",redirect_uri:i,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==o?void 0:o.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...n},a);try{const e=await this._client.processSigninResponse(s.url);return t.debug("got signin response"),e.session_state&&e.profile.sub?(t.info("success for subject",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub}):(t.info("success, user not authenticated"),null)}catch(c){if(this.settings.monitorAnonymousSession&&c instanceof C)switch(c.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:c.session_state}}throw c}}async _signin(e,t,r){const n=await this._signinStart(e,t);return await this._signinEnd(n.url,r)}async _signinStart(e,t){const r=this._logger.create("_signinStart");try{const n=await this._client.createSigninRequest(e);return r.debug("got signin request"),await t.navigate({url:n.url,state:n.state.id,response_mode:n.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(n){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),n}}async _signinEnd(e,t){const r=this._logger.create("_signinEnd"),n=await this._client.processSigninResponse(e);r.debug("got signin response");const i=await this._buildUser(n,t);return i}async _buildUser(e,t){const r=this._logger.create("_buildUser"),n=new te(e);if(t){if(t!==n.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",n.profile.sub),new C({...e,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(n),r.debug("user stored"),await this._events.load(n),n}async signoutRedirect(e={}){const t=this._logger.create("signoutRedirect"),{redirectMethod:r,...n}=e,i=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...n},i),t.info("success")}async signoutRedirectCallback(e=window.location.href){const t=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(e);return t.info("success"),r}async signoutPopup(e={}){const t=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:n,...i}=e,o=this.settings.popup_post_logout_redirect_uri,a=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:n});await this._signout({request_type:"so:p",post_logout_redirect_uri:o,state:null==o?void 0:{},...i},a),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){const r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async _signout(e,t){const r=await this._signoutStart(e,t);return await this._signoutEnd(r.url)}async _signoutStart(e={},t){var r;const n=this._logger.create("_signoutStart");try{const i=await this._loadUser();n.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(i);const o=e.id_token_hint||i&&i.id_token;o&&(n.debug("setting id_token_hint in signout request"),e.id_token_hint=o),await this.removeUser(),n.debug("user removed, creating signout request");const a=await this._client.createSignoutRequest(e);return n.debug("got signout request"),await t.navigate({url:a.url,state:null==(r=a.state)?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(i){throw n.debug("error after preparing navigator, closing navigator window"),t.close(),i}}async _signoutEnd(e){const t=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(e);return t.debug("got signout response"),r}async signoutSilent(e={}){var t;const r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:n,...i}=e,o=this.settings.includeIdTokenInSilentSignout?null==(t=await this._loadUser())?void 0:t.id_token:void 0,a=this.settings.popup_post_logout_redirect_uri,s=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n});await this._signout({request_type:"so:s",post_logout_redirect_uri:a,id_token_hint:o,...i},s),r.info("success")}async signoutSilentCallback(e=window.location.href){const t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){const t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){const r=this._logger.create("_revokeInternal");if(!e)return;const n=t.filter(t=>"string"===typeof e[t]);if(n.length){for(const t of n)await this._client.revokeToken(e[t],t),r.info(t+" revoked successfully"),"access_token"!==t&&(e[t]=null);await this.storeUser(e),r.debug("user stored"),await this._events.load(e)}else r.debug("no need to revoke due to no token(s)")}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){const e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),te.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){const t=this._logger.create("storeUser");if(e){t.debug("storing user");const r=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}},we="3.0.1",Se=we},"4f5a":function(e,t,r){"use strict";var n=r("3139");class i{constructor(e,t){t||(t={}),this.core=e,this.state=0,this.keysupdatetimeout=null,this.userinfo={image:"",name:"",id:"",keys:[]},this.private=[]}destroy(){this.keysupdatetimeout&&clearTimeout(this.keysupdatetimeout),this.keysupdatetimeout=null,this.state=0,this.userinfo={image:"",name:"",id:"",keys:[]},this.private=[]}setCredentials(e){e&&(this.credentials=e)}setUsersInfo(e,t){_.each(e||[],e=>{this.core.store.commit("SET_USERINFO",{info:e,reload:t})})}setContacts(e){}myMatrixId(){return this.matrixId(this.userinfo.id)}matrixId(e,t){return e||(e=""),0==e.indexOf("@")?e:"@"+e+":"+(t||this.core.domain)}fromMatrixId(e){return n["a"].getmatrixid(e)}}t["a"]=i},"4fd1":function(e,t,r){var n=r("3fb5"),i=r("b672"),o=r("8707").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function c(){this.init(),this._w=s,i.call(this,128,112)}function l(e,t,r){return r^e&(t^r)}function d(e,t,r){return e&t|r&(e|t)}function u(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function v(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function g(e,t){return e>>>0<t>>>0?1:0}n(c,i),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,c=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,w=0|this._bl,S=0|this._cl,E=0|this._dl,k=0|this._el,I=0|this._fl,C=0|this._gl,T=0|this._hl,R=0;R<32;R+=2)t[R]=e.readInt32BE(4*R),t[R+1]=e.readInt32BE(4*R+4);for(;R<160;R+=2){var x=t[R-30],O=t[R-30+1],M=f(x,O),A=p(O,x);x=t[R-4],O=t[R-4+1];var P=v(x,O),D=m(O,x),j=t[R-14],L=t[R-14+1],N=t[R-32],U=t[R-32+1],F=A+L|0,B=M+j+g(F,A)|0;F=F+D|0,B=B+P+g(F,D)|0,F=F+U|0,B=B+N+g(F,U)|0,t[R]=B,t[R+1]=F}for(var K=0;K<160;K+=2){B=t[K],F=t[K+1];var q=d(r,n,i),V=d(_,w,S),W=u(r,_),$=u(_,r),z=h(s,k),G=h(k,s),H=a[K],Y=a[K+1],J=l(s,c,y),X=l(k,I,C),Z=T+G|0,Q=b+z+g(Z,T)|0;Z=Z+X|0,Q=Q+J+g(Z,X)|0,Z=Z+Y|0,Q=Q+H+g(Z,Y)|0,Z=Z+F|0,Q=Q+B+g(Z,F)|0;var ee=$+V|0,te=W+q+g(ee,$)|0;b=y,T=C,y=c,C=I,c=s,I=k,k=E+Z|0,s=o+Q+g(k,E)|0,o=i,E=S,i=n,S=w,n=r,w=_,_=Z+ee|0,r=Q+te+g(_,Z)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+S|0,this._dl=this._dl+E|0,this._el=this._el+k|0,this._fl=this._fl+I|0,this._gl=this._gl+C|0,this._hl=this._hl+T|0,this._ah=this._ah+r+g(this._al,_)|0,this._bh=this._bh+n+g(this._bl,w)|0,this._ch=this._ch+i+g(this._cl,S)|0,this._dh=this._dh+o+g(this._dl,E)|0,this._eh=this._eh+s+g(this._el,k)|0,this._fh=this._fh+c+g(this._fl,I)|0,this._gh=this._gh+y+g(this._gl,C)|0,this._hh=this._hh+b+g(this._hl,T)|0},c.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},"4ff6":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n,i=r("936a");(function(e){e["Global"]="Global",e["SetItemError"]="setItem",e["GetItemError"]="getItem",e["RemoveItemError"]="removeItem",e["ClearError"]="clear",e["QuotaExceededError"]="QuotaExceededError"})(n||(n={}));class o extends i["b"]{}new o},5:function(e,t){},"500a":function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return h}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=(r("4b9e"),new Map),c=new Map;class l{constructor(e){a()(this,"userId",void 0),a()(this,"deviceId",void 0),a()(this,"crypto",void 0),a()(this,"olmDevice",void 0),a()(this,"baseApis",void 0),this.userId=e.userId,this.deviceId=e.deviceId,this.crypto=e.crypto,this.olmDevice=e.olmDevice,this.baseApis=e.baseApis}prepareToEncrypt(e){}onRoomMembership(e,t,r){}}class d{constructor(e){a()(this,"userId",void 0),a()(this,"crypto",void 0),a()(this,"olmDevice",void 0),a()(this,"baseApis",void 0),this.userId=e.userId,this.crypto=e.crypto,this.olmDevice=e.olmDevice,this.baseApis=e.baseApis}onRoomKeyEvent(e){return i()((function*(){}))()}importRoomKey(e,t){return i()((function*(){}))()}hasKeysForKeyRequest(e){return Promise.resolve(!1)}shareKeysWithDevice(e){throw new Error("shareKeysWithDevice not supported for this DecryptionAlgorithm")}retryDecryptionFromSender(e){return i()((function*(){return!1}))()}}class u extends Error{constructor(e,t,r){super(e),this.devices=t,this.event=r,this.name="UnknownDeviceError",this.devices=t}}function h(e,t,r){s.set(e,t),c.set(e,r)}},"504a":function(e,t,r){"use strict";(function(e){r.d(t,"d",(function(){return f})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return _}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("eaff"),c=r("c35f"),l=r("da1e"),d=r("5b5f"),u=r("7963"),h=r("8708"),f=h["a"].ShowQrCode,p=h["a"].ScanQrCode,v=u["c"];class m extends s["b"]{constructor(){var e;super(...arguments),e=this,a()(this,"reciprocateQREvent",void 0),a()(this,"doVerification",i()((function*(){if(!e.startEvent)throw new Error("It is not currently possible to start verificationwith this method yet.");var{qrCodeData:t}=e.request;if(e.startEvent.getContent()["secret"]!==(null===t||void 0===t?void 0:t.encodedSharedSecret))throw Object(c["d"])();yield new Promise((t,r)=>{e.reciprocateQREvent={confirm:t,cancel:()=>r(Object(c["h"])())},e.emit(v.ShowReciprocateQr,e.reciprocateQREvent)});var r={};switch(null===t||void 0===t?void 0:t.mode){case g.VerifyOtherUser:var n=t.otherUserMasterKey;r["ed25519:".concat(n)]=n;break;case g.VerifySelfTrusted:var i=e.request.targetDevice.deviceId;r["ed25519:".concat(i)]=t.otherDeviceKey;break;case g.VerifySelfUntrusted:var o=t.myMasterKey;r["ed25519:".concat(o)]=o;break}yield e.verifyKeys(e.userId,r,(e,t,n)=>{var i=r[e];if(!i)throw Object(c["d"])();if(n!==i)throw d["b"].error("key ID from key info does not match"),Object(c["d"])();for(var o in t.keys)if(o.startsWith("ed25519")){var a=r[o];if(!a)throw Object(c["d"])();if(t.keys[o]!==a)throw d["b"].error("master key does not match"),Object(c["d"])()}})})))}static factory(e,t,r,n,i,o){return new m(e,t,r,n,i,o)}static get NAME(){return"m.reciprocate.v1"}getReciprocateQrCodeCallbacks(){var e;return null!==(e=this.reciprocateQREvent)&&void 0!==e?e:null}}var g,y=2,b="MATRIX";(function(e){e[e["VerifyOtherUser"]=0]="VerifyOtherUser",e[e["VerifySelfTrusted"]=1]="VerifySelfTrusted",e[e["VerifySelfUntrusted"]=2]="VerifySelfUntrusted"})(g||(g={}));class _{constructor(e,t,r,n,i,o){this.mode=e,this.sharedSecret=t,this.otherUserMasterKey=r,this.otherDeviceKey=n,this.myMasterKey=i,this.buffer=o}static create(e,t){return i()((function*(){var r=_.generateSharedSecret(),n=_.determineMode(e,t),i=null,o=null,a=null;if(n===g.VerifyOtherUser){var s=t.getStoredCrossSigningForUser(e.otherUserId);i=s.getId("master")}else if(n===g.VerifySelfTrusted)o=yield _.getOtherDeviceKey(e,t);else if(n===g.VerifySelfUntrusted){var c=t.getUserId(),l=t.getStoredCrossSigningForUser(c);a=l.getId("master")}var d=_.generateQrData(e,t,n,r,i,o,a),u=_.generateBuffer(d);return new _(n,r,i,o,a,u)}))()}get encodedSharedSecret(){return this.sharedSecret}getBuffer(){return this.buffer}static generateSharedSecret(){var e=new Uint8Array(11);return globalThis.crypto.getRandomValues(e),Object(l["c"])(e)}static getOtherDeviceKey(e,t){return i()((function*(){var r=t.getUserId(),n=e.targetDevice,i=n.deviceId?t.getStoredDevice(r,n.deviceId):void 0;if(!i)throw new Error("could not find device "+(null===n||void 0===n?void 0:n.deviceId));return i.getFingerprint()}))()}static determineMode(e,t){var r=t.getUserId(),n=e.otherUserId,i=g.VerifyOtherUser;if(r===n){var o=t.checkUserTrust(r);i=o.isCrossSigningVerified()?g.VerifySelfTrusted:g.VerifySelfUntrusted}return i}static generateQrData(e,t,r,n,i,o,a){var s=t.getUserId(),c=e.channel.transactionId,l={prefix:b,version:y,mode:r,transactionId:c,firstKeyB64:"",secondKeyB64:"",secretB64:n},d=t.getStoredCrossSigningForUser(s);return r===g.VerifyOtherUser?(l.firstKeyB64=d.getId("master"),l.secondKeyB64=i):r===g.VerifySelfTrusted?(l.firstKeyB64=d.getId("master"),l.secondKeyB64=o):r===g.VerifySelfUntrusted&&(l.firstKeyB64=t.getDeviceEd25519Key(),l.secondKeyB64=a),l}static generateBuffer(t){var r=e.alloc(0),n=t=>{var n=e.from([t]);r=e.concat([r,n])},i=t=>{var n=e.alloc(2);n.writeInt16BE(t,0),r=e.concat([r,n])},o=function(t,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.from(t,n);o&&i(a.byteLength),r=e.concat([r,a])},a=t=>{var n=Object(l["a"])(t),i=e.from(n);r=e.concat([r,i])};return o(t.prefix,"ascii",!1),n(t.version),n(t.mode),o(t.transactionId,"utf-8"),a(t.firstKeyB64),a(t.secondKeyB64),a(t.secretB64),r}}}).call(this,r("b639").Buffer)},5059:function(e,t,r){"use strict";var n=r("3139"),i=r("6f45"),o=function(){var e=this;return e.orientation=function(e,t){return new Promise((r,n)=>{if(!t.orientation)return r(e);var i=new Image,o=document.createElement("canvas"),a=o.getContext("2d");i.src=srcData,i.onload=function(){var e=i.width,n=i.height;switch($.inArray(t.orientation,[5,6,7,8])>-1?(o.width=n,o.height=e):(o.width=e,o.height=n),t.orientation){case 1:a.drawImage(this,0,0,e,n);break;case 2:a.translate(e,0),a.scale(-1,1),a.drawImage(this,0,0,e,n);break;case 3:a.translate(e,n),a.rotate(Math.PI),a.drawImage(this,0,0,e,n);break;case 4:a.translate(0,n),a.scale(1,-1),a.drawImage(this,0,0,e,n);break;case 5:a.rotate(Math.PI/2),a.scale(1,-1),a.drawImage(this,0,0,e,n);break;case 6:a.rotate(Math.PI/2),a.translate(0,-n),a.drawImage(this,0,0,e,n);break;case 7:a.rotate(Math.PI/2),a.translate(e,-n),a.scale(-1,1),a.drawImage(this,0,0,e,n);break;case 8:a.rotate(-Math.PI/2),a.translate(-e,0),a.drawImage(this,0,0,e,n);break;default:return void a.drawImage(this,0,0,e,n)}var s=o.toDataURL("image/jpeg",.95);$(o).remove(),r(s)}})},e.autorotation=function(t,r){return new Promise((o,a)=>{if(!t||n["a"].isios())return o(r);i.getData(t,(function(){var t=i.getAllTags(this);e.orientation(r,t).then(e=>o(e))}))})},e.srcToData=function(e,t){var r=new XMLHttpRequest;r.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(r.response)},r.onerror=function(){},r.open("GET",e),r.responseType="blob",r.send()},e.resize={fit:function(e,t,r,n,i){var o,a,s,c=new Image,l=document.createElement("canvas"),d=l.getContext("2d");return c.crossOrigin="Anonymous",c.src=e,n||(n="image/jpeg"),i||(i=1),new Promise((e,u)=>{c.onload=function(){if(o=c.height/c.width,s=c.height,a=c.width,s<=r&&a<=t);else{a>t&&(a=t,s=t*o),s>r&&(s=r,a=s/o);var u=Math.max((s-r)/s,(a-t)/a);u>0&&(s*=u+1,a*=u+1)}l.width=a,l.height=s,d.drawImage(c,0,0,a,s);var h=l.toDataURL(n,i);$(l).remove(),e(h)}})},def:function(e,t,r,n,i){var o,a,s,c=new Image,l=document.createElement("canvas"),d=l.getContext("2d");return c.crossOrigin="Anonymous",c.src=e,n||(n="image/jpeg"),i||(i=1),new Promise((e,u)=>{c.onload=function(){o=c.height/c.width,s=c.height,a=c.width,s<=r&&a<=t||(a>t&&(a=t,s=t*o),s>r&&(s=r,a=s/o)),l.width=a,l.height=s,d.drawImage(c,0,0,a,s);var u=l.toDataURL(n,i);$(l).remove(),e(u)}})}},e.grayscaleImage=function(e,t){var r=new Image;return r.src=e,new Promise((e,t)=>{r.onload=function(){var t=document.createElement("canvas"),n=t.getContext("2d"),i=r.width,o=r.height;t.width=i,t.height=o,n.drawImage(r,0,0);var a=n.getImageData(0,0,i,o),s=0,c=0;for(c=0;c<a.height;c++)for(s=0;s<a.width;s++){var l=4*c*a.width+4*s,d=a.data[l],u=a.data[l+1],h=a.data[l+2],f=a.data[l+3],p=(3*d+u+h)/3;a.data[l]=p,a.data[l+1]=p,a.data[l+2]=p,a.data[l+3]=f}n.putImageData(a,0,0,0,0,a.width,a.height),e(t.toDataURL())}})},e.wh=function(e){const t=new Image;var r={};return new Promise((n,i)=>{t.onload=function(){r.w=this.width,r.h=this.height,n(r)},t.onerror=function(e){i(e)},t.src=e})},e};t["a"]=o},"50c4":function(e,t,r){"use strict";var n=r("5926"),i=Math.min;e.exports=function(e){var t=n(e);return t>0?i(t,9007199254740991):0}},"511b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5156:function(e,t,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r("1696");e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},"51a2":function(e,t,r){e.exports=r("0ac3").PassThrough},5270:function(e,t,r){"use strict";var n=r("c532"),i=r("c401"),o=r("2e67"),a=r("2444");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||a.adapter;return t(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5402:function(e,t,r){"use strict";var n=r("00ce"),i=r("545e"),o=r("2714"),a=r("0d25"),s=n("%WeakMap%",!0),c=n("%Map%",!0),l=i("WeakMap.prototype.get",!0),d=i("WeakMap.prototype.set",!0),u=i("WeakMap.prototype.has",!0),h=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),v=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},m=function(e,t){var r=v(e,t);return r&&r.value},g=function(e,t,r){var n=v(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},y=function(e,t){return!!v(e,t)};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+o(e))},get:function(n){if(s&&n&&("object"===typeof n||"function"===typeof n)){if(e)return l(e,n)}else if(c){if(t)return h(t,n)}else if(r)return m(r,n)},has:function(n){if(s&&n&&("object"===typeof n||"function"===typeof n)){if(e)return u(e,n)}else if(c){if(t)return p(t,n)}else if(r)return y(r,n);return!1},set:function(n,i){s&&n&&("object"===typeof n||"function"===typeof n)?(e||(e=new s),d(e,n,i)):c?(t||(t=new c),f(t,n,i)):(r||(r={key:{},next:null}),g(r,n,i))}};return n}},5451:function(t,r,n){"use strict";(function(t){n.d(r,"a",(function(){return v}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("b83f"),l=n("992c"),d=n("c4c5"),u=n("0154"),h=n("070f");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class v{constructor(e,t){var r;this.eventEmitter=e,this.opts=t,s()(this,"abortController",new AbortController),Object(c["d"])(t,["baseUrl","prefix"]),t.onlyData=!!t.onlyData,t.useAuthorizationHeader=null!==(r=t.useAuthorizationHeader)&&void 0!==r&&r}abort(){this.abortController.abort(),this.abortController=new AbortController}fetch(e,r){return this.opts.fetchFn?this.opts.fetchFn(e,r):t.fetch(e,r)}setIdBaseUrl(e){this.opts.idBaseUrl=e}idServerRequest(e,t,r,n,i){if(!this.opts.idBaseUrl)throw new Error("No identity server base URL set");var o=void 0,a=void 0;e===l["a"].Get?o=r:a=r;var s=this.getUrl(t,o,n,this.opts.idBaseUrl),c={json:!0,headers:{}};return i&&(c.headers.Authorization="Bearer ".concat(i)),this.requestOtherUrl(e,s,a,c)}authedRequest(e,t,r,n){var i=arguments,a=this;return o()((function*(){var o=i.length>4&&void 0!==i[4]?i[4]:{};r||(r={});var s=p({},o);a.opts.accessToken&&(a.opts.useAuthorizationHeader?(s.headers||(s.headers={}),s.headers.Authorization||(s.headers.Authorization="Bearer "+a.opts.accessToken),r.access_token&&delete r.access_token):r.access_token||(r.access_token=a.opts.accessToken));try{var c=yield a.request(e,t,r,n,s);return c}catch(error){var l=error;if("M_UNKNOWN_TOKEN"===l.errcode&&!s.doNotAttemptTokenRefresh){var d=yield a.tryRefreshToken();if(d)return a.authedRequest(e,t,r,n,p(p({},o),{},{doNotAttemptTokenRefresh:!0}))}throw"M_UNKNOWN_TOKEN"!=l.errcode||null!==s&&void 0!==s&&s.inhibitLogoutEmit?"M_CONSENT_NOT_GIVEN"==l.errcode&&a.eventEmitter.emit(u["a"].NoConsent,l.message,l.data.consent_uri):a.eventEmitter.emit(u["a"].SessionLoggedOut,l),l}}))()}tryRefreshToken(){var e=this;return o()((function*(){if(!e.opts.refreshToken||!e.opts.tokenRefreshFunction)return!1;try{var{accessToken:t,refreshToken:r}=yield e.opts.tokenRefreshFunction(e.opts.refreshToken);return e.opts.accessToken=t,e.opts.refreshToken=r,!0}catch(error){var n;return null===(n=e.opts.logger)||void 0===n||n.warn("Failed to refresh token",error),!1}}))()}request(e,t,r,n,i){var o=this.getUrl(t,r,null===i||void 0===i?void 0:i.prefix,null===i||void 0===i?void 0:i.baseUrl);return this.requestOtherUrl(e,o,n,i)}requestOtherUrl(t,r,n){var i=arguments,a=this;return o()((function*(){var o,s,c,l,u,f=i.length>3&&void 0!==i[3]?i[3]:{},p=a.sanitizeUrlForLogs(r);null===(o=a.opts.logger)||void 0===o||o.debug("FetchHttpApi: --\x3e ".concat(t," ").concat(p));var v=Object.assign({},f.headers||{}),m=null===(s=f.json)||void 0===s||s,g=m&&(null===n||void 0===n||null===(c=n.constructor)||void 0===c?void 0:c.name)===Object.name;m&&(g&&!v["Content-Type"]&&(v["Content-Type"]="application/json"),v["Accept"]||(v["Accept"]="application/json"));var y,b=null!==(l=f.localTimeoutMs)&&void 0!==l?l:a.opts.localTimeoutMs,_=null!==(u=f.keepAlive)&&void 0!==u&&u,w=[a.abortController.signal];void 0!==b&&w.push(Object(h["e"])(b)),f.abortSignal&&w.push(f.abortSignal),y=g?JSON.stringify(n):n;var S,{signal:E,cleanup:k}=Object(h["a"])(w),I=Date.now();try{var C;S=yield a.fetch(r,{signal:E,method:t,body:y,headers:v,mode:"cors",redirect:"follow",referrer:"",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"omit",keepalive:_,priority:f.priority}),null===(C=a.opts.logger)||void 0===C||C.debug("FetchHttpApi: <-- ".concat(t," ").concat(p," [").concat(Date.now()-I,"ms ").concat(S.status,"]"))}catch(e){var T;if(null===(T=a.opts.logger)||void 0===T||T.debug("FetchHttpApi: <-- ".concat(t," ").concat(p," [").concat(Date.now()-I,"ms ").concat(e,"]")),"AbortError"===e.name)throw e;throw new d["a"]("fetch failed",e)}finally{k()}if(!S.ok)throw Object(h["c"])(S,yield S.text());return a.opts.onlyData?m?S.json():S.text():S}))()}sanitizeUrlForLogs(e){try{var t;t="string"===typeof e?new URL(e):e;var r=new URLSearchParams;for(var n of t.searchParams.keys())r.append(n,"xxx");var i=r.toString(),o=i?"?".concat(i):"";return t.origin+t.pathname+o}catch(error){return"??"}}getUrl(e,t,r,n){var i=null!==n&&void 0!==n?n:this.opts.baseUrl,o=i.endsWith("/")?i.slice(0,-1):i,a=new URL(o+(null!==r&&void 0!==r?r:this.opts.prefix)+e);return t&&Object(c["j"])(t,a.searchParams),a}}}).call(this,n("c8ba"))},"545e":function(e,t,r){"use strict";var n=r("00ce"),i=r("3eb1"),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&o(e,".prototype.")>-1?i(r):r}},5494:function(e,t,r){"use strict";var n=r("83ab"),i=r("e330"),o=r("edd0"),a=URLSearchParams.prototype,s=i(a.forEach);n&&!("size"in a)&&o(a,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"54dd":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".menuitem[data-v-f996b37e]{width:100%;display:flex;padding:1em;align-items:center;background:rgb(var(--neutral-grad-0));color:rgb(var(--neutral-grad-4));margin-bottom:.5em;border-radius:22px}.menuitem.good[data-v-f996b37e]{color:rgb(var(--color-good))}.menuitem.bad[data-v-f996b37e]{color:rgb(var(--color-bad))}.menuitem i[data-v-f996b37e]{width:33px;text-align:center;margin-right:.5em}[data-v-f996b37e] .simplelist .item:last-child .menuitem{margin-bottom:0}@media(pointer:fine){.menuitem[data-v-f996b37e]{cursor:pointer;transition:.3s}.menuitem[data-v-f996b37e]:hover{background:rgb(var(--neutral-grad-1))}}",""]),e.exports=t},5521:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"#wai-logotype .items[data-v-40188122]{display:flex;align-items:center}#wai-logotype .items .item.label[data-v-40188122]{padding-left:.25em;font-weight:700}",""]),e.exports=t},"562e":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".searchWrapper[data-v-398c013e]{display:flex;overflow:hidden;background:rgb(var(--background-main));border-radius:30px;color:rgb(var(--neutral-grad-2));align-items:center}.searchWrapper .inputWrapper[data-v-398c013e]{flex-grow:1}.searchWrapper .inputWrapper input[data-v-398c013e]{padding:.75em 1em;padding-right:0;width:100%;font-size:.9em}.searchWrapper .iconWrapper[data-v-398c013e]{text-align:center;width:50px;display:flex;align-items:center;justify-content:center}.searchWrapper .iconWrapper i[data-v-398c013e]{font-size:.8em}#simpleSearch.minimized:not(.active) .searchWrapper[data-v-398c013e]{border-radius:0;background:transparent;padding:0}#simpleSearch.minimized:not(.active) .searchWrapper .inputWrapper[data-v-398c013e]{display:none}#simpleSearch.minimized:not(.active) .searchWrapper .iconWrapper[data-v-398c013e]{text-align:center;width:44px;height:44px;line-height:44px;padding:0;border-radius:50%;background:rgba(var(--color-txt-gray-dark),.4);color:rgba(var(--color-txt-gray-dark),.8)}#simpleSearch.minimized:not(.active) .searchWrapper .iconWrapper i[data-v-398c013e]{font-size:.8em}",""]),e.exports=t},"567a":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("c973"),i=r.n(n);function o(e){return a.apply(this,arguments)}function a(){return a=i()((function*(e){if(!globalThis.crypto.subtle)throw new Error("Crypto.subtle is not available: insecure context?");var t=(new TextEncoder).encode(e),r=yield globalThis.crypto.subtle.digest("SHA-256",t);return r})),a.apply(this,arguments)}},5692:function(e,t,r){"use strict";var n=r("c6cd");e.exports=function(e,t){return n[e]||(n[e]=t||{})}},"56ef":function(e,t,r){"use strict";var n=r("d066"),i=r("e330"),o=r("241c"),a=r("7418"),s=r("825a"),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?c(t,r(e)):t}},"577e":function(e,t,r){"use strict";var n=r("f5df"),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},5896:function(e,t,r){"use strict";var n=r("a593");e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return function(){return!0}}()},5926:function(e,t,r){"use strict";var n=r("b42e");e.exports=function(e){var t=+e;return t!==t||0===t?0:n(t)}},"596f":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.outer-div[data-v-7da73fce]{line-height:inherit;border-radius:50%}.dropDownIcon[data-v-7da73fce]{width:35px;height:35px;line-height:35px}.dropDownIcon i[data-v-7da73fce]{line-height:35px!important}.menuwrapper[data-v-7da73fce]{padding-left:1em;padding-right:1em;padding-bottom:1em;position:absolute;z-index:100;bottom:0;left:0;right:0}.menuwrapper[data-v-7da73fce] .items{max-height:500px;overflow-y:auto;border-radius:3px;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}.dropdown[data-v-7da73fce]{z-index:10000;position:absolute;width:100%;right:0;height:auto;color:rgb(var(--text-color));transition:.3s;bottom:-100em;top:100em}.dropdown .backgr[data-v-7da73fce]{background:rgba(var(--background-total-theme),.15);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);position:fixed;z-index:100;left:0;right:0;top:0;bottom:0;opacity:0;transition:.3s}.dropdown.visible[data-v-7da73fce]{bottom:0;top:0}.dropdown.visible .backgr[data-v-7da73fce]{opacity:1}.dropdown[data-v-7da73fce] .contentWrapper{margin-top:.25em;border-radius:10px;overflow:hidden}.dropdown .contentWrapper[data-v-7da73fce],.dropdown[data-v-7da73fce] .contentWrapper{border-top:1px solid rgba(var(--neutral-grad-1),.5);box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}.dropdown .cancelWrapper .menu-item[data-v-7da73fce]{margin-top:0;box-shadow:none;color:rgb(var(--neutral-grad-3));box-shadow:0 5px 5px -3px rgba(var(--color-shadow-base),.4)}.dropdown .menu-item[data-v-7da73fce]{padding:.5em;background:rgb(var(--background-total-theme));color:rgb(var(--neutral-grad-3));line-height:44px;margin-top:.25em;display:flex;border-radius:10px;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}.dropdown .menu-item .title[data-v-7da73fce]{flex-grow:2;padding-right:44px;text-align:center}.dropdown .menu-item .iconWrapper[data-v-7da73fce]{width:44px;text-align:center}.dropdown .blocker[data-v-7da73fce]{position:fixed;top:0;left:0;bottom:0;right:0;content:" "}.cancelWrapper[data-v-7da73fce]{border-radius:3px;padding-left:.5em;padding-right:.5em;color:rgb(var(--neutral-grad-3))}.small[data-v-7da73fce]{font-size:.85em}.outer-div.mobile .menuwrapper[data-v-7da73fce]{position:fixed}.outer-div.minimized[data-v-7da73fce]{position:static}.outer-div.minimized .backgr[data-v-7da73fce]{border-radius:4px;height:1000px;bottom:0;top:auto;background:transparent;position:absolute}.outer-div.minimized .dropdown[data-v-7da73fce]{z-index:10000;right:0}.outer-div.minimized .menuwrapper[data-v-7da73fce]{border-radius:4px;padding-top:.5em}.outer-div.minimized .menuwrapper[data-v-7da73fce] .menu-item{margin-top:.25em;border-radius:5px;background:rgba(var(--background-total-theme),.95)}',""]),e.exports=t},"59ed":function(e,t,r){"use strict";var n=r("1626"),i=r("0d51"),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},"5a74":function(t,r,n){"use strict";if(n.r(r),"undefined"!==typeof window){var i=window.document.currentScript;if(Object({NODE_ENV:"production",BASE_URL:"/"}).NEED_CURRENTSCRIPT_POLYFILL){var o=n("8875");i=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o})}var a=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var s=n("a026");const c=/-(\w)/g,l=e=>e.replace(c,(e,t)=>t?t.toUpperCase():""),d=/\B([A-Z])/g,u=e=>e.replace(d,"-$1").toLowerCase();function h(e){const t={};return e.forEach(e=>{t[e]=void 0}),t}function f(e,t,r){e[t]=[].concat(e[t]||[]),e[t].unshift(r)}function p(e,t){if(e){const r=e.$options[t]||[];r.forEach(t=>{t.call(e)})}}function v(e,t){return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}const m=e=>/function Boolean/.test(String(e)),g=e=>/function Number/.test(String(e));function y(e,t,{type:r}={}){if(m(r))return"true"===e||"false"===e?"true"===e:""===e||e===t||null!=e||e;if(g(r)){const t=parseFloat(e,10);return isNaN(t)?e:t}return e}function b(e,t){const r=[];for(let n=0,i=t.length;n<i;n++)r.push(w(e,t[n]));return r}function w(e,t){if(3===t.nodeType)return t.data.trim()?t.data:null;if(1===t.nodeType){const r={attrs:S(t),domProps:{innerHTML:t.innerHTML}};return r.attrs.slot&&(r.slot=r.attrs.slot,delete r.attrs.slot),e(t.tagName,r)}return null}function S(e){const t={};for(let r=0,n=e.attributes.length;r<n;r++){const n=e.attributes[r];t[n.nodeName]=n.nodeValue}return t}function E(e,t){const r="function"===typeof t&&!t.cid;let n,i,o,a=!1;function s(e){if(a)return;const t="function"===typeof e?e.options:e,r=Array.isArray(t.props)?t.props:Object.keys(t.props||{});n=r.map(u),i=r.map(l);const s=Array.isArray(t.props)?{}:t.props||{};o=i.reduce((e,t,n)=>(e[t]=s[r[n]],e),{}),f(t,"beforeCreate",(function(){const e=this.$emit;this.$emit=(t,...r)=>(this.$root.$options.customElement.dispatchEvent(v(t,r)),e.call(this,t,...r))})),f(t,"created",(function(){i.forEach(e=>{this.$root.props[e]=this[e]})})),i.forEach(e=>{Object.defineProperty(d.prototype,e,{get(){return this._wrapper.props[e]},set(t){this._wrapper.props[e]=t},enumerable:!1,configurable:!0})}),a=!0}function c(e,t){const r=l(t),n=e.hasAttribute(t)?e.getAttribute(t):void 0;e._wrapper.props[r]=y(n,t,o[r])}class d extends HTMLElement{constructor(){const r=super();r.attachShadow({mode:"open"});const n=r._wrapper=new e({name:"shadow-root",customElement:r,shadowRoot:r.shadowRoot,data(){return{props:{},slotChildren:[]}},render(e){return e(t,{ref:"inner",props:this.props},this.slotChildren)}}),i=new MutationObserver(e=>{let t=!1;for(let n=0;n<e.length;n++){const i=e[n];a&&"attributes"===i.type&&i.target===r?c(r,i.attributeName):t=!0}t&&(n.slotChildren=Object.freeze(b(n.$createElement,r.childNodes)))});i.observe(r,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}get vueComponent(){return this._wrapper.$refs.inner}connectedCallback(){const e=this._wrapper;if(e._isMounted)p(this.vueComponent,"activated");else{const r=()=>{e.props=h(i),n.forEach(e=>{c(this,e)})};a?r():t().then(e=>{(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),s(e),r()}),e.slotChildren=Object.freeze(b(e.$createElement,this.childNodes)),e.$mount(),this.shadowRoot.appendChild(e.$el)}}disconnectedCallback(){p(this.vueComponent,"deactivated")}}return r||s(t),d}var k=E,I=(n("24fb"),n("35d6"),n("2877")),C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app",attrs:{id:"matrix-root",theme:e.theme}},[t("div",{staticClass:"rootcontent",class:{pip:e.pip,bin:e.pocketnet,fix:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,active:e.active,mobile:e.mobile,unselect:e.unselect}},[t("div",{staticClass:"chatwrapper",on:{click:e.iteraction}},[t("div",[e.closebybg?t("div",{staticClass:"backface",on:{click:e.hide}}):e._e(),t("MainWrapper"),e.globalpreloader?t("preloader"):e._e(),t("transition",{attrs:{name:"fade"}},[e.unauthorized?t("div",{staticClass:"fixedallwrapper likeoffline"},[t("userUnauthorized")],1):e._e()])],1)])]),t("div",{attrs:{hidden:"",id:"sprite-plyr"}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("symbol",{attrs:{id:"plyr-airplay"}},[t("path",{attrs:{d:"M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"}}),t("path",{attrs:{d:"M4 17h10l-5-6z"}})]),t("symbol",{attrs:{id:"plyr-captions-off"}},[t("path",{attrs:{d:"M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z","fill-rule":"evenodd","fill-opacity":".5"}})]),t("symbol",{attrs:{id:"plyr-captions-on"}},[t("path",{attrs:{d:"M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z","fill-rule":"evenodd"}})]),t("symbol",{attrs:{id:"plyr-download"}},[t("path",{attrs:{d:"M9 13c.3 0 .5-.1.7-.3L15.4 7 14 5.6l-4 4V1H8v8.6l-4-4L2.6 7l5.7 5.7c.2.2.4.3.7.3zm-7 2h14v2H2z"}})]),t("symbol",{attrs:{id:"plyr-enter-fullscreen"}},[t("path",{attrs:{d:"M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"}})]),t("symbol",{attrs:{id:"plyr-exit-fullscreen"}},[t("path",{attrs:{d:"M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"}})]),t("symbol",{attrs:{id:"plyr-fast-forward"}},[t("path",{attrs:{d:"M7.875 7.171L0 1v16l7.875-6.171V17L18 9 7.875 1z"}})]),t("symbol",{attrs:{id:"plyr-logo-vimeo"}},[t("path",{attrs:{d:"M17 5.3c-.1 1.6-1.2 3.7-3.3 6.4-2.2 2.8-4 4.2-5.5 4.2-.9 0-1.7-.9-2.4-2.6C5 10.9 4.4 6 3 6c-.1 0-.5.3-1.2.8l-.8-1c.8-.7 3.5-3.4 4.7-3.5 1.2-.1 2 .7 2.3 2.5.3 2 .8 6.1 1.8 6.1.9 0 2.5-3.4 2.6-4 .1-.9-.3-1.9-2.3-1.1.8-2.6 2.3-3.8 4.5-3.8 1.7.1 2.5 1.2 2.4 3.3z"}})]),t("symbol",{attrs:{id:"plyr-logo-youtube"}},[t("path",{attrs:{d:"M16.8 5.8c-.2-1.3-.8-2.2-2.2-2.4C12.4 3 9 3 9 3s-3.4 0-5.6.4C2 3.6 1.3 4.5 1.2 5.8 1 7.1 1 9 1 9s0 1.9.2 3.2c.2 1.3.8 2.2 2.2 2.4C5.6 15 9 15 9 15s3.4 0 5.6-.4c1.4-.3 2-1.1 2.2-2.4.2-1.3.2-3.2.2-3.2s0-1.9-.2-3.2zM7 12V6l5 3-5 3z"}})]),t("symbol",{attrs:{id:"plyr-muted"}},[t("path",{attrs:{d:"M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"}})]),t("symbol",{attrs:{id:"plyr-pause"}},[t("path",{attrs:{d:"M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zm6 0c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"}})]),t("symbol",{attrs:{id:"plyr-pip"}},[t("path",{attrs:{d:"M13.293 3.293L7.022 9.564l1.414 1.414 6.271-6.271L17 7V1h-6z"}}),t("path",{attrs:{d:"M13 15H3V5h5V3H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-6h-2v5z"}})]),t("symbol",{attrs:{id:"plyr-play"}},[t("path",{attrs:{d:"M15.562 8.1L3.87.225c-.818-.562-1.87 0-1.87.9v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"}})]),t("symbol",{attrs:{id:"plyr-restart"}},[t("path",{attrs:{d:"M9.7 1.2l.7 6.4 2.1-2.1c1.9 1.9 1.9 5.1 0 7-.9 1-2.2 1.5-3.5 1.5-1.3 0-2.6-.5-3.5-1.5-1.9-1.9-1.9-5.1 0-7 .6-.6 1.4-1.1 2.3-1.3l-.6-1.9C6 2.6 4.9 3.2 4 4.1 1.3 6.8 1.3 11.2 4 14c1.3 1.3 3.1 2 4.9 2 1.9 0 3.6-.7 4.9-2 2.7-2.7 2.7-7.1 0-9.9L16 1.9l-6.3-.7z"}})]),t("symbol",{attrs:{id:"plyr-rewind"}},[t("path",{attrs:{d:"M10.125 1L0 9l10.125 8v-6.171L18 17V1l-7.875 6.171z"}})]),t("symbol",{attrs:{id:"plyr-settings"}},[t("path",{attrs:{d:"M16.135 7.784a2 2 0 0 1-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 0 1-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 0 1-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 0 1-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 0 1 1.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 0 1 2.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 0 1 2.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 0 1 1.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}})]),t("symbol",{attrs:{id:"plyr-volume"}},[t("path",{attrs:{d:"M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"}}),t("path",{attrs:{d:"M11.282 5.282a.909.909 0 0 0 0 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 0 0 0 1.316c.145.145.636.262 1.018.156a.725.725 0 0 0 .298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 0 0-1.316 0zm-7.496.726H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"}})])])])])},T=[],R=(n("14d9"),n("13d5"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-wrapper",class:{minimized:e.minimized,active:e.active}},[t("vue-page-transition",{attrs:{name:"fade-in-right"}},[t("router-view")],1),e.showFooter?t("FooterChat"):e._e(),e.gallery?t("gallery",{attrs:{images:e.gallery.images,index:e.gallery.index},on:{close:e.closeGallery}}):e._e()],1)}),x=[],O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"footer-chat",class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active}},[t("div",{staticClass:"work"},[t("div",{staticClass:"menuItems"},[t("div",{staticClass:"menuItem bottom-nav__icon",class:{active:e.activechats},on:{click:function(t){return e.gotona("/chats")}}},[e._m(0),t("div",{staticClass:"label"},[e._v(" "+e._s(e.$t("caption.chats"))+" ")]),e.notificationCount?t("div",{staticClass:"unseen chatMessages"},[e._v(" "+e._s(e.notificationCount>99?"99":e.notificationCount)+" ")]):e._e()])])])])},M=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fas fa-comments"})])}],A=n("2f62"),P={name:"footerChat",data:function(){return{loading:!1}},created:()=>{},watch:{},computed:Object(A["d"])({pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:e=>e.active,auth:e=>e.auth,notificationCount:e=>e.allnotifications,current:function(){return this.$route.name},activesettings:function(){return"settings"==this.current},activecontacts:function(){return"contact"==this.current||"contacts"==this.current},activechats:function(){return"chat"==this.current||"chats"==this.current},mobile:function(){return this.$store.state.mobile}}),methods:{gotona(e){this.$router.push(e).catch(e=>{}),this.$store.commit("active",!0),this.$store.commit("setiteraction",!0)},movefromchat:function(){this.core.backtoapp&&this.core.backtoapp()}}},D=P;function j(e){var t=n("f64d");t.__inject__&&t.__inject__(e)}var L=Object(I["a"])(D,O,M,!1,j,"3bd2d533",null,!0),N=L.exports,U=function(){var e=this,t=e._self._c;return e.images&&e.images.length?t("v-photoswipe",{attrs:{isOpen:e.isOpen,items:e.images,options:e.options},on:{close:e.close,sharecordova:e.sharecordova}}):e._e()},F=[],B={props:{images:Array,index:Number},components:{vPhotoswipe:()=>Promise.all([n.e(30),n.e(18)]).then(n.bind(null,"29a3")).then(e=>e.PhotoSwipe)},data:()=>({isOpen:!1}),mounted(){this.init()},computed:{options:function(){var e={index:0,arrowEl:!0,fullscreenEl:!1,shareEl:!1,history:!1};return e}},methods:{close(){this.isOpen=!1,this.$emit("close")},init(){this.isOpen=!0,this.$set(this.options,"index",this.index)},sharecordova:function(e){window.plugins&&window.plugins.socialsharing&&window.plugins.socialsharing.shareWithOptions({files:[e]})}}},K=B,q=Object(I["a"])(K,U,F,!1,null,null,null,!0),V=q.exports,W={name:"mainWrapper",components:{FooterChat:N,gallery:V},data:function(){return{prevRoute:null,loading:!1}},created:()=>{},watch:{},beforeRouteEnter(e,t,r){r(e=>{e.prevRoute=t})},beforeRouteLeave(e,t,r){this.$store.commit("setmodal",null),r()},computed:Object(A["d"])({auth:e=>e.auth,...Object(A["d"])(["currentUserChat","minimized","gallery","active","mobile"]),showFooter:function(){return this.minimized}}),methods:{closeGallery:function(){this.$store.commit("GALLERY",null)}}},$=W;function z(e){var t=n("afad");t.__inject__&&t.__inject__(e)}var G=Object(I["a"])($,R,x,!1,z,"c291a1ac",null,!0),H=G.exports,Y=function(){var e=this,t=e._self._c;return t("div",{class:{bin:e.pocketnet,fix:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,active:e.active},attrs:{id:"userUnauthorized"}},[t("div",{staticClass:"table"},[t("div",{staticClass:"cell"},[t("div",{staticClass:"wrapper"},[e.loading?t("div",[t("i",{staticClass:"fas fa-spinner fa-spin"})]):t("div",["unauthorized"==e.unauthorized?t("div",[e._m(0),t("div",{staticClass:"label"},[e._v("User unauthorized")])]):e._e(),"deleted"==e.unauthorized?t("div",[e._m(1),t("div",{staticClass:"label"},[e._v("User deleted")])]):e._e(),"unknown"==e.unauthorized?t("div",[e._m(2),t("div",{staticClass:"label"},[e._v(" "+e._s(e.$t("caption.accNotFound"))+" ")]),e.connect&&e.usersinfo[e.connect]?t("div",{staticClass:"connect"},[e._m(3),t("preview",{attrs:{contact:e.usersinfo[e.connect],mode:"mini"}})],1):e._e(),e.joinroom&&!e.connect?t("div",{staticClass:"connect joinroom"},[e._m(4)]):e._e()]):e._e(),t("div",{staticClass:"actions"},[t("button",{staticClass:"button small",on:{click:e.refresh}},[e._v(" Refresh "),t("i",{staticClass:"fas fa-sync"})]),e.mobile?t("button",{staticClass:"button small ghost",on:{click:e.movefromchat}},[t("i",{staticClass:"fas fa-arrow-right"})]):e._e()])])])])])])},J=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fas fa-user-slash"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fas fa-user-slash"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fas fa-spinner fa-spin"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"connectCaption"},[t("span",[e._v(" When registration is complete, you will be connected to ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"connectCaption"},[t("span",[e._v(" When registration is complete, you will be redirect to public room ")])])}],X=n("92a6"),Z={name:"userUnauthorized",props:{data:Object},data:function(){return{loading:!1,intrv:null}},components:{preview:X["a"]},computed:Object(A["d"])({pocketnet:e=>e.pocketnet,minimized:function(){return!this.mobile&&this.$store.state.minimized},active:function(){return!this.mobile&&this.$store.state.active},auth:e=>e.auth,connect:e=>e.connect,joinroom:e=>e.joinroom,unauthorized:function(){return this.$store.state.unauthorized},mobile:function(){return this.$store.state.mobile},usersinfo:function(){return this.$store.state.users}}),beforeDestroy:function(){this.intrv&&(clearInterval(this.intrv),this.intrv=null)},methods:{refresh:function(e){e||(this.loading=!0),this.core.initWithUser().then(e=>{setTimeout(()=>{this.loading=!1},350)})},movefromchat:function(){this.core.backtoapp&&this.core.backtoapp()}},mounted:function(){this.connect&&this.core.user.usersInfo([this.connect]),"unknown"==this.unauthorized&&(this.intrv=setInterval(()=>{this.refresh(!0)},2e4))}},Q=Z;function ee(e){var t=n("4ac5");t.__inject__&&t.__inject__(e)}var te=Object(I["a"])(Q,Y,J,!1,ee,"7999c80f",null,!0),re=te.exports,ne=n("3139");s["default"].use(A["a"]);var ie={white:"White",black:"Dark",classic:"Classic"},oe={theme:function(e,t){ie[t]&&(e.theme=t)}},ae=null,se=new A["a"].Store({state:{contacts:{},contactsFromMatrix:{},viewType:"",contactsMap:{},chats:[],prechats:[],chatsMap:{},events:{},users:{},typing:{},icon:null,loading:!1,online:!0,unauthorized:!1,theme:"white",themes:ie,signedUpUsers:[],pocketnet:"",mobile:"",voiceMessagesEnabled:"",isCallsEnabled:!1,currentPlayingVoiceMessage:null,current_user:{},minimized:!0,active:!1,activeBlock:{},globalpreloader:!1,allnotifications:0,pocketteammessages:[],readedteammessages:{},chatsready:!1,autohide:!1,iteraction:!1,roomMembes:[],gallery:null,share:null,contact:null,connect:null,joinroom:null,chatusers:{},force:{},wasunhidden:!1,hiddenInParent:!1,hideOptimization:!1,modalShowed:null,modals:[],pinchat:!1,lastroom:null,dontreadreceipts:!1,donotdisturb:!1,voicerecording:!1,deletedrooms:{},pkoindisabled:!1,isCallsActive:null,readreciepts:{},ChatStatuses:{},share:null},getters:{getUser:e=>e.user,getConnection:e=>e.localMatrixStore,getChatById:e=>t=>e.chatsMap[t],hasInputChatEmbedded(e){return!!e.share},getSignedUpUsers:e=>e.signedUpUsers},mutations:{SET_CHAT_STATUSES(e,t){e.ChatStatuses={...e.ChatStatuses,[t.roomId]:{...e.ChatStatuses[t.roomId],...t}}},SET_CHAT_STATUSES_ALL(e,t){e.ChatStatuses=t},SET_CALL(e,t){e.isCallsActive=t},CLEAR_CALL(e){e.isCallsActive=null},SET_CURRENT_PLAYING_VOICE_MESSAGE(e,t){e.currentPlayingVoiceMessage=t},setUser(e,t){e.current_user=t||{}},clearall(e){if(e.contacts={},e.contactsFromMatrix={},e.contactsMap={},e.chats=[],e.prechats=[],e.chatsMap={},e.events={},e.users={},e.typing={},e.icon=null,e.loading=!1,e.online=!0,e.unauthorized=!1,e.signedUpUsers=[],e.current_user={},e.minimized=!1,e.active=!1,e.activeBlock={},e.globalpreloader=!1,e.allnotifications=0,e.pocketteammessages=[],e.readedteammessages={},e.chatsready=!1,e.autohide=!1,e.gallery=null,e.modalShowed=null,e.menu=null,e.pinchat=!1,e.dontreadreceipts=!1,e.lastroom=null,e.voicerecording=!1,e.readreciepts={},e.mobile)return e.active=!1,e.iteraction=!1,void(e.minimized=!1);e.minimized=!0,ae&&(clearTimeout(ae),ae=null)},blockactive(e,t){t.value?s["default"].set(e.activeBlock,t.item,t.value):s["default"].delete(e.activeBlock,t.item,t.value)},globalpreloader:function(e,t){e.globalpreloader=t},icon(e,t){e.icon=t;var r=ne["a"].deep(window,"POCKETNETINSTANCE.mobile.vibration");r&&r.small()},pkoindisabled(e,t){e.pkoindisabled=!(!t||"true"!=t)},wasunhidden(e,t){e.wasunhidden=!0},hiddenInParent(e,t){e.hiddenInParent=t},hideOptimization(e,t){e.hideOptimization=t},pinchat(e,t){e.pinchat=t,localStorage["pinchat"]=!!t||""},dontreadreceipts(e,t){e.dontreadreceipts=t,localStorage["dontreadreceipts"]=!!t||""},SET_LAST_ROOM(e,t){e.lastroom=t?{id:t,time:new Date}:null},active(e,t){if(e.mobile)return e.active=!1,void(e.iteraction=!1);var r=50;t||(r=1e3),ae=ne["a"].slowMade(()=>{if(!t){if(!_.isEmpty(e.activeBlock))return;e.iteraction=!1}e.active=t,se._vm.core.activeChange(e.active),e.active||(e.share=null,delete e.activeBlock.share)},ae,r)},setiteraction(e,t){e.iteraction=t},maximize(e,t){e.minimized=!1},minimize(e,t){e.mobile?e.minimized=!1:(e.minimized&&(e.activeBlock={},e.active=!1,se._vm.core.activeChange(e.active)),e.minimized=!0)},setmodal(e,t){e.modalShowed=t},setPocketnet(e,t){e.pocketnet=t},setMobile(e,t){e.mobile=t},setViewType(e,t){e.viewType=t},setVoiceMessagesEnabled(e,t){e.voiceMessagesEnabled=t},setCallsEnabled(e,t){e.isCallsEnabled=t},ls(e){"undefined"!=typeof localStorage.getItem("pinchat")&&(e.pinchat=!!localStorage.getItem("pinchat")),"undefined"!=typeof localStorage.getItem("dontreadreceipts")&&(e.dontreadreceipts=!!localStorage.getItem("dontreadreceipts"))},init(e){oe.theme(e,localStorage.getItem("theme")||"black")},SEARCH_BY_MESSAGES(e,t){},ALL_NOTIFICATIONS_COUNT(e,t){var r=new Date,n=_.filter(t,e=>{if("invite"===e._selfMembership&&!e.summary.stream){var t=se._vm.core.mtrx.anotherChatUsers(e);if(1==t.length&&se._vm.core.mtrx.blockeduser(t[0].userId))return!1;if(ne["a"].date.addseconds(new Date(e.summary.lastModified),86400)>r)return!0}});e.allnotifications=_.reduce(t,(e,t)=>e+(t.summary.stream?0:t.getUnreadNotificationCount()||0),0)+n.length;var i=ne["a"].deep(se,"_vm.core.external.clbks.ALL_NOTIFICATIONS_COUNT")||{};return _.each(i,(function(t){t(e.allnotifications)})),e.allnotifications},SET_CHATS_READY(e,t){e.chatsready=t},SET_PRECHATS_TO_STORE(e,t){e.prechats=t},SET_CHAT_TO_FORCE(e,t){s["default"].set(e.force,t,!0)},SET_CHATS_TO_STORE(e,t){e.chats=t;var r={};_.each(t,t=>{var n,i,o=null===(n=t.info)||void 0===n||null===(i=n.title)||void 0===i?void 0:i.replace("#","");e.chatsMap[t.roomId]&&!e.force[t.roomId]||s["default"].set(e.chatsMap,t.roomId,t),e.chatsMap[o]&&!e.force[t.roomId]||s["default"].set(e.chatsMap,o,t),r[t.roomId]=t,r[o]=t,s["default"].delete(e.force,t.roomId)}),_.each(e.chatsMap,(function(t,n){r[n]||s["default"].delete(e.chatsMap,n)}))},SET_READ_TO_STORE(e,t){_.each(t,(t,r)=>{(!e.readreciepts[r]&&!t||!e.readreciepts[r]&&t||e.readreciepts[r]&&t&&e.readreciepts[r].ts!=t.ts)&&s["default"].set(e.readreciepts,r,t)})},SET_EVENTS_TO_STORE(e,t){_.each(t,(function(t,r){var n=[];_.each(t.timeline,(function(e){var t=e.event;if(t){var r={event:{content:_.clone(t.content),event_id:t.event_id,origin_server_ts:t.origin_server_ts,room_id:t.room_id,sender:t.sender,state_key:t.state_key,type:t.type},get:()=>e};n.push(r)}})),n.length&&e.events[r]&&e.events[r].timeline&&e.events[r].timeline[0]&&e.events[r].timeline[0].event.event_id==n[0].event.event_id||s["default"].set(e.events,r,{timeline:n})}))},SET_TYPING_TO_STORE(e,t){function r(e){for(var t in e)if(!e[t])return!1;return!0}e.typing[t.room]||(e.typing[t.room]={}),e.typing[t.room][t.name]=t.typing,r(t.typing)},DELETE_ROOM(e,t){s["default"].set(e.deletedrooms,t,!0)},SET_CONTACTS(e,t){var r={};_.each(t,(function(e){r[e.id]=e})),e.contacts=r,se.commit("SET_CONTACTS_MAP")},SET_CHATS_USERS(e,t){_.each(t||{},(function(t,r){e.chatusers[r]&&_.isEqual(e.chatusers[r],t)||s["default"].set(e.chatusers,r,t)}))},SET_CONTACTS_FROM_MATRIX(e,t){var r={};_.each(t,(function(e){ne["a"].getmatrixid(e.id)!=(se._vm.core.user.userinfo&&se._vm.core.user.userinfo.id)&&(r[e.id]=e)})),e.contactsFromMatrix=r,se.commit("SET_CONTACTS_MAP")},SET_CONTACTS_MAP(e){var t={};_.each(e.contacts,(function(e){t[e.id]=e})),_.each(e.contactsFromMatrix,(function(e){t[e.id]=e})),e.contactsMap=t},SET_UNAUTHORIZED(e,t){e.unauthorized=t},SET_USERINFO(e,t){t.info&&(!t.reload&&e.users[t.info.id]||s["default"].set(e.users,t.info.id,t.info))},SET_CURRENT_ROOM(e,t){e.currentRoom=t},CLEAR_USERSINFO(e,t){e.users={}},OPEN_MODAL(e,t){t.one&&_.find(e.modals,e=>e.id==t.id)||e.modals.push(t)},CLOSE_MODAL(e,t){e.modals=_.filter(e.modals,(function(e){return e.id!=t}))},GALLERY(e,t){e.gallery=t||null;var r=null;r=t?ne["a"].deep(window,"window.POCKETNETINSTANCE.mobile.statusbar.gallerybackground"):ne["a"].deep(window,"window.POCKETNETINSTANCE.mobile.statusbar.background"),r&&r()},SHARE(e,t){e.share=t||null,e.mobile||(e.activeBlock.share=!0,e.active=!0,se._vm.core.activeChange(e.active))},CONNECT(e,t){e.connect=t},JOINROOM(e,t){e.joinroom=t},CONTACT(e,t){e.contact=t||null},theme(e,t){oe.theme(e,t)},SET_POCKETTEAMMESSAGES(t,r){t.pocketteammessages=r;var n=localStorage.getItem("readedpocketteammessages");if(n)try{var i=JSON.parse(n);t.readedteammessages=i}catch(e){localStorage.removeItem("readedpocketteammessages"),t.readedteammessages={}}},SET_READEDTEAMMESSAGES(e,t){if(t&&t.length>0){var r={};_.each(t,(function(e){r[e.id]=!0})),e.readedteammessages=r,localStorage.setItem("readedpocketteammessages",JSON.stringify(r))}},SET_VOICERECORDING(e,t){e.voicerecording=t}},actions:{SET_CHAT_MEMBERS({commit:e},t){},TYPING_EVENT({commit:e},t){let r=t.roomId,n=t.name,i={room:r,name:n,typing:t.typing};e("SET_TYPING_TO_STORE",i)},CHAT_MEMBERS({commit:e}){},SHOW_GALLERY_FROMEVENTS({commit:e,dispatch:t},{events:r,event:n}){var i=[],o=0,a=function(e){return!!ne["a"].deep(e,"event.content.info.secrets")};_.each(r,e=>{if("m.image"===e.event.content.msgtype){var t=e.event.content.url;a(e)&&(t=e.event.decryptedImage),i.push({src:t,w:e.event.content.info.w||500,h:e.event.content.info.h||500,eventId:e.event.event_id})}}),i=_.filter(i,(function(e){return e.src})),o=i.map((function(e){return e.eventId})).indexOf(n.event.event_id),t("SHOW_GALLERY",{images:i,index:o})},SHOW_GALLERY({commit:e},{images:t,index:r}){r||(r=0),t||(t=[]);var n=ne["a"].deep(window,"POCKETNETINSTANCE.platform.ui.images");if(n){if(t.length){t=_.map(t,e=>e.src);var i=t[r];n(t,i,null,{removeWhenShare:!0})}}else t.length?e("GALLERY",{images:t,index:r}):e("GALLERY",null)},RELOAD_CHAT_USERS({commit:e},t){return se._vm.core.mtrx.kit.usersInfoForChats(t,!0).then(r=>(e("SET_CHATS_USERS",se._vm.core.mtrx.kit.usersFromChats(t)),Promise.resolve())).catch(e=>Promise.resolve())},FETCH_CHATS({commit:e}){var t=ne["a"].deep(se._vm,"core.mtrx.store.rooms")||{},r=se._vm.core.user.myMatrixId(),n=_.map(t,(function(e){var t,n;const i=e.currentState.getStateEvents("m.room.history_visibility","");-9007199254740991===e.getLastActiveTimestamp()?e.getMember(r)&&(e.summary.lastModified=e.getMember(r).events.member.event.origin_server_ts):e.summary.lastModified=e.getLastActiveTimestamp(),e.summary.info={title:e.name},e.summary.key=e.summary.roomId+":"+e.summary.lastModified,e.summary.stream="world_readable"===(null===i||void 0===i||null===(t=i.event)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.history_visibility),e.summary.miniappchat=null;var o=ne["a"].getminiappid(e.getCanonicalAlias());return o&&window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.apps&&(e.summary.miniappchat=window.POCKETNETINSTANCE.apps.get.installed()[o]||null),e.summary}));return e("SET_CHATS_TO_STORE",n),se._vm.core.mtrx.kit.allchatmembers(t).then(r=>(e("SET_CHATS_USERS",se._vm.core.mtrx.kit.usersFromChats(t)),se._vm.core.mtrx.kit.fillContacts(t)))},FETCH_EVENTS({commit:e}){var t=ne["a"].deep(se._vm,"core.mtrx.store.rooms")||{},r={},n={},i={};_.each(t,(function(e){r[e.roomId]={};var t=[].concat(_.first([].concat(e.timeline).reverse(),50),_.first([].concat(e.currentState.getStateEvents("m.room.member")).reverse(),50)),o=e.currentState.getMembers(),a=e.getLiveTimeline().eventTimelineSet;let s=e.currentState.getStateEvents("m.room.callsEnabled"),c=e.currentState.getStateEvents("m.room.request_calls_access").find(e=>{var t;return se._vm.core.mtrx.me(null===e||void 0===e||null===(t=e.event)||void 0===t?void 0:t.sender)});t=_.filter(t,(e,t)=>!(o.length<=2&&"m.room.power_levels"===e.event.type)&&("m.room.redaction"!==e.event.type&&("m.room.callsEnabled"!==e.event.type&&("m.call.replaces"!==e.event.type&&("m.call.select_answer"!==e.event.type&&("m.call.negotiate"!==e.event.type&&("m.call.candidates"!==e.event.type&&("m.call.asserted_identity"!==e.event.type&&("m.room.encryption"!==e.event.type&&("m.room.request_calls_access"===e.event.type?null===e.event.content.accepted&&(!se._vm.core.mtrx.me(e.event.sender)&&!c):!(e.event.content["m.relates_to"]&&"m.replace"===e.event.content["m.relates_to"]["rel_type"]))))))))))),t=_.sortBy(t,(function(e){return-e.event.origin_server_ts}));var l=null;_.find(t,t=>{var r=e.getReceiptsForEvent(t),n=_.find(r,e=>{var t=se._vm.core.mtrx.me(e.userId);return"m.read"==e.type&&!t});if(n)return l=n,!0}),n[e.roomId]=l?{ts:l.data.ts,ev:_.find(t,e=>e.event.origin_server_ts<l.data.ts)}:null;var d,u,h=t[0];if(h){var f=a.relations.getChildEventsForEvent(h.event.event_id,"m.replace","m.room.message");if(f){var p=f.getLastReplacement();p&&(h=p)}r[e.roomId].timeline=[h]}else r[e.roomId].timeline=[];c?null===(null===c||void 0===c||null===(d=c.event)||void 0===d||null===(u=d.content)||void 0===u?void 0:u.accepted)?i[e.roomId]={roomId:e.roomId,isWaiting:!0}:i[e.roomId]={roomId:e.roomId,isWaiting:!1}:i[e.roomId]={roomId:e.roomId,isWaiting:!1};if(s.length){var v,m,g,y=null===(v=s.find(e=>{var t,r,n;return!se._vm.core.mtrx.me(null===e||void 0===e||null===(t=e.event)||void 0===t?void 0:t.sender)&&(null===e||void 0===e||null===(r=e.event)||void 0===r?void 0:r.sender.split(":")[0].replace("@",""))===(null===e||void 0===e||null===(n=e.event)||void 0===n?void 0:n.state_key)}))||void 0===v||null===(m=v.event)||void 0===m||null===(g=m.content)||void 0===g?void 0:g.enabled;!y&&i[e.roomId]||(i[e.roomId]={roomId:e.roomId,enabled:y})}})),e("SET_EVENTS_TO_STORE",r),e("SET_READ_TO_STORE",n),e("SET_CHAT_STATUSES_ALL",i)}}}),ce=se;function le(e,t){for(var r in t)e[r]=t[r];return e}var de=/[!'()*]/g,ue=function(e){return"%"+e.charCodeAt(0).toString(16)},he=/%2C/g,fe=function(e){return encodeURIComponent(e).replace(de,ue).replace(he,",")};function pe(e){try{return decodeURIComponent(e)}catch(t){0}return e}function ve(t,r,n){void 0===r&&(r={});var i,o=n||ge;try{i=o(t||"")}catch(e){i={}}for(var a in r){var s=r[a];i[a]=Array.isArray(s)?s.map(me):me(s)}return i}var me=function(e){return null==e||"object"===typeof e?e:String(e)};function ge(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var r=e.replace(/\+/g," ").split("="),n=pe(r.shift()),i=r.length>0?pe(r.join("=")):null;void 0===t[n]?t[n]=i:Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]})),t):t}function ye(e){var t=e?Object.keys(e).map((function(t){var r=e[t];if(void 0===r)return"";if(null===r)return fe(t);if(Array.isArray(r)){var n=[];return r.forEach((function(e){void 0!==e&&(null===e?n.push(fe(t)):n.push(fe(t)+"="+fe(e)))})),n.join("&")}return fe(t)+"="+fe(r)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var be=/\/?$/;function _e(t,r,n,i){var o=i&&i.options.stringifyQuery,a=r.query||{};try{a=we(a)}catch(e){}var s={name:r.name||t&&t.name,meta:t&&t.meta||{},path:r.path||"/",hash:r.hash||"",query:a,params:r.params||{},fullPath:ke(r,o),matched:t?Ee(t):[]};return n&&(s.redirectedFrom=ke(n,o)),Object.freeze(s)}function we(e){if(Array.isArray(e))return e.map(we);if(e&&"object"===typeof e){var t={};for(var r in e)t[r]=we(e[r]);return t}return e}var Se=_e(null,{path:"/"});function Ee(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function ke(e,t){var r=e.path,n=e.query;void 0===n&&(n={});var i=e.hash;void 0===i&&(i="");var o=t||ye;return(r||"/")+o(n)+i}function Ie(e,t,r){return t===Se?e===t:!!t&&(e.path&&t.path?e.path.replace(be,"")===t.path.replace(be,"")&&(r||e.hash===t.hash&&Ce(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(r||e.hash===t.hash&&Ce(e.query,t.query)&&Ce(e.params,t.params))))}function Ce(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((function(r,i){var o=e[r],a=n[i];if(a!==r)return!1;var s=t[r];return null==o||null==s?o===s:"object"===typeof o&&"object"===typeof s?Ce(o,s):String(o)===String(s)}))}function Te(e,t){return 0===e.path.replace(be,"/").indexOf(t.path.replace(be,"/"))&&(!t.hash||e.hash===t.hash)&&Re(e.query,t.query)}function Re(e,t){for(var r in t)if(!(r in e))return!1;return!0}function xe(e){for(var t=0;t<e.matched.length;t++){var r=e.matched[t];for(var n in r.instances){var i=r.instances[n],o=r.enteredCbs[n];if(i&&o){delete r.enteredCbs[n];for(var a=0;a<o.length;a++)i._isBeingDestroyed||o[a](i)}}}}var Oe={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var r=t.props,n=t.children,i=t.parent,o=t.data;o.routerView=!0;var a=i.$createElement,s=r.name,c=i.$route,l=i._routerViewCache||(i._routerViewCache={}),d=0,u=!1;while(i&&i._routerRoot!==i){var h=i.$vnode?i.$vnode.data:{};h.routerView&&d++,h.keepAlive&&i._directInactive&&i._inactive&&(u=!0),i=i.$parent}if(o.routerViewDepth=d,u){var f=l[s],p=f&&f.component;return p?(f.configProps&&Me(p,o,f.route,f.configProps),a(p,o,n)):a()}var v=c.matched[d],m=v&&v.components[s];if(!v||!m)return l[s]=null,a();l[s]={component:m},o.registerRouteInstance=function(e,t){var r=v.instances[s];(t&&r!==e||!t&&r===e)&&(v.instances[s]=t)},(o.hook||(o.hook={})).prepatch=function(e,t){v.instances[s]=t.componentInstance},o.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==v.instances[s]&&(v.instances[s]=e.componentInstance),xe(c)};var g=v.props&&v.props[s];return g&&(le(l[s],{route:c,configProps:g}),Me(m,o,c,g)),a(m,o,n)}};function Me(e,t,r,n){var i=t.props=Ae(r,n);if(i){i=t.props=le({},i);var o=t.attrs=t.attrs||{};for(var a in i)e.props&&a in e.props||(o[a]=i[a],delete i[a])}}function Ae(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function Pe(e,t,r){var n=e.charAt(0);if("/"===n)return e;if("?"===n||"#"===n)return t+e;var i=t.split("/");r&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function De(e){var t="",r="",n=e.indexOf("#");n>=0&&(t=e.slice(n),e=e.slice(0,n));var i=e.indexOf("?");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{path:e,query:r,hash:t}}function je(e){return e.replace(/\/(?:\s*\/)+/g,"/")}var Le=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Ne=rt,Ue=Ve,Fe=We,Be=Ge,Ke=tt,qe=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Ve(e,t){var r,n=[],i=0,o=0,a="",s=t&&t.delimiter||"/";while(null!=(r=qe.exec(e))){var c=r[0],l=r[1],d=r.index;if(a+=e.slice(o,d),o=d+c.length,l)a+=l[1];else{var u=e[o],h=r[2],f=r[3],p=r[4],v=r[5],m=r[6],g=r[7];a&&(n.push(a),a="");var y=null!=h&&null!=u&&u!==h,b="+"===m||"*"===m,_="?"===m||"*"===m,w=r[2]||s,S=p||v;n.push({name:f||i++,prefix:h||"",delimiter:w,optional:_,repeat:b,partial:y,asterisk:!!g,pattern:S?Ye(S):g?".*":"[^"+He(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&n.push(a),n}function We(e,t){return Ge(Ve(e,t),t)}function $e(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function ze(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function Ge(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(r[n]=new RegExp("^(?:"+e[n].pattern+")$",Xe(t)));return function(t,n){for(var i="",o=t||{},a=n||{},s=a.pretty?$e:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var d,u=o[l.name];if(null==u){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Le(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(d=s(u[h]),!r[c].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===h?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?ze(u):s(u),!r[c].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');i+=l.prefix+d}}else i+=l}return i}}function He(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Ye(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Je(e,t){return e.keys=t,e}function Xe(e){return e&&e.sensitive?"":"i"}function Ze(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Je(e,t)}function Qe(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(rt(e[i],t,r).source);var o=new RegExp("(?:"+n.join("|")+")",Xe(r));return Je(o,t)}function et(e,t,r){return tt(Ve(e,r),t,r)}function tt(e,t,r){Le(t)||(r=t||r,t=[]),r=r||{};for(var n=r.strict,i=!1!==r.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)o+=He(s);else{var c=He(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+c+l+")*"),l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")",o+=l}}var d=He(r.delimiter||"/"),u=o.slice(-d.length)===d;return n||(o=(u?o.slice(0,-d.length):o)+"(?:"+d+"(?=$))?"),o+=i?"$":n&&u?"":"(?="+d+"|$)",Je(new RegExp("^"+o,Xe(r)),t)}function rt(e,t,r){return Le(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?Ze(e,t):Le(e)?Qe(e,t,r):et(e,t,r)}Ne.parse=Ue,Ne.compile=Fe,Ne.tokensToFunction=Be,Ne.tokensToRegExp=Ke;var nt=Object.create(null);function it(t,r,n){r=r||{};try{var i=nt[t]||(nt[t]=Ne.compile(t));return"string"===typeof r.pathMatch&&(r[0]=r.pathMatch),i(r,{pretty:!0})}catch(e){return""}finally{delete r[0]}}function ot(e,t,r,n){var i="string"===typeof e?{path:e}:e;if(i._normalized)return i;if(i.name){i=le({},e);var o=i.params;return o&&"object"===typeof o&&(i.params=le({},o)),i}if(!i.path&&i.params&&t){i=le({},i),i._normalized=!0;var a=le(le({},t.params),i.params);if(t.name)i.name=t.name,i.params=a;else if(t.matched.length){var s=t.matched[t.matched.length-1].path;i.path=it(s,a,"path "+t.path)}else 0;return i}var c=De(i.path||""),l=t&&t.path||"/",d=c.path?Pe(c.path,l,r||i.append):l,u=ve(c.query,i.query,n&&n.options.parseQuery),h=i.hash||c.hash;return h&&"#"!==h.charAt(0)&&(h="#"+h),{_normalized:!0,path:d,query:u,hash:h}}var at,st=[String,Object],ct=[String,Array],lt=function(){},dt={name:"RouterLink",props:{to:{type:st,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ct,default:"click"}},render:function(e){var t=this,r=this.$router,n=this.$route,i=r.resolve(this.to,n,this.append),o=i.location,a=i.route,s=i.href,c={},l=r.options.linkActiveClass,d=r.options.linkExactActiveClass,u=null==l?"router-link-active":l,h=null==d?"router-link-exact-active":d,f=null==this.activeClass?u:this.activeClass,p=null==this.exactActiveClass?h:this.exactActiveClass,v=a.redirectedFrom?_e(null,ot(a.redirectedFrom),null,r):a;c[p]=Ie(n,v,this.exactPath),c[f]=this.exact||this.exactPath?c[p]:Te(n,v);var m=c[p]?this.ariaCurrentValue:null,g=function(e){ut(e)&&(t.replace?r.replace(o,lt):r.push(o,lt))},y={click:ut};Array.isArray(this.event)?this.event.forEach((function(e){y[e]=g})):y[this.event]=g;var b={class:c},_=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:a,navigate:g,isActive:c[f],isExactActive:c[p]});if(_){if(1===_.length)return _[0];if(_.length>1||!_.length)return 0===_.length?e():e("span",{},_)}if("a"===this.tag)b.on=y,b.attrs={href:s,"aria-current":m};else{var w=ht(this.$slots.default);if(w){w.isStatic=!1;var S=w.data=le({},w.data);for(var E in S.on=S.on||{},S.on){var k=S.on[E];E in y&&(S.on[E]=Array.isArray(k)?k:[k])}for(var I in y)I in S.on?S.on[I].push(y[I]):S.on[I]=g;var C=w.data.attrs=le({},w.data.attrs);C.href=s,C["aria-current"]=m}else b.on=y}return e(this.tag,b,this.$slots.default)}};function ut(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ht(e){if(e)for(var t,r=0;r<e.length;r++){if(t=e[r],"a"===t.tag)return t;if(t.children&&(t=ht(t.children)))return t}}function ft(e){if(!ft.installed||at!==e){ft.installed=!0,at=e;var t=function(e){return void 0!==e},r=function(e,r){var n=e.$options._parentVnode;t(n)&&t(n=n.data)&&t(n=n.registerRouteInstance)&&n(e,r)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Oe),e.component("RouterLink",dt);var n=e.config.optionMergeStrategies;n.beforeRouteEnter=n.beforeRouteLeave=n.beforeRouteUpdate=n.created}}var pt="undefined"!==typeof window;function vt(e,t,r,n,i){var o=t||[],a=r||Object.create(null),s=n||Object.create(null);e.forEach((function(e){mt(o,a,s,e,i)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:a,nameMap:s}}function mt(e,t,r,n,i,o){var a=n.path,s=n.name;var c=n.pathToRegexpOptions||{},l=yt(a,i,c.strict);"boolean"===typeof n.caseSensitive&&(c.sensitive=n.caseSensitive);var d={path:l,regex:gt(l,c),components:n.components||{default:n.component},alias:n.alias?"string"===typeof n.alias?[n.alias]:n.alias:[],instances:{},enteredCbs:{},name:s,parent:i,matchAs:o,redirect:n.redirect,beforeEnter:n.beforeEnter,meta:n.meta||{},props:null==n.props?{}:n.components?n.props:{default:n.props}};if(n.children&&n.children.forEach((function(n){var i=o?je(o+"/"+n.path):void 0;mt(e,t,r,n,d,i)})),t[d.path]||(e.push(d.path),t[d.path]=d),void 0!==n.alias)for(var u=Array.isArray(n.alias)?n.alias:[n.alias],h=0;h<u.length;++h){var f=u[h];0;var p={path:f,children:n.children};mt(e,t,r,p,i,d.path||"/")}s&&(r[s]||(r[s]=d))}function gt(e,t){var r=Ne(e,[],t);return r}function yt(e,t,r){return r||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:je(t.path+"/"+e)}function bt(e,t){var r=vt(e),n=r.pathList,i=r.pathMap,o=r.nameMap;function a(e){vt(e,n,i,o)}function s(e,t){var r="object"!==typeof e?o[e]:void 0;vt([t||e],n,i,o,r),r&&r.alias.length&&vt(r.alias.map((function(e){return{path:e,children:[t]}})),n,i,o,r)}function c(){return n.map((function(e){return i[e]}))}function l(e,r,a){var s=ot(e,r,!1,t),c=s.name;if(c){var l=o[c];if(!l)return h(null,s);var d=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof s.params&&(s.params={}),r&&"object"===typeof r.params)for(var u in r.params)!(u in s.params)&&d.indexOf(u)>-1&&(s.params[u]=r.params[u]);return s.path=it(l.path,s.params,'named route "'+c+'"'),h(l,s,a)}if(s.path){s.params={};for(var f=0;f<n.length;f++){var p=n[f],v=i[p];if(_t(v.regex,s.path,s.params))return h(v,s,a)}}return h(null,s)}function d(e,r){var n=e.redirect,i="function"===typeof n?n(_e(e,r,null,t)):n;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return h(null,r);var a=i,s=a.name,c=a.path,d=r.query,u=r.hash,f=r.params;if(d=a.hasOwnProperty("query")?a.query:d,u=a.hasOwnProperty("hash")?a.hash:u,f=a.hasOwnProperty("params")?a.params:f,s){o[s];return l({_normalized:!0,name:s,query:d,hash:u,params:f},void 0,r)}if(c){var p=wt(c,e),v=it(p,f,'redirect route with path "'+p+'"');return l({_normalized:!0,path:v,query:d,hash:u},void 0,r)}return h(null,r)}function u(e,t,r){var n=it(r,t.params,'aliased route with path "'+r+'"'),i=l({_normalized:!0,path:n});if(i){var o=i.matched,a=o[o.length-1];return t.params=i.params,h(a,t)}return h(null,t)}function h(e,r,n){return e&&e.redirect?d(e,n||r):e&&e.matchAs?u(e,r,e.matchAs):_e(e,r,n,t)}return{match:l,addRoute:s,getRoutes:c,addRoutes:a}}function _t(e,t,r){var n=t.match(e);if(!n)return!1;if(!r)return!0;for(var i=1,o=n.length;i<o;++i){var a=e.keys[i-1];a&&(r[a.name||"pathMatch"]="string"===typeof n[i]?pe(n[i]):n[i])}return!0}function wt(e,t){return Pe(e,t.parent?t.parent.path:"/",!0)}var St=pt&&window.performance&&window.performance.now?window.performance:Date;function Et(){return St.now().toFixed(3)}var kt=Et();function It(){return kt}function Ct(e){return kt=e}var Tt=Object.create(null);function Rt(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),r=le({},window.history.state);return r.key=It(),window.history.replaceState(r,"",t),window.addEventListener("popstate",Mt),function(){window.removeEventListener("popstate",Mt)}}function xt(e,t,r,n){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var o=At(),a=i.call(e,t,r,n?o:null);a&&("function"===typeof a.then?a.then((function(e){Ft(e,o)})).catch((function(e){0})):Ft(a,o))}))}}function Ot(){var e=It();e&&(Tt[e]={x:window.pageXOffset,y:window.pageYOffset})}function Mt(e){Ot(),e.state&&e.state.key&&Ct(e.state.key)}function At(){var e=It();if(e)return Tt[e]}function Pt(e,t){var r=document.documentElement,n=r.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-n.left-t.x,y:i.top-n.top-t.y}}function Dt(e){return Nt(e.x)||Nt(e.y)}function jt(e){return{x:Nt(e.x)?e.x:window.pageXOffset,y:Nt(e.y)?e.y:window.pageYOffset}}function Lt(e){return{x:Nt(e.x)?e.x:0,y:Nt(e.y)?e.y:0}}function Nt(e){return"number"===typeof e}var Ut=/^#\d/;function Ft(e,t){var r="object"===typeof e;if(r&&"string"===typeof e.selector){var n=Ut.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(n){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Lt(i),t=Pt(n,i)}else Dt(e)&&(t=jt(e))}else r&&Dt(e)&&(t=jt(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var Bt=pt&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Kt(t,r){Ot();var n=window.history;try{if(r){var i=le({},n.state);i.key=It(),n.replaceState(i,"",t)}else n.pushState({key:Ct(Et())},"",t)}catch(e){window.location[r?"replace":"assign"](t)}}function qt(e){Kt(e,!0)}var Vt={redirected:2,aborted:4,cancelled:8,duplicated:16};function Wt(e,t){return Ht(e,t,Vt.redirected,'Redirected when going from "'+e.fullPath+'" to "'+Jt(t)+'" via a navigation guard.')}function $t(e,t){var r=Ht(e,t,Vt.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return r.name="NavigationDuplicated",r}function zt(e,t){return Ht(e,t,Vt.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function Gt(e,t){return Ht(e,t,Vt.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function Ht(e,t,r,n){var i=new Error(n);return i._isRouter=!0,i.from=e,i.to=t,i.type=r,i}var Yt=["params","query","hash"];function Jt(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return Yt.forEach((function(r){r in e&&(t[r]=e[r])})),JSON.stringify(t,null,2)}function Xt(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Zt(e,t){return Xt(e)&&e._isRouter&&(null==t||e.type===t)}function Qt(e,t,r){var n=function(i){i>=e.length?r():e[i]?t(e[i],(function(){n(i+1)})):n(i+1)};n(0)}function er(t){return function(r,n,i){var o=!1,a=0,s=null;tr(t,(function(t,r,n,c){if("function"===typeof t&&void 0===t.cid){o=!0,a++;var l,d=or((function(e){ir(e)&&(e=e.default),t.resolved="function"===typeof e?e:at.extend(e),n.components[c]=e,a--,a<=0&&i()})),u=or((function(e){var t="Failed to resolve async component "+c+": "+e;s||(s=Xt(e)?e:new Error(t),i(s))}));try{l=t(d,u)}catch(e){u(e)}if(l)if("function"===typeof l.then)l.then(d,u);else{var h=l.component;h&&"function"===typeof h.then&&h.then(d,u)}}})),o||i()}}function tr(e,t){return rr(e.map((function(e){return Object.keys(e.components).map((function(r){return t(e.components[r],e.instances[r],e,r)}))})))}function rr(e){return Array.prototype.concat.apply([],e)}var nr="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function ir(e){return e.__esModule||nr&&"Module"===e[Symbol.toStringTag]}function or(e){var t=!1;return function(){var r=[],n=arguments.length;while(n--)r[n]=arguments[n];if(!t)return t=!0,e.apply(this,r)}}var ar=function(e,t){this.router=e,this.base=sr(t),this.current=Se,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function sr(e){if(!e)if(pt){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function cr(e,t){var r,n=Math.max(e.length,t.length);for(r=0;r<n;r++)if(e[r]!==t[r])break;return{updated:t.slice(0,r),activated:t.slice(r),deactivated:e.slice(r)}}function lr(e,t,r,n){var i=tr(e,(function(e,n,i,o){var a=dr(e,t);if(a)return Array.isArray(a)?a.map((function(e){return r(e,n,i,o)})):r(a,n,i,o)}));return rr(n?i.reverse():i)}function dr(e,t){return"function"!==typeof e&&(e=at.extend(e)),e.options[t]}function ur(e){return lr(e,"beforeRouteLeave",fr,!0)}function hr(e){return lr(e,"beforeRouteUpdate",fr)}function fr(e,t){if(t)return function(){return e.apply(t,arguments)}}function pr(e){return lr(e,"beforeRouteEnter",(function(e,t,r,n){return vr(e,r,n)}))}function vr(e,t,r){return function(n,i,o){return e(n,i,(function(e){"function"===typeof e&&(t.enteredCbs[r]||(t.enteredCbs[r]=[]),t.enteredCbs[r].push(e)),o(e)}))}}ar.prototype.listen=function(e){this.cb=e},ar.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},ar.prototype.onError=function(e){this.errorCbs.push(e)},ar.prototype.transitionTo=function(t,r,n){var i,o=this;try{i=this.router.match(t,this.current)}catch(e){throw this.errorCbs.forEach((function(r){r(e)})),e}var a=this.current;this.confirmTransition(i,(function(){o.updateRoute(i),r&&r(i),o.ensureURL(),o.router.afterHooks.forEach((function(e){e&&e(i,a)})),o.ready||(o.ready=!0,o.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!o.ready&&(Zt(e,Vt.redirected)&&a===Se||(o.ready=!0,o.readyErrorCbs.forEach((function(t){t(e)}))))}))},ar.prototype.confirmTransition=function(t,r,n){var i=this,o=this.current;this.pending=t;var a=function(e){!Zt(e)&&Xt(e)&&(i.errorCbs.length?i.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},s=t.matched.length-1,c=o.matched.length-1;if(Ie(t,o)&&s===c&&t.matched[s]===o.matched[c])return this.ensureURL(),t.hash&&xt(this.router,o,t,!1),a($t(o,t));var l=cr(this.current.matched,t.matched),d=l.updated,u=l.deactivated,h=l.activated,f=[].concat(ur(u),this.router.beforeHooks,hr(d),h.map((function(e){return e.beforeEnter})),er(h)),p=function(r,n){if(i.pending!==t)return a(zt(o,t));try{r(t,o,(function(e){!1===e?(i.ensureURL(!0),a(Gt(o,t))):Xt(e)?(i.ensureURL(!0),a(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(a(Wt(o,t)),"object"===typeof e&&e.replace?i.replace(e):i.push(e)):n(e)}))}catch(e){a(e)}};Qt(f,p,(function(){var e=pr(h),n=e.concat(i.router.resolveHooks);Qt(n,p,(function(){if(i.pending!==t)return a(zt(o,t));i.pending=null,r(t),i.router.app&&i.router.app.$nextTick((function(){xe(t)}))}))}))},ar.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},ar.prototype.setupListeners=function(){},ar.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=Se,this.pending=null};var mr=function(e){function t(t,r){e.call(this,t,r),this._startLocation=gr(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,r=t.options.scrollBehavior,n=Bt&&r;n&&this.listeners.push(Rt());var i=function(){var r=e.current,i=gr(e.base);e.current===Se&&i===e._startLocation||e.transitionTo(i,(function(e){n&&xt(t,e,r,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,r){var n=this,i=this,o=i.current;this.transitionTo(e,(function(e){Kt(je(n.base+e.fullPath)),xt(n.router,e,o,!1),t&&t(e)}),r)},t.prototype.replace=function(e,t,r){var n=this,i=this,o=i.current;this.transitionTo(e,(function(e){qt(je(n.base+e.fullPath)),xt(n.router,e,o,!1),t&&t(e)}),r)},t.prototype.ensureURL=function(e){if(gr(this.base)!==this.current.fullPath){var t=je(this.base+this.current.fullPath);e?Kt(t):qt(t)}},t.prototype.getCurrentLocation=function(){return gr(this.base)},t}(ar);function gr(e){var t=window.location.pathname,r=t.toLowerCase(),n=e.toLowerCase();return!e||r!==n&&0!==r.indexOf(je(n+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var yr=function(e){function t(t,r,n){e.call(this,t,r),n&&br(this.base)||_r()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,r=t.options.scrollBehavior,n=Bt&&r;n&&this.listeners.push(Rt());var i=function(){var t=e.current;_r()&&e.transitionTo(wr(),(function(r){n&&xt(e.router,r,t,!0),Bt||kr(r.fullPath)}))},o=Bt?"popstate":"hashchange";window.addEventListener(o,i),this.listeners.push((function(){window.removeEventListener(o,i)}))}},t.prototype.push=function(e,t,r){var n=this,i=this,o=i.current;this.transitionTo(e,(function(e){Er(e.fullPath),xt(n.router,e,o,!1),t&&t(e)}),r)},t.prototype.replace=function(e,t,r){var n=this,i=this,o=i.current;this.transitionTo(e,(function(e){kr(e.fullPath),xt(n.router,e,o,!1),t&&t(e)}),r)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;wr()!==t&&(e?Er(t):kr(t))},t.prototype.getCurrentLocation=function(){return wr()},t}(ar);function br(e){var t=gr(e);if(!/^\/#/.test(t))return window.location.replace(je(e+"/#"+t)),!0}function _r(){var e=wr();return"/"===e.charAt(0)||(kr("/"+e),!1)}function wr(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function Sr(e){var t=window.location.href,r=t.indexOf("#"),n=r>=0?t.slice(0,r):t;return n+"#"+e}function Er(e){Bt?Kt(Sr(e)):window.location.hash=e}function kr(e){Bt?qt(Sr(e)):window.location.replace(Sr(e))}var Ir=function(e){function t(t,r){e.call(this,t,r),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,r){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index+1).concat(e),n.index++,t&&t(e)}),r)},t.prototype.replace=function(e,t,r){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index).concat(e),t&&t(e)}),r)},t.prototype.go=function(e){var t=this,r=this.index+e;if(!(r<0||r>=this.stack.length)){var n=this.stack[r];this.confirmTransition(n,(function(){var e=t.current;t.index=r,t.updateRoute(n),t.router.afterHooks.forEach((function(t){t&&t(n,e)}))}),(function(e){Zt(e,Vt.duplicated)&&(t.index=r)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(ar),Cr=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=bt(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Bt&&!1!==e.fallback,this.fallback&&(t="hash"),pt||(t="abstract"),this.mode=t,t){case"history":this.history=new mr(this,e.base);break;case"hash":this.history=new yr(this,e.base,this.fallback);break;case"abstract":this.history=new Ir(this,e.base);break;default:0}},Tr={currentRoute:{configurable:!0}};Cr.prototype.match=function(e,t,r){return this.matcher.match(e,t,r)},Tr.currentRoute.get=function(){return this.history&&this.history.current},Cr.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var r=t.apps.indexOf(e);r>-1&&t.apps.splice(r,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var r=this.history;if(r instanceof mr||r instanceof yr){var n=function(e){var n=r.current,i=t.options.scrollBehavior,o=Bt&&i;o&&"fullPath"in e&&xt(t,e,n,!1)},i=function(e){r.setupListeners(),n(e)};r.transitionTo(r.getCurrentLocation(),i,i)}r.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Cr.prototype.beforeEach=function(e){return xr(this.beforeHooks,e)},Cr.prototype.beforeResolve=function(e){return xr(this.resolveHooks,e)},Cr.prototype.afterEach=function(e){return xr(this.afterHooks,e)},Cr.prototype.onReady=function(e,t){this.history.onReady(e,t)},Cr.prototype.onError=function(e){this.history.onError(e)},Cr.prototype.push=function(e,t,r){var n=this;if(!t&&!r&&"undefined"!==typeof Promise)return new Promise((function(t,r){n.history.push(e,t,r)}));this.history.push(e,t,r)},Cr.prototype.replace=function(e,t,r){var n=this;if(!t&&!r&&"undefined"!==typeof Promise)return new Promise((function(t,r){n.history.replace(e,t,r)}));this.history.replace(e,t,r)},Cr.prototype.go=function(e){this.history.go(e)},Cr.prototype.back=function(){this.go(-1)},Cr.prototype.forward=function(){this.go(1)},Cr.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Cr.prototype.resolve=function(e,t,r){t=t||this.history.current;var n=ot(e,t,r,this),i=this.match(n,t),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=Or(a,o,this.mode);return{location:n,route:i,href:s,normalizedTo:n,resolved:i}},Cr.prototype.getRoutes=function(){return this.matcher.getRoutes()},Cr.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==Se&&this.history.transitionTo(this.history.getCurrentLocation())},Cr.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==Se&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Cr.prototype,Tr);var Rr=Cr;function xr(e,t){return e.push(t),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Or(e,t,r){var n="hash"===r?"#"+t:t;return e?je(e+"/"+n):n}Cr.install=ft,Cr.version="3.6.5",Cr.isNavigationFailure=Zt,Cr.NavigationFailureType=Vt,Cr.START_LOCATION=Se,pt&&window.Vue&&window.Vue.use(Cr);s["default"].use(Rr);const Mr=new Rr({routes:[{path:"/contacts",name:"contacts",component:()=>Promise.all([n.e(0),n.e(25)]).then(n.bind(null,"bfc0"))},{path:"/contact",name:"contact",component:()=>n.e(15).then(n.bind(null,"4fe8"))},{path:"/chats",name:"chats",component:()=>Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,"9a41")),children:[{path:"/chat",name:"chat",component:()=>Promise.all([n.e(3),n.e(4),n.e(0),n.e(2),n.e(11)]).then(n.bind(null,"ee79"))},{path:"",name:"chatPrompt",component:()=>n.e(28).then(n.bind(null,"2e2a"))}]},{path:"/publicPreview",name:"publicPreview",component:()=>n.e(23).then(n.bind(null,"5500"))},{path:"/chatSettings",name:"chatSettings",component:()=>n.e(19).then(n.bind(null,"9394"))},{path:"/chatInfo",name:"chatInfo",component:()=>Promise.all([n.e(3),n.e(0),n.e(2),n.e(6)]).then(n.bind(null,"266d"))},{path:"/teamRoom",name:"teamRoom",component:()=>n.e(29).then(n.bind(null,"4779"))},{path:"/settings",name:"settings",component:()=>n.e(21).then(n.bind(null,"8a21"))},{path:"/invite",name:"invite",component:()=>n.e(20).then(n.bind(null,"bd26"))}],mode:document.getElementById("automomous")?"history":"abstract"});var Ar=Mr,Pr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("transition",{attrs:{name:"fade"}},[t("div",{class:[e.pocketnet?"bin":"",e.pocketnet?"":"bout",e.mclass||"",e.minimized?"minimized":"",e.active?"active":"",e.mobile?"mobile":""],attrs:{id:"modal"}},[t("div",{staticClass:"modal-backdrop",on:{click:e.close}},[t("div",{staticClass:"closecsscross"})]),t("div",{staticClass:"modal-wrapper"},[t("swipable",{attrs:{directions:e.directions},on:{end:e.endswipe},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.scrolling,expression:"scrolling"}],class:"modal "+("absoluteContent"==e.mclass?"":"customscroll"),attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},[t("div",{staticClass:"modal-header"},[t("div",{staticClass:"headerWrapper"},[e._t("header")],2),t("div",{staticClass:"modal-close",on:{click:e.close}},[t("i",{staticClass:"fas fa-times"})])]),t("div",{staticClass:"modal-body",attrs:{id:"modalDescription"}},[e.module||e.path?e._e():e._t("body",null,{scroll:e.scroll}),e.module?t(e.module,e._g(e._b({tag:"component",attrs:{wnd:!0,scroll:e.scroll},on:{blockclose:e.setblockclose,close:e.close}},"component",e.data||{},!1),e.events)):e._e()],2),e.displayFooter?t("div",{staticClass:"modal-footer"}):e._e()])]},proxy:!0}],null,!0)})],1)])])},Dr=[],jr={name:"modal",props:{displayFooter:{default:!0,type:Boolean},cantclose:Boolean,module:String,path:String,data:{type:Object,default:()=>({})},events:{type:Object,default:()=>({})},mclass:String,fromtop:Boolean},data:function(){return{loading:!1,scroll:0,blockclose:null,blockTouch:!1}},mounted(){},destroyed(){},watch:{},components:{},computed:Object(A["d"])({auth:e=>e.auth,pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:e=>e.active,mobile:e=>e.mobile,directions:function(){return{[this.fromtop?"top":"bottom"]:{distance:100,direction:this.fromtop?"top":"bottom",constraints:e=>this.scroll<=0&&!this.blockTouch}}}}),methods:{endswipe:function(e){this.close()},close:function(){this.blockclose?this.vm.$dialog.confirm(this.vm.$t(this.blockclose),{okText:"Yes, close",cancelText:"No"}).then(e=>{this.setblockclose(null),this.$emit("close")}).catch(e=>{}):this.$emit("close")},closeiftop:function(e){},swipeHandler:function(e){},scrolling:function(e,t){var r=e.target||e.srcElement;this.scroll=r.scrollTop,this.scroll>0&&(this.blockTouch=!0,setTimeout(()=>{this.blockTouch=!1},500))},setblockclose:function(e){this.blockclose=e},moving:function(e,t){}}},Lr=jr;function Nr(e){var t=n("8976");t.__inject__&&t.__inject__(e)}var Ur=Object(I["a"])(Lr,Pr,Dr,!1,Nr,null,null,!0),Fr=Ur.exports,Br=n("3441"),Kr=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.startHandler,expression:"startHandler",arg:"start"},{name:"touch",rawName:"v-touch:moving",value:e.movingHandler,expression:"movingHandler",arg:"moving"},{name:"touch",rawName:"v-touch:end",value:e.endHandler,expression:"endHandler",arg:"end"}],staticClass:"swipable",style:e.styles},[e._t("default")],2)},qr=[],Vr=function(e,t){return"top"==e||"bottom"==e?"y":"left"==e||"right"==e?"x":void 0},Wr=function(e){var t=e[0];return{x:t.pageX||t.clientX,y:t.pageY||t.clientY}},$r=function(e,t){var r=t.x-e.x,n=t.y-e.y;if(!r&&!n)return null;var i=Math.abs(r)>Math.abs(n);return i?r>0?{dir:"right",distance:r}:{dir:"left",distance:-r}:n>0?{dir:"bottom",distance:n}:{dir:"top",distance:-n}},zr={name:"swipable",props:{directions:{type:Object,default:()=>({})}},data:function(){return{needclear:!1,mainDirection:null,startPoint:{},ms:!1,successSwipe:!1,styles:{},lastDir:null}},computed:Object(A["d"])({auth:e=>e.auth,throttle:function(){return ne["a"].isios()?0:50},transitionstr:function(){return this.throttle?this.throttle+"ms linear":"none"}}),methods:{apply:function(e,t){if(this.directions){var r=this.directions[e];r&&r.clbk&&r.clbk(t,r)}},set:function(e,t){var r=Vr(e);"top"!=e&&"left"!=e||(t=-t),t||(t=0),t=t.toFixed(0);var n={};"x"==r&&(n["transform"]="translate3d("+t+"px, 0, 0)"),"y"==r&&(n["transform"]="translate3d(0, "+t+"px, 0)"),this.ms||(n["-moz-transition"]=this.transitionstr,n["-o-transition"]=this.transitionstr,n["-webkit-transition"]=this.transitionstr,n["transition"]=this.transitionstr,n["-webkit-overflow-scrolling"]="touch"),this.apply(e,t),_.each(n,(e,t)=>{this.$set(this.styles,t,e)}),this.ms=!0,this.needclear=!0},clear:function(){this.needclear&&(this.styles={transform:"","-webkit-overflow-scrolling":"","-moz-transition":this.transitionstr,"-o-transition":this.transitionstr,"-webkit-transition":this.transitionstr,transition:this.transitionstr},setTimeout(()=>{this.styles={transform:"","-webkit-overflow-scrolling":"","-moz-transition":"","-o-transition":"","-webkit-transition":"",transition:""}},100)),_.each(this.directions,e=>{this.apply(e.direction,0)}),this.ms=!1,this.needclear=!1,this.successSwipe=!1,this.lastDir=null,this.mainDirection=null,this.startPoint={},this.$emit("clear")},stopEvent:function(e){return!1!==e.cancelable&&e.changedTouches.length>1&&(e.stopPropagation(),e.preventDefault()),!1},swipeStatus:function(e,t,r,n){if(this.directions){if(this.mainDirection&&this.mainDirection.direction!=r&&"move"==t&&(t="cancel",r=this.mainDirection.direction),"cancel"==t||"end"==t)return this.mainDirection&&"end"==t&&this.mainDirection.direction&&(!this.mainDirection.distance||this.mainDirection.distance<n)&&this.$emit("end",r),void this.clear();if(r&&this.directions[r]){var i=this.directions[r];return i.constraints&&!i.constraints(e)||i.disabled?(this.mainDirection&&(this.mainDirection=null,this.clear()),this.stopEvent(e)):("start"==t&&(this.mainDirection=null),"move"==t?(n>(i.trueshold||30)&&(this.mainDirection=i,this.set(this.mainDirection.direction,n)),this.stopEvent(e),!0):void 0)}}},validateDefaultEvent:function(e){var t=!1,r=!1,n=!1,i=e.path;return!e.path&&e.composedPath&&(i=e.composedPath()),!i||(_.find(i,e=>{if(t=this.$el==e,r=e.classList&&e.classList.contains("swipable")&&this.$el!=e,n=e.classList&&e.classList.contains("notswipable"),t||r||n)return!0}),!(!t||n))},movingHandler:function(e){if(this.validateDefaultEvent(e)&&e.touches&&e.touches.length){var t="move",r=Wr(e.touches),n=$r(this.startPoint,r);this.lastDir=n,n&&this.swipeStatus(e,t,n.dir,n.distance)}},startHandler:function(e){if(this.validateDefaultEvent(e)&&e.touches&&e.touches.length){var t="start";this.startPoint=Wr(e.touches),this.swipeStatus(e,t),this.$emit("starttouch")}},endHandler:function(e){if(this.validateDefaultEvent(e)){var t="end";this.lastDir&&(this.swipeStatus(e,t,this.lastDir.dir,this.lastDir.distance),this.$emit("endtouch"))}}}},Gr=zr;function Hr(e){var t=n("45cf");t.__inject__&&t.__inject__(e)}var Yr=Object(I["a"])(Gr,Kr,qr,!1,Hr,"0efbaa68",null,!0),Jr=Yr.exports,Xr=n("7a1f"),Zr={name:"TextareaAutosize",props:{value:{type:[String,Number],default:""},autosize:{type:Boolean,default:!0},minHeight:{type:[Number],default:null},maxHeight:{type:[Number],default:null},important:{type:[Boolean,Array],default:!1}},data:function(){return{val:null,maxHeightScroll:!1,height:"auto"}},computed:{computedStyles:function(){return this.autosize?{resize:this.isResizeImportant?"none !important":"none",height:this.height,overflow:this.maxHeightScroll?"auto":this.isOverflowImportant?"hidden !important":"hidden"}:{}},isResizeImportant:function(){var e=this.important;return!0===e||Array.isArray(e)&&e.includes("resize")},isOverflowImportant:function(){var e=this.important;return!0===e||Array.isArray(e)&&e.includes("overflow")},isHeightImportant:function(){var e=this.important;return!0===e||Array.isArray(e)&&e.includes("height")}},watch:{value:function(e){this.val=e},val:function(e){this.$nextTick(this.resize),this.$emit("input",e)},minHeight:function(){this.$nextTick(this.resize)},maxHeight:function(){this.$nextTick(this.resize)},autosize:function(e){e&&this.resize()}},methods:{resize:function(){var e=this,t=this.isHeightImportant?"important":"";return this.height="auto".concat(t?" !important":""),this.$nextTick((function(){var r=e.$el.scrollHeight+1;e.minHeight&&(r=r<e.minHeight?e.minHeight:r),e.maxHeight&&(r>e.maxHeight?(r=e.maxHeight,e.maxHeightScroll=!0):e.maxHeightScroll=!1);var n=r+"px";e.height="".concat(n).concat(t?" !important":"")})),this}},created:function(){this.val=this.value},mounted:function(){this.resize()}};function Qr(e,t,r,n,i,o,a,s,c,l){"boolean"!==typeof a&&(c=s,s=a,a=!1);var d,u="function"===typeof r?r.options:r;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),n&&(u._scopeId=n),o?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=a?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){var h=u.render;u.render=function(e,t){return d.call(t),h(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,d):[d]}return r}var en=Qr;const tn=Zr;var rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],style:e.computedStyles,domProps:{value:e.val},on:{focus:e.resize,input:function(t){t.target.composing||(e.val=t.target.value)}}})},nn=[];const on=void 0,an=void 0,sn=void 0,cn=!1;var ln=en({render:rn,staticRenderFns:nn},on,tn,an,cn,sn,void 0,void 0),dn="1.1.1",un=function(e){e.component("TextareaAutosize",ln)},hn={install:un,version:dn};"undefined"!==typeof window&&window.Vue&&window.Vue.use(hn);var fn=hn,pn=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],vn=["dateStyle","timeStyle","calendar","localeMatcher","hour12","hourCycle","timeZone","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];
/*!
 * vue-i18n v8.28.2 
 * (c) 2022 kazuya kawaguchi
 * Released under the MIT License.
 */function mn(e,t){"undefined"!==typeof console&&(console.warn("[vue-i18n] "+e),t&&console.warn(t.stack))}function gn(e,t){"undefined"!==typeof console&&(console.error("[vue-i18n] "+e),t&&console.error(t.stack))}var yn=Array.isArray;function bn(e){return null!==e&&"object"===typeof e}function _n(e){return"boolean"===typeof e}function wn(e){return"string"===typeof e}var Sn=Object.prototype.toString,En="[object Object]";function kn(e){return Sn.call(e)===En}function In(e){return null===e||void 0===e}function Cn(e){return"function"===typeof e}function Tn(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=null,n=null;return 1===e.length?bn(e[0])||yn(e[0])?n=e[0]:"string"===typeof e[0]&&(r=e[0]):2===e.length&&("string"===typeof e[0]&&(r=e[0]),(bn(e[1])||yn(e[1]))&&(n=e[1])),{locale:r,params:n}}function Rn(e){return JSON.parse(JSON.stringify(e))}function xn(e,t){if(e.delete(t))return e}function On(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}function Mn(e,t){return!!~e.indexOf(t)}var An=Object.prototype.hasOwnProperty;function Pn(e,t){return An.call(e,t)}function Dn(e){for(var t=arguments,r=Object(e),n=1;n<arguments.length;n++){var i=t[n];if(void 0!==i&&null!==i){var o=void 0;for(o in i)Pn(i,o)&&(bn(i[o])?r[o]=Dn(r[o],i[o]):r[o]=i[o])}}return r}function jn(t,r){if(t===r)return!0;var n=bn(t),i=bn(r);if(!n||!i)return!n&&!i&&String(t)===String(r);try{var o=yn(t),a=yn(r);if(o&&a)return t.length===r.length&&t.every((function(e,t){return jn(e,r[t])}));if(o||a)return!1;var s=Object.keys(t),c=Object.keys(r);return s.length===c.length&&s.every((function(e){return jn(t[e],r[e])}))}catch(e){return!1}}function Ln(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Nn(e){return null!=e&&Object.keys(e).forEach((function(t){"string"==typeof e[t]&&(e[t]=Ln(e[t]))})),e}function Un(e){e.prototype.hasOwnProperty("$i18n")||Object.defineProperty(e.prototype,"$i18n",{get:function(){return this._i18n}}),e.prototype.$t=function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];var n=this.$i18n;return n._t.apply(n,[e,n.locale,n._getMessages(),this].concat(t))},e.prototype.$tc=function(e,t){var r=[],n=arguments.length-2;while(n-- >0)r[n]=arguments[n+2];var i=this.$i18n;return i._tc.apply(i,[e,i.locale,i._getMessages(),this,t].concat(r))},e.prototype.$te=function(e,t){var r=this.$i18n;return r._te(e,r.locale,r._getMessages(),t)},e.prototype.$d=function(e){var t,r=[],n=arguments.length-1;while(n-- >0)r[n]=arguments[n+1];return(t=this.$i18n).d.apply(t,[e].concat(r))},e.prototype.$n=function(e){var t,r=[],n=arguments.length-1;while(n-- >0)r[n]=arguments[n+1];return(t=this.$i18n).n.apply(t,[e].concat(r))}}function Fn(t){function r(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return void 0===t&&(t=!1),t?{mounted:r}:{beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18nBridge||t.__i18n?{}:null),t.i18n)if(t.i18n instanceof Ni){if(t.__i18nBridge||t.__i18n)try{var r=t.i18n&&t.i18n.messages?t.i18n.messages:{},n=t.__i18nBridge||t.__i18n;n.forEach((function(e){r=Dn(r,JSON.parse(e))})),Object.keys(r).forEach((function(e){t.i18n.mergeLocaleMessage(e,r[e])}))}catch(e){0}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(kn(t.i18n)){var i=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Ni?this.$root.$i18n:null;if(i&&(t.i18n.root=this.$root,t.i18n.formatter=i.formatter,t.i18n.fallbackLocale=i.fallbackLocale,t.i18n.formatFallbackMessages=i.formatFallbackMessages,t.i18n.silentTranslationWarn=i.silentTranslationWarn,t.i18n.silentFallbackWarn=i.silentFallbackWarn,t.i18n.pluralizationRules=i.pluralizationRules,t.i18n.preserveDirectiveContent=i.preserveDirectiveContent),t.__i18nBridge||t.__i18n)try{var o=t.i18n&&t.i18n.messages?t.i18n.messages:{},a=t.__i18nBridge||t.__i18n;a.forEach((function(e){o=Dn(o,JSON.parse(e))})),t.i18n.messages=o}catch(e){0}var s=t.i18n,c=s.sharedMessages;c&&kn(c)&&(t.i18n.messages=Dn(t.i18n.messages,c)),this._i18n=new Ni(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),i&&i.onComponentInstanceCreated(this._i18n)}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Ni?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof Ni&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var e=this.$options;e.i18n=e.i18n||(e.__i18nBridge||e.__i18n?{}:null),e.i18n?(e.i18n instanceof Ni||kn(e.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Ni||e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof Ni)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:r,beforeDestroy:function(){if(this._i18n){var e=this;this.$nextTick((function(){e._subscribing&&(e._i18n.unsubscribeDataChanging(e),delete e._subscribing),e._i18nWatcher&&(e._i18nWatcher(),e._i18n.destroyVM(),delete e._i18nWatcher),e._localeWatcher&&(e._localeWatcher(),delete e._localeWatcher)}))}}}}var Bn={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(e,t){var r=t.data,n=t.parent,i=t.props,o=t.slots,a=n.$i18n;if(a){var s=i.path,c=i.locale,l=i.places,d=o(),u=a.i(s,c,Kn(d)||l?qn(d.default,l):d),h=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return h?e(h,r,u):u}}};function Kn(e){var t;for(t in e)if("default"!==t)return!1;return Boolean(t)}function qn(e,t){var r=t?Vn(t):{};if(!e)return r;e=e.filter((function(e){return e.tag||""!==e.text.trim()}));var n=e.every(zn);return e.reduce(n?Wn:$n,r)}function Vn(e){return Array.isArray(e)?e.reduce($n,{}):Object.assign({},e)}function Wn(e,t){return t.data&&t.data.attrs&&t.data.attrs.place&&(e[t.data.attrs.place]=t),e}function $n(e,t,r){return e[r]=t,e}function zn(e){return Boolean(e.data&&e.data.attrs&&e.data.attrs.place)}var Gn,Hn={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(e,t){var r=t.props,n=t.parent,i=t.data,o=n.$i18n;if(!o)return null;var a=null,s=null;wn(r.format)?a=r.format:bn(r.format)&&(r.format.key&&(a=r.format.key),s=Object.keys(r.format).reduce((function(e,t){var n;return Mn(pn,t)?Object.assign({},e,(n={},n[t]=r.format[t],n)):e}),null));var c=r.locale||o.locale,l=o._ntp(r.value,c,a,s),d=l.map((function(e,t){var r,n=i.scopedSlots&&i.scopedSlots[e.type];return n?n((r={},r[e.type]=e.value,r.index=t,r.parts=l,r)):e.value})),u=r.tag&&!0!==r.tag||!1===r.tag?r.tag:"span";return u?e(u,{attrs:i.attrs,class:i["class"],staticClass:i.staticClass},d):d}};function Yn(e,t,r){Zn(e,r)&&ei(e,t,r)}function Jn(e,t,r,n){if(Zn(e,r)){var i=r.context.$i18n;Qn(e,r)&&jn(t.value,t.oldValue)&&jn(e._localeMessage,i.getLocaleMessage(i.locale))||ei(e,t,r)}}function Xn(e,t,r,n){var i=r.context;if(i){var o=r.context.$i18n||{};t.modifiers.preserve||o.preserveDirectiveContent||(e.textContent=""),e._vt=void 0,delete e["_vt"],e._locale=void 0,delete e["_locale"],e._localeMessage=void 0,delete e["_localeMessage"]}else mn("Vue instance does not exists in VNode context")}function Zn(e,t){var r=t.context;return r?!!r.$i18n||(mn("VueI18n instance does not exists in Vue instance"),!1):(mn("Vue instance does not exists in VNode context"),!1)}function Qn(e,t){var r=t.context;return e._locale===r.$i18n.locale}function ei(e,t,r){var n,i,o=t.value,a=ti(o),s=a.path,c=a.locale,l=a.args,d=a.choice;if(s||c||l)if(s){var u=r.context;e._vt=e.textContent=null!=d?(n=u.$i18n).tc.apply(n,[s,d].concat(ri(c,l))):(i=u.$i18n).t.apply(i,[s].concat(ri(c,l))),e._locale=u.$i18n.locale,e._localeMessage=u.$i18n.getLocaleMessage(u.$i18n.locale)}else mn("`path` is required in v-t directive");else mn("value type not supported")}function ti(e){var t,r,n,i;return wn(e)?t=e:kn(e)&&(t=e.path,r=e.locale,n=e.args,i=e.choice),{path:t,locale:r,args:n,choice:i}}function ri(e,t){var r=[];return e&&r.push(e),t&&(Array.isArray(t)||kn(t))&&r.push(t),r}function ni(e,t){void 0===t&&(t={bridge:!1}),ni.installed=!0,Gn=e;Gn.version&&Number(Gn.version.split(".")[0]);Un(Gn),Gn.mixin(Fn(t.bridge)),Gn.directive("t",{bind:Yn,update:Jn,unbind:Xn}),Gn.component(Bn.name,Bn),Gn.component(Hn.name,Hn);var r=Gn.config.optionMergeStrategies;r.i18n=function(e,t){return void 0===t?e:t}}var ii=function(){this._caches=Object.create(null)};ii.prototype.interpolate=function(e,t){if(!t)return[e];var r=this._caches[e];return r||(r=si(e),this._caches[e]=r),ci(r,t)};var oi=/^(?:\d)+/,ai=/^(?:\w)+/;function si(e){var t=[],r=0,n="";while(r<e.length){var i=e[r++];if("{"===i){n&&t.push({type:"text",value:n}),n="";var o="";i=e[r++];while(void 0!==i&&"}"!==i)o+=i,i=e[r++];var a="}"===i,s=oi.test(o)?"list":a&&ai.test(o)?"named":"unknown";t.push({value:o,type:s})}else"%"===i?"{"!==e[r]&&(n+=i):n+=i}return n&&t.push({type:"text",value:n}),t}function ci(e,t){var r=[],n=0,i=Array.isArray(t)?"list":bn(t)?"named":"unknown";if("unknown"===i)return r;while(n<e.length){var o=e[n];switch(o.type){case"text":r.push(o.value);break;case"list":r.push(t[parseInt(o.value,10)]);break;case"named":"named"===i&&r.push(t[o.value]);break;case"unknown":0;break}n++}return r}var li=0,di=1,ui=2,hi=3,fi=0,pi=1,vi=2,mi=3,gi=4,yi=5,bi=6,_i=7,wi=8,Si=[];Si[fi]={ws:[fi],ident:[mi,li],"[":[gi],eof:[_i]},Si[pi]={ws:[pi],".":[vi],"[":[gi],eof:[_i]},Si[vi]={ws:[vi],ident:[mi,li],0:[mi,li],number:[mi,li]},Si[mi]={ident:[mi,li],0:[mi,li],number:[mi,li],ws:[pi,di],".":[vi,di],"[":[gi,di],eof:[_i,di]},Si[gi]={"'":[yi,li],'"':[bi,li],"[":[gi,ui],"]":[pi,hi],eof:wi,else:[gi,li]},Si[yi]={"'":[gi,li],eof:wi,else:[yi,li]},Si[bi]={'"':[gi,li],eof:wi,else:[bi,li]};var Ei=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function ki(e){return Ei.test(e)}function Ii(e){var t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t!==r||34!==t&&39!==t?e:e.slice(1,-1)}function Ci(e){if(void 0===e||null===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function Ti(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(ki(t)?Ii(t):"*"+t)}function Ri(e){var t,r,n,i,o,a,s,c=[],l=-1,d=fi,u=0,h=[];function f(){var t=e[l+1];if(d===yi&&"'"===t||d===bi&&'"'===t)return l++,n="\\"+t,h[li](),!0}h[di]=function(){void 0!==r&&(c.push(r),r=void 0)},h[li]=function(){void 0===r?r=n:r+=n},h[ui]=function(){h[li](),u++},h[hi]=function(){if(u>0)u--,d=gi,h[li]();else{if(u=0,void 0===r)return!1;if(r=Ti(r),!1===r)return!1;h[di]()}};while(null!==d)if(l++,t=e[l],"\\"!==t||!f()){if(i=Ci(t),s=Si[d],o=s[i]||s["else"]||wi,o===wi)return;if(d=o[0],a=h[o[1]],a&&(n=o[2],n=void 0===n?t:n,!1===a()))return;if(d===_i)return c}}var xi=function(){this._cache=Object.create(null)};xi.prototype.parsePath=function(e){var t=this._cache[e];return t||(t=Ri(e),t&&(this._cache[e]=t)),t||[]},xi.prototype.getPathValue=function(e,t){if(!bn(e))return null;var r=this.parsePath(t);if(0===r.length)return null;var n=r.length,i=e,o=0;while(o<n){var a=i[r[o]];if(void 0===a||null===a)return null;i=a,o++}return i};var Oi,Mi=/<\/?[\w\s="/.':;#-\/]+>/,Ai=/(?:@(?:\.[a-zA-Z]+)?:(?:[\w\-_|./]+|\([\w\-_:|./]+\)))/g,Pi=/^@(?:\.([a-zA-Z]+))?:/,Di=/[()]/g,ji={upper:function(e){return e.toLocaleUpperCase()},lower:function(e){return e.toLocaleLowerCase()},capitalize:function(e){return""+e.charAt(0).toLocaleUpperCase()+e.substr(1)}},Li=new ii,Ni=function(e){var t=this;void 0===e&&(e={}),!Gn&&"undefined"!==typeof window&&window.Vue&&ni(window.Vue);var r=e.locale||"en-US",n=!1!==e.fallbackLocale&&(e.fallbackLocale||"en-US"),i=e.messages||{},o=e.dateTimeFormats||e.datetimeFormats||{},a=e.numberFormats||{};this._vm=null,this._formatter=e.formatter||Li,this._modifiers=e.modifiers||{},this._missing=e.missing||null,this._root=e.root||null,this._sync=void 0===e.sync||!!e.sync,this._fallbackRoot=void 0===e.fallbackRoot||!!e.fallbackRoot,this._fallbackRootWithEmptyString=void 0===e.fallbackRootWithEmptyString||!!e.fallbackRootWithEmptyString,this._formatFallbackMessages=void 0!==e.formatFallbackMessages&&!!e.formatFallbackMessages,this._silentTranslationWarn=void 0!==e.silentTranslationWarn&&e.silentTranslationWarn,this._silentFallbackWarn=void 0!==e.silentFallbackWarn&&!!e.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new xi,this._dataListeners=new Set,this._componentInstanceCreatedListener=e.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==e.preserveDirectiveContent&&!!e.preserveDirectiveContent,this.pluralizationRules=e.pluralizationRules||{},this._warnHtmlInMessage=e.warnHtmlInMessage||"off",this._postTranslation=e.postTranslation||null,this._escapeParameterHtml=e.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in e&&(this.__VUE_I18N_BRIDGE__=e.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(e,r){var n=Object.getPrototypeOf(t);if(n&&n.getChoiceIndex){var i=n.getChoiceIndex;return i.call(t,e,r)}var o=function(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0};return t.locale in t.pluralizationRules?t.pluralizationRules[t.locale].apply(t,[e,r]):o(e,r)},this._exist=function(e,r){return!(!e||!r)&&(!In(t._path.getPathValue(e,r))||!!e[r])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(i).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,i[e])})),this._initVM({locale:r,fallbackLocale:n,messages:i,dateTimeFormats:o,numberFormats:a})},Ui={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};Ni.prototype._checkLocaleMessage=function(e,t,r){var n=[],i=function(e,t,r,n){if(kn(r))Object.keys(r).forEach((function(o){var a=r[o];kn(a)?(n.push(o),n.push("."),i(e,t,a,n),n.pop(),n.pop()):(n.push(o),i(e,t,a,n),n.pop())}));else if(yn(r))r.forEach((function(r,o){kn(r)?(n.push("["+o+"]"),n.push("."),i(e,t,r,n),n.pop(),n.pop()):(n.push("["+o+"]"),i(e,t,r,n),n.pop())}));else if(wn(r)){var o=Mi.test(r);if(o){var a="Detected HTML in message '"+r+"' of keypath '"+n.join("")+"' at '"+t+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===e?mn(a):"error"===e&&gn(a)}}};i(t,e,r,n)},Ni.prototype._initVM=function(e){var t=Gn.config.silent;Gn.config.silent=!0,this._vm=new Gn({data:e,__VUE18N__INSTANCE__:!0}),Gn.config.silent=t},Ni.prototype.destroyVM=function(){this._vm.$destroy()},Ni.prototype.subscribeDataChanging=function(e){this._dataListeners.add(e)},Ni.prototype.unsubscribeDataChanging=function(e){xn(this._dataListeners,e)},Ni.prototype.watchI18nData=function(){var e=this;return this._vm.$watch("$data",(function(){var t=On(e._dataListeners),r=t.length;while(r--)Gn.nextTick((function(){t[r]&&t[r].$forceUpdate()}))}),{deep:!0})},Ni.prototype.watchLocale=function(e){if(e){if(!this.__VUE_I18N_BRIDGE__)return null;var t=this,r=this._vm;return this.vm.$watch("locale",(function(n){r.$set(r,"locale",n),t.__VUE_I18N_BRIDGE__&&e&&(e.locale.value=n),r.$forceUpdate()}),{immediate:!0})}if(!this._sync||!this._root)return null;var n=this._vm;return this._root.$i18n.vm.$watch("locale",(function(e){n.$set(n,"locale",e),n.$forceUpdate()}),{immediate:!0})},Ni.prototype.onComponentInstanceCreated=function(e){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(e,this)},Ui.vm.get=function(){return this._vm},Ui.messages.get=function(){return Rn(this._getMessages())},Ui.dateTimeFormats.get=function(){return Rn(this._getDateTimeFormats())},Ui.numberFormats.get=function(){return Rn(this._getNumberFormats())},Ui.availableLocales.get=function(){return Object.keys(this.messages).sort()},Ui.locale.get=function(){return this._vm.locale},Ui.locale.set=function(e){this._vm.$set(this._vm,"locale",e)},Ui.fallbackLocale.get=function(){return this._vm.fallbackLocale},Ui.fallbackLocale.set=function(e){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",e)},Ui.formatFallbackMessages.get=function(){return this._formatFallbackMessages},Ui.formatFallbackMessages.set=function(e){this._formatFallbackMessages=e},Ui.missing.get=function(){return this._missing},Ui.missing.set=function(e){this._missing=e},Ui.formatter.get=function(){return this._formatter},Ui.formatter.set=function(e){this._formatter=e},Ui.silentTranslationWarn.get=function(){return this._silentTranslationWarn},Ui.silentTranslationWarn.set=function(e){this._silentTranslationWarn=e},Ui.silentFallbackWarn.get=function(){return this._silentFallbackWarn},Ui.silentFallbackWarn.set=function(e){this._silentFallbackWarn=e},Ui.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},Ui.preserveDirectiveContent.set=function(e){this._preserveDirectiveContent=e},Ui.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},Ui.warnHtmlInMessage.set=function(e){var t=this,r=this._warnHtmlInMessage;if(this._warnHtmlInMessage=e,r!==e&&("warn"===e||"error"===e)){var n=this._getMessages();Object.keys(n).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,n[e])}))}},Ui.postTranslation.get=function(){return this._postTranslation},Ui.postTranslation.set=function(e){this._postTranslation=e},Ui.sync.get=function(){return this._sync},Ui.sync.set=function(e){this._sync=e},Ni.prototype._getMessages=function(){return this._vm.messages},Ni.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},Ni.prototype._getNumberFormats=function(){return this._vm.numberFormats},Ni.prototype._warnDefault=function(e,t,r,n,i,o){if(!In(r))return r;if(this._missing){var a=this._missing.apply(null,[e,t,n,i]);if(wn(a))return a}else 0;if(this._formatFallbackMessages){var s=Tn.apply(void 0,i);return this._render(t,o,s.params,t)}return t},Ni.prototype._isFallbackRoot=function(e){return(this._fallbackRootWithEmptyString?!e:In(e))&&!In(this._root)&&this._fallbackRoot},Ni.prototype._isSilentFallbackWarn=function(e){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(e):this._silentFallbackWarn},Ni.prototype._isSilentFallback=function(e,t){return this._isSilentFallbackWarn(t)&&(this._isFallbackRoot()||e!==this.fallbackLocale)},Ni.prototype._isSilentTranslationWarn=function(e){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(e):this._silentTranslationWarn},Ni.prototype._interpolate=function(e,t,r,n,i,o,a){if(!t)return null;var s,c=this._path.getPathValue(t,r);if(yn(c)||kn(c))return c;if(In(c)){if(!kn(t))return null;if(s=t[r],!wn(s)&&!Cn(s))return null}else{if(!wn(c)&&!Cn(c))return null;s=c}return wn(s)&&(s.indexOf("@:")>=0||s.indexOf("@.")>=0)&&(s=this._link(e,t,s,n,"raw",o,a)),this._render(s,i,o,r)},Ni.prototype._link=function(e,t,r,n,i,o,a){var s=r,c=s.match(Ai);for(var l in c)if(c.hasOwnProperty(l)){var d=c[l],u=d.match(Pi),h=u[0],f=u[1],p=d.replace(h,"").replace(Di,"");if(Mn(a,p))return s;a.push(p);var v=this._interpolate(e,t,p,n,"raw"===i?"string":i,"raw"===i?void 0:o,a);if(this._isFallbackRoot(v)){if(!this._root)throw Error("unexpected error");var m=this._root.$i18n;v=m._translate(m._getMessages(),m.locale,m.fallbackLocale,p,n,i,o)}v=this._warnDefault(e,p,v,n,yn(o)?o:[o],i),this._modifiers.hasOwnProperty(f)?v=this._modifiers[f](v):ji.hasOwnProperty(f)&&(v=ji[f](v)),a.pop(),s=v?s.replace(d,v):s}return s},Ni.prototype._createMessageContext=function(e,t,r,n){var i=this,o=yn(e)?e:[],a=bn(e)?e:{},s=function(e){return o[e]},c=function(e){return a[e]},l=this._getMessages(),d=this.locale;return{list:s,named:c,values:e,formatter:t,path:r,messages:l,locale:d,linked:function(e){return i._interpolate(d,l[d]||{},e,null,n,void 0,[e])}}},Ni.prototype._render=function(e,t,r,n){if(Cn(e))return e(this._createMessageContext(r,this._formatter||Li,n,t));var i=this._formatter.interpolate(e,r,n);return i||(i=Li.interpolate(e,r,n)),"string"!==t||wn(i)?i:i.join("")},Ni.prototype._appendItemToChain=function(e,t,r){var n=!1;return Mn(e,t)||(n=!0,t&&(n="!"!==t[t.length-1],t=t.replace(/!/g,""),e.push(t),r&&r[t]&&(n=r[t]))),n},Ni.prototype._appendLocaleToChain=function(e,t,r){var n,i=t.split("-");do{var o=i.join("-");n=this._appendItemToChain(e,o,r),i.splice(-1,1)}while(i.length&&!0===n);return n},Ni.prototype._appendBlockToChain=function(e,t,r){for(var n=!0,i=0;i<t.length&&_n(n);i++){var o=t[i];wn(o)&&(n=this._appendLocaleToChain(e,o,r))}return n},Ni.prototype._getLocaleChain=function(e,t){if(""===e)return[];this._localeChainCache||(this._localeChainCache={});var r=this._localeChainCache[e];if(!r){t||(t=this.fallbackLocale),r=[];var n,i=[e];while(yn(i))i=this._appendBlockToChain(r,i,t);n=yn(t)?t:bn(t)?t["default"]?t["default"]:null:t,i=wn(n)?[n]:n,i&&this._appendBlockToChain(r,i,null),this._localeChainCache[e]=r}return r},Ni.prototype._translate=function(e,t,r,n,i,o,a){for(var s,c=this._getLocaleChain(t,r),l=0;l<c.length;l++){var d=c[l];if(s=this._interpolate(d,e[d],n,i,o,a,[n]),!In(s))return s}return null},Ni.prototype._t=function(e,t,r,n){var i,o=[],a=arguments.length-4;while(a-- >0)o[a]=arguments[a+4];if(!e)return"";var s=Tn.apply(void 0,o);this._escapeParameterHtml&&(s.params=Nn(s.params));var c=s.locale||t,l=this._translate(r,c,this.fallbackLocale,e,n,"string",s.params);if(this._isFallbackRoot(l)){if(!this._root)throw Error("unexpected error");return(i=this._root).$t.apply(i,[e].concat(o))}return l=this._warnDefault(c,e,l,n,o,"string"),this._postTranslation&&null!==l&&void 0!==l&&(l=this._postTranslation(l,e)),l},Ni.prototype.t=function(e){var t,r=[],n=arguments.length-1;while(n-- >0)r[n]=arguments[n+1];return(t=this)._t.apply(t,[e,this.locale,this._getMessages(),null].concat(r))},Ni.prototype._i=function(e,t,r,n,i){var o=this._translate(r,t,this.fallbackLocale,e,n,"raw",i);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(e,t,i)}return this._warnDefault(t,e,o,n,[i],"raw")},Ni.prototype.i=function(e,t,r){return e?(wn(t)||(t=this.locale),this._i(e,t,this._getMessages(),null,r)):""},Ni.prototype._tc=function(e,t,r,n,i){var o,a=[],s=arguments.length-5;while(s-- >0)a[s]=arguments[s+5];if(!e)return"";void 0===i&&(i=1);var c={count:i,n:i},l=Tn.apply(void 0,a);return l.params=Object.assign(c,l.params),a=null===l.locale?[l.params]:[l.locale,l.params],this.fetchChoice((o=this)._t.apply(o,[e,t,r,n].concat(a)),i)},Ni.prototype.fetchChoice=function(e,t){if(!e||!wn(e))return null;var r=e.split("|");return t=this.getChoiceIndex(t,r.length),r[t]?r[t].trim():e},Ni.prototype.tc=function(e,t){var r,n=[],i=arguments.length-2;while(i-- >0)n[i]=arguments[i+2];return(r=this)._tc.apply(r,[e,this.locale,this._getMessages(),null,t].concat(n))},Ni.prototype._te=function(e,t,r){var n=[],i=arguments.length-3;while(i-- >0)n[i]=arguments[i+3];var o=Tn.apply(void 0,n).locale||t;return this._exist(r[o],e)},Ni.prototype.te=function(e,t){return this._te(e,this.locale,this._getMessages(),t)},Ni.prototype.getLocaleMessage=function(e){return Rn(this._vm.messages[e]||{})},Ni.prototype.setLocaleMessage=function(e,t){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,t)},Ni.prototype.mergeLocaleMessage=function(e,t){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,Dn("undefined"!==typeof this._vm.messages[e]&&Object.keys(this._vm.messages[e]).length?Object.assign({},this._vm.messages[e]):{},t))},Ni.prototype.getDateTimeFormat=function(e){return Rn(this._vm.dateTimeFormats[e]||{})},Ni.prototype.setDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,t),this._clearDateTimeFormat(e,t)},Ni.prototype.mergeDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,Dn(this._vm.dateTimeFormats[e]||{},t)),this._clearDateTimeFormat(e,t)},Ni.prototype._clearDateTimeFormat=function(e,t){for(var r in t){var n=e+"__"+r;this._dateTimeFormatters.hasOwnProperty(n)&&delete this._dateTimeFormatters[n]}},Ni.prototype._localizeDateTime=function(e,t,r,n,i,o){for(var a=t,s=n[a],c=this._getLocaleChain(t,r),l=0;l<c.length;l++){var d=c[l];if(s=n[d],a=d,!In(s)&&!In(s[i]))break}if(In(s)||In(s[i]))return null;var u,h=s[i];if(o)u=new Intl.DateTimeFormat(a,Object.assign({},h,o));else{var f=a+"__"+i;u=this._dateTimeFormatters[f],u||(u=this._dateTimeFormatters[f]=new Intl.DateTimeFormat(a,h))}return u.format(e)},Ni.prototype._d=function(e,t,r,n){if(!r){var i=n?new Intl.DateTimeFormat(t,n):new Intl.DateTimeFormat(t);return i.format(e)}var o=this._localizeDateTime(e,t,this.fallbackLocale,this._getDateTimeFormats(),r,n);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(e,r,t)}return o||""},Ni.prototype.d=function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];var n=this.locale,i=null,o=null;return 1===t.length?(wn(t[0])?i=t[0]:bn(t[0])&&(t[0].locale&&(n=t[0].locale),t[0].key&&(i=t[0].key)),o=Object.keys(t[0]).reduce((function(e,r){var n;return Mn(vn,r)?Object.assign({},e,(n={},n[r]=t[0][r],n)):e}),null)):2===t.length&&(wn(t[0])&&(i=t[0]),wn(t[1])&&(n=t[1])),this._d(e,n,i,o)},Ni.prototype.getNumberFormat=function(e){return Rn(this._vm.numberFormats[e]||{})},Ni.prototype.setNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,t),this._clearNumberFormat(e,t)},Ni.prototype.mergeNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,Dn(this._vm.numberFormats[e]||{},t)),this._clearNumberFormat(e,t)},Ni.prototype._clearNumberFormat=function(e,t){for(var r in t){var n=e+"__"+r;this._numberFormatters.hasOwnProperty(n)&&delete this._numberFormatters[n]}},Ni.prototype._getNumberFormatter=function(e,t,r,n,i,o){for(var a=t,s=n[a],c=this._getLocaleChain(t,r),l=0;l<c.length;l++){var d=c[l];if(s=n[d],a=d,!In(s)&&!In(s[i]))break}if(In(s)||In(s[i]))return null;var u,h=s[i];if(o)u=new Intl.NumberFormat(a,Object.assign({},h,o));else{var f=a+"__"+i;u=this._numberFormatters[f],u||(u=this._numberFormatters[f]=new Intl.NumberFormat(a,h))}return u},Ni.prototype._n=function(e,t,r,n){if(!Ni.availabilities.numberFormat)return"";if(!r){var i=n?new Intl.NumberFormat(t,n):new Intl.NumberFormat(t);return i.format(e)}var o=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),r,n),a=o&&o.format(e);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(e,Object.assign({},{key:r,locale:t},n))}return a||""},Ni.prototype.n=function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];var n=this.locale,i=null,o=null;return 1===t.length?wn(t[0])?i=t[0]:bn(t[0])&&(t[0].locale&&(n=t[0].locale),t[0].key&&(i=t[0].key),o=Object.keys(t[0]).reduce((function(e,r){var n;return Mn(pn,r)?Object.assign({},e,(n={},n[r]=t[0][r],n)):e}),null)):2===t.length&&(wn(t[0])&&(i=t[0]),wn(t[1])&&(n=t[1])),this._n(e,n,i,o)},Ni.prototype._ntp=function(e,t,r,n){if(!Ni.availabilities.numberFormat)return[];if(!r){var i=n?new Intl.NumberFormat(t,n):new Intl.NumberFormat(t);return i.formatToParts(e)}var o=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),r,n),a=o&&o.formatToParts(e);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(e,t,r,n)}return a||[]},Object.defineProperties(Ni.prototype,Ui),Object.defineProperty(Ni,"availabilities",{get:function(){if(!Oi){var e="undefined"!==typeof Intl;Oi={dateTimeFormat:e&&"undefined"!==typeof Intl.DateTimeFormat,numberFormat:e&&"undefined"!==typeof Intl.NumberFormat}}return Oi}}),Ni.install=ni,Ni.version="8.28.2";var Fi=Ni,Bi=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"m-message-fade",mode:"in-out"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"m-message-wrapper",class:e.wrapperClassName,style:{width:e.width}},[t("mmessage",{class:[e.type&&"m-message--"+e.type,e.className],attrs:{event:e.event,chat:e.chat,closable:e.showClose,"is-collapsed":e.isCollapsed,"close-handler":e.close,"click-handler":e.click,title:e.title,supportHTML:e.supportHTML},nativeOn:{mouseenter:function(t){return e.clearTimer.apply(null,arguments)},mouseleave:function(t){return e.startTimer.apply(null,arguments)}}},[t("template",{slot:"icon"},[e.iconImg?t("img",{staticClass:"m-message--icon",attrs:{src:e.iconImg}}):e.type?t("icon",{staticClass:"m-message--icon",attrs:{name:e.type}}):e._e()],1)],2)],1)])},Ki=[],qi=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"m-message"},[e.iconImg||e.$slots.icon?t("div",{staticClass:"m-message-icons",on:{click:e.handleClick}},[e.iconImg?t("img",{staticClass:"m-message--icon",attrs:{src:e.iconImg,alt:"Img"}}):e._t("icon")],2):e._e(),t("div",{staticClass:"m-message-content",on:{click:e.handleClick}},[e.title||e.$slots.title?t("div",{staticClass:"m-message--title"},[e._t("title",(function(){return[e._v(" "+e._s(e.title)+" ")]}))],2):e._e(),e.event&&e.chat?t("event",{attrs:{event:e.event,chat:e.chat,preview:!0}}):t("div",{staticClass:"m-message--body"},[e._t("message")],2)],1),t("div",{staticClass:"close",on:{click:e.handleClose}},[t("i",{staticClass:"fas fa-times"})])])},Vi=[],Wi={name:"m-mmessage",props:{event:event,iconImg:String,closable:Boolean,closeHandler:Function,clickHandler:Function,chat:{},title:String,supportHTML:Boolean,isCollapsed:{type:Boolean,default:!0}},data(){return{visible:!0,collapsed:this.isCollapsed}},components:{event:()=>Promise.resolve().then(n.bind(null,"6167"))},methods:{triggerCollapse(){this.collapsed=!this.collapsed},handleClick:function(){"function"===typeof this.clickHandler&&this.clickHandler(this.close)},close(){this.visible=!1},handleClose(){"function"===typeof this.closeHandler?this.closeHandler(this.close):this.close()}},mounted(){}},$i=Wi,zi=Object(I["a"])($i,qi,Vi,!1,null,null,null,!0),Gi=zi.exports;const Hi={},Yi=function(e,t){Hi[e]=t},Ji={name:"Icon",props:{name:String,color:String},computed:{svg(){return Hi[this.name]}},render(e){const t=this.svg;if(!t)return console.warn(`The name of '${this.name}' could not be found.`),'<span class="m-svg-icon"></span>';this.color?this.color:t.fill&&t.fill;return'<span class={[\'m-svg-icon\', \'m-svg-icon--\' + this.name]}>\n        <svg\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox={svg.viewBox}\n          style={style}\n          class={svg.class}>\n          { svg.defs && <defs domPropsInnerHTML={svg.defs}></defs> }\n          { svg.path && <path fill="currentColor" d={svg.path} /> }\n          { svg.html && <g domPropsInnerHTML={svg.html}></g> }\n          {this.$slots.default}\n        </svg>\n      </span>'}};Ji.add=Yi;var Xi=Ji,Zi={name:"info",fill:"#1CADF2",viewBox:"0 0 1024 1024",path:"M512,72C269,72,72,269,72,512s197,440,440,440s440-197,440-440S755,72,512,72z M581,673.9 c-33.2,49.9-67,88.3-123.8,88.3c-38.8-6.3-54.7-34.1-46.3-62.4L484,457.6c1.8-5.9-1.2-12.3-6.6-14.2c-5.4-1.9-15.9,5.1-25.1,15.1 l-44.2,53.2c-1.2-8.9-0.1-23.7-0.1-29.6c33.2-49.9,87.8-89.2,124.8-89.2c35.2,3.6,51.8,31.7,45.7,62.6l-73.6,243.3 c-1,5.5,1.9,11.1,6.9,12.8c5.4,1.9,16.8-5.1,26-15.1l44.2-53.1C583,652.3,581,667.9,581,673.9z M571.2,357.6 c-28,0-50.6-20.4-50.6-50.4c0-30,22.7-50.3,50.6-50.3c28,0,50.6,20.4,50.6,50.3C621.8,337.3,599.1,357.6,571.2,357.6z"},Qi={name:"success",fill:"#17B77E",viewBox:"0 0 1024 1024",path:"M512,72C269,72,72,269,72,512s197,440,440,440s440-197,440-440S755,72,512,72L512,72z M758.9,374 c-48.5,48.6-81.2,76.9-172.3,186.8c-52.6,63.4-102.3,131.5-102.7,132L462.1,720c-4.6,6.1-13.5,6.8-19.1,1.6L267.9,558.9 c-17.8-16.5-18.8-44.4-2.3-62.2s44.4-18.8,62.2-2.3l104.9,97.5c5.5,5.1,14.1,4.5,18.9-1.3c16.2-20.1,38.4-44.5,62.4-68.6 c90.2-90.9,145.6-139.7,175.2-161.3c36-26.2,77.3-48.6,87.3-36.2C792,343.9,782.5,350.3,758.9,374L758.9,374z"},eo={name:"error",fill:"#F56C6C",viewBox:"0 0 1024 1024",path:"M512,952C269,952,72,755,72,512S269,72,512,72s440,197,440,440S755,952,512,952z M579.7,512l101.6-101.6 c18.7-18.7,18.7-49,0-67.7c-18.7-18.7-49-18.7-67.7,0l0,0L512,444.3L410.4,342.7c-18.7-18.7-49-18.7-67.7,0s-18.7,49,0,67.7 L444.3,512L342.7,613.6c-18.7,18.7-18.7,49,0,67.7c18.7,18.7,49,18.7,67.7,0L512,579.7l101.6,101.6c18.7,18.7,49,18.7,67.7,0 c18.7-18.7,18.7-49,0-67.7L579.7,512z"},to={name:"warning",fill:"#FFC603",viewBox:"0 0 1024 1024",path:"M512,952C269,952,72,755,72,512S269,72,512,72s440,197,440,440S755,952,512,952z M510,770.8 c30.4,0,55-24.6,55-55s-24.6-55-55-55s-55,24.6-55,55S479.6,770.8,510,770.8z M509.8,255.3c-39.3,0-71.2,31.9-71.2,71.2 c0,3.1,0.2,6.2,0.6,9.3L472.4,588c2.5,19.3,18.9,33.7,38.4,33.7c19.4,0,35.8-14.4,38.2-33.7l31.8-252.2c5-39.2-22.8-75-62-79.9 C515.9,255.5,512.8,255.3,509.8,255.3z"},ro={name:"loading",viewBox:"0 0 50 50",class:"m-loading-icon m-loading-wipe",defs:"<style>\n    .m-loading-icon {\n      stroke: #343640;\n      stroke-width: 3.5;\n      stroke-linecap: round;\n      background: none;\n      vertical-align: middle;\n    }\n    .m-loading-icon .m-loading-icon-bg-path{\n      fill: none;\n      stroke: #F2F2F2;\n    }\n    .m-loading-icon .m-loading-icon-active-path{\n      fill: none;\n      stroke: #20a0ff;\n      transform-origin: 50% 50%;\n    }\n    .m-loading-wipe .m-loading-icon-active-path{\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: 0;\n      animation: loading-wipe 1.5s ease-in-out infinite, loading-rotate 2s linear infinite;\n    }\n    .m-loading-default .m-loading-icon-active-path{\n      stroke-dasharray: 60, 150;\n      animation: loading-rotate 0.8s linear infinite;\n    }\n\n    @keyframes loading-rotate{\n      to{transform:rotate(1turn)}\n    }\n    @keyframes loading-wipe{\n      0%{\n        stroke-dasharray:1,200;\n        stroke-dashoffset:0;\n      }\n      50%{\n        stroke-dasharray:90,150;\n        stroke-dashoffset:-40px;\n      }\n      to{\n        stroke-dasharray:90,150;\n        stroke-dashoffset:-120px;\n      }\n    }\n  </style>",html:'<circle cx="25" cy="25" r="20" class="m-loading-icon-bg-path"></circle><circle cx="25" cy="25" r="20" class="m-loading-icon-active-path"></circle>'};Xi.add(Zi.name,Zi),Xi.add(Qi.name,Qi),Xi.add(eo.name,eo),Xi.add(to.name,to),Xi.add(ro.name,ro);var no=Xi,io={components:{Icon:no,mmessage:Gi},data(){return{show:!1,type:"info",iconImg:"",title:"",message:{},roomId:"",event:null,chat:null,duration:3e3,showClose:!1,isCollapsed:!1,width:"",className:"",wrapperClassName:"",supportHTML:!1,onClose:null,onClick:null,timer:null,closed:!1}},watch:{closed(e){e&&(this.show=!1,this.$el.addEventListener("animationend",this.destroyElement))}},methods:{close(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},click(){"function"===typeof this.onClick&&this.onClick(this)},clearTimer(){clearTimeout(this.timer)},startTimer(){this.duration>0&&"loading"!==this.type&&(this.timer=setTimeout(()=>{this.closed||this.close()},this.duration))},destroyElement(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)}},mounted(){"loading"!==this.type&&(this.startTimer(),this.duration<=0&&(this.showClose=!0))}},oo=io,ao=Object(I["a"])(oo,Bi,Ki,!1,null,null,null,!0),so=ao.exports;const co=s["default"].extend(so),lo=[];let uo=1;const ho={},fo=function(e){let t=e.onClose,r=e.onClick;const n=e.position||"top-center",i=e.hasMask||!1,o=n+(i?"-mask":"");let a=ho[o];a||(a=ho[o]=document.createElement("div"),a.className=["m-message-container","is-"+n,i?"has-mask":""].filter((function(e){return!!e})).join(" "),document.body.appendChild(a)),e.zIndex&&(a.style.zIndex=e.zIndex);const s=uo++;e.onClose=function(){fo.close(s,t)},e.onClick=function(){fo.click(s,r,t)};const c=new co({el:document.createElement("div"),data:e});return c.id=s,c.containerKey=o,0===n.indexOf("bottom")&&a.firstChild?a.insertBefore(c.$el,a.firstChild):a.appendChild(c.$el),c.show=!0,lo.push(c),c};fo.click=function(e,t,r){for(let n=0,i=lo.length;n<i;n++)if(e===lo[n].id){const{containerKey:e,hasMask:r}=lo[n];"function"===typeof t&&t(lo[n])}fo.close(e,r)},fo.close=function(e,t){for(let r=0,n=lo.length;r<n;r++)if(e===lo[r].id){const{containerKey:e,hasMask:n}=lo[r];"function"===typeof t&&t(lo[r]),lo[r]=null,lo.splice(r,1);const i=lo.findIndex((function(t){return t.containerKey===e}));n&&-1===i&&setTimeout((function(){ho[e].remove(),ho[e]=null}),300);break}setTimeout((function(){if(0===lo.length)for(let e in ho)ho[e]&&(ho[e].remove(),ho[e]=null)}),300)},fo.closeAll=function(){for(let e=lo.length-1;e>=0;e--)lo[e].close()};const po=["info","success","error","warning","loading"];po.forEach(e=>{fo[e]=function(t){return t="string"===typeof t?{message:t}:t,fo({...t,type:e})}});var vo=fo;n("a45a");vo.install=function(e,t){t&&t.name?e.prototype["$"+t.name]=vo:e.prototype.$message=vo};var mo=vo,go=(n("2e4b"),n("0086")),yo=n.n(go),bo=n("03a5"),_o=n.n(bo),wo=n("f206"),So=n.n(wo),Eo=n("6167"),ko=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"list"},[e.transition?t("div",{ref:"simplelist",class:e.simplelistClass},[t("transition-group",{attrs:{name:e.transition,tag:"div"}},e._l(e.readyItems,(function(r,n){return t("div",{directives:[{name:"touch",rawName:"v-touch:touchhold",value:t=>e.touchhold(r,t),expression:"e => touchhold(item, e)",arg:"touchhold"}],key:r.id||r.ID||n+1,staticClass:"item",attrs:{"data-index":n},on:{click:t=>e.click(r)}},[e._t("default",(function(){return[e._v(" "+e._s(r.value)+" ")]}),{item:r,index:n})],2)})),0)],1):t("div",{ref:"simplelist",class:e.simplelistClass},e._l(e.readyItems,(function(r,n){return t("div",{directives:[{name:"touch",rawName:"v-touch:touchhold",value:t=>e.touchhold(r,t),expression:"e => touchhold(item, e)",arg:"touchhold"}],key:r.id||r.ID||n+1,staticClass:"item",attrs:{"data-index":n},on:{click:t=>e.click(r)}},[e._t("default",(function(){return[e._v(" "+e._s(r.value)+" ")]}),{item:r,index:n})],2)})),0)])},Io=[],Co={name:"list",props:{items:{type:[Array,Object],required:!0},simplelistClass:{type:String,default:"simplelist"},transition:String},computed:{readyItems:function(){return this.items}},created:function(){},data:function(){return{}},methods:{click:function(e){this.$emit("click",e)},scroll:function(e,t){this.$refs.simplelist&&(this.$refs.simplelist[e]=t)},touchhold:function(e,t){this.$emit("touchhold",e)}}},To=Co;function Ro(e){var t=n("b268");t.__inject__&&t.__inject__(e)}var xo=Object(I["a"])(To,ko,Io,!1,Ro,"286a0306",null,!0),Oo=xo.exports,Mo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"listmenu"},[t("list",{attrs:{items:e.items},on:{click:e.click},scopedSlots:e._u([{key:"default",fn:function(r){return[e._t("default",(function(){return[t("button",{staticClass:"menuitem",class:r.item.class||"",on:{click:function(e){r.item.onClick&&r.item.onClick(r.item)}}},[t("i",{class:r.item.icon}),t("span",[e._v(e._s(e.$t(r.item.text)))])])]}),{item:r.item,index:r.i})]}}],null,!0)})],1)},Ao=[],Po={name:"listmenu",props:{items:Array,close:Function,onlyimit:Boolean},computed:Object(A["d"])({auth:e=>e.auth}),methods:{click:function(e){this.onlyimit?this.$emit("click",e):(e.action&&("function"==typeof e.action?e.action():this.$emit("action",e.action)),this.close?this.close():this.$emit("close"))}}},Do=Po;function jo(e){var t=n("f8e6");t.__inject__&&t.__inject__(e)}var Lo=Object(I["a"])(Do,Mo,Ao,!1,jo,"f996b37e",null,!0),No=Lo.exports,Uo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"listmenuwithupload"},[t("listmenu",{attrs:{items:e.items,onlyimit:!0},on:{click:e.click},scopedSlots:e._u([{key:"default",fn:function(r){return[r.item.upload?t("upload",{attrs:{onlyimage:r.item.upload.onlyimage,multiple:r.item.upload.multiple,extensions:r.item.upload.extensions,images:r.item.upload.images},on:{start:e=>r.item.upload.start(r.item,e),uploaded:e=>r.item.upload.uploaded(r.item,e),uploadedAll:t=>e.uploadedAll(r.item,t),error:e=>r.item.upload.error(r.item,e)},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"menuitem"},[t("i",{class:r.item.icon}),t("span",[e._v(e._s(e.$t(r.item.text)))])])]},proxy:!0},{key:"dropzone",fn:function(){},proxy:!0}],null,!0)}):t("div",{staticClass:"menuitem",class:r.item.class||""},[t("i",{class:r.item.icon}),t("span",[e._v(e._s(e.$t(r.item.text)))])])]}}])})],1)},Fo=[],Bo=n("6b57"),Ko={name:"listmenuwithupload",props:{items:Array,close:Function},computed:Object(A["d"])({auth:e=>e.auth}),components:{upload:Bo["a"]},methods:{uploadedAll:function(e,t){e.upload.uploadedAll(e,t),this.close?this.close():this.$emit("close")},click:function(e){e.upload||(e.action&&("function"==typeof e.action?e.action():this.$emit("action",e.action)),this.close?this.close():this.$emit("close"))}}},qo=Ko;function Vo(e){var t=n("8d13");t.__inject__&&t.__inject__(e)}var Wo=Object(I["a"])(qo,Uo,Fo,!1,Vo,"6d0a1598",null,!0),$o=Wo.exports,zo=(n("c5c5"),n("1da1")),Go=n("ade3"),Ho=(n("2c66"),n("249d"),n("40e9"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),{});class Yo{constructor(e,t){t||(t={}),this.core=e}tetatetchat(e){if(!e)return!1;if("undefined"!=typeof e.tetatet)return e.tetatet;var t=this.core.mtrx.chatUsersInfo(e.roomId),r=!1;if(2==t.length){var n=this.tetatetid(t[0],t[1]);r=e.name=="#"+n||(e.getCanonicalAlias()||"").indexOf(n)>-1}return t.length>1&&(e.tetatet=r),r}tetatetid(e,t){var r=2;if(e.id==t.id)return null;var n=parseInt(e.id,16)*parseInt(t.id,16)*r;if(Ho[n])return Ho[n];var i=ne["a"].sha224(n.toString()).toString("hex");return Ho[n]=i,i}groupideq(e){var t=2,r=1*t;if(_.each(e,e=>{r*=parseInt(e.id,16)}),Ho[r])return Ho[r];var n=ne["a"].sha224(r.toString()).toString("hex");return Ho[r]=n,n}groupid(e,t){var r=2,n=e.reduce((e,t)=>(e+=parseInt(t.id,16),e),0)*parseInt(t.id,16)*r;if(Ho[n])return Ho[n];var i=ne["a"].sha224(n.toString()).toString("hex");return Ho[n]=i,i}unknowngroupusers(e){return e&&"invite"===e.selfMembership&&!e.summary.members&&!this.tetatetchat(this.m_chat)}usersFromChats(e){var t={};return _.each(e,e=>{t[e.roomId]=_.map(_.uniq([].concat(_.toArray(e.currentState.members),e.summary.members||[]),e=>e.userId),(function(e){return{userId:ne["a"].getmatrixid(e.userId),membership:e.membership,powerLevel:e.powerLevel}}))}),t}prepareChat(e){return"public"===e.getJoinRule()?Promise.resolve():this.usersInfoForChatsStore([e]).then(()=>this.core.pcrypto.addroom(e))}prepareChatWithUsers(e){return"public"===e.getJoinRule()?Promise.resolve():this.allchatmembers([e],!1,!0).then(t=>this.prepareChat(e))}fillContacts(e){return e=_.filter(e,e=>"join"==e.selfMembership&&57==e.name.length&&"public"!=e.getJoinRule()),this.usersInfoForChatsStore(e).then(e=>{this.core.store.commit("SET_CONTACTS_FROM_MATRIX",_.filter(e,e=>!this.core.user.userinfo||e.id!==this.core.user.userinfo.id))})}usersInfoForChatsStore(e,t){return this.usersInfoForChats(e,t).then(t=>(this.core.store.commit("SET_CHATS_USERS",this.usersFromChats(e)),Promise.resolve(t))).catch(e=>Promise.resolve())}allchatmembers(e,t,r){var n=[],i=[];return r&&(i=[...i,..._.map(e,e=>"invite"!==e.selfMembership||e.summary.members&&!t||e.summary.membersloading?Promise.resolve():(e.summary.membersloading=!0,e.loadMembersFromServer().then(t=>(e.summary.membersloading=!1,e.summary.members=_.map(t,e=>({name:ne["a"].getmatrixid(e.state_key),membership:e.content.membership,user:e,userId:e.state_key,powerLevel:e.content.powerLevel||0})),"invite"===e.selfMembership&&this.core.user.userinfo&&(_.find(e.summary.members,e=>e.userId==this.core.user.matrixId(this.core.user.userinfo.id))||e.summary.members.push({name:this.core.user.userinfo.id,membership:"invite",user:this.core.user.userinfo,userId:this.core.user.matrixId(this.core.user.userinfo.id),powerLevel:0})),Promise.resolve())).catch(t=>(e.summary.membersloading=!1,Promise.resolve()))))]),Promise.all(i).then(t=>(_.each(e,e=>{n=n.concat(_.toArray(e.currentState.members),e.summary.members||[])}),n=_.uniq(n,(function(e){return e.userId})),Promise.resolve(n)))}usersInfoForChats(e,t){return this.allchatmembers(e,t).then(e=>this.usersInfo(e,t))}usersInfoById(e){var t=[ne["a"].getmatrixid(e)];return this.core.user.usersInfo(t,!1).then(e=>Promise.resolve(e[0]))}usersInfo(e,t){var r=_.map(e,(function(e){return ne["a"].getmatrixid(e.userId)}));return r=_.uniq(r),this.core.user.usersInfo(r,!1,t)}groupId(e){let t=[],r=[];e.forEach(e=>{r.push(this.core.user.matrixId(e.id))}),e.forEach((function(e){let r=parseInt(e.id,16);t.push(r)}));const n=t.reduce((e,t)=>e*t,1),i=ne["a"].makeid(n);let o=ne["a"].sha224(i.toString()).toString("hex");return{hash:o,idForInviting:r}}groupIdLight(e){let t=[],r=[];var n=[null];window.chatinvitedomains&&(n=[].concat(n,window.chatinvitedomains)),_.each(n,t=>{_.each(e,e=>{r.push(this.core.user.matrixId(e,t))})}),_.each(e,e=>{let r=parseInt(e,16);t.push(r)});const i=t.reduce((e,t)=>e*t,1),o=ne["a"].makeid(i);let a=ne["a"].sha224(o.toString()).toString("hex");return{hash:a,idForInviting:r}}chatIsPublic(e){var t=e.currentState.getStateEvents("m.room.join_rules");return!!_.find(t,e=>"public"==ne["a"].deep(e,"event.content.join_rule"))}}var Jo=Yo,Xo=n("5059");var Zo=function(){return Zo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zo.apply(this,arguments)};function Qo(t,r,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(s,c)}l((i=i.apply(t,r||[])).next())}))}function ea(t,r){var n,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s["throw"]=c(1),s["return"]=c(2),"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(e){return function(t){return l([e,t])}}function l(c){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,c[0]&&(a=0)),a)try{if(n=1,i&&(o=2&c[0]?i["return"]:c[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=r.call(t,a)}catch(e){c=[6,e],i=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}Object.create;function ta(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var ra="3.4.2";function na(e,t){return new Promise((function(r){return setTimeout(r,e,t)}))}function ia(e,t){void 0===t&&(t=1/0);var r=window.requestIdleCallback;return r?new Promise((function(e){return r.call(window,(function(){return e()}),{timeout:t})})):na(Math.min(e,t))}function oa(e){return!!e&&"function"===typeof e.then}function aa(e,t){try{var r=e();oa(r)?r.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,r)}catch(error){t(!1,error)}}function sa(e,t,r){return void 0===r&&(r=16),Qo(this,void 0,void 0,(function(){var n,i,o,a;return ea(this,(function(s){switch(s.label){case 0:n=Array(e.length),i=Date.now(),o=0,s.label=1;case 1:return o<e.length?(n[o]=t(e[o],o),a=Date.now(),a>=i+r?(i=a,[4,na(0)]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return++o,[3,1];case 4:return[2,n]}}))}))}function ca(e){e.then(void 0,(function(){}))}function la(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function da(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function ua(e,t){return t%=64,32===t?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function ha(e,t){return t%=64,0===t?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function fa(e,t){return[e[0]^t[0],e[1]^t[1]]}function pa(e){return e=fa(e,[0,e[0]>>>1]),e=da(e,[4283543511,3981806797]),e=fa(e,[0,e[0]>>>1]),e=da(e,[3301882366,444984403]),e=fa(e,[0,e[0]>>>1]),e}function va(e,t){e=e||"",t=t||0;var r,n=e.length%16,i=e.length-n,o=[0,t],a=[0,t],s=[0,0],c=[0,0],l=[2277735313,289559509],d=[1291169091,658871167];for(r=0;r<i;r+=16)s=[255&e.charCodeAt(r+4)|(255&e.charCodeAt(r+5))<<8|(255&e.charCodeAt(r+6))<<16|(255&e.charCodeAt(r+7))<<24,255&e.charCodeAt(r)|(255&e.charCodeAt(r+1))<<8|(255&e.charCodeAt(r+2))<<16|(255&e.charCodeAt(r+3))<<24],c=[255&e.charCodeAt(r+12)|(255&e.charCodeAt(r+13))<<8|(255&e.charCodeAt(r+14))<<16|(255&e.charCodeAt(r+15))<<24,255&e.charCodeAt(r+8)|(255&e.charCodeAt(r+9))<<8|(255&e.charCodeAt(r+10))<<16|(255&e.charCodeAt(r+11))<<24],s=da(s,l),s=ua(s,31),s=da(s,d),o=fa(o,s),o=ua(o,27),o=la(o,a),o=la(da(o,[0,5]),[0,1390208809]),c=da(c,d),c=ua(c,33),c=da(c,l),a=fa(a,c),a=ua(a,31),a=la(a,o),a=la(da(a,[0,5]),[0,944331445]);switch(s=[0,0],c=[0,0],n){case 15:c=fa(c,ha([0,e.charCodeAt(r+14)],48));case 14:c=fa(c,ha([0,e.charCodeAt(r+13)],40));case 13:c=fa(c,ha([0,e.charCodeAt(r+12)],32));case 12:c=fa(c,ha([0,e.charCodeAt(r+11)],24));case 11:c=fa(c,ha([0,e.charCodeAt(r+10)],16));case 10:c=fa(c,ha([0,e.charCodeAt(r+9)],8));case 9:c=fa(c,[0,e.charCodeAt(r+8)]),c=da(c,d),c=ua(c,33),c=da(c,l),a=fa(a,c);case 8:s=fa(s,ha([0,e.charCodeAt(r+7)],56));case 7:s=fa(s,ha([0,e.charCodeAt(r+6)],48));case 6:s=fa(s,ha([0,e.charCodeAt(r+5)],40));case 5:s=fa(s,ha([0,e.charCodeAt(r+4)],32));case 4:s=fa(s,ha([0,e.charCodeAt(r+3)],24));case 3:s=fa(s,ha([0,e.charCodeAt(r+2)],16));case 2:s=fa(s,ha([0,e.charCodeAt(r+1)],8));case 1:s=fa(s,[0,e.charCodeAt(r)]),s=da(s,l),s=ua(s,31),s=da(s,d),o=fa(o,s)}return o=fa(o,[0,e.length]),a=fa(a,[0,e.length]),o=la(o,a),a=la(a,o),o=pa(o),a=pa(a),o=la(o,a),a=la(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function ma(e){var t;return Zo({name:e.name,message:e.message,stack:null===(t=e.stack)||void 0===t?void 0:t.split("\n")},e)}function ga(e,t){for(var r=0,n=e.length;r<n;++r)if(e[r]===t)return!0;return!1}function ya(e,t){return!ga(e,t)}function ba(e){return parseInt(e)}function _a(e){return parseFloat(e)}function wa(e,t){return"number"===typeof e&&isNaN(e)?t:e}function Sa(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function Ea(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var r=1/t;return Math.round(e*r)/r}function ka(e){for(var t,r,n="Unexpected syntax '".concat(e,"'"),i=/^\s*([a-z-]*)(.*)$/i.exec(e),o=i[1]||void 0,a={},s=/([.:#][\w-]+|\[.+?\])/gi,c=function(e,t){a[e]=a[e]||[],a[e].push(t)};;){var l=s.exec(i[2]);if(!l)break;var d=l[0];switch(d[0]){case".":c("class",d.slice(1));break;case"#":c("id",d.slice(1));break;case"[":var u=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(!u)throw new Error(n);c(u[1],null!==(r=null!==(t=u[4])&&void 0!==t?t:u[5])&&void 0!==r?r:"");break;default:throw new Error(n)}}return[o,a]}function Ia(e){return e&&"object"===typeof e&&"message"in e?e:{message:e}}function Ca(e){return"function"!==typeof e}function Ta(e,t){var r=new Promise((function(r){var n=Date.now();aa(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now()-n;if(!e[0])return r((function(){return{error:Ia(e[1]),duration:i}}));var o=e[1];if(Ca(o))return r((function(){return{value:o,duration:i}}));r((function(){return new Promise((function(e){var t=Date.now();aa(o,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=i+Date.now()-t;if(!r[0])return e({error:Ia(r[1]),duration:o});e({value:r[1],duration:o})}))}))}))}))}));return ca(r),function(){return r.then((function(e){return e()}))}}function Ra(e,t,r){var n=Object.keys(e).filter((function(e){return ya(r,e)})),i=sa(n,(function(r){return Ta(e[r],t)}));return ca(i),function(){return Qo(this,void 0,void 0,(function(){var e,t,r,o,a;return ea(this,(function(s){switch(s.label){case 0:return[4,i];case 1:return e=s.sent(),[4,sa(e,(function(e){var t=e();return ca(t),t}))];case 2:return t=s.sent(),[4,Promise.all(t)];case 3:for(r=s.sent(),o={},a=0;a<n.length;++a)o[n[a]]=r[a];return[2,o]}}))}))}}function xa(){var e=window,t=navigator;return Sa(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Oa(){var e=window,t=navigator;return Sa(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!xa()}function Ma(){var e=window,t=navigator;return Sa(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Aa(){var e=window,t=navigator;return Sa(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function Pa(){var e=window;return Sa(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function Da(){var e,t,r=window;return Sa(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in r,"mozInnerScreenX"in r,"CSSMozDocumentRule"in r,"CanvasCaptureMediaStream"in r])>=4}function ja(){var e=window;return Sa([!("MediaSettingsRange"in e),"RTCEncodedAudioFrame"in e,""+e.Intl==="[object Intl]",""+e.Reflect==="[object Reflect]"])>=3}function La(){var e=window;return Sa(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}function Na(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return Sa(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}function Ua(){var e=document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||null}function Fa(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function Ba(){var e=Ma(),t=Da();if(!e&&!t)return!1;var r=window;return Sa(["onorientationchange"in r,"orientation"in r,e&&!("SharedWorker"in r),t&&/android/i.test(navigator.appVersion)])>=2}function Ka(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(qa())return-1;var r=4500,n=5e3,i=new t(1,n,44100),o=i.createOscillator();o.type="triangle",o.frequency.value=1e4;var a=i.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.25,o.connect(a),a.connect(i.destination),o.start(0);var s=Va(i),c=s[0],l=s[1],d=c.then((function(e){return Wa(e.getChannelData(0).subarray(r))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return ca(d),function(){return l(),d}}function qa(){return Aa()&&!Pa()&&!La()}function Va(e){var t=3,r=500,n=500,i=5e3,o=function(){},a=new Promise((function(a,s){var c=!1,l=0,d=0;e.oncomplete=function(e){return a(e.renderedBuffer)};var u=function(){setTimeout((function(){return s($a("timeout"))}),Math.min(n,d+i-Date.now()))},h=function(){try{var n=e.startRendering();switch(oa(n)&&ca(n),e.state){case"running":d=Date.now(),c&&u();break;case"suspended":document.hidden||l++,c&&l>=t?s($a("suspended")):setTimeout(h,r);break}}catch(error){s(error)}};h(),o=function(){c||(c=!0,d>0&&u())}}));return[a,o]}function Wa(e){for(var t=0,r=0;r<e.length;++r)t+=Math.abs(e[r]);return t}function $a(e){var t=new Error(e);return t.name=e,t}function za(e,t,r){var n,i,o;return void 0===r&&(r=50),Qo(this,void 0,void 0,(function(){var a,s;return ea(this,(function(c){switch(c.label){case 0:a=document,c.label=1;case 1:return a.body?[3,3]:[4,na(r)];case 2:return c.sent(),[3,1];case 3:s=a.createElement("iframe"),c.label=4;case 4:return c.trys.push([4,,10,11]),[4,new Promise((function(e,r){var n=!1,i=function(){n=!0,e()},o=function(e){n=!0,r(e)};s.onload=i,s.onerror=o;var c=s.style;c.setProperty("display","block","important"),c.position="absolute",c.top="0",c.left="0",c.visibility="hidden",t&&"srcdoc"in s?s.srcdoc=t:s.src="about:blank",a.body.appendChild(s);var l=function(){var e,t;n||("complete"===(null===(t=null===(e=s.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?i():setTimeout(l,10))};l()}))];case 5:c.sent(),c.label=6;case 6:return(null===(i=null===(n=s.contentWindow)||void 0===n?void 0:n.document)||void 0===i?void 0:i.body)?[3,8]:[4,na(r)];case 7:return c.sent(),[3,6];case 8:return[4,e(s,s.contentWindow)];case 9:return[2,c.sent()];case 10:return null===(o=s.parentNode)||void 0===o||o.removeChild(s),[7];case 11:return[2]}}))}))}function Ga(e){for(var t=ka(e),r=t[0],n=t[1],i=document.createElement(null!==r&&void 0!==r?r:"div"),o=0,a=Object.keys(n);o<a.length;o++){var s=a[o],c=n[s].join(" ");"style"===s?Ha(i.style,c):i.setAttribute(s,c)}return i}function Ha(e,t){for(var r=0,n=t.split(";");r<n.length;r++){var i=n[r],o=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(i);if(o){var a=o[1],s=o[2],c=o[4];e.setProperty(a,s,c||"")}}}var Ya="mmMwWLliI0O&1",Ja="48px",Xa=["monospace","sans-serif","serif"],Za=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Qa(){return za((function(e,t){var r=t.document,n=r.body;n.style.fontSize=Ja;var i=r.createElement("div"),o={},a={},s=function(e){var t=r.createElement("span"),n=t.style;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=e,t.textContent=Ya,i.appendChild(t),t},c=function(e,t){return s("'".concat(e,"',").concat(t))},l=function(){return Xa.map(s)},d=function(){for(var e={},t=function(t){e[t]=Xa.map((function(e){return c(t,e)}))},r=0,n=Za;r<n.length;r++){var i=n[r];t(i)}return e},u=function(e){return Xa.some((function(t,r){return e[r].offsetWidth!==o[t]||e[r].offsetHeight!==a[t]}))},h=l(),f=d();n.appendChild(i);for(var p=0;p<Xa.length;p++)o[Xa[p]]=h[p].offsetWidth,a[Xa[p]]=h[p].offsetHeight;return Za.filter((function(e){return u(f[e])}))}))}function es(){var e=navigator.plugins;if(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];if(n){for(var i=[],o=0;o<n.length;++o){var a=n[o];i.push({type:a.type,suffixes:a.suffixes})}t.push({name:n.name,description:n.description,mimeTypes:i})}}return t}}function ts(){var e,t,r=!1,n=rs(),i=n[0],o=n[1];if(ns(i,o)){r=is(o),os(i,o);var a=ss(i),s=ss(i);a!==s?e=t="unstable":(t=a,as(i,o),e=ss(i))}else e=t="";return{winding:r,geometry:e,text:t}}function rs(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}function ns(e,t){return!(!t||!e.toDataURL)}function is(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}function os(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var r="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(r,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(r,4,45)}function as(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var r=0,n=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<n.length;r++){var i=n[r],o=i[0],a=i[1],s=i[2];t.fillStyle=o,t.beginPath(),t.arc(a,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}function ss(e){return e.toDataURL()}function cs(){var e,t=navigator,r=0;void 0!==t.maxTouchPoints?r=ba(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(r=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(i){e=!1}var n="ontouchstart"in window;return{maxTouchPoints:r,touchEvent:e,touchStart:n}}function ls(){return navigator.oscpu}function ds(){var e=navigator,t=[],r=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(void 0!==r&&t.push([r]),Array.isArray(e.languages))Ma()&&ja()||t.push(e.languages);else if("string"===typeof e.languages){var n=e.languages;n&&t.push(n.split(","))}return t}function us(){return window.screen.colorDepth}function hs(){return wa(_a(navigator.deviceMemory),void 0)}function fs(){var e=screen,t=function(e){return wa(ba(e),null)},r=[t(e.width),t(e.height)];return r.sort().reverse(),r}var ps,vs,ms=2500,gs=10;function ys(){if(void 0===vs){var e=function(){var t=ws();Ss(t)?vs=setTimeout(e,ms):(ps=t,vs=void 0)};e()}}function bs(){var e=this;return ys(),function(){return Qo(e,void 0,void 0,(function(){var e;return ea(this,(function(t){switch(t.label){case 0:return e=ws(),Ss(e)?ps?[2,ta([],ps,!0)]:Ua()?[4,Fa()]:[3,2]:[3,2];case 1:t.sent(),e=ws(),t.label=2;case 2:return Ss(e)||(ps=e),[2,e]}}))}))}}function _s(){var e=this,t=bs();return function(){return Qo(e,void 0,void 0,(function(){var e,r;return ea(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),r=function(e){return null===e?null:Ea(e,gs)},[2,[r(e[0]),r(e[1]),r(e[2]),r(e[3])]]}}))}))}}function ws(){var e=screen;return[wa(_a(e.availTop),null),wa(_a(e.width)-_a(e.availWidth)-wa(_a(e.availLeft),0),null),wa(_a(e.height)-_a(e.availHeight)-wa(_a(e.availTop),0),null),wa(_a(e.availLeft),null)]}function Ss(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function Es(){return wa(ba(navigator.hardwareConcurrency),void 0)}function ks(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var r=(new t).resolvedOptions().timeZone;if(r)return r}var n=-Is();return"UTC".concat(n>=0?"+":"").concat(Math.abs(n))}function Is(){var e=(new Date).getFullYear();return Math.max(_a(new Date(e,0,1).getTimezoneOffset()),_a(new Date(e,6,1).getTimezoneOffset()))}function Cs(){try{return!!window.sessionStorage}catch(error){return!0}}function Ts(){try{return!!window.localStorage}catch(e){return!0}}function Rs(){if(!xa()&&!Oa())try{return!!window.indexedDB}catch(e){return!0}}function xs(){return!!window.openDatabase}function Os(){return navigator.cpuClass}function Ms(){var e=navigator.platform;return"MacIntel"===e&&Aa()&&!Pa()?Na()?"iPad":"iPhone":e}function As(){return navigator.vendor||""}function Ps(){for(var e=[],t=0,r=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<r.length;t++){var n=r[t],i=window[n];i&&"object"===typeof i&&e.push(n)}return e.sort()}function Ds(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var r=-1!==t.cookie.indexOf("cookietest=");return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",r}catch(e){return!1}}function js(){var e=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',e("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",e("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",e("LnNwb25zb3JpdA=="),".ylamainos",e("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",e("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",e("LmhlYWRlci1ibG9ja2VkLWFk"),e("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",e("I2FkXzMwMFgyNTA="),e("I2Jhbm5lcmZsb2F0MjI="),e("I2NhbXBhaWduLWJhbm5lcg=="),e("I0FkLUNvbnRlbnQ=")],adGuardChinese:[e("LlppX2FkX2FfSA=="),e("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",e("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),e("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",e("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",e("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",e("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),e("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),e("LmFkZ29vZ2xl"),e("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[e("YW1wLWF1dG8tYWRz"),e("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",e("I2FkX2ludmlld19hcmVh")],adGuardRussian:[e("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),e("LnJlY2xhbWE="),'div[id^="smi2adblock"]',e("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[e("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),e("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",e("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),e("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),e("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",e("I3Jla2xhbWk="),e("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),e("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),e("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[e("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",e("LndpZGdldF9wb19hZHNfd2lkZ2V0"),e("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",e("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[e("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),e("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",e("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",e("I3Jla2xhbW5pLWJveA=="),e("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",e("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[e("I2FkdmVydGVudGll"),e("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",e("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",e("LnNwb25zb3JsaW5rZ3J1ZW4="),e("I3dlcmJ1bmdza3k="),e("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),e("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[e("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",e("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[e("LnJla2xhbW9zX3RhcnBhcw=="),e("LnJla2xhbW9zX251b3JvZG9z"),e("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),e("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),e("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[e("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[e("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),e("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",e("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[e("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),e("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),e("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",e("LmFkX19tYWlu"),e("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[e("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[e("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),e("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[e("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),e("I2xpdmVyZUFkV3JhcHBlcg=="),e("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),e("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[e("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",e("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),e("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),e("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[e("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),e("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),e("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",e("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),e("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),e("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),e("ZGl2I3NrYXBpZWNfYWQ=")],ro:[e("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),e("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),e("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),e("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[e("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),e("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),e("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",e("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),e("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",e("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}function Ls(e){var t=void 0===e?{}:e,r=t.debug;return Qo(this,void 0,void 0,(function(){var e,t,n,i,o,a;return ea(this,(function(s){switch(s.label){case 0:return Ns()?(e=js(),t=Object.keys(e),n=(a=[]).concat.apply(a,t.map((function(t){return e[t]}))),[4,Us(n)]):[2,void 0];case 1:return i=s.sent(),r&&Bs(e,i),o=t.filter((function(t){var r=e[t],n=Sa(r.map((function(e){return i[e]})));return n>.6*r.length})),o.sort(),[2,o]}}))}))}function Ns(){return Aa()||Ba()}function Us(e){var t;return Qo(this,void 0,void 0,(function(){var r,n,i,o,a,s,c;return ea(this,(function(l){switch(l.label){case 0:for(r=document,n=r.createElement("div"),i=new Array(e.length),o={},Fs(n),c=0;c<e.length;++c)a=Ga(e[c]),"DIALOG"===a.tagName&&a.show(),s=r.createElement("div"),Fs(s),s.appendChild(a),n.appendChild(s),i[c]=a;l.label=1;case 1:return r.body?[3,3]:[4,na(50)];case 2:return l.sent(),[3,1];case 3:r.body.appendChild(n);try{for(c=0;c<e.length;++c)i[c].offsetParent||(o[e[c]]=!0)}finally{null===(t=n.parentNode)||void 0===t||t.removeChild(n)}return[2,o]}}))}))}function Fs(e){e.style.setProperty("display","block","important")}function Bs(e,t){for(var r="DOM blockers debug:\n```",n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r+="\n".concat(o,":");for(var a=0,s=e[o];a<s.length;a++){var c=s[a];r+="\n  ".concat(t[c]?"🚫":"➡️"," ").concat(c)}}console.log("".concat(r,"\n```"))}function Ks(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var r=t[e];if(matchMedia("(color-gamut: ".concat(r,")")).matches)return r}}function qs(){return!!Vs("inverted")||!Vs("none")&&void 0}function Vs(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function Ws(){return!!$s("active")||!$s("none")&&void 0}function $s(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}var zs=100;function Gs(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=zs;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}}function Hs(){return Ys("no-preference")?0:Ys("high")||Ys("more")?1:Ys("low")||Ys("less")?-1:Ys("forced")?10:void 0}function Ys(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function Js(){return!!Xs("reduce")||!Xs("no-preference")&&void 0}function Xs(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function Zs(){return!!Qs("high")||!Qs("standard")&&void 0}function Qs(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var ec=Math,tc=function(){return 0};function rc(){var e=ec.acos||tc,t=ec.acosh||tc,r=ec.asin||tc,n=ec.asinh||tc,i=ec.atanh||tc,o=ec.atan||tc,a=ec.sin||tc,s=ec.sinh||tc,c=ec.cos||tc,l=ec.cosh||tc,d=ec.tan||tc,u=ec.tanh||tc,h=ec.exp||tc,f=ec.expm1||tc,p=ec.log1p||tc,v=function(e){return ec.pow(ec.PI,e)},m=function(e){return ec.log(e+ec.sqrt(e*e-1))},g=function(e){return ec.log(e+ec.sqrt(e*e+1))},y=function(e){return ec.log((1+e)/(1-e))/2},b=function(e){return ec.exp(e)-1/ec.exp(e)/2},_=function(e){return(ec.exp(e)+1/ec.exp(e))/2},w=function(e){return ec.exp(e)-1},S=function(e){return(ec.exp(2*e)-1)/(ec.exp(2*e)+1)},E=function(e){return ec.log(1+e)};return{acos:e(.12312423423423424),acosh:t(1e308),acoshPf:m(1e154),asin:r(.12312423423423424),asinh:n(1),asinhPf:g(1),atanh:i(.5),atanhPf:y(.5),atan:o(.5),sin:a(-1e300),sinh:s(1),sinhPf:b(1),cos:c(10.000000000123),cosh:l(1),coshPf:_(1),tan:d(-1e300),tanh:u(1),tanhPf:S(1),exp:h(1),expm1:f(1),expm1Pf:w(1),log1p:p(10),log1pPf:E(10),powPI:v(-100)}}var nc="mmMwWLliI0fiflO&1",ic={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function oc(){return ac((function(e,t){for(var r={},n={},i=0,o=Object.keys(ic);i<o.length;i++){var a=o[i],s=ic[a],c=s[0],l=void 0===c?{}:c,d=s[1],u=void 0===d?nc:d,h=e.createElement("span");h.textContent=u,h.style.whiteSpace="nowrap";for(var f=0,p=Object.keys(l);f<p.length;f++){var v=p[f],m=l[v];void 0!==m&&(h.style[v]=m)}r[a]=h,t.appendChild(e.createElement("br")),t.appendChild(h)}for(var g=0,y=Object.keys(ic);g<y.length;g++){a=y[g];n[a]=r[a].getBoundingClientRect().width}return n}))}function ac(e,t){return void 0===t&&(t=4e3),za((function(r,n){var i=n.document,o=i.body,a=o.style;a.width="".concat(t,"px"),a.webkitTextSizeAdjust=a.textSizeAdjust="none",Ma()?o.style.zoom="".concat(1/n.devicePixelRatio):Aa()&&(o.style.zoom="reset");var s=i.createElement("div");return s.textContent=ta([],Array(t/20<<0),!0).map((function(){return"word"})).join(" "),o.appendChild(s),e(i,o)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function sc(){var e,t=document.createElement("canvas"),r=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(r&&"getExtension"in r){var n=r.getExtension("WEBGL_debug_renderer_info");if(n)return{vendor:(r.getParameter(n.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(r.getParameter(n.UNMASKED_RENDERER_WEBGL)||"").toString()}}}function cc(){return navigator.pdfViewerEnabled}function lc(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}var dc={fonts:Qa,domBlockers:Ls,fontPreferences:oc,audio:Ka,screenFrame:_s,osCpu:ls,languages:ds,colorDepth:us,deviceMemory:hs,screenResolution:fs,hardwareConcurrency:Es,timezone:ks,sessionStorage:Cs,localStorage:Ts,indexedDB:Rs,openDatabase:xs,cpuClass:Os,platform:Ms,plugins:es,canvas:ts,touchSupport:cs,vendor:As,vendorFlavors:Ps,cookiesEnabled:Ds,colorGamut:Ks,invertedColors:qs,forcedColors:Ws,monochrome:Gs,contrast:Hs,reducedMotion:Js,hdr:Zs,math:rc,videoCard:sc,pdfViewerEnabled:cc,architecture:lc};function uc(e){return Ra(dc,e,[])}var hc="$ if upgrade to Pro: https://fpjs.dev/pro";function fc(e){var t=pc(e),r=vc(t);return{score:t,comment:hc.replace(/\$/g,"".concat(r))}}function pc(e){if(Ba())return.4;if(Aa())return Pa()?.5:.3;var t=e.platform.value||"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}function vc(e){return Ea(.99+.01*e,1e-4)}function mc(e){for(var t="",r=0,n=Object.keys(e).sort();r<n.length;r++){var i=n[r],o=e[i],a=o.error?"error":JSON.stringify(o.value);t+="".concat(t?"|":"").concat(i.replace(/([:|\\])/g,"\\$1"),":").concat(a)}return t}function gc(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?ma(t):t}),2)}function yc(e){return va(mc(e))}function bc(e){var t,r=fc(e);return{get visitorId(){return void 0===t&&(t=yc(this.components)),t},set visitorId(e){t=e},confidence:r,components:e,version:ra}}function _c(e){return void 0===e&&(e=50),ia(e,2*e)}function wc(e,t){var r=Date.now();return{get:function(n){return Qo(this,void 0,void 0,(function(){var i,o,a;return ea(this,(function(s){switch(s.label){case 0:return i=Date.now(),[4,e()];case 1:return o=s.sent(),a=bc(o),(t||(null===n||void 0===n?void 0:n.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(a.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(i-r,"\nvisitorId: ").concat(a.visitorId,"\ncomponents: ").concat(gc(o),"\n```")),[2,a]}}))}))}}}function Sc(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(ra,"/npm-monitoring"),!0),e.send()}catch(error){console.error(error)}}function Ec(e){var t=void 0===e?{}:e,r=t.delayFallback,n=t.debug,i=t.monitoring,o=void 0===i||i;return Qo(this,void 0,void 0,(function(){var e;return ea(this,(function(t){switch(t.label){case 0:return o&&Sc(),[4,_c(r)];case 1:return t.sent(),e=uc({debug:n}),[2,wc(e,n)]}}))}))}var kc={load:Ec,hashComponents:yc,componentsToDebugString:gc},Ic=n("4328"),Cc=n.n(Ic),Tc=n("21a6"),Rc=n.n(Tc),xc=n("6129"),Oc=function(e,t,r){var n=this,i={},o={},a={},s={},c=!1,l=0;n.id=ne["a"].makeid(),n.text=e,n.clbks={},n.hash=ne["a"].md5(_.map(t,e=>e.roomId).join(""));var d=null;n.destroy=function(){c=!0,i={},o={},s={},n.clbks={},a={}},n.stop=function(){c=!0};var u=function(){if(performance.now()-l>45e3)return!0;var e=_.find(i,e=>!e.error&&!e.finished)||!1;return!e||c||!!n.stopcase&&n.stopcase({timelines:i,events:o,results:s})},h=function(){return ne["a"].processArray(t,e=>f(e).then(()=>{if(u())return Promise.reject("stopped")}).catch(e=>(console.error(e),"stopped"==e?Promise.reject(e):Promise.resolve()))).then(()=>u()?Promise.reject("stopped"):h())},f=function(e){var t=r.mtrx.client.getRoom(e.roomId);if(!t)return n.error="nochat",Promise.reject(n.error);i[e.roomId]||(i[e.roomId]={line:new r.mtrx.sdk.TimelineWindow(r.mtrx.client,t.getLiveTimeline().getTimelineSet()),loadingPromise:null,loaded:!1,finished:!1});var n=i[e.roomId];return n.error?Promise.reject(error):n.finished?Promise.reject("finished"):new Promise((e,i)=>n.loaded?e(null):(n.loadingPromise||(n.loadingPromise=n.line.load().then(()=>r.mtrx.kit.allchatmembers([t],!1,!0)).then(e=>r.mtrx.kit.prepareChat(t)).then(()=>{n.loaded=!0}).catch(e=>(n.error=e,console.error(e),Promise.reject(e))).finally(()=>{delete n.loadingPromise})),u()?i("stopped"):n.loadingPromise.then().then(()=>{e(!0)}).catch(i))).then(e=>u()?Promise.reject("stopped"):e?Promise.resolve():n.line.canPaginate("b")?n.line.paginate("b",80):(n.finished=!0,Promise.reject("finished"))).then(()=>{if(u())return Promise.reject("stopped");var t=n.line.getEvents(),r=_.filter(t,t=>!_.find(a[e.roomId],e=>t.event.event_id==e.event.event_id));if(!t.length||a[e.roomId]&&!r.length)return n.finished=!0,Promise.reject("finished");a[e.roomId]=t;var i=_.filter(t,e=>"m.room.message"==e.event.type);return o[e.roomId]||(o[e.roomId]=[]),i=_.filter(i,t=>!_.find(o[e.roomId],e=>t.event.event_id==e.event.event_id)),o[e.roomId]=o[e.roomId].concat(i),Promise.resolve(i)}).then(e=>ne["a"].processArray(e,e=>{if(u())return Promise.reject("stopped");if(!t.pcrypto)return Promise.resolve();if(e.event.decrypted)return Promise.resolve();var r=null,n=ne["a"].deep(e,"event.content.msgtype");return"m.encrypted"==n&&(r=t.pcrypto.decryptEvent(e.event).then(t=>(e.event.decrypted=t,Promise.resolve())).catch(e=>(e.event.decrypted={msgtype:"m.bad.encrypted"},Promise.resolve()))),r?r.catch(e=>Promise.resolve()):Promise.resolve()}).then(()=>Promise.resolve(e))).then(t=>{var r=p(t);return s[e.roomId]||(s[e.roomId]=[]),s[e.roomId]=s[e.roomId].concat(r),s[e.roomId]=_.sortBy(s[e.roomId],e=>e.replacingEventDate()||e.getDate()||1/0),u()||v(),Promise.resolve()})},p=function(t){return ne["a"].clientsearch(e,t,e=>{var t=ne["a"].deep(e,"event.content.msgtype");if("m.file"==t)try{var r=JSON.parse(e.event.content.body||"{}")||{};return r.name||""}catch(e){}return((e.event.decrypted||e.event.content||{}).body||"").toLowerCase()})},v=function(){_.each(n.clbks,t=>{t({id:n.id,text:e,results:s})})};return n.execute=function(){return d||(v(),l=performance.now(),d=h().catch(e=>{console.error(e)}).finally(()=>{d=null}),d)},n.updateText=function(t){e=t,s={},_.each(o,(e,t)=>{s[t]=p(e)}),v()},n},Mc=function(e){var t=this,r={};return t.execute=function(e="",n,i,o={}){e=e.toLowerCase();var a=ne["a"].md5(_.map(n,e=>e.roomId).join("")),s=_.find(r,t=>t.text==e&&t.hash==a);if(s)return s.stopcase=i,s.clbks=o,s;var c=new Oc(e,n,t);return c.clbks=o,c.stopcase=i,r[c.id]=c,c},t.getprocess=function(e){return r[e]},t.stopall=function(){_.each(r,e=>{e.stop()})},t.destroy=function(){_.each(r,e=>{e.destroy()}),r={}},t.mtrx=e,t},Ac=Mc;const Pc=n("c567");var Dc=n("bc3a"),jc="userData_v3_";class Lc{constructor(e,t){Object(Go["a"])(this,"fastsync",(function(){var e=this.client.getSyncState();if("PREPARED"!==e&&"SYNCING"!==e)return this.client.retryImmediately().catch(e=>{console.log("fastsyncerror",e)})})),t||(t={}),this.core=e,this.baseUrl=t.baseUrl,this.baseSdkUrl=t.baseUrl,this.mirrors=t.mirrors||[],this.ready=!1,this.error=!1,this.kit=new Jo(this.core,t),this.sdk=Pc,this.sync="",this.nd=!1,this.version=4,this.dversion="2",this.backup={},this.db=null,this.device=t.device,this.customrequest=!0,this.devicekey="m8_device",this.searchEngine=new Ac(this)}setCredentials(){var e=this;return Object(zo["a"])((function*(){return e.core.user.matrixCredentials().then(t=>(e.credentials=t,Promise.resolve(t)))}))()}getDevices(){var t=localStorage[this.devicekey]||"";if(t)try{var r=JSON.parse(t);return r}catch(e){}return{}}setDevice(e,t){var r=this.getDevices();r[t]=e,localStorage[this.devicekey]=JSON.stringify(r),localStorage.device_=JSON.stringify(e)}getDevice(e){}request(t,r){var n=null,i=null;const o=Dc.CancelToken.source();var a={url:t.uri,params:t.qs,data:JSON.parse(t.body||"{}"),timeout:t.timeout,headers:t.headers,json:t.json,method:t.method,withCredentials:t.withCredentials,_matrix_opts:t,cancelToken:o.token,paramsSerializer:function(e){return Cc.a.stringify(e,t.qsStringifyOptions)}},s=Dc(a).then(e=>Promise.resolve(e)).catch(e=>(i=e,n=e.response,Promise.resolve(n))).then(t=>{var n=i;if(i)try{n=JSON.parse(ne["a"].deep(t,"request.responseText")),i=new Pc.MatrixError(n)}catch(e){}r(i,t,ne["a"].deep(t,"request.responseText")||"")});return s.abort=function(){o.cancel()},s}getFingerprint(){var e=this;return Object(zo["a"])((function*(){var t=yield kc.load(),r=yield t.get();return r.visitorId+e.dversion}))()}createMtrxClient(e){var t=Pc.createClient(e);return t.getProfileInfo=function(){return Promise.resolve({avatar_url:"",displayname:"test"})},t}getClient(){var t=this;return Object(zo["a"])((function*(){yield t.setCredentials(),t.baseSdkUrl=yield t.pingServers();var r={baseUrl:t.baseSdkUrl,idBaseUrl:t.baseUrl},n={baseUrl:t.baseSdkUrl,idBaseUrl:t.baseUrl};t.device&&(n.deviceId=t.device),t.customrequest&&(n.request=t.request);var i=t.createMtrxClient(n),o=null;try{var a=localStorage[jc+t.credentials.username];if(a)try{var s=JSON.parse(a),c=(new Date).getTime()-26784e5;s.date>c&&(o=s.data)}catch(e){console.error(e)}o||(o=yield i.login("m.login.password",{user:t.credentials.username,password:t.credentials.password,device_id:t.device}),o.expires_in_ms||(localStorage[jc+t.credentials.username]=JSON.stringify({data:o,date:(new Date).getTime()})),console.log("SET lsdatakey",jc))}catch(e){if(console.error(e),e&&e.indexOf&&e.indexOf("M_USER_DEACTIVATED")>-1)return t.error="M_USER_DEACTIVATED",null;if(!(yield i.isUsernameAvailable(t.credentials.username)))throw"Signup error, username is not available: "+e;o=yield i.register(t.credentials.username,t.credentials.password,null,{type:"m.login.dummy"})}var l=new Pc.IndexedDBStore({indexedDB:window.indexedDB,dbName:"matrix-js-sdk-v6:"+t.credentials.username,localStorage:window.localStorage});Object.assign(r,{userId:o.user_id,accessToken:o.access_token,unstableClientRelationAggregation:!0,timelineSupport:!0,store:l,deviceId:o.device_id}),t.customrequest&&(r.request=t.request);var d=t.createMtrxClient(r);window.client=d,window.core=t.core;try{yield l.startup()}catch(e){delete localStorage[jc+t.credentials.username]}t.client=d,t.initEvents();try{yield d.startClient({pollTimeout:55e3,resolveInvitesToProfiles:!0,initialSyncLimit:4,disablePresence:!0})}catch(e){delete localStorage[jc+t.credentials.username]}return t.access=r,d}))()}clearstorage(e){var t=Object.keys(localStorage),r=t.length;while(r--)t[r]&&0==t[r].indexOf(e)&&localStorage.removeItem(t[r])}clearstore(){var e=Number(localStorage.matrixversion||"0");if(e<this.version){this.clearstorage("crypto."),this.clearstorage("session.");var t=["","2","3","4","5","6","8"];_.each(t,(function(e){delete localStorage["m"+e+"_device"]}))}localStorage.matrixversion=this.version}pingServers(){var t=this;return Object(zo["a"])((function*(){var r=[].concat([t.baseUrl],t.mirrors),n=t.baseUrl;try{localStorage["onlymatrixmirrors"]&&t.mirrors.length&&(r=t.mirrors)}catch(e){}return Promise.race(_.map(r,e=>{var t=e+"/_matrix/client/versions";return Dc({url:t}).then(t=>{n=e}).catch(e=>(console.error(e),Promise.resolve()))})).then(()=>n)}))()}createClient(){var t=this;return Object(zo["a"])((function*(){try{t.client=yield t.getClient(),t.store=t.client.store,t.ready=!0}catch(e){console.error(e),t.error=e}return!0}))()}wait(){return ne["a"].pretry(()=>this.ready).then(()=>this.error?Promise.reject(this.error):Promise.resolve())}waitchats(){return ne["a"].pretry(()=>this.chatsready).then(()=>this.error?Promise.reject(this.error):Promise.resolve())}me(e){var t;return ne["a"].getmatrixid(e)==(null===(t=this.core.user.userinfo)||void 0===t?void 0:t.id)}reciepts(e){var t=(this.core.mtrx.store.rooms||{})[e.getRoomId()];if(t)return t.getReceiptsForEvent(e)}storeFileLocal(e,t){return t.arrayBuffer().then(r=>{const n=new Blob([new Uint8Array(r)],{type:t.type});return window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.storage&&window.cordova?window.POCKETNETINSTANCE.storage.saveFile(e,n):this.db?this.db.set(e,n):void 0})}download(e){if(!e)return Promise.reject("url _is_empty");var t=()=>ne["a"].fetchLocal(e).then(t=>(window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.storage&&window.cordova?window.POCKETNETINSTANCE.storage.saveFile(e,t.data):this.db&&this.db.set(e,t.data),Promise.resolve(t.data)));return window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.storage&&window.cordova?window.POCKETNETINSTANCE.storage.loadFile(e).then(e=>Promise.resolve(e),e=>t()):this.db?this.db.get(e).then(e=>Promise.resolve(e)).catch(()=>t()):t()}customRoomType(e){var t,r=this.core.mtrx.client.getRoom(e);if(!r)return null;var n=r.currentState.getStateEvents("m.room.custom","")||{};return null===(t=n.event)||void 0===t?void 0:t.content.type}isReaded(e,t){var r=this.reciepts(e);return _.find(r,e=>{var r=this.me(e.userId);return"m.read"==e.type&&(t&&r||!r&&!t)})}initEvents(){let e=this.core.mtrx.client.credentials.userId;this.client.on("RoomMember.membership",(t,r)=>{if(this.chatsready){var n=this.core.mtrx.client.getRoom(t.event.room_id);"invite"!==r.membership&&"join"!==r.membership||t.getSender()===e||this.core.notifier.event(t,n),n&&n.pcrypto&&n.pcrypto.userschanded()}}),this.client.on("Room.timeline",(t,r)=>{if(this.chatsready&&t.event.content&&("m.file"===t.event.content.msgtype&&(t.event.content.pbody=JSON.parse(t.event.content.body)),t.getSender()!==e)){var n=this.core.mtrx.client.getRoom(t.event.room_id);if(t.event.content["m.relates_to"]&&"m.replace"==t.event.content["m.relates_to"]["rel_type"])return!1;n&&this.core.pcrypto.rooms[t.event.room_id]&&this.core.notifier.event(t,n)}}),this.client.on("RoomMember.typing",(e,t)=>{this.core.store.dispatch("TYPING_EVENT",t)}),this.client.on("sync",(e,t,r)=>{this.setready(),this.core.store.dispatch("FETCH_CHATS").then(e=>{}),this.core.store.dispatch("FETCH_EVENTS"),this.core.store.commit("ALL_NOTIFICATIONS_COUNT",this.client.getRooms())})}setready(){this.chatsready||(this.chatsready=!0,this.core.store.commit("SET_CHATS_READY",!0))}initdb(){return Object(xc["a"])("files",1).then(e=>(this.db=e,Promise.resolve())).catch(()=>Promise.resolve())}init(){return this.createClient().then(()=>this.error?Promise.reject(this.error):this.initdb()).then(()=>Promise.resolve())}deactivateAccount(){return this.client?this.client.deactivateAccount(this.credentials,!0):Promise.reject("noclient")}destroy(){this.searchEngine.destroy(),this.client&&(window.cordova&&this.deletePusher(),this.client.stopClient()),this.chatsready=!1,this.ready=!1,this.error=!1}deletePusher(){var e;if(window.cordova&&(localStorage&&(e=localStorage.getItem("fcmtoken5")),e&&this.client.setPusher)){var t="pocketnet",r={app_display_name:t,app_id:t+window.cordova.platformId,data:{url:this.baseUrl+"/_matrix/push/v1/notify",default_payload:{aps:{sound:"default","content-available":1}}},device_display_name:window.device.manufacturer+" "+window.device.model,kind:null,lang:localStorage.getItem("loc")||"en",pushkey:e};this.client.setPusher(r).then(()=>{localStorage.removeItem("fcmtoken5")},e=>{console.log(e)})}}uploadContent(e,t){return this.client.uploadContent(e).then(e=>Promise.resolve(this.core.mtrx.client.mxcUrlToHttp(e.content_uri))).then(r=>t?this.storeFileLocal(r,e).then(()=>Promise.resolve(r)).catch(e=>Promise.resolve(r)):Promise.resolve(r))}originalEvent(t,r){var n=r.timelineSet.relations.getChildEventsForEvent(e.event.event_id,"m.reference","m.room.message");if(n){var i=n.getRelations();return i[0]}}clearEventId(e){var t=null;return e.event.content["m.relates_to"]&&"m.replace"==e.event.content["m.relates_to"]["rel_type"]&&(t=e.event.content["m.relates_to"]["event_id"]),t||e.getId()}textEvent(e,t,r={}){var n;return null!==(n=e.pcrypto)&&void 0!==n&&n.canBeEncrypt()?(r.encryptEvent&&r.encryptEvent(),e.pcrypto.encryptEvent(t).then(e=>(r.encryptedEvent&&r.encryptedEvent(e),Promise.resolve(e))).catch(e=>(console.error(e),r.encryptedEventError&&r.encryptedEventError(e),Promise.reject(e)))):Promise.resolve(this.sdk.ContentHelpers.makeTextMessage(t))}sendtext(e,t,{relation:r,from:n,donateLink:i},o){return window.findAndReplaceLinkClearReverse&&(t=window.findAndReplaceLinkClearReverse(t)),this.textEvent(e,t,o).then(t=>{var o;return r&&(t["m.relates_to"]={rel_type:r.type,event_id:this.clearEventId(r.event)}),t.resendMessage=()=>this.sendtext(...arguments),n&&(t["from"]=n),i&&(t["url"]=i),null!==(o=e.pcrypto)&&void 0!==o&&o.canBeEncrypt()?this.client.sendEvent(e.roomId,"m.room.message",t):this.client.sendMessage(e.roomId,t)})}sendFile(e,t,r,{relation:n,from:i},o){var a;r||(r={});var s={};s.name=t.name,s.type=t.type,s.size=t.size;var c=(()=>Promise.resolve(t))(),l=null;return null!==(a=e.pcrypto)&&void 0!==a&&a.canBeEncrypt()&&!o&&(c=e.pcrypto.encryptFile(t).then(e=>(s.secrets=e.secrets,Promise.resolve(e.file)))),c.then(e=>(l=this.client.uploadContent(e),l.abort&&(r.abort=l.abort),l)).then(e=>r.aborted?Promise.reject("aborted"):Promise.resolve(this.client.mxcUrlToHttp(e.content_uri))).then(e=>{s.url=e}).finally(()=>{if(!s.url)return Promise.reject("dontuploaded");let t=JSON.stringify(s);var r={body:t,msgtype:"m.file"};return r.resendMessage=()=>this.sendFile(...arguments),n&&(r["m.relates_to"]={rel_type:n.type,event_id:this.clearEventId(n.event)}),i&&(r["from"]=i),this.client.sendMessage(e.roomId,r)})}sendImageBase64(e,t,r,n){var i="toFileFetch";return t.indexOf("data:")>-1&&(i="toFile"),ne["a"].Base64[i](t).then(i=>this.sendImage(e,t,i,r,n))}sendAudioBase64(e,t,r,n){var i="toFileFetch";return t.indexOf("data:")>-1&&(i="toFile"),ne["a"].Base64[i](t).then(i=>this.sendAudio(e,t,i,r,n))}sendImage(e,t,r,n,{relation:i,from:o}={}){if(!r)return this.sendImageBase64(e,t,n,{relation:i,from:o});var a=new Xo["a"],s={};let c=t;return n||(n={}),a.wh(t).then(t=>{var n;return s=t,o&&(s.from=o),null!==(n=e.pcrypto)&&void 0!==n&&n.canBeEncrypt()?e.pcrypto.encryptFile(r).then(e=>(s.secrets=e.secrets,Promise.resolve(e.file))):Promise.resolve(r)}).then(e=>{var t=this.core.mtrx.uploadContent(e,!0);return t.abort&&(n.abort=t.abort),t}).then(e=>{if(n.aborted)return Promise.reject("aborted");c=e}).finally(()=>{var t={msgtype:"m.image",url:c,body:"Image",info:s};return t.resendMessage=()=>this.sendImage(...arguments),i&&(t["m.relates_to"]={rel_type:i.type,event_id:this.clearEventId(i.event)}),this.client.sendMessage(e.roomId,t)})}sendAudio(e,t,r,n,{relation:i,from:o}={}){if(!r)return this.sendAudioBase64(e,t,n,{relation:i,from:o});let a={},s=t;return a.from=o,new Promise(t=>{var n;if(null!==(n=e.pcrypto)&&void 0!==n&&n.canBeEncrypt())return e.pcrypto.encryptFile(r).then(e=>(a.secrets=e.secrets,t(e.file)));t(r)}).then(e=>{let t=this.core.mtrx.uploadContent(e,!0);return t.abort&&(n.abort=t.abort),t}).then(e=>{if(n.aborted)return Promise.reject("aborted");s=e}).finally(()=>{var t={msgtype:"m.audio",url:s,body:"Audio",info:a};return t.resendMessage=()=>this.sendAudio(...arguments),i&&(t["m.relates_to"]={rel_type:i.type,event_id:this.clearEventId(i.event)}),this.client.sendMessage(e.roomId,t)})}getFile(t,r){var n=this;return Object(zo["a"])((function*(){var i=!(!t.pcrypto||!ne["a"].deep(r,"event.content.info.secrets.keys")&&!ne["a"].deep(r,"event.content.pbody.secrets.keys"));if(i)try{var o=yield t.pcrypto.decryptKey(r.event);r.event.decryptKey=o}catch(e){return Promise.reject(e)}return n.download(r.event.content.pbody.url).then(e=>i?t.pcrypto.decryptFile(e,o,null,r.event.content.pbody):ne["a"].readFile(e).then(t=>{var n=r.event.content.pbody,i=t.name||n.name||"decrypted",o=(n.type||"").replace("encrypted/","")||(t.type||"").replace("encrypted/","");return new(window.wFile||window.File)([e],i,{type:o,name:i})})).then(e=>Promise.resolve({file:e,name:r.event.content.pbody.name})).catch(e=>Promise.reject(e))}))()}downloadFile(e,t){var r=this;return Object(zo["a"])((function*(){return r.getFile(e,t).then(e=>window.cordova&&ne["a"].saveFileCordova?new Promise((t,r)=>{ne["a"].saveFileCordova(e.file,e.name,(function(n={},i){i&&console.error(i),i?r("unable"):(n.type=e.type,t(n))}),!0)}):Rc.a.saveAs(e.file,e.name)).catch(e=>(console.error(e),Promise.reject(e)))}))()}getAudioUnencrypt(e,t){var r=this;return Object(zo["a"])((function*(){return t.event.content.audioData?Promise.resolve(t.event.content.audioData):r.download(t.event.content.url,!0).then(e=>ne["a"].readFile(e)).then(e=>(t.event.content.audioData=e,Promise.resolve(e)))}))()}getAudio(t,r){var n=this;return Object(zo["a"])((function*(){if(r.event.decryptedAudio)return Promise.resolve(r.event.decryptedAudio);try{var i=yield t.pcrypto.decryptKey(r.event);return r.event.decryptKey=i,n.download(r.event.content.url,!0).then(e=>t.pcrypto.decryptFile(e,i)).then(e=>ne["a"].readFile(e)).then(e=>(r.event.decryptedAudio=e,Promise.resolve(r.event.decryptedAudio))).catch(e=>Promise.reject(e))}catch(e){return Promise.reject(e)}}))()}getImage(t,r){var n=this;return Object(zo["a"])((function*(){if(r.event.decryptedImage)return Promise.resolve(r.event.decryptedImage);try{var i=yield t.pcrypto.decryptKey(r.event);return r.event.decryptKey=i,n.download(r.event.content.url,!0).then(e=>t.pcrypto.decryptFile(e,i)).then(e=>ne["a"].Base64.fromFile(e)).then(e=>(r.event.decryptedImage=e.replace("data:file;","data:image/jpeg;"),Promise.resolve(r.event.decryptedImage))).catch(e=>(console.error(e),Promise.reject(e)))}catch(e){return console.error(e),Promise.reject(e)}}))()}shareInChat(e,t){if(t.multiple)return ne["a"].processArray(t.multiple,t=>this.shareInChat(e,t));var r=this.client.getRoom(e);return r?this.core.mtrx.kit.prepareChat(r).then(e=>{var n=[];return _.each(t.images,e=>{var i=()=>this.sendImageBase64(r,e,{},{from:t.from});n.push(i)}),_.each(t.download,({event:e,chat:i})=>{var o=()=>this.core.mtrx.kit.prepareChat(i).then(()=>this.core.mtrx.getFile(i,e)).then(e=>this.sendFile(r,e.file,{},{from:t.from}));n.push(o)}),_.each(t.files,e=>{n.push(()=>this.sendFile(r,e,{},{from:t.from}))}),_.each(t.urls,e=>{n.push(()=>this.sendtext(r,e,{from:t.from}))}),_.each(t.messages,e=>{n.push(()=>this.sendtext(r,e,{from:t.from}))}),_.each(t.audio,e=>{var i="data:audio/mpeg;base64,"+ne["a"]._arrayBufferToBase64(e);n.push(()=>this.sendAudioBase64(r,i,{},{from:t.from}))}),ne["a"].processArray(n,e=>e())}):Promise.reject("chat:notfound")}opencontact(e){this.core.store.commit("setmodal",{caption:e.name,type:"contact",data:{contact:e}})}complain(e,t){this.core.store.commit("setmodal",{caption:e,type:"complain",data:t})}blockeduser(e){if(this.core.mtrx.client)return this.core.mtrx.client.isUserIgnored(this.core.user.matrixId(e))}blockUser(e){if(e=this.core.user.matrixId(e),this.client.isUserIgnored(e))return Promise.resolve();var t=this.client.getIgnoredUsers();return t.push(e),this.client.setIgnoredUsers(t).then(e=>Promise.resolve(e))}unblockUser(e){if(e=this.core.user.matrixId(e),!this.client.isUserIgnored(e))return Promise.resolve();var t=this.client.getIgnoredUsers();return t=_.filter(t,(function(t){return e!=t})),this.client.setIgnoredUsers(t).then(e=>Promise.resolve(e))}chatUsersInfo(e,t){t||(t="chatUsers");var r=this.core.store.state.users;return _.filter(_.map(this[t](e),e=>r[e.userId]),(function(e){return e}))}chatUsers(e){return this.core.store.state.chatusers[e]||[]}anotherChatUsers(e){return _.filter(this.chatUsers(e),e=>e.userId!=this.core.user.userinfo.id)}}var Nc=Lc;class Uc{constructor(e,t){Object(Go["a"])(this,"key","showednotifications"),Object(Go["a"])(this,"showed",{}),Object(Go["a"])(this,"show",(function(e,t){if("function"!=typeof t){var r=t;t=()=>{this.core.vm.$router.push(r).catch(e=>{}),this.core.apptochat&&this.core.apptochat()}}var n="bottom-right";this.core.vm.$store.state.mobile&&(n="top-left");var i=e.icon||null;i&&"undefined"!=typeof replaceArchiveInImage&&(i=replaceArchiveInImage(i)),this.core.vm.$message({event:e.event,title:e.title,message:e.message,roomId:e.roomId,iconImg:i,onClick:t,zIndex:999,supportHTML:!0,wrapperClassName:"notificationWrapper",position:n,type:"info",chat:e.chat,duration:3e3})})),t||(t={}),this.core=e,this.showed=JSON.parse(localStorage[this.key]||"{}")}addshowed(e){this.showed=JSON.parse(localStorage[this.key]||"{}"),this.showed[e]=!0,localStorage[this.key]=JSON.stringify(this.showed)}clearshowed(){this.showed={},localStorage[this.key]=JSON.stringify(this.showed)}playsound(){window.cordova||window.ion&&ion.sound.play("glass")}notifySoundOrAction(){var e=localStorage["lastsounddate"]||null;e&&(e=new Date(e),ne["a"].date.addseconds(e,10)>new Date)||(localStorage["lastsounddate"]=new Date,window.cordova&&window.POCKETNETINSTANCE?window.POCKETNETINSTANCE.mobile.vibration.small():this.playsound())}decrypt(e,t){return this.core.mtrx.kit.allchatmembers([t],!1,!0).then(()=>this.core.mtrx.kit.prepareChat(t)).then(r=>e.event.decrypted?Promise.resolve():t.pcrypto.decryptEvent(e.event)).catch(e=>Promise.resolve())}message(e,t,r){var n=this.core.vm.$store.state;if(!this.showed[e.event.event_id]){this.addshowed(e.event.event_id);var i=ne["a"].deep(this,"core.external.clbks.NOTIFICATION")||{},o="",a=ne["a"].deep(e,"event.type")||"";if(!(a.indexOf("m.call")>-1)){["m.room.member"].indexOf(a)>-1&&(o="invite"),["m.room.message"].indexOf(a)>-1&&(o="message"),["m.room.name"].indexOf(a)>-1&&(o=""),["m.room.power_levels"].indexOf(a)>-1&&(o="moder"),["m.room.redaction"].indexOf(a)>-1&&(o="redaction"),"m.encrypted"==ne["a"].deep(e,"event.content.msgtype")&&(o="encrypted");var s=()=>{var a={title:t.name,event:e,message:"m.encrypted"==e.event.content.type?"***":e.event.content.body,roomId:e.event.room_id,icon:t.image,chat:r,ctype:o};_.each(i,(function(e){e(a)})),(n.currentRoom!==e.event.room_id||this.core.hiddenInParent)&&(this.notifySoundOrAction(),this.show(a,"/chat?id="+e.event.room_id))};"encrypted"==o?this.decrypt(e,r).then(s):s()}}}event(e,t){var r;let n=this.core.mtrx.client.getPushActionsForEvent(e);if(n&&(n.notify||"m.room.request_calls_access"===e.event.type)){var i=moment(moment.utc(e.event.origin_server_ts).toDate()).local().toDate(),o=ne["a"].date.addseconds(i,10)>moment().toDate();if(o){var a=this.core.mtrx.isReaded(e,!0);null!==t&&void 0!==t&&null!==(r=t.summary)&&void 0!==r&&r.stream||a||!this.core.mtrx.me(e.getSender())&&e.getSender()&&e.getSender()!==this.core.mtrx.client.credentials.userId&&this.core.user.usersInfo([ne["a"].getmatrixid(e.getSender())]).then(r=>{r&&r[0]&&this.message(e,r[0],t)})}}}}var Fc=Uc,Bc=n("e7f6"),Kc=n("6967"),qc=n.n(Kc),Vc=n("bc3a"),{error:Wc,byError:$c}=n("d854"),zc=(Vc=function(){var t=["data.result"],r=["data.error"];function n(e){return i.apply(this,arguments)}function i(){return i=Object(zo["a"])((function*({to:n,data:i}){i||(i={}),_.each(i,(e,t)=>{(_.isArray(e)||_.isObject(e))&&(i[t]=JSON.stringify(e))});var o=null;try{o=yield qc()({method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},url:n,data:Cc.a.stringify(i),timeout:35e3})}catch(e){o=e.response}if(!o)return Promise.reject("noresponse");var a=_.find(r,(function(e){return ne["a"].deep(o.data,e)}));if(a)return Promise.reject($c(ne["a"].deep(o.data,a)));var s=_.find(t,(function(e){return ne["a"].deep(o.data,e)}));return s?Promise.resolve(ne["a"].deep(o.data,s)):Promise.reject("error")})),i.apply(this,arguments)}return{axios:n}},Vc),Gc=function(e){var t=this,r=new zc,n={},i={},o={},a={},s={pocketnet:null},c=function(){return Promise.resolve()},l=function(e){return o[e.storage]?Promise.resolve(null):(a[e.storage]||(a[e.storage]=Object(xc["a"])(e.storage,e.version||1,e.time).then(t=>(o[e.storage]=t,Promise.resolve(o[e.storage]))).finally(()=>{delete a[e.storage]})),a[e.storage])},d=function(e,t,r,o,a){_.isArray(e)||(e=[e]);var s={};return r||(r=t),n[t]||(n[t]={}),i[t]||(i[t]={}),(a?l(a):c()).then(i=>i?Promise.all(_.map(e,e=>n[t][e]?Promise.resolve():i.get(e).then(e=>(n[t][e[r]]=e,Promise.resolve())).catch(e=>Promise.resolve()))):Promise.resolve()).then(d=>{var u=_.uniq(_.filter(e,(function(e){return o||!n[t][e]||n[t][e].nocache}))),h=_.filter(u,(function(e){if(!i[t][e])return i[t][e]=!0,!0;s[e]=!0})),f=function(o,d){return(a?l(a):c()).then(e=>e?Promise.all(_.map(o,t=>t[r]?e.set(t[r],t):Promise.resolve())):Promise.resolve()).then(()=>{_.each(o,(function(e){e[r]&&(n[t][e[r]]=e)})),_.each(d,(function(e){delete i[t][e],delete s[e],n[t][e]||(n[t][e]="error")}));var a={};return ne["a"].pretry(()=>(_.each(e,(function(e){n[t][e]&&("error"!=n[t][e]&&(a[e]=n[t][e]),delete i[t][e],delete s[e])})),0==_.toArray(s).length)).then(()=>Promise.resolve(a))})};return Promise.resolve({id:h,handle:f})})},u=function(){return e&&e.waitonline?e.waitonline():Promise.resolve()},h=function(e,t,r,n,i){return d(e,t,r,n,i).then(e=>e.id.length?Promise.reject(e):e.handle([]))},f=function(e,t){return u().then(()=>(e||(e={}),r.axios({to:t,data:e}).then(e=>Promise.resolve(e)).catch(r=>"noresponse"==r?new Promise((r,n)=>{setTimeout((function(){f(e,t).then(e=>r(e)).catch(e=>n(e))}),3e3)}):Promise.reject(r))))};return t.clearCache=function(e){e?delete n[e]:n={}},t.pocketnet={common:(t,r)=>(t||(t={}),s.pocketnet||(s.pocketnet=ne["a"].deep(window,"POCKETNETINSTANCE.api")),s.pocketnet||"undefined"==typeof Api||(s.pocketnet=new Api(e)),s.pocketnet?s.pocketnet.initIf().then(()=>s.pocketnet.wait.ready("use",3e3)).then(e=>s.pocketnet.rpc(r,t.parameters)).catch(e=>({error:e})):(t.method=r,t.node="185.148.147.15",t.parameters=ne["a"].hexEncode(JSON.stringify(t.parameters||"")),f(t,servers.pocketnet+"/rpc-"+(r||"common")))),userState:e=>{_.isArray(e)||(e=[e]);var r=ne["a"].deep(window,"POCKETNETINSTANCE.platform.psdk");if(r)return r.userState.load(e).then(e=>_.toArray(e));var n=[e.join(",")];return t.pocketnet.common({parameters:n},"getuserstate")},userStateMe:e=>t.pocketnet.userState(e),userInfoCached:(e,r)=>{var n=[];return r||(n=_.filter(_.map(e,e=>ne["a"].deep(window,"POCKETNETINSTANCE.platform.sdk.userscl.storage."+e)||null),e=>e),e=_.filter(e,e=>!_.find(n,t=>t.address==e))),t.pocketnet.userInfo(e,r).then(e=>(e=_.toArray(e),_.each(n,t=>{e.push(t)}),Promise.resolve(e)))},search:e=>{var r=[e,"users"];return t.pocketnet.common({parameters:r},"searchusers").then(e=>Promise.resolve(e||[]))},userInfo:(e,r)=>{if(!e.length)return Promise.resolve([]);var n=ne["a"].deep(window,"POCKETNETINSTANCE.platform.psdk");return n?n.userInfo.load(e,!0,r).then(t=>(t=_.filter(t,t=>t&&t.address&&e.indexOf(t.address)>-1),_.toArray(t))):h(e,"pocketnet_userInfo","address",r,{storage:"userInfo",time:86400}).catch(e=>{if(!e||!e.id)return Promise.reject(e);var r=[e.id,"1"];return t.pocketnet.common({parameters:r},"getuserprofile").then(t=>e.handle(t,e.id))})},postInfo:e=>{var r=[[e.parameters]];return t.pocketnet.common({parameters:r},"getrawtransactionwithmessagebyid").then(e=>Promise.resolve(e))},pocketNetProfileAddress:e=>{var r=[[e.parameters]];return t.pocketnet.common({parameters:r},"getuseraddress").then(e=>Promise.resolve(e))},pocketNetProfileInfo:e=>{var r=[[e.parameters]];return t.pocketnet.common({parameters:r},"getuserprofile").then(e=>Promise.resolve(e))}},t},Hc=Gc,Yc=n("9c21"),Jc=n("ebaa"),Xc=function(){var e=this,t=e._self._c;return t("Stream",{attrs:{style:e.style,chat:e.chat},on:{"update:style":function(t){e.style=t},"update:chat":function(t){e.chat=t}}})},Zc=[],Qc={name:"chatExported",components:{Stream:()=>Promise.all([n.e(3),n.e(4),n.e(2),n.e(10)]).then(n.bind(null,"08e6"))},provide(){return{streamMode:this.streamMode,videoMeta:this.videoMeta,authorId:this.authorId,powerLevel:Object.assign(this.powerLevels,{get:this.getPowerLevel}),adminActions:{toggleModerStatus:this.toggleModerStatus,toggleBanStatus:this.toggleBanStatus},menuState:{get:()=>this.menuState,set:e=>this.$set(this,"menuState",e)},matches:{},markText:()=>{},userBanned:this.userBanned}},data:function(){return{style:null,videoUrl:null,videoMeta:null,authorId:null,chat:null,powerLevels:{administrator:100,moderator:50,participant:0},menuState:!1,userBanned:{value:null,get:()=>{var e;return null===(e=this.userBanned)||void 0===e?void 0:e.value},set:e=>{this.$set(this.userBanned,"value",e)}}}},created(){this.videoMeta.isLive||this.leaveRoom(),this.userBanned.set(((e,t)=>{const r=this.m_chat.myUserId;return"ban"===(null===(e=this.chat.currentState)||void 0===e||null===(t=e.members[r])||void 0===t?void 0:t.membership)})())},computed:{...Object(A["d"])({auth:e=>e.auth}),streamMode(){return"stream"===this.style},m_chat(){return this.core.mtrx.client.getRoom(this.chat.roomId)||{}}},methods:{getMember(e){return this.m_chat.getMember(e.userId.includes("@")?e.userId:ne["a"].getMatrixIdFull(e.userId,this.core.domain))},getPowerLevel(e){if(e.powerLevel>-1)for(let t in this.powerLevels)if(e.powerLevel>=this.powerLevels[t])return t},toggleModerStatus(e){e.events||(e=this.getMember(e));const t=this.m_chat.currentState.getStateEvents("m.room.power_levels");return this.core.mtrx.client.setPowerLevel(this.chat.roomId,e.userId,50===e.powerLevel?0:50,t[0]),Promise.resolve()},toggleBanStatus(e){return e.events||(e=this.getMember(e)),"ban"===e.membership?this.core.mtrx.client.unban(this.m_chat.roomId,e.userId).then(()=>{this.core.mtrx.client.invite(this.m_chat.roomId,e.userId)}):this.core.mtrx.client.ban(this.m_chat.roomId,e.userId,"admin ban"),Promise.resolve()},leaveRoom(){this.core.mtrx.client.leave(this.chat.roomId).then(e=>{})}}},el=Qc,tl=Object(I["a"])(el,Xc,Zc,!1,null,null,null,!0),rl=tl.exports;function nl(){const e=n("2db5"),t=e.keys().map(e=>({key:e,locale:e.match(/[a-z0-9-_]+/i)[0]})).reduce((t,{key:r,locale:n})=>({...t,[n]:e(r)}),{});return{context:e,messages:t}}s["default"].use(Fi);const{context:il,messages:ol}=nl(),al=new Fi({locale:"en",messages:ol,silentTranslationWarn:!0}),sl=s["default"].extend({...rl,store:ce,i18n:al});class cl{constructor(e,t){this.core=e,this.instances={}}changeLocalization(e){al.locale=e}chat(e,t,r){var n=arguments,i=this;return Object(zo["a"])((function*(){var o,a,s,c,l,d,u,h,f;(yield null===(o=i.core)||void 0===o||null===(a=o.mtrx)||void 0===a?void 0:a.waitchats(),r.videoMeta||"stream"!==r.style)||(yield null===(d=window.POCKETNETINSTANCE)||void 0===d||null===(u=d.platform)||void 0===u||null===(h=u.sdk)||void 0===h||null===(f=h.videos)||void 0===f?void 0:f.info([r.videoUrl]).then(()=>window.parseVideo(r.videoUrl)).then(e=>{var t;"peertube"===(null===(t=e)||void 0===t?void 0:t.type)&&(e=_.clone(window.peertubeglobalcache[e.id]),r.videoMeta=e)}));const p=i.core.vm.$store.state.chatsMap[t];if(p){const t=new sl({data:{chat:p,...r}});return t.$options.shadowRoot=e.ownerDocument.body,t.$mount(e),t.destroy=()=>{t.$destroy(),t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el)},Promise.resolve(t)}if("undefined"!==typeof(null===(s=i.core)||void 0===s||null===(c=s.mtrx)||void 0===c||null===(l=c.client)||void 0===l?void 0:l.peekInRoom))return yield i.core.mtrx.client.peekInRoom(t).then(e=>{if(!e)return Promise.reject("missing:chat");i.core.vm.$store.commit("SET_CHATS_TO_STORE",i.core.vm.$store.state.chats.concat([Object.assign(e.summary,{stream:!0})]))}),i.chat.apply(i,n)}))()}}var ll=cl,dl=()=>{let e=2,t=[];function r(r){let n=r.length,i=new Uint8Array(n*e);for(let t=0;t<n;t++){let n=t*e,o=r[t];o>1?o=1:o<-1&&(o=-1),o*=32768,i[n]=o,i[n+1]=o>>8}t.push(i)}function n(r){let n=t.length?t[0].length:0,i=t.length*n,o=new Uint8Array(44+i),a=new DataView(o.buffer);a.setUint32(0,1380533830,!1),a.setUint32(4,36+i,!0),a.setUint32(8,1463899717,!1),a.setUint32(12,1718449184,!1),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,1,!0),a.setUint32(24,r,!0),a.setUint32(28,r*e,!0),a.setUint16(32,e,!0),a.setUint16(34,8*e,!0),a.setUint32(36,1684108385,!1),a.setUint32(40,i,!0);for(let e=0;e<t.length;e++)o.set(t[e],e*n+44);t=[],postMessage(o.buffer,[o.buffer])}onmessage=e=>{"encode"===e.data[0]?r(e.data[1]):"dump"===e.data[0]&&n(e.data[1])}};let ul,hl=window.AudioContext||window.webkitAudioContext,fl=e=>{let t=e.toString().replace(/^(\(\)\s*=>|function\s*\(\))\s*{/,"").replace(/}$/,""),r=new Blob([t]);return new Worker(URL.createObjectURL(r))},pl=e=>{let t=new Event("error");return t.data=new Error("Wrong state for "+e),t};class vl{constructor(e,t=null){this.stream=e,this.config=t,this.state="inactive",this.em=document.createDocumentFragment(),this.encoder=fl(vl.encoder);let r=this;this.encoder.addEventListener("message",e=>{let t=new Event("dataavailable");t.data=new Blob([e.data],{type:r.mimeType}),r.em.dispatchEvent(t),"inactive"===r.state&&r.em.dispatchEvent(new Event("stop"))})}start(e){if("inactive"!==this.state)return this.em.dispatchEvent(pl("start"));this.state="recording",ul||(ul=new hl(this.config)),this.clone=this.stream.clone(),this.input=ul.createMediaStreamSource(this.clone),this.processor=ul.createScriptProcessor(2048,1,1),this.encoder.postMessage(["init",ul.sampleRate]),this.processor.onaudioprocess=e=>{"recording"===this.state&&this.encoder.postMessage(["encode",e.inputBuffer.getChannelData(0)])},this.input.connect(this.processor),this.processor.connect(ul.destination),this.em.dispatchEvent(new Event("start")),e&&(this.slicing=setInterval(()=>{"recording"===this.state&&this.requestData()},e))}stop(){return"inactive"===this.state?this.em.dispatchEvent(pl("stop")):(this.requestData(),this.state="inactive",this.clone.getTracks().forEach(e=>{e.stop()}),this.processor.disconnect(),this.input.disconnect(),clearInterval(this.slicing))}pause(){return"recording"!==this.state?this.em.dispatchEvent(pl("pause")):(this.state="paused",this.em.dispatchEvent(new Event("pause")))}resume(){return"paused"!==this.state?this.em.dispatchEvent(pl("resume")):(this.state="recording",this.em.dispatchEvent(new Event("resume")))}requestData(){return"inactive"===this.state?this.em.dispatchEvent(pl("requestData")):this.encoder.postMessage(["dump",ul.sampleRate])}addEventListener(...e){this.em.addEventListener(...e)}removeEventListener(...e){this.em.removeEventListener(...e)}dispatchEvent(...e){this.em.dispatchEvent(...e)}}vl.prototype.mimeType="audio/wav",vl.isTypeSupported=e=>vl.prototype.mimeType===e,vl.notSupported=!navigator.mediaDevices||!hl,vl.encoder=dl;var ml=vl,gl=()=>{importScripts("https://cdnjs.cloudflare.com/ajax/libs/lamejs/1.2.0/lame.min.js");let e,t=1,r=128,n=44100,i=new Int8Array;function o(e,t){if(0===t.length)return e;let r=new Int8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function a(i){e=new lamejs.Mp3Encoder(t,i||n,r)}function s(t){for(let e=0;e<t.length;e++)t[e]=32767.5*t[e];let r=e.encodeBuffer(t);i=o(i,r)}function c(){let t=e.flush();i=o(i,t);let r=i.buffer;i=new Int8Array,postMessage(r,[r])}onmessage=e=>{"init"===e.data[0]?a(e.data[1]):"encode"===e.data[0]?s(e.data[1]):c(e.data[1])}};ml.encoder=gl,ml.prototype.mimeType="audio/mpeg";class yl{constructor(t,r){Object(Go["a"])(this,"hideOptimization",(function(e){this.store.commit("hideOptimization",e)})),Object(Go["a"])(this,"hideInParent",(function(e){this.hiddenInParent=e,this.store.commit("hiddenInParent",e),e&&this.mtrx.searchEngine.stopall()})),Object(Go["a"])(this,"setCalls",(function(){var t=this;try{let e={el:document.querySelector("body"),parameters:{getUserInfo:function(){var e=Object(zo["a"])((function*(e){return e=ne["a"].hexDecode(e.split(":")[0].replace("@","")),t.user.usersInfo([e],!0,!1)}));return function(t){return e.apply(this,arguments)}}(),getWithLocale:e=>this.vm.$i18n.t(e)}};window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.platform&&(e=window.POCKETNETINSTANCE.platform.getCallsOptions()),this.mtrx.bastyonCalls=new BastyonCalls(this.client||client,this.mtrx.sdk,e.el,e.parameters),this.mtrx.bastyonCalls.on("initcall",t=>{var r,n,i,o,a,s;(this.vm.$store.state.currentPlayingVoiceMessage&&this.vm.$store.state.currentPlayingVoiceMessage.pause(),null!==(r=window)&&void 0!==r&&null!==(n=r.POCKETNETINSTANCE)&&void 0!==n&&n.playingvideo)&&(null===(a=window)||void 0===a||null===(s=a.POCKETNETINSTANCE)||void 0===s||s.playingvideo.pause(),document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen());null!==(i=e)&&void 0!==i&&null!==(o=i.parameters)&&void 0!==o&&o.onInitCall&&e.parameters.onInitCall(t)}),this.mtrx.bastyonCalls.on("error",t=>{var r,n;null!==(r=e)&&void 0!==r&&null!==(n=r.parameters)&&void 0!==n&&n.onError&&e.parameters.onError(t)}),this.mtrx.bastyonCalls.on("connected",t=>{var r,n;null!==(r=e)&&void 0!==r&&null!==(n=r.parameters)&&void 0!==n&&n.onConnected&&e.parameters.onConnected(t)}),this.mtrx.bastyonCalls.on("ended",t=>{var r,n;null!==(r=e)&&void 0!==r&&null!==(n=r.parameters)&&void 0!==n&&n.onEnded&&e.parameters.onEnded(t)}),this.store.commit("SET_CALL",!!this.mtrx.bastyonCalls)}catch(e){return void console.log(e)}})),Object(Go["a"])(this,"canback",(function(){return!this.store.state.gallery})),Object(Go["a"])(this,"update",(function({block:e}){this.pcrypto.set.block(e)})),Object(Go["a"])(this,"logerror",(function(e,t){window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.Logger.error({err:e,payload:t,code:402})})),Object(Go["a"])(this,"destroy",(function(){this.store.commit("clearall"),this.removeEvents(),"chats"!=!this.vm.$route.name&&this.vm.$router.push("/chats").catch(e=>{}),this.user.destroy(),this.mtrx.destroy(),this.pcrypto.destroy(),window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.platform.matrixchat.unlink(this),this.vm.$destroy(),this.mtrx.bastyonCalls&&this.mtrx.bastyonCalls.destroy()})),Object(Go["a"])(this,"init",(function(){this.focusListener.init(),this.onlineListener.init(),this.initEvents(),window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.platform.matrixchat.link(this)})),Object(Go["a"])(this,"setUnauthorized",(function(e){this.unauthorized=e,this.store.commit("SET_UNAUTHORIZED",e)})),Object(Go["a"])(this,"initWithUserBase",(function(){return this.loading=!0,this.user.checkCredentials().then(e=>this.user.userInfo()).then(e=>e?e.deleted?Promise.reject("deleted"):this.pcrypto.prepare():Promise.reject("unknown")).then(e=>this.mtrx.init()).then(t=>{if(this.loading=!1,this.setUnauthorized(null),this.pcrypto.helpers.checkuser(),ne["a"].deep(this.user,"userinfo.name"))try{var r=ne["a"].deep(this.user,"userinfo.name"),n=localStorage["dsname_"+this.user.userinfo.id]||"";r!=n&&(localStorage["dsname_"+this.user.userinfo.id]=r,this.mtrx.client.setDisplayName(ne["a"].deep(this.user,"userinfo.name")))}catch(e){}return this.vm.$store.state.isCallsEnabled&&this.setCalls(),Promise.resolve()}).catch(e=>(console.log("E",e),this.loading=!1,"unauthorized"!=e&&"unknown"!=e&&"deleted"!=e||this.setUnauthorized(e),Promise.resolve()))})),Object(Go["a"])(this,"initWithUser",(function(e){return this.user.setCredentials(e),this.initWithUserBase().then(()=>this.user.initKeysProcess()).catch(e=>Promise.resolve())})),Object(Go["a"])(this,"waitonline",(function(){return this.online?Promise.resolve():new Promise((e,t)=>{ne["a"].retry(()=>this.online,(function(){e()}),5)})})),Object(Go["a"])(this,"refreshComponentCache",(function(){const e=new CustomEvent("refresh-component-cache");window.dispatchEvent(e)})),Object(Go["a"])(this,"removeEvents",(function(){delete this.focusListener.clbks.resume.core,delete this.focusListener.clbks.pause.core,delete this.onlineListener.clbks.online.core,delete this.onlineListener.clbks.offline.core})),Object(Go["a"])(this,"initEvents",(function(){this.focusListener.clbks.resume.core=e=>{this.focus=this.focusListener.focus},this.focusListener.clbks.pause.core=()=>{this.focus=this.focusListener.focus},this.onlineListener.clbks.online.core=e=>{this.online=this.onlineListener.online},this.onlineListener.clbks.offline.core=()=>{this.online=this.onlineListener.online}})),Object(Go["a"])(this,"externalLink",(function(e){this.external=e})),Object(Go["a"])(this,"destroyExternalLink",(function(){this.external={}})),Object(Go["a"])(this,"currentTime",(function(){var e=Math.floor((new Date).getTime()/1e3);return this.timeDifference&&(e+=this.timeDifference),e})),Object(Go["a"])(this,"wait",(function(){return ne["a"].pretry(()=>!this.loading).then(()=>Promise.resolve())})),Object(Go["a"])(this,"renderChatToElement",(function(e,t,r){return this.exporter.chat(e,t,r)})),r||(r={}),this.options={listofproxies:r.listofproxies},r.mtrx||(r.mtrx={}),"test.matrix.pocketnet.app"==r.domain?this.options.burn={v:"minutes",w:120,m:30,b:15}:this.options.burn={v:"days",w:7,m:2,b:1},r.mtrx.baseUrl="https://"+r.domain,r.mtrx.mirrors=_.map(r.mirrors||[],e=>"https://"+e),this.apiHandlers={error:function(){},success:function(){}},this.domain=r.domain,this.vm=t,this.mtrx=new Nc(this,r.mtrx),this.user=new Bc["a"](this,r.user||{}),this.notifier=new Fc(this,r.notifier||{}),this.pcrypto=new Yc["a"](this,r.pcrypto||{}),this.api=new Hc(this,r.servers),this.onlineListener=new Jc["a"].online(this),this.focusListener=new Jc["a"].focus(this),this.online=!0,this.focus=!0,this.store=t.$store,this.loading=!0,this.external={},this.hiddenInParent=!1,this.customRecorderConnected=!1,this.pcrypto.init(this.user),this.media=window.BSTMedia,this.audioContext=null,this.exporter=new ll(this)}joinRoom(e){return this.wait().then(()=>this.mtrx.wait()).then(()=>this.unauthorized?(this.store.commit("JOINROOM",e),Promise.reject(this.unauthorized)):Promise.resolve()).then(t=>(this.store.state.chatsMap[e]?this.vm.$router.push("/chat?id="+e).catch(e=>{}):(this.store.commit("JOINROOM",e),this.vm.$router.push("/publicPreview?id="+e).catch(e=>{})),Promise.resolve()))}connect(e){return this.wait().then(()=>this.mtrx.wait()).then(()=>this.unauthorized?(this.store.commit("CONNECT",ne["a"].hexEncode(e)),Promise.reject(this.unauthorized)):this.user.usersInfo([e],!0)).then(t=>{var r=this.mtrx.kit.tetatetid(t[0],this.user.userinfo);return r?(this.store.state.chatsMap[r]?this.gotoRoute("/chat?id="+r):this.gotoRoute("/contact?id="+ne["a"].hexEncode(e)),Promise.resolve()):Promise.reject("roomId")})}cancelshare(){return this.store.commit("SHARE",null),Promise.resolve()}share(e){return this.store.commit("SHARE",e),this.vm.$router.push("/chats").catch(e=>{}),Promise.resolve()}goto(e){this.cancelDefaultRoute=!0,this.mtrx.wait().then(()=>{this.vm.$router.push("/chat?id="+e).catch(e=>{})})}gotoRoute(e){this.cancelDefaultRoute=!0,this.mtrx.wait().then(()=>{this.vm.$router.push(e).catch(e=>{})})}gopage(e){this.mtrx.wait().then(()=>{this.vm.$router.push(e).catch(e=>{})})}activeChange(e){this.activeState&&this.activeState(e)}updateUser(){return this.user.userInfo(!0).then(e=>{})}isactive(){return this.vm.$store.state.minimized&&this.vm.$store.state.active&&this.vm.$store.state.pocketnet}sitemessage(e){var t="bottom-right";this.vm.$store.state.mobile&&(t="top-left"),this.vm.$message({title:e,zIndex:999,supportHTML:!0,wrapperClassName:"notificationWrapper",position:t,type:"info",duration:2e3})}invitepnt(){var e=ne["a"].deep(this,"user.userinfo.source");if(e)if(window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.platform)this.backtoapp&&this.backtoapp(),window.POCKETNETINSTANCE.platform.ui.socialshare("welcome?connect="+e.address,{sharing:{image:"",images:[e.i],title:this.vm.$i18n.t("caption.joinApp"),html:{body:this.vm.$i18n.t("caption.joinApp")+" "+this.vm.$i18n.t("caption.hasInvitedToJoin"),preview:this.vm.$i18n.t("caption.joinApp")+" "+this.vm.$i18n.t("caption.hasInvitedToJoin")},text:{body:this.vm.$i18n.t("caption.joinApp")+" "+this.vm.$i18n.t("caption.hasInvitedToJoin"),preview:this.vm.$i18n.t("caption.joinApp")+" "+this.vm.$i18n.t("caption.hasInvitedToJoin")}},embedding:{type:"connect",id:e.address}});else{var t="https://bastyon.com/welcome?connect="+e.address;ne["a"].copytext(t),this.sitemessage("The link was copied successfully")}else this.sitemessage("The error was occuried")}getOrCreateRoom({users:t=[],alliasSuffix:r="",parameters:n={}}){var i=!1,o=null;return t.length?t.length>10?Promise.reject("users:max:10"):(this.vm.$store.state.globalpreloader=!0,this.user.usersInfo(t,!0).then(a=>{if(a.length!=t.length)return Promise.reject("users:info:notloaded");var s=null;1==t.length?(s=this.mtrx.kit.tetatetid(a[0],this.user.userinfo),i=!0):s=this.mtrx.kit.groupideq(a.concat(this.user.userinfo));var c=_.map(a,e=>this.user.matrixId(e.id)),l=1==t.length?[{type:"m.set.encrypted",state_key:"",content:{encrypted:!0}}]:[],d=s+(r?"@"+r:""),u=_.find(this.mtrx.client.getRooms(),e=>ne["a"].getmatrixidFA(e.getCanonicalAlias())=="#"+d);if(u){o=u.roomId;try{var h=u.currentState.members[this.user.userinfo.id];if(h&&"join"==h.membership)return this.mtrx.client.joinRoom(o)}catch(e){console.error(e)}return Promise.resolve()}var f=(n.name||i?"#":"@")+(n.name||ne["a"].makeid());return this.mtrx.client.createRoom({room_alias_name:d,visibility:"private",invite:c,name:f,initial_state:l}).then(e=>{o=e.room_id;var t=this.mtrx.client.getRoom(o);if(!t)return Promise.reject("chat:notfound");if(i||n.equal){let e=t.currentState.getStateEvents("m.room.power_levels");if(e)return Promise.all(_.map(c,r=>this.mtrx.client.setPowerLevel(t.roomId,r,100,e[0]).catch(e=>{})))}})}).then(()=>({roomid:o})).finally(()=>{this.vm.$store.state.globalpreloader=!1})):Promise.reject("users:empty")}sendMessage({roomid:e,content:t,alliasSuffix:r}){var n=this.mtrx.client.getRoom(e);return n?this.mtrx.shareInChat(e,t).then(e=>(this.vm.$store.commit("icon",{icon:"success",message:""}),Promise.resolve(e))).catch(e=>(console.error(e),this.vm.$store.commit("icon",{icon:"error",message:""}),Promise.reject(e))):Promise.reject("chat:notfound")}convertAudioToBase64(e){return Object(zo["a"])((function*(){const t=new FileReader;return t.readAsDataURL(e),new Promise(e=>{t.onloadend=()=>{e(t.result)}})}))()}initMediaRecorder(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?this.media.permissions({audio:!0}).then(()=>this.media.get({audio:!0})).then(e=>{let t=new ml(e,{audioBitsPerSecond:32e3});return t}).catch((function(e){return Promise.reject(e)})):Promise.reject()}getAudioContext(){return this.audioContext&&"closed"!=this.audioContext.state?("suspended"===this.audioContext.state&&this.audioContext.resume(),this.audioContext):(this.audioContext=new(window.AudioContext||window.webkitAudioContext)||null,ne["a"].isios()&&window.unmute&&unmute(this.audioContext,!1,!1),this.audioContext)}createStreamRoom(e){return this.mtrx.client.createRoom({room_alias_name:ne["a"].makeid()+"/hidden",visibility:"public",invite:[],name:"@"+e,initial_state:[{type:"m.room.guest_access",state_key:"",content:{guest_access:"can_join"}}]}).then(e=>(this.mtrx.client.setRoomRetention(e.room_id,{max_lifetime:"20y"}),this.mtrx.client.setGuestAccess(e.room_id,{allowJoin:!0,allowRead:!0}).then(()=>Promise.resolve(e.room_id)))).catch(e=>Promise.reject(e))}removeStreamRoom(e){return this.mtrx.client.removeRoom(e)}getNotificationsCount(){return this.vm.$store.state.allnotifications}}var bl=yl,_l=n("e508"),wl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active},attrs:{id:"preloader",platform:e.platform}},[e._m(0)])},Sl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"variant"},[t("div",{staticClass:"iospreloadercenter"},[t("div",{staticClass:"spinner-eff spinner-eff-3"},[t("div",{staticClass:"circle circle-1"}),t("div",{staticClass:"circle circle-2"}),t("div",{staticClass:"circle circle-3"})])])])}],El={name:"preloader",props:{},computed:Object(A["d"])({pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:e=>e.active,platform:function(){return ne["a"].deep(window,"device.platform")||"browser"}})},kl=El;function Il(e){var t=n("2e42");t.__inject__&&t.__inject__(e);var r=n("850b");r.__inject__&&r.__inject__(e)}var Cl=Object(I["a"])(kl,wl,Sl,!1,Il,"64c94140",null,!0),Tl=Cl.exports,Rl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active},attrs:{id:"wai-fixedmessageicon"}},[t("div",{staticClass:"wrapper"},[t("div",{staticClass:"table"},[t("div",{staticClass:"cell"},[e.icon?t("div",{staticClass:"iconWrapper"},[t("sweetalert",{attrs:{icon:e.icon}})],1):e._e(),e.message?t("div",{staticClass:"message"},[t("div",[e._v(e._s(e.message))])]):e._e()])])])])},xl=[],Ol={name:"fixedmessageicon",props:{},components:{sweetalert:()=>Promise.all([n.e(22),n.e(27)]).then(n.bind(null,"32fe"))},data:function(){return{loading:!1}},created:()=>{},watch:{icon:{immediate:!0,handler(){this.init()}}},computed:Object(A["d"])({auth:e=>e.auth,icon:function(){return this.$store.state.icon?this.$store.state.icon.icon:null},message:function(){return this.$store.state.icon?this.$store.state.icon.message:null},pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:e=>e.active}),methods:{init:function(){var e,t=this;const r=null===(e=this.$store.state.icon)||void 0===e?void 0:e.timeout;this.$store.state.icon.manual||setTimeout((function(){t.$store.commit("icon",null)}),r||2e3)}}},Ml=Ol;function Al(e){var t=n("40e1");t.__inject__&&t.__inject__(e)}var Pl=Object(I["a"])(Ml,Rl,xl,!1,Al,"1766477c",null,!0),Dl=Pl.exports,jl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{attrs:{id:"wai-date"}},[e._v(e._s(e.label))])},Ll=[],Nl={name:"date",props:["date","nofuture"],computed:Object(A["d"])({auth:e=>e.auth,label:function(){if(this.nofuture&&moment.utc(this.date).unix()>=moment.utc(new Date).unix())return moment(moment.utc(new Date).toDate()).local().fromNow();var e=this.date;return this.$f.format_date(e)}})};moment(moment.utc(new Date).toDate()).local().fromNow();var Ul=Nl;function Fl(e){var t=n("f760");t.__inject__&&t.__inject__(e)}var Bl=Object(I["a"])(Ul,jl,Ll,!1,Fl,"6f7832dc",null,!0),Kl=Bl.exports,ql=function(e,t){return e("div",{staticClass:"userpic"},[e("div",{staticClass:"userpicSquareWrapper"},[e("div",{staticClass:"userpicSquareInnerWrapper",class:t.props.status},[t.props.image?e("bgimage",{attrs:{src:t.props.image}}):[t.props.userinfo.image?e("bgimage",{attrs:{src:t.props.userinfo.image}}):t._e(),!t.props.userinfo.image&&t.props.userinfo.name&&"blocked"!=t.props.status&&"ban"!=t.props.status?e("div",{staticClass:"charAvatar"},[e("span",[t._v(t._s(t.props.userinfo.name.charAt(0)))])]):t._e(),"blocked"==t.props.status||"ban"==t.props.status||"invite"==t.props.status||"leave"==t.props.status?e("div",{staticClass:"statusIcon"},["blocked"==t.props.status||"ban"==t.props.status?e("i",{staticClass:"fas fa-ban"}):t._e(),"leave"==t.props.status?e("i",{staticClass:"fas fa-times"}):t._e(),"invite"==t.props.status?e("i",{staticClass:"fas fa-user-plus"}):t._e()]):t._e()]],2)])])},Vl=[],Wl={name:"userpic",props:{userinfo:{type:Object,default:{}},image:"",status:""}},$l=Wl;function zl(e){var t=n("9896");t.__inject__&&t.__inject__(e)}var Gl=Object(I["a"])($l,ql,Vl,!0,zl,"69908458",null,!0),Hl=Gl.exports,Yl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"userspic",class:{oneuser:e.users&&1===e.users.length}},[e.users&&0===e.users.length?t("userpic",{attrs:{userinfo:e.single,status:e.single.status}}):e._e(),e.users&&1===e.users.length?t("userpic",{attrs:{status:e.status[e.users[0].id],userinfo:e.users[0],unseen:e.unseen}}):e._e(),e.users&&e.users.length>1?t("many",{attrs:{slidesPerView:e.slidesPerView,status:e.status,userinfo:e.users,unseen:e.unseen}}):e._e(),e.users&&e.unseen?t("div",{staticClass:"unseenupic"},[e._v(" "+e._s(e.unseen>99?"99":e.unseen)+" ")]):e._e()],1)},Jl=[],Xl=n("ecec"),Zl={name:"userspic",props:{users:Array,single:{},unseen:Number,slidesPerView:Number,status:{type:Object,default:{}}},data:function(){return{}},components:{many:Xl["a"]}},Ql=Zl;function ed(e){var t=n("aeba");t.__inject__&&t.__inject__(e)}var td=Object(I["a"])(Ql,Yl,Jl,!1,ed,"2d8181cb",null,!0),rd=td.exports,nd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bgimage",class:{loaded:e.loaded,hasimage:e.src},style:"background-image:url("+e.imageSrc+"); background-size: cover; background-position: center center; background-repeat: no-repeat"},[e._t("cnt")],2)},id=[];window.chatImagesLoadedCache={};var od={name:"bgimage",directives:{},props:{src:String},watch:{src:{immediate:!0,handler:function(){this.load()}}},data:function(){return{loaded:!1,imageSrc:""}},beforeMount:function(){window.chatImagesLoadedCache[this.src]&&(this.loaded=!0)},methods:{load:function(){if(this.src){if(this.imageSrc=this.src,this.imageSrc&&"undefined"!=typeof replaceArchiveInImage&&(this.imageSrc=replaceArchiveInImage(this.imageSrc)),this.loaded)return;var e=new Image;e.src=this.imageSrc,e.onload=()=>{window.chatImagesLoadedCache[this.src]=!0,this.loaded=!0}}else this.loaded=!0}}},ad=od;function sd(e){var t=n("cb8d");t.__inject__&&t.__inject__(e)}var cd=Object(I["a"])(ad,nd,id,!1,sd,"b55021d2",null,!0),ld=cd.exports,dd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"wai-logotype"}},[t("div",{staticClass:"items"},[t("div",{staticClass:"item"},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:"img/ldpiwide-"+e.themeL+".png"}})])])])])},ud=[],hd={black:"black",white:"white",classic:"white"},fd={name:"wai-logotype",props:{},data:function(){return{loading:!1}},created:()=>{},watch:{},computed:Object(A["d"])({auth:e=>e.auth,themeL:function(e){return hd[e.theme]||"white"}}),methods:{}},pd=fd;function vd(e){var t=n("7a52");t.__inject__&&t.__inject__(e)}var md=Object(I["a"])(pd,dd,ud,!1,vd,"40188122",null,!0),gd=md.exports,yd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"outer-div",class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,active:e.active,mobile:e.mobile},on:{click:function(e){e.stopPropagation()}}},[e.menuIsVisible&&!e.hiddenInParent?t("div",{staticClass:"dropdown",class:{visible:e.menuIsVisible}},[t("div",{staticClass:"backgr",on:{click:function(t){return e.hidePopup()}}}),t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hidePopup,expression:"hidePopup"}],staticClass:"menuwrapper"},[t("simpleMenu",{attrs:{items:e.menuItems},scopedSlots:e._u([{key:"default",fn:function(r){return[e._t("default",(function(){return[t("div",{staticClass:"menu-item",on:{click:function(t){return e.menuItemClick(r.item)}}},[t("div",{staticClass:"iconWrapper"},[r.item.icon?t("i",{class:r.item.icon}):e._e()]),t("div",{staticClass:"title"},[e._v(" "+e._s(r.item.title)+" ")])])]}),{item:r.item})]}}],null,!0)}),t("div",{staticClass:"cancelWrapper"},[t("div",{staticClass:"menu-item",on:{click:function(t){return e.hidePopup()}}},[t("div",{staticClass:"iconWrapper"}),t("div",{staticClass:"title"},[e._v(e._s(e.$t("cancel")))])])])],1)]):e._e(),t("div",{staticClass:"dropDownIcon",on:{click:e.onClickHandler}},[t("i",{class:"icon "+(e.icon||"fas fa-ellipsis-h")})])])},bd=[],_d=n("0104"),wd={name:"dropdownMenu",props:{menuItems:{type:Array,required:!0},rowObject:{type:Object},icon:String},components:{simpleMenu:_d["a"]},data:function(){return{loading:!1,menuIsVisible:!1}},watch:{menuIsVisible:function(e){this.$emit("menuIsVisible",e)}},computed:{dropdownWidthInner(){return this.dropdownWidth},...Object(A["d"])({pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,mobile:e=>e.mobile,active:e=>e.active,hiddenInParent:e=>e.hiddenInParent})},methods:{menuItemClick(e){this.$emit("itemClicked",e,this.rowObject,{hidePopup:this.hidePopup,showPopup:this.showPopup})},onClickHandler(){this.menuIsVisible=!this.menuIsVisible},hidePopup(){this.menuIsVisible=!1},showPopup(){this.menuIsVisible=!0}}},Sd=wd;function Ed(e){var t=n("dd43");t.__inject__&&t.__inject__(e)}var kd=Object(I["a"])(Sd,yd,bd,!1,Ed,"7da73fce",null,!0),Id=kd.exports,Cd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"back",on:{click:e.click}},[t("div",{staticClass:"iconbutton"},[t("i",{class:e.icon||"fas fa-angle-left"})])])},Td=[],Rd={name:"backButton",props:{icon:String,action:{type:String,default:""},caption:{type:String,default:""}},methods:{click:function(){this.action?"back"==this.action?this.$router.go(-1):this.$router.push(this.action).catch(e=>{}):this.$emit("back")}}},xd=Rd;function Od(e){var t=n("a204");t.__inject__&&t.__inject__(e)}var Md=Object(I["a"])(xd,Cd,Td,!1,Od,"c585ce68",null,!0),Ad=Md.exports,Pd=n("08da"),Dd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active,unauthorized:e.unauthorized,modalShowed:!!e.modalShowed,mobile:e.mobile},attrs:{id:"maincontent"},on:{mouseenter:e.mouseenter,mouseleave:e.mouseleave}},[t("div",{staticClass:"headerSpacerWrapper"},[t("div",{staticClass:"headerSpacerWrapperOvf"},[t("div",{ref:"scrollable",staticClass:"headerSpacer"},[e._t("content",(function(){return[e._v("   ")]}))],2)]),t("pmenu"),t("transition",{attrs:{name:"fademodal"}},[e.modalShowed&&e.modalShowed.data&&!e.hiddenInParent?t("modal",{on:{close:e.closeModal},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(e._s(e.modalShowed.caption))]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"modalcommoncontent"},["complain"==e.modalShowed.type?t("complain",{attrs:{p:e.modalShowed.data}}):e._e(),"contact"==e.modalShowed.type?t("contact",{attrs:{contact:e.modalShowed.data.contact}}):e._e(),"showuserselect"==e.modalShowed.type?t("contacts",{attrs:{users:e.modalShowed.data.users,mode:"Select"},on:{close:e.closeModal,select:t=>{e.modalShowed.data.userselected(t),e.closeModal()}}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,2440016345)}):e._e()],1),!e.unauthorized&&e.rbackexp?t("div",{staticClass:"expandp",on:{click:e.setactive,mousemove:e.effect}},[e._m(0)]):e._e()],1),e.iconshow?t("transition",{attrs:{name:"fade"}},[t("fixedmessageicon")],1):e._e()],1)},jd=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"etablew"},[t("div",{staticClass:"etable table"},[t("div",[t("i",{staticClass:"fas fa-expand-arrows-alt"})])])])}],Ld={name:"maincontent",components:{contact:()=>n.e(17).then(n.bind(null,"d3ff")),contacts:()=>n.e(24).then(n.bind(null,"f978")),complain:()=>n.e(26).then(n.bind(null,"c27d"))},props:{rbackexp:Boolean},data:function(){return{loading:!1}},created:()=>{},watch:{active(e){e||this.closeModal()}},computed:Object(A["d"])({auth:e=>e.auth,iconshow:function(){return!!this.$store.state.icon},pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:e=>e.active,modalShowed:e=>e.modalShowed,hiddenInParent:e=>e.hiddenInParent,mobile:e=>e.mobile,unauthorized:e=>e.unauthorized}),methods:{setactive:function(){this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),this.$store.commit("setiteraction",!0)},mouseenter:function(){},mouseleave:function(){this.$store.state.autohide&&this.$store.commit("active",!1),this.$store.commit("blockactive",{value:!1,item:"main"})},effect:function(e){},closeModal:function(){this.$store.commit("setmodal",null)},scroll:function(e){this.$refs["scrollable"].scrollTop=e||0}}},Nd=Ld;function Ud(e){var t=n("305c");t.__inject__&&t.__inject__(e)}var Fd=Object(I["a"])(Nd,Dd,jd,!1,Ud,"60e6c210",null,!0),Bd=Fd.exports,Kd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active,collapsed:e.collapsed,expanded:!e.collapsed},attrs:{id:"search"}},[t("div",{staticClass:"searchWrapper"},[t("div",{staticClass:"iconWrapper"},[e.chat&&(e.searchTxt||null!==e.collapsed&&!e.collapsed)?t("i",{staticClass:"fas fa-angle-left",on:{click:e.toggle}}):t("i",{staticClass:"fas fa-search",on:{click:e.toggle}})]),t("div",{staticClass:"inputWrapper"},[t("input",{ref:"input",attrs:{placeholder:e.placeholder||this.$i18n.t("caption.search"),type:"text"},domProps:{value:e.searchTxt},on:{keyup:e.change,input:e.change,focus:e.focused,blur:e.blured}})]),e.searchTxt?t("div",{staticClass:"iconWrapper right"},[t("i",{staticClass:"fas fa-times",on:{click:e.clear}})]):e._e(),e.chat&&e.matches.all.length&&!e.collapsed?t("div",{staticClass:"matches"},[t("span",{staticClass:"current-match"},[e._v(e._s(e.matches.current+1)+"/"+e._s(e.matches.all.length))]),t("i",{staticClass:"prev-match fas fa-chevron-down",on:{click:e.prevMatch}}),t("i",{staticClass:"next-match fas fa-chevron-up",on:{click:e.nextMatch}})]):e._e()])])},qd=[],Vd={name:"search",props:{placeholder:String,chat:!1,minimize:{type:Boolean,default:null}},inject:["matches"],data:function(){var e;return{loading:!1,isTyping:!1,searchTxt:(null===(e=this.matches)||void 0===e?void 0:e.value)||"",collapsed:this.minimize}},mounted:function(){document.onkeydown=this.search},beforeDestroy:function(){window.removeEventListener("keypress",()=>this.search())},watch:{searchTxt:{handler:_.debounce((function(){var e,t,r,n;"function"===typeof(null===(e=this.matches)||void 0===e?void 0:e.clear)&&(null===(t=this.matches)||void 0===t||t.clear()),"function"===typeof(null===(r=this.matches)||void 0===r?void 0:r.search)&&(null===(n=this.matches)||void 0===n||n.search(this.searchTxt)),this.calcMatches()}),500)},"matches.all":{handler:_.debounce((function(){this.calcMatches()}))}},computed:Object(A["d"])({auth:e=>e.auth,pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:function(e){return e.active||!this.minimize}}),methods:{change:function(e){this.searchTxt=e.target.value},search:function(e){(114===e.keyCode||e.ctrlKey&&70===e.keyCode)&&(e.preventDefault(),this.toggle()),27===e.keyCode&&(null===this.collapsed||this.collapsed?this.$router.push("chats").catch(e=>{}):this.collapsed=!0,this.clear())},toggle:function(){null!==this.minimize&&(this.collapsed=!this.collapsed),!this.collapsed&&this.$refs.input&&this.$refs.input.focus(),this.searchTxt&&this.clear()},clear:function(e){var t,r;(this.searchTxt="","function"===typeof(null===(t=this.matches)||void 0===t?void 0:t.clear))&&(null===(r=this.matches)||void 0===r||r.clear(),this.toggle())},clickicon:function(){this.$refs["input"].focus()},blured:function(){this.$store.commit("blockactive",{value:!1,item:"input"})},focused:function(){this.$store.commit("blockactive",{value:!0,item:"input"})},calcMatches:function(){this.matches.current>this.matches.all.length-1?this.matches.current=0:this.matches.current<0&&(this.matches.current=this.matches.all.length-1),this.matches.all.forEach((e,t)=>{e.classList.remove("current"),t===this.matches.current&&(e.classList.add("current"),"function"===typeof(null===e||void 0===e?void 0:e.component.scrollTo)&&(null===e||void 0===e||e.component.scrollTo()))})},prevMatch:function(){this.calcMatches(--this.matches.current)},nextMatch:function(){this.calcMatches(++this.matches.current)}}},Wd=Vd;function $d(e){var t=n("bbc2");t.__inject__&&t.__inject__(e)}var zd=Object(I["a"])(Wd,Kd,qd,!1,$d,"6a2059ba",null,!0),Gd=zd.exports,Hd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{bin:e.pocketnet,bout:!e.pocketnet,minimized:e.minimized,fix:e.pocketnet,active:e.active},attrs:{id:"simpleSearch"}},[t("div",{staticClass:"searchWrapper"},[t("div",{staticClass:"inputWrapper"},[t("input",{ref:"input",attrs:{placeholder:e.placeholder||this.$i18n.t("caption.search"),"v-model":e.searchTxt,type:"text"},on:{paste:e.paste,keydown:e.keydown,input:e.change,focus:e.focused,blur:e.blured}})]),e.loading?t("div",{staticClass:"iconWrapper"},[t("linepreloader")],1):[e._t("default",(function(){return[e.searchTxt?e._e():t("div",{staticClass:"iconWrapper"},[t("i",{staticClass:"fas fa-search"})]),e.searchTxt?t("div",{staticClass:"iconWrapper",on:{click:e.clear}},[t("i",{staticClass:"fas fa-times"})]):e._e()]}))]],2)])},Yd=[],Jd={name:"search",props:{placeholder:String,minimize:{type:Boolean,default:!1},loading:Boolean,activity:String,value:String,controlKeys:Boolean},data:function(){return{isTyping:!1,searchTxt:this.value||""}},watch:{searchTxt:{handler:_.debounce((function(){var e=this.searchTxt;e!==this.value&&(this.$emit("input",e),this.$emit("search",e))}),500)},value:{immediate:!0,handler:function(e){e!==this.searchTxt&&(this.searchTxt=e)}}},computed:Object(A["d"])({auth:e=>e.auth,pocketnet:e=>e.pocketnet,minimized:e=>e.minimized,active:function(e){return e.active||!this.minimize}}),methods:{change:function(e){this.searchTxt=e.target.value},clear:function(){this.searchTxt="",this.$emit("input","")},clickicon:function(){this.$refs["input"]&&this.$refs["input"].focus()},focus:function(){this.$refs["input"]&&this.$refs["input"].focus()},keydown(e){let t=!1;if(this.controlKeys&&(40!==e.keyCode&&38!==e.keyCode||(this.$emit("controlKey",40===e.keyCode?"down":"up"),t=!0),39!==e.keyCode&&13!==e.keyCode||(this.$emit("controlKey","enter"),t=!0)),t)return e.preventDefault(),!1},paste:function(e){this.$emit("paste",e)},blured:function(){this.$store.commit("blockactive",{value:!1,item:"input"})},focused:function(){this.$store.commit("blockactive",{value:!0,item:"input"})}}},Xd=Jd;function Zd(e){var t=n("3c16");t.__inject__&&t.__inject__(e)}var Qd=Object(I["a"])(Xd,Hd,Yd,!1,Zd,"398c013e",null,!0),eu=Qd.exports,tu=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},ru=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"linepreloader"}},[t("span"),t("span"),t("span")])}],nu={name:"linepreloader",props:{}},iu=nu;function ou(e){var t=n("a3ba");t.__inject__&&t.__inject__(e)}var au=Object(I["a"])(iu,tu,ru,!1,ou,"d10d1e22",null,!0),su=au.exports,cu=n("b9dd");function lu(){const e=n("2db5"),t=e.keys().map(e=>({key:e,locale:e.match(/[a-z0-9-_]+/i)[0]})).reduce((t,{key:r,locale:n})=>({...t,[n]:e(r)}),{});return{context:e,messages:t}}s["default"].use(_o.a),s["default"].component("eventsEvent",Eo["default"]),s["default"].component("listmenu",No),s["default"].component("listmenuwithupload",$o),s["default"].component("list",Oo),s["default"].use(mo),s["default"].use(fn),s["default"].use(Xr["a"]),s["default"].use(Fi),s["default"].use(yo.a),s["default"].use(So.a),s["default"].config.productionTip=!1,s["default"].prototype.$f=ne["a"],s["default"].use(cu["a"]),s["default"].component("pmenu",Br["a"]),s["default"].component("modal",Fr),s["default"].component("swipable",Jr),s["default"].component("preloader",Tl),s["default"].component("date",Kl),s["default"].component("userpic",Hl),s["default"].component("userspic",rd),s["default"].component("fixedmessageicon",Dl),s["default"].component("bgimage",ld),s["default"].component("logotype",gd),s["default"].component("dropdownMenu",Id),s["default"].component("backButton",Ad),s["default"].component("topheader",Pd["a"]),s["default"].component("maincontent",Bd),s["default"].component("search",Gd),s["default"].component("simpleSearch",eu),s["default"].component("linepreloader",su),s["default"].use(_l["a"]),s["default"].directive("click-outside",{bind:function(e,t,r){e.clickOutsideEvent=function(n){e==n.target||e.contains(n.target)||r.context[t.expression](n)},document.body.addEventListener("click",e.clickOutsideEvent)},unbind:function(e){document.body.removeEventListener("click",e.clickOutsideEvent)}});const du=(e,t)=>{if(0===e)return 0;const r=e>10&&e<20,n=e%10===1;return t<4?!r&&n?1:2:!r&&n?1:!r&&e%10>=2&&e%10<=4||t<4?2:3},{context:uu,messages:hu}=lu(),fu=new Fi({locale:"en",messages:hu,silentTranslationWarn:!0,pluralRules:{ru:du}});var pu=null,vu={install:function(e){Object.defineProperty(e.prototype,"core",{get(){return pu}})}};s["default"].use(vu);var mu={de:!0,ru:!0,en:!0,fr:!0,cmn:!0,it:!0,es:!0,kr:!0},gu={i18n:fu,store:ce,router:Ar,name:"App",components:{MainWrapper:H,userUnauthorized:re},provide(){return{isChatEncrypted:this.isChatEncrypted,matches:this.matches,markText:this.markText,streamMode:this.streamMode,menuState:{get:()=>this.menuState,set:e=>this.$set(this,"menuState",e)},adminActions:{},powerLevel:{}}},props:{address:{type:String,default:""},privatekey:{type:String,defautt:""},pocketnet:{type:String,default:""},viewtype:{type:String,default:"single"},mobile:{type:String,default:""},recording:{type:String,default:""},iscallsenabled:{type:String,default:"false"},pkoindisabled:{type:String,default:""},ctheme:String,fcmtoken:String,localization:String,pip:{type:Boolean,default:!1},device:String,cssrules:{type:String,default:[]}},data:function(){return{isChatEncrypted:{value:!1,state:this.isChatEncryptedState},matches:{value:"",all:[],current:0,search:this.search,prepend:this.prependMatch,append:this.appendMatch,clear:this.clearMatches},menuState:!1}},watch:{fcmtoken:function(){this.setPusher(this.fcmtoken)},localization:{immediate:!0,handler:function(){mu[this.localization]?fu.locale=this.localization:fu.locale="en",this.generateTeamroomMessages(),moment.locale(fu.locale),this.core&&this.core.exporter&&this.core.exporter.changeLocalization(fu.locale)}},mobile:function(){this.$store.commit("setMobile",this.mobile),this.$store.commit("minimize"),setTimeout(()=>{this.$router.push("/chats").catch(e=>{})},300),this.clearMatches()},pocketnet:function(){this.$store.commit("setPocketnet",this.pocketnet),this.$store.commit("minimize")}},computed:{streamMode:function(){return"stream"===this.style},statetheme:function(){return this.$store.state.theme},theme:function(){return this.ctheme||this.statetheme},unauthorized:function(){return this.$store.state.unauthorized},online:function(){return this.$store.state.online},loading:function(){return this.$store.state.loading},minimized:function(){return!this.mobile&&this.$store.state.minimized},active:function(){return!this.mobile&&this.$store.state.active},globalpreloader:function(){return this.$store.state.globalpreloader},share:function(){if(!this.unauthorized)return this.$store.state.share},closebybg:function(){return!this.$store.state.pinchat},unselect:function(){return this.$store.state.voicerecording}},methods:{hide:function(){this.$store.commit("minimize",!0),setTimeout(()=>{"chats"!==this.$route.name&&"publicPreview"!==this.$route.name&&"chatSettings"!==this.$route.name&&!0!==pu.cancelDefaultRoute&&this.$router.push("/chats").catch(e=>{})},500),this.clearMatches()},iteraction:function(){this.$store.commit("setiteraction",!0)},setPusher(e){var t;localStorage&&(t=localStorage.getItem("fcmtoken5")),t!=e&&this.core.mtrx.wait().then(t=>{this.core.mtrx.deletePusher();var r={url:this.core.mtrx.baseUrl+"/_matrix/push/v1/notify"},n="pocketnet",i={app_display_name:n,app_id:n+window.cordova.platformId,data:r,user_id:this.core.mtrx.client.credentials.userId,device_display_name:window.device.manufacturer+" "+window.device.model,kind:"http",lang:localStorage.getItem("loc")||"en",pushkey:e};this.core.mtrx.client.setPusher(i).then(()=>{localStorage.setItem("fcmtoken5",e)},e=>{console.log(e)})})},generateTeamroomMessages(){this.$store.commit("SET_POCKETTEAMMESSAGES",[{id:1,text:`\n\t\t\t\t\t\t\t<h4>${this.$i18n.t("teamMessages.1-title")}</h4>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>${this.$i18n.t("teamMessages.1-list1")}</li>\n\t\t\t\t\t\t\t\t<li class="mt">${this.$i18n.t("teamMessages.1-list2")}</li>\n\t\t\t\t\t\t\t\t<li class="mt">${this.$i18n.t("teamMessages.1-list3")}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t`,previewText:this.$i18n.t("teamMessages.1-title")},{id:2,text:`\n\t\t\t\t\t\t\t<h4>${this.$i18n.t("teamMessages.2-title")}</h4>\n\t\t\t\t\t\t\t<span>${this.$i18n.t("teamMessages.2-message1")}</span>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>${this.$i18n.t("teamMessages.2-list1")}</li>\n\t\t\t\t\t\t\t\t<li class="mt">${this.$i18n.t("teamMessages.2-list2")}</li>\n\t\t\t\t\t\t\t\t<li class="mt">${this.$i18n.t("teamMessages.2-list3")}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<span>${this.$i18n.t("teamMessages.2-message2")}</span>\n\t\t\t\t\t\t`,previewText:this.$i18n.t("teamMessages.2-title")}])},isChatEncryptedState(e){this.isChatEncrypted.value=e},prependMatch(e){this.matches.all=[e].concat(this.matches.all)},appendMatch(e){this.matches.all.push(e)},clearMatches(){this.matches.value="",this.matches.current=0,this.matches.all.length=0},search(e){this.matches.value=e.toLowerCase()},markText:function(e,t){return this.matches.value&&e.includes(this.matches.value)?e.replace(new RegExp(`(${this.matches.value})`,"gi"),e=>{const r=`<mark class="match${t?" current":""}">${e}</mark>`;return t=null,r}):null}},beforeCreate(){this.$store.commit("init")},created(){this.$store.commit("setCallsEnabled",this.iscallsenabled),this.$store.commit("setViewType",this.viewtype),this.$store.commit("setPocketnet",this.pocketnet),this.$store.commit("setMobile",this.mobile),this.$store.commit("setVoiceMessagesEnabled",this.recording),this.$store.commit("pkoindisabled",this.pkoindisabled),this.$store.commit("clearall"),this.$store.commit("ls"),this.generateTeamroomMessages(),setTimeout(()=>{this.fcmtoken&&window.cordova&&this.setPusher(this.fcmtoken)},5e3);var e={matrixMan:{address:ne["a"].hexEncode("PToMRMsMVh9dj4Cpa7yu1pB5iq65g4jrVC"),privateKey:"510aa931cdee36b9ac467ad04a2619f46be88815812b46e976e36bc8dbcdc41b"},ltme:{address:ne["a"].hexEncode("PKszvjHwMWubQpeEKnQhRonGBVFWcJDbNJ"),privateKey:"513bc6a5014e7dd203537227fb0a78f7b974853478fcf95103125f6d793a5f8b"},travisnoscot1:{address:ne["a"].hexEncode("PDjvHUQjcDX8Vq6rtpKveUDPtwPVUZEW7m"),privateKey:"63d91d001f7b5167a707dd4ee7e2638fc13e1fa3ff7171b040b432bcd1054e28"},mobRoocky:{address:ne["a"].hexEncode("PCMnk8T3Edu81iGcTEpVCFq8FQd6UBXi2y"),privateKey:"0bbf6fb0dbf78a26f00345f6f96d4f76f52e0093417c51a1b7bccb7ca92e55df"},user1:{address:ne["a"].hexEncode("PKxqtUuK3B6qwAxs6HLhvxrQVExuMwKWd5"),privateKey:"28f0fdc30094d517bc08abca3f219d77fc32230e313bbf0b699ecd42f80de82a0"},user2:{address:ne["a"].hexEncode("PGe4xVAJRJtbD8swPipE2ug9Zk1rhSTa1y"),privateKey:"0b4562275da7e60a57e10432bdc7e3318dd9699b8b928224ba360b9fb951c77b"},FakeBadash:{address:ne["a"].hexEncode("PDWPDFikMhLJHtiKLLXZGzfgphRcd19eHe"),privateKey:"99d8ce99383ccc5d6404535b98f2b43ce5ab939a28bfc52a442565b2351039fa"},Faketravis:{address:ne["a"].hexEncode("PGURYzvoXuSvuwCuDty2wW37omjiKgzV5a"),privateKey:"93641f20095aa15b89b78d395ebe0a5a9b149ea2b54c57d896091c0ea9b86dfd"},fakeRocky:{address:ne["a"].hexEncode("PRDKVP4yvF2wW8p5FUVkzrCvXYE8SMGkQK"),privateKey:"80d213d272405d4ff51752f91e79c639919f5f9f302583bdaa1c767b044ce2c0"},fakeFuture2:{address:"PBHvKTH5TGQYDbRHgQHTTvaBf7tuww6ho7",privateKey:"71cacb25f90b18e356e33bc12c428c2e8b6b7c6e2950ab6344412f226aab0b2c"},fakeFuture:{address:ne["a"].hexEncode("PBHvKTH5TGQYDbRHgQHTTvaBf7tuww6ho7"),privateKey:"71cacb25f90b18e356e33bc12c428c2e8b6b7c6e2950ab6344412f226aab0b2c"},encMan:{address:ne["a"].hexEncode("PEkKrb7WJgfU3rCkkU9JYT8jbGiQsw8Qy8"),privateKey:"616fd57f7610288978f4c01797a90d56b0c30392e598a2504b98c7a7246569a5"},harisCalvin:{address:ne["a"].hexEncode("PXEWRce8siwbQWArQWyjnooogAEieHwhVd"),privateKey:"218bcb76df20438c1431c0394a42947f78f279bea987d7b238bfbd1cb1533b62"},oneSomeoneNigga:{address:ne["a"].hexEncode("PGyjEoqmmK2tm6xmg69hGoSNM6hUrc4VfE"),privateKey:"254f5b9394f0490e78b41c6bf615bfd8e290fde3fb6d862f166b181b35764b06"},gomer:{address:ne["a"].hexEncode("PVSdoFQqAg86p6tbAW8Y6CGGGjhiXkr4qh"),privateKey:"105de1935fa665bdc23b1b02bcdb3f62e01a3ad48823d5348edb5b94ec1b4526"},bart:{address:ne["a"].hexEncode("PWioUw52q4iNpMQUauNYaWg9JpsPE1u9Ut"),privateKey:"a74bc4ee63290dd051d659fe46962176d2b9193e04104dea63116d25703bad72"},edSheeran:{address:ne["a"].hexEncode("PVeqjqJk2GthxBK6QdhCCfQVEX1SAK92As"),privateKey:"d89952018721e6762de13fa2f1891b0dc2d1f1e75402ba483251086b2ba181ac"},duftPunkMan:{address:ne["a"].hexEncode("PFnN8SExxLsUjMKzs2avdvBdcA3ZKXPPkF"),privateKey:"7d1a31cc49a05692cfd992359cd27e8b3783cd186d98053ea0b9307b00a19018"},jcole:{address:ne["a"].hexEncode("P93cWU7X31wqn3R9GcUZ7c3fD11asXum5y"),privateKey:"900099127ad048d64523c4701d72d67b5b7f2afb18debbfdc53587f04a29c808"},flowMan:{address:ne["a"].hexEncode("PM4gVCcWnTmysUXhMukoQA2mT7GpfWQvck"),privateKey:"12d28e4c950193665dcaaa32129c061b2213e736ffe20918f0f13b6a2857cc32"},JokeMan:{address:ne["a"].hexEncode("PMSULgjrsCsEnWgNigCga5jSjhCvYBFSA8"),privateKey:"f7a2518393db3779a4394f4084473847bc4260a5aad20859eff9d32ab03c310e"},omgMan:{address:ne["a"].hexEncode("P9R3aNvyjRbqTWfy5q1h5qvXFYaDtqaRi2"),privateKey:"80b4350df8c033a63fd7c6b71516ae05ab3a23a604a39afba5874b87b4effbf8"},nineBot:{address:ne["a"].hexEncode("PNcvYsMXzf4RVmS9AjRYEqeeGjk1PiDjvF"),privateKey:"447554f94a3512a420ef6d089411dff3bc6d170f65e246cc52fc30aa9ed2216c"},tenBot:{address:ne["a"].hexEncode("PS9F8hzGSxeL1Lc2VGvPoqXHotZvpoVkkX"),privateKey:"659bd118d33e541bb042015723cab1e6b644a9d330a988b10e6d593f9abe3542"},bikeBot:{address:ne["a"].hexEncode("PBK1GDpiLNVFrKsPVAaNLU92byFY5P5KBr"),privateKey:"4c1ee4ae821a1ca885d77db84518b4dcbcd4efbed69603c8706b9557618529f9"},angryBot:{address:ne["a"].hexEncode("PBMcLRBQNWtNQZYUbRZZAd5FuZ8yb7HMX2"),privateKey:"87bec25e930671a06e032dca484083d4b79e23aa985781995882d5d4594f8d8d"},test099090:{address:ne["a"].hexEncode("PP582V47P8vCvXjdV3inwYNgxScZCuTWsq"),privateKey:"14ede296d13f8111c77a1da82519939329ee1b81ab23203da48df3f5e52fee3d"},tony:{address:ne["a"].hexEncode("TLENU8HFyz8PqzpKBDWeN6Xix6rM8wjYKd"),privateKey:"8cf816c1c7a51cbc114db9aac8896b8654260f9b3a985232f27cf32823c7f45f"},invoker:{address:ne["a"].hexEncode("TPjN8Dy4BpGDezMNw2ePuEdHiHetTvR3Mb"),privateKey:"a7ded16bd9d3350d6c3d233e6905b51e61bd879ba152ae24d0f8def76c4581c7"},drowRanger:{address:ne["a"].hexEncode("TU8fAf96kSfQzmxmpjRDSSqvCiPWzWt67J"),privateKey:"38484a2047b5c8170847a97fc5cddf3d485c934c6532a51a73f64ec7e4659891"},nevermore:{address:ne["a"].hexEncode("TKJ7xAC18XC4zQBvkNAWhkr3i7cARu11Uv"),privateKey:"8ec7f71d16b07d29bb49b3bc3054b5a4d2e65fb559e0ae695503568227584f53"},stormSpirit:{address:ne["a"].hexEncode("TZBHmnZwLedPtHcJfJnFsbxobGuDKGf9uA"),privateKey:"642aaa706fe94ea77239468cb9aad6b463472793a2c4e1f60acf22078770c45f"},morph:{address:ne["a"].hexEncode("TXyieuLsCntT1p4ougtiKURtYTxcdvWN1L"),privateKey:"8f59a6a6b7b8c1f63be47a6f571a11d726e9d7cde2baff52a51dc72326b6abb4"},alchemist:{address:ne["a"].hexEncode("TT2CeQuHiM8E8hG4rkJcaMKQ8gWqhZmNUH"),privateKey:"957ad5e2a009e4c0f06f0ae2737ea4c36c48fa8312555fcd104ca9cff7db6848"},public_user_test:{address:ne["a"].hexEncode("TLMXdC2UYSfMVbLzKtmJJTi4oK9LNHNVju"),privateKey:"509b219c5cead9545039ae38d428813af6671dbee3e37cadd2cd22f152013f2a"},cleanUser:{address:ne["a"].hexEncode("THCRHFtVAoeDGLg548C4bQxXeDg9bwrs5K"),privateKey:"666919a742eb63bededea3fddc44b526148d8b0eb1126b0aaff480a2af888d92"},userwithoutavatar:{address:ne["a"].hexEncode("TVcPMgVQ9TxgpzNrQyEAei5cnnR9jzXtzE"),privateKey:"2a3e96562c23a40e3d439b823453fb8fe6f8fb2c0267e8d2411734b3bdff90dd"},unnamed:{address:ne["a"].hexEncode("THsA8rwdeAkq5bePA71Nw5CGtFg2duyDSq"),privateKey:"27b42dfba3d20ae7a945e09dd0688137fa7963fd48b94f7b4027dc4eed874a96"}},t={address:this.address?ne["a"].hexEncode(this.address):"",privateKey:this.privatekey},r="nevermore",n=this.address&&this.privatekey?t:e[""+r],i=ne["a"].deep(window,"POCKETNETINSTANCE.options.listofproxies")||[{host:"test.pocketnet.app",port:8899,wss:8099}],o=ne["a"].deep(window,"POCKETNETINSTANCE.options.matrix")||"test.matrix.pocketnet.app",a=ne["a"].deep(window,"POCKETNETINSTANCE.options.matrixMirrors")||[];pu=new bl(this,{domain:o,mtrx:{device:this.device,logger:function(){}},listofproxies:i,mirrors:a,servers:{pocketnet:"https://pocketnet.app:8888"}}),pu.init(),pu.exporter&&pu.exporter.changeLocalization(fu.locale),pu.initWithUser(n).then(e=>pu.mtrx.wait().then(()=>{this.streamMode||pu.user.getContacts(),setTimeout(()=>{"chats"!==this.$route.name&&"chat"!==this.$route.name&&"publicPreview"!==this.$route.name&&"chatSettings"!==this.$route.name&&!0!==pu.cancelDefaultRoute&&this.$router.push("/chats").catch(e=>{})},100)})).catch(e=>{}),(()=>{try{return JSON.parse(this.cssrules||"[]")}catch{return["https://use.fontawesome.com/releases/v5.2.0/css/all.css"]}})().forEach(e=>{this.$nextTick(()=>{const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),this.$root.$el.append(t)})}),window.matrixchat=pu}};var yu=gu;function bu(e){var t=n("2149");t.__inject__&&t.__inject__(e);var r=n("6977");r.__inject__&&r.__inject__(e);var i=n("c105");i.__inject__&&i.__inject__(e)}var _u=Object(I["a"])(yu,C,T,!1,bu,null,null,!0),wu=_u.exports;window.customElements.define("matrix-element",k(s["default"],wu))},"5a76":function(e,t,r){var n=r("f576");e.exports=function(e){return(new n).update(e).digest()}},"5b5f":function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return u}));var n=r("9523"),i=r.n(n),o=r("5c7d"),a=r.n(o),s="matrix";function c(e){var t=e;t.getChild=t.withPrefix=function(e){var t=this.prefix||"";return l(t+e)}}function l(e){var t=a.a.getLogger("".concat(s,"-").concat(e));return t.prefix!==e&&(c(t),t.prefix=e,t.setLevel(a.a.levels.DEBUG,!1)),t}a.a.methodFactory=function(e,t,r){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.prefix&&r.unshift(this.prefix);var i="error"===e||"warn"===e||"trace"===e||"info"===e||"debug"===e;return i?console[e](...r):console.log(...r)}};var d=a.a.getLogger(s);d.setLevel(a.a.levels.DEBUG,!1),c(d);class u{constructor(e,t){this.parent=e,i()(this,"name",void 0),this.name=t+":"}trace(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.parent.trace(this.name,...t)}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.parent.debug(this.name,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.parent.info(this.name,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.parent.warn(this.name,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.parent.error(this.name,...t)}}},"5c6c":function(e,t,r){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5c7d":function(t,r,n){var i,o;(function(e,a){"use strict";i=a,o="function"===typeof i?i.call(r,n,r,t):i,void 0===o||(t.exports=o)})(0,(function(){"use strict";var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},a=null;function s(t,r){var n=t[r];if("function"===typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(e){return"debug"===e&&(e="log"),typeof console!==r&&("trace"===e&&n?c:void 0!==console[e]?s(console,e):void 0!==console.log?s(console,"log"):t)}function d(){for(var e=this.getLevel(),n=0;n<i.length;n++){var o=i[n];this[o]=n<e?t:this.methodFactory(o,e,this.name)}if(this.log=this.debug,typeof console===r&&e<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==r&&(d.call(this),this[e].apply(this,arguments))}}function h(e,t,r){return l(e)||u.apply(this,arguments)}function f(e,t){var n,s,c,l=this,u="loglevel";function f(e){var t=(i[e]||"silent").toUpperCase();if(typeof window!==r&&u){try{return void(window.localStorage[u]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(u)+"="+t+";"}catch(n){}}}function p(){var e;if(typeof window!==r&&u){try{e=window.localStorage[u]}catch(o){}if(typeof e===r)try{var t=window.document.cookie,n=encodeURIComponent(u),i=t.indexOf(n+"=");-1!==i&&(e=/^([^;]+)/.exec(t.slice(i+n.length+1))[1])}catch(o){}return void 0===l.levels[e]&&(e=void 0),e}}function v(){if(typeof window!==r&&u){try{window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function m(e){var t=e;if("string"===typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),"number"===typeof t&&t>=0&&t<=l.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"===typeof e?u+=":"+e:"symbol"===typeof e&&(u=void 0),l.name=e,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=t||h,l.getLevel=function(){return null!=c?c:null!=s?s:n},l.setLevel=function(e,t){return c=m(e),!1!==t&&f(c),d.call(l)},l.setDefaultLevel=function(e){s=m(e),p()||l.setLevel(e,!1)},l.resetLevel=function(){c=null,v(),d.call(l)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)},l.rebuild=function(){if(a!==l&&(n=m(a.getLevel())),d.call(l),a===l)for(var e in o)o[e].rebuild()},n=m(a?a.getLevel():"WARN");var g=p();null!=g&&(c=m(g)),d.call(l)}a=new f,a.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new f(e,a.methodFactory)),t};var p=typeof window!==r?window.log:void 0;return a.noConflict=function(){return typeof window!==r&&window.log===a&&(window.log=p),a},a.getLoggers=function(){return o},a["default"]=a,a}))},"5cf1":function(e,t,r){"use strict";r.r(t),r.d(t,"SECRET_STORAGE_ALGORITHM_V1_AES",(function(){return l})),r.d(t,"ServerSideSecretStorageImpl",(function(){return d})),r.d(t,"trimTrailingEquals",(function(){return u}));var n=r("c973"),i=r.n(n),o=r("afe6"),a=r("c889"),s=r("6dde"),c=r("5b5f"),l="m.secret_storage.v1.aes-hmac-sha2";class d{constructor(e,t){this.accountDataAdapter=e,this.callbacks=t}getDefaultKeyId(){var e=this;return i()((function*(){var t=yield e.accountDataAdapter.getAccountDataFromServer("m.secret_storage.default_key");return t?t.key:null}))()}setDefaultKeyId(e){return new Promise((t,r)=>{var n=r=>{"m.secret_storage.default_key"===r.getType()&&r.getContent().key===e&&(this.accountDataAdapter.removeListener(o["b"].AccountData,n),t())};this.accountDataAdapter.on(o["b"].AccountData,n),this.accountDataAdapter.setAccountData("m.secret_storage.default_key",{key:e}).catch(e=>{this.accountDataAdapter.removeListener(o["b"].AccountData,n),r(e)})})}addKey(e,t,r){var n=this;return i()((function*(){if(e!==l)throw new Error("Unknown key algorithm ".concat(e));var i={algorithm:e};t.name&&(i.name=t.name),t.passphrase&&(i.passphrase=t.passphrase);var{iv:o,mac:c}=yield Object(a["a"])(t.key);if(i.iv=o,i.mac=c,!r)do{r=Object(s["a"])(32)}while(yield n.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(r)));return yield n.accountDataAdapter.setAccountData("m.secret_storage.key.".concat(r),i),{keyId:r,keyInfo:i}}))()}getKey(e){var t=this;return i()((function*(){if(e||(e=yield t.getDefaultKeyId()),!e)return null;var r=yield t.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+e);return r?[e,r]:null}))()}hasKey(e){var t=this;return i()((function*(){var r=yield t.getKey(e);return Boolean(r)}))()}checkKey(e,t){return i()((function*(){if(t.algorithm===l){if(t.mac){var{mac:r}=yield Object(a["a"])(e,t.iv);return u(t.mac)===u(r)}return!0}throw new Error("Unknown algorithm")}))()}store(e,t,r){var n=this;return i()((function*(){var i={};if(!r){var o=yield n.getDefaultKeyId();if(!o)throw new Error("No keys specified and no default key present");r=[o]}if(0===r.length)throw new Error("Zero keys given to encrypt with!");for(var a of r){var s=yield n.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+a);if(!s)throw new Error("Unknown key: "+a);if(s.algorithm===l){var d={[a]:s},[,u]=yield n.getSecretStorageKey(d,e);i[a]=yield u.encrypt(t)}else c["b"].warn("unknown algorithm for secret storage key "+a+": "+s.algorithm)}yield n.accountDataAdapter.setAccountData(e,{encrypted:i})}))()}get(e){var t=this;return i()((function*(){var r=yield t.accountDataAdapter.getAccountDataFromServer(e);if(r){if(!r.encrypted)throw new Error("Content is not encrypted!");var n={};for(var i of Object.keys(r.encrypted)){var o=yield t.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+i),a=r.encrypted[i];(null===o||void 0===o?void 0:o.algorithm)===l&&a.iv&&a.ciphertext&&a.mac&&(n[i]=o)}if(0===Object.keys(n).length)throw new Error("Could not decrypt ".concat(e," because none of ")+"the keys it is encrypted with are for a supported algorithm");var[s,c]=yield t.getSecretStorageKey(n,e),d=r.encrypted[s];return c.decrypt(d)}}))()}isStored(e){var t=this;return i()((function*(){var r=yield t.accountDataAdapter.getAccountDataFromServer(e);if(null===r||void 0===r||!r.encrypted)return null;var n={};for(var i of Object.keys(r.encrypted)){var o=yield t.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+i);if(o){var a=r.encrypted[i];o.algorithm===l&&a.iv&&a.ciphertext&&a.mac&&(n[i]=o)}}return Object.keys(n).length?n:null}))()}getSecretStorageKey(e,t){var r=this;return i()((function*(){if(!r.callbacks.getSecretStorageKey)throw new Error("No getSecretStorageKey callback supplied");var n=yield r.callbacks.getSecretStorageKey({keys:e},t);if(!n)throw new Error("getSecretStorageKey callback returned falsey");if(n.length<2)throw new Error("getSecretStorageKey callback returned invalid data");var[i,o]=n;if(!e[i])throw new Error("App returned unknown key from getSecretStorageKey!");if(e[i].algorithm===l){var s={encrypt:function(e){return Object(a["c"])(e,o,t)},decrypt:function(e){return Object(a["b"])(e,o,t)}};return[i,s]}throw new Error("Unknown key type: "+e[i].algorithm)}))()}}function u(e){var t=e.length;while(t>=1&&61==e.charCodeAt(t-1))t--;return t<e.length?e.substring(0,t):e}},"5d1c":function(e,t,r){"use strict";var n;function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var o=r("c9b8").codes,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function c(e){if(e)throw e}function l(e){return e.setHeader&&"function"===typeof e.abort}function d(e,t,o,a){a=i(a);var c=!1;e.on("close",(function(){c=!0})),void 0===n&&(n=r("903c")),n(e,{readable:t,writable:o},(function(e){if(e)return a(e);c=!0,a()}));var d=!1;return function(t){if(!c&&!d)return d=!0,l(e)?e.abort():"function"===typeof e.destroy?e.destroy():void a(t||new s("pipe"))}}function u(e){e()}function h(e,t){return e.pipe(t)}function f(e){return e.length?"function"!==typeof e[e.length-1]?c:e.pop():c}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var o=t.map((function(e,r){var a=r<t.length-1,s=r>0;return d(e,a,s,(function(e){n||(n=e),e&&o.forEach(u),a||(o.forEach(u),i(n))}))}));return t.reduce(h)}e.exports=p},"5e77":function(e,t,r){"use strict";var n=r("83ab"),i=r("1a2d"),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},"5f02":function(e,t,r){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"5f4a":function(e,t,r){var n=r("32dd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("1f795217",n,e)}},"5fc1":function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["IS"]="SERVICE_TYPE_IS",e["IM"]="SERVICE_TYPE_IM"}(n||(n={}))},"60af":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"h",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return s})),r.d(t,"k",(function(){return l})),r.d(t,"q",(function(){return d})),r.d(t,"p",(function(){return u})),r.d(t,"t",(function(){return h})),r.d(t,"s",(function(){return f})),r.d(t,"r",(function(){return p})),r.d(t,"o",(function(){return v})),r.d(t,"d",(function(){return m})),r.d(t,"n",(function(){return g})),r.d(t,"a",(function(){return y})),r.d(t,"g",(function(){return b})),r.d(t,"f",(function(){return _})),r.d(t,"c",(function(){return w})),r.d(t,"m",(function(){return S})),r.d(t,"l",(function(){return E}));var n,i,o,a=r("a74c");r("76e6"),r("b7cd");(function(e){e["RoomCanonicalAlias"]="m.room.canonical_alias",e["RoomCreate"]="m.room.create",e["RoomJoinRules"]="m.room.join_rules",e["RoomMember"]="m.room.member",e["RoomThirdPartyInvite"]="m.room.third_party_invite",e["RoomPowerLevels"]="m.room.power_levels",e["RoomName"]="m.room.name",e["RoomTopic"]="m.room.topic",e["RoomAvatar"]="m.room.avatar",e["RoomPinnedEvents"]="m.room.pinned_events",e["RoomEncryption"]="m.room.encryption",e["RoomHistoryVisibility"]="m.room.history_visibility",e["RoomGuestAccess"]="m.room.guest_access",e["RoomServerAcl"]="m.room.server_acl",e["RoomTombstone"]="m.room.tombstone",e["RoomPredecessor"]="org.matrix.msc3946.room_predecessor",e["PolicyRuleUser"]="m.policy.rule.user",e["PolicyRuleRoom"]="m.policy.rule.room",e["PolicyRuleServer"]="m.policy.rule.server",e["SpaceChild"]="m.space.child",e["SpaceParent"]="m.space.parent",e["RoomRedaction"]="m.room.redaction",e["RoomMessage"]="m.room.message",e["RoomMessageEncrypted"]="m.room.encrypted",e["Sticker"]="m.sticker",e["CallInvite"]="m.call.invite",e["CallCandidates"]="m.call.candidates",e["CallAnswer"]="m.call.answer",e["CallHangup"]="m.call.hangup",e["CallReject"]="m.call.reject",e["CallSelectAnswer"]="m.call.select_answer",e["CallNegotiate"]="m.call.negotiate",e["CallSDPStreamMetadataChanged"]="m.call.sdp_stream_metadata_changed",e["CallSDPStreamMetadataChangedPrefix"]="org.matrix.call.sdp_stream_metadata_changed",e["CallReplaces"]="m.call.replaces",e["CallAssertedIdentity"]="m.call.asserted_identity",e["CallAssertedIdentityPrefix"]="org.matrix.call.asserted_identity",e["CallEncryptionKeysPrefix"]="io.element.call.encryption_keys",e["KeyVerificationRequest"]="m.key.verification.request",e["KeyVerificationStart"]="m.key.verification.start",e["KeyVerificationCancel"]="m.key.verification.cancel",e["KeyVerificationMac"]="m.key.verification.mac",e["KeyVerificationDone"]="m.key.verification.done",e["KeyVerificationKey"]="m.key.verification.key",e["KeyVerificationAccept"]="m.key.verification.accept",e["KeyVerificationReady"]="m.key.verification.ready",e["RoomMessageFeedback"]="m.room.message.feedback",e["Reaction"]="m.reaction",e["PollStart"]="org.matrix.msc3381.poll.start",e["Typing"]="m.typing",e["Receipt"]="m.receipt",e["Presence"]="m.presence",e["FullyRead"]="m.fully_read",e["Tag"]="m.tag",e["SpaceOrder"]="org.matrix.msc3230.space_order",e["PushRules"]="m.push_rules",e["Direct"]="m.direct",e["IgnoredUserList"]="m.ignored_user_list",e["RoomKey"]="m.room_key",e["RoomKeyRequest"]="m.room_key_request",e["ForwardedRoomKey"]="m.forwarded_room_key",e["Dummy"]="m.dummy",e["GroupCallPrefix"]="org.matrix.msc3401.call",e["GroupCallMemberPrefix"]="org.matrix.msc3401.call.member",e["CallNotify"]="org.matrix.msc4075.call.notify"})(n||(n={})),function(e){e["Annotation"]="m.annotation",e["Replace"]="m.replace",e["Reference"]="m.reference",e["Thread"]="m.thread"}(i||(i={})),function(e){e["Text"]="m.text",e["Emote"]="m.emote",e["Notice"]="m.notice",e["Image"]="m.image",e["File"]="m.file",e["Audio"]="m.audio",e["Location"]="m.location",e["Video"]="m.video",e["KeyVerificationRequest"]="m.key.verification.request"}(o||(o={}));var s,c="type";(function(e){e["Space"]="m.space",e["UnstableCall"]="org.matrix.msc3417.call",e["ElementVideo"]="io.element.video"})(s||(s={}));var l="org.matrix.msgid",d=new a["c"]("m.room.purpose","org.matrix.msc3088.purpose"),u=new a["c"]("m.enabled","org.matrix.msc3088.enabled"),h=new a["c"]("m.data_tree","org.matrix.msc3089.data_tree"),f=new a["c"]("m.leaf","org.matrix.msc3089.leaf"),p=new a["c"]("m.branch","org.matrix.msc3089.branch"),v=new a["c"]("m.room.marker","org.matrix.msc2716.marker"),m=new a["c"]("with_rel_types","org.matrix.msc3912.with_relations"),g=new a["c"]("io.element.functional_members","io.element.functional_members"),y=new a["c"]("m.visibility","org.matrix.msc3531.visibility"),b=new a["c"]("enabled","org.matrix.msc3881.enabled"),_=new a["c"]("device_id","org.matrix.msc3881.device_id"),w=new a["c"]("m.local_notification_settings","org.matrix.msc3890.local_notification_settings"),S=new a["c"]("thread_id","org.matrix.msc4023.thread_id"),E=new a["a"]("membership","io.element.msc4115.membership")},"60b4":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("a74c"),i=new n["c"]("m.topic","org.matrix.msc3765.topic")},"611d":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".swipable[data-v-0efbaa68]{touch-action:manipulation}",""]),e.exports=t},6129:function(e,t,r){"use strict";var n=r("1da1");r("d9e2");const i=function(e,t,r){const i=!1,o=!1;let a=()=>{};i&&(a=console.log);const s=3600,c=24*s,l=30*c;var d=r||l,u={};function h(){const e=Math.floor(Date.now()/1e3),t=e-e%s;return t}function f(){let r,n=indexedDB.open(e,t);function i(){const e=s("items"),t=e.objectStore("items"),r=t.getAll();return new Promise((e,t)=>{r.onsuccess=t=>{const r=t.target.result;r&&_.each(r,e=>{u[e.id]=e.message}),e()},r.onerror=t=>{a("PCryptoStorage CLEAR OUTDATED error",t),e()}})}function o(){const e=h()-d,t=r.transaction("items","readwrite"),n=t.objectStore("items"),i=n.openCursor();return new Promise((t,r)=>{i.onsuccess=r=>{const n=r.target.result;n&&(e>=n.value.cachedAt&&(a("PCryptoStorage CLEAR OUTDATED log",r),n.delete()),n.continue()),t()},i.onerror=e=>{a("PCryptoStorage CLEAR OUTDATED error",e),t()}})}function s(e,t=!1){const n=r.transaction("items","readwrite");return n.onsuccess=function(e){a("PCryptoStorage TRANSACTION finished",e)},n.onabort=function(e){a("PCryptoStorage TRANSACTION abort",e.target.error)},n.onerror=function(e){a("PCryptoStorage TRANSACTION error",e.target.error)},n}n.onupgradeneeded=function(e){let t=n.result;const r=e.oldVersion!==e.newVersion,i=0===e.oldVersion;r&&!i&&(t.objectStoreNames.contains("items")||t.deleteObjectStore("items")),t.objectStoreNames.contains("items")||t.createObjectStore("items",{keyPath:"id"})};const c={clear:e=>{function t(t,r){const n=s("items",!0),i=n.objectStore("items"),o=i.delete(e);delete u[e],o.onsuccess=e=>{a("PCryptoStorage CLEAR log",e),t(!0)},o.onerror=e=>{a("PCryptoStorage CLEAR error",e.target.error),r(e.target.error)}}return a("PCryptoStorage clearing",e),new Promise(t)},set:(e,t)=>{function r(r,n){const i=s("items",!0),o=i.objectStore("items"),c=h(),l={id:e,message:t,cachedAt:c};u[e]=t;const d=o.put(l);d.onsuccess=function(e){a("PCryptoStorage SET log",e),r(!0)},d.onerror=function(e){a("PCryptoStorage SET error",e.target.error),n(e.target.error)}}return a("PCryptoStorage writing",e),new Promise(r)},get:e=>{function t(t,r){if(u[e])return t(u[e]);const n=s("items"),i=n.objectStore("items"),o=i.get(e);o.onsuccess=n=>{if(a("PCryptoStorage GET log",n,o.result),!o.result)return void r("Data does not exist");const i="message"in o.result;i?(u[e]=o.result.message,t(o.result.message)):r("Message property does not exist")},o.onerror=e=>{r(e.target.error)}}return a("PCryptoStorage reading",e),new Promise(t)}};function l(e,t){n.onerror=function(e){a("PCryptoStorage error occurred:",e),t("PCryptoStorage error initiating IndexedDB")},n.onsuccess=function(){r=n.result,o().then(e=>i()).then(t=>{e(c)})}}return new Promise(l)}function p(){function t(){const t=h()-7*c;let r=Object.keys(localStorage),n=r.filter(t=>t.includes(e));n.forEach(e=>{const r=JSON.parse(localStorage[e]);t>=r.cachedAt&&delete localStorage[e]})}const r={clear:function(){var t=Object(n["a"])((function*(t){a("PCryptoStorage clearing localstorage",t);const r=`${e}_${t}`,n=r in localStorage;if(!n)throw Error("Data does not exist");const i="message"in localStorage[r];if(!i)throw Error("Message property does not exist");return delete localStorage[r],new Promise(executor)}));return function(e){return t.apply(this,arguments)}}(),set:function(){var t=Object(n["a"])((function*(t,r){a("PCryptoStorage writing localstorage",t);const n=`${e}_${t}`,i=h(),o={message:r,cachedAt:i};localStorage[n]=JSON.stringify(o)}));return function(e,r){return t.apply(this,arguments)}}(),get:function(){var t=Object(n["a"])((function*(t){a("PCryptoStorage reading",t);const r=`${e}_${t}`,n=r in localStorage;if(!n)throw Error("Data does not exist");return localStorage[r]}));return function(e){return t.apply(this,arguments)}}()};return t(),r}return!window.indexedDB||o?(a("PCryptoStorage LOCALSTORAGE_FALLBACK"),p()):f()};t["a"]=i},6167:function(t,r,n){"use strict";n.r(r);var i=function(){var e=this,t=e._self._c;return e.streamMode&&!e.isBanned||!e.streamMode&&!e.event.localRedactionEvent()&&!e.event.getRedactionEvent()&&!e.removed?t("div",{ref:"msgElement",staticClass:"event",class:{readyToRender:e.readyToRender,my:e.my}},["member"!==e.type||e.preview?e._e():t("member",{attrs:{chat:e.chat,event:e.event,userinfo:e.userinfo,readed:e.readed,preview:e.preview||!1},on:{readyToRender:e.setReadyToRender}}),"message"===e.type||e.preview?t("message",{attrs:{chat:e.chat,event:e.event,prevevent:e.prevevent,origin:e.event,decryptEvent:e.decryptEvent,decryptedInfo:e.decryptedInfo,encryptedData:e.encryptedData,imgEvent:e.galleryData,userinfo:e.userinfo,readed:e.readed,preview:e.preview||!1,withImage:e.withImage||!1,clientWidth:e.clientWidth,encrypted:e.encrypted,subtype:e.subtype,error:e.error,reference:e.reference,downloaded:e.downloaded,showmyicontrue:e.showmyicontrue,fromreference:e.fromreference,searchText:e.searchText,multiSelect:e.multiSelect,selectedMessages:e.selectedMessages,audioBuffer:e.audioBuffer},on:{openGalleryImg:e.openImage,readyToRender:e.setReadyToRender,remove:e.removeEvent,download:e.downloadFile,decryptagain:e.decryptAgain,showMultiSelect:function(t){return e.$emit("showMultiSelect")},selectMessage:e.selectMessage,removeMessage:e.removeMessage,editing:e.editing,reply:e.reply,share:e.share,menuIsVisible:e.menuIsVisibleHandler,toreference:e.toreference}}):e._e(),"common"===e.type?t("common",{attrs:{event:e.event,userinfo:e.userinfo,readed:e.readed,preview:e.preview||!1}}):e._e(),e.downloading?t("div",{staticClass:"loading"},[t("linepreloader")],1):e._e()],1):e.streamMode?e._e():t("div",{staticClass:"deletedMessage"},[t("i",{staticClass:"fas fa-eraser"}),e._v(" "+e._s(e.$t("caption.messageDeleted"))+" ")])},o=[],a=n("1da1"),s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"eventsCommon"})},c=[],l=n("2f62"),d={name:"eventsCommon",props:{event:Object,preview:Boolean,userinfo:Object},data:function(){return{loading:!1}},computed:Object(l["d"])({auth:e=>e.auth}),methods:{}},u=d,h=n("2877");function f(e){var t=n("de09");t.__inject__&&t.__inject__(e)}var p=Object(h["a"])(u,s,c,!1,f,"343d9312",null,!0),v=p.exports,m=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"eventMember"},[e.preview?e._e():t("div",{staticClass:"iconWrapper",on:{click:function(t){return e.core.mtrx.opencontact(e.userinfo)}}},[t("userpic",{attrs:{userinfo:e.userinfo}})],1),t("div",{staticClass:"labelwrapper"},[t("span",{staticClass:"label"},[t("b",[e._v(e._s(e.userinfo.name||"Somebody")+":")]),e._v(" "+e._s(e.keyword))])])])},g=[],y=n("3139"),b={name:"eventsMember",props:{event:Object,preview:Boolean,userinfo:Object},data:function(){return{loading:!1,pName:Object,membership:"",moder:!1}},mounted:function(){this.$emit("readyToRender")},computed:Object(l["d"])({auth:e=>e.auth,keyword:function(){var e,t=this.$store.state.users,r=null===(e=this.event.event)||void 0===e?void 0:e.content.membership,n=y["a"].getmatrixid(y["a"].deep(this.event,"event.state_key")||this.event.getSender()),i="";if("join"===r)return this.$i18n.t("caption.joinedInTheChat");if("invite"===r)return _.find(t,(e,t)=>{if(e.id===n)return i=e.name}),this.$i18n.t("caption.hasInvited")+""+i+this.$i18n.t("caption.inTheChat");if("ban"===r)return _.find(t,(e,t)=>{if(e.id===n)return i=e.name}),this.$i18n.t("caption.banned")+` ${i} `+this.$i18n.t("caption.andRoom");if("leave"===r){let e=this.$store.state.users[y["a"].getmatrixid(this.event.target.userId)];if(e)return e.name+" "+this.$i18n.t("caption.left")+this.$i18n.t("caption.theChat")}if("m.room.power_levels"===this.event.event.type&&this.event.event.unsigned.prev_content){let e=Object.keys(y["a"].ObjDiff(this.event.event.content.users,this.event.event.unsigned.prev_content.users)),t=this.$store.state.users[""+y["a"].getmatrixid(e[0])],r=this.event.event.content.users[""+e[0]];if(!_.isEmpty(t)&&e[0]){if(0===r)return this.$i18n.t("caption.unmarked")+` ${t.name} `+this.$i18n.t("caption.asModerator");if(50===r)return this.$i18n.t("caption.marked")+` ${t.name} `+this.$i18n.t("caption.asModerator")}}return this.event.event.type,"m.room.name"===this.event.event.type?this.$i18n.t("caption.editedChatNameTo")+`"${this.event.event.content.name}"`:void 0}}),methods:{}},w=b;function S(e){var t=n("bbac");t.__inject__&&t.__inject__(e)}var E=Object(h["a"])(w,m,g,!1,S,"3ddb1d8e",null,!0),k=E.exports,I={},C={name:"eventsEvent",components:{common:v,member:k,message:()=>Promise.all([n.e(13),n.e(1),n.e(12)]).then(n.bind(null,"26c9")),dummypreviews:()=>n.e(1).then(n.bind(null,"a54c"))},inject:["streamMode","userBanned"],data:function(){return{decryptEvent:{},decryptedInfo:null,decryptReady:"",readyEvent:!1,downloading:!1,error:null,reference:null,removed:!1,downloaded:!1,audioBuffer:null,readyToRender:!1,users:[]}},props:{event:Object,prevevent:Object,preview:Boolean,withImage:Boolean,timeline:Object,last:Boolean,chat:Object,showmyicontrue:Boolean,metaUrl:String,galleryData:{},goToGallery:Function,clientWidth:Number,fromreference:Boolean,searchText:String,multiSelect:{default:!1,type:Boolean},selectedMessages:{type:Array,default:()=>[]}},computed:{type:function(){var e=y["a"].deep(this,"event.event.type");return["m.room.member"].indexOf(e)>-1?"member":["m.room.message"].indexOf(e)>-1?"message":["m.room.name"].indexOf(e)>-1||["m.room.power_levels"].indexOf(e)>-1?"member":["m.room.redaction"].indexOf(e)>-1||["m.room.request_calls_access"].indexOf(e)>-1||["m.call.candidates"].indexOf(e)>-1||["m.call.hangup"].indexOf(e)>-1||["m.call.invite"].indexOf(e)>-1||["m.call.reject"].indexOf(e)>-1||["m.call.answer"].indexOf(e)>-1?"message":["m.room.topic"].indexOf(e)>-1?"member":""},readed:function(){var e,t,r=null===(e=this.$store)||void 0===e?void 0:e.state.readreciepts[this.chat.roomId];return!!r&&(this.event.event.origin_server_ts<r.ts&&(null===(t=r.ev)||void 0===t?void 0:t.event.event_id)==this.event.event.event_id)},subtype:function(){return y["a"].deep(this,"event.event.content.msgtype")},encryptedData:function(){return!(!y["a"].deep(this,"event.event.content.info.secrets")&&!y["a"].deep(this,"event.event.content.pbody.secrets"))},userinfo:function(){var e;return(null===(e=this.$store)||void 0===e?void 0:e.state.users[this.$f.getmatrixid(this.event.getSender())])||{}},encrypted:function(){return!(!this.chat||!this.chat.roomId)&&this.core.mtrx.client.isRoomEncrypted(this.chat.roomId)},my:function(){var e;return this.userinfo.id===(null===(e=this.core.user.userinfo)||void 0===e?void 0:e.id)},isBanned:function(){var e,t,r;const n=null!==(e=this.event.event.user_id)&&void 0!==e?e:this.event.event.sender,i="ban"===(null===(t=this.chat.currentState)||void 0===t||null===(r=t.members[n])||void 0===r?void 0:r.membership);return this.my&&this.userBanned.set(i),i}},beforeDestroy:function(){},mounted:function(){this.$emit("mounted")},beforeMount:function(){(this.event&&this.event.event&&I[this.event.event.event_id]||this.event.txnId&&I[this.event.txnId])&&(this.readyToRender=!0)},watch:{event:{immediate:!0,handler:function(){this.decryptEvent={},this.relations(),this.core.mtrx.kit.usersInfoById(this.event.getSender()).then(()=>{this.encryptedData||"m.encrypted"==this.subtype?y["a"].pretry(()=>this.chat.pcrypto,20,1e4).then(()=>{this.encryptedData&&"m.image"==this.subtype&&this.decryptImage(),this.encryptedData&&"m.audio"==this.subtype&&this.decryptAudio(),"m.encrypted"==this.subtype&&this.decrypt()}):"m.audio"==this.subtype&&this.getAudioUnencrypt()})}}},methods:{setReadyToRender(){setTimeout(()=>{this.readyToRender||(this.event&&this.event.event&&(I[this.event.event.event_id]=!0),this.event&&this.event.txnId&&(I[this.event.txnId]=!0),this.readyToRender=!0)},20)},relations(){if(this.timeline){var e=this.timeline.timelineSet,t=this.event;if(!this.reference&&t.event.content["m.relates_to"]&&t.event.content["m.relates_to"]&&"m.reference"==t.event.content["m.relates_to"]["rel_type"]){var r=t.event.content["m.relates_to"]["event_id"];r&&this.core.mtrx.client.getEventTimeline(e,r).then(n=>{var i=_.find(n.getEvents(),e=>{if(e.getId()==r)return!0});if(i){this.reference=t.event.content.reference=i;var o=e.relations.getChildEventsForEvent(this.core.mtrx.clearEventId(i),"m.replace","m.room.message");if(o){var a=o.getLastReplacement();a&&(i.event.content.body=a.event.content.body,i.event.content.edited=a.event.event_id,i.event.content.block=a.event.content.block,i.event.content.msgtype=a.event.content.msgtype,i.event.decrypted=a.event.decrypted)}}})}}},editing(e){this.$emit("editing",e)},reply(){this.$emit("reply")},share(e){return this.core.share(e)},downloadFile(){this.downloading=!0,this.core.mtrx.downloadFile(this.chat,this.event).then(e=>{if(this.downloaded=!0,this.$store.commit("icon",{icon:"success",message:"Downloaded"}),e){var{name:t,url:r,type:n,nativeURL:i}=e;window.cordova&&"undefined"!=typeof cordova.plugins.fileOpener2&&cordova.plugins.fileOpener2.open(i||r,n,{error:function(e){console.error(e)},success:function(){}})}}).catch(e=>(console.error(e),this.error=e.toString(),this.$store.commit("icon",{icon:"error",message:"Downloading Failed"}),Promise.resolve(e))).finally(()=>{this.downloading=!1})},getAudioUnencrypt(){this.core.mtrx.getAudioUnencrypt(this.chat,this.event).then(e=>{this.audioBuffer=e}).catch(e=>{})},decryptAudio(){var e=this;return Object(a["a"])((function*(){e.core.mtrx.getAudio(e.chat,e.event).then(t=>{e.decryptedInfo=t}).catch(t=>{e.event.event.decryptKey=e.decryptKey={msgtype:"m.bad.encrypted"}})}))()},decryptImage(){var e=this;return Object(a["a"])((function*(){e.core.mtrx.getImage(e.chat,e.event).then(t=>{e.decryptedInfo=t}).catch(t=>{e.event.event.decryptKey=e.decryptKey={msgtype:"m.bad.encrypted"}})}))()},decryptAgain(){var e=this;return Object(a["a"])((function*(){return e.event.event.decrypted=null,e.decrypt()}))()},decrypt(){var t=this;return Object(a["a"])((function*(){if(t.event.event.decrypted)return t.decryptEvent=t.event.event.decrypted,Promise.resolve();try{var r=yield t.chat.pcrypto.decryptEvent(t.event.event);t.decryptEvent=r,t.event.event.decrypted=t.decryptEvent}catch(e){console.error(e),t.event.event.decrypted=t.decryptEvent={msgtype:"m.bad.encrypted"}}}))()},openImage:function(){this.$emit("openImageEvent",this.event)},removeEvent:function(e){this.$emit("removeEvent",e),this.removed=!0},menuIsVisibleHandler:function(e){this.$emit("menuIsVisible",e)},selectMessage:function(e){this.$emit("selectMessage",e)},removeMessage:function(e){this.$emit("removeMessage",e)},shareManyMessages:function(e){this.$emit("shareManyMessages",e)},toreference:function(e){this.$emit("toreference",e)}}},T=C;function R(e){var t=n("4b80");t.__inject__&&t.__inject__(e)}var x=Object(h["a"])(T,i,o,!1,R,"28e8bb71",null,!0);r["default"]=x.exports},6280:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("b83f");function i(e,t,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0;if("string"!==typeof t||!t)return"";if(0!==t.indexOf("mxc://"))return a?t:"";c&&(s=!0);var l,d=t.slice(6);l=c?"/_matrix/client/v1/media/download/":"/_matrix/media/v3/download/";var u={};r&&(u["width"]=Math.round(r).toString()),i&&(u["height"]=Math.round(i).toString()),o&&(u["method"]=o),Object.keys(u).length>0&&(l=c?"/_matrix/client/v1/media/thumbnail/":"/_matrix/media/v3/thumbnail/"),"boolean"===typeof s&&(u["allow_redirect"]=JSON.stringify(s));var h=d.indexOf("#"),f="";h>=0&&(f=d.slice(h),d=d.slice(0,h));var p=0===Object.keys(u).length?"":"?"+Object(n["j"])(u);return e+l+d+p+f}},"62a0":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return c}));var n,i=r("9523"),o=r.n(i);(function(e){e["TooNew"]="TOO_NEW"})(n||(n={}));class a extends Error{constructor(e){var t="Crypto store is invalid because ".concat(e,", ")+"please stop the client, delete all data and start the client again";super(t),this.reason=e,this.name="InvalidCryptoStoreError"}}o()(a,"TOO_NEW",n.TooNew);class s extends Error{constructor(e,t){super(e),this.value=t}}class c extends Error{constructor(){super("MatrixClient has been stopped")}}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6374:function(e,t,r){"use strict";var n=r("cfe9"),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(error){n[e]=t}return t}},"63d4":function(e,t,r){var n=r("179b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("510f87c3",n,e)}},6421:function(e,t,r){"use strict";r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("2f36"),c=r("5b5f"),l=r("299a"),d=!1,u=d?c["b"].log.bind(c["b"]):function(){},h=10;class f{constructor(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.client=e,this.timelineSet=t,a()(this,"windowLimit",void 0),a()(this,"start",void 0),a()(this,"end",void 0),a()(this,"eventCount",0),this.windowLimit=n.windowLimit||1e3,null===(r=t.room)||void 0===r||r.on(l["d"].Timeline,this.onTimelineEvent.bind(this))}load(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=r=>{if(!r)throw new Error("No timeline given to initFields");var n,i=r.getEvents();if(e){if(n=i.findIndex(t=>t.getId()===e),n<0)throw new Error("getEventTimeline result didn't include requested event")}else n=i.length;var o=Math.min(i.length,n+Math.ceil(t/2)),a=Math.max(0,o-t);this.start=new p(r,a-r.getBaseIndex()),this.end=new p(r,o-r.getBaseIndex()),this.eventCount=o-a};return this.timelineSet.getTimelineForEvent(e)?(r(this.timelineSet.getTimelineForEvent(e)),Promise.resolve()):e?this.client.getEventTimeline(this.timelineSet,e).then(r):(r(this.timelineSet.getLiveTimeline()),Promise.resolve())}getTimelineIndex(e){var t,r;if(e==s["b"].BACKWARDS)return null!==(t=this.start)&&void 0!==t?t:null;if(e==s["b"].FORWARDS)return null!==(r=this.end)&&void 0!==r?r:null;throw new Error("Invalid direction '"+e+"'")}extend(e,t){var r=this.getTimelineIndex(e);if(!r)return u("TimelineWindow: no timeline yet"),!1;var n=e==s["b"].BACKWARDS?r.retreat(t):r.advance(t);if(n){this.eventCount+=n,u("TimelineWindow: increased cap by "+n+" (now "+this.eventCount+")");var i=this.eventCount-this.windowLimit;return i>0&&this.unpaginate(i,e!=s["b"].BACKWARDS),!0}return!1}onTimelineEvent(e,t,r,n){n&&this.onEventRemoved()}onEventRemoved(){var e=this.getEvents();e.length>0&&void 0===e[e.length-1]&&this.end&&this.end.index--}canPaginate(e){var t=this.getTimelineIndex(e);if(!t)return u("TimelineWindow: no timeline yet"),!1;if(e==s["b"].BACKWARDS){if(t.index>t.minIndex())return!0}else if(t.index<t.maxIndex())return!0;var r=t.timeline.getNeighbouringTimeline(e),n=t.timeline.getPaginationToken(e);return Boolean(r)||Boolean(n)}paginate(e,t){var r=arguments,n=this;return i()((function*(){var i=!(r.length>2&&void 0!==r[2])||r[2],o=r.length>3&&void 0!==r[3]?r[3]:h,a=n.getTimelineIndex(e);if(!a)return u("TimelineWindow: no timeline yet"),!1;if(a.pendingPaginate)return a.pendingPaginate;if(n.extend(e,t))return!0;if(!i||0===o)return!1;var c=a.timeline.getPaginationToken(e);if(!c)return u("TimelineWindow: no token"),!1;u("TimelineWindow: starting request");var l=n.client.paginateEventTimeline(a.timeline,{backwards:e==s["b"].BACKWARDS,limit:t}).finally((function(){a.pendingPaginate=void 0})).then(r=>(u("TimelineWindow: request completed with result "+r),r?n.paginate(e,t,!0,o-1):n.paginate(e,t,!1,0)));return a.pendingPaginate=l,l}))()}unpaginate(e,t){var r=t?this.start:this.end;if(!r)throw new Error("Attempting to unpaginate startOfTimeline=".concat(t," but don't have this direction"));if(e>this.eventCount||e<0)throw new Error("Attemting to unpaginate ".concat(e," events, but only have ").concat(this.eventCount," in the timeline"));while(e>0){var n=t?r.advance(e):r.retreat(e);if(n<=0)throw new Error("Unable to unpaginate any further, but still have "+this.eventCount+" events");e-=n,this.eventCount-=n,u("TimelineWindow.unpaginate: dropped "+n+" (now "+this.eventCount+")")}}getEvents(){if(!this.start)return[];var e=[],t=this.start.timeline;while(t){var r,n,i=t.getEvents(),o=0,a=i.length;t===this.start.timeline&&(o=this.start.index+t.getBaseIndex()),t===(null===(r=this.end)||void 0===r?void 0:r.timeline)&&(a=this.end.index+t.getBaseIndex());for(var c=o;c<a;c++)e.push(i[c]);if(t===(null===(n=this.end)||void 0===n?void 0:n.timeline))break;t=t.getNeighbouringTimeline(s["b"].FORWARDS)}return e}}class p{constructor(e,t){this.timeline=e,this.index=t,a()(this,"pendingPaginate",void 0)}minIndex(){return-1*this.timeline.getBaseIndex()}maxIndex(){return this.timeline.getEvents().length-this.timeline.getBaseIndex()}advance(e){if(!e)return 0;var t;if(e<0){if(t=Math.max(e,this.minIndex()-this.index),t<0)return this.index+=t,t}else if(t=Math.min(e,this.maxIndex()-this.index),t>0)return this.index+=t,t;var r=this.timeline.getNeighbouringTimeline(e<0?s["b"].BACKWARDS:s["b"].FORWARDS);return r?(this.timeline=r,this.index=e<0?this.maxIndex():this.minIndex(),u("paginate: switched to new neighbour"),this.advance(e)):0}retreat(e){return-1*this.advance(-1*e)}}},6430:function(t,r,n){var i=n("8707").Buffer,o=n("d485").Transform,a=n("aa22").StringDecoder,s=n("3fb5");function c(e){o.call(this),this.hashMode="string"===typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}s(c,o),c.prototype.update=function(e,t,r){"string"===typeof e&&(e=i.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},c.prototype.setAutoPadding=function(){},c.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},c.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},c.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},c.prototype._transform=function(t,r,n){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(e){i=e}finally{n(i)}},c.prototype._flush=function(t){var r;try{this.push(this.__final())}catch(e){r=e}t(r)},c.prototype._finalOrDigest=function(e){var t=this.__final()||i.alloc(0);return e&&(t=this._toString(t,e,!0)),t},c.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},t.exports=c},"647f":function(e,t,r){var n=r("596f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("edfb1cb0",n,e)}},"64b0":function(t,r,n){"use strict";var i=n("71c9"),o=function(){return!!i};o.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},t.exports=o},"651d":function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},6608:function(e,t,r){"use strict";r.d(t,"e",(function(){return g})),r.d(t,"f",(function(){return y})),r.d(t,"a",(function(){return b})),r.d(t,"d",(function(){return w})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return I})),r.d(t,"g",(function(){return R}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("5b5f"),c=r("c35f"),l=r("504a"),d=r("60af"),u=r("936a"),h=r("7963"),f=6e5,p=12e4,v=3e3,m="m.key.verification.",g=m+"request",y=m+"start",b=m+"cancel",_=m+"done",w=m+"ready",S=h["a"].Unsent,E=h["a"].Requested,k=h["a"].Ready,I=h["a"].Started,C=h["a"].Cancelled,T=h["a"].Done;class R extends u["b"]{constructor(e,t,r){var n;super(),n=this,this.channel=e,this.verificationMethods=t,this.client=r,a()(this,"eventsByUs",new Map),a()(this,"eventsByThem",new Map),a()(this,"_observeOnly",!1),a()(this,"timeoutTimer",null),a()(this,"_accepting",!1),a()(this,"_declining",!1),a()(this,"verifierHasFinished",!1),a()(this,"_cancelled",!1),a()(this,"_chosenMethod",null),a()(this,"_qrCodeData",null),a()(this,"requestReceivedAt",null),a()(this,"commonMethods",[]),a()(this,"_phase",void 0),a()(this,"_cancellingUserId",void 0),a()(this,"_verifier",void 0),a()(this,"cancelOnTimeout",i()((function*(){try{n.initiatedByMe?yield n.cancel({reason:"Other party didn't accept in time",code:"m.timeout"}):yield n.cancel({reason:"User didn't accept in time",code:"m.timeout"})}catch(e){s["b"].error("Error while cancelling verification request",e)}}))),this.channel.request=this,this.setPhase(S,!1)}static validateEvent(e,t,r){var n=t.getContent();return!(!e||!e.startsWith(m))&&(n?e!==g&&e!==w||Array.isArray(n.methods)?e!==g&&e!==w&&e!==y||"string"===typeof n.from_device&&0!==n.from_device.length||(s["b"].log("VerificationRequest: validateEvent: fail because from_device"),!1):(s["b"].log("VerificationRequest: validateEvent: fail because methods"),!1):(s["b"].log("VerificationRequest: validateEvent: no content"),!1))}get transactionId(){return this.channel.transactionId}get roomId(){return this.channel.roomId}get invalid(){return this.phase===S}get requested(){return this.phase===E}get cancelled(){return this.phase===C}get ready(){return this.phase===k}get started(){return this.phase===I}get done(){return this.phase===T}get methods(){return this.commonMethods}get chosenMethod(){return this._chosenMethod}calculateEventTimeout(e){var t=this.channel.getTimestamp(e)+f;if(this.requestReceivedAt&&!this.initiatedByMe&&this.phase<=E){var r=this.requestReceivedAt+p;t=Math.min(t,r)}return Math.max(0,t-Date.now())}get timeout(){var e=this.getEventByEither(g);return e?this.calculateEventTimeout(e):0}get requestEvent(){return this.getEventByEither(g)}get phase(){return this._phase}get verifier(){return this._verifier}get canAccept(){return Object(h["d"])(this)}get accepting(){return this._accepting}get declining(){return this._declining}get pending(){return!this.observeOnly&&this._phase!==T&&this._phase!==C}get qrCodeData(){return this._qrCodeData}getQRCodeBytes(){var e;return null===(e=this._qrCodeData)||void 0===e?void 0:e.getBuffer()}generateQRCode(){var e=this;return i()((function*(){return e.getQRCodeBytes()}))()}otherPartySupportsMethod(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&!this.ready&&!this.started)return!1;var r=this.eventsByThem.get(g)||this.eventsByThem.get(w);if(!r){if(this.started&&this.initiatedByMe){var n=this.eventsByUs.get(y),i=n&&n.getContent(),o=i&&i.method;return e==o}return!1}var a=r.getContent();if(!a)return!1;var{methods:s}=a;return!!Array.isArray(s)&&s.includes(e)}get initiatedByMe(){var e=this.eventsByUs.size+this.eventsByThem.size===0;if(this._phase===S&&e)return!0;var t=this.eventsByUs.has(g),r=this.eventsByThem.has(g);if(t&&!r)return!0;if(!t&&r)return!1;var n=this.eventsByUs.has(y),i=this.eventsByThem.has(y);return!(!n||i)}get requestingUserId(){return this.initiatedByMe?this.client.getUserId():this.otherUserId}get receivingUserId(){return this.initiatedByMe?this.otherUserId:this.client.getUserId()}get otherUserId(){return this.channel.userId}get otherDeviceId(){return this.channel.deviceId}get isSelfVerification(){return this.client.getUserId()===this.otherUserId}get cancellingUserId(){var e=this.eventsByUs.get(b),t=this.eventsByThem.get(b);return e&&(!t||e.getId()<t.getId())?e.getSender():t?t.getSender():void 0}get cancellationCode(){var e=this.getEventByEither(b);return e?e.getContent().code:null}get observeOnly(){return this._observeOnly}get targetDevice(){var e=this.eventsByThem.get(g)||this.eventsByThem.get(w)||this.eventsByThem.get(y),t=null===e||void 0===e?void 0:e.getContent(),r=null===t||void 0===t?void 0:t.from_device;return{userId:this.otherUserId,deviceId:r}}beginKeyVerification(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.observeOnly&&!this._verifier){var r=this.phase===E||this.phase===k||this.phase===S&&this.channel.canCreateRequest(y);if(r){if(this.commonMethods.length&&!this.commonMethods.includes(e))throw Object(c["g"])();if(this._verifier=this.createVerifier(e,null,t),!this._verifier)throw Object(c["g"])();this._chosenMethod=e}}return this._verifier}startVerification(e){var t=this;return i()((function*(){var r=t.beginKeyVerification(e);return r.verify(),r}))()}scanQRCode(e){throw new Error("QR code scanning not supported by legacy crypto")}sendRequest(){var e=this;return i()((function*(){if(!e.observeOnly&&e._phase===S){var t=[...e.verificationMethods.keys()];yield e.channel.send(g,{methods:t})}}))()}cancel(){var e=arguments,t=this;return i()((function*(){var{reason:r="User declined",code:n="m.user"}=e.length>0&&void 0!==e[0]?e[0]:{};if(!t.observeOnly&&t._phase!==C){if(t._declining=!0,t.emit(h["b"].Change),t._verifier)return t._verifier.cancel(Object(c["a"])(n,r)());t._cancellingUserId=t.client.getUserId(),yield t.channel.send(b,{code:n,reason:r})}}))()}accept(){var e=this;return i()((function*(){if(!e.observeOnly&&e.phase===E&&!e.initiatedByMe){var t=[...e.verificationMethods.keys()];e._accepting=!0,e.emit(h["b"].Change),yield e.channel.send(w,{methods:t})}}))()}waitFor(e){return new Promise((t,r)=>{var n=()=>{var i=!1;return e(this)?(t(this),i=!0):this.cancelled&&(r(new Error("cancelled")),i=!0),i&&this.off(h["b"].Change,n),i};n()||this.on(h["b"].Change,n)})}setPhase(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._phase=e,t&&this.emit(h["b"].Change)}getEventByEither(e){return this.eventsByThem.get(e)||this.eventsByUs.get(e)}getEventBy(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.eventsByThem.get(e):this.eventsByUs.get(e)}calculatePhaseTransitions(){var e=[{phase:S}],t=()=>e[e.length-1].phase,r=this.eventsByThem.has(g),n=this.getEventBy(g,r);n&&e.push({phase:E,event:n});var i,o=n&&this.getEventBy(w,!r);if(o&&t()===E&&e.push({phase:k,event:o}),o||!n){var a=this.eventsByThem.get(y),s=this.eventsByUs.get(y);i=a&&s?a.getSender()<s.getSender()?a:s:a||s}else i=this.getEventBy(y,!r);if(i){var c=t()===E&&(null===n||void 0===n?void 0:n.getSender())!==i.getSender(),l=t()===S&&this.channel.canCreateRequest(y);(c||t()===k||l)&&e.push({phase:I,event:i})}var d=this.eventsByUs.get(_);(this.verifierHasFinished||d&&t()===I)&&e.push({phase:T});var u=this.getEventByEither(b);return(this._cancelled||u)&&t()!==T?(e.push({phase:C,event:u}),e):e}transitionToPhase(e){var{phase:t,event:r}=e;if((t===E||t===k)&&!this.wasSentByOwnDevice(r)){var n=r.getContent();this.commonMethods=n.methods.filter(e=>this.verificationMethods.has(e))}if(this.observeOnly||t!==E&&t!==I&&t!==k||this.channel.receiveStartFromOtherDevices&&this.wasSentByOwnUser(r)&&!this.wasSentByOwnDevice(r)&&(this._observeOnly=!0),t===I){var{method:i}=r.getContent();this._verifier||this.observeOnly||(this._verifier=this.createVerifier(i,r),this._verifier?this._chosenMethod=i:this.cancel({code:"m.unknown_method",reason:"Unknown method: ".concat(i)}))}}applyPhaseTransitions(){var e=this.calculatePhaseTransitions(),t=e.findIndex(e=>e.phase===this.phase),r=e.slice(t+1);for(var n of r)this.transitionToPhase(n);return r}isWinningStartRace(e){if(e.getType()!==y)return!1;var t,r,n=this._verifier.startEvent;if(this.isSelfVerification)if(n){var i=n.getContent();t=i&&i.from_device}else t=this.client.getDeviceId();else t=n?n.getSender():this.client.getUserId();if(this.isSelfVerification){var o=e.getContent();r=o&&o.from_device}else r=e.getSender();return r<t}hasEventId(e){for(var t of this.eventsByUs.values())if(t.getId()===e)return!0;for(var r of this.eventsByThem.values())if(r.getId()===e)return!0;return!1}handleEvent(e,t,r,n,o){var a=this;return i()((function*(){if(!a.done&&!a.cancelled){var i=a._observeOnly;if(a.adjustObserveOnly(t,r),a.observeOnly||n||!(yield a.cancelOnError(e,t))){var c=o?a.eventsByUs.has(e):a.eventsByThem.has(e);if(!c){var d=a.phase;a.addEvent(e,t,o);var u=a.applyPhaseTransitions();try{if(a._verifier&&!a.observeOnly){var f=a.isWinningStartRace(t);if(a._verifier.canSwitchStartEvent(t)&&f)a._verifier.switchStartEvent(t);else if(!n){var p;(e===b||null!==(p=a._verifier.events)&&void 0!==p&&p.includes(e))&&a._verifier.handleEvent(t)}}if(u.length){if(r&&u.some(e=>e.phase===k)){var v=a.otherPartySupportsMethod(l["c"],!0);v&&(a._qrCodeData=yield l["a"].create(a,a.client))}var m=u[u.length-1],{phase:g}=m;a.setupTimeout(g),a.setPhase(g)}else a._observeOnly!==i&&a.emit(h["b"].Change)}finally{s["b"].log("Verification request ".concat(a.channel.transactionId,": ")+"".concat(e," event with id:").concat(t.getId(),", ")+"content:".concat(JSON.stringify(t.getContent())," ")+"deviceId:".concat(a.channel.deviceId,", ")+"sender:".concat(t.getSender(),", isSentByUs:").concat(o,", ")+"isLiveEvent:".concat(r,", isRemoteEcho:").concat(n,", ")+"phase:".concat(d,"=>").concat(a.phase,", ")+"observeOnly:".concat(i,"=>").concat(a._observeOnly))}}}}}))()}setupTimeout(e){var t=!this.timeoutTimer&&!this.observeOnly&&e===E;if(t&&(this.timeoutTimer=setTimeout(this.cancelOnTimeout,this.timeout)),this.timeoutTimer){var r=e===I||e===k||e===T||e===C;r&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)}}cancelOnError(e,t){var r=this;return i()((function*(){if(e===y){var n=t.getContent().method;if(!r.verificationMethods.has(n))return yield r.cancel(Object(c["b"])(Object(c["g"])())),!0}var i=e===g&&r.phase!==S,o=e===w&&r.phase!==E&&r.phase!==I;if(r.phase!==S&&(i||o)){s["b"].warn("Cancelling, unexpected ".concat(e," verification ")+"event from ".concat(t.getSender()));var a="Unexpected ".concat(e," event in phase ").concat(r.phase);return yield r.cancel(Object(c["b"])(Object(c["f"])({reason:a}))),!0}return!1}))()}adjustObserveOnly(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(this._observeOnly=!0),this.calculateEventTimeout(e)<v&&(this._observeOnly=!0)}addEvent(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r?this.eventsByUs.set(e,t):this.eventsByThem.set(e,t),e===g){for(var[n,i]of this.eventsByThem.entries())i.getSender()!==this.otherUserId&&this.eventsByThem.delete(n);this.requestReceivedAt=Date.now()}}createVerifier(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r||(r=this.targetDevice);var{userId:n,deviceId:i}=r,o=this.verificationMethods.get(e);if(o)return new o(this.channel,this.client,n,i,t,this);s["b"].warn("could not find verifier constructor for method",e)}wasSentByOwnUser(e){return(null===e||void 0===e?void 0:e.getSender())===this.client.getUserId()}wasSentByOwnDevice(e){if(!this.wasSentByOwnUser(e))return!1;var t=e.getContent();return!(!t||t.from_device!==this.client.getDeviceId())}onVerifierCancelled(){this._cancelled=!0;var e=this.applyPhaseTransitions();e.length&&this.setPhase(e[e.length-1].phase)}onVerifierFinished(){this.channel.send(d["b"].KeyVerificationDone,{}),this.verifierHasFinished=!0;var e=this.applyPhaseTransitions();e.length&&this.setPhase(e[e.length-1].phase)}getEventFromOtherParty(e){return this.eventsByThem.get(e)}}},6642:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return u}));var n,i=r("9523"),o=r.n(i),a=r("a2a7"),s=r("b83f"),c=r("936a");(function(e){e["New"]="Beacon.new",e["Update"]="Beacon.update",e["LivenessChange"]="Beacon.LivenessChange",e["Destroy"]="Beacon.Destroy",e["LocationUpdate"]="Beacon.LocationUpdate"})(n||(n={}));var l=(e,t,r)=>r>=e&&e+t>=r,d=e=>"".concat(e.getRoomId(),"_").concat(e.getStateKey());class u extends c["b"]{constructor(e){super(),this.rootEvent=e,o()(this,"roomId",void 0),o()(this,"_beaconInfo",void 0),o()(this,"_isLive",void 0),o()(this,"livenessWatchTimeout",void 0),o()(this,"_latestLocationEvent",void 0),o()(this,"clearLatestLocation",()=>{this._latestLocationEvent=void 0,this.emit(n.LocationUpdate,this.latestLocationState)}),this.roomId=this.rootEvent.getRoomId(),this.setBeaconInfo(this.rootEvent)}get isLive(){return!!this._isLive}get identifier(){return d(this.rootEvent)}get beaconInfoId(){return this.rootEvent.getId()}get beaconInfoOwner(){return this.rootEvent.getStateKey()}get beaconInfoEventType(){return this.rootEvent.getType()}get beaconInfo(){return this._beaconInfo}get latestLocationState(){return this._latestLocationEvent&&Object(a["parseBeaconContent"])(this._latestLocationEvent.getContent())}get latestLocationEvent(){return this._latestLocationEvent}update(e){if(d(e)!==this.identifier)throw new Error("Invalid updating event");e.getTs()<this.rootEvent.getTs()||(this.rootEvent=e,this.setBeaconInfo(this.rootEvent),this.emit(n.Update,e,this),this.clearLatestLocation())}destroy(){this.livenessWatchTimeout&&clearTimeout(this.livenessWatchTimeout),this._isLive=!1,this.emit(n.Destroy,this.identifier)}monitorLiveness(){if(this.livenessWatchTimeout&&clearTimeout(this.livenessWatchTimeout),this.checkLiveness(),this.beaconInfo)if(this.isLive){var e=this.beaconInfo.timestamp+this.beaconInfo.timeout-Date.now();e>1&&(this.livenessWatchTimeout=setTimeout(()=>{this.monitorLiveness()},e))}else this.beaconInfo.timestamp>Date.now()&&(this.livenessWatchTimeout=setTimeout(()=>{this.monitorLiveness()},this.beaconInfo.timestamp-Date.now()))}addLocations(e){var t;if(this.isLive){var r=e.filter(e=>{var t=e.getContent(),r=Object(a["parseBeaconContent"])(t);if(!r.uri||!r.timestamp)return!1;var{timestamp:n}=r;return this._beaconInfo.timestamp&&l(this._beaconInfo.timestamp,this._beaconInfo.timeout,n)&&(!this.latestLocationState||n>this.latestLocationState.timestamp)}),i=null===(t=r.sort(s["L"]))||void 0===t?void 0:t[0];i&&(this._latestLocationEvent=i,this.emit(n.LocationUpdate,this.latestLocationState))}}setBeaconInfo(e){this._beaconInfo=Object(a["parseBeaconInfoContent"])(e.getContent()),this.checkLiveness()}checkLiveness(){var e=this.isLive;if(this.beaconInfo){var t=this.beaconInfo.timestamp>Date.now()?this.beaconInfo.timestamp-36e4:this.beaconInfo.timestamp;this._isLive=!!this._beaconInfo.live&&!!t&&l(t,this._beaconInfo.timeout,Date.now()),e!==this.isLive&&this.emit(n.LivenessChange,this.isLive,this)}}}},6649:function(e,t,r){var n=r("d3af");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("780ba666",n,e)}},6682:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_TEXT=t.M_NOTICE=t.M_MESSAGE=t.M_HTML=t.M_EMOTE=void 0;var n=r("d308"),i=new n.UnstableValue("m.message","org.matrix.msc1767.message");t.M_MESSAGE=i;var o=new n.UnstableValue("m.text","org.matrix.msc1767.text");t.M_TEXT=o;var a=new n.UnstableValue("m.html","org.matrix.msc1767.html");t.M_HTML=a;var s=new n.UnstableValue("m.emote","org.matrix.msc1767.emote");t.M_EMOTE=s;var c=new n.UnstableValue("m.notice","org.matrix.msc1767.notice");t.M_NOTICE=c},"67d9":function(e,t,r){"use strict";e.exports=URIError},"67ee":function(e,t,r){"use strict";e.exports=SyntaxError},"688e":function(e,t,r){"use strict";var n="Function.prototype.bind called on incompatible ",i=Object.prototype.toString,o=Math.max,a="[object Function]",s=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},c=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},l=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var t=this;if("function"!==typeof t||i.apply(t)!==a)throw new TypeError(n+t);for(var r,d=c(arguments,1),u=function(){if(this instanceof r){var n=t.apply(this,s(d,arguments));return Object(n)===n?n:this}return t.apply(e,s(d,arguments))},h=o(0,t.length-d.length),f=[],p=0;p<h;p++)f[p]="$"+p;if(r=Function("binder","return function ("+l(f,",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var v=function(){};v.prototype=t.prototype,r.prototype=new v,v.prototype=null}return r}},"68b2":function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExtensibleEvents=void 0;var i=n("c739"),o=n("2c89"),a=n("bd07"),s=n("cc9b"),c=n("6682"),l=n("8c1e"),d=n("7c3f");function u(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r["return"]||r["return"]()}finally{if(s)throw o}}}}function h(e,t){if(e){if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(){function t(){p(this,t),g(this,"interpreters",new i.NamespacedMap([[a.LEGACY_M_ROOM_MESSAGE,a.parseMRoomMessage],[c.M_MESSAGE,s.parseMMessage],[c.M_EMOTE,s.parseMMessage],[c.M_NOTICE,s.parseMMessage],[l.M_POLL_START,d.parseMPoll],[l.M_POLL_RESPONSE,d.parseMPoll],[l.M_POLL_END,d.parseMPoll]])),g(this,"_unknownInterpretOrder",[c.M_MESSAGE])}return m(t,[{key:"unknownInterpretOrder",get:function(){var e;return null!==(e=this._unknownInterpretOrder)&&void 0!==e?e:[]},set:function(e){this._unknownInterpretOrder=e}},{key:"registerInterpreter",value:function(e,t){this.interpreters.set(e,t)}},{key:"parse",value:function(t){try{if(this.interpreters.hasNamespaced(t.type))return this.interpreters.getNamespaced(t.type)(t);var r,n=u(this.unknownInterpretOrder);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(this.interpreters.has(i)){var a=this.interpreters.get(i)(t);if(a)return a}}}catch(s){n.e(s)}finally{n.f()}return null}catch(e){if(e instanceof o.InvalidEventError)return null;throw e}}}],[{key:"defaultInstance",get:function(){return t._defaultInstance}},{key:"unknownInterpretOrder",get:function(){return t.defaultInstance.unknownInterpretOrder},set:function(e){t.defaultInstance.unknownInterpretOrder=e}},{key:"registerInterpreter",value:function(e,r){t.defaultInstance.registerInterpreter(e,r)}},{key:"parse",value:function(e){return t.defaultInstance.parse(e)}}]),t}();r.ExtensibleEvents=y,g(y,"_defaultInstance",new y)},6967:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))},o=this&&this.__generator||function(t,r){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&a[0]?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(t,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=a(n("c566")),c=s.default.CancelToken;function l(e){return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return t=e.timeout,t&&(e.cancelToken=new c((function(e){return r=e})),setTimeout((function(){r("timeout cancel",{timeout:t})}),t)),[4,s.default(e)];case 1:return[2,n.sent()]}}))}))}r.default=l},6977:function(e,t,r){"use strict";r.r(t);var n=r("ab82");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"69d0":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.m-message-container{position:fixed;z-index:1010;pointer-events:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;padding:15px}.m-message-container.is-top-center,.m-message-container.is-top-left,.m-message-container.is-top-right{width:100%;top:0;left:0}.m-message-container.is-top-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.m-message-container.is-top-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-container.is-top-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.m-message-container.is-center{width:100%;height:100%;left:0;top:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.m-message-container.is-bottom-center,.m-message-container.is-bottom-left,.m-message-container.is-bottom-right{bottom:0;left:0;width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.m-message-container.is-bottom-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.m-message-container.is-bottom-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-container.is-bottom-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.m-message-container.has-mask{background-color:hsla(0,0%,100%,.5);width:100%;height:100%;pointer-events:all}.m-message-wrapper{display:inline-block;max-width:500px}.m-message-wrapper+.m-message-wrapper{margin-top:15px}.m-message-wrapper:after,.m-message-wrapper:before{content:"";clear:both;display:table}.m-message{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 16px;font-size:14px;overflow:hidden;border-radius:4px;-webkit-box-shadow:0 1px 8px rgba(0,0,0,.15);box-shadow:0 1px 8px rgba(0,0,0,.15);color:rgba(0,0,0,.65);background:hsla(0,0%,100%,.95);pointer-events:all;position:relative}.m-message,.m-message-icons{-webkit-box-sizing:border-box;box-sizing:border-box}.m-message-icons{float:left;margin-right:10px}.m-message--title{font-size:14px;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.m-message-content{-webkit-box-sizing:border-box;box-sizing:border-box;overflow:auto;width:100%}.m-message--description{line-height:1.6;color:#777}.m-message--title+.m-message--description{margin-top:5px}.m-message--icon{width:25px;height:25px;vertical-align:middle;display:inline-block;border-radius:50%}.m-message--control{position:relative;height:100%;-ms-flex-item-align:start;align-self:flex-start;white-space:nowrap;margin-right:-5px;margin-left:10px}.m-message--button{border:none;outline:none;background:none;cursor:pointer;font-size:15px;color:#646464;font-weight:600;padding:0;width:20px;height:20px;line-height:20px;text-align:center;vertical-align:middle}.m-message--button:hover{color:#f56c6c}.m-message--arrow-down.is-collapsed{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.m-message-fade-enter-active{-webkit-animation:m-message-fade-in-down .3s;animation:m-message-fade-in-down .3s}.m-message-fade-leave-active{-webkit-animation:m-message-fade-out .3s;animation:m-message-fade-out .3s}@-webkit-keyframes m-message-fade-in-down{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes m-message-fade-in-down{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes m-message-fade-out{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:-45px}}@keyframes m-message-fade-out{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:-45px}}',""]),e.exports=t},"69f2":function(e,t,r){t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};t.sha=r("087f"),t.sha1=r("7e78"),t.sha224=r("72aa"),t.sha256=r("a255"),t.sha384=r("b837"),t.sha512=r("4fd1")},"69f3":function(e,t,r){"use strict";var n,i,o,a=r("cdce"),s=r("cfe9"),c=r("861d"),l=r("9112"),d=r("1a2d"),u=r("c6cd"),h=r("f772"),f=r("d012"),p="Object already initialized",v=s.TypeError,m=s.WeakMap,g=function(e){return o(e)?i(e):n(e,{})},y=function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw new v("Incompatible receiver, "+e+" required");return r}};if(a||u.state){var b=u.state||(u.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,n=function(e,t){if(b.has(e))throw new v(p);return t.facade=e,b.set(e,t),t},i=function(e){return b.get(e)||{}},o=function(e){return b.has(e)}}else{var _=h("state");f[_]=!0,n=function(e,t){if(d(e,_))throw new v(p);return t.facade=e,l(e,_,t),t},i=function(e){return d(e,_)?e[_]:{}},o=function(e){return d(e,_)}}e.exports={set:n,get:i,has:o,enforce:g,getterFor:y}},"69f5":function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("69fc");class a{constructor(e,t){this._crypto=e,this._key=t,this._iv=new o.default,this._emptyPromise=Promise.resolve(this)}static importKey(e,t){return i(this,void 0,void 0,(function*(){if(16!==t.length&&32!==t.length)throw new Error(`Miscreant: invalid key length: ${t.length} (expected 16 or 32 bytes)`);const r=yield e.subtle.importKey("raw",t,"AES-CBC",!1,["encrypt"]);return new a(e,r)}))}clear(){return this}encryptBlock(e){return i(this,void 0,void 0,(function*(){const t={name:"AES-CBC",iv:this._iv.data},r=yield this._crypto.subtle.encrypt(t,this._key,e.data);return e.data.set(new Uint8Array(r,0,o.default.SIZE)),this._emptyPromise}))}}r.default=a},"69fc":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("b8d8"),i=r("ffd9");class o{constructor(){this.data=new Uint8Array(o.SIZE)}clear(){i.wipe(this.data)}clone(){const e=new o;return e.copy(this),e}copy(e){this.data.set(e.data)}dbl(){let e=0;for(let t=o.SIZE-1;t>=0;t--){const r=this.data[t]>>>7&255;this.data[t]=this.data[t]<<1|e,e=r}this.data[o.SIZE-1]^=n.select(e,o.R,0),e=0}}o.SIZE=16,o.R=135,t.default=o},"6aa0":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("aab2");class c{constructor(e){this.cryptoStore=e,a()(this,"roomEncryption",{})}init(){var e=this;return i()((function*(){yield e.cryptoStore.doTxn("readwrite",[s["a"].STORE_ROOMS],t=>{e.cryptoStore.getEndToEndRooms(t,t=>{e.roomEncryption=t})})}))()}getRoomEncryption(e){return this.roomEncryption[e]||null}isRoomEncrypted(e){return Boolean(this.getRoomEncryption(e))}setRoomEncryption(e,t){var r=this;return i()((function*(){r.roomEncryption[e]=t,yield r.cryptoStore.doTxn("readwrite",[s["a"].STORE_ROOMS],n=>{r.cryptoStore.storeEndToEndRoom(e,t,n)})}))()}}},"6b57":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload"},[t("div",{staticClass:"uploadWrapper"},[t("div",{staticClass:"contentWrapper"},[e._t("content",(function(){return[t("i",{staticClass:"fas fa-plus"})]}))],2),t("div",{staticClass:"inputWrapper"},[t("input",{attrs:{type:"file",multiple:e.multiple},on:{change:e.upload}})])]),e.dropzone?t("div",{ref:"dropzone",staticClass:"dropzone",class:{dropzone:e.dropzone}},[e._t("dropzone",(function(){return[t("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("caption.dragAndDropAFile"))+" ")]}))],2):e._e()])},i=[],o=(r("d9e2"),r("5059")),a=r("2bea"),s=new o["a"],c={name:"upload",directives:{},props:{dropzone:String,multiple:Boolean,onlyimage:Boolean,maxsize:{default:25,type:Number},extensions:{type:Array,default:()=>[]},images:{type:Object,default:()=>{}}},data:function(){return{loading:!1}},computed:{maxSize(){return 1024*this.maxsize*1024}},created:()=>{},methods:{read:function(e){var t=new FileReader;return new Promise((r,n)=>{t.onloadend=function(t){r({base64:t.target.result,file:e})},t.readAsDataURL(e)})},upload:function(e){var t,r;e.stopPropagation(),e.preventDefault();var n=(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)||(null===(r=e.target)||void 0===r?void 0:r.files)||e.files||[],i={};this.loading=!0,this.$emit("start",n);var o=this;a(_.toArray(n),(e,t)=>{var r=this.check(e);if(r)return o.$emit("error",{error:r,file:e,text:this.errorText(r,e)}),void t(new Error(r));this.read(e).then(e=>(i[e.file.name]=e,this.handle(e))).then(e=>{o.$emit("uploaded",e),t()}).catch(n=>{o.$emit("error",{error:n,file:e,text:this.errorText(n,e)}),t(new Error(r))})},e=>{this.loading=!1,o.$emit("uploadedAll",i)})},errorText:function(e,t){return"filesize"===e?"File Size Error: ("+t.name+"). The File can't be more than "+this.maxsize+" mbytes":"fileext"===e?"File Extension Error:"+t.name:void 0},check:function(e){return this.checkSize(e)?this.checkExtension(e)?void 0:"fileext":"filesize"},checkSize:function(e){return e.size<=this.maxSize},getExtension:function(e){var t=e.name.split("."),r=t[t.length-1].toLowerCase();return r},checkExtension:function(e){return!this.extensions.length||-1!=_.indexOf(this.extensions,this.getExtension(e))},handle:function(e){return"image/jpeg"===e.file.type||"image/png"===e.file.type||"image/webp"===e.file.type?this.handleImages(e):Promise.resolve(e)},sendAnyFile:function(e){this.$emit("anyFile",e)},resizeIfNeed:function(e,t){if(this.images.resize){var r=this.images.resize.type||"def";return s.resize[r](e,this.images.resize.width||1024,this.images.resize.height||1024,t,this.images.resize.quality||.85).then(e=>Promise.resolve(e)).catch(e=>Promise.reject(e))}return Promise.resolve(e)},handleImages:function(e){return s.autorotation(e.file,e.base64).then(t=>(e.base64=t,Promise.resolve(e))).then(e=>this.resizeIfNeed(e.base64,e.file.type).then(t=>(e.base64=t,Promise.resolve(e))))}}},l=c,d=r("2877");function u(e){var t=r("35aa");t.__inject__&&t.__inject__(e)}var h=Object(d["a"])(l,n,i,!1,u,"3fad2ed3",null,!0);t["a"]=h.exports},"6b63":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,":root{--overlay-bg:#1867c0;--transition-duration:.35s}",""]),e.exports=t},"6ba6":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"6bf4":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("9523"),i=r.n(n),o=r("5b5f"),a=r("60af"),s=r("b83f"),c=r("9c88"),l=!1;class d{static RETRY_BACKOFF_RATELIMIT(e,t,r){return Object(c["k"])(r,t,!1)}static QUEUE_MESSAGES(e){return e.getType()===a["b"].RoomMessage||e.hasAssociation()?"message":null}constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.RETRY_BACKOFF_RATELIMIT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.QUEUE_MESSAGES;this.retryAlgorithm=e,this.queueAlgorithm=t,i()(this,"queues",{}),i()(this,"activeQueues",[]),i()(this,"procFn",null),i()(this,"processQueue",e=>{var t=this.peekNextEvent(e);t?(u("Queue '%s' has %s pending events",e,this.queues[e].length),Promise.resolve().then(()=>this.procFn(t.event)).then(r=>{this.removeNextEvent(e),u("Queue '%s' sent event %s",e,t.event.getId()),t.defer.resolve(r),this.processQueue(e)},r=>{t.attempts+=1;var n=this.retryAlgorithm(t.event,t.attempts,r);u("retry(%s) err=%s event_id=%s waitTime=%s",t.attempts,r,t.event.getId(),n),-1===n?(o["b"].info("Queue '%s' giving up on event %s",e,t.event.getId()),this.clearQueue(e,r)):setTimeout(this.processQueue,n,e)})):this.disableQueue(e)})}getQueueForEvent(e){var t=this.queueAlgorithm(e);return t&&this.queues[t]?this.queues[t].map((function(e){return e.event})):null}removeEventFromQueue(e){var t=this.queueAlgorithm(e);if(!t||!this.queues[t])return!1;var r=!1;return Object(s["F"])(this.queues[t],t=>t.event.getId()===e.getId()&&(r=!0,!0)),r}setProcessFunction(e){this.procFn=e,this.startProcessingQueues()}queueEvent(e){var t=this.queueAlgorithm(e);if(!t)return null;this.queues[t]||(this.queues[t]=[]);var r=Object(s["i"])();return this.queues[t].push({event:e,defer:r,attempts:0}),u("Queue algorithm dumped event %s into queue '%s'",e.getId(),t),this.startProcessingQueues(),r.promise}startProcessingQueues(){this.procFn&&Object.keys(this.queues).filter(e=>-1===this.activeQueues.indexOf(e)&&this.queues[e].length>0).forEach(e=>{this.activeQueues.push(e),u("Spinning up queue: '%s'",e),this.processQueue(e)})}disableQueue(e){var t=this.activeQueues.indexOf(e);t>=0&&this.activeQueues.splice(t,1),o["b"].info("Stopping queue '%s' as it is now empty",e)}clearQueue(e,t){var r;o["b"].info("clearing queue '%s'",e);while(r=this.removeNextEvent(e))r.defer.reject(t);this.disableQueue(e)}peekNextEvent(e){var t=this.queues[e];if(Array.isArray(t))return t[0]}removeNextEvent(e){var t=this.queues[e];if(Array.isArray(t))return t.shift()}}function u(){l&&o["b"].log(...arguments)}},"6ce2":function(e){e.exports=JSON.parse('{"caption":{"create":"Create","addPublicChatName":"Add Public Chat Name","addGroupNamePlaceHolder":"Add Group Name","createPublicChat":"Create public chat","chatTopic":"Topic renamed","asModerator":"as moderator","marked":"marked","unmarked":"unmarked","removeBan":"Remove Ban","cancelModeration":"Remove moderation","uploadFiles":"Herunterladen von Dateien","header":"Header","dragAndDropAFile":"Drag & Drop-Datei","chatInvite":"Sie wurden eingeladen mit Benutzer zu chatten:","cantJoion":"Sie können den Chat mit dem Benutzer nicht beitreten:","chatInviteDecline":"Sie können im Chat teilnehmen oder Einladung ablehnen","creatorLeft":"Weil der Schöpfer den Raum verlassen hat","encrypted":"Verschlüssel","noImages":"Es gibt noch keine Bilder in diesem Chat","noFiles":"There are no files in this chat yet","inviteUser":"Benutzer einladen","invite":"Einladen","add":"Hinzufügen","mute":"Stumm","unmute":"Ton aktivieren","leave":"Verlassen","Info":"Info","new":"Neue","typing":"Tippt","accNotFound":"Ihr Konto wurde nicht in der Blockchain gefunden. Vielleicht müssen Sie warten","emptyList":"liste ist leer ( gefiltert oder nur leer )","welcome":"Willkommen bei Pocketnet Chat","startNewChat":"Fangen Sie einen neuen chat an","chats":"Chats","shareWith":"Teilen mit","newChat":"Neuer Chat","moveToChat":"Zum Chat wechseln","queryNoResults":"Abfrage meldet keine Ergebnisse","needMoreCharacters":"Benötigen Sie mehr Zeichen für das Ergebnis","createGroup":"Gruppe erstellen","unabletoDecrypt":"* Kann nicht entschlüsselnt","messageDeleted":"Nachricht gelöscht","sentImage":"gesendetes Bild","sentVoiceMessage":"eine Sprachnachricht gesendet","invitationToChat":"Einladung zum Chat","invitationToRoom":"Invitation to room","leftChat":"Hat den chat verlasst","joined":"beitretet","chatRenamed":"Chat umbenannt in","recentComment":"Letzter Kommentar:","share":"AKTIE","followers":"Anhänger:","reputation":"Reputation:","following":"Folgen:","theme":"Thema:","contacts":"Kontakte","other":"Globale suche","phoneContacts":"Telefonische Kontakte","chooseInviteMedia":"Bitte wählen Sie, wie Sie einladen möchten","admin":"Admin","moderator":"Moderator","videocall":"Videoanrufe","call":"Anruf","leaveAndDelete":"Verlassen und Löschen","donate":"Donate","makeModerator":"Als Moderator ernennen","ban":"Ban","kick":"Kick","members":"Mitglieds","media":"Media","files":"Datei","contactsList":"Kontaktliste","send":"Senden","pageCaption":"Seite Beschriftung","caption":"Beschriftung","text":"Text","placeholder":"Platzhalter","sendTransactionTo":"Transaktion senden an","toBePaidByReceiver":"Zahlung durch den Empfänger","toBePaidBySender":"Zahlung durch Absender","source":"Quelle","amount":"Anzahl","receiver":"Empfänger","message":"Nachricht","includeFeesInAmount":"Gebühren in den Betrag einbeziehen","transactionFees":"Gebühren pro Transaktion","totalAmount":"Insgesamt","balanceTooLow":"Bilanz zu niedrig","transactionError":"Fehler: Transaktion kann nicht ausgeführt werden","calculateFees":"Gebühren berechnen","startChatWith":"Chat anfangen mit","searchResult":"Ergebnis der Suche","joinedInTheChat":"in den Chat eingeloggt","invited":"eingeladet ","hasInvited":"eingeladen ","inTheChat":" in den chat","banned":"banned","andRoom":"und Zimmer","left":"verließt","theChat":" Chat ","made":"Gemacht ","aModerator":" Moderator","editedChatNameTo ":"änderte den Chat-Namen in ","somebody":"Jemand","sent":"gesendet","PKOINto":" PKOIN für ","response":"Antwort","edited":"Bearbeitet","settings":"Einstellungen","unauthorized":"Nicht autorisiert","search":"Suche","replyOnMessage":"Antwort auf Nachricht","editMessage":"Nachricht bearbeiten","inviteFriend":"Пригласите друзей","emptyContactList":"Список контактов пуст","joinApp":"Pocketnet beitreten","hasInvitedToJoin":"hat Sie eingeladen, Pocketnet beizutreten","messagefrom":"Forwarded message","usernotgen":"User did not generate their encryption keys yet. You will be able to chat them when their keys are generated.","younotgen":"Please wait a minute, Your encryption keys are being generated...","chatsearchingempty":"No chats found for the specified filter","sendmessage":"Send message","messages":"Messages","you":"You","sentfile":"sent file:","administrators":"Eigentümer","moderators":"Moderatoren","participants":"Teilnehmer","streamChat":"Stream-Chat","membersList":"Mitgliederliste","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"Email","refillNamePlaceholder":"Den Namen Nachfüllen"},"message":{},"button":{"starChatButton":"Chat anfangen","decline":"Ablehnen","join":"Beitreten","ok":"Ok","copy":"Kopieren","forward":"Weiterleiten","delete":"Löschen","save":"Speichern","reply":"Antworten","share":"Share","download":"Herunterladen","downloaded":"Herunterladen","goToPocketnetProfile":"Zum Pocketnet Profil","sendFile":"Datai senden","takePhotoOrVideo":"Foto machen","sendCoins":"Münzen senden","edit":"Bearbeiten","select":"Auswählen","block":"Sperren","unblock":"Entsperren","blockUser":"Benutzer sperren","Complain":"Sich beschweren","chat":"Plaudern","donations":"Spenden"},"yes":"Ja","cancel":"Abbrechen","teamMessages":{"1-title":"Willkommen beim privaten Chat!","1-list1":"Privater Messenger, der NICHT mit Ihrer Telefonnummer verbunden ist.","1-list2":"Standardmäßig Ende-zu-Ende-Verschlüsselung jedes 1-zu-1-Gesprächs","1-list3":"Alle per Chat gesendeten oder empfangenen Bilder werden verschlüsselt gespeichert","1-list4":"Der Nachrichtenverlauf wird nur 7 Tage lang gespeichert","2-title":"Eine riesige Ankündigung!","2-message1":"Wir haben kürzlich die folgenden wichtigen Updates veröffentlicht:","2-list1":"Privater verschlüsselter Messenger, der nicht mit Ihrer Telefonnummer verbunden ist","2-list2":"Möglichkeit, PKOIN an Blogger zu spenden","2-list3":"Video- und Live-Streaming","2-message2":"Laden Sie jetzt Ihre Freunde ein und werden Sie Teil der großen Zukunft des dezentralen Internets!","2-button":"Freunde einladen"},"error_generic":"Something went wrong, please try again later.","sendingerror":"An error occurred while sending the message","details":"Details","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found"}')},"6ce5":function(e,t,r){"use strict";var n=r("df7e"),i=r("ebb5"),o=i.aTypedArray,a=i.exportTypedArrayMethod,s=i.getTypedArrayConstructor;a("toReversed",(function(){return n(o(this),s(this))}))},"6dd6":function(e,t,r){var n=r("7322");t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout),n},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"===typeof e[i]&&n.push(i);for(var o=0;o<n.length;o++){var a=n[o],s=e[a];e[a]=function(n){var i=t.operation(r),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))})),i.attempt((function(){n.apply(e,o)}))}.bind(e,s),e[a].options=r}}},"6dde":function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return c}));var n=r("da1e"),i="abcdefghijklmnopqrstuvwxyz",o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="0123456789";function s(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),Object(n["d"])(t)}function c(e){return l(e,o+i+a)}function l(e,t){for(var r="",n=0;n<e;++n)r+=t.charAt(Math.floor(Math.random()*t.length));return r}},"6de4":function(e){e.exports=JSON.parse('{"0":"O","1":"l","֭":"֖","֮":"֘","֨":"֙","֤":"֚","᪴":"ۛ","⃛":"ۛ","ؙ":"̓","ࣳ":"̓","̓":"̓","̕":"̓","ُ":"̓","ٝ":"̔","֜":"́","֝":"́","ؘ":"́","݇":"́","́":"́","॔":"́","َ":"́","̀":"̀","॓":"̀","̌":"̆","꙼":"̆","٘":"̆","ٚ":"̆","ͮ":"̆","ۨ":"̆̇","̐":"̆̇","ँ":"̆̇","ঁ":"̆̇","ઁ":"̆̇","ଁ":"̆̇","ఀ":"̆̇","ಁ":"̆̇","ഁ":"̆̇","𑒿":"̆̇","᳐":"̂","̑":"̂","ٛ":"̂","߮":"̂","꛰":"̂","֯":"̊","۟":"̊","៓":"̊","゚":"̊","ْ":"̊","ஂ":"̊","ံ":"̊","ំ":"̊","𑌀":"̊","ํ":"̊","ໍ":"̊","ͦ":"̊","ⷪ":"̊","࣫":"̈","߳":"̈","ً":"̋","ࣰ":"̋","͂":"̃","ٓ":"̃","ׄ":"̇","۬":"̇","݀":"̇","࣪":"̇","݁":"̇","͘":"̇","ֹ":"̇","ֺ":"̇","ׂ":"̇","ׁ":"̇","߭":"̇","ं":"̇","ਂ":"̇","ં":"̇","்":"̇","̷":"̸","᪷":"̨","̢":"̨","ͅ":"̨","᳒":"̄","̅":"̄","ٙ":"̄","߫":"̄","꛱":"̄","᳚":"̎","ٗ":"̒","͗":"͐","ࣿ":"͐","ࣸ":"͐","ऀ":"͒","᳭":"̖","᳜":"̩","ٖ":"̩","᳕":"̫","͇":"̳","ࣹ":"͔","ࣺ":"͕","゛":"ﾞ","゜":"ﾟ","̶":"̵","〬":"̉","ׅ":"̣","࣭":"̣","᳝":"̣","ִ":"̣","ٜ":"̣","़":"̣","়":"̣","਼":"̣","઼":"̣","଼":"̣","𑇊":"̣","𑓃":"̣","𐨺":"̣","࣮":"̤","᳞":"̤","༷":"̥","〭":"̥","̧":"̦","̡":"̦","̹":"̦","᳙":"̭","᳘":"̮","॒":"̱","̠":"̱","ࣱ":"ٌ","ࣨ":"ٌ","ࣥ":"ٌ","ﱞ":"ﹲّ","ࣲ":"ٍ","ﱟ":"ﹴّ","ﳲ":"ﹷّ","ﱠ":"ﹶّ","ﳳ":"ﹹّ","ﱡ":"ﹸّ","ؚ":"ِ","̗":"ِ","ﳴ":"ﹻّ","ﱢ":"ﹺّ","ﱣ":"ﹼٰ","ٟ":"ٕ","̍":"ٰ","݂":"ܼ","ਃ":"ঃ","ః":"ঃ","ಃ":"ঃ","ഃ":"ঃ","ඃ":"ঃ","း":"ঃ","𑓁":"ঃ","់":"่","່":"่","້":"้","໊":"๊","໋":"๋","꙯":"⃩","\\u2028":" ","\\u2029":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" ","ߺ":"_","﹍":"_","﹎":"_","﹏":"_","‐":"-","‑":"-","‒":"-","–":"-","﹘":"-","۔":"-","⁃":"-","˗":"-","−":"-","➖":"-","Ⲻ":"-","⨩":"-̓","⸚":"-̈","﬩":"-̇","∸":"-̇","⨪":"-̣","꓾":"-.","～":"〜","؍":",","٫":",","‚":",","¸":",","ꓹ":",","⸲":"،","٬":"،",";":";","⸵":"؛","ः":":","ઃ":":","：":":","։":":","܃":":","܄":":","᛬":":","︰":":","᠃":":","᠉":":","⁚":":","׃":":","˸":":","꞉":":","∶":":","ː":":","ꓽ":":","⩴":"::=","⧴":":→","！":"!","ǃ":"!","ⵑ":"!","‼":"!!","⁉":"!?","ʔ":"?","Ɂ":"?","ॽ":"?","Ꭾ":"?","ꛫ":"?","⁈":"?!","⁇":"??","⸮":"؟","𝅭":".","․":".","܁":".","܂":".","꘎":".","𐩐":".","٠":".","۰":".","ꓸ":".","ꓻ":".,","‥":"..","ꓺ":"..","…":"...","꛴":"꛳꛳","・":"·","･":"·","᛫":"·","·":"·","⸱":"·","𐄁":"·","•":"·","‧":"·","∙":"·","⋅":"·","ꞏ":"·","ᐧ":"·","⋯":"···","ⵈ":"···","ᑄ":"·<","⋗":"·>","ᐷ":"·>","ᑀ":"·>","ᔯ":"·4","ᑾ":"·b","ᒀ":"·ḃ","ᑺ":"·d","ᒘ":"·J","ᒶ":"·L","ᑶ":"·P","ᑗ":"·U","ᐺ":"·V","ᐼ":"·Ʌ","ᒮ":"·Γ","ᐎ":"·Δ","ᑙ":"·Ո","ᐌ":"·ᐁ","ᐐ":"·ᐄ","ᐒ":"·ᐅ","ᐔ":"·ᐆ","ᐗ":"·ᐊ","ᐙ":"·ᐋ","ᐾ":"·ᐲ","ᑂ":"·ᐴ","ᑆ":"·ᐹ","ᑛ":"·ᑏ","ᑔ":"·ᑐ","ᑝ":"·ᑐ","ᑟ":"·ᑑ","ᑡ":"·ᑕ","ᑣ":"·ᑖ","ᑴ":"·ᑫ","ᑸ":"·ᑮ","ᑼ":"·ᑰ","ᒒ":"·ᒉ","ᒔ":"·ᒋ","ᒖ":"·ᒌ","ᒚ":"·ᒎ","ᒜ":"·ᒐ","ᒞ":"·ᒑ","ᒬ":"·ᒣ","ᒰ":"·ᒦ","ᒲ":"·ᒧ","ᒴ":"·ᒨ","ᒸ":"·ᒫ","ᓉ":"·ᓀ","ᣆ":"·ᓂ","ᣈ":"·ᓃ","ᣊ":"·ᓄ","ᣌ":"·ᓅ","ᓋ":"·ᓇ","ᓍ":"·ᓈ","ᓜ":"·ᓓ","ᓞ":"·ᓕ","ᓠ":"·ᓖ","ᓢ":"·ᓗ","ᓤ":"·ᓘ","ᓦ":"·ᓚ","ᓨ":"·ᓛ","ᓶ":"·ᓭ","ᓸ":"·ᓯ","ᓺ":"·ᓰ","ᓼ":"·ᓱ","ᓾ":"·ᓲ","ᔀ":"·ᓴ","ᔂ":"·ᓵ","ᔗ":"·ᔐ","ᔙ":"·ᔑ","ᔛ":"·ᔒ","ᔝ":"·ᔓ","ᔟ":"·ᔔ","ᔡ":"·ᔕ","ᔣ":"·ᔖ","ᔱ":"·ᔨ","ᔳ":"·ᔩ","ᔵ":"·ᔪ","ᔷ":"·ᔫ","ᔹ":"·ᔭ","ᔻ":"·ᔮ","ᣎ":"·ᕃ","ᣏ":"·ᕆ","ᣐ":"·ᕇ","ᣑ":"·ᕈ","ᣒ":"·ᕉ","ᣓ":"·ᕋ","ᕎ":"·ᕌ","ᕛ":"·ᕚ","ᕨ":"·ᕧ","ᢳ":"·ᢱ","ᢶ":"·ᢴ","ᢹ":"·ᢸ","ᣂ":"·ᣀ","꠰":"।","॥":"।।","᰼":"᰻᰻","။":"၊၊","᪩":"᪨᪨","᪫":"᪪᪨","᭟":"᭞᭞","𐩗":"𐩖𐩖","𑑌":"𑑋𑑋","𑙂":"𑙁𑙁","𑱂":"𑱁𑱁","᱿":"᱾᱾","՝":"\'","＇":"\'","‘":"\'","’":"\'","‛":"\'","′":"\'","‵":"\'","՚":"\'","׳":"\'","`":"\'","`":"\'","｀":"\'","´":"\'","΄":"\'","´":"\'","᾽":"\'","᾿":"\'","῾":"\'","ʹ":"\'","ʹ":"\'","ˈ":"\'","ˊ":"\'","ˋ":"\'","˴":"\'","ʻ":"\'","ʽ":"\'","ʼ":"\'","ʾ":"\'","ꞌ":"\'","י":"\'","ߴ":"\'","ߵ":"\'","ᑊ":"\'","ᛌ":"\'","𖽑":"\'","𖽒":"\'","᳓":"\'\'","\\"":"\'\'","＂":"\'\'","“":"\'\'","”":"\'\'","‟":"\'\'","″":"\'\'","‶":"\'\'","〃":"\'\'","״":"\'\'","˝":"\'\'","ʺ":"\'\'","˶":"\'\'","ˮ":"\'\'","ײ":"\'\'","‴":"\'\'\'","‷":"\'\'\'","⁗":"\'\'\'\'","Ɓ":"\'B","Ɗ":"\'D","ŉ":"\'n","Ƥ":"\'P","Ƭ":"\'T","Ƴ":"\'Y","［":"(","❨":"(","❲":"(","〔":"(","﴾":"(","⸨":"((","㈠":"(ー)","⑵":"(2)","⒇":"(2O)","⑶":"(3)","⑷":"(4)","⑸":"(5)","⑹":"(6)","⑺":"(7)","⑻":"(8)","⑼":"(9)","⒜":"(a)","🄐":"(A)","⒝":"(b)","🄑":"(B)","⒞":"(c)","🄒":"(C)","⒟":"(d)","🄓":"(D)","⒠":"(e)","🄔":"(E)","⒡":"(f)","🄕":"(F)","⒢":"(g)","🄖":"(G)","⒣":"(h)","🄗":"(H)","⒤":"(i)","⒥":"(j)","🄙":"(J)","⒦":"(k)","🄚":"(K)","⑴":"(l)","🄘":"(l)","⒧":"(l)","🄛":"(L)","⑿":"(l2)","⒀":"(l3)","⒁":"(l4)","⒂":"(l5)","⒃":"(l6)","⒄":"(l7)","⒅":"(l8)","⒆":"(l9)","⑾":"(ll)","⑽":"(lO)","🄜":"(M)","⒩":"(n)","🄝":"(N)","⒪":"(o)","🄞":"(O)","⒫":"(p)","🄟":"(P)","⒬":"(q)","🄠":"(Q)","⒭":"(r)","🄡":"(R)","⒨":"(rn)","⒮":"(s)","🄢":"(S)","🄪":"(S)","⒯":"(t)","🄣":"(T)","⒰":"(u)","🄤":"(U)","⒱":"(v)","🄥":"(V)","⒲":"(w)","🄦":"(W)","⒳":"(x)","🄧":"(X)","⒴":"(y)","🄨":"(Y)","⒵":"(z)","🄩":"(Z)","㈀":"(ᄀ)","㈎":"(가)","㈁":"(ᄂ)","㈏":"(나)","㈂":"(ᄃ)","㈐":"(다)","㈃":"(ᄅ)","㈑":"(라)","㈄":"(ᄆ)","㈒":"(마)","㈅":"(ᄇ)","㈓":"(바)","㈆":"(ᄉ)","㈔":"(사)","㈇":"(ᄋ)","㈕":"(아)","㈝":"(오전)","㈞":"(오후)","㈈":"(ᄌ)","㈖":"(자)","㈜":"(주)","㈉":"(ᄎ)","㈗":"(차)","㈊":"(ᄏ)","㈘":"(카)","㈋":"(ᄐ)","㈙":"(타)","㈌":"(ᄑ)","㈚":"(파)","㈍":"(ᄒ)","㈛":"(하)","㈦":"(七)","㈢":"(三)","🉁":"(三)","㈨":"(九)","㈡":"(二)","🉂":"(二)","㈤":"(五)","㈹":"(代)","㈽":"(企)","㉁":"(休)","㈧":"(八)","㈥":"(六)","㈸":"(労)","🉇":"(勝)","㈩":"(十)","㈿":"(協)","㈴":"(名)","㈺":"(呼)","㈣":"(四)","㈯":"(土)","㈻":"(学)","🉃":"(安)","🉅":"(打)","🉈":"(敗)","㈰":"(日)","㈪":"(月)","㈲":"(有)","㈭":"(木)","🉀":"(本)","㈱":"(株)","㈬":"(水)","㈫":"(火)","🉄":"(点)","㈵":"(特)","🉆":"(盗)","㈼":"(監)","㈳":"(社)","㈷":"(祝)","㉀":"(祭)","㉂":"(自)","㉃":"(至)","㈶":"(財)","㈾":"(資)","㈮":"(金)","］":")","❩":")","❳":")","〕":")","﴿":")","⸩":"))","❴":"{","𝄔":"{","❵":"}","〚":"⟦","〛":"⟧","⟨":"❬","〈":"❬","〈":"❬","㇛":"❬","く":"❬","𡿨":"❬","⟩":"❭","〉":"❭","〉":"❭","＾":"︿","⸿":"¶","⁎":"*","٭":"*","∗":"*","𐌟":"*","᜵":"/","⁁":"/","∕":"/","⁄":"/","╱":"/","⟋":"/","⧸":"/","𝈺":"/","㇓":"/","〳":"/","Ⳇ":"/","ノ":"/","丿":"/","⼃":"/","⧶":"/̄","⫽":"//","⫻":"///","＼":"\\\\","﹨":"\\\\","∖":"\\\\","⟍":"\\\\","⧵":"\\\\","⧹":"\\\\","𝈏":"\\\\","𝈻":"\\\\","㇔":"\\\\","丶":"\\\\","⼂":"\\\\","⳹":"\\\\\\\\","⑊":"\\\\\\\\","⟈":"\\\\ᑕ","ꝸ":"&","૰":"॰","𑂻":"॰","𑇇":"॰","⚬":"॰","𑇛":"꣼","៙":"๏","៕":"๚","៚":"๛","༌":"་","༎":"།།","˄":"^","ˆ":"^","꙾":"ˇ","˘":"ˇ","‾":"ˉ","﹉":"ˉ","﹊":"ˉ","﹋":"ˉ","﹌":"ˉ","¯":"ˉ","￣":"ˉ","▔":"ˉ","ъ":"ˉb","ꙑ":"ˉbi","͵":"ˏ","˻":"˪","꜖":"˪","꜔":"˫","。":"˳","⸰":"°","˚":"°","∘":"°","○":"°","◦":"°","⍜":"°̲","⍤":"°̈","℃":"°C","℉":"°F","௵":"௳","༛":"༚༚","༟":"༚༝","࿎":"༝༚","༞":"༝༝","Ⓒ":"©","Ⓡ":"®","Ⓟ":"℗","𝈛":"⅄","⯬":"↞","⯭":"↟","⯮":"↠","⯯":"↡","↵":"↲","⥥":"⇃⇂","⥯":"⇃ᛚ","𝛛":"∂","𝜕":"∂","𝝏":"∂","𝞉":"∂","𝟃":"∂","𞣌":"∂","𞣍":"∂̵","ð":"∂̵","⌀":"∅","𝛁":"∇","𝛻":"∇","𝜵":"∇","𝝯":"∇","𝞩":"∇","𑢨":"∇","⍢":"∇̈","⍫":"∇̴","█":"∎","■":"∎","⨿":"∐","᛭":"+","➕":"+","𐊛":"+","⨣":"+̂","⨢":"+̊","⨤":"+̃","∔":"+̇","⨥":"+̣","⨦":"+̰","⨧":"+₂","➗":"÷","‹":"<","❮":"<","˂":"<","𝈶":"<","ᐸ":"<","ᚲ":"<","⋖":"<·","Ⲵ":"<·","ᑅ":"<·","≪":"<<","⋘":"<<<","᐀":"=","⹀":"=","゠":"=","꓿":"=","≚":"=̆","≙":"=̂","≗":"=̊","≐":"=̇","≑":"=̣̇","⩮":"=⃰","⩵":"==","⩶":"===","≞":"=ͫ","›":">","❯":">","˃":">","𝈷":">","ᐳ":">","𖼿":">","ᑁ":">·","⪥":"><","≫":">>","⨠":">>","⋙":">>>","⁓":"~","˜":"~","῀":"~","∼":"~","⍨":"~̈","⸞":"~̇","⩪":"~̇","⸟":"~̣","𞣈":"∠","⋀":"∧","∯":"∮∮","∰":"∮∮∮","⸫":"∴","⸪":"∵","⸬":"∷","𑇞":"≈","♎":"≏","🝞":"≏","≣":"≡","⨃":"⊍","⨄":"⊎","𝈸":"⊏","𝈹":"⊐","⨅":"⊓","⨆":"⊔","⨂":"⊗","⍟":"⊛","🝱":"⊠","🝕":"⊡","◁":"⊲","▷":"⊳","⍣":"⋆̈","︴":"⌇","◠":"⌒","⨽":"⌙","⌥":"⌤","⧇":"⌻","◎":"⌾","⦾":"⌾","⧅":"⍂","⦰":"⍉","⏃":"⍋","⏂":"⍎","⏁":"⍕","⏆":"⍭","☸":"⎈","︵":"⏜","︶":"⏝","︷":"⏞","︸":"⏟","︹":"⏠","︺":"⏡","▱":"⏥","⏼":"⏻","︱":"│","｜":"│","┃":"│","┏":"┌","┣":"├","▐":"▌","▗":"▖","▝":"▘","☐":"□","￭":"▪","▸":"▶","►":"▶","⳩":"☧","🜊":"☩","🌒":"☽","🌙":"☽","⏾":"☾","🌘":"☾","⧙":"⦚","🜺":"⧟","⨾":"⨟","𐆠":"⳨","♩":"𝅘𝅥","♪":"𝅘𝅥𝅮","⓪":"🄍","↺":"🄎","˙":"ॱ","ൎ":"ॱ","－":"ー","—":"ー","―":"ー","─":"ー","━":"ー","㇐":"ー","ꟷ":"ー","ᅳ":"ー","ㅡ":"ー","一":"ー","⼀":"ー","ᆖ":"ーー","ힹ":"ーᅡ","ힺ":"ーᅥ","ힻ":"ーᅥ丨","ힼ":"ーᅩ","ᆕ":"ーᅮ","ᅴ":"ー丨","ㅢ":"ー丨","ᆗ":"ー丨ᅮ","🄏":"$⃠","₤":"£","〒":"₸","〶":"₸","᭜":"᭐","꧆":"꧐","𑓑":"১","೧":"౧","ၥ":"၁","①":"➀","⑩":"➉","⏨":"₁₀","𝟐":"2","𝟚":"2","𝟤":"2","𝟮":"2","𝟸":"2","🯲":"2","Ꝛ":"2","Ƨ":"2","Ϩ":"2","Ꙅ":"2","ᒿ":"2","ꛯ":"2","ꧏ":"٢","۲":"٢","૨":"२","𑓒":"২","೨":"౨","②":"➁","ƻ":"2̵","🄃":"2,","⒉":"2.","㏵":"22日","㍮":"22点","㏶":"23日","㍯":"23点","㏷":"24日","㍰":"24点","㏸":"25日","㏹":"26日","㏺":"27日","㏻":"28日","㏼":"29日","㏴":"2l日","㍭":"2l点","⒛":"2O.","㏳":"2O日","㍬":"2O点","෩":"෨ා","෯":"෨ී","㏡":"2日","㋁":"2月","㍚":"2点","𝈆":"3","𝟑":"3","𝟛":"3","𝟥":"3","𝟯":"3","𝟹":"3","🯳":"3","Ɜ":"3","Ȝ":"3","Ʒ":"3","Ꝫ":"3","Ⳍ":"3","З":"3","Ӡ":"3","𖼻":"3","𑣊":"3","۳":"٣","𞣉":"٣","૩":"३","③":"➂","Ҙ":"3̦","🄄":"3,","⒊":"3.","㏾":"3l日","㏽":"3O日","㏢":"3日","㋂":"3月","㍛":"3点","𝟒":"4","𝟜":"4","𝟦":"4","𝟰":"4","𝟺":"4","🯴":"4","Ꮞ":"4","𑢯":"4","۴":"٤","૪":"४","④":"➃","🄅":"4,","⒋":"4.","ᔰ":"4·","㏣":"4日","㋃":"4月","㍜":"4点","𝟓":"5","𝟝":"5","𝟧":"5","𝟱":"5","𝟻":"5","🯵":"5","Ƽ":"5","𑢻":"5","⑤":"➄","🄆":"5,","⒌":"5.","㏤":"5日","㋄":"5月","㍝":"5点","𝟔":"6","𝟞":"6","𝟨":"6","𝟲":"6","𝟼":"6","🯶":"6","Ⳓ":"6","б":"6","Ꮾ":"6","𑣕":"6","۶":"٦","𑓖":"৬","⑥":"➅","🄇":"6,","⒍":"6.","㏥":"6日","㋅":"6月","㍞":"6点","𝈒":"7","𝟕":"7","𝟟":"7","𝟩":"7","𝟳":"7","𝟽":"7","🯷":"7","𐓒":"7","𑣆":"7","⑦":"➆","🄈":"7,","⒎":"7.","㏦":"7日","㋆":"7月","㍟":"7点","ଃ":"8","৪":"8","੪":"8","𞣋":"8","𝟖":"8","𝟠":"8","𝟪":"8","𝟴":"8","𝟾":"8","🯸":"8","ȣ":"8","Ȣ":"8","𐌚":"8","૮":"८","⑧":"➇","🄉":"8,","⒏":"8.","㏧":"8日","㋇":"8月","㍠":"8点","੧":"9","୨":"9","৭":"9","൭":"9","𝟗":"9","𝟡":"9","𝟫":"9","𝟵":"9","𝟿":"9","🯹":"9","Ꝯ":"9","Ⳋ":"9","𑣌":"9","𑢬":"9","𑣖":"9","१":"٩","𑣤":"٩","۹":"٩","೯":"౯","⑨":"➈","🄊":"9,","⒐":"9.","㏨":"9日","㋈":"9月","㍡":"9点","⍺":"a","ａ":"a","𝐚":"a","𝑎":"a","𝒂":"a","𝒶":"a","𝓪":"a","𝔞":"a","𝕒":"a","𝖆":"a","𝖺":"a","𝗮":"a","𝘢":"a","𝙖":"a","𝚊":"a","ɑ":"a","α":"a","𝛂":"a","𝛼":"a","𝜶":"a","𝝰":"a","𝞪":"a","а":"a","ⷶ":"ͣ","Ａ":"A","𝐀":"A","𝐴":"A","𝑨":"A","𝒜":"A","𝓐":"A","𝔄":"A","𝔸":"A","𝕬":"A","𝖠":"A","𝗔":"A","𝘈":"A","𝘼":"A","𝙰":"A","Α":"A","𝚨":"A","𝛢":"A","𝜜":"A","𝝖":"A","𝞐":"A","А":"A","Ꭺ":"A","ᗅ":"A","ꓮ":"A","𖽀":"A","𐊠":"A","⍶":"a̲","ǎ":"ă","Ǎ":"Ă","ȧ":"å","Ȧ":"Å","ẚ":"ả","℀":"a/c","℁":"a/s","ꜳ":"aa","Ꜳ":"AA","æ":"ae","ӕ":"ae","Æ":"AE","Ӕ":"AE","ꜵ":"ao","Ꜵ":"AO","🜇":"AR","ꜷ":"au","Ꜷ":"AU","ꜹ":"av","ꜻ":"av","Ꜹ":"AV","Ꜻ":"AV","ꜽ":"ay","Ꜽ":"AY","ꭺ":"ᴀ","∀":"Ɐ","𝈗":"Ɐ","ᗄ":"Ɐ","ꓯ":"Ɐ","𐐟":"Ɒ","𝐛":"b","𝑏":"b","𝒃":"b","𝒷":"b","𝓫":"b","𝔟":"b","𝕓":"b","𝖇":"b","𝖻":"b","𝗯":"b","𝘣":"b","𝙗":"b","𝚋":"b","Ƅ":"b","Ь":"b","Ꮟ":"b","ᑲ":"b","ᖯ":"b","Ｂ":"B","ℬ":"B","𝐁":"B","𝐵":"B","𝑩":"B","𝓑":"B","𝔅":"B","𝔹":"B","𝕭":"B","𝖡":"B","𝗕":"B","𝘉":"B","𝘽":"B","𝙱":"B","Ꞵ":"B","Β":"B","𝚩":"B","𝛣":"B","𝜝":"B","𝝗":"B","𝞑":"B","В":"B","Ᏼ":"B","ᗷ":"B","ꓐ":"B","𐊂":"B","𐊡":"B","𐌁":"B","ɓ":"b̔","ᑳ":"ḃ","ƃ":"b̄","Ƃ":"b̄","Б":"b̄","ƀ":"b̵","ҍ":"b̵","Ҍ":"b̵","ѣ":"b̵","Ѣ":"b̵","ᑿ":"b·","ᒁ":"ḃ·","ᒈ":"b\'","Ы":"bl","в":"ʙ","ᏼ":"ʙ","ｃ":"c","ⅽ":"c","𝐜":"c","𝑐":"c","𝒄":"c","𝒸":"c","𝓬":"c","𝔠":"c","𝕔":"c","𝖈":"c","𝖼":"c","𝗰":"c","𝘤":"c","𝙘":"c","𝚌":"c","ᴄ":"c","ϲ":"c","ⲥ":"c","с":"c","ꮯ":"c","𐐽":"c","ⷭ":"ͨ","🝌":"C","𑣲":"C","𑣩":"C","Ｃ":"C","Ⅽ":"C","ℂ":"C","ℭ":"C","𝐂":"C","𝐶":"C","𝑪":"C","𝒞":"C","𝓒":"C","𝕮":"C","𝖢":"C","𝗖":"C","𝘊":"C","𝘾":"C","𝙲":"C","Ϲ":"C","Ⲥ":"C","С":"C","Ꮯ":"C","ꓚ":"C","𐊢":"C","𐌂":"C","𐐕":"C","𐔜":"C","¢":"c̸","ȼ":"c̸","₡":"C⃫","🅮":"C⃠","ç":"c̦","ҫ":"c̦","Ç":"C̦","Ҫ":"C̦","Ƈ":"C\'","℅":"c/o","℆":"c/u","🅭":"㏄\\t⃝","⋴":"ꞓ","ɛ":"ꞓ","ε":"ꞓ","ϵ":"ꞓ","𝛆":"ꞓ","𝛜":"ꞓ","𝜀":"ꞓ","𝜖":"ꞓ","𝜺":"ꞓ","𝝐":"ꞓ","𝝴":"ꞓ","𝞊":"ꞓ","𝞮":"ꞓ","𝟄":"ꞓ","ⲉ":"ꞓ","є":"ꞓ","ԑ":"ꞓ","ꮛ":"ꞓ","𑣎":"ꞓ","𐐩":"ꞓ","€":"Ꞓ","Ⲉ":"Ꞓ","Є":"Ꞓ","⍷":"ꞓ̲","ͽ":"ꜿ","Ͽ":"Ꜿ","ⅾ":"d","ⅆ":"d","𝐝":"d","𝑑":"d","𝒅":"d","𝒹":"d","𝓭":"d","𝔡":"d","𝕕":"d","𝖉":"d","𝖽":"d","𝗱":"d","𝘥":"d","𝙙":"d","𝚍":"d","ԁ":"d","Ꮷ":"d","ᑯ":"d","ꓒ":"d","Ⅾ":"D","ⅅ":"D","𝐃":"D","𝐷":"D","𝑫":"D","𝒟":"D","𝓓":"D","𝔇":"D","𝔻":"D","𝕯":"D","𝖣":"D","𝗗":"D","𝘋":"D","𝘿":"D","𝙳":"D","Ꭰ":"D","ᗞ":"D","ᗪ":"D","ꓓ":"D","ɗ":"d̔","ɖ":"d̨","ƌ":"d̄","đ":"d̵","Đ":"D̵","Ð":"D̵","Ɖ":"D̵","₫":"ḏ̵","ꝺ":"Ꝺ","ᑻ":"d·","ᒇ":"d\'","ʤ":"dȝ","ǳ":"dz","ʣ":"dz","ǲ":"Dz","Ǳ":"DZ","ǆ":"dž","ǅ":"Dž","Ǆ":"DŽ","ʥ":"dʑ","ꭰ":"ᴅ","⸹":"ẟ","δ":"ẟ","𝛅":"ẟ","𝛿":"ẟ","𝜹":"ẟ","𝝳":"ẟ","𝞭":"ẟ","ծ":"ẟ","ᕷ":"ẟ","℮":"e","ｅ":"e","ℯ":"e","ⅇ":"e","𝐞":"e","𝑒":"e","𝒆":"e","𝓮":"e","𝔢":"e","𝕖":"e","𝖊":"e","𝖾":"e","𝗲":"e","𝘦":"e","𝙚":"e","𝚎":"e","ꬲ":"e","е":"e","ҽ":"e","ⷷ":"ͤ","⋿":"E","Ｅ":"E","ℰ":"E","𝐄":"E","𝐸":"E","𝑬":"E","𝓔":"E","𝔈":"E","𝔼":"E","𝕰":"E","𝖤":"E","𝗘":"E","𝘌":"E","𝙀":"E","𝙴":"E","Ε":"E","𝚬":"E","𝛦":"E","𝜠":"E","𝝚":"E","𝞔":"E","Е":"E","ⴹ":"E","Ꭼ":"E","ꓰ":"E","𑢦":"E","𑢮":"E","𐊆":"E","ě":"ĕ","Ě":"Ĕ","ɇ":"e̸","Ɇ":"E̸","ҿ":"ę","ꭼ":"ᴇ","ə":"ǝ","ә":"ǝ","∃":"Ǝ","ⴺ":"Ǝ","ꓱ":"Ǝ","ɚ":"ǝ˞","ᴔ":"ǝo","ꭁ":"ǝo̸","ꭂ":"ǝo̵","Ә":"Ə","𝈡":"Ɛ","ℇ":"Ɛ","Ԑ":"Ɛ","Ꮛ":"Ɛ","𖼭":"Ɛ","𐐁":"Ɛ","ᶟ":"ᵋ","ᴈ":"ɜ","з":"ɜ","ҙ":"ɜ̦","𐑂":"ɞ","ꞝ":"ʚ","𐐪":"ʚ","𝐟":"f","𝑓":"f","𝒇":"f","𝒻":"f","𝓯":"f","𝔣":"f","𝕗":"f","𝖋":"f","𝖿":"f","𝗳":"f","𝘧":"f","𝙛":"f","𝚏":"f","ꬵ":"f","ꞙ":"f","ſ":"f","ẝ":"f","ք":"f","𝈓":"F","ℱ":"F","𝐅":"F","𝐹":"F","𝑭":"F","𝓕":"F","𝔉":"F","𝔽":"F","𝕱":"F","𝖥":"F","𝗙":"F","𝘍":"F","𝙁":"F","𝙵":"F","Ꞙ":"F","Ϝ":"F","𝟊":"F","ᖴ":"F","ꓝ":"F","𑣂":"F","𑢢":"F","𐊇":"F","𐊥":"F","𐔥":"F","ƒ":"f̦","Ƒ":"F̦","ᵮ":"f̴","℻":"FAX","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ʩ":"fŋ","ᖵ":"Ⅎ","ꓞ":"Ⅎ","𝈰":"ꟻ","ᖷ":"ꟻ","ｇ":"g","ℊ":"g","𝐠":"g","𝑔":"g","𝒈":"g","𝓰":"g","𝔤":"g","𝕘":"g","𝖌":"g","𝗀":"g","𝗴":"g","𝘨":"g","𝙜":"g","𝚐":"g","ɡ":"g","ᶃ":"g","ƍ":"g","ց":"g","𝐆":"G","𝐺":"G","𝑮":"G","𝒢":"G","𝓖":"G","𝔊":"G","𝔾":"G","𝕲":"G","𝖦":"G","𝗚":"G","𝘎":"G","𝙂":"G","𝙶":"G","Ԍ":"G","Ꮐ":"G","Ᏻ":"G","ꓖ":"G","ᶢ":"ᵍ","ɠ":"g̔","ǧ":"ğ","Ǧ":"Ğ","ǵ":"ģ","ǥ":"g̵","Ǥ":"G̵","Ɠ":"G\'","ԍ":"ɢ","ꮐ":"ɢ","ᏻ":"ɢ","ｈ":"h","ℎ":"h","𝐡":"h","𝒉":"h","𝒽":"h","𝓱":"h","𝔥":"h","𝕙":"h","𝖍":"h","𝗁":"h","𝗵":"h","𝘩":"h","𝙝":"h","𝚑":"h","һ":"h","հ":"h","Ꮒ":"h","Ｈ":"H","ℋ":"H","ℌ":"H","ℍ":"H","𝐇":"H","𝐻":"H","𝑯":"H","𝓗":"H","𝕳":"H","𝖧":"H","𝗛":"H","𝘏":"H","𝙃":"H","𝙷":"H","Η":"H","𝚮":"H","𝛨":"H","𝜢":"H","𝝜":"H","𝞖":"H","Ⲏ":"H","Н":"H","Ꮋ":"H","ᕼ":"H","ꓧ":"H","𐋏":"H","ᵸ":"ᴴ","ɦ":"h̔","ꚕ":"h̔","Ᏺ":"h̔","Ⱨ":"H̩","Ң":"H̩","ħ":"h̵","ℏ":"h̵","ћ":"h̵","Ħ":"H̵","Ӊ":"H̦","Ӈ":"H̦","н":"ʜ","ꮋ":"ʜ","ң":"ʜ̩","ӊ":"ʜ̦","ӈ":"ʜ̦","Ԋ":"Ƕ","ꮀ":"ⱶ","Ͱ":"Ⱶ","Ꭸ":"Ⱶ","Ꮀ":"Ⱶ","ꚱ":"Ⱶ","ꞕ":"ꜧ","˛":"i","⍳":"i","ｉ":"i","ⅰ":"i","ℹ":"i","ⅈ":"i","𝐢":"i","𝑖":"i","𝒊":"i","𝒾":"i","𝓲":"i","𝔦":"i","𝕚":"i","𝖎":"i","𝗂":"i","𝗶":"i","𝘪":"i","𝙞":"i","𝚒":"i","ı":"i","𝚤":"i","ɪ":"i","ɩ":"i","ι":"i","ι":"i","ͺ":"i","𝛊":"i","𝜄":"i","𝜾":"i","𝝸":"i","𝞲":"i","і":"i","ꙇ":"i","ӏ":"i","ꭵ":"i","Ꭵ":"i","𑣃":"i","ⓛ":"Ⓘ","⍸":"i̲","ǐ":"ĭ","Ǐ":"Ĭ","ɨ":"i̵","ᵻ":"i̵","ᵼ":"i̵","ⅱ":"ii","ⅲ":"iii","ĳ":"ij","ⅳ":"iv","ⅸ":"ix","ｊ":"j","ⅉ":"j","𝐣":"j","𝑗":"j","𝒋":"j","𝒿":"j","𝓳":"j","𝔧":"j","𝕛":"j","𝖏":"j","𝗃":"j","𝗷":"j","𝘫":"j","𝙟":"j","𝚓":"j","ϳ":"j","ј":"j","Ｊ":"J","𝐉":"J","𝐽":"J","𝑱":"J","𝒥":"J","𝓙":"J","𝔍":"J","𝕁":"J","𝕵":"J","𝖩":"J","𝗝":"J","𝘑":"J","𝙅":"J","𝙹":"J","Ʝ":"J","Ϳ":"J","Ј":"J","Ꭻ":"J","ᒍ":"J","ꓙ":"J","ɉ":"j̵","Ɉ":"J̵","ᒙ":"J·","𝚥":"ȷ","յ":"ȷ","ꭻ":"ᴊ","𝐤":"k","𝑘":"k","𝒌":"k","𝓀":"k","𝓴":"k","𝔨":"k","𝕜":"k","𝖐":"k","𝗄":"k","𝗸":"k","𝘬":"k","𝙠":"k","𝚔":"k","K":"K","Ｋ":"K","𝐊":"K","𝐾":"K","𝑲":"K","𝒦":"K","𝓚":"K","𝔎":"K","𝕂":"K","𝕶":"K","𝖪":"K","𝗞":"K","𝘒":"K","𝙆":"K","𝙺":"K","Κ":"K","𝚱":"K","𝛫":"K","𝜥":"K","𝝟":"K","𝞙":"K","Ⲕ":"K","К":"K","Ꮶ":"K","ᛕ":"K","ꓗ":"K","𐔘":"K","ƙ":"k̔","Ⱪ":"K̩","Қ":"K̩","₭":"K̵","Ꝁ":"K̵","Ҟ":"K̵","Ƙ":"K\'","׀":"l","|":"l","∣":"l","⏽":"l","￨":"l","١":"l","۱":"l","𐌠":"l","𞣇":"l","𝟏":"l","𝟙":"l","𝟣":"l","𝟭":"l","𝟷":"l","🯱":"l","I":"l","Ｉ":"l","Ⅰ":"l","ℐ":"l","ℑ":"l","𝐈":"l","𝐼":"l","𝑰":"l","𝓘":"l","𝕀":"l","𝕴":"l","𝖨":"l","𝗜":"l","𝘐":"l","𝙄":"l","𝙸":"l","Ɩ":"l","ｌ":"l","ⅼ":"l","ℓ":"l","𝐥":"l","𝑙":"l","𝒍":"l","𝓁":"l","𝓵":"l","𝔩":"l","𝕝":"l","𝖑":"l","𝗅":"l","𝗹":"l","𝘭":"l","𝙡":"l","𝚕":"l","ǀ":"l","Ι":"l","𝚰":"l","𝛪":"l","𝜤":"l","𝝞":"l","𝞘":"l","Ⲓ":"l","І":"l","Ӏ":"l","ו":"l","ן":"l","ا":"l","𞸀":"l","𞺀":"l","ﺎ":"l","ﺍ":"l","ߊ":"l","ⵏ":"l","ᛁ":"l","ꓲ":"l","𖼨":"l","𐊊":"l","𐌉":"l","𝈪":"L","Ⅼ":"L","ℒ":"L","𝐋":"L","𝐿":"L","𝑳":"L","𝓛":"L","𝔏":"L","𝕃":"L","𝕷":"L","𝖫":"L","𝗟":"L","𝘓":"L","𝙇":"L","𝙻":"L","Ⳑ":"L","Ꮮ":"L","ᒪ":"L","ꓡ":"L","𖼖":"L","𑢣":"L","𑢲":"L","𐐛":"L","𐔦":"L","ﴼ":"l̋","ﴽ":"l̋","ł":"l̸","Ł":"L̸","ɭ":"l̨","Ɨ":"l̵","ƚ":"l̵","ɫ":"l̴","إ":"lٕ","ﺈ":"lٕ","ﺇ":"lٕ","ٳ":"lٕ","ŀ":"l·","Ŀ":"l·","ᒷ":"l·","🄂":"l,","⒈":"l.","ױ":"l\'","⒓":"l2.","㏫":"l2日","㋋":"l2月","㍤":"l2点","⒔":"l3.","㏬":"l3日","㍥":"l3点","⒕":"l4.","㏭":"l4日","㍦":"l4点","⒖":"l5.","㏮":"l5日","㍧":"l5点","⒗":"l6.","㏯":"l6日","㍨":"l6点","⒘":"l7.","㏰":"l7日","㍩":"l7点","⒙":"l8.","㏱":"l8日","㍪":"l8点","⒚":"l9.","㏲":"l9日","㍫":"l9点","ǉ":"lj","Ĳ":"lJ","ǈ":"Lj","Ǉ":"LJ","‖":"ll","∥":"ll","Ⅱ":"ll","ǁ":"ll","װ":"ll","𐆙":"l̵l̵","⒒":"ll.","Ⅲ":"lll","𐆘":"l̵l̵S̵","㏪":"ll日","㋊":"ll月","㍣":"ll点","Ю":"lO","⒑":"lO.","㏩":"lO日","㋉":"lO月","㍢":"lO点","ʪ":"ls","₶":"lt","Ⅳ":"lV","Ⅸ":"lX","ɮ":"lȝ","ʫ":"lz","أ":"lٴ","ﺄ":"lٴ","ﺃ":"lٴ","ٲ":"lٴ","ٵ":"lٴ","ﷳ":"lكبر","ﷲ":"lللّٰo","㏠":"l日","㋀":"l月","㍙":"l点","ⳑ":"ʟ","ꮮ":"ʟ","𐑃":"ʟ","Ｍ":"M","Ⅿ":"M","ℳ":"M","𝐌":"M","𝑀":"M","𝑴":"M","𝓜":"M","𝔐":"M","𝕄":"M","𝕸":"M","𝖬":"M","𝗠":"M","𝘔":"M","𝙈":"M","𝙼":"M","Μ":"M","𝚳":"M","𝛭":"M","𝜧":"M","𝝡":"M","𝞛":"M","Ϻ":"M","Ⲙ":"M","М":"M","Ꮇ":"M","ᗰ":"M","ᛖ":"M","ꓟ":"M","𐊰":"M","𐌑":"M","Ӎ":"M̦","🝫":"MB","ⷨ":"ᷟ","𝐧":"n","𝑛":"n","𝒏":"n","𝓃":"n","𝓷":"n","𝔫":"n","𝕟":"n","𝖓":"n","𝗇":"n","𝗻":"n","𝘯":"n","𝙣":"n","𝚗":"n","ո":"n","ռ":"n","Ｎ":"N","ℕ":"N","𝐍":"N","𝑁":"N","𝑵":"N","𝒩":"N","𝓝":"N","𝔑":"N","𝕹":"N","𝖭":"N","𝗡":"N","𝘕":"N","𝙉":"N","𝙽":"N","Ν":"N","𝚴":"N","𝛮":"N","𝜨":"N","𝝢":"N","𝞜":"N","Ⲛ":"N","ꓠ":"N","𐔓":"N","𐆎":"N̊","ɳ":"n̨","ƞ":"n̩","η":"n̩","𝛈":"n̩","𝜂":"n̩","𝜼":"n̩","𝝶":"n̩","𝞰":"n̩","Ɲ":"N̦","ᵰ":"n̴","ǌ":"nj","ǋ":"Nj","Ǌ":"NJ","№":"No","ͷ":"ᴎ","и":"ᴎ","𐑍":"ᴎ","ņ":"ɲ","ం":"o","ಂ":"o","ം":"o","ං":"o","०":"o","੦":"o","૦":"o","௦":"o","౦":"o","೦":"o","൦":"o","๐":"o","໐":"o","၀":"o","٥":"o","۵":"o","ｏ":"o","ℴ":"o","𝐨":"o","𝑜":"o","𝒐":"o","𝓸":"o","𝔬":"o","𝕠":"o","𝖔":"o","𝗈":"o","𝗼":"o","𝘰":"o","𝙤":"o","𝚘":"o","ᴏ":"o","ᴑ":"o","ꬽ":"o","ο":"o","𝛐":"o","𝜊":"o","𝝄":"o","𝝾":"o","𝞸":"o","σ":"o","𝛔":"o","𝜎":"o","𝝈":"o","𝞂":"o","𝞼":"o","ⲟ":"o","о":"o","ჿ":"o","օ":"o","ס":"o","ه":"o","𞸤":"o","𞹤":"o","𞺄":"o","ﻫ":"o","ﻬ":"o","ﻪ":"o","ﻩ":"o","ھ":"o","ﮬ":"o","ﮭ":"o","ﮫ":"o","ﮪ":"o","ہ":"o","ﮨ":"o","ﮩ":"o","ﮧ":"o","ﮦ":"o","ە":"o","ഠ":"o","ဝ":"o","𐓪":"o","𑣈":"o","𑣗":"o","𐐬":"o","߀":"O","০":"O","୦":"O","〇":"O","𑓐":"O","𑣠":"O","𝟎":"O","𝟘":"O","𝟢":"O","𝟬":"O","𝟶":"O","🯰":"O","Ｏ":"O","𝐎":"O","𝑂":"O","𝑶":"O","𝒪":"O","𝓞":"O","𝔒":"O","𝕆":"O","𝕺":"O","𝖮":"O","𝗢":"O","𝘖":"O","𝙊":"O","𝙾":"O","Ο":"O","𝚶":"O","𝛰":"O","𝜪":"O","𝝤":"O","𝞞":"O","Ⲟ":"O","О":"O","Օ":"O","ⵔ":"O","ዐ":"O","ଠ":"O","𐓂":"O","ꓳ":"O","𑢵":"O","𐊒":"O","𐊫":"O","𐐄":"O","𐔖":"O","⁰":"º","ᵒ":"º","ǒ":"ŏ","Ǒ":"Ŏ","ۿ":"ô","Ő":"Ö","ø":"o̸","ꬾ":"o̸","Ø":"O̸","ⵁ":"O̸","Ǿ":"Ó̸","ɵ":"o̵","ꝋ":"o̵","ө":"o̵","ѳ":"o̵","ꮎ":"o̵","ꮻ":"o̵","⊖":"O̵","⊝":"O̵","⍬":"O̵","𝈚":"O̵","🜔":"O̵","Ɵ":"O̵","Ꝋ":"O̵","θ":"O̵","ϑ":"O̵","𝛉":"O̵","𝛝":"O̵","𝜃":"O̵","𝜗":"O̵","𝜽":"O̵","𝝑":"O̵","𝝷":"O̵","𝞋":"O̵","𝞱":"O̵","𝟅":"O̵","Θ":"O̵","ϴ":"O̵","𝚯":"O̵","𝚹":"O̵","𝛩":"O̵","𝛳":"O̵","𝜣":"O̵","𝜭":"O̵","𝝝":"O̵","𝝧":"O̵","𝞗":"O̵","𝞡":"O̵","Ө":"O̵","Ѳ":"O̵","ⴱ":"O̵","Ꮎ":"O̵","Ꮻ":"O̵","ꭴ":"ơ","ﳙ":"oٰ","🄁":"O,","🄀":"O.","ơ":"o\'","Ơ":"O\'","Ꭴ":"O\'","%":"º/₀","٪":"º/₀","⁒":"º/₀","‰":"º/₀₀","؉":"º/₀₀","‱":"º/₀₀₀","؊":"º/₀₀₀","œ":"oe","Œ":"OE","ɶ":"oᴇ","∞":"oo","ꝏ":"oo","ꚙ":"oo","Ꝏ":"OO","Ꚙ":"OO","ﳗ":"oج","ﱑ":"oج","ﳘ":"oم","ﱒ":"oم","ﶓ":"oمج","ﶔ":"oمم","ﱓ":"oى","ﱔ":"oى","ൟ":"oരo","တ":"oာ","㍘":"O点","ↄ":"ɔ","ᴐ":"ɔ","ͻ":"ɔ","𐑋":"ɔ","Ↄ":"Ɔ","Ͻ":"Ɔ","ꓛ":"Ɔ","𐐣":"Ɔ","ꬿ":"ɔ̸","ꭢ":"ɔe","𐐿":"ɷ","⍴":"p","ｐ":"p","𝐩":"p","𝑝":"p","𝒑":"p","𝓅":"p","𝓹":"p","𝔭":"p","𝕡":"p","𝖕":"p","𝗉":"p","𝗽":"p","𝘱":"p","𝙥":"p","𝚙":"p","ρ":"p","ϱ":"p","𝛒":"p","𝛠":"p","𝜌":"p","𝜚":"p","𝝆":"p","𝝔":"p","𝞀":"p","𝞎":"p","𝞺":"p","𝟈":"p","ⲣ":"p","р":"p","Ｐ":"P","ℙ":"P","𝐏":"P","𝑃":"P","𝑷":"P","𝒫":"P","𝓟":"P","𝔓":"P","𝕻":"P","𝖯":"P","𝗣":"P","𝘗":"P","𝙋":"P","𝙿":"P","Ρ":"P","𝚸":"P","𝛲":"P","𝜬":"P","𝝦":"P","𝞠":"P","Ⲣ":"P","Р":"P","Ꮲ":"P","ᑭ":"P","ꓑ":"P","𐊕":"P","ƥ":"p̔","ᵽ":"p̵","ᑷ":"p·","ᒆ":"P\'","ᴩ":"ᴘ","ꮲ":"ᴘ","φ":"ɸ","ϕ":"ɸ","𝛗":"ɸ","𝛟":"ɸ","𝜑":"ɸ","𝜙":"ɸ","𝝋":"ɸ","𝝓":"ɸ","𝞅":"ɸ","𝞍":"ɸ","𝞿":"ɸ","𝟇":"ɸ","ⲫ":"ɸ","ф":"ɸ","𝐪":"q","𝑞":"q","𝒒":"q","𝓆":"q","𝓺":"q","𝔮":"q","𝕢":"q","𝖖":"q","𝗊":"q","𝗾":"q","𝘲":"q","𝙦":"q","𝚚":"q","ԛ":"q","գ":"q","զ":"q","ℚ":"Q","𝐐":"Q","𝑄":"Q","𝑸":"Q","𝒬":"Q","𝓠":"Q","𝔔":"Q","𝕼":"Q","𝖰":"Q","𝗤":"Q","𝘘":"Q","𝙌":"Q","𝚀":"Q","ⵕ":"Q","ʠ":"q̔","🜀":"QE","ᶐ":"ɋ","ᴋ":"ĸ","κ":"ĸ","ϰ":"ĸ","𝛋":"ĸ","𝛞":"ĸ","𝜅":"ĸ","𝜘":"ĸ","𝜿":"ĸ","𝝒":"ĸ","𝝹":"ĸ","𝞌":"ĸ","𝞳":"ĸ","𝟆":"ĸ","ⲕ":"ĸ","к":"ĸ","ꮶ":"ĸ","қ":"ĸ̩","ҟ":"ĸ̵","𝐫":"r","𝑟":"r","𝒓":"r","𝓇":"r","𝓻":"r","𝔯":"r","𝕣":"r","𝖗":"r","𝗋":"r","𝗿":"r","𝘳":"r","𝙧":"r","𝚛":"r","ꭇ":"r","ꭈ":"r","ᴦ":"r","ⲅ":"r","г":"r","ꮁ":"r","𝈖":"R","ℛ":"R","ℜ":"R","ℝ":"R","𝐑":"R","𝑅":"R","𝑹":"R","𝓡":"R","𝕽":"R","𝖱":"R","𝗥":"R","𝘙":"R","𝙍":"R","𝚁":"R","Ʀ":"R","Ꭱ":"R","Ꮢ":"R","𐒴":"R","ᖇ":"R","ꓣ":"R","𖼵":"R","ɽ":"r̨","ɼ":"r̩","ɍ":"r̵","ғ":"r̵","ᵲ":"r̴","ґ":"r\'","𑣣":"rn","m":"rn","ⅿ":"rn","𝐦":"rn","𝑚":"rn","𝒎":"rn","𝓂":"rn","𝓶":"rn","𝔪":"rn","𝕞":"rn","𝖒":"rn","𝗆":"rn","𝗺":"rn","𝘮":"rn","𝙢":"rn","𝚖":"rn","𑜀":"rn","₥":"rn̸","ɱ":"rn̦","ᵯ":"rn̴","₨":"Rs","ꭱ":"ʀ","ꮢ":"ʀ","я":"ᴙ","ᵳ":"ɾ̴","℩":"ɿ","ｓ":"s","𝐬":"s","𝑠":"s","𝒔":"s","𝓈":"s","𝓼":"s","𝔰":"s","𝕤":"s","𝖘":"s","𝗌":"s","𝘀":"s","𝘴":"s","𝙨":"s","𝚜":"s","ꜱ":"s","ƽ":"s","ѕ":"s","ꮪ":"s","𑣁":"s","𐑈":"s","Ｓ":"S","𝐒":"S","𝑆":"S","𝑺":"S","𝒮":"S","𝓢":"S","𝔖":"S","𝕊":"S","𝕾":"S","𝖲":"S","𝗦":"S","𝘚":"S","𝙎":"S","𝚂":"S","Ѕ":"S","Տ":"S","Ꮥ":"S","Ꮪ":"S","ꓢ":"S","𖼺":"S","𐊖":"S","𐐠":"S","ʂ":"s̨","ᵴ":"s̴","ꞵ":"ß","β":"ß","ϐ":"ß","𝛃":"ß","𝛽":"ß","𝜷":"ß","𝝱":"ß","𝞫":"ß","Ᏸ":"ß","🝜":"sss","ﬆ":"st","∫":"ʃ","ꭍ":"ʃ","∑":"Ʃ","⅀":"Ʃ","Σ":"Ʃ","𝚺":"Ʃ","𝛴":"Ʃ","𝜮":"Ʃ","𝝨":"Ʃ","𝞢":"Ʃ","ⵉ":"Ʃ","∬":"ʃʃ","∭":"ʃʃʃ","⨌":"ʃʃʃʃ","𝐭":"t","𝑡":"t","𝒕":"t","𝓉":"t","𝓽":"t","𝔱":"t","𝕥":"t","𝖙":"t","𝗍":"t","𝘁":"t","𝘵":"t","𝙩":"t","𝚝":"t","⊤":"T","⟙":"T","🝨":"T","Ｔ":"T","𝐓":"T","𝑇":"T","𝑻":"T","𝒯":"T","𝓣":"T","𝔗":"T","𝕋":"T","𝕿":"T","𝖳":"T","𝗧":"T","𝘛":"T","𝙏":"T","𝚃":"T","Τ":"T","𝚻":"T","𝛵":"T","𝜯":"T","𝝩":"T","𝞣":"T","Ⲧ":"T","Т":"T","Ꭲ":"T","ꓔ":"T","𖼊":"T","𑢼":"T","𐊗":"T","𐊱":"T","𐌕":"T","ƭ":"t̔","⍡":"T̈","Ⱦ":"T̸","Ț":"Ţ","Ʈ":"T̨","Ҭ":"T̩","₮":"T⃫","ŧ":"t̵","Ŧ":"T̵","ᵵ":"t̴","Ⴀ":"Ꞇ","Ꜩ":"T3","ʨ":"tɕ","℡":"TEL","ꝷ":"tf","ʦ":"ts","ʧ":"tʃ","ꜩ":"tȝ","τ":"ᴛ","𝛕":"ᴛ","𝜏":"ᴛ","𝝉":"ᴛ","𝞃":"ᴛ","𝞽":"ᴛ","т":"ᴛ","ꭲ":"ᴛ","ҭ":"ᴛ̩","ţ":"ƫ","ț":"ƫ","Ꮏ":"ƫ","𝐮":"u","𝑢":"u","𝒖":"u","𝓊":"u","𝓾":"u","𝔲":"u","𝕦":"u","𝖚":"u","𝗎":"u","𝘂":"u","𝘶":"u","𝙪":"u","𝚞":"u","ꞟ":"u","ᴜ":"u","ꭎ":"u","ꭒ":"u","ʋ":"u","υ":"u","𝛖":"u","𝜐":"u","𝝊":"u","𝞄":"u","𝞾":"u","ս":"u","𐓶":"u","𑣘":"u","∪":"U","⋃":"U","𝐔":"U","𝑈":"U","𝑼":"U","𝒰":"U","𝓤":"U","𝔘":"U","𝕌":"U","𝖀":"U","𝖴":"U","𝗨":"U","𝘜":"U","𝙐":"U","𝚄":"U","Ս":"U","ሀ":"U","𐓎":"U","ᑌ":"U","ꓴ":"U","𖽂":"U","𑢸":"U","ǔ":"ŭ","Ǔ":"Ŭ","ᵾ":"u̵","ꮜ":"u̵","Ʉ":"U̵","Ꮜ":"U̵","ᑘ":"U·","ᑧ":"U\'","ᵫ":"ue","ꭣ":"uo","ṃ":"ꭑ","պ":"ɰ","ሣ":"ɰ","℧":"Ʊ","ᘮ":"Ʊ","ᘴ":"Ʊ","ᵿ":"ʊ̵","∨":"v","⋁":"v","ｖ":"v","ⅴ":"v","𝐯":"v","𝑣":"v","𝒗":"v","𝓋":"v","𝓿":"v","𝔳":"v","𝕧":"v","𝖛":"v","𝗏":"v","𝘃":"v","𝘷":"v","𝙫":"v","𝚟":"v","ᴠ":"v","ν":"v","𝛎":"v","𝜈":"v","𝝂":"v","𝝼":"v","𝞶":"v","ѵ":"v","ט":"v","𑜆":"v","ꮩ":"v","𑣀":"v","𝈍":"V","٧":"V","۷":"V","Ⅴ":"V","𝐕":"V","𝑉":"V","𝑽":"V","𝒱":"V","𝓥":"V","𝔙":"V","𝕍":"V","𝖁":"V","𝖵":"V","𝗩":"V","𝘝":"V","𝙑":"V","𝚅":"V","Ѵ":"V","ⴸ":"V","Ꮩ":"V","ᐯ":"V","ꛟ":"V","ꓦ":"V","𖼈":"V","𑢠":"V","𐔝":"V","𐆗":"V̵","ᐻ":"V·","🝬":"VB","ⅵ":"vi","ⅶ":"vii","ⅷ":"viii","Ⅵ":"Vl","Ⅶ":"Vll","Ⅷ":"Vlll","🜈":"Vᷤ","ᴧ":"ʌ","𐓘":"ʌ","٨":"Ʌ","۸":"Ʌ","Λ":"Ʌ","𝚲":"Ʌ","𝛬":"Ʌ","𝜦":"Ʌ","𝝠":"Ʌ","𝞚":"Ʌ","Л":"Ʌ","ⴷ":"Ʌ","𐒰":"Ʌ","ᐱ":"Ʌ","ꛎ":"Ʌ","ꓥ":"Ʌ","𖼽":"Ʌ","𐊍":"Ʌ","Ӆ":"Ʌ̦","ᐽ":"Ʌ·","ɯ":"w","𝐰":"w","𝑤":"w","𝒘":"w","𝓌":"w","𝔀":"w","𝔴":"w","𝕨":"w","𝖜":"w","𝗐":"w","𝘄":"w","𝘸":"w","𝙬":"w","𝚠":"w","ᴡ":"w","ѡ":"w","ԝ":"w","ա":"w","𑜊":"w","𑜎":"w","𑜏":"w","ꮃ":"w","𑣯":"W","𑣦":"W","𝐖":"W","𝑊":"W","𝑾":"W","𝒲":"W","𝓦":"W","𝔚":"W","𝕎":"W","𝖂":"W","𝖶":"W","𝗪":"W","𝘞":"W","𝙒":"W","𝚆":"W","Ԝ":"W","Ꮃ":"W","Ꮤ":"W","ꓪ":"W","ѽ":"w҆҇","𑓅":"ẇ","₩":"W̵","ꝡ":"w̦","ᴍ":"ʍ","м":"ʍ","ꮇ":"ʍ","ӎ":"ʍ̦","᙮":"x","×":"x","⤫":"x","⤬":"x","⨯":"x","ｘ":"x","ⅹ":"x","𝐱":"x","𝑥":"x","𝒙":"x","𝓍":"x","𝔁":"x","𝔵":"x","𝕩":"x","𝖝":"x","𝗑":"x","𝘅":"x","𝘹":"x","𝙭":"x","𝚡":"x","х":"x","ᕁ":"x","ᕽ":"x","ⷯ":"ͯ","᙭":"X","╳":"X","𐌢":"X","𑣬":"X","Ｘ":"X","Ⅹ":"X","𝐗":"X","𝑋":"X","𝑿":"X","𝒳":"X","𝓧":"X","𝔛":"X","𝕏":"X","𝖃":"X","𝖷":"X","𝗫":"X","𝘟":"X","𝙓":"X","𝚇":"X","Ꭓ":"X","Χ":"X","𝚾":"X","𝛸":"X","𝜲":"X","𝝬":"X","𝞦":"X","Ⲭ":"X","Х":"X","ⵝ":"X","ᚷ":"X","ꓫ":"X","𐊐":"X","𐊴":"X","𐌗":"X","𐔧":"X","⨰":"ẋ","Ҳ":"X̩","𐆖":"X̵","ⅺ":"xi","ⅻ":"xii","Ⅺ":"Xl","Ⅻ":"Xll","ɣ":"y","ᶌ":"y","ｙ":"y","𝐲":"y","𝑦":"y","𝒚":"y","𝓎":"y","𝔂":"y","𝔶":"y","𝕪":"y","𝖞":"y","𝗒":"y","𝘆":"y","𝘺":"y","𝙮":"y","𝚢":"y","ʏ":"y","ỿ":"y","ꭚ":"y","γ":"y","ℽ":"y","𝛄":"y","𝛾":"y","𝜸":"y","𝝲":"y","𝞬":"y","у":"y","ү":"y","ყ":"y","𑣜":"y","Ｙ":"Y","𝐘":"Y","𝑌":"Y","𝒀":"Y","𝒴":"Y","𝓨":"Y","𝔜":"Y","𝕐":"Y","𝖄":"Y","𝖸":"Y","𝗬":"Y","𝘠":"Y","𝙔":"Y","𝚈":"Y","Υ":"Y","ϒ":"Y","𝚼":"Y","𝛶":"Y","𝜰":"Y","𝝪":"Y","𝞤":"Y","Ⲩ":"Y","У":"Y","Ү":"Y","Ꭹ":"Y","Ꮍ":"Y","ꓬ":"Y","𖽃":"Y","𑢤":"Y","𐊲":"Y","ƴ":"y̔","ɏ":"y̵","ұ":"y̵","¥":"Y̵","Ɏ":"Y̵","Ұ":"Y̵","ʒ":"ȝ","ꝫ":"ȝ","ⳍ":"ȝ","ӡ":"ȝ","ჳ":"ȝ","𝐳":"z","𝑧":"z","𝒛":"z","𝓏":"z","𝔃":"z","𝔷":"z","𝕫":"z","𝖟":"z","𝗓":"z","𝘇":"z","𝘻":"z","𝙯":"z","𝚣":"z","ᴢ":"z","ꮓ":"z","𑣄":"z","𐋵":"Z","𑣥":"Z","Ｚ":"Z","ℤ":"Z","ℨ":"Z","𝐙":"Z","𝑍":"Z","𝒁":"Z","𝒵":"Z","𝓩":"Z","𝖅":"Z","𝖹":"Z","𝗭":"Z","𝘡":"Z","𝙕":"Z","𝚉":"Z","Ζ":"Z","𝚭":"Z","𝛧":"Z","𝜡":"Z","𝝛":"Z","𝞕":"Z","Ꮓ":"Z","ꓜ":"Z","𑢩":"Z","ʐ":"z̨","ƶ":"z̵","Ƶ":"Z̵","ȥ":"z̦","Ȥ":"Z̦","ᵶ":"z̴","ƿ":"þ","ϸ":"þ","Ϸ":"Þ","𐓄":"Þ","⁹":"ꝰ","ᴤ":"ƨ","ϩ":"ƨ","ꙅ":"ƨ","ь":"ƅ","ꮟ":"ƅ","ы":"ƅi","ꭾ":"ɂ","ˤ":"ˁ","ꛍ":"ʡ","⊙":"ʘ","☉":"ʘ","⨀":"ʘ","Ꙩ":"ʘ","ⵙ":"ʘ","𐓃":"ʘ","ℾ":"Γ","𝚪":"Γ","𝛤":"Γ","𝜞":"Γ","𝝘":"Γ","𝞒":"Γ","Ⲅ":"Γ","Г":"Γ","Ꮁ":"Γ","ᒥ":"Γ","𖼇":"Γ","Ғ":"Γ̵","ᒯ":"Γ·","Ґ":"Γ\'","∆":"Δ","△":"Δ","🜂":"Δ","𝚫":"Δ","𝛥":"Δ","𝜟":"Δ","𝝙":"Δ","𝞓":"Δ","Ⲇ":"Δ","ⵠ":"Δ","ᐃ":"Δ","𖼚":"Δ","𐊅":"Δ","𐊣":"Δ","⍙":"Δ̲","ᐏ":"Δ·","ᐬ":"Δᐠ","𝟋":"ϝ","𝛇":"ζ","𝜁":"ζ","𝜻":"ζ","𝝵":"ζ","𝞯":"ζ","ⳤ":"ϗ","𝛌":"λ","𝜆":"λ","𝝀":"λ","𝝺":"λ","𝞴":"λ","Ⲗ":"λ","𐓛":"λ","µ":"μ","𝛍":"μ","𝜇":"μ","𝝁":"μ","𝝻":"μ","𝞵":"μ","𝛏":"ξ","𝜉":"ξ","𝝃":"ξ","𝝽":"ξ","𝞷":"ξ","𝚵":"Ξ","𝛯":"Ξ","𝜩":"Ξ","𝝣":"Ξ","𝞝":"Ξ","ϖ":"π","ℼ":"π","𝛑":"π","𝛡":"π","𝜋":"π","𝜛":"π","𝝅":"π","𝝕":"π","𝝿":"π","𝞏":"π","𝞹":"π","𝟉":"π","ᴨ":"π","п":"π","∏":"Π","ℿ":"Π","𝚷":"Π","𝛱":"Π","𝜫":"Π","𝝥":"Π","𝞟":"Π","Ⲡ":"Π","П":"Π","ꛛ":"Π","𐊭":"Ϙ","𐌒":"Ϙ","ϛ":"ς","𝛓":"ς","𝜍":"ς","𝝇":"ς","𝞁":"ς","𝞻":"ς","𝚽":"Φ","𝛷":"Φ","𝜱":"Φ","𝝫":"Φ","𝞥":"Φ","Ⲫ":"Φ","Ф":"Φ","Փ":"Φ","ቀ":"Φ","ᛰ":"Φ","𐊳":"Φ","ꭓ":"χ","ꭕ":"χ","𝛘":"χ","𝜒":"χ","𝝌":"χ","𝞆":"χ","𝟀":"χ","ⲭ":"χ","𝛙":"ψ","𝜓":"ψ","𝝍":"ψ","𝞇":"ψ","𝟁":"ψ","ѱ":"ψ","𐓹":"ψ","𝚿":"Ψ","𝛹":"Ψ","𝜳":"Ψ","𝝭":"Ψ","𝞧":"Ψ","Ⲯ":"Ψ","Ѱ":"Ψ","𐓑":"Ψ","ᛘ":"Ψ","𐊵":"Ψ","⍵":"ω","ꞷ":"ω","𝛚":"ω","𝜔":"ω","𝝎":"ω","𝞈":"ω","𝟂":"ω","ⲱ":"ω","ꙍ":"ω","Ω":"Ω","𝛀":"Ω","𝛺":"Ω","𝜴":"Ω","𝝮":"Ω","𝞨":"Ω","ᘯ":"Ω","ᘵ":"Ω","𐊶":"Ω","⍹":"ω̲","ώ":"ῴ","☰":"Ⲷ","Ⳝ":"Ϭ","җ":"ж̩","Җ":"Ж̩","𝈋":"И","Ͷ":"И","ꚡ":"И","𐐥":"И","Й":"Ѝ","Ҋ":"Ѝ̦","ѝ":"й","ҋ":"й̦","𐒼":"Ӄ","ᴫ":"л","ӆ":"л̦","ꭠ":"љ","𐓫":"ꙩ","ᷮ":"ⷬ","𐓍":"Ћ","𝈂":"Ӿ","𝈢":"Ѡ","Ꮗ":"Ѡ","ᗯ":"Ѡ","Ѽ":"Ѡ҆҇","ᣭ":"Ѡ·","Ꞷ":"Ꙍ","ӌ":"ҷ","Ӌ":"Ҷ","Ҿ":"Ҽ̨","ⲽ":"ш","Ⲽ":"Ш","Ꙑ":"Ъl","℈":"Э","🜁":"Ꙙ","𖼜":"Ꙙ","ꦒ":"ⰿ","և":"եւ","ኔ":"ձ","ﬔ":"մե","ﬕ":"մի","ﬗ":"մխ","ﬓ":"մն","∩":"Ո","⋂":"Ո","𝉅":"Ո","በ":"Ո","ᑎ":"Ո","ꓵ":"Ո","ᑚ":"Ո·","ᑨ":"Ո\'","ﬖ":"վն","₽":"Ք","˓":"ՙ","ʿ":"ՙ","ℵ":"א","ﬡ":"א","אָ":"אַ","אּ":"אַ","ﭏ":"אל","ℶ":"ב","ℷ":"ג","ℸ":"ד","ﬢ":"ד","ﬣ":"ה","יּ":"יִ","ﬤ":"כ","ﬥ":"ל","ﬦ":"ם","ﬠ":"ע","ﬧ":"ר","שׂ":"שׁ","שּ":"שׁ","שּׂ":"שּׁ","ﬨ":"ת","ﺀ":"ء","۽":"ء͈","ﺂ":"آ","ﺁ":"آ","ﭑ":"ٱ","ﭐ":"ٱ","𞸁":"ب","𞸡":"ب","𞹡":"ب","𞺁":"ب","𞺡":"ب","ﺑ":"ب","ﺒ":"ب","ﺐ":"ب","ﺏ":"ب","ݑ":"بۛ","ࢶ":"بۢ","ࢡ":"بٔ","ﲠ":"بo","ﳢ":"بo","ﲜ":"بج","ﰅ":"بج","ﲝ":"بح","ﰆ":"بح","ﷂ":"بحى","ﲞ":"بخ","ﰇ":"بخ","ﳒ":"بخ","ﱋ":"بخ","ﶞ":"بخى","ﱪ":"بر","ﱫ":"بز","ﲟ":"بم","ﳡ":"بم","ﱬ":"بم","ﰈ":"بم","ﱭ":"بن","ﱮ":"بى","ﰉ":"بى","ﱯ":"بى","ﰊ":"بى","ﭔ":"ٻ","ﭕ":"ٻ","ﭓ":"ٻ","ﭒ":"ٻ","ې":"ٻ","ﯦ":"ٻ","ﯧ":"ٻ","ﯥ":"ٻ","ﯤ":"ٻ","ﭜ":"ڀ","ﭝ":"ڀ","ﭛ":"ڀ","ﭚ":"ڀ","ࢩ":"ݔ","ݧ":"ݔ","⍥":"ة","ö":"ة","ﺔ":"ة","ﺓ":"ة","ۃ":"ة","𞸕":"ت","𞸵":"ت","𞹵":"ت","𞺕":"ت","𞺵":"ت","ﺗ":"ت","ﺘ":"ت","ﺖ":"ت","ﺕ":"ت","ﲥ":"تo","ﳤ":"تo","ﲡ":"تج","ﰋ":"تج","ﵐ":"تجم","ﶠ":"تجى","ﶟ":"تجى","ﲢ":"تح","ﰌ":"تح","ﵒ":"تحج","ﵑ":"تحج","ﵓ":"تحم","ﲣ":"تخ","ﰍ":"تخ","ﵔ":"تخم","ﶢ":"تخى","ﶡ":"تخى","ﱰ":"تر","ﱱ":"تز","ﲤ":"تم","ﳣ":"تم","ﱲ":"تم","ﰎ":"تم","ﵕ":"تمج","ﵖ":"تمح","ﵗ":"تمخ","ﶤ":"تمى","ﶣ":"تمى","ﱳ":"تن","ﱴ":"تى","ﰏ":"تى","ﱵ":"تى","ﰐ":"تى","ﭠ":"ٺ","ﭡ":"ٺ","ﭟ":"ٺ","ﭞ":"ٺ","ﭤ":"ٿ","ﭥ":"ٿ","ﭣ":"ٿ","ﭢ":"ٿ","𞸂":"ج","𞸢":"ج","𞹂":"ج","𞹢":"ج","𞺂":"ج","𞺢":"ج","ﺟ":"ج","ﺠ":"ج","ﺞ":"ج","ﺝ":"ج","ﲧ":"جح","ﰕ":"جح","ﶦ":"جحى","ﶾ":"جحى","ﷻ":"جل جلlلo","ﲨ":"جم","ﰖ":"جم","ﵙ":"جمح","ﵘ":"جمح","ﶧ":"جمى","ﶥ":"جمى","ﴝ":"جى","ﴁ":"جى","ﴞ":"جى","ﴂ":"جى","ﭸ":"ڃ","ﭹ":"ڃ","ﭷ":"ڃ","ﭶ":"ڃ","ﭴ":"ڄ","ﭵ":"ڄ","ﭳ":"ڄ","ﭲ":"ڄ","ﭼ":"چ","ﭽ":"چ","ﭻ":"چ","ﭺ":"چ","ﮀ":"ڇ","ﮁ":"ڇ","ﭿ":"ڇ","ﭾ":"ڇ","𞸇":"ح","𞸧":"ح","𞹇":"ح","𞹧":"ح","𞺇":"ح","𞺧":"ح","ﺣ":"ح","ﺤ":"ح","ﺢ":"ح","ﺡ":"ح","څ":"حۛ","ځ":"حٔ","ݲ":"حٔ","ﲩ":"حج","ﰗ":"حج","ﶿ":"حجى","ﲪ":"حم","ﰘ":"حم","ﵛ":"حمى","ﵚ":"حمى","ﴛ":"حى","ﳿ":"حى","ﴜ":"حى","ﴀ":"حى","𞸗":"خ","𞸷":"خ","𞹗":"خ","𞹷":"خ","𞺗":"خ","𞺷":"خ","ﺧ":"خ","ﺨ":"خ","ﺦ":"خ","ﺥ":"خ","ﲫ":"خج","ﰙ":"خج","ﰚ":"خح","ﲬ":"خم","ﰛ":"خم","ﴟ":"خى","ﴃ":"خى","ﴠ":"خى","ﴄ":"خى","𐋡":"د","𞸃":"د","𞺃":"د","𞺣":"د","ﺪ":"د","ﺩ":"د","ڈ":"دؕ","ﮉ":"دؕ","ﮈ":"دؕ","ڎ":"دۛ","ﮇ":"دۛ","ﮆ":"دۛ","ۮ":"د̂","ࢮ":"د̤̣","𞸘":"ذ","𞺘":"ذ","𞺸":"ذ","ﺬ":"ذ","ﺫ":"ذ","ﱛ":"ذٰ","ڋ":"ڊؕ","ﮅ":"ڌ","ﮄ":"ڌ","ﮃ":"ڍ","ﮂ":"ڍ","𞸓":"ر","𞺓":"ر","𞺳":"ر","ﺮ":"ر","ﺭ":"ر","ڑ":"رؕ","ﮍ":"رؕ","ﮌ":"رؕ","ژ":"رۛ","ﮋ":"رۛ","ﮊ":"رۛ","ڒ":"ر̆","ࢹ":"ر̆̇","ۯ":"ر̂","ݬ":"رٔ","ﱜ":"رٰ","ﷶ":"رسول","﷼":"رىlل","𞸆":"ز","𞺆":"ز","𞺦":"ز","ﺰ":"ز","ﺯ":"ز","ࢲ":"ز̂","ݱ":"ڗؕ","𞸎":"س","𞸮":"س","𞹎":"س","𞹮":"س","𞺎":"س","𞺮":"س","ﺳ":"س","ﺴ":"س","ﺲ":"س","ﺱ":"س","ش":"سۛ","𞸔":"سۛ","𞸴":"سۛ","𞹔":"سۛ","𞹴":"سۛ","𞺔":"سۛ","𞺴":"سۛ","ﺷ":"سۛ","ﺸ":"سۛ","ﺶ":"سۛ","ﺵ":"سۛ","ݾ":"س̂","ﴱ":"سo","ﳨ":"سo","ﴲ":"سۛo","ﳪ":"سۛo","ﲭ":"سج","ﴴ":"سج","ﰜ":"سج","ﴭ":"سۛج","ﴷ":"سۛج","ﴥ":"سۛج","ﴉ":"سۛج","ﵝ":"سجح","ﵞ":"سجى","ﵩ":"سۛجى","ﲮ":"سح","ﴵ":"سح","ﰝ":"سح","ﴮ":"سۛح","ﴸ":"سۛح","ﴦ":"سۛح","ﴊ":"سۛح","ﵜ":"سحج","ﵨ":"سۛحم","ﵧ":"سۛحم","ﶪ":"سۛحى","ﲯ":"سخ","ﴶ":"سخ","ﰞ":"سخ","ﴯ":"سۛخ","ﴹ":"سۛخ","ﴧ":"سۛخ","ﴋ":"سۛخ","ﶨ":"سخى","ﷆ":"سخى","ﴪ":"سر","ﴎ":"سر","ﴩ":"سۛر","ﴍ":"سۛر","ﲰ":"سم","ﳧ":"سم","ﰟ":"سم","ﴰ":"سۛم","ﳩ":"سۛم","ﴨ":"سۛم","ﴌ":"سۛم","ﵡ":"سمج","ﵠ":"سمح","ﵟ":"سمح","ﵫ":"سۛمخ","ﵪ":"سۛمخ","ﵣ":"سمم","ﵢ":"سمم","ﵭ":"سۛمم","ﵬ":"سۛمم","ﴗ":"سى","ﳻ":"سى","ﴘ":"سى","ﳼ":"سى","ﴙ":"سۛى","ﳽ":"سۛى","ﴚ":"سۛى","ﳾ":"سۛى","𐋲":"ص","𞸑":"ص","𞸱":"ص","𞹑":"ص","𞹱":"ص","𞺑":"ص","𞺱":"ص","ﺻ":"ص","ﺼ":"ص","ﺺ":"ص","ﺹ":"ص","ڞ":"صۛ","ࢯ":"ص̤̣","ﲱ":"صح","ﰠ":"صح","ﵥ":"صحح","ﵤ":"صحح","ﶩ":"صحى","ﲲ":"صخ","ﴫ":"صر","ﴏ":"صر","ﷵ":"صلعم","ﷹ":"صلى","ﷰ":"صلى","ﷺ":"صلى lللo علىo وسلم","ﲳ":"صم","ﰡ":"صم","ﷅ":"صمم","ﵦ":"صمم","ﴡ":"صى","ﴅ":"صى","ﴢ":"صى","ﴆ":"صى","𞸙":"ض","𞸹":"ض","𞹙":"ض","𞹹":"ض","𞺙":"ض","𞺹":"ض","ﺿ":"ض","ﻀ":"ض","ﺾ":"ض","ﺽ":"ض","ﲴ":"ضج","ﰢ":"ضج","ﲵ":"ضح","ﰣ":"ضح","ﵮ":"ضحى","ﶫ":"ضحى","ﲶ":"ضخ","ﰤ":"ضخ","ﵰ":"ضخم","ﵯ":"ضخم","ﴬ":"ضر","ﴐ":"ضر","ﲷ":"ضم","ﰥ":"ضم","ﴣ":"ضى","ﴇ":"ضى","ﴤ":"ضى","ﴈ":"ضى","𐋨":"ط","𞸈":"ط","𞹨":"ط","𞺈":"ط","𞺨":"ط","ﻃ":"ط","ﻄ":"ط","ﻂ":"ط","ﻁ":"ط","ڟ":"طۛ","ﲸ":"طح","ﰦ":"طح","ﴳ":"طم","ﴺ":"طم","ﰧ":"طم","ﵲ":"طمح","ﵱ":"طمح","ﵳ":"طمم","ﵴ":"طمى","ﴑ":"طى","ﳵ":"طى","ﴒ":"طى","ﳶ":"طى","𞸚":"ظ","𞹺":"ظ","𞺚":"ظ","𞺺":"ظ","ﻇ":"ظ","ﻈ":"ظ","ﻆ":"ظ","ﻅ":"ظ","ﲹ":"ظم","ﴻ":"ظم","ﰨ":"ظم","؏":"ع","𞸏":"ع","𞸯":"ع","𞹏":"ع","𞹯":"ع","𞺏":"ع","𞺯":"ع","ﻋ":"ع","ﻌ":"ع","ﻊ":"ع","ﻉ":"ع","ﲺ":"عج","ﰩ":"عج","ﷄ":"عجم","ﵵ":"عجم","ﷷ":"علىo","ﲻ":"عم","ﰪ":"عم","ﵷ":"عمم","ﵶ":"عمم","ﵸ":"عمى","ﶶ":"عمى","ﴓ":"عى","ﳷ":"عى","ﴔ":"عى","ﳸ":"عى","𞸛":"غ","𞸻":"غ","𞹛":"غ","𞹻":"غ","𞺛":"غ","𞺻":"غ","ﻏ":"غ","ﻐ":"غ","ﻎ":"غ","ﻍ":"غ","ﲼ":"غج","ﰫ":"غج","ﲽ":"غم","ﰬ":"غم","ﵹ":"غمم","ﵻ":"غمى","ﵺ":"غمى","ﴕ":"غى","ﳹ":"غى","ﴖ":"غى","ﳺ":"غى","𞸐":"ف","𞸰":"ف","𞹰":"ف","𞺐":"ف","𞺰":"ف","ﻓ":"ف","ﻔ":"ف","ﻒ":"ف","ﻑ":"ف","ڧ":"ف","ﲾ":"فج","ﰭ":"فج","ﲿ":"فح","ﰮ":"فح","ﳀ":"فخ","ﰯ":"فخ","ﵽ":"فخم","ﵼ":"فخم","ﳁ":"فم","ﰰ":"فم","ﷁ":"فمى","ﱼ":"فى","ﰱ":"فى","ﱽ":"فى","ﰲ":"فى","𞸞":"ڡ","𞹾":"ڡ","ࢻ":"ڡ","ٯ":"ڡ","𞸟":"ڡ","𞹟":"ڡ","ࢼ":"ڡ","ڤ":"ڡۛ","ﭬ":"ڡۛ","ﭭ":"ڡۛ","ﭫ":"ڡۛ","ﭪ":"ڡۛ","ڨ":"ڡۛ","ࢤ":"ڢۛ","ﭰ":"ڦ","ﭱ":"ڦ","ﭯ":"ڦ","ﭮ":"ڦ","𞸒":"ق","𞸲":"ق","𞹒":"ق","𞹲":"ق","𞺒":"ق","𞺲":"ق","ﻗ":"ق","ﻘ":"ق","ﻖ":"ق","ﻕ":"ق","ﳂ":"قح","ﰳ":"قح","ﷱ":"قلى","ﳃ":"قم","ﰴ":"قم","ﶴ":"قمح","ﵾ":"قمح","ﵿ":"قمم","ﶲ":"قمى","ﱾ":"قى","ﰵ":"قى","ﱿ":"قى","ﰶ":"قى","𞸊":"ك","𞸪":"ك","𞹪":"ك","ﻛ":"ك","ﻜ":"ك","ﻚ":"ك","ﻙ":"ك","ک":"ك","ﮐ":"ك","ﮑ":"ك","ﮏ":"ك","ﮎ":"ك","ڪ":"ك","ڭ":"كۛ","ﯕ":"كۛ","ﯖ":"كۛ","ﯔ":"كۛ","ﯓ":"كۛ","ݣ":"كۛ","ﲀ":"كl","ﰷ":"كl","ﳄ":"كج","ﰸ":"كج","ﳅ":"كح","ﰹ":"كح","ﳆ":"كخ","ﰺ":"كخ","ﳇ":"كل","ﳫ":"كل","ﲁ":"كل","ﰻ":"كل","ﳈ":"كم","ﳬ":"كم","ﲂ":"كم","ﰼ":"كم","ﷃ":"كمم","ﶻ":"كمم","ﶷ":"كمى","ﲃ":"كى","ﰽ":"كى","ﲄ":"كى","ﰾ":"كى","ݢ":"ڬ","ﮔ":"گ","ﮕ":"گ","ﮓ":"گ","ﮒ":"گ","ࢰ":"گ","ڴ":"گۛ","ﮜ":"ڱ","ﮝ":"ڱ","ﮛ":"ڱ","ﮚ":"ڱ","ﮘ":"ڳ","ﮙ":"ڳ","ﮗ":"ڳ","ﮖ":"ڳ","𞸋":"ل","𞸫":"ل","𞹋":"ل","𞺋":"ل","𞺫":"ل","ﻟ":"ل","ﻠ":"ل","ﻞ":"ل","ﻝ":"ل","ڷ":"لۛ","ڵ":"ل̆","ﻼ":"لl","ﻻ":"لl","ﻺ":"لlٕ","ﻹ":"لlٕ","ﻸ":"لlٴ","ﻷ":"لlٴ","ﳍ":"لo","ﻶ":"لآ","ﻵ":"لآ","ﳉ":"لج","ﰿ":"لج","ﶃ":"لجج","ﶄ":"لجج","ﶺ":"لجم","ﶼ":"لجم","ﶬ":"لجى","ﳊ":"لح","ﱀ":"لح","ﶵ":"لحم","ﶀ":"لحم","ﶂ":"لحى","ﶁ":"لحى","ﳋ":"لخ","ﱁ":"لخ","ﶆ":"لخم","ﶅ":"لخم","ﳌ":"لم","ﳭ":"لم","ﲅ":"لم","ﱂ":"لم","ﶈ":"لمح","ﶇ":"لمح","ﶭ":"لمى","ﲆ":"لى","ﱃ":"لى","ﲇ":"لى","ﱄ":"لى","𞸌":"م","𞸬":"م","𞹬":"م","𞺌":"م","𞺬":"م","ﻣ":"م","ﻤ":"م","ﻢ":"م","ﻡ":"م","ࢧ":"مۛ","۾":"م͈","ﲈ":"مl","ﳎ":"مج","ﱅ":"مج","ﶌ":"مجح","ﶒ":"مجخ","ﶍ":"مجم","ﷀ":"مجى","ﳏ":"مح","ﱆ":"مح","ﶉ":"محج","ﶊ":"محم","ﷴ":"محمد","ﶋ":"محى","ﳐ":"مخ","ﱇ":"مخ","ﶎ":"مخج","ﶏ":"مخم","ﶹ":"مخى","ﳑ":"مم","ﲉ":"مم","ﱈ":"مم","ﶱ":"ممى","ﱉ":"مى","ﱊ":"مى","𞸍":"ن","𞸭":"ن","𞹍":"ن","𞹭":"ن","𞺍":"ن","𞺭":"ن","ﻧ":"ن","ﻨ":"ن","ﻦ":"ن","ﻥ":"ن","ݨ":"نؕ","ݩ":"ن̆","ﳖ":"نo","ﳯ":"نo","ﶸ":"نجح","ﶽ":"نجح","ﶘ":"نجم","ﶗ":"نجم","ﶙ":"نجى","ﷇ":"نجى","ﳓ":"نح","ﱌ":"نح","ﶕ":"نحم","ﶖ":"نحى","ﶳ":"نحى","ﳔ":"نخ","ﱍ":"نخ","ﲊ":"نر","ﲋ":"نز","ﳕ":"نم","ﳮ":"نم","ﲌ":"نم","ﱎ":"نم","ﶛ":"نمى","ﶚ":"نمى","ﲍ":"نن","ﲎ":"نى","ﱏ":"نى","ﲏ":"نى","ﱐ":"نى","ۂ":"ۀ","ﮥ":"ۀ","ﮤ":"ۀ","𐋤":"و","𞸅":"و","𞺅":"و","𞺥":"و","ﻮ":"و","ﻭ":"و","ࢱ":"و","ۋ":"وۛ","ﯟ":"وۛ","ﯞ":"وۛ","ۇ":"و̓","ﯘ":"و̓","ﯗ":"و̓","ۆ":"و̆","ﯚ":"و̆","ﯙ":"و̆","ۉ":"و̂","ﯣ":"و̂","ﯢ":"و̂","ۈ":"وٰ","ﯜ":"وٰ","ﯛ":"وٰ","ؤ":"وٴ","ﺆ":"وٴ","ﺅ":"وٴ","ٶ":"وٴ","ٷ":"و̓ٴ","ﯝ":"و̓ٴ","ﷸ":"وسلم","ﯡ":"ۅ","ﯠ":"ۅ","ٮ":"ى","𞸜":"ى","𞹼":"ى","ں":"ى","𞸝":"ى","𞹝":"ى","ﮟ":"ى","ﮞ":"ى","ࢽ":"ى","ﯨ":"ى","ﯩ":"ى","ﻰ":"ى","ﻯ":"ى","ي":"ى","𞸉":"ى","𞸩":"ى","𞹉":"ى","𞹩":"ى","𞺉":"ى","𞺩":"ى","ﻳ":"ى","ﻴ":"ى","ﻲ":"ى","ﻱ":"ى","ی":"ى","ﯾ":"ى","ﯿ":"ى","ﯽ":"ى","ﯼ":"ى","ے":"ى","ﮯ":"ى","ﮮ":"ى","ٹ":"ىؕ","ﭨ":"ىؕ","ﭩ":"ىؕ","ﭧ":"ىؕ","ﭦ":"ىؕ","ڻ":"ىؕ","ﮢ":"ىؕ","ﮣ":"ىؕ","ﮡ":"ىؕ","ﮠ":"ىؕ","پ":"ىۛ","ﭘ":"ىۛ","ﭙ":"ىۛ","ﭗ":"ىۛ","ﭖ":"ىۛ","ث":"ىۛ","𞸖":"ىۛ","𞸶":"ىۛ","𞹶":"ىۛ","𞺖":"ىۛ","𞺶":"ىۛ","ﺛ":"ىۛ","ﺜ":"ىۛ","ﺚ":"ىۛ","ﺙ":"ىۛ","ڽ":"ىۛ","ۑ":"ىۛ","ؿ":"ىۛ","ࢷ":"ىۛۢ","ݖ":"ى̆","ێ":"ى̆","ࢺ":"ى̆̇","ؽ":"ى̂","ࢨ":"ىٔ","ﲐ":"ىٰ","ﱝ":"ىٰ","ﳞ":"ىo","ﳱ":"ىo","ﳦ":"ىۛo","ئ":"ىٴ","ﺋ":"ىٴ","ﺌ":"ىٴ","ﺊ":"ىٴ","ﺉ":"ىٴ","ٸ":"ىٴ","ﯫ":"ىٴl","ﯪ":"ىٴl","ﲛ":"ىٴo","ﳠ":"ىٴo","ﯭ":"ىٴo","ﯬ":"ىٴo","ﯸ":"ىٴٻ","ﯷ":"ىٴٻ","ﯶ":"ىٴٻ","ﲗ":"ىٴج","ﰀ":"ىٴج","ﲘ":"ىٴح","ﰁ":"ىٴح","ﲙ":"ىٴخ","ﱤ":"ىٴر","ﱥ":"ىٴز","ﲚ":"ىٴم","ﳟ":"ىٴم","ﱦ":"ىٴم","ﰂ":"ىٴم","ﱧ":"ىٴن","ﯯ":"ىٴو","ﯮ":"ىٴو","ﯱ":"ىٴو̓","ﯰ":"ىٴو̓","ﯳ":"ىٴو̆","ﯲ":"ىٴو̆","ﯵ":"ىٴوٰ","ﯴ":"ىٴوٰ","ﯻ":"ىٴى","ﯺ":"ىٴى","ﱨ":"ىٴى","ﯹ":"ىٴى","ﰃ":"ىٴى","ﱩ":"ىٴى","ﰄ":"ىٴى","ﳚ":"ىج","ﱕ":"ىج","ﰑ":"ىۛج","ﶯ":"ىجى","ﳛ":"ىح","ﱖ":"ىح","ﶮ":"ىحى","ﳜ":"ىخ","ﱗ":"ىخ","ﲑ":"ىر","ﱶ":"ىۛر","ﲒ":"ىز","ﱷ":"ىۛز","ﳝ":"ىم","ﳰ":"ىم","ﲓ":"ىم","ﱘ":"ىم","ﲦ":"ىۛم","ﳥ":"ىۛم","ﱸ":"ىۛم","ﰒ":"ىۛم","ﶝ":"ىمم","ﶜ":"ىمم","ﶰ":"ىمى","ﲔ":"ىن","ﱹ":"ىۛن","ﲕ":"ىى","ﱙ":"ىى","ﲖ":"ىى","ﱚ":"ىى","ﱺ":"ىۛى","ﰓ":"ىۛى","ﱻ":"ىۛى","ﰔ":"ىۛى","ﮱ":"ۓ","ﮰ":"ۓ","𐊸":"ⵀ","⁞":"ⵂ","⸽":"ⵂ","⦙":"ⵂ","︙":"ⵗ","⁝":"ⵗ","⋮":"ⵗ","Մ":"ሆ","Ռ":"ቡ","Ի":"ኮ","Պ":"ጣ","आ":"अा","ऒ":"अाॆ","ओ":"अाे","औ":"अाै","ऄ":"अॆ","ऑ":"अॉ","ऍ":"एॅ","ऎ":"एॆ","ऐ":"एे","ई":"र्इ","ઽ":"ऽ","𑇜":"ꣻ","𑇋":"ऺ","ુ":"ु","ૂ":"ू","ੋ":"ॆ","੍":"्","્":"्","আ":"অা","ৠ":"ঋৃ","ৡ":"ঋৃ","𑒒":"ঘ","𑒔":"চ","𑒖":"জ","𑒘":"ঞ","𑒙":"ট","𑒛":"ড","𑒪":"ণ","𑒞":"ত","𑒟":"থ","𑒠":"দ","𑒡":"ধ","𑒢":"ন","𑒣":"প","𑒩":"ব","𑒧":"ম","𑒨":"য","𑒫":"র","𑒝":"ল","𑒭":"ষ","𑒮":"স","𑓄":"ঽ","𑒰":"া","𑒱":"ি","𑒹":"ে","𑒼":"ো","𑒾":"ৌ","𑓂":"্","𑒽":"ৗ","ਉ":"ੳੁ","ਊ":"ੳੂ","ਆ":"ਅਾ","ਐ":"ਅੈ","ਔ":"ਅੌ","ਇ":"ੲਿ","ਈ":"ੲੀ","ਏ":"ੲੇ","આ":"અા","ઑ":"અાૅ","ઓ":"અાે","ઔ":"અાૈ","ઍ":"અૅ","એ":"અે","ઐ":"અૈ","ଆ":"ଅା","௮":"அ","ர":"ஈ","ா":"ஈ","௫":"ஈு","௨":"உ","ഉ":"உ","ஊ":"உள","ഊ":"உൗ","௭":"எ","௷":"எவ","ஜ":"ஐ","ജ":"ஐ","௧":"க","௪":"ச","௬":"சு","௲":"சூ","ഺ":"டி","ണ":"ண","௺":"நீ","௴":"மீ","௰":"ய","ഴ":"ழ","ௗ":"ள","ை":"ன","ശ":"ஶ","௸":"ஷ","ി":"ி","ീ":"ி","ொ":"ெஈ","ௌ":"ெள","ோ":"ேஈ","ಅ":"అ","ಆ":"ఆ","ಇ":"ఇ","ౠ":"ఋా","ౡ":"ఌా","ಒ":"ఒ","ఔ":"ఒౌ","ಔ":"ఒౌ","ఓ":"ఒౕ","ಓ":"ఒౕ","ಜ":"జ","ಞ":"ఞ","ఢ":"డ̣","ಣ":"ణ","థ":"ధּ","భ":"బ̣","ಯ":"య","ఠ":"రּ","ಱ":"ఱ","ಲ":"ల","ష":"వ̣","హ":"వా","మ":"వు","ూ":"ుా","ౄ":"ృా","ೡ":"ಌಾ","ഈ":"ഇൗ","ഐ":"എെ","ഓ":"ഒാ","ഔ":"ഒൗ","ൡ":"ഞ","൫":"ദ്ര","൹":"നു","ഌ":"നു","ങ":"നു","൯":"ന്","ൻ":"ന്","൬":"ന്ന","൚":"ന്മ","റ":"ര","൪":"ര്","ർ":"ര്","൮":"വ്ര","൶":"ഹ്മ","ൂ":"ു","ൃ":"ു","ൈ":"െെ","෪":"ජ","෫":"ද","𑐓":"𑐴𑑂𑐒","𑐙":"𑐴𑑂𑐘","𑐤":"𑐴𑑂𑐣","𑐪":"𑐴𑑂𑐩","𑐭":"𑐴𑑂𑐬","𑐯":"𑐴𑑂𑐮","𑗘":"𑖂","𑗙":"𑖂","𑗚":"𑖃","𑗛":"𑖄","𑗜":"𑖲","𑗝":"𑖳","ฃ":"ข","ด":"ค","ต":"ค","ม":"ฆ","ຈ":"จ","ซ":"ช","ฏ":"ฎ","ท":"ฑ","ບ":"บ","ປ":"ป","ຝ":"ฝ","ພ":"พ","ຟ":"ฟ","ฦ":"ภ","ຍ":"ย","។":"ฯ","ๅ":"า","ำ":"̊า","ិ":"ิ","ី":"ี","ឹ":"ึ","ឺ":"ื","ຸ":"ุ","ູ":"ู","แ":"เเ","ໜ":"ຫນ","ໝ":"ຫມ","ຳ":"̊າ","༂":"འུྂཿ","༃":"འུྂ༔","ཪ":"ར","ༀ":"ཨོཾ","ཷ":"ྲཱྀ","ཹ":"ླཱྀ","𑲲":"𑲪","ႁ":"ဂှ","က":"ဂာ","ၰ":"ဃှ","ၦ":"ပှ","ဟ":"ပာ","ၯ":"ပာှ","ၾ":"ၽှ","ဩ":"သြ","ဪ":"သြော်","႞":"ႃ̊","ឣ":"អ","᧐":"ᦞ","᧑":"ᦱ","᪀":"ᩅ","᪐":"ᩅ","꩓":"ꨁ","꩖":"ꨣ","᭒":"ᬍ","᭓":"ᬑ","᭘":"ᬨ","ꦣ":"ꦝ","ᢖ":"ᡜ","ᡕ":"ᠵ","ῶ":"Ꮿ","ᐍ":"ᐁ·","ᐫ":"ᐁᐠ","ᐑ":"ᐄ·","ᐓ":"ᐅ·","ᐭ":"ᐅᐠ","ᐕ":"ᐆ·","ᐘ":"ᐊ·","ᐮ":"ᐊᐠ","ᐚ":"ᐋ·","ᣝ":"ᐞᣟ","ᓑ":"ᐡ","ᕀ":"ᐩ","ᐿ":"ᐲ·","ᑃ":"ᐴ·","⍩":"ᐵ","ᑇ":"ᐹ·","ᑜ":"ᑏ·","⸧":"ᑐ","⊃":"ᑐ","ᑞ":"ᑐ·","ᑩ":"ᑐ\'","⟉":"ᑐ/","⫗":"ᑐᑕ","ᑠ":"ᑑ·","⸦":"ᑕ","⊂":"ᑕ","ᑢ":"ᑕ·","ᑪ":"ᑕ\'","ᑤ":"ᑖ·","ᑵ":"ᑫ·","ᒅ":"ᑫ\'","ᑹ":"ᑮ·","ᑽ":"ᑰ·","ᘃ":"ᒉ","ᒓ":"ᒉ·","ᒕ":"ᒋ·","ᒗ":"ᒌ·","ᒛ":"ᒎ·","ᘂ":"ᒐ","ᒝ":"ᒐ·","ᒟ":"ᒑ·","ᒭ":"ᒣ·","ᒱ":"ᒦ·","ᒳ":"ᒧ·","ᒵ":"ᒨ·","ᒹ":"ᒫ·","ᓊ":"ᓀ·","ᣇ":"ᓂ·","ᣉ":"ᓃ·","ᣋ":"ᓄ·","ᣍ":"ᓅ·","ᓌ":"ᓇ·","ᓎ":"ᓈ·","ᘄ":"ᓓ","ᓝ":"ᓓ·","ᓟ":"ᓕ·","ᓡ":"ᓖ·","ᓣ":"ᓗ·","ᓥ":"ᓘ·","ᘇ":"ᓚ","ᓧ":"ᓚ·","ᓩ":"ᓛ·","ᓷ":"ᓭ·","ᓹ":"ᓯ·","ᓻ":"ᓰ·","ᓽ":"ᓱ·","ᓿ":"ᓲ·","ᔁ":"ᓴ·","ᔃ":"ᓵ·","ᔌ":"ᔋ<","ᔎ":"ᔋb","ᔍ":"ᔋᑕ","ᔏ":"ᔋᒐ","ᔘ":"ᔐ·","ᔚ":"ᔑ·","ᔜ":"ᔒ·","ᔞ":"ᔓ·","ᔠ":"ᔔ·","ᔢ":"ᔕ·","ᔤ":"ᔖ·","ᔲ":"ᔨ·","ᔴ":"ᔩ·","ᔶ":"ᔪ·","ᔸ":"ᔫ·","ᔺ":"ᔭ·","ᔼ":"ᔮ·","ᘢ":"ᕃ","ᣠ":"ᕃ·","ᘣ":"ᕆ","ᘤ":"ᕊ","ᕏ":"ᕌ·","ᖃ":"ᕐb","ᖄ":"ᕐḃ","ᖁ":"ᕐd","ᕿ":"ᕐP","ᙯ":"ᕐᑫ","ᕾ":"ᕐᑬ","ᖀ":"ᕐᑮ","ᖂ":"ᕐᑰ","ᖅ":"ᕐᒃ","ᕜ":"ᕚ·","ᣣ":"ᕞ·","ᣤ":"ᕦ·","ᕩ":"ᕧ·","ᣥ":"ᕫ·","ᣨ":"ᖆ·","ᖑ":"ᖕJ","ᙰ":"ᖕᒉ","ᖎ":"ᖕᒊ","ᖏ":"ᖕᒋ","ᖐ":"ᖕᒌ","ᖒ":"ᖕᒎ","ᖓ":"ᖕᒐ","ᖔ":"ᖕᒑ","ᙳ":"ᖖJ","ᙱ":"ᖖᒋ","ᙲ":"ᖖᒌ","ᙴ":"ᖖᒎ","ᙵ":"ᖖᒐ","ᙶ":"ᖖᒑ","ᣪ":"ᖗ·","ᙷ":"ᖧ·","ᙸ":"ᖨ·","ᙹ":"ᖩ·","ᙺ":"ᖪ·","ᙻ":"ᖫ·","ᙼ":"ᖬ·","ᙽ":"ᖭ·","⪫":"ᗒ","⪪":"ᗕ","ꓷ":"ᗡ","ᣰ":"ᗴ·","ᣲ":"ᘛ·","ᶻ":"ᙆ","ꓭ":"ᙠ","ᶺ":"ᣔ","ᴾ":"ᣖ","ᣜ":"ᣟᐞ","ˡ":"ᣳ","ʳ":"ᣴ","ˢ":"ᣵ","ᣛ":"ᣵ","ꚰ":"ᚹ","ᛡ":"ᚼ","⍿":"ᚽ","ᛂ":"ᚽ","𝈿":"ᛋ","↑":"ᛏ","↿":"ᛐ","⥮":"ᛐ⇂","⥣":"ᛐᛚ","ⵣ":"ᛯ","↾":"ᛚ","⨡":"ᛚ","⋄":"ᛜ","◇":"ᛜ","◊":"ᛜ","♢":"ᛜ","🝔":"ᛜ","𑢷":"ᛜ","𐊔":"ᛜ","⍚":"ᛜ̲","⋈":"ᛞ","⨝":"ᛞ","𐓐":"ᛦ","↕":"ᛨ","𐳼":"𐲂","𐳺":"𐲥","ㄱ":"ᄀ","ᆨ":"ᄀ","ᄁ":"ᄀᄀ","ㄲ":"ᄀᄀ","ᆩ":"ᄀᄀ","ᇺ":"ᄀᄂ","ᅚ":"ᄀᄃ","ᇃ":"ᄀᄅ","ᇻ":"ᄀᄇ","ᆪ":"ᄀᄉ","ㄳ":"ᄀᄉ","ᇄ":"ᄀᄉᄀ","ᇼ":"ᄀᄎ","ᇽ":"ᄀᄏ","ᇾ":"ᄀᄒ","ㄴ":"ᄂ","ᆫ":"ᄂ","ᄓ":"ᄂᄀ","ᇅ":"ᄂᄀ","ᄔ":"ᄂᄂ","ㅥ":"ᄂᄂ","ᇿ":"ᄂᄂ","ᄕ":"ᄂᄃ","ㅦ":"ᄂᄃ","ᇆ":"ᄂᄃ","ퟋ":"ᄂᄅ","ᄖ":"ᄂᄇ","ᅛ":"ᄂᄉ","ᇇ":"ᄂᄉ","ㅧ":"ᄂᄉ","ᅜ":"ᄂᄌ","ᆬ":"ᄂᄌ","ㄵ":"ᄂᄌ","ퟌ":"ᄂᄎ","ᇉ":"ᄂᄐ","ᅝ":"ᄂᄒ","ᆭ":"ᄂᄒ","ㄶ":"ᄂᄒ","ᇈ":"ᄂᅀ","ㅨ":"ᄂᅀ","ㄷ":"ᄃ","ᆮ":"ᄃ","ᄗ":"ᄃᄀ","ᇊ":"ᄃᄀ","ᄄ":"ᄃᄃ","ㄸ":"ᄃᄃ","ퟍ":"ᄃᄃ","ퟎ":"ᄃᄃᄇ","ᅞ":"ᄃᄅ","ᇋ":"ᄃᄅ","ꥠ":"ᄃᄆ","ꥡ":"ᄃᄇ","ퟏ":"ᄃᄇ","ꥢ":"ᄃᄉ","ퟐ":"ᄃᄉ","ퟑ":"ᄃᄉᄀ","ꥣ":"ᄃᄌ","ퟒ":"ᄃᄌ","ퟓ":"ᄃᄎ","ퟔ":"ᄃᄐ","ㄹ":"ᄅ","ᆯ":"ᄅ","ꥤ":"ᄅᄀ","ᆰ":"ᄅᄀ","ㄺ":"ᄅᄀ","ꥥ":"ᄅᄀᄀ","ퟕ":"ᄅᄀᄀ","ᇌ":"ᄅᄀᄉ","ㅩ":"ᄅᄀᄉ","ퟖ":"ᄅᄀᄒ","ᄘ":"ᄅᄂ","ᇍ":"ᄅᄂ","ꥦ":"ᄅᄃ","ᇎ":"ᄅᄃ","ㅪ":"ᄅᄃ","ꥧ":"ᄅᄃᄃ","ᇏ":"ᄅᄃᄒ","ᄙ":"ᄅᄅ","ᇐ":"ᄅᄅ","ퟗ":"ᄅᄅᄏ","ꥨ":"ᄅᄆ","ᆱ":"ᄅᄆ","ㄻ":"ᄅᄆ","ᇑ":"ᄅᄆᄀ","ᇒ":"ᄅᄆᄉ","ퟘ":"ᄅᄆᄒ","ꥩ":"ᄅᄇ","ᆲ":"ᄅᄇ","ㄼ":"ᄅᄇ","ퟙ":"ᄅᄇᄃ","ꥪ":"ᄅᄇᄇ","ᇓ":"ᄅᄇᄉ","ㅫ":"ᄅᄇᄉ","ꥫ":"ᄅᄇᄋ","ᇕ":"ᄅᄇᄋ","ퟚ":"ᄅᄇᄑ","ᇔ":"ᄅᄇᄒ","ꥬ":"ᄅᄉ","ᆳ":"ᄅᄉ","ㄽ":"ᄅᄉ","ᇖ":"ᄅᄉᄉ","ᄛ":"ᄅᄋ","ퟝ":"ᄅᄋ","ꥭ":"ᄅᄌ","ꥮ":"ᄅᄏ","ᇘ":"ᄅᄏ","ᆴ":"ᄅᄐ","ㄾ":"ᄅᄐ","ᆵ":"ᄅᄑ","ㄿ":"ᄅᄑ","ᄚ":"ᄅᄒ","ㅀ":"ᄅᄒ","ᄻ":"ᄅᄒ","ᆶ":"ᄅᄒ","ퟲ":"ᄅᄒ","ᇗ":"ᄅᅀ","ㅬ":"ᄅᅀ","ퟛ":"ᄅᅌ","ᇙ":"ᄅᅙ","ㅭ":"ᄅᅙ","ퟜ":"ᄅᅙᄒ","ㅁ":"ᄆ","ᆷ":"ᄆ","ꥯ":"ᄆᄀ","ᇚ":"ᄆᄀ","ퟞ":"ᄆᄂ","ퟟ":"ᄆᄂᄂ","ꥰ":"ᄆᄃ","ᇛ":"ᄆᄅ","ퟠ":"ᄆᄆ","ᄜ":"ᄆᄇ","ㅮ":"ᄆᄇ","ᇜ":"ᄆᄇ","ퟡ":"ᄆᄇᄉ","ꥱ":"ᄆᄉ","ᇝ":"ᄆᄉ","ㅯ":"ᄆᄉ","ᇞ":"ᄆᄉᄉ","ᄝ":"ᄆᄋ","ㅱ":"ᄆᄋ","ᇢ":"ᄆᄋ","ퟢ":"ᄆᄌ","ᇠ":"ᄆᄎ","ᇡ":"ᄆᄒ","ᇟ":"ᄆᅀ","ㅰ":"ᄆᅀ","ㅂ":"ᄇ","ᆸ":"ᄇ","ᄞ":"ᄇᄀ","ㅲ":"ᄇᄀ","ᄟ":"ᄇᄂ","ᄠ":"ᄇᄃ","ㅳ":"ᄇᄃ","ퟣ":"ᄇᄃ","ᇣ":"ᄇᄅ","ퟤ":"ᄇᄅᄑ","ퟥ":"ᄇᄆ","ᄈ":"ᄇᄇ","ㅃ":"ᄇᄇ","ퟦ":"ᄇᄇ","ᄬ":"ᄇᄇᄋ","ㅹ":"ᄇᄇᄋ","ᄡ":"ᄇᄉ","ㅄ":"ᄇᄉ","ᆹ":"ᄇᄉ","ᄢ":"ᄇᄉᄀ","ㅴ":"ᄇᄉᄀ","ᄣ":"ᄇᄉᄃ","ㅵ":"ᄇᄉᄃ","ퟧ":"ᄇᄉᄃ","ᄤ":"ᄇᄉᄇ","ᄥ":"ᄇᄉᄉ","ᄦ":"ᄇᄉᄌ","ꥲ":"ᄇᄉᄐ","ᄫ":"ᄇᄋ","ㅸ":"ᄇᄋ","ᇦ":"ᄇᄋ","ᄧ":"ᄇᄌ","ㅶ":"ᄇᄌ","ퟨ":"ᄇᄌ","ᄨ":"ᄇᄎ","ퟩ":"ᄇᄎ","ꥳ":"ᄇᄏ","ᄩ":"ᄇᄐ","ㅷ":"ᄇᄐ","ᄪ":"ᄇᄑ","ᇤ":"ᄇᄑ","ꥴ":"ᄇᄒ","ᇥ":"ᄇᄒ","ㅅ":"ᄉ","ᆺ":"ᄉ","ᄭ":"ᄉᄀ","ㅺ":"ᄉᄀ","ᇧ":"ᄉᄀ","ᄮ":"ᄉᄂ","ㅻ":"ᄉᄂ","ᄯ":"ᄉᄃ","ㅼ":"ᄉᄃ","ᇨ":"ᄉᄃ","ᄰ":"ᄉᄅ","ᇩ":"ᄉᄅ","ᄱ":"ᄉᄆ","ퟪ":"ᄉᄆ","ᄲ":"ᄉᄇ","ㅽ":"ᄉᄇ","ᇪ":"ᄉᄇ","ᄳ":"ᄉᄇᄀ","ퟫ":"ᄉᄇᄋ","ᄊ":"ᄉᄉ","ㅆ":"ᄉᄉ","ᆻ":"ᄉᄉ","ퟬ":"ᄉᄉᄀ","ퟭ":"ᄉᄉᄃ","ꥵ":"ᄉᄉᄇ","ᄴ":"ᄉᄉᄉ","ᄵ":"ᄉᄋ","ᄶ":"ᄉᄌ","ㅾ":"ᄉᄌ","ퟯ":"ᄉᄌ","ᄷ":"ᄉᄎ","ퟰ":"ᄉᄎ","ᄸ":"ᄉᄏ","ᄹ":"ᄉᄐ","ퟱ":"ᄉᄐ","ᄺ":"ᄉᄑ","ퟮ":"ᄉᅀ","ㅇ":"ᄋ","ᆼ":"ᄋ","ᅁ":"ᄋᄀ","ᇬ":"ᄋᄀ","ᇭ":"ᄋᄀᄀ","ᅂ":"ᄋᄃ","ꥶ":"ᄋᄅ","ᅃ":"ᄋᄆ","ᅄ":"ᄋᄇ","ᅅ":"ᄋᄉ","ᇱ":"ᄋᄉ","ㆂ":"ᄋᄉ","ᅇ":"ᄋᄋ","ㆀ":"ᄋᄋ","ᇮ":"ᄋᄋ","ᅈ":"ᄋᄌ","ᅉ":"ᄋᄎ","ᇯ":"ᄋᄏ","ᅊ":"ᄋᄐ","ᅋ":"ᄋᄑ","ꥷ":"ᄋᄒ","ᅆ":"ᄋᅀ","ᇲ":"ᄋᅀ","ㆃ":"ᄋᅀ","ㅈ":"ᄌ","ᆽ":"ᄌ","ퟷ":"ᄌᄇ","ퟸ":"ᄌᄇᄇ","ᅍ":"ᄌᄋ","ᄍ":"ᄌᄌ","ㅉ":"ᄌᄌ","ퟹ":"ᄌᄌ","ꥸ":"ᄌᄌᄒ","ㅊ":"ᄎ","ᆾ":"ᄎ","ᅒ":"ᄎᄏ","ᅓ":"ᄎᄒ","ㅋ":"ᄏ","ᆿ":"ᄏ","ㅌ":"ᄐ","ᇀ":"ᄐ","ꥹ":"ᄐᄐ","ㅍ":"ᄑ","ᇁ":"ᄑ","ᅖ":"ᄑᄇ","ᇳ":"ᄑᄇ","ퟺ":"ᄑᄉ","ᅗ":"ᄑᄋ","ㆄ":"ᄑᄋ","ᇴ":"ᄑᄋ","ퟻ":"ᄑᄐ","ꥺ":"ᄑᄒ","ㅎ":"ᄒ","ᇂ":"ᄒ","ᇵ":"ᄒᄂ","ᇶ":"ᄒᄅ","ᇷ":"ᄒᄆ","ᇸ":"ᄒᄇ","ꥻ":"ᄒᄉ","ᅘ":"ᄒᄒ","ㆅ":"ᄒᄒ","ᄽ":"ᄼᄼ","ᄿ":"ᄾᄾ","ㅿ":"ᅀ","ᇫ":"ᅀ","ퟳ":"ᅀᄇ","ퟴ":"ᅀᄇᄋ","ㆁ":"ᅌ","ᇰ":"ᅌ","ퟵ":"ᅌᄆ","ퟶ":"ᅌᄒ","ᅏ":"ᅎᅎ","ᅑ":"ᅐᅐ","ㆆ":"ᅙ","ᇹ":"ᅙ","ꥼ":"ᅙᅙ","ㅤ":"ᅠ","ㅏ":"ᅡ","ᆣ":"ᅡー","ᅶ":"ᅡᅩ","ᅷ":"ᅡᅮ","ᅢ":"ᅡ丨","ㅐ":"ᅡ丨","ㅑ":"ᅣ","ᅸ":"ᅣᅩ","ᅹ":"ᅣᅭ","ᆤ":"ᅣᅮ","ᅤ":"ᅣ丨","ㅒ":"ᅣ丨","ㅓ":"ᅥ","ᅼ":"ᅥー","ᅺ":"ᅥᅩ","ᅻ":"ᅥᅮ","ᅦ":"ᅥ丨","ㅔ":"ᅥ丨","ㅕ":"ᅧ","ᆥ":"ᅧᅣ","ᅽ":"ᅧᅩ","ᅾ":"ᅧᅮ","ᅨ":"ᅧ丨","ㅖ":"ᅧ丨","ㅗ":"ᅩ","ᅪ":"ᅩᅡ","ㅘ":"ᅩᅡ","ᅫ":"ᅩᅡ丨","ㅙ":"ᅩᅡ丨","ᆦ":"ᅩᅣ","ᆧ":"ᅩᅣ丨","ᅿ":"ᅩᅥ","ᆀ":"ᅩᅥ丨","ힰ":"ᅩᅧ","ᆁ":"ᅩᅧ丨","ᆂ":"ᅩᅩ","ힱ":"ᅩᅩ丨","ᆃ":"ᅩᅮ","ᅬ":"ᅩ丨","ㅚ":"ᅩ丨","ㅛ":"ᅭ","ힲ":"ᅭᅡ","ힳ":"ᅭᅡ丨","ᆄ":"ᅭᅣ","ㆇ":"ᅭᅣ","ᆆ":"ᅭᅣ","ᆅ":"ᅭᅣ丨","ㆈ":"ᅭᅣ丨","ힴ":"ᅭᅥ","ᆇ":"ᅭᅩ","ᆈ":"ᅭ丨","ㆉ":"ᅭ丨","ㅜ":"ᅮ","ᆉ":"ᅮᅡ","ᆊ":"ᅮᅡ丨","ᅯ":"ᅮᅥ","ㅝ":"ᅮᅥ","ᆋ":"ᅮᅥー","ᅰ":"ᅮᅥ丨","ㅞ":"ᅮᅥ丨","ힵ":"ᅮᅧ","ᆌ":"ᅮᅧ丨","ᆍ":"ᅮᅮ","ᅱ":"ᅮ丨","ㅟ":"ᅮ丨","ힶ":"ᅮ丨丨","ㅠ":"ᅲ","ᆎ":"ᅲᅡ","ힷ":"ᅲᅡ丨","ᆏ":"ᅲᅥ","ᆐ":"ᅲᅥ丨","ᆑ":"ᅲᅧ","ㆊ":"ᅲᅧ","ᆒ":"ᅲᅧ丨","ㆋ":"ᅲᅧ丨","ힸ":"ᅲᅩ","ᆓ":"ᅲᅮ","ᆔ":"ᅲ丨","ㆌ":"ᅲ丨","ㆍ":"ᆞ","ퟅ":"ᆞᅡ","ᆟ":"ᆞᅥ","ퟆ":"ᆞᅥ丨","ᆠ":"ᆞᅮ","ᆢ":"ᆞᆞ","ᆡ":"ᆞ丨","ㆎ":"ᆞ丨","ヘ":"へ","⍁":"〼","⧄":"〼","꒞":"ꁊ","꒬":"ꁐ","꒜":"ꃀ","꒨":"ꄲ","꒿":"ꉙ","꒾":"ꊱ","꒔":"ꋍ","꓀":"ꎫ","꓂":"ꎵ","꒺":"ꎿ","꒰":"ꏂ","꒧":"ꑘ","⊥":"ꓕ","⟂":"ꓕ","𝈜":"ꓕ","Ʇ":"ꓕ","Ꞟ":"ꓤ","⅁":"ꓨ","⅂":"ꓶ","𝈕":"ꓶ","𝈫":"ꓶ","𖼦":"ꓶ","𐐑":"ꓶ","⅃":"𖼀","𑫦":"𑫥𑫯","𑫨":"𑫥𑫥","𑫩":"𑫥𑫥𑫯","𑫪":"𑫥𑫥𑫰","𑫧":"𑫥𑫰","𑫴":"𑫳𑫯","𑫶":"𑫳𑫳","𑫷":"𑫳𑫳𑫯","𑫸":"𑫳𑫳𑫰","𑫵":"𑫳𑫰","𑫬":"𑫫𑫯","𑫭":"𑫫𑫫","𑫮":"𑫫𑫫𑫯","⊕":"𐊨","⨁":"𐊨","🜨":"𐊨","Ꚛ":"𐊨","▽":"𐊼","𝈔":"𐊼","🜄":"𐊼","⧖":"𐋀","ꞛ":"𐐺","Ꞛ":"𐐒","𐒠":"𐒆","𐏑":"𐎂","𐏓":"𐎓","𒀸":"𐎚","☥":"𐦞","𓋹":"𐦞","〹":"卄","不":"不","丽":"丽","並":"並","⎜":"丨","⎟":"丨","⎢":"丨","⎥":"丨","⎪":"丨","⎮":"丨","㇑":"丨","ᅵ":"丨","ㅣ":"丨","⼁":"丨","ᆜ":"丨ー","ᆘ":"丨ᅡ","ᆙ":"丨ᅣ","ힽ":"丨ᅣᅩ","ힾ":"丨ᅣ丨","ힿ":"丨ᅧ","ퟀ":"丨ᅧ丨","ᆚ":"丨ᅩ","ퟁ":"丨ᅩ丨","ퟂ":"丨ᅭ","ᆛ":"丨ᅮ","ퟃ":"丨ᅲ","ᆝ":"丨ᆞ","ퟄ":"丨丨","串":"串","丸":"丸","丹":"丹","乁":"乁","㇠":"乙","⼄":"乙","㇟":"乚","⺃":"乚","㇖":"乛","⺂":"乛","⻲":"亀","亂":"亂","㇚":"亅","⼅":"亅","了":"了","ニ":"二","⼆":"二","𠄢":"𠄢","⼇":"亠","亮":"亮","⼈":"人","イ":"亻","⺅":"亻","什":"什","仌":"仌","令":"令","你":"你","倂":"併","倂":"併","侀":"侀","來":"來","例":"例","侮":"侮","侮":"侮","侻":"侻","便":"便","值":"値","倫":"倫","偺":"偺","備":"備","像":"像","僚":"僚","僧":"僧","僧":"僧","㒞":"㒞","⼉":"儿","兀":"兀","⺎":"兀","充":"充","免":"免","免":"免","兔":"兔","兤":"兤","⼊":"入","內":"內","全":"全","兩":"兩","ハ":"八","⼋":"八","六":"六","具":"具","𠔜":"𠔜","𠔥":"𠔥","冀":"冀","㒹":"㒹","⼌":"冂","再":"再","𠕋":"𠕋","冒":"冒","冕":"冕","㒻":"㒻","最":"最","⼍":"冖","冗":"冗","冤":"冤","⼎":"冫","冬":"冬","况":"况","况":"况","冷":"冷","凉":"凉","凌":"凌","凜":"凜","凞":"凞","⼏":"几","𠘺":"𠘺","凵":"凵","⼐":"凵","⼑":"刀","⺉":"刂","刃":"刃","切":"切","切":"切","列":"列","利":"利","㓟":"㓟","刺":"刺","刻":"刻","剆":"剆","割":"割","剷":"剷","劉":"劉","𠠄":"𠠄","カ":"力","力":"力","⼒":"力","劣":"劣","㔕":"㔕","劳":"劳","勇":"勇","勇":"勇","勉":"勉","勉":"勉","勒":"勒","勞":"勞","勤":"勤","勤":"勤","勵":"勵","⼓":"勹","勺":"勺","勺":"勺","包":"包","匆":"匆","𠣞":"𠣞","⼔":"匕","北":"北","北":"北","⼕":"匚","⼖":"匸","匿":"匿","⼗":"十","〸":"十","〺":"卅","卉":"卉","࿖":"卍","࿕":"卐","卑":"卑","卑":"卑","博":"博","ト":"卜","⼘":"卜","⼙":"卩","⺋":"㔾","即":"即","卵":"卵","卽":"卽","卿":"卿","卿":"卿","卿":"卿","⼚":"厂","𠨬":"𠨬","⼛":"厶","參":"參","⼜":"又","及":"及","叟":"叟","𠭣":"𠭣","ロ":"口","⼝":"口","囗":"口","⼞":"口","句":"句","叫":"叫","叱":"叱","吆":"吆","吏":"吏","吝":"吝","吸":"吸","呂":"呂","呈":"呈","周":"周","咞":"咞","咢":"咢","咽":"咽","䎛":"㖈","哶":"哶","唐":"唐","啓":"啓","啟":"啓","啕":"啕","啣":"啣","善":"善","善":"善","喇":"喇","喙":"喙","喙":"喙","喝":"喝","喝":"喝","喫":"喫","喳":"喳","嗀":"嗀","嗂":"嗂","嗢":"嗢","嘆":"嘆","嘆":"嘆","噑":"噑","噴":"噴","器":"器","囹":"囹","圖":"圖","圗":"圗","⼟":"土","士":"土","⼠":"土","型":"型","城":"城","㦳":"㘽","埴":"埴","堍":"堍","報":"報","堲":"堲","塀":"塀","塚":"塚","塚":"塚","塞":"塞","填":"塡","壿":"墫","墬":"墬","墳":"墳","壘":"壘","壟":"壟","𡓤":"𡓤","壮":"壮","売":"売","壷":"壷","⼡":"夂","夆":"夆","⼢":"夊","タ":"夕","⼣":"夕","多":"多","夢":"夢","⼤":"大","奄":"奄","奈":"奈","契":"契","奔":"奔","奢":"奢","女":"女","⼥":"女","𡚨":"𡚨","𡛪":"𡛪","姘":"姘","姬":"姬","娛":"娛","娧":"娧","婢":"婢","婦":"婦","嬀":"媯","㛮":"㛮","㛼":"㛼","媵":"媵","嬈":"嬈","嬨":"嬨","嬾":"嬾","嬾":"嬾","⼦":"子","⼧":"宀","宅":"宅","𡧈":"𡧈","寃":"寃","寘":"寘","寧":"寧","寧":"寧","寧":"寧","寮":"寮","寳":"寳","𡬘":"𡬘","⼨":"寸","寿":"寿","将":"将","⼩":"小","尢":"尢","⺐":"尢","⼪":"尢","⺏":"尣","㞁":"㞁","⼫":"尸","尿":"尿","屠":"屠","屢":"屢","層":"層","履":"履","屮":"屮","屮":"屮","⼬":"屮","𡴋":"𡴋","⼭":"山","峀":"峀","岍":"岍","𡷤":"𡷤","𡷦":"𡷦","崙":"崙","嵃":"嵃","嵐":"嵐","嵫":"嵫","嵮":"嵮","嵼":"嵼","嶲":"嶲","嶺":"嶺","⼮":"巛","巢":"巢","エ":"工","⼯":"工","⼰":"己","⺒":"巳","㠯":"㠯","巽":"巽","⼱":"巾","帲":"帡","帨":"帨","帽":"帽","幩":"幩","㡢":"㡢","𢆃":"𢆃","⼲":"干","年":"年","𢆟":"𢆟","⺓":"幺","⼳":"幺","⼴":"广","度":"度","㡼":"㡼","庰":"庰","庳":"庳","庶":"庶","廊":"廊","廊":"廊","廉":"廉","廒":"廒","廓":"廓","廙":"廙","廬":"廬","⼵":"廴","廾":"廾","⼶":"廾","𢌱":"𢌱","𢌱":"𢌱","弄":"弄","⼷":"弋","⼸":"弓","弢":"弢","弢":"弢","⼹":"彐","⺔":"彑","当":"当","㣇":"㣇","⼺":"彡","形":"形","彩":"彩","彫":"彫","⼻":"彳","律":"律","㣣":"㣣","徚":"徚","復":"復","徭":"徭","⼼":"心","⺖":"忄","⺗":"㣺","忍":"忍","志":"志","念":"念","忹":"忹","怒":"怒","怜":"怜","恵":"恵","㤜":"㤜","㤺":"㤺","悁":"悁","悔":"悔","悔":"悔","惇":"惇","惘":"惘","惡":"惡","𢛔":"𢛔","愈":"愈","慨":"慨","慄":"慄","慈":"慈","慌":"慌","慌":"慌","慎":"慎","慎":"慎","慠":"慠","慺":"慺","憎":"憎","憎":"憎","憎":"憎","憐":"憐","憤":"憤","憯":"憯","憲":"憲","𢡄":"𢡄","𢡊":"𢡊","懞":"懞","懲":"懲","懲":"懲","懲":"懲","懶":"懶","懶":"懶","戀":"戀","⼽":"戈","成":"成","戛":"戛","戮":"戮","戴":"戴","⼾":"戶","戸":"戶","⼿":"手","⺘":"扌","扝":"扝","抱":"抱","拉":"拉","拏":"拏","拓":"拓","拔":"拔","拼":"拼","拾":"拾","𢬌":"𢬌","挽":"挽","捐":"捐","捨":"捨","捻":"捻","掃":"掃","掠":"掠","掩":"掩","揄":"揄","揤":"揤","摒":"摒","𢯱":"𢯱","搜":"搜","搢":"搢","揅":"揅","摩":"摩","摷":"摷","摾":"摾","㨮":"㨮","搉":"㩁","撚":"撚","撝":"撝","擄":"擄","㩬":"㩬","⽀":"支","⽁":"攴","⺙":"攵","敏":"敏","敏":"敏","敖":"敖","敬":"敬","數":"數","𣀊":"𣀊","⽂":"文","⻫":"斉","⽃":"斗","料":"料","⽄":"斤","⽅":"方","旅":"旅","⽆":"无","⺛":"旡","既":"既","旣":"旣","⽇":"日","易":"易","曶":"㫚","㫤":"㫤","晉":"晉","晩":"晚","晴":"晴","晴":"晴","暑":"暑","暑":"暑","暈":"暈","㬈":"㬈","暜":"暜","暴":"暴","曆":"曆","㬙":"㬙","𣊸":"𣊸","⽈":"曰","更":"更","書":"書","⽉":"月","𣍟":"𣍟","肦":"朌","胐":"朏","胊":"朐","脁":"朓","胶":"㬵","朗":"朗","朗":"朗","朗":"朗","脧":"朘","望":"望","望":"望","幐":"㬺","䐠":"㬻","𣎓":"𣎓","膧":"朣","𣎜":"𣎜","⽊":"木","李":"李","杓":"杓","杖":"杖","杞":"杞","𣏃":"𣏃","柿":"杮","杻":"杻","枅":"枅","林":"林","㭉":"㭉","𣏕":"𣏕","柳":"柳","柺":"柺","栗":"栗","栟":"栟","桒":"桒","𣑭":"𣑭","梁":"梁","梅":"梅","梅":"梅","梎":"梎","梨":"梨","椔":"椔","楂":"楂","㮝":"㮝","㮝":"㮝","槩":"㮣","樧":"榝","榣":"榣","槪":"槪","樂":"樂","樂":"樂","樂":"樂","樓":"樓","𣚣":"𣚣","檨":"檨","櫓":"櫓","櫛":"櫛","欄":"欄","㰘":"㰘","⽋":"欠","次":"次","𣢧":"𣢧","歔":"歔","㱎":"㱎","⽌":"止","⻭":"歯","歲":"歲","歷":"歷","歹":"歹","⽍":"歹","⺞":"歺","殟":"殟","殮":"殮","⽎":"殳","殺":"殺","殺":"殺","殺":"殺","殻":"殻","𣪍":"𣪍","⽏":"毋","⺟":"母","𣫺":"𣫺","⽐":"比","⽑":"毛","⽒":"氏","⺠":"民","⽓":"气","⽔":"水","⺡":"氵","⺢":"氺","汎":"汎","汧":"汧","沈":"沈","沿":"沿","泌":"泌","泍":"泍","泥":"泥","𣲼":"𣲼","洛":"洛","洞":"洞","洴":"洴","派":"派","流":"流","流":"流","流":"流","洖":"洖","浩":"浩","浪":"浪","海":"海","海":"海","浸":"浸","涅":"涅","𣴞":"𣴞","淋":"淋","淚":"淚","淪":"淪","淹":"淹","渚":"渚","港":"港","湮":"湮","潙":"溈","滋":"滋","滋":"滋","溜":"溜","溺":"溺","滇":"滇","滑":"滑","滛":"滛","㴳":"㴳","漏":"漏","漢":"漢","漢":"漢","漣":"漣","𣻑":"𣻑","潮":"潮","𣽞":"𣽞","𣾎":"𣾎","濆":"濆","濫":"濫","濾":"濾","瀛":"瀛","瀞":"瀞","瀞":"瀞","瀹":"瀹","灊":"灊","㶖":"㶖","⽕":"火","⺣":"灬","灰":"灰","灷":"灷","災":"災","炙":"炙","炭":"炭","烈":"烈","烙":"烙","煮":"煮","煮":"煮","𤉣":"𤉣","煅":"煅","煉":"煉","𤋮":"𤋮","熜":"熜","燎":"燎","燐":"燐","𤎫":"𤎫","爐":"爐","爛":"爛","爨":"爨","⽖":"爪","爫":"爫","⺤":"爫","爵":"爵","爵":"爵","⽗":"父","⽘":"爻","⺦":"丬","⽙":"爿","⽚":"片","牐":"牐","⽛":"牙","𤘈":"𤘈","⽜":"牛","牢":"牢","犀":"犀","犕":"犕","⽝":"犬","⺨":"犭","犯":"犯","狀":"狀","𤜵":"𤜵","狼":"狼","猪":"猪","猪":"猪","𤠔":"𤠔","獵":"獵","獺":"獺","⽞":"玄","率":"率","率":"率","⽟":"玉","王":"王","㺬":"㺬","玥":"玥","玲":"玲","㺸":"㺸","㺸":"㺸","珞":"珞","琉":"琉","理":"理","琢":"琢","瑇":"瑇","瑜":"瑜","瑩":"瑩","瑱":"瑱","瑱":"瑱","璅":"璅","璉":"璉","璘":"璘","瓊":"瓊","⽠":"瓜","⽡":"瓦","㼛":"㼛","甆":"甆","⽢":"甘","⽣":"生","甤":"甤","⽤":"用","⽥":"田","画":"画","甾":"甾","𤰶":"𤰶","留":"留","略":"略","異":"異","異":"異","𤲒":"𤲒","⽦":"疋","⽧":"疒","痢":"痢","瘐":"瘐","瘟":"瘟","瘝":"瘝","療":"療","癩":"癩","⽨":"癶","⽩":"白","𤾡":"𤾡","𤾸":"𤾸","⽪":"皮","⽫":"皿","𥁄":"𥁄","㿼":"㿼","益":"益","益":"益","盛":"盛","盧":"盧","䀈":"䀈","⽬":"目","直":"直","直":"直","𥃲":"𥃲","𥃳":"𥃳","省":"省","䀘":"䀘","𥄙":"𥄙","眞":"眞","真":"真","真":"真","𥄳":"𥄳","着":"着","睊":"睊","睊":"睊","鿃":"䀹","䀹":"䀹","䀹":"䀹","晣":"䀿","䁆":"䁆","瞋":"瞋","𥉉":"𥉉","瞧":"瞧","⽭":"矛","⽮":"矢","⽯":"石","䂖":"䂖","𥐝":"𥐝","硏":"研","硎":"硎","硫":"硫","碌":"碌","碌":"碌","碑":"碑","磊":"磊","磌":"磌","磌":"磌","磻":"磻","䃣":"䃣","礪":"礪","⽰":"示","⺭":"礻","礼":"礼","社":"社","祈":"祈","祉":"祉","𥘦":"𥘦","祐":"祐","祖":"祖","祖":"祖","祝":"祝","神":"神","祥":"祥","視":"視","視":"視","祿":"祿","𥚚":"𥚚","禍":"禍","禎":"禎","福":"福","福":"福","𥛅":"𥛅","禮":"禮","⽱":"禸","⽲":"禾","秊":"秊","䄯":"䄯","秫":"秫","稜":"稜","穊":"穊","穀":"穀","穀":"穀","穏":"穏","⽳":"穴","突":"突","𥥼":"𥥼","窱":"窱","立":"立","⽴":"立","⻯":"竜","𥪧":"𥪧","𥪧":"𥪧","竮":"竮","⽵":"竹","笠":"笠","節":"節","節":"節","䈂":"䈂","𥮫":"𥮫","篆":"篆","䈧":"䈧","築":"築","𥲀":"𥲀","𥳐":"𥳐","簾":"簾","籠":"籠","⽶":"米","类":"类","粒":"粒","精":"精","糒":"糒","糖":"糖","糨":"糨","䊠":"䊠","糣":"糣","糧":"糧","⽷":"糸","⺯":"糹","𥾆":"𥾆","紀":"紀","紐":"紐","索":"索","累":"累","絶":"絕","絣":"絣","絛":"絛","綠":"綠","綾":"綾","緇":"緇","練":"練","練":"練","練":"練","縂":"縂","䌁":"䌁","縉":"縉","縷":"縷","繁":"繁","繅":"繅","𦇚":"𦇚","䌴":"䌴","⽸":"缶","𦈨":"𦈨","缾":"缾","𦉇":"𦉇","⽹":"网","⺫":"罒","⺲":"罒","⺱":"罓","䍙":"䍙","署":"署","𦋙":"𦋙","罹":"罹","罺":"罺","羅":"羅","𦌾":"𦌾","⽺":"羊","羕":"羕","羚":"羚","羽":"羽","⽻":"羽","翺":"翺","老":"老","⽼":"老","⺹":"耂","者":"者","者":"者","者":"者","⽽":"而","𦓚":"𦓚","⽾":"耒","𦔣":"𦔣","⽿":"耳","聆":"聆","聠":"聠","𦖨":"𦖨","聯":"聯","聰":"聰","聾":"聾","⾀":"聿","⺺":"肀","⾁":"肉","肋":"肋","肭":"肭","育":"育","䏕":"䏕","䏙":"䏙","腁":"胼","脃":"脃","脾":"脾","䐋":"䐋","朡":"朡","𦞧":"𦞧","𦞵":"𦞵","朦":"䑃","臘":"臘","⾂":"臣","臨":"臨","⾃":"自","臭":"臭","⾄":"至","⾅":"臼","舁":"舁","舁":"舁","舄":"舄","⾆":"舌","舘":"舘","⾇":"舛","⾈":"舟","䑫":"䑫","⾉":"艮","良":"良","⾊":"色","⾋":"艸","艹":"艹","艹":"艹","⺾":"艹","⺿":"艹","⻀":"艹","芋":"芋","芑":"芑","芝":"芝","花":"花","芳":"芳","芽":"芽","若":"若","若":"若","苦":"苦","𦬼":"𦬼","茶":"茶","荒":"荒","荣":"荣","茝":"茝","茣":"茣","莽":"莽","荓":"荓","菉":"菉","菊":"菊","菌":"菌","菜":"菜","菧":"菧","華":"華","菱":"菱","著":"著","著":"著","𦰶":"𦰶","莭":"莭","落":"落","葉":"葉","蔿":"蒍","𦳕":"𦳕","𦵫":"𦵫","蓮":"蓮","蓱":"蓱","蓳":"蓳","蓼":"蓼","蔖":"蔖","䔫":"䔫","蕤":"蕤","𦼬":"𦼬","藍":"藍","䕝":"䕝","𦾱":"𦾱","䕡":"䕡","藺":"藺","蘆":"蘆","䕫":"䕫","蘒":"蘒","蘭":"蘭","𧃒":"𧃒","虁":"蘷","蘿":"蘿","⾌":"虍","⻁":"虎","虐":"虐","虜":"虜","虜":"虜","虧":"虧","虩":"虩","⾍":"虫","蚩":"蚩","蚈":"蚈","蛢":"蛢","蜎":"蜎","蜨":"蜨","蝫":"蝫","蟡":"蟡","蝹":"蝹","蝹":"蝹","螆":"螆","䗗":"䗗","𧏊":"𧏊","螺":"螺","蠁":"蠁","䗹":"䗹","蠟":"蠟","⾎":"血","行":"行","⾏":"行","衠":"衠","衣":"衣","⾐":"衣","⻂":"衤","裂":"裂","𧙧":"𧙧","裏":"裏","裗":"裗","裞":"裞","裡":"裡","裸":"裸","裺":"裺","䘵":"䘵","褐":"褐","襁":"襁","襤":"襤","⾑":"襾","⻄":"西","⻃":"覀","覆":"覆","見":"見","⾒":"見","𧢮":"𧢮","⻅":"见","⾓":"角","⾔":"言","𧥦":"𧥦","詽":"訮","訞":"䚶","䚾":"䚾","䛇":"䛇","誠":"誠","說":"說","說":"說","調":"調","請":"請","諒":"諒","論":"論","諭":"諭","諭":"諭","諸":"諸","諸":"諸","諾":"諾","諾":"諾","謁":"謁","謁":"謁","謹":"謹","謹":"謹","識":"識","讀":"讀","讏":"讆","變":"變","變":"變","⻈":"讠","⾕":"谷","⾖":"豆","豈":"豈","豕":"豕","⾗":"豕","豣":"豜","⾘":"豸","𧲨":"𧲨","⾙":"貝","貫":"貫","賁":"賁","賂":"賂","賈":"賈","賓":"賓","贈":"贈","贈":"贈","贛":"贛","⻉":"贝","⾚":"赤","⾛":"走","起":"起","趆":"赿","𧻓":"𧻓","𧼯":"𧼯","⾜":"足","跋":"跋","趼":"趼","跺":"跥","路":"路","跰":"跰","躛":"躗","⾝":"身","車":"車","⾞":"車","軔":"軔","輧":"軿","輦":"輦","輪":"輪","輸":"輸","輸":"輸","輻":"輻","轢":"轢","⻋":"车","⾟":"辛","辞":"辞","辰":"辰","⾠":"辰","⾡":"辵","辶":"辶","⻌":"辶","⻍":"辶","巡":"巡","連":"連","逸":"逸","逸":"逸","遲":"遲","遼":"遼","𨗒":"𨗒","𨗭":"𨗭","邏":"邏","⾢":"邑","邔":"邔","郎":"郎","郞":"郎","郞":"郎","郱":"郱","都":"都","𨜮":"𨜮","鄑":"鄑","鄛":"鄛","⾣":"酉","酪":"酪","醙":"醙","醴":"醴","⾤":"釆","里":"里","⾥":"里","量":"量","金":"金","⾦":"金","鈴":"鈴","鈸":"鈸","鉶":"鉶","鋗":"鋗","鋘":"鋘","鉼":"鉼","錄":"錄","鍊":"鍊","鎮":"鎭","鏹":"鏹","鐕":"鐕","𨯺":"𨯺","⻐":"钅","⻑":"長","⾧":"長","⻒":"镸","⻓":"长","⾨":"門","開":"開","䦕":"䦕","閭":"閭","閷":"閷","𨵷":"𨵷","⻔":"门","⾩":"阜","⻏":"阝","⻖":"阝","阮":"阮","陋":"陋","降":"降","陵":"陵","陸":"陸","陼":"陼","隆":"隆","隣":"隣","䧦":"䧦","⾪":"隶","隷":"隷","隸":"隷","隸":"隷","⾫":"隹","雃":"雃","離":"離","難":"難","難":"難","⾬":"雨","零":"零","雷":"雷","霣":"霣","𩅅":"𩅅","露":"露","靈":"靈","⾭":"靑","⻘":"青","靖":"靖","靖":"靖","𩇟":"𩇟","⾮":"非","⾯":"面","𩈚":"𩈚","⾰":"革","䩮":"䩮","䩶":"䩶","⾱":"韋","韛":"韛","韠":"韠","⻙":"韦","⾲":"韭","𩐊":"𩐊","⾳":"音","響":"響","響":"響","⾴":"頁","䪲":"䪲","頋":"頋","頋":"頋","頋":"頋","領":"領","頩":"頩","𩒖":"𩒖","頻":"頻","頻":"頻","類":"類","⻚":"页","⾵":"風","𩖶":"𩖶","⻛":"风","⾶":"飛","⻜":"飞","⻝":"食","⾷":"食","⻟":"飠","飢":"飢","飯":"飯","飼":"飼","䬳":"䬳","館":"館","餩":"餩","⻠":"饣","⾸":"首","⾹":"香","馧":"馧","⾺":"馬","駂":"駂","駱":"駱","駾":"駾","驪":"驪","⻢":"马","⾻":"骨","䯎":"䯎","⾼":"高","⾽":"髟","𩬰":"𩬰","鬒":"鬒","鬒":"鬒","⾾":"鬥","⾿":"鬯","⿀":"鬲","⿁":"鬼","⻤":"鬼","⿂":"魚","魯":"魯","鱀":"鱀","鱗":"鱗","⻥":"鱼","⿃":"鳥","鳽":"鳽","䳎":"䳎","鵧":"鵧","䳭":"䳭","𪃎":"𪃎","鶴":"鶴","𪄅":"𪄅","䳸":"䳸","鷺":"鷺","𪈎":"𪈎","鸞":"鸞","鹃":"鹂","⿄":"鹵","鹿":"鹿","⿅":"鹿","𪊑":"𪊑","麗":"麗","麟":"麟","⿆":"麥","⻨":"麦","麻":"麻","⿇":"麻","𪎒":"𪎒","⿈":"黃","⻩":"黄","⿉":"黍","黎":"黎","䵖":"䵖","⿊":"黑","黒":"黑","墨":"墨","黹":"黹","⿋":"黹","⿌":"黽","鼅":"鼅","黾":"黾","⿍":"鼎","鼏":"鼏","⿎":"鼓","鼖":"鼖","⿏":"鼠","鼻":"鼻","⿐":"鼻","齃":"齃","⿑":"齊","⻬":"齐","⿒":"齒","𪘀":"𪘀","⻮":"齿","龍":"龍","⿓":"龍","龎":"龎","⻰":"龙","龜":"龜","龜":"龜","龜":"龜","⿔":"龜","⻳":"龟","⿕":"龠"}')},"6e66":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'#maincontent .expandp[data-v-60e6c210]{position:absolute;left:0;right:-.5em;top:0;bottom:0;cursor:pointer;overflow-y:hidden;z-index:3}#maincontent .expandp .etablew[data-v-60e6c210]{position:absolute;left:0;right:0;top:0;bottom:0;z-index:2}#maincontent .expandp .etable[data-v-60e6c210]{height:100%;width:100%}#maincontent .expandp .etable>div[data-v-60e6c210]{transition:.3s;opacity:0;color:rgb(var(--text-on-bg-ac-color));vertical-align:middle;text-align:center}#maincontent .expandp[data-v-60e6c210]:before{--size:0;content:"";position:absolute;left:var(--x);top:50%;width:var(--size);height:var(--size);background:radial-gradient(circle closest-side,rgba(0,24,48,.3490196078),transparent);transform:translate(-50%,-50%);transition:.3s}#maincontent .expandp:hover .etable>div[data-v-60e6c210]{opacity:1}#maincontent .expandp[data-v-60e6c210]:hover:before{--size:400px}#maincontent.bout .expandp[data-v-60e6c210]{display:none}#maincontent[data-v-60e6c210] .resize-observer{height:1px;overflow:hidden}#maincontent .headerSpacer[data-v-60e6c210]{position:static;left:0;right:0;top:0;bottom:0;padding-bottom:0;margin:0 auto;max-width:640px}#maincontent .headerSpacerWrapper[data-v-60e6c210]{position:absolute;left:0;right:0;top:calc(65px + var(--app-margin-top));bottom:0;overflow-y:auto;overflow-x:hidden}#maincontent .headerSpacerWrapperOvf[data-v-60e6c210]{position:absolute;left:0;right:0;top:0;bottom:0;overflow-y:scroll;overflow-x:hidden;overscroll-behavior:contain}#maincontent.minimized .headerSpacerWrapper[data-v-60e6c210]{top:55px}#maincontent.minimized.fix .headerSpacerWrapper[data-v-60e6c210]{overflow-y:inherit;overflow-x:inherit;top:0;bottom:56px;will-change:transform;transition:transform .3s}#maincontent.minimized.fix:not(.active):not(.unauthorized) .headerSpacerWrapperOvf[data-v-60e6c210]{-webkit-mask-image:linear-gradient(0deg,transparent 3%,#000 10%);mask-image:linear-gradient(0deg,transparent 3%,#000 10%)}#maincontent.minimized.fix[data-v-60e6c210]:not(.active):not(.unauthorized) .maskedtop{-webkit-mask-image:linear-gradient(180deg,transparent 3%,#000 10%);mask-image:linear-gradient(180deg,transparent 3%,#000 10%)}#maincontent.minimized.fix .headerSpacerWrapperOvf[data-v-60e6c210]{position:relative;width:344px;height:100%;overflow:visible;will-change:transform;transition:transform .3s}#maincontent.minimized.fix .headerSpacer[data-v-60e6c210]{position:absolute;height:100%;left:0;width:344px;padding:0;overflow-x:hidden;will-change:transform;overscroll-behavior:contain}#maincontent.minimized.fix.active .expandp[data-v-60e6c210]{display:none}#maincontent.minimized.fix.active .headerSpacerWrapper[data-v-60e6c210]{transform:translateZ(0);z-index:130}#maincontent.minimized.fix.active .headerSpacerWrapperOvf[data-v-60e6c210]{transform:translate3d(-300px,4px,0)}#maincontent.minimized.fix.active .headerSpacerWrapperOvf .headerSpacer[data-v-60e6c210]{border-radius:8px;border-top-left-radius:0;border-top-right-radius:0;background:rgb(var(--background-total-theme));border:1px solid rgba(var(--neutral-grad-2),.2);box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);right:0}.modalcommoncontent[data-v-60e6c210] .previewContact{padding-left:.75em}',""]),e.exports=t},"6f19":function(e,t,r){"use strict";var n=r("9112"),i=r("0d26"),o=r("b980"),a=Error.captureStackTrace;e.exports=function(e,t,r,s){o&&(a?a(e,t):n(e,"stack",i(r,s)))}},"6f2e":function(e,t,r){"use strict";(function(t,n){var i=r("966d");e.exports=S;var o,a=r("9bc8");S.ReadableState=w;r("faa1").EventEmitter;var s=function(e,t){return e.listeners(t).length},c=r("2aaa"),l=r("f60b").Buffer,d=("undefined"!==typeof t?t:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function u(e){return l.from(e)}function h(e){return l.isBuffer(e)||e instanceof d}var f=Object.create(r("3a7c"));f.inherits=r("3fb5");var p=r(2),v=void 0;v=p&&p.debuglog?p.debuglog("stream"):function(){};var m,g=r("9b54"),y=r("c4c0");f.inherits(S,c);var b=["error","close","destroy","pause","resume"];function _(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function w(e,t){o=o||r("d6dd"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=r("aa22").StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function S(e){if(o=o||r("d6dd"),!(this instanceof S))return new S(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function E(e,t,r,n,i){var o,a=e._readableState;null===t?(a.reading=!1,O(e,a)):(i||(o=I(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=u(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):k(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?k(e,a,t,!1):P(e,a)):k(e,a,t,!1))):n||(a.reading=!1));return C(a)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&M(e)),P(e,t)}function I(e,t){var r;return h(t)||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function C(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(S.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=y.destroy,S.prototype._undestroy=y.undestroy,S.prototype._destroy=function(e,t){this.push(null),t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=l.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},S.prototype.unshift=function(e){return E(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){return m||(m=r("aa22").StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};var T=8388608;function R(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=R(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,M(e)}}function M(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(A,e):A(e))}function A(e){v("emit readable"),e.emit("readable"),F(e)}function P(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(D,e,t))}function D(e,t){var r=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){if(v("maybeReadMore read 0"),e.read(0),r===t.length)break;r=t.length}t.readingMore=!1}function j(e){return function(){var t=e._readableState;v("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,F(e))}}function L(e){v("readable nexttick read 0"),e.read(0)}function N(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(U,e,t))}function U(e,t){t.reading||(v("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;v("flow",t.flowing);while(t.flowing&&null!==e.read());}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=K(e,t.buffer,t.decoder),r);var r}function K(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?q(e,t):V(e,t),n}function q(e,t){var r=t.head,n=1,i=r.data;e-=i.length;while(r=r.next){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),e-=a,0===e){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function V(e,t){var r=l.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;while(n=n.next){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),e-=a,0===e){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function W(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick($,t,e))}function $(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function z(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){v("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?W(this):M(this),null;if(e=x(e,t),0===e&&t.ended)return 0===t.length&&W(this),null;var n,i=t.needReadable;return v("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,v("length less than watermark",i)),t.ended||t.reading?(i=!1,v("reading or ended",i)):i&&(v("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),n=e>0?B(e,t):null,null===n?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&W(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},S.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break}o.pipesCount+=1,v("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,c=a?d:w;function l(e,t){v("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,f())}function d(){v("onend"),e.end()}o.endEmitted?i.nextTick(c):r.once("end",c),e.on("unpipe",l);var u=j(r);e.on("drain",u);var h=!1;function f(){v("cleanup"),e.removeListener("close",y),e.removeListener("finish",b),e.removeListener("drain",u),e.removeListener("error",g),e.removeListener("unpipe",l),r.removeListener("end",d),r.removeListener("end",w),r.removeListener("data",m),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u()}var p=!1;function m(t){v("ondata"),p=!1;var n=e.write(t);!1!==n||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==z(o.pipes,e))&&!h&&(v("false write response, pause",o.awaitDrain),o.awaitDrain++,p=!0),r.pause())}function g(t){v("onerror",t),w(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",b),w()}function b(){v("onfinish"),e.removeListener("close",y),w()}function w(){v("unpipe"),r.unpipe(e)}return r.on("data",m),_(e,"error",g),e.once("close",y),e.once("finish",b),e.emit("pipe",r),o.flowing||(v("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=z(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&M(this):i.nextTick(L,this))}return r},S.prototype.addListener=S.prototype.on,S.prototype.resume=function(){var e=this._readableState;return e.flowing||(v("resume"),e.flowing=!0,N(this,e)),this},S.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(v("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(v("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var o=t.push(i);o||(n=!0,e.pause())}})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){v("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),S._fromList=B}).call(this,r("c8ba"),r("4362"))},"6f45":function(t,r,i){var o,a;(function(){var i=!1,s=function(e){return e instanceof s?e:this instanceof s?void(this.EXIFwrapped=e):new s(e)};t.exports&&(r=t.exports=s),r.EXIF=s;var c=s.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},l=s.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},d=s.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},u=s.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},h=s.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function f(e){return!!e.exifdata}function p(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var r=atob(e),n=r.length,i=new ArrayBuffer(n),o=new Uint8Array(i),a=0;a<n;a++)o[a]=r.charCodeAt(a);return i}function v(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},r.send()}function m(e,t){function r(r){var n=g(r);e.exifdata=n||{};var i=y(r);if(e.iptcdata=i||{},s.isXmpEnabled){var o=T(r);e.xmpdata=o||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=p(e.src);r(n)}else if(/^blob\:/i.test(e.src)){var o=new FileReader;o.onload=function(e){r(e.target.result)},v(e.src,(function(e){o.readAsArrayBuffer(e)}))}else{var a=new XMLHttpRequest;a.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(a.response),a=null},a.open("GET",e.src,!0),a.responseType="arraybuffer",a.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){o=new FileReader;o.onload=function(e){i&&console.log("Got file of length "+e.target.result.byteLength),r(e.target.result)},o.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var r,n=2,o=e.byteLength;while(n<o){if(255!=t.getUint8(n))return i&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(r=t.getUint8(n+1),i&&console.log(r),225==r)return i&&console.log("Found 0xFFE1 marker"),C(t,n+4,t.getUint16(n+2)-2);n+=2+t.getUint16(n+2)}}function y(e){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var r=2,n=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(r<n){if(o(t,r)){var a=t.getUint8(r+7);a%2!==0&&(a+=1),0===a&&(a=4);var s=r+8+a,c=t.getUint16(r+6+a);return _(e,s,c)}r++}}var b={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function _(e,t,r){var n,i,o,a,s=new DataView(e),c={},l=t;while(l<t+r)28===s.getUint8(l)&&2===s.getUint8(l+1)&&(a=s.getUint8(l+2),a in b&&(o=s.getInt16(l+3),o+5,i=b[a],n=I(s,l+5,o),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(n):c[i]=[c[i],n]:c[i]=n)),l++;return c}function w(e,t,r,n,o){var a,s,c,l=e.getUint16(r,!o),d={};for(c=0;c<l;c++)a=r+12*c+2,s=n[e.getUint16(a,!o)],!s&&i&&console.log("Unknown tag: "+e.getUint16(a,!o)),d[s]=S(e,a,t,r,o);return d}function S(e,t,r,n,i){var o,a,s,c,l,d,u=e.getUint16(t+2,!i),h=e.getUint32(t+4,!i),f=e.getUint32(t+8,!i)+r;switch(u){case 1:case 7:if(1==h)return e.getUint8(t+8,!i);for(o=h>4?f:t+8,a=[],c=0;c<h;c++)a[c]=e.getUint8(o+c);return a;case 2:return o=h>4?f:t+8,I(e,o,h-1);case 3:if(1==h)return e.getUint16(t+8,!i);for(o=h>2?f:t+8,a=[],c=0;c<h;c++)a[c]=e.getUint16(o+2*c,!i);return a;case 4:if(1==h)return e.getUint32(t+8,!i);for(a=[],c=0;c<h;c++)a[c]=e.getUint32(f+4*c,!i);return a;case 5:if(1==h)return l=e.getUint32(f,!i),d=e.getUint32(f+4,!i),s=new Number(l/d),s.numerator=l,s.denominator=d,s;for(a=[],c=0;c<h;c++)l=e.getUint32(f+8*c,!i),d=e.getUint32(f+4+8*c,!i),a[c]=new Number(l/d),a[c].numerator=l,a[c].denominator=d;return a;case 9:if(1==h)return e.getInt32(t+8,!i);for(a=[],c=0;c<h;c++)a[c]=e.getInt32(f+4*c,!i);return a;case 10:if(1==h)return e.getInt32(f,!i)/e.getInt32(f+4,!i);for(a=[],c=0;c<h;c++)a[c]=e.getInt32(f+8*c,!i)/e.getInt32(f+4+8*c,!i);return a}}function E(e,t,r){var n=e.getUint16(t,!r);return e.getUint32(t+2+12*n,!r)}function k(e,t,r,n){var i=E(e,t+r,n);if(!i)return{};if(i>e.byteLength)return{};var o=w(e,t,t+i,u,n);if(o["Compression"])switch(o["Compression"]){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=t+o.JpegIFOffset,s=o.JpegIFByteCount;o["blob"]=new Blob([new Uint8Array(e.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o["Compression"])}else 2==o["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}function I(e,t,r){var i="";for(n=t;n<t+r;n++)i+=String.fromCharCode(e.getUint8(n));return i}function C(e,t){if("Exif"!=I(e,t,4))return i&&console.log("Not valid EXIF data! "+I(e,t,4)),!1;var r,n,o,a,s,u=t+6;if(18761==e.getUint16(u))r=!1;else{if(19789!=e.getUint16(u))return i&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;r=!0}if(42!=e.getUint16(u+2,!r))return i&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var f=e.getUint32(u+4,!r);if(f<8)return i&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(u+4,!r)),!1;if(n=w(e,u,u+f,l,r),n.ExifIFDPointer)for(o in a=w(e,u,u+n.ExifIFDPointer,c,r),a){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[o]=h[o][a[o]];break;case"ExifVersion":case"FlashpixVersion":a[o]=String.fromCharCode(a[o][0],a[o][1],a[o][2],a[o][3]);break;case"ComponentsConfiguration":a[o]=h.Components[a[o][0]]+h.Components[a[o][1]]+h.Components[a[o][2]]+h.Components[a[o][3]];break}n[o]=a[o]}if(n.GPSInfoIFDPointer)for(o in s=w(e,u,u+n.GPSInfoIFDPointer,d,r),s){switch(o){case"GPSVersionID":s[o]=s[o][0]+"."+s[o][1]+"."+s[o][2]+"."+s[o][3];break}n[o]=s[o]}return n["thumbnail"]=k(e,u,f,r),n}function T(e){if("DOMParser"in self){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var r=2,n=e.byteLength,o=new DOMParser;while(r<n-4){if("http"==I(t,r,4)){var a=r-1,s=t.getUint16(r-2)-1,c=I(t,a,s),l=c.indexOf("xmpmeta>")+8;c=c.substring(c.indexOf("<x:xmpmeta"),l);var d=c.indexOf("x:xmpmeta")+10;c=c.slice(0,d)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+c.slice(d);var u=o.parseFromString(c,"text/xml");return x(u)}r++}}}function R(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var n=e.attributes.item(r);t["@attributes"][n.nodeName]=n.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),a=o.nodeName;if(null==t[a])t[a]=R(o);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(R(o))}}return t}function x(t){try{var r={};if(t.children.length>0)for(var n=0;n<t.children.length;n++){var i=t.children.item(n),o=i.attributes;for(var a in o){var s=o[a],c=s.nodeName,l=s.nodeValue;void 0!==c&&(r[c]=l)}var d=i.nodeName;if("undefined"==typeof r[d])r[d]=R(i);else{if("undefined"==typeof r[d].push){var u=r[d];r[d]=[],r[d].push(u)}r[d].push(R(i))}}else r=t.textContent;return r}catch(e){console.log(e.message)}}s.enableXmp=function(){s.isXmpEnabled=!0},s.disableXmp=function(){s.isXmpEnabled=!1},s.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(f(e)?t&&t.call(e):m(e,t),!0)},s.getTag=function(e,t){if(f(e))return e.exifdata[t]},s.getIptcTag=function(e,t){if(f(e))return e.iptcdata[t]},s.getAllTags=function(e){if(!f(e))return{};var t,r=e.exifdata,n={};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n},s.getAllIptcTags=function(e){if(!f(e))return{};var t,r=e.iptcdata,n={};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n},s.pretty=function(e){if(!f(e))return"";var t,r=e.exifdata,n="";for(t in r)r.hasOwnProperty(t)&&("object"==typeof r[t]?r[t]instanceof Number?n+=t+" : "+r[t]+" ["+r[t].numerator+"/"+r[t].denominator+"]\r\n":n+=t+" : ["+r[t].length+" values]\r\n":n+=t+" : "+r[t]+"\r\n");return n},s.readFromBinaryFile=function(e){return g(e)},o=[],a=function(){return s}.apply(r,o),void 0===a||(t.exports=a)}).call(this)},"6ffa":function(e,t,r){"use strict";(function(t,n){var i=r("966d");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){N(t,e)}}e.exports=b;var a,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?setImmediate:i.nextTick;b.WritableState=y;var c=Object.create(r("3a7c"));c.inherits=r("3fb5");var l={deprecate:r("b7d1")},d=r("2aaa"),u=r("f60b").Buffer,h=("undefined"!==typeof n?n:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function f(e){return u.from(e)}function p(e){return u.isBuffer(e)||e instanceof h}var v,m=r("c4c0");function g(){}function y(e,t){a=a||r("d6dd"),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){R(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(e){if(a=a||r("d6dd"),!v.call(b,this)&&!(this instanceof a))return new b(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),d.call(this)}function w(e,t){var r=new Error("write after end");e.emit("error",r),i.nextTick(t,r)}function S(e,t,r,n){var o=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i.nextTick(n,a),o=!1),o}function E(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=u.from(t,r)),t}function k(e,t,r,n,i,o){if(!r){var a=E(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,s,n,i,o);return c}function I(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(j,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),j(e,t))}function T(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function R(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(T(r),t)C(e,r,n,t,i);else{var o=A(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),n?s(x,e,r,o,i):x(e,r,o,i)}}function x(e,t,r,n){r||O(e,t),t.pendingcb--,n(),j(e,t)}function O(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function M(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;var s=0,c=!0;while(r)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,I(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{while(r){var l=r.chunk,d=r.encoding,u=r.callback,h=t.objectMode?1:l.length;if(I(e,t,!1,h,l,d,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function D(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(P,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function j(e,t){var r=A(t);return r&&(D(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function L(e,t,r){t.ending=!0,j(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function N(e,t,r){var n=e.entry;e.entry=null;while(n){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}c.inherits(b,d),y.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!v.call(this,e)||this===b&&(e&&e._writableState instanceof y)}})):v=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&p(e);return o&&!u.isBuffer(e)&&(e=f(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=g),n.ended?w(this,r):(o||S(this,n,e,r))&&(n.pendingcb++,i=k(this,n,o,e,t,r)),i},b.prototype.cork=function(){var e=this._writableState;e.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||L(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r("4362"),r("c8ba"))},7018:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'body{color:#02061a;background:rgb(var(--background-total-theme))}a{text-decoration:none}select{-moz-appearance:none!important;-webkit-appearance:none!important;appearance:none!important}input{outline:none}input:focus{border:10px}.unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.loadinggradient{background:linear-gradient(-45deg,rgb(var(--background-secondary-theme)),rgb(var(--background-total-theme)),rgb(var(--background-main)));background-size:400% 400%;animation:gradient 2s ease infinite}.messagesLine{display:flex;justify-content:flex-start;align-items:center;margin:20px 0;transition:.3s}.circlePreview{width:22px;height:22px;margin:0 10px 0 0;background-color:#000;border-radius:50%;transition:.3s}.messageLine{margin:0 auto 0 0}.messageLine,.myMessageLine{border-radius:13px;height:34px;transition:.3s}.myMessageLine{margin:0 0 0 auto}.dg-container{font-family:Segoe UI Variable,Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif}.dg-container .dg-main-content{padding:1.5em;border:0;border-radius:0;background:rgb(var(--background-total-theme));color:rgb(var(--text-color))}.dg-container .dg-content-footer{overflow:hidden}.dg-container .dg-content-footer button{margin-left:.5em;display:block;float:right;font-size:1em;font-weight:400;color:rgb(var(--color-bg-ac));background:transparent;border:1px solid transparent}.dg-container .dg-content-footer button.dg-pull-right{border:1px solid rgb(var(--color-bg-ac));background:rgb(var(--color-bg-ac));color:rgb(var(--text-on-bg-ac-color))}.dg-container .dg-content-body{border:0;padding-bottom:0}.dg-container .dg-content-body .dg-content{font-size:2em;font-weight:100}@keyframes gradient{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}mark{background-color:rgb(var(--color-bg-selection))!important}mark.match{background-color:#c7c8d9!important;transition:background-color .3s}mark.current{background-color:#f2994a!important}button.button{background:rgb(var(--color-bg-ac));border:1px solid rgb(var(--color-bg-ac));color:rgb(var(--text-on-bg-ac-color));padding:1em;text-align:center;transition:.3s;min-width:200px;cursor:pointer;outline:none;text-decoration:none}button.button.small{padding:.5em 1em;min-width:150px;font-size:.8em}button.button.good{background:rgb(var(--color-good));border:1px solid rgb(var(--color-good))}@media(pointer:fine){button.button.good:hover{background:rgba(var(--color-good),.9);color:rgb(var(--text-on-bg-ac-color))}}button.button.black{background:rgb(var(--neutral-grad-0));border:1px solid rgb(var(--neutral-grad-0));color:rgb(var(--neutral-grad-3))}@media(pointer:fine){button.button.black:hover{background:rgba(var(--neutral-grad-3),.9);color:rgb(var(--text-on-bg-ac-color))}}button.button.orange{background:rgb(var(--color-bg-orange));border:1px solid rgb(var(--color-bg-orange))}@media(pointer:fine){button.button.orange:hover{background:rgba(var(--color-bg-orange),.9);color:rgb(var(--text-on-bg-ac-color))}}button.button.round{width:44px;height:44px;border-radius:50%;font-size:.8em;min-width:0;padding:0;line-height:42px}button.button.rounded{border-radius:22px}button.button.border{font-size:.8em}button.button.border,button.button.ghost{background:transparent;color:rgb(var(--color-txt-ac))}button.button.ghost{border:1px solid transparent}@media(pointer:fine){button.button.ghost:hover{color:rgb(var(--color-txt-gray))}}@media(pointer:fine){button.button:hover{background:transparent;color:rgb(var(--color-txt-ac))}}button.button.underscored{text-decoration:underline}button.button.badbutton{background:transparent;border:1px solid transparent;font-weight:500;color:rgb(var(--color-bad))}button.button[disabled=disabled]{cursor:default}button.button[disabled=disabled],button.button[disabled=disabled]:hover{background:rgb(var(--neutral-grad-2));border-color:rgb(var(--neutral-grad-2))}button.button[disabled=disabled]:hover{color:#fff}.rootcontent.pip *{transform:none!important}.rootcontent.pip .js-player #vjs-forward-button,.rootcontent.pip .js-player #vjs-rewind-button,.rootcontent.pip .js-player .vjs-big-play-button,.rootcontent.pip .js-player .vjs-control-bar,.rootcontent.pip .js-player .vjs-overlay{display:none!important}.iconbuttonRound{width:44px;height:44px;line-height:42px;text-align:center;cursor:pointer;color:rgb(var(--color-txt-ac));font-size:.9em;border-radius:50%;transition:.3s}@media(pointer:fine){.iconbuttonRound:hover{color:rgb(var(--neutral-grad-4))}}.iconbuttonRound.second{background:rgb(var(--neutral-grad-2))}@media(pointer:fine){.iconbuttonRound.second:hover{color:rgb(var(--color-txt-ac))}}.iconbuttonRound.bright{color:rgb(var(--text-on-bg-ac-color));background:rgb(var(--color-txt-ac))}@media(pointer:fine){.iconbuttonRound.bright:hover{color:rgb(var(--color-txt-ac-1))}}.iconbuttonsmall{cursor:pointer;color:rgb(var(--color-txt-ac));text-align:center;transition:.3s}.iconbuttonsmall i{font-size:.8em}@media(pointer:fine){.iconbuttonsmall:hover{color:rgb(var(--neutral-grad-3))}}.iconbutton{cursor:pointer;color:rgb(var(--color-txt-ac));text-align:center;transition:.3s}@media(pointer:fine){.iconbutton:hover{color:rgb(var(--neutral-grad-3))}}.closecsscross{position:relative;width:64px;height:64px;opacity:.5;margin:0 auto}.closecsscross:after,.closecsscross:before{position:absolute;left:32px;content:" ";height:64px;width:1px;background-color:rgb(var(--neutral-grad-1))}.closecsscross:before{transform:rotate(45deg)}.closecsscross:after{transform:rotate(-45deg)}.fademodal-enter-active,.fademodal-enter-active .modal,.fademodal-leave-active,.fademodal-leave-active .modal,.slideDownModal-enter-active,.slideDownModal-enter-active .modal,.slideDownModal-leave-active,.slideDownModal-leave-active .modal{transition:.3s}.fademodal-enter,.fademodal-leave-to{opacity:0}.fademodal-enter .modal,.fademodal-leave-to .modal{transform:translateY(100%)}.slideDownModal-enter .modal,.slideDownModal-leave-to .modal{transform:translateY(-100%)}.internalpocketnetlink a,.internalpocketnetlink b{cursor:pointer;display:block;text-align:center;padding:1.5em;font-size:.8em;background:rgba(var(--neutral-grad-2),.1);color:rgb(var(--neutral-grad-3));border-radius:5px}.emojione,.joypixels{height:16px}.rootcontent{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Segoe UI Variable,Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;color:rgb(var(--text-color));font-size:1.1em}.rootcontent *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.rootcontent .dmdv{width:1px;height:1px;opacity:0;background:rgb(var(--background-total-theme))}.rootcontent.mobile,.rootcontent.unselect{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.rootcontent *{scrollbar-width:none}.rootcontent ::-webkit-scrollbar{width:0!important}.rootcontent .backface{position:fixed;left:100%;top:100%;bottom:-1%;right:-1%;transition:background .3s;background:transparent}.rootcontent .chatwrapper,.rootcontent .chatwrapper .main-wrapper{position:absolute;left:0;right:0;top:0;bottom:0}.rootcontent.fix{font-size:.9em}.rootcontent.fix .chatwrapper{transition:.3s;position:fixed;width:340px;top:70px;left:auto;right:.5em;bottom:.5em;z-index:1000}.rootcontent.fix .likeoffline{bottom:103px}.rootcontent.fix.minimized #modal .work,.rootcontent.fix.minimized .page .work{transition:.3s}.rootcontent.fix.minimized .work{padding:0}.rootcontent.fix.minimized #modal .work{padding:0 .5em}.rootcontent.fix.minimized .chatwrapper{width:44px}.rootcontent.fix.minimized:not(.active) .likeoffline,.rootcontent.fix.minimized:not(.active) .offline{background:transparent}.rootcontent.fix.minimized:not(.active) .likeoffline .table>div .icon,.rootcontent.fix.minimized:not(.active) .offline .table>div .icon{font-size:.8em;padding:0}.rootcontent.fix.minimized.active .page .work{padding:0 .25em}.rootcontent.fix.minimized.active .backface{top:0;bottom:0;right:0;left:0}.rootcontent .likeoffline,.rootcontent .offline{color:rgb(var(--neutral-grad-1));background:rgb(var(--background-secondary-theme))}.rootcontent .likeoffline .table,.rootcontent .offline .table{width:100%;height:100%}.rootcontent .likeoffline .table>div,.rootcontent .offline .table>div{vertical-align:middle;text-align:center;padding-bottom:45%}.rootcontent .likeoffline .table>div .icon,.rootcontent .offline .table>div .icon{font-size:2.3em;padding:.5em;color:rgb(var(--color-bg-ac))}.rootcontent .likeoffline .table>div .label,.rootcontent .offline .table>div .label{font-size:1em;padding:0 4em}.rootcontent .likeoffline{background:transparent}.rootcontent .fixedallwrapper,.rootcontent .fixedallwrapperDisplayed,.rootcontent .preloaderWrapper{position:absolute;left:0;right:0;top:0;bottom:0;z-index:998;transition:.3s}.rootcontent .fixedallwrapperDisplayed{background:rgb(var(--background-total-theme))}.rootcontent .fixedOnPageBottom,.rootcontent .fixedOnPageTop{transition:.3s}.rootcontent .fade-in-right-enter-to .fixedallwrapper,.rootcontent .fade-in-right-enter-to .fixedOnPageBottom,.rootcontent .fade-in-right-enter-to .fixedOnPageTop,.rootcontent .fade-in-right-enter-to .preloaderWrapper,.rootcontent .fade-in-right-enter .fixedallwrapper,.rootcontent .fade-in-right-enter .fixedOnPageBottom,.rootcontent .fade-in-right-enter .fixedOnPageTop,.rootcontent .fade-in-right-enter .preloaderWrapper,.rootcontent .fade-in-right-leave-to .fixedallwrapper,.rootcontent .fade-in-right-leave-to .fixedOnPageBottom,.rootcontent .fade-in-right-leave-to .fixedOnPageTop,.rootcontent .fade-in-right-leave-to .preloaderWrapper{opacity:0}.rootcontent .content{padding-top:66px}.rootcontent .work{padding:0 .5em;margin:0 auto;max-width:640px}.rootcontent .pwork{max-width:640px;background:transparent;margin:0 auto;padding:0 4em}.rootcontent .effects{position:fixed;left:0;top:0;bottom:0;right:0;z-index:2020}.rootcontent .speechWrapper{position:fixed;left:0;bottom:0;padding-bottom:2em;right:0;z-index:2000;height:80px}.rootcontent .speechWrapper .speechAbsWrapper{position:relative;width:100%;height:100%}.rootcontent .emptyRec{padding:10em 2em;text-align:center;font-size:.8em}.rootcontent .enablevoice .forbutton{margin-top:2em}.table{display:table;table-layout:fixed;width:100%}.table>div{display:table-cell}.m-message-container.is-bottom-right{padding:0;right:56px;bottom:.75em;width:auto}.m-message-container.is-top-left{top:calc(.5em + var(--app-margin-top))}.notificationWrapper{display:block;max-width:none;font-family:Segoe UI Variable,Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif}.notificationWrapper.m-message-wrapper+.m-message-wrapper{margin-top:.5em}.notificationWrapper .m-message{padding:.5em .5em;border:1px solid rgba(var(--neutral-grad-0),.9);border-radius:5px;box-shadow:none;background:rgb(var(--background-secondary-theme));font-size:1em}.notificationWrapper .m-message--title{font-weight:700;color:rgb(var(--color-txt-gray-dark));font-size:.8em}.notificationWrapper .m-message--title:first-letter{text-transform:capitalize}.notificationWrapper .m-message--description{margin-top:0}.notificationWrapper .m-message-content{flex-grow:1}.notificationWrapper .m-message-content .listPreview{cursor:pointer}.notificationWrapper .m-message-content .listPreview .invitedEvent{width:180px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:flex;justify-content:space-between;align-items:center}.notificationWrapper .m-message-content .listPreview .invitedEvent span{display:block;font-size:.8em}.notificationWrapper .m-message-content .listPreview .invitedEvent .txt{color:rgb(var(--color-txt-gray-dark))}.notificationWrapper .m-message-content .listPreview .invitedEvent .txtNew{color:rgb(var(--color-good))}.notificationWrapper .m-message-content .listPreview .linkPreview span:first-letter{text-transform:uppercase}.notificationWrapper .m-message-content .listPreview .linkPreview .senderName{font-weight:700;color:rgb(var(--color-txt-gray-dark))}.notificationWrapper .m-message-content .listPreview .linkPreview .linkTitle{color:#707070}.notificationWrapper .m-message-content .listPreview .linkPreview .pocketnetLink{color:rgb(var(--color-txt-gray-dark))}.notificationWrapper .m-message-content .listPreview .previewMessageList span{color:rgb(var(--color-txt-gray-dark));text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left}.notificationWrapper .m-message-content .listPreview .previewMessage{display:flex;justify-content:flex-start;align-items:center;width:100%}.notificationWrapper .m-message-content .listPreview .previewMessage label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.notificationWrapper .m-message-content .listPreview .previewMessage span{display:block;color:rgb(var(--color-txt-gray-dark));font-size:.8em;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left;max-width:150px}.notificationWrapper .m-message-icons{float:none}.notificationWrapper .m-message--icon{display:block;vertical-align:top}.notificationWrapper .m-message--button.m-message--arrow-down{display:none}.is-top-left{padding:.5em}.is-top-left .notificationWrapper{width:100%;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}@media only screen and (max-width:640px){#app{width:100%}#app .pwork{padding:0 .5em}#app .work{padding:0 .5em 10px}}.collapse{max-width:768px;margin:0 auto;position:relative;z-index:999;padding:.5em 0}.collapse .iconbutton{width:50px;margin-left:auto;color:grey}@media(pointer:fine){.collapse .iconbutton{opacity:.5}.collapse .iconbutton:hover{opacity:1}}.collapsed{display:flex;justify-content:space-between;padding:1em 0;max-width:768px;margin:auto}.angle{display:flex;justify-content:center;width:50px;cursor:pointer}.expand{margin-right:.5em}.bout .collapse{display:none}.resize-observer{position:absolute;right:-20000px}.pswp__img{-o-object-fit:contain;object-fit:contain}.vue-js-switch{display:inline-block;position:relative;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:10px;cursor:pointer}.vue-js-switch .v-switch-input{opacity:0;position:absolute;width:1px;height:1px}.vue-js-switch .v-switch-label{position:absolute;top:0;font-weight:600;color:#fff;z-index:1}.vue-js-switch .v-switch-label.v-left{left:10px}.vue-js-switch .v-switch-label.v-right{right:10px}.vue-js-switch .v-switch-core{display:block;position:relative;box-sizing:border-box;outline:0;margin:0;transition:border-color .3s,background-color .3s;-webkit-user-select:none;-moz-user-select:none;user-select:none}.vue-js-switch .v-switch-core .v-switch-button{display:block;position:absolute;overflow:hidden;top:0;left:0;border-radius:100%;background-color:rgb(var(--background-total-theme));z-index:2}.vue-js-switch.disabled{pointer-events:none;opacity:.6}.unseenupic{position:absolute;width:22px;height:22px;right:-10%;bottom:-10%;background:rgba(var(--color-bg-ac),.9);line-height:22px;text-align:center;font-weight:500;border-radius:50%;z-index:5;font-size:.6em;color:rgb(var(--text-on-bg-ac-color))}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}',""]),e.exports=t},7037:function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},7156:function(e,t,r){"use strict";var n=r("1626"),i=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var a,s;return o&&n(a=t.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(e,s),e}},"71c9":function(t,r,n){"use strict";var i=n("00ce"),o=i("%Object.defineProperty%",!0)||!1;if(o)try{o({},"a",{value:1})}catch(e){o=!1}t.exports=o},7234:function(e,t,r){"use strict";e.exports=function(e){return null===e||void 0===e}},7282:function(e,t,r){"use strict";var n=r("e330"),i=r("59ed");e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(error){}}},"72aa":function(e,t,r){var n=r("3fb5"),i=r("a255"),o=r("b672"),a=r("8707").Buffer,s=new Array(64);function c(){this.init(),this._w=s,o.call(this,64,56)}n(c,i),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=a.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},"72b3":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return f}));var n,i=r("c973"),o=r.n(i),a=r("9523"),s=r.n(a),c=r("936a"),l=r("3838"),d=r("5b5f");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(function(e){e["LocalStreamsChanged"]="local_streams_changed"})(n||(n={}));class f extends c["b"]{constructor(e){super(),this.client=e,s()(this,"audioInput",void 0),s()(this,"audioSettings",void 0),s()(this,"videoInput",void 0),s()(this,"localUserMediaStream",void 0),s()(this,"userMediaStreams",[]),s()(this,"screensharingStreams",[]),s()(this,"getMediaStreamPromise",void 0)}restoreMediaSettings(e,t){this.audioInput=e,this.videoInput=t}setAudioInput(e){var t=this;return o()((function*(){d["b"].info("MediaHandler setAudioInput() running (deviceId=".concat(e,")")),t.audioInput!==e&&(t.audioInput=e,yield t.updateLocalUsermediaStreams())}))()}setAudioSettings(e){var t=this;return o()((function*(){d["b"].info("MediaHandler setAudioSettings() running (opts=".concat(JSON.stringify(e),")")),t.audioSettings=Object.assign({},e),yield t.updateLocalUsermediaStreams()}))()}setVideoInput(e){var t=this;return o()((function*(){d["b"].info("MediaHandler setVideoInput() running (deviceId=".concat(e,")")),t.videoInput!==e&&(t.videoInput=e,yield t.updateLocalUsermediaStreams())}))()}setMediaInputs(e,t){var r=this;return o()((function*(){d["b"].log("MediaHandler setMediaInputs() running (audioInput: ".concat(e," videoInput: ").concat(t,")")),r.audioInput=e,r.videoInput=t,yield r.updateLocalUsermediaStreams()}))()}updateLocalUsermediaStreams(){var e=this;return o()((function*(){if(0!==e.userMediaStreams.length){var t=new Map;for(var r of e.client.callEventHandler.calls.values())t.set(r.callId,{audio:r.hasLocalUserMediaAudioTrack,video:r.hasLocalUserMediaVideoTrack});for(var i of e.userMediaStreams)for(var o of(d["b"].log("MediaHandler updateLocalUsermediaStreams() stopping all tracks (streamId=".concat(i.id,")")),i.getTracks()))o.stop();for(var a of(e.userMediaStreams=[],e.localUserMediaStream=void 0,e.client.callEventHandler.calls.values()))if(!a.callHasEnded()&&t.has(a.callId)){var{audio:s,video:c}=t.get(a.callId);d["b"].log("MediaHandler updateLocalUsermediaStreams() calling getUserMediaStream() (callId=".concat(a.callId,")"));var u=yield e.getUserMediaStream(s,c);a.callHasEnded()||(yield a.updateLocalUsermediaStream(u))}for(var h of e.client.groupCallEventHandler.groupCalls.values())if(h.localCallFeed){d["b"].log("MediaHandler updateLocalUsermediaStreams() calling getUserMediaStream() (groupCallId=".concat(h.groupCallId,")"));var f=yield e.getUserMediaStream(!0,h.type===l["g"].Video);h.state!==l["e"].Ended&&(yield h.updateLocalUsermediaStream(f))}e.emit(n.LocalStreamsChanged)}}))()}hasAudioDevice(){return o()((function*(){try{var e=yield navigator.mediaDevices.enumerateDevices();return e.filter(e=>"audioinput"===e.kind).length>0}catch(t){return d["b"].log("MediaHandler hasAudioDevice() calling navigator.mediaDevices.enumerateDevices with error",t),!1}}))()}hasVideoDevice(){return o()((function*(){try{var e=yield navigator.mediaDevices.enumerateDevices();return e.filter(e=>"videoinput"===e.kind).length>0}catch(t){return d["b"].log("MediaHandler hasVideoDevice() calling navigator.mediaDevices.enumerateDevices with error",t),!1}}))()}getUserMediaStream(e,t){var r=arguments,n=this;return o()((function*(){var i=!(r.length>2&&void 0!==r[2])||r[2];return n.getMediaStreamPromise?n.getMediaStreamPromise=n.getMediaStreamPromise.then(()=>n.getUserMediaStreamInternal(e,t,i)):n.getMediaStreamPromise=n.getUserMediaStreamInternal(e,t,i),n.getMediaStreamPromise}))()}getUserMediaStreamInternal(e,t,r){var i=this;return o()((function*(){var o,a,s,c,l,u=e&&(yield i.hasAudioDevice()),h=t&&(yield i.hasVideoDevice()),f=!0;i.localUserMediaStream?(u!==i.localUserMediaStream.getAudioTracks().length>0&&(f=!1),h!==i.localUserMediaStream.getVideoTracks().length>0&&(f=!1),u&&(null===(a=i.localUserMediaStream.getAudioTracks()[0])||void 0===a||null===(s=a.getSettings())||void 0===s?void 0:s.deviceId)!==i.audioInput&&(f=!1),h&&(null===(c=i.localUserMediaStream.getVideoTracks()[0])||void 0===c||null===(l=c.getSettings())||void 0===l?void 0:l.deviceId)!==i.videoInput&&(f=!1)):f=!1;if(f){var p;if(o=i.localUserMediaStream.clone(),d["b"].log("MediaHandler getUserMediaStreamInternal() cloning (oldStreamId=".concat(null===(p=i.localUserMediaStream)||void 0===p?void 0:p.id," newStreamId=").concat(o.id," shouldRequestAudio=").concat(u," shouldRequestVideo=").concat(h,")")),!u)for(var v of o.getAudioTracks())o.removeTrack(v);if(!h)for(var m of o.getVideoTracks())o.removeTrack(m)}else{var g=i.getUserMediaContraints(u,h);for(var y of(o=yield navigator.mediaDevices.getUserMedia(g),d["b"].log("MediaHandler getUserMediaStreamInternal() calling getUserMediaStream (streamId=".concat(o.id,", shouldRequestAudio=").concat(u,", shouldRequestVideo=").concat(h,", constraints=").concat(JSON.stringify(g),")")),o.getTracks())){var b=y.getSettings();"audio"===y.kind?i.audioInput=b.deviceId:"video"===y.kind&&(i.videoInput=b.deviceId)}r&&(i.localUserMediaStream=o)}return r&&i.userMediaStreams.push(o),i.emit(n.LocalStreamsChanged),o}))()}stopUserMediaStream(e){for(var t of(d["b"].log("MediaHandler stopUserMediaStream() stopping (streamId=".concat(e.id,")")),e.getTracks()))t.stop();var r=this.userMediaStreams.indexOf(e);if(-1!==r&&(d["b"].debug("MediaHandler stopUserMediaStream() splicing usermedia stream out stream array (streamId=".concat(e.id,")"),e.id),this.userMediaStreams.splice(r,1)),this.emit(n.LocalStreamsChanged),this.localUserMediaStream===e)this.localUserMediaStream=void 0;else for(var i of e.getTracks()){var o;if(null!==(o=this.localUserMediaStream)&&void 0!==o&&o.getTrackById(i.id)){this.stopUserMediaStream(this.localUserMediaStream);break}}}getScreensharingStream(){var e=arguments,t=this;return o()((function*(){var r,i=e.length>0&&void 0!==e[0]?e[0]:{},o=!(e.length>1&&void 0!==e[1])||e[1];if(0===t.screensharingStreams.length){var a=t.getScreenshareContraints(i);i.desktopCapturerSourceId?(d["b"].debug("MediaHandler getScreensharingStream() calling getUserMedia() (opts=".concat(JSON.stringify(i),")")),r=yield navigator.mediaDevices.getUserMedia(a)):(d["b"].debug("MediaHandler getScreensharingStream() calling getDisplayMedia() (opts=".concat(JSON.stringify(i),")")),r=yield navigator.mediaDevices.getDisplayMedia(a))}else{var s=t.screensharingStreams[t.screensharingStreams.length-1];d["b"].log("MediaHandler getScreensharingStream() cloning (streamId=".concat(s.id,")")),r=s.clone()}return o&&t.screensharingStreams.push(r),t.emit(n.LocalStreamsChanged),r}))()}stopScreensharingStream(e){for(var t of(d["b"].debug("MediaHandler stopScreensharingStream() stopping stream (streamId=".concat(e.id,")")),e.getTracks()))t.stop();var r=this.screensharingStreams.indexOf(e);-1!==r&&(d["b"].debug("MediaHandler stopScreensharingStream() splicing stream out (streamId=".concat(e.id,")")),this.screensharingStreams.splice(r,1)),this.emit(n.LocalStreamsChanged)}stopAllStreams(){for(var e of this.userMediaStreams)for(var t of(d["b"].log("MediaHandler stopAllStreams() stopping (streamId=".concat(e.id,")")),e.getTracks()))t.stop();for(var r of this.screensharingStreams)for(var i of r.getTracks())i.stop();this.userMediaStreams=[],this.screensharingStreams=[],this.localUserMediaStream=void 0,this.emit(n.LocalStreamsChanged)}getUserMediaContraints(e,t){var r=!!navigator.webkitGetUserMedia,n=navigator.mediaDevices.getSupportedConstraints(),i={video:{facingMode:n.facingMode?"user":"environment"}};return{audio:!!e&&{deviceId:this.audioInput?{ideal:this.audioInput}:void 0,autoGainControl:this.audioSettings?{ideal:this.audioSettings.autoGainControl}:void 0,echoCancellation:this.audioSettings?{ideal:this.audioSettings.echoCancellation}:void 0,noiseSuppression:this.audioSettings?{ideal:this.audioSettings.noiseSuppression}:void 0},video:!!t&&h({deviceId:this.videoInput?{ideal:this.videoInput}:void 0,width:r?{exact:640}:{ideal:640},height:r?{exact:360}:{ideal:360}},i.video)}}getScreenshareContraints(e){var{desktopCapturerSourceId:t,audio:r}=e;return t?{audio:null!==r&&void 0!==r&&r,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t}}}:{audio:null!==r&&void 0!==r&&r,video:!0}}}},7322:function(e,t){function r(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,a=(e[o]||0)+1;e[o]=a,a>=r&&(t=i,r=a)}return t}},7368:function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.PollEndEvent=void 0;var o=n("8c1e"),a=n("2c89"),s=n("dbfa"),c=n("d3d5"),l=n("6682"),d=n("4a30"),u=n("9e84");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){var t=S();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=function(e){g(r,e);var t=b(r);function r(e){var n;p(this,r),n=t.call(this,e),k(w(n),"pollEventId",void 0),k(w(n),"closingMessage",void 0);var i=n.wireContent["m.relates_to"];if(!s.REFERENCE_RELATION.matches(null===i||void 0===i?void 0:i.rel_type)||"string"!==typeof(null===i||void 0===i?void 0:i.event_id))throw new a.InvalidEventError("Relationship must be a reference to an event");return n.pollEventId=i.event_id,n.closingMessage=new c.MessageEvent(n.wireFormat),n}return m(r,[{key:"isEquivalentTo",value:function(e){return(0,d.isEventTypeSame)(e,o.M_POLL_END)}},{key:"serialize",value:function(){return{type:o.M_POLL_END.name,content:f(k({"m.relates_to":{rel_type:s.REFERENCE_RELATION.name,event_id:this.pollEventId}},o.M_POLL_END.name,{}),this.closingMessage.serialize().content)}}}],[{key:"from",value:function(e,t){var n;return new r({type:o.M_POLL_END.name,content:(n={"m.relates_to":{rel_type:s.REFERENCE_RELATION.name,event_id:e}},k(n,o.M_POLL_END.name,{}),k(n,l.M_TEXT.name,t),n)})}}]),r}(u.ExtensibleEvent);r.PollEndEvent=I},7418:function(e,t,r){"use strict";t.f=Object.getOwnPropertySymbols},7450:function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.PollStartEvent=r.PollAnswerSubevent=void 0;var o=n("8c1e"),a=n("d3d5"),s=n("6682"),c=n("2c89"),l=n("d308"),d=n("4a30"),u=n("9e84");function h(e){return m(e)||v(e)||p(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function v(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function I(e){var t=R();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){E(r,e);var t=I(r);function r(e){var n;_(this,r),n=t.call(this,e),O(T(n),"id",void 0);var i=e.content.id;if(!i||"string"!==typeof i)throw new c.InvalidEventError("Answer ID must be a non-empty string");return n.id=i,n}return S(r,[{key:"serialize",value:function(){return{type:"org.matrix.sdk.poll.answer",content:b({id:this.id},this.serializeMMessageOnly())}}}],[{key:"from",value:function(e,t){return new r({type:"org.matrix.sdk.poll.answer",content:O({id:e},s.M_TEXT.name,t)})}}]),r}(a.MessageEvent);r.PollAnswerSubevent=M;var A=function(e){E(r,e);var t=I(r);function r(e){var n;_(this,r),n=t.call(this,e),O(T(n),"question",void 0),O(T(n),"kind",void 0),O(T(n),"rawKind",void 0),O(T(n),"maxSelections",void 0),O(T(n),"answers",void 0);var i=o.M_POLL_START.findIn(n.wireContent);if(!i.question)throw new c.InvalidEventError("A question is required");if(n.question=new a.MessageEvent({type:"org.matrix.sdk.poll.question",content:i.question}),n.rawKind=i.kind,o.M_POLL_KIND_DISCLOSED.matches(n.rawKind)?n.kind=o.M_POLL_KIND_DISCLOSED:n.kind=o.M_POLL_KIND_UNDISCLOSED,n.maxSelections=Number.isFinite(i.max_selections)&&i.max_selections>0?i.max_selections:1,!Array.isArray(i.answers))throw new c.InvalidEventError("Poll answers must be an array");var s=i.answers.slice(0,20).map((function(e){return new M({type:"org.matrix.sdk.poll.answer",content:e})}));if(s.length<=0)throw new c.InvalidEventError("No answers available");return n.answers=s,n}return S(r,[{key:"isEquivalentTo",value:function(e){return(0,d.isEventTypeSame)(e,o.M_POLL_START)}},{key:"serialize",value:function(){var e;return{type:o.M_POLL_START.name,content:(e={},O(e,o.M_POLL_START.name,{question:this.question.serialize().content,kind:this.rawKind,max_selections:this.maxSelections,answers:this.answers.map((function(e){return e.serialize().content}))}),O(e,s.M_TEXT.name,"".concat(this.question.text,"\n").concat(this.answers.map((function(e,t){return"".concat(t+1,". ").concat(e.text)})).join("\n"))),e)}}}],[{key:"from",value:function(e,t,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new r({type:o.M_POLL_START.name,content:(i={},O(i,s.M_TEXT.name,e),O(i,o.M_POLL_START.name,{question:O({},s.M_TEXT.name,e),kind:n instanceof l.NamespacedValue?n.name:n,max_selections:a,answers:t.map((function(e){return O({id:D()},s.M_TEXT.name,e)}))}),i)})}}]),r}(u.ExtensibleEvent);r.PollStartEvent=A;var P="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function D(){return h(Array(16)).map((function(){return P.charAt(Math.floor(Math.random()*P.length))})).join("")}},"75bd":function(e,t,r){"use strict";var n=r("cfe9"),i=r("4625"),o=r("b620"),a=n.ArrayBuffer,s=a&&a.prototype,c=s&&i(s.slice);e.exports=function(e){if(0!==o(e))return!1;if(!c)return!1;try{return c(e,0,0),!1}catch(error){return!0}}},"75c9":function(t,r,n){"use strict";n.r(r),function(t){n.d(r,"OLM_ALGORITHM",(function(){return m})),n.d(r,"MEGOLM_ALGORITHM",(function(){return g})),n.d(r,"MEGOLM_BACKUP_ALGORITHM",(function(){return y})),n.d(r,"encryptMessageForDevice",(function(){return b})),n.d(r,"getExistingOlmSessions",(function(){return w})),n.d(r,"ensureOlmSessionsForDevices",(function(){return E})),n.d(r,"verifySignature",(function(){return T})),n.d(r,"pkSign",(function(){return x})),n.d(r,"pkVerify",(function(){return O})),n.d(r,"isOlmEncrypted",(function(){return M}));var i,o=n("9523"),a=n.n(o),s=n("c973"),c=n.n(s),l=n("d190"),d=n.n(l),u=n("5b5f"),h=n("60af"),f=n("b83f");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(function(e){e["Olm"]="m.olm.v1.curve25519-aes-sha2",e["Megolm"]="m.megolm.v1.aes-sha2",e["MegolmBackup"]="m.megolm_backup.v1.curve25519-aes-sha2"})(i||(i={}));var m=i.Olm,g=i.Megolm,y=i.MegolmBackup;function b(e,t,r,n,i,o,a){return _.apply(this,arguments)}function _(){return _=c()((function*(e,t,r,n,i,o,a){var s=o.getIdentityKey(),c=yield n.getSessionIdForDevice(s);if(null!==c){u["b"].log("[olmlib.encryptMessageForDevice] Using Olm session ".concat(c," for device ")+"".concat(i,":").concat(o.deviceId));var l=v({sender:t,sender_device:r,keys:{ed25519:n.deviceEd25519Key},recipient:i,recipient_keys:{ed25519:o.getFingerprint()}},a);e[s]=yield n.encryptMessage(s,c,JSON.stringify(l))}else u["b"].log("[olmlib.encryptMessageForDevice] Unable to find Olm session for device "+"".concat(i,":").concat(o.deviceId))})),_.apply(this,arguments)}function w(e,t,r){return S.apply(this,arguments)}function S(){return S=c()((function*(e,t,r){var n=new f["b"](()=>[]),i=new f["b"](()=>new Map),o=[],a=function*(t){var r=function*(r){var a=r.deviceId,s=r.getIdentityKey();o.push(c()((function*(){var o=yield e.getSessionIdForDevice(s,!0);null===o?n.getOrCreate(t).push(r):i.getOrCreate(t).set(a,{device:r,sessionId:o})}))())};for(var a of l)yield*r(a)};for(var[s,l]of Object.entries(r))yield*a(s);return yield Promise.all(o),[n,i]})),S.apply(this,arguments)}function E(e,t,r){return k.apply(this,arguments)}function k(){return k=c()((function*(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u["b"],c=[],l=new Map,d=new Map;for(var h of n.values()){var f=function*(){var e=p.getIdentityKey();if(e===t.deviceCurve25519Key)return"continue";t.sessionsInProgress[e]||(t.sessionsInProgress[e]=new Promise(r=>{d.set(e,n=>{delete t.sessionsInProgress[e],r(n)})}))};for(var p of h)yield*f()}for(var[v,m]of n){var g=new Map;for(var y of(l.set(v,g),m)){var b=y.deviceId,_=y.getIdentityKey();if(_!==t.deviceCurve25519Key){var w="for ".concat(_," (").concat(v,":").concat(b,")"),S=yield t.getSessionIdForDevice(_,!!d.get(_),s),E=d.get(_);null!==S&&E&&E(),(null===S||i)&&(i?s.info("Forcing new Olm session ".concat(w)):s.info("Making new Olm session ".concat(w)),c.push([v,b])),g.set(b,{device:y,sessionId:S})}else s.info("Attempted to start session with ourself! Ignoring"),g.set(b,{device:y,sessionId:null})}}if(0===c.length)return l;var k,C="signed_curve25519",T="one-time keys for ".concat(c.length," devices");try{s.debug("Claiming ".concat(T)),k=yield r.claimOneTimeKeys(c,C,o),s.debug("Claimed ".concat(T))}catch(e){for(var R of d.values())R();throw s.debug("Failed to claim ".concat(T),e,c),e}a&&"failures"in k&&a.push(...Object.keys(k.failures));var x=k.one_time_keys||{},O=[],M=function*(e){var r=x[e]||{},n=function*(){var n,a,c=o.deviceId,u=o.getIdentityKey();if(u===t.deviceCurve25519Key)return"continue";if(null!==(n=l.get(e))&&void 0!==n&&null!==(a=n.get(c))&&void 0!==a&&a.sessionId&&!i)return"continue";var h,f=r[c]||{},p=null;for(var v in f)0===v.indexOf(C+":")&&(p=f[v]);if(!p)return s.warn("No one-time keys (alg=".concat(C,") ")+"for device ".concat(e,":").concat(c)),null===(h=d.get(u))||void 0===h||h(),"continue";O.push(I(t,p,e,o).then(t=>{var r,n;null===(r=d.get(u))||void 0===r||r(null!==t&&void 0!==t?t:void 0);var i=null===(n=l.get(e))||void 0===n?void 0:n.get(c);i&&(i.sessionId=t)},e=>{var t;throw null===(t=d.get(u))||void 0===t||t(),e}))};for(var o of P)yield*n()};for(var[A,P]of n)yield*M(A);return T="Olm sessions for ".concat(O.length," devices"),s.debug("Starting ".concat(T)),yield Promise.all(O),s.debug("Started ".concat(T)),l})),k.apply(this,arguments)}function I(e,t,r,n){return C.apply(this,arguments)}function C(){return C=c()((function*(t,r,n,i){var o,a=i.deviceId;try{yield T(t,r,n,a,i.getFingerprint())}catch(e){return u["b"].error("Unable to verify signature on one-time key for device "+n+":"+a+":",e),null}try{o=yield t.createOutboundSession(i.getIdentityKey(),r.key)}catch(e){return u["b"].error("Error starting olm session with device "+n+":"+a+": "+e),null}return u["b"].log("Started new olm sessionid "+o+" for device "+n+":"+a),o})),C.apply(this,arguments)}function T(e,t,r,n,i){return R.apply(this,arguments)}function R(){return R=c()((function*(e,t,r,n,i){var o="ed25519:"+n,a=t.signatures||{},s=a[r]||{},c=s[o];if(!c)throw Error("No signature");var l=Object.assign({},t);"unsigned"in l&&delete l.unsigned,delete l.signatures;var u=d.a.stringify(l);e.verifySignature(i,u,c)})),R.apply(this,arguments)}function x(e,r,n,i){var o=!1;if(r instanceof Uint8Array){var a=new t.Olm.PkSigning;i=a.init_with_seed(r),r=a,o=!0}var s=e.signatures||{};delete e.signatures;var c=e.unsigned;e.unsigned&&delete e.unsigned;try{var l=s[n]||{};return s[n]=l,l["ed25519:"+i]=r.sign(d.a.stringify(e))}finally{e.signatures=s,c&&(e.unsigned=c),o&&r.free()}}function O(e,r,n){var i="ed25519:"+r;if(!(e.signatures&&e.signatures[n]&&e.signatures[n][i]))throw new Error("No signature");var o=e.signatures[n][i],a=new t.Olm.Utility,s=e.signatures;delete e.signatures;var c=e.unsigned;e.unsigned&&delete e.unsigned;try{a.ed25519_verify(r,d.a.stringify(e),o)}finally{e.signatures=s,c&&(e.unsigned=c),a.free()}}function M(e){return e.getSenderKey()?!(e.getWireType()!==h["b"].RoomMessageEncrypted||!["m.olm.v1.curve25519-aes-sha2"].includes(e.getWireContent().algorithm))||(u["b"].error("Event was not encrypted using an appropriate algorithm"),!1):(u["b"].error("Event has no sender key (not encrypted?)"),!1)}}.call(this,n("c8ba"))},7688:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o);class s{constructor(){a()(this,"accountData",new Map),a()(this,"fromToken",null)}isNewlyCreated(){return Promise.resolve(!0)}getSyncToken(){return this.fromToken}setSyncToken(e){this.fromToken=e}storeRoom(e){}getRoom(e){return null}getRooms(){return[]}removeRoom(e){}getRoomSummaries(){return[]}storeUser(e){}getUser(e){return null}getUsers(){return[]}scrollback(e,t){return[]}setUserCreator(e){}storeEvents(e,t,r,n){}storeFilter(e){}getFilter(e,t){return null}getFilterIdByName(e){return null}setFilterIdByName(e,t){}storeAccountDataEvents(e){}getAccountData(e){}setSyncData(e){return Promise.resolve()}wantsSave(){return!1}save(){return Promise.resolve()}startup(){return Promise.resolve()}getSavedSync(){return Promise.resolve(null)}getSavedSyncToken(){return Promise.resolve(null)}deleteAllData(){return Promise.resolve()}getOutOfBandMembers(){return Promise.resolve(null)}setOutOfBandMembers(e,t){return Promise.resolve()}clearOutOfBandMembers(){return Promise.resolve()}getClientOptions(){return Promise.resolve(void 0)}storeClientOptions(e){return Promise.resolve()}getPendingEvents(e){return i()((function*(){return[]}))()}setPendingEvents(e,t){return Promise.resolve()}saveToDeviceBatches(e){return i()((function*(){return Promise.resolve()}))()}getOldestToDeviceBatch(){return Promise.resolve(null)}removeToDeviceBatch(e){return i()((function*(){return Promise.resolve()}))()}destroy(){return i()((function*(){}))()}}},"76d8":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".deletedMessage[data-v-28e8bb71]{font-size:.8em;text-align:center;opacity:.6;padding:1em}.event[data-v-28e8bb71]{opacity:0;transition:.3s}.event.readyToRender[data-v-28e8bb71]{opacity:1}.event .loading[data-v-28e8bb71]{width:100%;height:100%;text-align:center}.event .deletedMessage[data-v-28e8bb71],.event .loading[data-v-28e8bb71]{position:relative;left:0;top:0;padding:.5em}",""]),e.exports=t},"76e6":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r("a74c"),i=new n["c"]("m.beacon_info","org.matrix.msc3672.beacon_info"),o=new n["c"]("m.beacon","org.matrix.msc3672.beacon")},7704:function(e){e.exports=JSON.parse('{"caption":{"create":"Создать","addPublicChatName":"Имя Публичной комнаты","addGroupNamePlaceHolder":"Имя Чата","createPublicChat":"Создать публичный чат","chatTopic":"Топик изменён","publicRoomTitle":"Публичная комната","asModerator":"права модерации","marked":"Передал","unmarked":"Снял","removeBan":"Снять Бан","cancelModeration":"Снять модерцию","uploadFiles":"Загрузить файлы","header":"Заголовок","dragAndDropAFile":"Перетятите файл в эту область","chatInvite":"Вы приглашены в чат с","cantJoion":"Вы не можете присоединиться к чату с","chatInviteDecline":"Вы можете присоединиться к чату или отклонить приглашение","creatorLeft":"Так как создатель чата покинул его","encrypted":"Зашифровано ","noImages":"В чате пока нет изображений","noFiles":"В чате пока нет файлов","inviteUser":"Пригласить пользователя","invite":"Пригласить","add":"Добавить","mute":"Отключить звук","unmute":"Включить звук","disableCalls":"Запретить входящие звонки","enableCalls":"Разрешить входящие звонки","allow":"Разрешить","prohibit":"Отклонить","wait":"Ожидание подтверждения","disabled":"Пользователь не дал вам разрешения нас звонки","request":"Вы действительно хотите запросить разрешение на звонки?","requestCallAccess":"Пользователь запрашивает разрешение на звонки","requestCallAccessYou":"Вы запросили разрешение на совершение звонков","callAccessWarning":"Принимайте запросы ТОЛЬКО от доверенных людей.","leave":"Покинуть","Info":"Информация","new":"Новый","typing":"печатает","accNotFound":"Ваш аккаунт находится в процессе регистрации, пожалуйста, подождите...","emptyList":"Список пуст","welcome":"Добро пожаловать в чат!","startNewChat":"Начать новый чат","chats":"Чаты","shareWith":"Поделиться с","newChat":"Новый чат","moveToChat":"Перейти в чат","queryNoResults":"Нет результатов по запросу","needMoreCharacters":"Введите больше символов для поиска","createGroup":"Создать группу","unabletoDecrypt":"* Невозможно расшифровать","messageDeleted":"Сообщение удалено","sentImage":"отправлено изображение","sentVoiceMessage":"отправлено голосовое сообщение","invitationToChat":"Приглашение в чат","invitationToRoom":"Приглашение в комнату","leftChat":"покинул чат","joined":"присоединился","chatRenamed":"Чат переименован в ","recentComment":"Последний комментарий:","share":"Поделиться","followers":"Подписались","reputation":"Репутация","unsubscribe":"Отписаться","following":"Подписан","theme":"Тема:","contacts":"Контакты","other":"Глобальный поиск","phoneContacts":"Телефонные контакты","chooseInviteMedia":"Пожалуйста, выберите, способ приглашения","admin":"Админ","moderator":"Модератор","videocall":"Видеозвонок","call":"Звонок","leaveAndDelete":"Покинуть и удалить чат","donate":"Донат","makeModerator":"Сделать модератором","ban":"Бан","kick":"Исключить","members":"Участники","media":"Медиа","files":"Файлы","contactsList":"Список контактов","send":"Отправить","pageCaption":"Заголовок страницы","caption":"Заголовок","text":"текст","placeholder":"плейсхолдер","sendTransactionTo":"Послать транзакрию","toBePaidByReceiver":"Оплата получателем","toBePaidBySender":"Оплата отправителем","source":"Источник","amount":"Количество","receiver":"Получатель","message":"Сообщение","includeFeesInAmount":"Включить комиссию в сумму","transactionFees":"Комиссия за транзакцию","totalAmount":"Итого","balanceTooLow":"Баланс слишком низкий","transactionError":"Ошибка: нельзя совершить транзакцию","calculateFees":"Подсчитать комиссию","startChatWith":"Начать чат с","searchResult":"Результат поиска","joinedInTheChat":"вошел в чат","invited":"приглашение ","hasInvited":"приглашение ","inTheChat":" в чат","banned":"забанен","andRoom":"и комната","inRoom":"в комнате","left":"покинул","theChat":" чат ","made":"сделал ","aModerator":" модератором","editedChatNameTo ":"изменил имя чата на ","somebody":"Кто-то","sent":"отправлено","PKOINto":" PKOIN для ","response":"Ответ","edited":"Отредактировано","settings":"Настройки","unauthorized":"Неавторизован","search":"Поиск","replyOnMessage":"Ответить на сообщение","editMessage":"Редактировать сообщение","inviteFriend":"Пригласить друзей","emptyContactList":"Ваша книга контактов пуста","joinApp":"Присоединяйтесь ко мне в защищенном чате.","hasInvitedToJoin":"Это зашифрованный чат, который не привязывается к номеру телефона.","messagefrom":"Пересланное сообщение","usernotgen":"User did not generate their encryption keys yet. You will be able to chat them when their keys are generated.","younotgen":"Please wait a minute, Your encryption keys are being generated...","messageRead":"Сообщение прочитано","open":"Открыть","You":"Вы","chatsearchingempty":"Чатов по данному фильтру не найдено","sendmessage":"Отправить сообщение","messages":"Сообщения","you":"Вы","sentfile":"прислал файл:","administrators":"Владелец","moderators":"Модераторы","participants":"Участники","streamChat":"Чат стрима","membersList":"Список участников","needjointowrite":"Присоединитесь, чтобы писать","streamisover":"Стрим завершен","forwardMessage":"Переслать {n} сообщений | Переслать {n} сообщение | Переслать {n} сообщения | Переслать {n} сообщений","from":"От"},"input":{"patientEmailPlaceholder":"Электронная почта","refillNamePlaceholder":"Заполнить имя еще раз"},"message":{},"button":{"starChatButton":"Начать чат","decline":"Отклонить","join":"Присоединиться","ok":"Ок","copy":"Скопировать","forward":"Переслать","delete":"Удалить","resend":"Повторно отправить","save":"Сохранить","reply":"Ответить","share":"Переслать","download":"Загрузить","downloaded":"Загружено","goToPocketnetProfile":"Перейти в профиль","sendFile":"Отправить файл","takePhotoOrVideo":"Отправить фотографию","sendCoins":"Отправить коины","edit":"Редактировать","select":"Выбрать","block":"Заблокировать","unblock":"Разблокировать","blockUser":"Заблокировать пользователя","Complain":"Пожаловаться","chat":"Чат","donations":"Донаты"},"type":{"publicgroup":"Создать публичную группу","privategroup":"Создать приватную группу","one":"Чат один на один"},"typelabel":{"publicgroup":"Создание публичной группы","privategroup":"Создание приватной группы","one":"Создание чата один на один"},"yes":"Да","cancel":"Отменить","teamMessages":{"1-title":"Добро пожаловать в приватный чат!","1-list1":"Личный мессенджер, который НЕ связан с вашим номером телефона","1-list2":"Конечное шифрование каждого разговора 1 на 1 по умолчанию","1-list3":"Все изображения, отправленные или полученные через чат, хранятся в зашифрованном виде","1-list4":"История сообщений сохраняется только в течение 7 дней","2-title":"Огромное объявление!","2-message1":"Недавно мы выпустили следующие крупные обновления:","2-list1":"Частный зашифрованный мессенджер, не связанный с вашим номером телефона","2-list2":"Возможность пожертвовать PKOIN блогерам","2-list3":"Видео и прямая трансляция","2-message2":"Пригласите своих друзей сейчас и станьте частью большого будущего децентрализованного интернета!","2-button":"Пригласите друзей"},"error_generic":"Что-то пошло не так, попробуйте позже.","sendingerror":"Возникла ошибка при отправке сообщения","details":"Подробнее","settings_pin":"Закрепить окно чата","checked":"Да","unchecked":"Нет","settings_read":"Отправлять отчёты о прочтении","settings_disturb":"Не беспокоить","messagewasburn":"Данное сообщение осталось только лишь в памяти вашего устройства","messagewillburn":"Сообщение скоро будет удалено","micaccessbrowser":"Доступ к микрофону запрещен настройками браузера, пожалуйста проверьте настройки.","micaccesscommonproblem":"Извините, по какой-то причине запись голосовых сообщений невозможна на устройстве.","micaccesscordova":"Доступ к микрофону запрещен настройками устройства, пожалуйста разрешите доступ к микрофону в настройках устройства.","micdevicenotfound":"Устройство для записи звука не найдено","endedCall":"Звонок завершён","incomingCall":"Входящий звонок","incomingVideoCall":"Входящий видео звонок","incomingAudioCall":"Входящий аудио звонок","outgoingCall":"Исходящий звонок","m.call.invite":"Звонок","m.call.hangup":"Звонок завершён","m.call.reject":"Звонок отклонён","m.call.answer":"Активный звонок","wait":"Ожидание ответа","ended":"Звонок завершён","reject":"Звонок отклонён","connecting":"Устанавливается соединение"}')},7769:function(e,t,r){"use strict";var n=r("a593");e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},"77db":function(t,r,n){"use strict";(function(t){n.d(r,"a",(function(){return w})),n.d(r,"c",(function(){return R})),n.d(r,"b",(function(){return x}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("afe6"),l=n("5b5f"),d=n("75c9"),u=n("87bd"),h=n("b83f"),f=n("aab2"),p=n("b7a0"),v=n("c889"),m=n("a74c"),g=n("31f5"),y=n("9c88"),b=200,_=5e3;class w{constructor(e,t){this.baseApis=e,this.getKey=t,s()(this,"algorithm",void 0),s()(this,"backupInfo",void 0),s()(this,"checkedForBackup",void 0),s()(this,"sendingBackups",void 0),s()(this,"sessionLastCheckAttemptedTime",{}),s()(this,"clientRunning",!0),this.checkedForBackup=!1,this.sendingBackups=!1}stop(){this.clientRunning=!1}get version(){return this.backupInfo&&this.backupInfo.version}static checkBackupVersion(e){var t=C[e.algorithm];if(!t)throw new Error("Unknown backup algorithm: "+e.algorithm);if("object"!==typeof e.auth_data)throw new Error("Invalid backup data returned");return t.checkBackupVersion(e)}static makeAlgorithm(e,t){var r=C[e.algorithm];if(!r)throw new Error("Unknown backup algorithm");return r.init(e.auth_data,t)}enableKeyBackup(e){var t=this;return o()((function*(){t.backupInfo=e,t.algorithm&&t.algorithm.free(),t.algorithm=yield w.makeAlgorithm(e,t.getKey),t.baseApis.emit(g["b"].KeyBackupStatus,!0),t.scheduleKeyBackupSend()}))()}disableKeyBackup(){this.algorithm&&this.algorithm.free(),this.algorithm=void 0,this.backupInfo=void 0,this.baseApis.emit(g["b"].KeyBackupStatus,!1)}getKeyBackupEnabled(){return this.checkedForBackup?Boolean(this.algorithm):null}prepareKeyBackupVersion(e,t){return o()((function*(){var r=t?C[t]:T;if(!r)throw new Error("Unknown backup algorithm");var[n,i]=yield r.prepare(e),o=Object(p["b"])(n);return{algorithm:r.algorithmName,auth_data:i,recovery_key:o,privateKey:n}}))()}createKeyBackupVersion(e){var t=this;return o()((function*(){t.algorithm=yield w.makeAlgorithm(e,t.getKey)}))()}deleteAllKeyBackupVersions(){var e=this;return o()((function*(){var t,r,n=null!==(t=null===(r=yield e.baseApis.getKeyBackupVersion())||void 0===r?void 0:r.version)&&void 0!==t?t:null;while(null!=n){var i,o;yield e.deleteKeyBackupVersion(n),e.disableKeyBackup(),n=null!==(i=null===(o=yield e.baseApis.getKeyBackupVersion())||void 0===o?void 0:o.version)&&void 0!==i?i:null}}))()}deleteKeyBackupVersion(e){var t=this;return o()((function*(){var r=Object(h["k"])("/room_keys/version/$version",{$version:e});yield t.baseApis.http.authedRequest(y["i"].Delete,r,void 0,void 0,{prefix:y["a"].V3})}))()}checkAndStart(){var t=this;return o()((function*(){if(l["b"].log("Checking key backup status..."),t.baseApis.isGuest())return l["b"].log("Skipping key backup check since user is guest"),t.checkedForBackup=!0,null;var r;try{var n;r=null!==(n=yield t.baseApis.getKeyBackupVersion())&&void 0!==n?n:void 0}catch(e){return l["b"].log("Error checking for active key backup",e),404===e.httpStatus&&(t.checkedForBackup=!0),null}t.checkedForBackup=!0;var i=yield t.isKeyBackupTrusted(r);return i.usable&&!t.backupInfo?(l["b"].log("Found usable key backup v".concat(r.version,": enabling key backups")),yield t.enableKeyBackup(r)):!i.usable&&t.backupInfo?(l["b"].log("No usable key backup: disabling key backup"),t.disableKeyBackup()):i.usable||t.backupInfo?i.usable&&t.backupInfo&&(r.version!==t.backupInfo.version?(l["b"].log("On backup version ".concat(t.backupInfo.version," but ")+"found version ".concat(r.version,": switching.")),t.disableKeyBackup(),yield t.enableKeyBackup(r),yield t.scheduleAllGroupSessionsForBackup()):l["b"].log("Backup version ".concat(r.version," still current"))):l["b"].log("No usable key backup: not enabling key backup"),{backupInfo:r,trustInfo:i}}))()}checkKeyBackup(){var e=this;return o()((function*(){return e.checkedForBackup=!1,e.checkAndStart()}))()}queryKeyBackupRateLimited(e,t){var r=this;return o()((function*(){if(r.backupInfo){var n=(new Date).getTime();(!r.sessionLastCheckAttemptedTime[t]||n-r.sessionLastCheckAttemptedTime[t]>_)&&(r.sessionLastCheckAttemptedTime[t]=n,yield r.baseApis.restoreKeyBackupWithCache(e,t,r.backupInfo,{}))}}))()}isKeyBackupTrusted(t){var r=this;return o()((function*(){var n={usable:!1,trusted_locally:!1,sigs:[]};if(!t||!t.algorithm||!t.auth_data||!t.auth_data.signatures)return l["b"].info("Key backup is absent or missing required data: ".concat(JSON.stringify(t))),n;var i=r.baseApis.getUserId(),a=yield r.baseApis.crypto.getSessionBackupPrivateKey();if(a){var s=null;try{s=yield w.makeAlgorithm(t,o()((function*(){return a}))),(yield s.keyMatches(a))&&(l["b"].info("Backup is trusted locally"),n.trusted_locally=!0)}catch(g){}finally{var c;null===(c=s)||void 0===c||c.free()}}var u=t.auth_data.signatures[i]||{};for(var h of Object.keys(u)){var f=h.split(":");if("ed25519"===f[0]){var p={deviceId:f[1]},v=r.baseApis.crypto.crossSigningInfo.getId();if(v!==p.deviceId){var m=r.baseApis.crypto.deviceList.getStoredDevice(i,p.deviceId);if(m){p.device=m,p.deviceTrust=r.baseApis.checkDeviceTrust(i,p.deviceId);try{yield Object(d["verifySignature"])(r.baseApis.crypto.olmDevice,t.auth_data,i,m.deviceId,m.getFingerprint()),p.valid=!0}catch(e){l["b"].info("Bad signature from key ID "+h+" userID "+r.baseApis.getUserId()+" device ID "+m.deviceId+" fingerprint: "+m.getFingerprint(),t.auth_data,e),p.valid=!1}}else p.valid=null,l["b"].info("Ignoring signature from unknown key "+h);n.sigs.push(p)}else{p.crossSigningId=!0;try{yield Object(d["verifySignature"])(r.baseApis.crypto.olmDevice,t.auth_data,i,p.deviceId,v),p.valid=!0}catch(e){l["b"].warn("Bad signature from cross signing key "+v,e),p.valid=!1}n.sigs.push(p)}}else l["b"].log("Ignoring unknown signature type: "+f[0])}return n.usable=n.sigs.some(e=>{var t;return e.valid&&(e.device&&(null===(t=e.deviceTrust)||void 0===t?void 0:t.isVerified())||e.crossSigningId)}),n}))()}scheduleKeyBackupSend(){var e=arguments,t=this;return o()((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:1e4;if(l["b"].debug("Key backup: scheduleKeyBackupSend currentSending:".concat(t.sendingBackups," delay:").concat(r)),!t.sendingBackups){t.sendingBackups=!0;try{var n=Math.random()*r;if(yield Object(h["K"])(n),!t.clientRunning)return void(t.sendingBackups=!1);for(var i=0;;){if(!t.algorithm)return;try{var o=yield t.backupPendingKeys(b);if(0===o)return void(t.sendingBackups=!1);i=0}catch(s){if(i++,l["b"].log("Key backup request failed",s),s instanceof y["f"]){var a=s.data.errcode;if("M_NOT_FOUND"==a||"M_WRONG_ROOM_KEYS_VERSION"==a)return t.sendingBackups=!1,t.baseApis.crypto.emit(g["b"].KeyBackupFailed,a),void(yield t.checkKeyBackup())}}if(i&&(yield Object(h["K"])(1e3*Math.pow(2,Math.min(i-1,4)))),!t.clientRunning)return l["b"].debug("Key backup send loop aborted, client stopped"),void(t.sendingBackups=!1)}}catch(s){l["b"].log("Backup loop failed ".concat(s)),t.sendingBackups=!1}}}))()}backupPendingKeys(e){var t=this;return o()((function*(){var r=yield t.baseApis.crypto.cryptoStore.getSessionsNeedingBackup(e);if(!r.length)return 0;var n=yield t.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();t.baseApis.crypto.emit(g["b"].KeyBackupSessionsRemaining,n);var i={};for(var o of r){var a,s=o.sessionData.room_id;Object(h["I"])(i,s,i[s]||{sessions:{}});var c=t.baseApis.crypto.olmDevice.exportInboundGroupSession(o.senderKey,o.sessionId,o.sessionData);c.algorithm=d["MEGOLM_ALGORITHM"];var l=(c.forwarding_curve25519_key_chain||[]).length,u=t.baseApis.crypto.deviceList.getUserByIdentityKey(d["MEGOLM_ALGORITHM"],o.senderKey),f=null!==(a=t.baseApis.crypto.deviceList.getDeviceByIdentityKey(d["MEGOLM_ALGORITHM"],o.senderKey))&&void 0!==a?a:void 0,p=t.baseApis.crypto.checkDeviceInfoTrust(u,f).isVerified();Object(h["I"])(i[s]["sessions"],o.sessionId,{first_message_index:c.first_known_index,forwarded_count:l,is_verified:p,session_data:yield t.algorithm.encryptSession(c)})}return yield t.baseApis.sendKeyBackup(void 0,void 0,t.backupInfo.version,{rooms:i}),yield t.baseApis.crypto.cryptoStore.unmarkSessionsNeedingBackup(r),n=yield t.baseApis.crypto.cryptoStore.countSessionsNeedingBackup(),t.baseApis.crypto.emit(g["b"].KeyBackupSessionsRemaining,n),r.length}))()}backupGroupSession(e,t){var r=this;return o()((function*(){yield r.baseApis.crypto.cryptoStore.markSessionsNeedingBackup([{senderKey:e,sessionId:t}]),r.backupInfo&&r.scheduleKeyBackupSend()}))()}scheduleAllGroupSessionsForBackup(){var e=this;return o()((function*(){yield e.flagAllGroupSessionsForBackup(),e.scheduleKeyBackupSend(0)}))()}flagAllGroupSessionsForBackup(){var e=this;return o()((function*(){yield e.baseApis.crypto.cryptoStore.doTxn("readwrite",[f["a"].STORE_INBOUND_GROUP_SESSIONS,f["a"].STORE_BACKUP],t=>{e.baseApis.crypto.cryptoStore.getAllEndToEndInboundGroupSessions(t,r=>{null!==r&&e.baseApis.crypto.cryptoStore.markSessionsNeedingBackup([r],t)})});var t=yield e.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();return e.baseApis.emit(g["b"].KeyBackupSessionsRemaining,t),t}))()}countSessionsNeedingBackup(){return this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup()}}class S{constructor(e,t,r){this.authData=e,this.publicKey=t,this.getKey=r}static init(e,r){return o()((function*(){if(!e||!("public_key"in e))throw new Error("auth_data missing required information");var n=new t.Olm.PkEncryption;return n.set_recipient_key(e.public_key),new S(e,n,r)}))()}static prepare(e){return o()((function*(){var r=new t.Olm.PkDecryption;try{var n={};if(e)if(e instanceof Uint8Array)n.public_key=r.init_with_private_key(e);else{var i=yield Object(u["b"])(e);n.private_key_salt=i.salt,n.private_key_iterations=i.iterations,n.public_key=r.init_with_private_key(i.key)}else n.public_key=r.generate_key();var o=new t.Olm.PkEncryption;return o.set_recipient_key(n.public_key),[r.get_private_key(),n]}finally{r.free()}}))()}static checkBackupVersion(e){if(!("public_key"in e.auth_data))throw new Error("Invalid backup data returned")}get untrusted(){return!0}encryptSession(e){var t=this;return o()((function*(){var r=Object.assign({},e);return delete r.session_id,delete r.room_id,delete r.first_known_index,t.publicKey.encrypt(JSON.stringify(r))}))()}decryptSessions(r){var n=this;return o()((function*(){var i=yield n.getKey(),o=new t.Olm.PkDecryption;try{var a=o.init_with_private_key(i);if(a!==n.authData.public_key)throw new y["f"]({errcode:c["d"].RESTORE_BACKUP_ERROR_BAD_KEY});var s=[];for(var[d,u]of Object.entries(r))try{var h=JSON.parse(o.decrypt(u.session_data.ephemeral,u.session_data.mac,u.session_data.ciphertext));h.session_id=d,s.push(h)}catch(e){l["b"].log("Failed to decrypt megolm session from backup",e,u)}return s}finally{o.free()}}))()}keyMatches(e){var r=this;return o()((function*(){var n,i=new t.Olm.PkDecryption;try{n=i.init_with_private_key(e)}finally{i.free()}return n===r.authData.public_key}))()}free(){this.publicKey.free()}}function E(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),t}s()(S,"algorithmName","m.megolm_backup.v1.curve25519-aes-sha2");var k=new m["c"]("m.megolm_backup.v1.aes-hmac-sha2","org.matrix.msc3270.v1.aes-hmac-sha2");class I{constructor(e,t){this.authData=e,this.key=t}static init(e,t){return o()((function*(){if(!e)throw new Error("auth_data missing");var r=yield t();if(e.mac){var{mac:n}=yield Object(v["a"])(r,e.iv);if(e.mac.replace(/=+$/g,"")!==n.replace(/=+/g,""))throw new Error("Key does not match")}return new I(e,r)}))()}static prepare(e){return o()((function*(){var t,r={};if(e)if(e instanceof Uint8Array)t=new Uint8Array(e);else{var n=yield Object(u["b"])(e);r.private_key_salt=n.salt,r.private_key_iterations=n.iterations,t=n.key}else t=E(32);var{iv:i,mac:o}=yield Object(v["a"])(t);return r.iv=i,r.mac=o,[t,r]}))()}static checkBackupVersion(e){if(!("iv"in e.auth_data)||!("mac"in e.auth_data))throw new Error("Invalid backup data returned")}get untrusted(){return!1}encryptSession(e){var t=Object.assign({},e);return delete t.session_id,delete t.room_id,delete t.first_known_index,Object(v["c"])(JSON.stringify(t),this.key,e.session_id)}decryptSessions(t){var r=this;return o()((function*(){var n=[];for(var[i,o]of Object.entries(t))try{var a=JSON.parse(yield Object(v["b"])(o.session_data,r.key,i));a.session_id=i,n.push(a)}catch(e){l["b"].log("Failed to decrypt megolm session from backup",e,o)}return n}))()}keyMatches(e){var t=this;return o()((function*(){if(t.authData.mac){var{mac:r}=yield Object(v["a"])(e,t.authData.iv);return t.authData.mac.replace(/=+$/g,"")===r.replace(/=+/g,"")}return!0}))()}free(){this.key.fill(0)}}s()(I,"algorithmName",k.name);var C={[S.algorithmName]:S,[I.algorithmName]:I},T=S;function R(e){var t;return{trusted:e.usable,matchesDecryptionKey:null!==(t=e.trusted_locally)&&void 0!==t&&t}}class x{constructor(e){s()(this,"algorithm",void 0),s()(this,"sourceTrusted",void 0),this.algorithm=e,this.sourceTrusted=!e.untrusted}free(){this.algorithm.free()}decryptSessions(e){var t=this;return o()((function*(){return yield t.algorithm.decryptSessions(e)}))()}}}).call(this,n("c8ba"))},"780f":function(e,t,r){"use strict";e.exports=i;var n=r("27bf");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r("3fb5")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},7839:function(e,t,r){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"78db":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;margin:0}button,input,select,textarea{background-color:transparent;border-style:none;color:inherit;outline:none}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}",""]),e.exports=t},7961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7963:function(e,t,r){"use strict";var n,i,o;function a(e){return e.phase<i.Ready&&!e.accepting&&!e.declining}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return a})),function(e){e["Change"]="change"}(n||(n={})),function(e){e[e["Unsent"]=1]="Unsent",e[e["Requested"]=2]="Requested",e[e["Ready"]=3]="Ready",e[e["Started"]=4]="Started",e[e["Cancelled"]=5]="Cancelled",e[e["Done"]=6]="Done"}(i||(i={})),function(e){e["Cancel"]="cancel",e["ShowSas"]="show_sas",e["ShowReciprocateQr"]="show_reciprocate_qr"}(o||(o={}))},7985:function(t,r,n){"use strict";(function(t){n.d(r,"b",(function(){return d})),n.d(r,"a",(function(){return u}));var i,o=n("5b5f"),a=1e3,s=0,c=[],l=function(){};function d(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];t=t||0,t<0&&(t=0);var o=Date.now()+t,a=s++;l("setTimeout: scheduling cb",a,"at",o,"(delay",t,")");var d={runAt:o,func:e,params:n,key:a},u=p(c,(function(e){return e.runAt-o}));return c.splice(u,0,d),h(),a}function u(e){if(0!==c.length){var t;for(t=0;t<c.length;t++){var r=c[t];if(r.key==e){c.splice(t,1);break}}0===t&&h()}}function h(){i&&t.clearTimeout(i);var e=c[0];if(e){var r=Date.now(),n=Math.min(e.runAt-r,a);l("scheduleRealCallback: now:",r,"delay:",n),i=t.setTimeout(f,n)}else l("scheduleRealCallback: no more callbacks, not rescheduling")}function f(){var r=Date.now();l("runCallbacks: now:",r);var n=[];while(1){var i=c[0];if(!i||i.runAt>r)break;var a=c.shift();l("runCallbacks: popping",a.key),n.push(a)}for(var s of(h(),n))try{s.func.apply(t,s.params)}catch(e){o["b"].error("Uncaught exception in callback function",e)}}function p(e,t){var r=0,n=e.length;while(r<n){var i=r+n>>1,o=t(e[i]);o>0?n=i:r=i+1}return r}}).call(this,n("c8ba"))},7992:function(e,t,r){"use strict";var n=r("71c9"),i=r("67ee"),o=r("0d25"),a=r("2aa9");e.exports=function(e,t,r){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new o("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,d=arguments.length>6&&arguments[6],u=!!a&&a(e,t);if(n)n(e,t,{configurable:null===l&&u?u.configurable:!l,enumerable:null===s&&u?u.enumerable:!s,value:r,writable:null===c&&u?u.writable:!c});else{if(!d&&(s||c||l))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},"7a1f":function(e,t,r){"use strict";(function(e){var n=r("4a1e");function i(e){e.component("vue-page-transition",n["a"])}const o={version:1,install:i};t["a"]=o;let a=null;"undefined"!==typeof window?a=window.Vue:"undefined"!==typeof e&&(a=e.Vue),a&&a.use(o)}).call(this,r("c8ba"))},"7a3a":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbols=void 0;var n=function(e){return e["AnyRoom"]="*",e}({});t.Symbols=n},"7a52":function(e,t,r){"use strict";r.r(t);var n=r("86d3");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"7a77":function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},"7aac":function(e,t,r){"use strict";var n=r("c532");e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(e,t,r){"use strict";var n=r("1d80"),i=Object;e.exports=function(e){return i(n(e))}},"7c16":function(e,t,r){e.exports=r("d6dd")},"7c3f":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMPoll=s;var n=r("8c1e"),i=r("7450"),o=r("80e6"),a=r("7368");function s(e){return n.M_POLL_START.matches(e.type)?new i.PollStartEvent(e):n.M_POLL_RESPONSE.matches(e.type)?new o.PollResponseEvent(e):n.M_POLL_END.matches(e.type)?new a.PollEndEvent(e):null}},"7ccd":function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return y}));var n=r("9523"),i=r.n(n),o=r("283b"),a=r("936a"),s=r("b83f"),c=r("edaf"),l=r("60af"),d=r("299a"),u=r("5b5f"),h=r("afe6");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new c["b"]({content:{[t.getId()]:{[r]:{[e]:p({ts:t.getTs()},!n&&{thread_id:Object(h["m"])(t)})}}},type:l["b"].Receipt,room_id:t.getRoomId()})}var m=0,g=1;class y extends a["b"]{constructor(){super(...arguments),i()(this,"receipts",new s["b"](()=>new Map)),i()(this,"receiptCacheByEventId",new Map)}getReadReceiptForUserId(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o["b"].Read,[a,s]=null!==(t=null===(r=this.receipts.get(i))||void 0===r?void 0:r.get(e))&&void 0!==t?t:[null,null];return n?a:null!==s&&void 0!==s?s:a}compareReceipts(e,t){var r;return null!==(r=this.getUnfilteredTimelineSet().compareEventOrdering(e.eventId,t.eventId))&&void 0!==r?r:e.data.ts-t.data.ts}getEventReadUpTo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getLatestReceipt(e,t);return r&&this.receiptPointsAtConsistentEvent(r)?r.eventId:null}receiptPointsAtConsistentEvent(e){var t,r=this.findEventById(e.eventId);if(!r)return!1;if(null===(t=e.data)||void 0===t||!t.thread_id)return!0;if(e.data.thread_id===o["a"]){var n=Object(h["l"])(r);if(n)return!0}else if(r.threadRootId===e.data.thread_id)return!0;return u["b"].warn("Ignoring receipt because its thread_id (".concat(e.data.thread_id,") disagrees ")+"with the thread root (".concat(r.threadRootId,") of the referenced event ")+"(event ID = ".concat(e.eventId,")")),!1}getLatestReceipt(e,t){var r,n,i,a=this.getReadReceiptForUserId(e,t,o["b"].Read),s=this.getReadReceiptForUserId(e,t,o["b"].ReadPrivate);return null!==a&&void 0!==a&&a.eventId&&null!==s&&void 0!==s&&s.eventId&&(i=this.compareReceipts(a,s)),i?null!==(n=i<0?s:a)&&void 0!==n?n:null:null!==(r=null!==s&&void 0!==s?s:a)&&void 0!==r?r:null}addReceiptToStructure(e,t,r,n,i){var o,a,s=this.receipts.getOrCreate(t),c=s.get(r);c||(c=[null,null],s.set(r,c));var l,d=c[m];i&&(d=null!==(l=c[g])&&void 0!==l?l:c[m]);var u={eventId:e,data:n};if(d){var h=this.compareReceipts(d,u);if(h>=0)return}var f=i?c[m]:u,p=i?u:c[g],v=null;f&&p&&(v=this.getUnfilteredTimelineSet().compareEventOrdering(f.eventId,p.eventId));var y=null===v||v<0,b=null!==(o=c[g])&&void 0!==o?o:c[m];i&&y?c[g]=u:i||(c[m]=u,y||(c[g]=null));var _=null!==(a=c[g])&&void 0!==a?a:c[m];if(b!==_){if(b&&this.receiptCacheByEventId.get(b.eventId)){var w=b.eventId;this.receiptCacheByEventId.set(w,this.receiptCacheByEventId.get(w).filter(e=>e.type!==t||e.userId!==r)),this.receiptCacheByEventId.get(w).length<1&&this.receiptCacheByEventId.delete(w)}this.receiptCacheByEventId.get(e)||this.receiptCacheByEventId.set(e,[]),this.receiptCacheByEventId.get(e).push({userId:r,type:t,data:n})}}getReceiptsForEvent(e){return this.receiptCacheByEventId.get(e.getId())||[]}fixupNotifications(e){var t=this.getReadReceiptForUserId(e,!1),r=this.timeline[this.timeline.length-1];r&&(null===t||void 0===t?void 0:t.eventId)===r.getId()&&e===r.getSender()&&(this.setUnread(d["b"].Total,0),this.setUnread(d["b"].Highlight,0))}addLocalEchoReceipt(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.addReceipt(v(e,t,r,n),!0)}getUsersReadUpTo(e){return this.getReceiptsForEvent(e).filter((function(e){return Object(s["s"])(e.type)})).map((function(e){return e.userId}))}}},"7d2a":function(e,t){var r=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!==typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!==typeof t)throw new TypeError("Key length not a number");if(t<0||t>r||t!==t)throw new TypeError("Bad key length")}},"7dad":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuiltInModalButtonID=void 0;var n=function(e){return e["Close"]="m.close",e}({});t.BuiltInModalButtonID=n},"7dcc":function(e,t,r){"use strict";var n,i,o;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),function(e){e["V1"]="/_matrix/client/v1",e["V3"]="/_matrix/client/v3",e["Unstable"]="/_matrix/client/unstable"}(n||(n={})),function(e){e["V2"]="/_matrix/identity/v2"}(i||(i={})),function(e){e["V1"]="/_matrix/media/v1",e["V3"]="/_matrix/media/v3"}(o||(o={}))},"7e78":function(e,t,r){var n=r("3fb5"),i=r("b672"),o=r("8707").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function c(){this.init(),this._w=s,i.call(this,64,56)}function l(e){return e<<1|e>>>31}function d(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function h(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,c=0;c<16;++c)t[c]=e.readInt32BE(4*c);for(;c<80;++c)t[c]=l(t[c-3]^t[c-8]^t[c-14]^t[c-16]);for(var f=0;f<80;++f){var p=~~(f/20),v=d(r)+h(p,n,i,o)+s+t[f]+a[p]|0;s=o,o=i,i=u(n),n=r,r=v}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},c.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},"7fe8":function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("6608"),c=r("5b5f"),l=r("60af"),d=l["b"].RoomMessage,u="m.reference",h="m.relates_to";class f{constructor(e,t,r){this.client=e,this.roomId=t,this.userId=r,a()(this,"requestEventId",void 0)}get receiveStartFromOtherDevices(){return!0}get transactionId(){return this.requestEventId}static getOtherPartyUserId(e,t){var r=f.getEventType(e);if(r===s["e"]){var n=t.getUserId(),i=e.getSender(),o=e.getContent(),a=o.to;return i===n?a:a===n?i:void 0}}getTimestamp(e){return e.getTs()}static canCreateRequest(e){return e===s["e"]}canCreateRequest(e){return f.canCreateRequest(e)}static getTransactionId(e){if(f.getEventType(e)===s["e"])return e.getId();var t=e.getRelation();return(null===t||void 0===t?void 0:t.rel_type)===u?t.event_id:void 0}static validateEvent(e,t){var r=f.getTransactionId(e);if("string"!==typeof r||0===r.length)return!1;var n=f.getEventType(e),i=e.getContent();if(n===s["e"]){if(!i||"string"!==typeof i.to||!i.to.length)return c["b"].log("InRoomChannel: validateEvent: no valid to "+i.to),!1;if(!f.getOtherPartyUserId(e,t))return c["b"].log("InRoomChannel: validateEvent: "+"not directed to or sent by me: ".concat(e.getSender())+", ".concat(i.to)),!1}return s["g"].validateEvent(n,e,t)}static getEventType(e){var t=e.getType();if(t===d){var r=e.getContent();if(r){var{msgtype:n}=r;if(n===s["e"])return s["e"]}}return t&&t!==s["e"]?t:""}handleEvent(e,t){var r=arguments,n=this;return i()((function*(){var i=r.length>2&&void 0!==r[2]&&r[2];if(!t.hasEventId(e.getId())){var o=f.getEventType(e);if(e.getRoomId()===n.roomId){if(!n.userId){var a=f.getOtherPartyUserId(e,n.client);a&&(n.userId=a)}var s=n.client.getUserId(),l=e.getSender();if(!n.userId||l===s||l===n.userId){n.requestEventId||(n.requestEventId=f.getTransactionId(e));var d=!!e.getTxnId(),u=!!e.getUnsigned().transaction_id,h=e.getSender()===n.client.getUserId();return t.handleEvent(o,e,i,d||u,h)}c["b"].log("InRoomChannel: ignoring verification event from non-participating sender ".concat(l))}}}))()}completedContentFromEvent(e){var t=Object.assign({},e.getContent());return t[h]=e.getRelation(),t}completeContent(e,t){return t=Object.assign({},t),e!==s["e"]&&e!==s["d"]&&e!==s["f"]||(t.from_device=this.client.getDeviceId()),e===s["e"]?t={body:this.client.getUserId()+" is requesting to verify your key, but your client does not support in-chat key verification.  You will need to use legacy key verification to verify keys.",msgtype:s["e"],to:this.userId,from_device:t.from_device,methods:t.methods}:t[h]={rel_type:u,event_id:this.transactionId},t}send(e,t){var r=this.completeContent(e,t);return this.sendCompleted(e,r)}sendCompleted(e,t){var r=this;return i()((function*(){var n=e;e===s["e"]&&(n=d);var i=yield r.client.sendEvent(r.roomId,n,t);e===s["e"]&&(r.requestEventId=i.event_id)}))()}}class p{constructor(){a()(this,"requestsByRoomId",new Map)}getRequest(e){var t=e.getRoomId(),r=f.getTransactionId(e);return this.getRequestByTxnId(t,r)}getRequestByChannel(e){return this.getRequestByTxnId(e.roomId,e.transactionId)}getRequestByTxnId(e,t){var r=this.requestsByRoomId.get(e);if(r)return r.get(t)}setRequest(e,t){this.doSetRequest(e.getRoomId(),f.getTransactionId(e),t)}setRequestByChannel(e,t){this.doSetRequest(e.roomId,e.transactionId,t)}doSetRequest(e,t,r){var n=this.requestsByRoomId.get(e);n||(n=new Map,this.requestsByRoomId.set(e,n)),n.set(t,r)}removeRequest(e){var t=e.getRoomId(),r=this.requestsByRoomId.get(t);r&&(r.delete(f.getTransactionId(e)),0===r.size&&this.requestsByRoomId.delete(t))}findRequestInProgress(e,t){var r=this.requestsByRoomId.get(e);if(r)for(var n of r.values())if(n.pending&&(void 0===t||n.requestingUserId===t))return n}}},"80e6":function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.PollResponseEvent=void 0;var o=n("9e84"),a=n("8c1e"),s=n("2c89"),c=n("dbfa"),l=n("4a30");function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e){var t=y();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){f(r,e);var t=v(r);function r(e){var n;d(this,r),n=t.call(this,e),_(g(n),"internalAnswerIds",void 0),_(g(n),"internalSpoiled",void 0),_(g(n),"pollEventId",void 0);var i=n.wireContent["m.relates_to"];if(!c.REFERENCE_RELATION.matches(null===i||void 0===i?void 0:i.rel_type)||"string"!==typeof(null===i||void 0===i?void 0:i.event_id))throw new s.InvalidEventError("Relationship must be a reference to an event");return n.pollEventId=i.event_id,n.validateAgainst(null),n}return h(r,[{key:"answerIds",get:function(){return this.internalAnswerIds}},{key:"spoiled",get:function(){return this.internalSpoiled}},{key:"validateAgainst",value:function(e){var t=a.M_POLL_RESPONSE.findIn(this.wireContent);if(!Array.isArray(null===t||void 0===t?void 0:t.answers))return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);var r=t.answers;if(r.some((function(e){return"string"!==typeof e}))||0===r.length)return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);if(e){if(r.some((function(t){return!e.answers.some((function(e){return e.id===t}))})))return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);r=r.slice(0,e.maxSelections)}this.internalAnswerIds=r,this.internalSpoiled=!1}},{key:"isEquivalentTo",value:function(e){return(0,l.isEventTypeSame)(e,a.M_POLL_RESPONSE)}},{key:"serialize",value:function(){return{type:a.M_POLL_RESPONSE.name,content:_({"m.relates_to":{rel_type:c.REFERENCE_RELATION.name,event_id:this.pollEventId}},a.M_POLL_RESPONSE.name,{answers:this.spoiled?void 0:this.answerIds})}}}],[{key:"from",value:function(e,t){return new r({type:a.M_POLL_RESPONSE.name,content:_({"m.relates_to":{rel_type:c.REFERENCE_RELATION.name,event_id:t}},a.M_POLL_RESPONSE.name,{answers:e})})}}]),r}(o.ExtensibleEvent);r.PollResponseEvent=w},"813d":function(e,t,r){"use strict";function n(e,t){return new Promise((r,n)=>{var i=!0,o=e.open(t);o.onupgradeneeded=()=>{i=!1},o.onblocked=()=>n(o.error),o.onsuccess=()=>{var n=o.result;n.close(),i||e.deleteDatabase(t),r(i)},o.onerror=()=>n(o.error)})}r.d(t,"a",(function(){return n}))},8153:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".back-icon[data-v-c585ce68]{cursor:pointer}.backbutton-caption[data-v-c585ce68]{cursor:pointer;position:relative;left:1em}",""]),e.exports=t},"820f":function(e,t,r){"use strict";var n=r("a593");e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},"825a":function(e,t,r){"use strict";var n=r("861d"),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},"827e":function(e,t,r){"use strict";var n=r("480d");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e,t=new i((function(t){e=t}));return{token:t,cancel:e}},e.exports=i},8357:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"83ab":function(e,t,r){"use strict";var n=r("d039");e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(e,t,r){"use strict";var n=r("d925"),i=r("e683");e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},"848b":function(e,t,r){"use strict";var n=r("4a0c"),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=n.version.split(".");function s(e,t){for(var r=t?t.split("."):a,n=e.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}function c(e,t,r){if("object"!==typeof e)throw new TypeError("options must be an object");var n=Object.keys(e),i=n.length;while(i-- >0){var o=n[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+o)}}i.transitional=function(e,t,r){var i=t&&s(t);function a(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,s){if(!1===e)throw new Error(a(n," has been removed in "+t));return i&&!o[n]&&(o[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}},e.exports={isOlderVersion:s,assertOptions:c,validators:i}},"850b":function(e,t,r){"use strict";r.r(t);var n=r("4437");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},8558:function(e,t,r){"use strict";var n=r("cfe9"),i=r("b5db"),o=r("c6b6"),a=function(e){return i.slice(0,e.length)===e};e.exports=function(){return a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"}()},8559:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["CONNECTION_STATS"]="StatsReport.connection_stats",e["CALL_FEED_REPORT"]="StatsReport.call_feed_report",e["BYTE_SENT_STATS"]="StatsReport.byte_sent_stats",e["SUMMARY_STATS"]="StatsReport.summary_stats"}(n||(n={}))},"85fe":function(e,t,r){"use strict";(function(e){function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e){return c(e)||l(e)||d()}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){var t;return t="function"===typeof e?{callback:e}:e,t}function h(e,t){var r,n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function(a){for(var c=arguments.length,l=new Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];if(i=l,!r||a!==n){var u=o.leading;"function"===typeof u&&(u=u(a,n)),r&&a===n||!u||e.apply(void 0,[a].concat(s(i))),n=a,clearTimeout(r),r=setTimeout((function(){e.apply(void 0,[a].concat(s(i))),r=0}),t)}};return a._clear=function(){clearTimeout(r),r=null},a}function f(e,t){if(e===t)return!0;if("object"===n(e)){for(var r in e)if(!f(e[r],t[r]))return!1;return!0}return!1}r.d(t,"a",(function(){return y}));var p=function(){function e(t,r,n){i(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(r,n)}return a(e,[{key:"createObserver",value:function(e,t){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=u(e),this.callback=function(e,t){r.options.callback(e,t),e&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var n=this.options.throttleOptions||{},i=n.leading;this.callback=h(this.callback,this.options.throttle,{leading:function(e){return"both"===i||"visible"===i&&e||"hidden"===i&&!e}})}this.oldResult=void 0,this.observer=new IntersectionObserver((function(e){var t=e[0];if(e.length>1){var n=e.find((function(e){return e.isIntersecting}));n&&(t=n)}if(r.callback){var i=t.isIntersecting&&t.intersectionRatio>=r.threshold;if(i===r.oldResult)return;r.oldResult=i,r.callback(i,t)}}),this.options.intersection),t.context.$nextTick((function(){r.observer&&r.observer.observe(r.el)}))}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}();function v(e,t,r){var n=t.value;if(n)if("undefined"===typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var i=new p(e,n,r);e._vue_visibilityState=i}}function m(e,t,r){var n=t.value,i=t.oldValue;if(!f(n,i)){var o=e._vue_visibilityState;n?o?o.createObserver(n,r):v(e,{value:n},r):g(e)}}function g(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var y={bind:v,update:m,unbind:g};function b(e){e.directive("observe-visibility",y)}var _={version:"0.4.6",install:b},w=null;"undefined"!==typeof window?w=window.Vue:"undefined"!==typeof e&&(w=e.Vue),w&&w.use(_)}).call(this,r("c8ba"))},"861d":function(e,t,r){"use strict";var n=r("1626");e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},"866a":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return _}));var n,i,o=r("c973"),a=r.n(o),s=r("9523"),c=r.n(s),l=r("976c"),d=r("5b5f"),u=r("b83f"),h=r("60af"),f=r("edaf"),p=r("3d21"),v=r("936a"),m=r("6642"),g=r("0804"),y=r("76e6"),b=r("3925");(function(e){e[e["NotStarted"]=0]="NotStarted",e[e["InProgress"]=1]="InProgress",e[e["Finished"]=2]="Finished"})(n||(n={})),function(e){e["Events"]="RoomState.events",e["Members"]="RoomState.members",e["NewMember"]="RoomState.newMember",e["Update"]="RoomState.update",e["BeaconLiveness"]="RoomState.BeaconLiveness",e["Marker"]="RoomState.Marker"}(i||(i={}));class _ extends v["b"]{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:n.NotStarted},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.roomId=e,this.oobMemberFlags=t,this.isStartTimelineState=r,c()(this,"reEmitter",new g["b"](this)),c()(this,"sentinels",{}),c()(this,"displayNameToUserIds",new Map),c()(this,"userIdsToDisplayNames",{}),c()(this,"tokenToInvite",{}),c()(this,"joinedMemberCount",null),c()(this,"summaryJoinedMemberCount",null),c()(this,"invitedMemberCount",null),c()(this,"summaryInvitedMemberCount",null),c()(this,"modified",-1),c()(this,"members",{}),c()(this,"events",new Map),c()(this,"paginationToken",null),c()(this,"beacons",new Map),c()(this,"_liveBeaconIds",[]),this.updateModifiedTime()}getJoinedMemberCount(){return null!==this.summaryJoinedMemberCount?this.summaryJoinedMemberCount:(null===this.joinedMemberCount&&(this.joinedMemberCount=this.getMembers().reduce((e,t)=>t.membership===b["a"].Join?e+1:e,0)),this.joinedMemberCount)}setJoinedMemberCount(e){this.summaryJoinedMemberCount=e}getInvitedMemberCount(){return null!==this.summaryInvitedMemberCount?this.summaryInvitedMemberCount:(null===this.invitedMemberCount&&(this.invitedMemberCount=this.getMembers().reduce((e,t)=>t.membership===b["a"].Invite?e+1:e,0)),this.invitedMemberCount)}setInvitedMemberCount(e){this.summaryInvitedMemberCount=e}getMembers(){return Object.values(this.members)}getMembersExcept(e){return this.getMembers().filter(t=>!e.includes(t.userId))}getMember(e){return this.members[e]||null}getSentinelMember(e){if(!e)return null;var t=this.sentinels[e];if(void 0===t){t=new l["a"](this.roomId,e);var r=this.members[e];null!==r&&void 0!==r&&r.events.member&&t.setMembershipEvent(r.events.member,this),this.sentinels[e]=t}return t}getStateEvents(e,t){if(!this.events.has(e))return void 0===t?[]:null;if(void 0===t)return Array.from(this.events.get(e).values());var r=this.events.get(e).get(t);return r||null}get hasLiveBeacons(){var e;return!(null===(e=this.liveBeaconIds)||void 0===e||!e.length)}get liveBeaconIds(){return this._liveBeaconIds}clone(){var e=new _(this.roomId,this.oobMemberFlags),t=this.oobMemberFlags.status;return this.oobMemberFlags.status=n.NotStarted,Array.from(this.events.values()).forEach(t=>{e.setStateEvents(Array.from(t.values()))}),this.oobMemberFlags.status=t,null!==this.summaryInvitedMemberCount&&e.setInvitedMemberCount(this.getInvitedMemberCount()),null!==this.summaryJoinedMemberCount&&e.setJoinedMemberCount(this.getJoinedMemberCount()),this.oobMemberFlags.status==n.Finished&&this.getMembers().forEach(t=>{var r;t.isOutOfBand()&&(null===(r=e.getMember(t.userId))||void 0===r||r.markOutOfBand())}),e}setUnknownStateEvents(e){var t=e.filter(e=>!this.events.has(e.getType())||!this.events.get(e.getType()).has(e.getStateKey()));this.setStateEvents(t)}setStateEvents(e,t){this.updateModifiedTime(),e.forEach(e=>{var t,r;if(e.getRoomId()===this.roomId&&e.isState()){y["b"].matches(e.getType())&&this.setBeacon(e);var n,o=this.getStateEventMatching(e),a=null===o||void 0===o||null===(t=o.event.unsigned)||void 0===t?void 0:t.replaces_state,s=null===o||void 0===o?void 0:o.event.event_id,c=null===(r=e.event.unsigned)||void 0===r?void 0:r.replaces_state,l=e.event.event_id;if(this.isStartTimelineState){if(c&&s&&c===s)return}else if(a&&l&&a===l)return;if(this.setStateEvent(e),e.getType()===h["b"].RoomMember)this.updateDisplayNameCache(e.getStateKey(),null!==(n=e.getContent().displayname)&&void 0!==n?n:""),this.updateThirdPartyTokenCache(e);this.emit(i.Events,e,this,o)}}),this.onBeaconLivenessChange(),e.forEach(e=>{if(e.getRoomId()===this.roomId&&e.isState())if(e.getType()===h["b"].RoomMember){var r=e.getStateKey();e.getContent().membership!==b["a"].Leave&&e.getContent().membership!==b["a"].Ban||(e.getContent().avatar_url=e.getContent().avatar_url||e.getPrevContent().avatar_url,e.getContent().displayname=e.getContent().displayname||e.getPrevContent().displayname);var n=this.getOrCreateMember(r,e);n.setMembershipEvent(e,this),this.updateMember(n),this.emit(i.Members,e,this,n)}else if(e.getType()===h["b"].RoomPowerLevels){if(""!==e.getStateKey())return;var o=Object.values(this.members);o.forEach(t=>{var r=t.getLastModifiedTime();t.setPowerLevelEvent(e),r!==t.getLastModifiedTime()&&this.emit(i.Members,e,this,t)}),this.sentinels={}}else h["o"].matches(e.getType())&&this.emit(i.Marker,e,t)}),this.emit(i.Update,this)}processBeaconEvents(e,t){var r=this;return a()((function*(){if(e.length&&r.beacons.size){var n=[...r.beacons.values()].reduce((e,t)=>(e[t.beaconInfoId]=t,e),{}),i=(e,t)=>{if(y["a"].matches(t.getType())){var r=n[e];r&&r.addLocations([t])}},o=function*(e){var r,o=null===(r=e.getRelation())||void 0===r?void 0:r.event_id;if(!o||!n[o])return{v:void 0};if(!y["a"].matches(e.getType())&&!e.isEncrypted())return{v:void 0};try{yield t.decryptEventIfNeeded(e),i(o,e)}catch(s){e.isDecryptionFailure()&&e.once(f["c"].Decrypted,a()((function*(){i(o,e)})))}};for(var s of e){var c=yield*o(s);if("object"===typeof c)return c.v}}}))()}getOrCreateMember(e,t){var r=this.members[e];return r||(r=new l["a"](this.roomId,e),this.members[e]=r,this.emit(i.NewMember,t,this,r)),r}setStateEvent(e){this.events.has(e.getType())||this.events.set(e.getType(),new Map),this.events.get(e.getType()).set(e.getStateKey(),e)}setBeacon(e){var t=Object(m["c"])(e);if(this.beacons.has(t)){var r,n=this.beacons.get(t);return e.isRedacted()?void(n.beaconInfoId===(null===(r=e.getRedactionEvent())||void 0===r?void 0:r.redacts)&&(n.destroy(),this.beacons.delete(t))):n.update(e)}if(!e.isRedacted()){var i=new m["a"](e);this.reEmitter.reEmit(i,[m["b"].New,m["b"].Update,m["b"].Destroy,m["b"].LivenessChange]),this.emit(m["b"].New,e,i),i.on(m["b"].LivenessChange,this.onBeaconLivenessChange.bind(this)),i.on(m["b"].Destroy,this.onBeaconLivenessChange.bind(this)),this.beacons.set(i.identifier,i)}}onBeaconLivenessChange(){this._liveBeaconIds=Array.from(this.beacons.values()).filter(e=>e.isLive).map(e=>e.identifier),this.emit(i.BeaconLiveness,this,this.hasLiveBeacons)}getStateEventMatching(e){var t,r;return null!==(t=null===(r=this.events.get(e.getType()))||void 0===r?void 0:r.get(e.getStateKey()))&&void 0!==t?t:null}updateMember(e){var t=this.getStateEvents(h["b"].RoomPowerLevels,"");t&&e.setPowerLevelEvent(t),delete this.sentinels[e.userId],this.members[e.userId]=e,this.joinedMemberCount=null,this.invitedMemberCount=null}needsOutOfBandMembers(){return this.oobMemberFlags.status===n.NotStarted}outOfBandMembersReady(){return this.oobMemberFlags.status===n.Finished}markOutOfBandMembersStarted(){this.oobMemberFlags.status===n.NotStarted&&(this.oobMemberFlags.status=n.InProgress)}markOutOfBandMembersFailed(){this.oobMemberFlags.status===n.InProgress&&(this.oobMemberFlags.status=n.NotStarted)}clearOutOfBandMembers(){var e=0;Object.keys(this.members).forEach(t=>{var r=this.members[t];r.isOutOfBand()&&(++e,delete this.members[t])}),d["b"].log("LL: RoomState removed ".concat(e," members...")),this.oobMemberFlags.status=n.NotStarted}setOutOfBandMembers(e){d["b"].log("LL: RoomState about to set ".concat(e.length," OOB members ...")),this.oobMemberFlags.status===n.InProgress&&(d["b"].log("LL: RoomState put in finished state ..."),this.oobMemberFlags.status=n.Finished,e.forEach(e=>this.setOutOfBandMember(e)),this.emit(i.Update,this))}setOutOfBandMember(e){if(e.getType()===h["b"].RoomMember){var t=e.getStateKey(),r=this.getMember(t);if(!r||r.isOutOfBand()){var n=this.getOrCreateMember(t,e);n.setMembershipEvent(e,this),n.markOutOfBand(),this.updateDisplayNameCache(n.userId,n.name),this.setStateEvent(e),this.updateMember(n),this.emit(i.Members,e,this,n)}}}setTypingEvent(e){Object.values(this.members).forEach((function(t){t.setTypingEvent(e)}))}getInviteForThreePidToken(e){return this.tokenToInvite[e]||null}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}getUserIdsWithDisplayName(e){var t;return null!==(t=this.displayNameToUserIds.get(Object(u["G"])(e)))&&void 0!==t?t:[]}maySendRedactionForEvent(e,t){var r=this.getMember(t);if(!r||r.membership===b["a"].Leave)return!1;if(e.status||e.isRedacted())return!1;var n=this.maySendEvent(h["b"].RoomRedaction,t);return!!n&&(e.getSender()===t||this.hasSufficientPowerLevelFor("redact",r.powerLevel))}hasSufficientPowerLevelFor(e,t){var r=this.getStateEvents(h["b"].RoomPowerLevels,""),n={};r&&(n=r.getContent());var i=50;return Object(u["r"])(n[e])&&(i=n[e]),t>=i}maySendMessage(e){return this.maySendEventOfType(h["b"].RoomMessage,e,!1)}maySendEvent(e,t){return this.maySendEventOfType(e,t,!1)}mayClientSendStateEvent(e,t){return!(t.isGuest()||!t.credentials.userId)&&this.maySendStateEvent(e,t.credentials.userId)}maySendStateEvent(e,t){return this.maySendEventOfType(e,t,!0)}maySendEventOfType(e,t,r){var n,i=this.getStateEvents(h["b"].RoomPowerLevels,""),o={},a=0,s=0,c=0;if(i){n=i.getContent(),o=n.events||{},a=Number.isSafeInteger(n.state_default)?n.state_default:50;var l=n.users&&n.users[t];Number.isSafeInteger(l)?c=l:Number.isSafeInteger(n.users_default)&&(c=n.users_default),Number.isSafeInteger(n.events_default)&&(s=n.events_default)}var d=r?a:s;return Number.isSafeInteger(o[e])&&(d=o[e]),c>=d}mayTriggerNotifOfType(e,t){var r=this.getMember(t);if(!r)return!1;var n=this.getStateEvents(h["b"].RoomPowerLevels,""),i=50;return n&&n.getContent()&&n.getContent().notifications&&Object(u["r"])(n.getContent().notifications[e])&&(i=n.getContent().notifications[e]),r.powerLevel>=i}getJoinRule(){var e,t=this.getStateEvents(h["b"].RoomJoinRules,""),r=null!==(e=null===t||void 0===t?void 0:t.getContent())&&void 0!==e?e:{};return r["join_rule"]||p["c"].Invite}getHistoryVisibility(){var e,t=this.getStateEvents(h["b"].RoomHistoryVisibility,""),r=null!==(e=null===t||void 0===t?void 0:t.getContent())&&void 0!==e?e:{};return r["history_visibility"]||p["b"].Shared}getGuestAccess(){var e,t=this.getStateEvents(h["b"].RoomGuestAccess,""),r=null!==(e=null===t||void 0===t?void 0:t.getContent())&&void 0!==e?e:{};return r["guest_access"]||p["a"].Forbidden}findPredecessor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t=this.getStateEvents(h["b"].RoomPredecessor,"");if(t){var r=t.getContent(),n=r.predecessor_room_id,i=r.last_known_event_id;"string"!==typeof i&&(i=void 0);var o=r.via_servers;if(Array.isArray(o)||(o=void 0),"string"===typeof n)return{roomId:n,eventId:i,viaServers:o}}}var a=this.getStateEvents(h["b"].RoomCreate,"");if(a){var s=a.getContent()["predecessor"];if(s){var c=s["room_id"];if("string"===typeof c){var l=s["event_id"];return"string"===typeof l&&""!==l||(l=void 0),{roomId:c,eventId:l}}}}return null}updateThirdPartyTokenCache(e){if(e.getContent().third_party_invite){var t=(e.getContent().third_party_invite.signed||{}).token;if(t){var r=this.getStateEvents(h["b"].RoomThirdPartyInvite,t);r&&(this.tokenToInvite[t]=e)}}}updateDisplayNameCache(e,t){var r=this.userIdsToDisplayNames[e];if(delete this.userIdsToDisplayNames[e],r){var n=Object(u["G"])(r),i=this.displayNameToUserIds.get(n);if(i){var o=i.filter(t=>t!==e);this.displayNameToUserIds.set(n,o)}}this.userIdsToDisplayNames[e]=t;var a=t&&Object(u["G"])(t);if(a){var s,c=null!==(s=this.displayNameToUserIds.get(a))&&void 0!==s?s:[];c.push(e),this.displayNameToUserIds.set(a,c)}}}},"86a7":function(t,r,n){"use strict";n.d(r,"a",(function(){return I}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("3715"),l=n("f464"),d=n("b83f"),u=n("813d"),h=n("5b5f"),f=[e=>{e.createObjectStore("users",{keyPath:["userId"]}),e.createObjectStore("accountData",{keyPath:["type"]}),e.createObjectStore("sync",{keyPath:["clobber"]})},e=>{var t=e.createObjectStore("oob_membership_events",{keyPath:["room_id","state_key"]});t.createIndex("room","room_id")},e=>{e.createObjectStore("client_options",{keyPath:["clobber"]})},e=>{e.createObjectStore("to_device_queue",{autoIncrement:!0})}],p=f.length;function v(e,t,r){var n=e.openCursor(t);return new Promise((e,t)=>{var i=[];n.onerror=()=>{t(new Error("Query failed: "+n.error))},n.onsuccess=()=>{var t=n.result;t?(i.push(r(t)),t.continue()):e(i)}})}function m(e){return new Promise((t,r)=>{e.oncomplete=function(e){t(e)},e.onerror=function(){r(e.error)}})}function g(e){return new Promise((t,r)=>{e.onsuccess=function(e){t(e)},e.onerror=function(){r(e.error)}})}function y(e){return new Promise((t,r)=>{e.onsuccess=()=>t(e),e.onerror=e=>r(e)})}function b(e){return g(e).then(t=>e.result)}class _{static exists(e,t){return t="matrix-js-sdk:"+(t||"default"),Object(u["a"])(e,t)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this.indexedDB=e,s()(this,"dbName",void 0),s()(this,"syncAccumulator",void 0),s()(this,"db",void 0),s()(this,"disconnected",!0),s()(this,"_isNewlyCreated",!1),s()(this,"syncToDatabasePromise",void 0),s()(this,"pendingUserPresenceData",[]),this.dbName="matrix-js-sdk:"+t,this.syncAccumulator=new l["b"]}connect(e){var t=this;if(!this.disconnected)return h["b"].log("LocalIndexedDBStoreBackend.connect: already connected or connecting"),Promise.resolve();this.disconnected=!1,h["b"].log("LocalIndexedDBStoreBackend.connect: connecting...");var r=this.indexedDB.open(this.dbName,p);return r.onupgradeneeded=e=>{var t=r.result,n=e.oldVersion;h["b"].log("LocalIndexedDBStoreBackend.connect: upgrading from ".concat(n)),n<1&&(this._isNewlyCreated=!0),f.forEach((e,r)=>{n<=r&&e(t)})},r.onblocked=()=>{h["b"].log("can't yet open LocalIndexedDBStoreBackend because it is open elsewhere")},h["b"].log("LocalIndexedDBStoreBackend.connect: awaiting connection..."),g(r).then(o()((function*(){h["b"].log("LocalIndexedDBStoreBackend.connect: connected"),t.db=r.result,t.db.onversionchange=()=>{var e;null===(e=t.db)||void 0===e||e.close(),t.disconnected=!0,t.db=void 0},t.db.onclose=()=>{t.disconnected=!0,t.db=void 0,null===e||void 0===e||e()},yield t.init()})))}isNewlyCreated(){return Promise.resolve(this._isNewlyCreated)}init(){return Promise.all([this.loadAccountData(),this.loadSyncData()]).then(e=>{var[t,r]=e;h["b"].log("LocalIndexedDBStoreBackend: loaded initial data"),this.syncAccumulator.accumulate({next_batch:r.nextBatch,rooms:r.roomsData,account_data:{events:t}},!0)})}getOutOfBandMembers(e){return new Promise((t,r)=>{var n=this.db.transaction(["oob_membership_events"],"readonly"),i=n.objectStore("oob_membership_events"),o=i.index("room"),a=IDBKeyRange.only(e),s=o.openCursor(a),c=[],l=!1;s.onsuccess=()=>{var e=s.result;if(!e)return c.length||l?t(c):t(null);var r=e.value;r.oob_written?l=!0:c.push(r),e.continue()},s.onerror=e=>{r(e)}}).then(t=>(h["b"].log("LL: got ".concat(null===t||void 0===t?void 0:t.length," membershipEvents from storage for room ").concat(e," ...")),t))}setOutOfBandMembers(e,t){var r=this;return o()((function*(){h["b"].log("LL: backend about to store ".concat(t.length)+" members for ".concat(e));var n=r.db.transaction(["oob_membership_events"],"readwrite"),i=n.objectStore("oob_membership_events");t.forEach(e=>{i.put(e)});var o={room_id:e,oob_written:!0,state_key:0};i.put(o),yield m(n),h["b"].log("LL: backend done storing for ".concat(e,"!"))}))()}clearOutOfBandMembers(e){var t=this;return o()((function*(){var r=t.db.transaction(["oob_membership_events"],"readonly"),n=r.objectStore("oob_membership_events"),i=n.index("room"),o=IDBKeyRange.only(e),a=b(i.openKeyCursor(o,"next")).then(e=>(null===e||void 0===e?void 0:e.primaryKey)[1]),s=b(i.openKeyCursor(o,"prev")).then(e=>(null===e||void 0===e?void 0:e.primaryKey)[1]),[c,l]=yield Promise.all([a,s]),d=t.db.transaction(["oob_membership_events"],"readwrite"),u=d.objectStore("oob_membership_events"),f=IDBKeyRange.bound([e,c],[e,l]);h["b"].log("LL: Deleting all users + marker in storage for room ".concat(e,", with key range:"),[e,c],[e,l]),yield y(u.delete(f))}))()}clearDatabase(){return new Promise(e=>{var t;h["b"].log("Removing indexeddb instance: ".concat(this.dbName)),null===(t=this.db)||void 0===t||t.close();var r=this.indexedDB.deleteDatabase(this.dbName);r.onblocked=()=>{h["b"].log("can't yet delete indexeddb ".concat(this.dbName," because it is open elsewhere"))},r.onerror=()=>{h["b"].warn("unable to delete js-sdk store indexeddb: ".concat(r.error)),e()},r.onsuccess=()=>{h["b"].log("Removed indexeddb instance: ".concat(this.dbName)),e()}})}getSavedSync(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.syncAccumulator.getJSON();return t.nextBatch?e?Promise.resolve(Object(d["g"])(t)):Promise.resolve(t):Promise.resolve(null)}getNextBatchToken(){return Promise.resolve(this.syncAccumulator.getNextBatchToken())}setSyncData(e){return Promise.resolve().then(()=>{this.syncAccumulator.accumulate(e)})}syncToDatabase(e){var t=this;return o()((function*(){return t.syncToDatabasePromise?(h["b"].warn("Skipping syncToDatabase() as persist already in flight"),t.pendingUserPresenceData.push(...e),t.syncToDatabasePromise):(e.unshift(...t.pendingUserPresenceData),t.syncToDatabasePromise=t.doSyncToDatabase(e),t.syncToDatabasePromise)}))()}doSyncToDatabase(e){var t=this;return o()((function*(){try{var r=t.syncAccumulator.getJSON(!0);yield Promise.all([t.persistUserPresenceEvents(e),t.persistAccountData(r.accountData),t.persistSyncData(r.nextBatch,r.roomsData)])}finally{t.syncToDatabasePromise=void 0}}))()}persistSyncData(e,t){return h["b"].log("Persisting sync data up to",e),Object(d["B"])(()=>{var r=this.db.transaction(["sync"],"readwrite"),n=r.objectStore("sync");return n.put({clobber:"-",nextBatch:e,roomsData:t}),m(r).then(()=>{h["b"].log("Persisted sync data up to",e)})})}persistAccountData(e){return Object(d["B"])(()=>{var t=this.db.transaction(["accountData"],"readwrite"),r=t.objectStore("accountData");for(var n of e)r.put(n);return m(t).then()})}persistUserPresenceEvents(e){return Object(d["B"])(()=>{var t=this.db.transaction(["users"],"readwrite"),r=t.objectStore("users");for(var n of e)r.put({userId:n[0],event:n[1]});return m(t).then()})}getUserPresenceEvents(){return Object(d["B"])(()=>{var e=this.db.transaction(["users"],"readonly"),t=e.objectStore("users");return v(t,void 0,e=>[e.value.userId,e.value.event])})}loadAccountData(){return h["b"].log("LocalIndexedDBStoreBackend: loading account data..."),Object(d["B"])(()=>{var e=this.db.transaction(["accountData"],"readonly"),t=e.objectStore("accountData");return v(t,void 0,e=>e.value).then(e=>(h["b"].log("LocalIndexedDBStoreBackend: loaded account data"),e))})}loadSyncData(){return h["b"].log("LocalIndexedDBStoreBackend: loading sync data..."),Object(d["B"])(()=>{var e=this.db.transaction(["sync"],"readonly"),t=e.objectStore("sync");return v(t,void 0,e=>e.value).then(e=>(h["b"].log("LocalIndexedDBStoreBackend: loaded sync data"),e.length>1&&h["b"].warn("loadSyncData: More than 1 sync row found."),e.length>0?e[0]:{}))})}getClientOptions(){return Promise.resolve().then(()=>{var e=this.db.transaction(["client_options"],"readonly"),t=e.objectStore("client_options");return v(t,void 0,e=>{var t;return null===(t=e.value)||void 0===t?void 0:t.options}).then(e=>e[0])})}storeClientOptions(e){var t=this;return o()((function*(){var r=t.db.transaction(["client_options"],"readwrite"),n=r.objectStore("client_options");n.put({clobber:"-",options:e}),yield m(r)}))()}saveToDeviceBatches(e){var t=this;return o()((function*(){var r=t.db.transaction(["to_device_queue"],"readwrite"),n=r.objectStore("to_device_queue");for(var i of e)n.add(i);yield m(r)}))()}getOldestToDeviceBatch(){var e=this;return o()((function*(){var t=e.db.transaction(["to_device_queue"],"readonly"),r=t.objectStore("to_device_queue"),n=yield b(r.openCursor());if(!n)return null;var i=n.value;return{id:n.key,txnId:i.txnId,eventType:i.eventType,batch:i.batch}}))()}removeToDeviceBatch(e){var t=this;return o()((function*(){var r=t.db.transaction(["to_device_queue"],"readwrite"),n=r.objectStore("to_device_queue");n.delete(e),yield m(r)}))()}destroy(){var e=this;return o()((function*(){var t;null===(t=e.db)||void 0===t||t.close()}))()}}class w{constructor(e,t){this.workerFactory=e,this.dbName=t,s()(this,"worker",void 0),s()(this,"nextSeq",0),s()(this,"inFlight",{}),s()(this,"startPromise",void 0),s()(this,"onWorkerMessage",e=>{var t,r=e.data;if("closed"==r.command)null===(t=this.onClose)||void 0===t||t.call(this);else if("cmd_success"==r.command||"cmd_fail"==r.command){if(void 0===r.seq)return void h["b"].error("Got reply from worker with no seq");var n=this.inFlight[r.seq];if(void 0===n)return void h["b"].error("Got reply for unknown seq "+r.seq);if(delete this.inFlight[r.seq],"cmd_success"==r.command)n.resolve(r.result);else{var i=new Error(r.error.message);i.name=r.error.name,n.reject(i)}}else h["b"].warn("Unrecognised message from worker: ",r)})}connect(e){return this.onClose=e,this.ensureStarted().then(()=>this.doCmd("connect"))}clearDatabase(){return this.ensureStarted().then(()=>this.doCmd("clearDatabase"))}isNewlyCreated(){return this.doCmd("isNewlyCreated")}getSavedSync(){return this.doCmd("getSavedSync")}getNextBatchToken(){return this.doCmd("getNextBatchToken")}setSyncData(e){return this.doCmd("setSyncData",[e])}syncToDatabase(e){return this.doCmd("syncToDatabase",[e])}getOutOfBandMembers(e){return this.doCmd("getOutOfBandMembers",[e])}setOutOfBandMembers(e,t){return this.doCmd("setOutOfBandMembers",[e,t])}clearOutOfBandMembers(e){return this.doCmd("clearOutOfBandMembers",[e])}getClientOptions(){return this.doCmd("getClientOptions")}storeClientOptions(e){return this.doCmd("storeClientOptions",[e])}getUserPresenceEvents(){return this.doCmd("getUserPresenceEvents")}saveToDeviceBatches(e){var t=this;return o()((function*(){return t.doCmd("saveToDeviceBatches",[e])}))()}getOldestToDeviceBatch(){var e=this;return o()((function*(){return e.doCmd("getOldestToDeviceBatch")}))()}removeToDeviceBatch(e){var t=this;return o()((function*(){return t.doCmd("removeToDeviceBatch",[e])}))()}ensureStarted(){return this.startPromise||(this.worker=this.workerFactory(),this.worker.onmessage=this.onWorkerMessage,this.startPromise=this.doCmd("setupWorker",[this.dbName]).then(()=>{h["b"].log("IndexedDB worker is ready")})),this.startPromise}doCmd(e,t){return Promise.resolve().then(()=>{var r,n=this.nextSeq++,i=Object(d["i"])();return this.inFlight[n]=i,null===(r=this.worker)||void 0===r||r.postMessage({command:e,seq:n,args:t}),i.promise})}destroy(){var e=this;return o()((function*(){var t;null===(t=e.worker)||void 0===t||t.terminate()}))()}}var S=n("edaf"),E=n("936a"),k=3e5;class I extends c["a"]{static exists(e,t){return _.exists(e,t)}constructor(e){if(super(e),s()(this,"backend",void 0),s()(this,"startedUp",!1),s()(this,"syncTs",0),s()(this,"userModifiedMap",{}),s()(this,"emitter",new E["b"]),s()(this,"on",this.emitter.on.bind(this.emitter)),s()(this,"onClose",()=>{this.emitter.emit("closed")}),s()(this,"getSavedSync",this.degradable(()=>this.backend.getSavedSync(),"getSavedSync")),s()(this,"isNewlyCreated",this.degradable(()=>this.backend.isNewlyCreated(),"isNewlyCreated")),s()(this,"getSavedSyncToken",this.degradable(()=>this.backend.getNextBatchToken(),"getSavedSyncToken")),s()(this,"deleteAllData",this.degradable(()=>(super.deleteAllData(),this.backend.clearDatabase().then(()=>{h["b"].log("Deleted indexeddb data.")},e=>{throw h["b"].error("Failed to delete indexeddb data: ".concat(e)),e})))),s()(this,"reallySave",this.degradable(()=>{this.syncTs=Date.now();var e=[];for(var t of this.getUsers())this.userModifiedMap[t.userId]!==t.getLastModifiedTime()&&t.events.presence&&(e.push([t.userId,t.events.presence.event]),this.userModifiedMap[t.userId]=t.getLastModifiedTime());return this.backend.syncToDatabase(e)})),s()(this,"setSyncData",this.degradable(e=>this.backend.setSyncData(e),"setSyncData")),s()(this,"getOutOfBandMembers",this.degradable(e=>this.backend.getOutOfBandMembers(e),"getOutOfBandMembers")),s()(this,"setOutOfBandMembers",this.degradable((e,t)=>(super.setOutOfBandMembers(e,t),this.backend.setOutOfBandMembers(e,t)),"setOutOfBandMembers")),s()(this,"clearOutOfBandMembers",this.degradable(e=>(super.clearOutOfBandMembers(e),this.backend.clearOutOfBandMembers(e)),"clearOutOfBandMembers")),s()(this,"getClientOptions",this.degradable(()=>this.backend.getClientOptions(),"getClientOptions")),s()(this,"storeClientOptions",this.degradable(e=>(super.storeClientOptions(e),this.backend.storeClientOptions(e)),"storeClientOptions")),!e.indexedDB)throw new Error("Missing required option: indexedDB");e.workerFactory?this.backend=new w(e.workerFactory,e.dbName):this.backend=new _(e.indexedDB,e.dbName)}startup(){return this.startedUp?(h["b"].log("IndexedDBStore.startup: already started"),Promise.resolve()):(h["b"].log("IndexedDBStore.startup: connecting to backend"),this.backend.connect(this.onClose).then(()=>(h["b"].log("IndexedDBStore.startup: loading presence events"),this.backend.getUserPresenceEvents())).then(e=>{h["b"].log("IndexedDBStore.startup: processing presence events"),e.forEach(e=>{var[t,r]=e;if(!this.createUser)throw new Error("`IndexedDBStore.startup` must be called after assigning it to the client, not before!");var n=this.createUser(t);r&&n.setPresenceEvent(new S["b"](r)),this.userModifiedMap[n.userId]=n.getLastModifiedTime(),this.storeUser(n)}),this.startedUp=!0}))}destroy(){return this.backend.destroy()}wantsSave(){var e=Date.now();return e-this.syncTs>k}save(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.wantsSave()?this.reallySave():Promise.resolve()}degradable(t,r){var n=this,i=r?super[r]:null;return o()((function*(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];try{return yield t.call(n,...o)}catch(e){h["b"].error("IndexedDBStore failure, degrading to MemoryStore",e),n.emitter.emit("degraded",e);try{h["b"].log("IndexedDBStore trying to delete degraded data"),yield n.backend.clearDatabase(),h["b"].log("IndexedDBStore delete after degrading succeeded")}catch(e){h["b"].warn("IndexedDBStore delete after degrading failed",e)}if(i)return i.call(n,...o)}}))}getPendingEvents(t){var r=()=>super.getPendingEvents,n=this;return o()((function*(){if(!n.localStorage)return r().call(n,t);var i=n.localStorage.getItem(C(t));if(i)try{return JSON.parse(i)}catch(e){h["b"].error("Could not parse persisted pending events",e)}return[]}))()}setPendingEvents(e,t){var r=()=>super.setPendingEvents,n=this;return o()((function*(){if(!n.localStorage)return r().call(n,e,t);t.length>0?n.localStorage.setItem(C(e),JSON.stringify(t)):n.localStorage.removeItem(C(e))}))()}saveToDeviceBatches(e){return this.backend.saveToDeviceBatches(e)}getOldestToDeviceBatch(){return this.backend.getOldestToDeviceBatch()}removeToDeviceBatch(e){return this.backend.removeToDeviceBatch(e)}}function C(e){return"mx_pending_events_".concat(e)}},"86d3":function(e,t,r){var n=r("5521");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("e156df52",n,e)}},8707:function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r("b639"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},8708:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n;r("3925"),r("60af");(function(e){e["Sas"]="m.sas.v1",e["ShowQrCode"]="m.qr_code.show.v1",e["ScanQrCode"]="m.qr_code.scan.v1",e["Reciprocate"]="m.reciprocate.v1"})(n||(n={}))},"87bd":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r("c973"),i=r.n(n),o=r("6dde"),a=5e5,s=256;function c(e,t){if(!e.private_key_salt||!e.private_key_iterations)throw new Error("Salt and/or iterations not found: this backup cannot be restored with a passphrase");return u(t,e.private_key_salt,e.private_key_iterations,e.private_key_bits||s)}function l(e){return d.apply(this,arguments)}function d(){return d=i()((function*(e){var t=Object(o["a"])(32),r=yield u(e,t,a,s);return{key:r,salt:t,iterations:a}})),d.apply(this,arguments)}function u(e,t,r){return h.apply(this,arguments)}function h(){return h=i()((function*(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s;if(!globalThis.crypto.subtle||!TextEncoder)throw new Error("Password-based backup is not available on this platform");var i=yield globalThis.crypto.subtle.importKey("raw",(new TextEncoder).encode(e),{name:"PBKDF2"},!1,["deriveBits"]),o=yield globalThis.crypto.subtle.deriveBits({name:"PBKDF2",salt:(new TextEncoder).encode(t),iterations:r,hash:"SHA-512"},i,n);return new Uint8Array(o)})),h.apply(this,arguments)}},"881f":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("396a");function i(e,t){var r=new Map(Object.entries(e.keys)),i=e.getDisplayName()||void 0,o=new Map;if(e.signatures)for(var a in e.signatures)o.set(a,new Map(Object.entries(e.signatures[a])));return new n["a"]({deviceId:e.deviceId,userId:t,keys:r,algorithms:e.algorithms,verified:e.verified,signatures:o,displayName:i})}},"886e":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("a74c"),i=new n["b"]("unread_thread_notifications","org.matrix.msc3773.unread_thread_notifications")},8875:function(e,t,r){var n,i,o;(function(r,a){i=[],n=a,o="function"===typeof n?n.apply(t,i):n,void 0===o||(e.exports=o)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var r,n,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=o.exec(f.stack)||a.exec(f.stack),c=s&&s[1]||!1,l=s&&s[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");c===d&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(n,"$1").trim());for(var h=0;h<u.length;h++){if("interactive"===u[h].readyState)return u[h];if(u[h].src===c)return u[h];if(c===d&&u[h].innerHTML&&u[h].innerHTML.trim()===i)return u[h]}return null}}return e}))},8894:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"88a7":function(e,t,r){"use strict";var n=r("cb2d"),i=r("e330"),o=r("577e"),a=r("d6d6"),s=URLSearchParams,c=s.prototype,l=i(c.append),d=i(c["delete"]),u=i(c.forEach),h=i([].push),f=new s("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&n(c,"delete",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return d(this,e);var n=[];u(this,(function(e,t){h(n,{key:t,value:e})})),a(t,1);var i,s=o(e),c=o(r),f=0,p=0,v=!1,m=n.length;while(f<m)i=n[f++],v||i.key===s?(v=!0,d(this,i.key)):p++;while(p<m)i=n[p++],i.key===s&&i.value===c||l(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},8925:function(e,t,r){"use strict";var n=r("e330"),i=r("1626"),o=r("c6cd"),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},8976:function(e,t,r){"use strict";r.r(t);var n=r("a5f6");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"89fd":function(e,t,r){e.exports=r("0ac3").Transform},"8b5c":function(t,r,n){"use strict";(function(r){var i=n("a593"),o=n("820f"),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function c(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof r)&&(e=n("2100")),e}var l={adapter:c(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(a)})),t.exports=l}).call(this,n("4362"))},"8be6":function(e,t,r){var n=r("8707").Buffer;e.exports=function(e,t,r){if(n.isBuffer(e))return e;if("string"===typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},"8c1e":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_POLL_START=t.M_POLL_RESPONSE=t.M_POLL_KIND_UNDISCLOSED=t.M_POLL_KIND_DISCLOSED=t.M_POLL_END=void 0;var n=r("d308"),i=new n.UnstableValue("m.poll.disclosed","org.matrix.msc3381.poll.disclosed");t.M_POLL_KIND_DISCLOSED=i;var o=new n.UnstableValue("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed");t.M_POLL_KIND_UNDISCLOSED=o;var a=new n.UnstableValue("m.poll.start","org.matrix.msc3381.poll.start");t.M_POLL_START=a;var s=new n.UnstableValue("m.poll.response","org.matrix.msc3381.poll.response");t.M_POLL_RESPONSE=s;var c=new n.UnstableValue("m.poll.end","org.matrix.msc3381.poll.end");t.M_POLL_END=c},"8c79":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"8cd7":function(e,t,r){},"8d13":function(e,t,r){"use strict";r.r(t);var n=r("b596");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"8d45":function(t,r,n){"use strict";n.d(r,"a",(function(){return b}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("dcab"),l=n("edaf"),d=n("60af"),u=n("5b5f"),h=n("afe6"),f=n("480c"),p=n("a95b"),v=n("1073"),m=n("b83f");function g(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new y(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function y(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return y=function(e){this.s=e,this.n=e.next},y.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new y(e)}class b extends h["d"]{constructor(e,t,r,n,i){var a,p,v,m,g,y,b,_,w,S,E,k,I;super(n),a=this,this.widgetApi=e,this.capabilities=t,this.roomId=r,s()(this,"room",void 0),s()(this,"widgetApiReady",void 0),s()(this,"lifecycle",void 0),s()(this,"syncState",null),s()(this,"onEvent",function(){var e=o()((function*(e){if(e.preventDefault(),e.detail.data.room_id===a.roomId){var t=new l["b"](e.detail.data);yield a.syncApi.injectRoomEvents(a.room,[],[t]),a.emit(h["b"].Event,t),a.setSyncState(f["c"].Syncing),u["b"].info("Received event ".concat(t.getId()," ").concat(t.getType()," ").concat(t.getStateKey()))}else{var{event_id:r,room_id:n}=e.detail.data;u["b"].info("Received event ".concat(r," for a different room ").concat(n,"; discarding"))}yield a.ack(e)}));return function(t){return e.apply(this,arguments)}}()),s()(this,"onToDevice",function(){var e=o()((function*(e){e.preventDefault();var t=new l["b"]({type:e.detail.data.type,sender:e.detail.data.sender,content:e.detail.data.content});e.detail.data.encrypted&&t.makeEncrypted(d["b"].RoomMessageEncrypted,{},"",""),a.emit(h["b"].ToDeviceEvent,t),a.setSyncState(f["c"].Syncing),yield a.ack(e)}));return function(t){return e.apply(this,arguments)}}()),this.widgetApiReady=new Promise(e=>this.widgetApi.once("ready",e)),(null!==(p=t.sendEvent)&&void 0!==p&&p.length||null!==(v=t.receiveEvent)&&void 0!==v&&v.length||!0===t.sendMessage||Array.isArray(t.sendMessage)&&t.sendMessage.length||!0===t.receiveMessage||Array.isArray(t.receiveMessage)&&t.receiveMessage.length||null!==(m=t.sendState)&&void 0!==m&&m.length||null!==(g=t.receiveState)&&void 0!==g&&g.length)&&e.requestCapabilityForRoomTimeline(r),null===(y=t.sendEvent)||void 0===y||y.forEach(t=>e.requestCapabilityToSendEvent(t)),null===(b=t.receiveEvent)||void 0===b||b.forEach(t=>e.requestCapabilityToReceiveEvent(t)),!0===t.sendMessage?e.requestCapabilityToSendMessage():Array.isArray(t.sendMessage)&&t.sendMessage.forEach(t=>e.requestCapabilityToSendMessage(t)),!0===t.receiveMessage?e.requestCapabilityToReceiveMessage():Array.isArray(t.receiveMessage)&&t.receiveMessage.forEach(t=>e.requestCapabilityToReceiveMessage(t)),null===(_=t.sendState)||void 0===_||_.forEach(t=>{var{eventType:r,stateKey:n}=t;return e.requestCapabilityToSendState(r,n)}),null===(w=t.receiveState)||void 0===w||w.forEach(t=>{var{eventType:r,stateKey:n}=t;return e.requestCapabilityToReceiveState(r,n)}),null===(S=t.sendToDevice)||void 0===S||S.forEach(t=>e.requestCapabilityToSendToDevice(t)),null===(E=t.receiveToDevice)||void 0===E||E.forEach(t=>e.requestCapabilityToReceiveToDevice(t)),t.sendDelayedEvents&&(null!==(k=t.sendEvent)&&void 0!==k&&k.length||!0===t.sendMessage||Array.isArray(t.sendMessage)&&t.sendMessage.length||null!==(I=t.sendState)&&void 0!==I&&I.length)&&e.requestCapability(c["MatrixCapabilities"].MSC4157SendDelayedEvent),t.updateDelayedEvents&&e.requestCapability(c["MatrixCapabilities"].MSC4157UpdateDelayedEvent),t.turnServers&&e.requestCapability(c["MatrixCapabilities"].MSC3846TurnServers),e.on("action:".concat(c["WidgetApiToWidgetAction"].SendEvent),this.onEvent),e.on("action:".concat(c["WidgetApiToWidgetAction"].SendToDevice),this.onToDevice),e.start(),i&&e.sendContentLoaded()}startClient(){var e=arguments,t=this;return o()((function*(){var r,n,i=e.length>0&&void 0!==e[0]?e[0]:{};t.lifecycle=new AbortController;var a=t.getUserId();a&&t.store.storeUser(new v["a"](a)),i.slidingSync?t.syncApi=new p["a"](i.slidingSync,t,i,t.buildSyncApiOptions()):t.syncApi=new f["b"](t,i,t.buildSyncApiOptions()),t.room=t.syncApi.createRoom(t.roomId),t.store.storeRoom(t.room),yield t.widgetApiReady,yield Promise.all(null!==(r=null===(n=t.capabilities.receiveState)||void 0===n?void 0:n.map(function(){var e=o()((function*(e){var{eventType:r,stateKey:n}=e,i=yield t.widgetApi.readStateEvents(r,void 0,n,[t.roomId]),o=i.map(e=>new l["b"](e));yield t.syncApi.injectRoomEvents(t.room,[],o),o.forEach(e=>{t.emit(h["b"].Event,e),u["b"].info("Backfilled event ".concat(e.getId()," ").concat(e.getType()," ").concat(e.getStateKey()))})}));return function(t){return e.apply(this,arguments)}}()))&&void 0!==r?r:[]),void 0!==i.clientWellKnownPollPeriod&&(t.clientWellKnownIntervalID=setInterval(()=>{t.fetchClientWellKnown()},1e3*i.clientWellKnownPollPeriod),t.fetchClientWellKnown()),t.setSyncState(f["c"].Syncing),u["b"].info("Finished backfilling events"),t.matrixRTC.start(),t.capabilities.turnServers&&t.watchTurnServers()}))()}stopClient(){this.widgetApi.off("action:".concat(c["WidgetApiToWidgetAction"].SendEvent),this.onEvent),this.widgetApi.off("action:".concat(c["WidgetApiToWidgetAction"].SendToDevice),this.onToDevice),super.stopClient(),this.lifecycle.abort()}joinRoom(e){var t=this;return o()((function*(){if(e===t.roomId)return t.room;throw new Error("Unknown room: ".concat(e))}))()}encryptAndSendEvent(t,r,n){var i=this;return o()((function*(){if(n){var o=yield i.widgetApi.sendRoomEvent(r.getType(),r.getContent(),t.roomId,"delay"in n?n.delay:void 0,"parent_delay_id"in n?n.parent_delay_id:void 0);return i.validateSendDelayedEventResponse(o)}var a;try{a=yield i.widgetApi.sendRoomEvent(r.getType(),r.getContent(),t.roomId)}catch(e){throw i.updatePendingEventStatus(t,r,l["a"].NOT_SENT),e}return t.updatePendingEvent(r,l["a"].SENT,a.event_id),{event_id:a.event_id}}))()}sendStateEvent(e,t,r){var n=arguments,i=this;return o()((function*(){var o=n.length>3&&void 0!==n[3]?n[3]:"",a=yield i.widgetApi.sendStateEvent(t,o,r,e);if(void 0===a.event_id)throw new Error("'event_id' absent from response to an event request");return{event_id:a.event_id}}))()}_unstable_sendDelayedStateEvent(e,t,r,n){var i=arguments,a=this;return o()((function*(){var o=i.length>4&&void 0!==i[4]?i[4]:"";if(!(yield a.doesServerSupportUnstableFeature(h["j"])))throw Error("Server does not support the delayed events API");var s=yield a.widgetApi.sendStateEvent(r,o,n,e,"delay"in t?t.delay:void 0,"parent_delay_id"in t?t.parent_delay_id:void 0);return a.validateSendDelayedEventResponse(s)}))()}validateSendDelayedEventResponse(e){if(void 0===e.delay_id)throw new Error("'delay_id' absent from response to a delayed event request");return{delay_id:e.delay_id}}_unstable_updateDelayedEvent(e,t){var r=this;return o()((function*(){if(!(yield r.doesServerSupportUnstableFeature(h["j"])))throw Error("Server does not support the delayed events API");return yield r.widgetApi.updateDelayedEvent(e,t)}))()}sendToDevice(e,t){var r=this;return o()((function*(){return yield r.widgetApi.sendToDevice(e,!1,Object(m["C"])(t)),{}}))()}getOpenIdToken(){var e=this;return o()((function*(){var t=yield e.widgetApi.requestOpenIDConnectToken();return{access_token:t.access_token,expires_in:t.expires_in,matrix_server_name:t.matrix_server_name,token_type:t.token_type}}))()}queueToDevice(e){var t=this;return o()((function*(){var{eventType:r,batch:n}=e,i=new m["b"](()=>new Map);for(var{userId:o,deviceId:a,payload:s}of n)i.getOrCreate(o).set(a,s);yield t.widgetApi.sendToDevice(r,!1,Object(m["C"])(i))}))()}encryptAndSendToDevices(e,t){var r=this;return o()((function*(){var n=new m["b"](()=>new Map);for(var{userId:i,deviceInfo:{deviceId:o}}of e)n.getOrCreate(i).set(o,t);yield r.widgetApi.sendToDevice(t.type,!0,Object(m["C"])(n))}))()}checkTurnServers(){var e=this;return o()((function*(){return e.turnServers.length>0}))()}getSyncState(){return this.syncState}setSyncState(e){var t=this.syncState;this.syncState=e,this.emit(h["b"].Sync,e,t)}ack(e){var t=this;return o()((function*(){yield t.widgetApi.transport.reply(e.detail,{})}))()}watchTurnServers(){var t=this;return o()((function*(){var r=t.widgetApi.getTurnServers(),n=()=>{r.return(void 0)};t.lifecycle.signal.addEventListener("abort",n);try{var i,o=!1,a=!1;try{for(var s,c=g(r);o=!(s=yield c.next()).done;o=!1){var l=s.value;t.turnServers=[{urls:l.uris,username:l.username,credential:l.password}],t.emit(h["b"].TurnServers,t.turnServers),u["b"].log("Received TURN server: ".concat(l.uris))}}catch(d){a=!0,i=d}finally{try{o&&null!=c.return&&(yield c.return())}finally{if(a)throw i}}}catch(e){u["b"].warn("Error watching TURN servers",e)}finally{t.lifecycle.signal.removeEventListener("abort",n)}}))()}}},"8db5":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'/*! HTML5 Boilerplate v7.3.0 | MIT License | https://html5boilerplate.com/ */:root{--app-margin-top-default:0px;--app-margin-top:max(env(safe-area-inset-top),var(--app-margin-top-default));--app-margin-bottom-default:0px;--keyboardheight:0px;--app-margin-bottom:max(env(safe-area-inset-bottom),var(--app-margin-bottom-default));--safe-area-inset-top:0px;--safe-area-inset-right:0px;--safe-area-inset-bottom:0px;--safe-area-inset-left:0px}@supports (padding-top:constant(safe-area-inset-top)){:root{--safe-area-inset-top:constant(safe-area-inset-top,0);--safe-area-inset-right:constant(safe-area-inset-right,0);--safe-area-inset-bottom:constant(safe-area-inset-bottom,0);--safe-area-inset-left:constant(safe-area-inset-left,0)}}@supports (padding-top:env(safe-area-inset-top)){:root{--safe-area-inset-top:env(safe-area-inset-top,0);--safe-area-inset-right:env(safe-area-inset-right,0);--safe-area-inset-bottom:env(safe-area-inset-bottom,0);--safe-area-inset-left:env(safe-area-inset-left,0)}}:root{--background-hidden-layer:255,255,255;--background-total-theme:255,255,255;--background-secondary-theme:250,250,250;--background-main:240,242,245;--background-main-contrast:10,12,23;--color-medium-theme:199,200,217;--neutral-grad-0:235,235,240;--neutral-grad-1:227,228,235;--neutral-grad-2:142,144,166;--neutral-grad-3:85,87,112;--neutral-grad-4:64,65,82;--text-color:10,12,23;--text-on-main-bg-color:85,87,112;--text-on-bg-ac-color:255,255,255;--color-bg-ac-bright:0,163,247;--color-bg-ac:0,164,255;--color-bg-ac-1:0,142,191;--color-bg-ac-2:250,110,132;--color-bg-selection:179,212,252;--color-txt-ac:0,164,255;--color-txt-ac-1:0,142,191;--color-txt-ac-2:250,110,132;--color-txt-gray:70,71,98;--color-txt-gray-dark:53,53,63;--color-bg-orange:255,59,0;--color-txt-orange:255,72,0;--color-star-yellow:255,174,0;--color-shadow-base:2,18,24;--color-shadow-var:32,35,42;--text-on-bg-shadow-color:255,255,255;--color-bad:244,26,77;--color-nrml:0,0,0;--color-good:7,108,52;--color-yellow:255,238,0}:root,:root[theme=black]{--voice-message-fillStyle:81,129,184}:root[theme=black]{--background-hidden-layer:10,12,23;--background-total-theme:18,22,33;--background-secondary-theme:24,36,52;--background-main:14,28,43;--background-main-contrast:240,242,245;--color-medium-theme:99,100,117;--neutral-grad-0:16,16,17;--neutral-grad-1:34,34,37;--neutral-grad-2:59,59,71;--neutral-grad-3:77,78,92;--neutral-grad-4:85,87,112;--text-color:178,171,172;--text-on-main-bg-color:85,87,112;--text-on-bg-ac-color:255,255,255;--color-bg-ac-bright:0,90,200;--color-bg-ac:0,80,190;--color-bg-ac-1:0,142,191;--color-bg-ac-2:250,110,132;--color-bg-selection:179,212,252;--color-txt-ac:0,164,255;--color-txt-ac-1:0,142,191;--color-txt-ac-2:250,110,132;--color-txt-gray:103,105,128;--color-txt-gray-dark:113,113,134;--color-bg-orange:255,72,0;--text-txt-orange:255,72,0;--color-shadow-base:12,14,33;--color-shadow-var:18,18,26;--text-on-bg-shadow-color:214,219,230;--color-bad:244,26,77;--color-nrml:0,0,0;--color-good:7,108,52;--color-yellow:255,238,0}html{font-size:1em;line-height:1.4;position:relative;overflow-y:hidden;overflow-x:hidden;background:rgb(var(--background-total-theme))}body,html{min-height:100%}body{height:100%}*{box-sizing:border-box}a{color:inherit}::-moz-selection{background:#b3d4fc;text-shadow:none}::selection{background:#b3d4fc;text-shadow:none}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{border:0;margin:0;padding:0}textarea{resize:vertical}.browserupgrade{margin:.2em 0;background:#ccc;color:#000;padding:.2em 0}.hidden{display:none!important}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.sr-only.focusable:active,.sr-only.focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;white-space:inherit;width:auto}.invisible{visibility:hidden}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}@media print{*,:after,:before{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}pre{white-space:pre-wrap!important}blockquote,pre{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}}',""]),e.exports=t},"8df4":function(e,t,r){"use strict";var n=r("7a77");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e,t=new i((function(t){e=t}));return{token:t,cancel:e}},e.exports=i},"8e08":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}t.IntegrityError=n;class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}t.NotImplementedError=i},"8e15":function(e,t,r){var n=r("0904");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("f2697ad2",n,e)}},"8e26":function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("69fc"),a=n("bbd4");class s{constructor(e,t,r){this._cipher=e,this._subkey1=t,this._subkey2=r,this._bufferPos=0,this._finished=!1,this._buffer=new o.default}static importKey(e,t){return i(this,void 0,void 0,(function*(){const r=yield e.importBlockCipherKey(t),n=new o.default;yield r.encryptBlock(n),n.dbl();const i=n.clone();return i.dbl(),new s(r,n,i)}))}reset(){return this._buffer.clear(),this._bufferPos=0,this._finished=!1,this}clear(){this.reset(),this._subkey1.clear(),this._subkey2.clear()}update(e){return i(this,void 0,void 0,(function*(){const t=o.default.SIZE-this._bufferPos;let r=0,n=e.length;if(n>t){for(let r=0;r<t;r++)this._buffer.data[this._bufferPos+r]^=e[r];n-=t,r+=t,yield this._cipher.encryptBlock(this._buffer),this._bufferPos=0}while(n>o.default.SIZE){for(let t=0;t<o.default.SIZE;t++)this._buffer.data[t]^=e[r+t];n-=o.default.SIZE,r+=o.default.SIZE,yield this._cipher.encryptBlock(this._buffer)}for(let i=0;i<n;i++)this._buffer.data[this._bufferPos++]^=e[r+i];return this}))}finish(){return i(this,void 0,void 0,(function*(){if(!this._finished){const e=this._bufferPos<o.default.SIZE?this._subkey2:this._subkey1;a.xor(this._buffer.data,e.data),this._bufferPos<o.default.SIZE&&(this._buffer.data[this._bufferPos]^=128),yield this._cipher.encryptBlock(this._buffer),this._finished=!0}return this._buffer.clone().data}))}}r.CMAC=s},"8ec6":function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"8ed1":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));var n,i="org.matrix.msc3077.sdp_stream_metadata";(function(e){e["Usermedia"]="m.usermedia",e["Screenshare"]="m.screenshare"})(n||(n={}))},"8fb6":function(e,t,r){},"903c":function(e,t,r){"use strict";var n=r("c9b8").codes.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function o(){}function a(e){return e.setHeader&&"function"===typeof e.abort}function s(e,t,r){if("function"===typeof t)return s(e,null,t);t||(t={}),r=i(r||o);var c=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,d=function(){e.writable||h()},u=e._writableState&&e._writableState.finished,h=function(){l=!1,u=!0,c||r.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){c=!1,f=!0,l||r.call(e)},v=function(t){r.call(e,t)},m=function(){var t;return c&&!f?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):l&&!u?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},g=function(){e.req.on("finish",h)};return a(e)?(e.on("complete",h),e.on("abort",m),e.req?g():e.on("request",g)):l&&!e._writableState&&(e.on("end",d),e.on("close",d)),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",v),e.on("close",m),function(){e.removeListener("complete",h),e.removeListener("abort",m),e.removeListener("request",g),e.req&&e.req.removeListener("finish",h),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",v),e.removeListener("close",m)}}e.exports=s},9060:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("8e08"),a=n("69f5"),s=n("4d5e");class c{constructor(e=window.crypto){this.crypto=e}importBlockCipherKey(e){return i(this,void 0,void 0,(function*(){return a.default.importKey(this.crypto,e)}))}importCTRKey(t){return i(this,void 0,void 0,(function*(){try{return yield s.default.importKey(this.crypto,t)}catch(e){throw e.message.includes("unsupported")?new o.NotImplementedError("WebCryptoProvider: AES-CTR unsupported. Use PolyfillCryptoProvider."):e}}))}}r.WebCryptoProvider=c},"907a":function(e,t,r){"use strict";var n=r("ebb5"),i=r("07fa"),o=r("5926"),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("at",(function(e){var t=a(this),r=i(t),n=o(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}))},9083:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"setCryptoStoreFactory",(function(){return de})),r.d(t,"createClient",(function(){return he})),r.d(t,"createRoomWidgetClient",(function(){return fe}));var n=r("d2bd"),i=r("3715"),o=r("6bf4"),a=r("afe6"),s=r("8d45");r.d(t,"CRYPTO_ENABLED",(function(){return a["a"]})),r.d(t,"UNSTABLE_MSC3852_LAST_SEEN_UA",(function(){return a["i"]})),r.d(t,"PendingEventOrdering",(function(){return a["e"]})),r.d(t,"GET_LOGIN_TOKEN_CAPABILITY",(function(){return a["c"]})),r.d(t,"UNSTABLE_MSC2666_SHARED_ROOMS",(function(){return a["h"]})),r.d(t,"UNSTABLE_MSC2666_MUTUAL_ROOMS",(function(){return a["f"]})),r.d(t,"UNSTABLE_MSC2666_QUERY_MUTUAL_ROOMS",(function(){return a["g"]})),r.d(t,"UNSTABLE_MSC4140_DELAYED_EVENTS",(function(){return a["j"]})),r.d(t,"ClientEvent",(function(){return a["b"]})),r.d(t,"MatrixClient",(function(){return a["d"]})),r.d(t,"fixNotificationCountOnDecryption",(function(){return a["k"]})),r.d(t,"threadIdForReceipt",(function(){return a["m"]})),r.d(t,"inMainTimelineForReceipt",(function(){return a["l"]}));var c=r("123d");r.d(t,"RoomVersionStability",(function(){return c["a"]})),r.d(t,"ServerCapabilities",(function(){return c["b"]})),r.d(t,"RoomWidgetClient",(function(){return s["a"]}));var l=r("9c88");r.d(t,"HttpApiEvent",(function(){return l["d"]})),r.d(t,"ClientPrefix",(function(){return l["a"]})),r.d(t,"IdentityPrefix",(function(){return l["e"]})),r.d(t,"MediaPrefix",(function(){return l["h"]})),r.d(t,"HTTPError",(function(){return l["c"]})),r.d(t,"MatrixError",(function(){return l["f"]})),r.d(t,"ConnectionError",(function(){return l["b"]})),r.d(t,"Method",(function(){return l["i"]})),r.d(t,"timeoutSignal",(function(){return l["n"]})),r.d(t,"anySignal",(function(){return l["j"]})),r.d(t,"parseErrorResponse",(function(){return l["l"]})),r.d(t,"retryNetworkOperation",(function(){return l["m"]})),r.d(t,"calculateRetryBackoff",(function(){return l["k"]})),r.d(t,"MatrixHttpApi",(function(){return l["g"]}));var d=r("2a22");r.d(t,"AutoDiscoveryAction",(function(){return d["b"]})),r.d(t,"AutoDiscoveryError",(function(){return d["c"]})),r.d(t,"AutoDiscovery",(function(){return d["a"]}));var u=r("f464");r.d(t,"Category",(function(){return u["a"]})),r.d(t,"SyncAccumulator",(function(){return u["b"]}));var h=r("62a0");r.d(t,"InvalidCryptoStoreState",(function(){return h["c"]})),r.d(t,"InvalidCryptoStoreError",(function(){return h["b"]})),r.d(t,"KeySignatureUploadError",(function(){return h["d"]})),r.d(t,"ClientStoppedError",(function(){return h["a"]}));var f=r("da1e");r.d(t,"encodeBase64",(function(){return f["b"]})),r.d(t,"encodeUnpaddedBase64",(function(){return f["c"]})),r.d(t,"encodeUnpaddedBase64Url",(function(){return f["d"]})),r.d(t,"decodeBase64",(function(){return f["a"]}));var p=r("6642");r.d(t,"BeaconEvent",(function(){return p["b"]})),r.d(t,"isTimestampInDuration",(function(){return p["d"]})),r.d(t,"getBeaconInfoIdentifier",(function(){return p["c"]})),r.d(t,"Beacon",(function(){return p["a"]}));var v=r("edaf");r.d(t,"EventStatus",(function(){return v["a"]})),r.d(t,"MatrixEventEvent",(function(){return v["c"]})),r.d(t,"MatrixEvent",(function(){return v["b"]}));var m=r("299a");r.d(t,"KNOWN_SAFE_ROOM_VERSION",(function(){return m["a"]})),r.d(t,"NotificationCountType",(function(){return m["b"]})),r.d(t,"RoomEvent",(function(){return m["d"]})),r.d(t,"Room",(function(){return m["c"]})),r.d(t,"RoomNameType",(function(){return m["e"]}));var g=r("2f36");r.d(t,"Direction",(function(){return g["a"]})),r.d(t,"EventTimeline",(function(){return g["b"]}));var y=r("3777");r.d(t,"DuplicateStrategy",(function(){return y["a"]})),r.d(t,"EventTimelineSet",(function(){return y["b"]}));var b=r("c04e");r.d(t,"PollEvent",(function(){return b["b"]})),r.d(t,"Poll",(function(){return b["a"]})),r.d(t,"isPollEvent",(function(){return b["c"]}));var _=r("976c");r.d(t,"RoomMemberEvent",(function(){return _["b"]})),r.d(t,"RoomMember",(function(){return _["a"]}));var w=r("866a");r.d(t,"RoomStateEvent",(function(){return w["b"]})),r.d(t,"RoomState",(function(){return w["a"]}));var S=r("3ba7");r.d(t,"ThreadEvent",(function(){return S["f"]})),r.d(t,"FeatureSupport",(function(){return S["c"]})),r.d(t,"determineFeatureSupport",(function(){return S["h"]})),r.d(t,"Thread",(function(){return S["e"]})),r.d(t,"FILTER_RELATED_BY_SENDERS",(function(){return S["b"]})),r.d(t,"FILTER_RELATED_BY_REL_TYPES",(function(){return S["a"]})),r.d(t,"THREAD_RELATION_TYPE",(function(){return S["d"]})),r.d(t,"ThreadFilterType",(function(){return S["g"]})),r.d(t,"threadFilterTypeToFilter",(function(){return S["i"]}));var E=r("936a");r.d(t,"EventEmitterEvents",(function(){return E["a"]}));var k=r("1073");r.d(t,"UserEvent",(function(){return k["b"]})),r.d(t,"User",(function(){return k["a"]}));var I=r("396a");r.d(t,"DeviceVerification",(function(){return I["b"]})),r.d(t,"Device",(function(){return I["a"]}));var C=r("dab2");r.d(t,"SearchResult",(function(){return C["a"]}));var T=r("ee39");r.d(t,"generateScope",(function(){return T["j"]})),r.d(t,"generateAuthorizationParams",(function(){return T["g"]})),r.d(t,"generateAuthorizationUrl",(function(){return T["h"]})),r.d(t,"generateOidcAuthorizationUrl",(function(){return T["i"]})),r.d(t,"completeAuthorizationCodeGrant",(function(){return T["d"]})),r.d(t,"discoverAndValidateOIDCIssuerWellKnown",(function(){return T["f"]})),r.d(t,"OidcError",(function(){return T["b"]})),r.d(t,"DEVICE_CODE_SCOPE",(function(){return T["a"]})),r.d(t,"registerOidcClient",(function(){return T["l"]})),r.d(t,"OidcTokenRefresher",(function(){return T["c"]})),r.d(t,"validateOIDCIssuerWellKnown",(function(){return T["o"]})),r.d(t,"isValidatedIssuerMetadata",(function(){return T["k"]})),r.d(t,"decodeIdToken",(function(){return T["e"]})),r.d(t,"validateIdToken",(function(){return T["n"]})),r.d(t,"validateStoredUserState",(function(){return T["p"]})),r.d(t,"validateBearerTokenResponse",(function(){return T["m"]})),r.d(t,"MatrixScheduler",(function(){return o["a"]}));var R=r("9f65");r.d(t,"Filter",(function(){return R["a"]}));var x=r("6421");r.d(t,"TimelineWindow",(function(){return x["b"]})),r.d(t,"TimelineIndex",(function(){return x["a"]}));var O=r("d41d");r.d(t,"AuthType",(function(){return O["a"]})),r.d(t,"NoAuthFlowFoundError",(function(){return O["c"]})),r.d(t,"InteractiveAuth",(function(){return O["b"]}));var M=r("5fc1");r.d(t,"SERVICE_TYPES",(function(){return M["a"]})),r.d(t,"MemoryStore",(function(){return i["a"]}));var A=r("86a7");r.d(t,"IndexedDBStore",(function(){return A["a"]})),r.d(t,"MemoryCryptoStore",(function(){return n["a"]}));var P=r("b7b0");r.d(t,"LocalStorageCryptoStore",(function(){return P["a"]}));var D=r("aab2");r.d(t,"IndexedDBCryptoStore",(function(){return D["a"]}));var j=r("6280");r.d(t,"getHttpUriForMxc",(function(){return j["a"]}));r("ed54"),r("ebda");var L=r("60af");r.d(t,"EventType",(function(){return L["b"]})),r.d(t,"RelationType",(function(){return L["h"]})),r.d(t,"MsgType",(function(){return L["e"]})),r.d(t,"RoomCreateTypeField",(function(){return L["i"]})),r.d(t,"RoomType",(function(){return L["j"]})),r.d(t,"ToDeviceMessageId",(function(){return L["k"]})),r.d(t,"UNSTABLE_MSC3088_PURPOSE",(function(){return L["q"]})),r.d(t,"UNSTABLE_MSC3088_ENABLED",(function(){return L["p"]})),r.d(t,"UNSTABLE_MSC3089_TREE_SUBTYPE",(function(){return L["t"]})),r.d(t,"UNSTABLE_MSC3089_LEAF",(function(){return L["s"]})),r.d(t,"UNSTABLE_MSC3089_BRANCH",(function(){return L["r"]})),r.d(t,"UNSTABLE_MSC2716_MARKER",(function(){return L["o"]})),r.d(t,"MSC3912_RELATION_BASED_REDACTIONS_PROP",(function(){return L["d"]})),r.d(t,"UNSTABLE_ELEMENT_FUNCTIONAL_USERS",(function(){return L["n"]})),r.d(t,"EVENT_VISIBILITY_CHANGE_TYPE",(function(){return L["a"]})),r.d(t,"PUSHER_ENABLED",(function(){return L["g"]})),r.d(t,"PUSHER_DEVICE_ID",(function(){return L["f"]})),r.d(t,"LOCAL_NOTIFICATION_SETTINGS_PREFIX",(function(){return L["c"]})),r.d(t,"UNSIGNED_THREAD_ID_FIELD",(function(){return L["m"]})),r.d(t,"UNSIGNED_MEMBERSHIP_FIELD",(function(){return L["l"]}));var N=r("93dd");r.d(t,"PushRuleActionName",(function(){return N["d"]})),r.d(t,"TweakName",(function(){return N["g"]})),r.d(t,"ConditionOperator",(function(){return N["b"]})),r.d(t,"DMMemberCountCondition",(function(){return N["c"]})),r.d(t,"isDmMemberCountCondition",(function(){return N["h"]})),r.d(t,"ConditionKind",(function(){return N["a"]})),r.d(t,"PushRuleKind",(function(){return N["e"]})),r.d(t,"RuleId",(function(){return N["f"]}));var U=r("3d21");r.d(t,"Visibility",(function(){return U["f"]})),r.d(t,"Preset",(function(){return U["d"]})),r.d(t,"JoinRule",(function(){return U["c"]})),r.d(t,"RestrictedAllowType",(function(){return U["e"]})),r.d(t,"GuestAccess",(function(){return U["a"]})),r.d(t,"HistoryVisibility",(function(){return U["b"]}));var F=r("fc97");r.d(t,"UpdateDelayedEventAction",(function(){return F["a"]}));var B=r("3068");r.d(t,"SearchOrderBy",(function(){return B["a"]}));var K=r("76e6");r.d(t,"M_BEACON_INFO",(function(){return K["b"]})),r.d(t,"M_BEACON",(function(){return K["a"]}));var q=r("60b4");r.d(t,"M_TOPIC",(function(){return q["a"]}));var V=r("cc89");r.d(t,"M_ASSET",(function(){return V["b"]})),r.d(t,"M_TIMESTAMP",(function(){return V["d"]})),r.d(t,"M_LOCATION",(function(){return V["c"]}));var W=r("f1ce");r.d(t,"ThreepidMedium",(function(){return W["a"]}));var $=r("4c02");r.d(t,"DELEGATED_OIDC_COMPATIBILITY",(function(){return $["a"]}));var z=r("b7cd");r.d(t,"M_POLL_KIND_DISCLOSED",(function(){return z["b"]})),r.d(t,"M_POLL_KIND_UNDISCLOSED",(function(){return z["c"]})),r.d(t,"M_POLL_START",(function(){return z["e"]})),r.d(t,"M_POLL_RESPONSE",(function(){return z["d"]})),r.d(t,"M_POLL_END",(function(){return z["a"]}));r("1d0f"),r("8fb6");var G=r("283b");r.d(t,"ReceiptType",(function(){return G["b"]})),r.d(t,"MAIN_ROOM_TIMELINE",(function(){return G["a"]}));r("8cd7");var H=r("c009");r.d(t,"M_MESSAGE",(function(){return H["b"]})),r.d(t,"M_TEXT",(function(){return H["c"]})),r.d(t,"M_HTML",(function(){return H["a"]})),r.d(t,"REFERENCE_RELATION",(function(){return H["d"]})),r.d(t,"isEventTypeSame",(function(){return H["e"]}));r("34bd");var Y=r("25a6");r.d(t,"RoomSummary",(function(){return Y["a"]}));r("e9dd");var J=r("a2a7");r.d(t,"ContentHelpers",(function(){return J}));var X=r("5cf1");r.d(t,"SecretStorage",(function(){return X}));var Z=r("d5da");r.d(t,"createNewMatrixCall",(function(){return Z["f"]})),r.d(t,"CallEvent",(function(){return Z["d"]}));var Q=r("3838");r.d(t,"GroupCall",(function(){return Q["a"]})),r.d(t,"GroupCallEvent",(function(){return Q["c"]})),r.d(t,"GroupCallIntent",(function(){return Q["d"]})),r.d(t,"GroupCallState",(function(){return Q["e"]})),r.d(t,"GroupCallType",(function(){return Q["g"]})),r.d(t,"GroupCallStatsReportEvent",(function(){return Q["f"]}));var ee=r("31f5");r.d(t,"CryptoEvent",(function(){return ee["b"]}));var te=r("480c");r.d(t,"SyncState",(function(){return te["c"]})),r.d(t,"SetPresence",(function(){return te["a"]}));var re=r("915e");r.d(t,"SlidingSyncEvent",(function(){return re["b"]}));var ne=r("72b3");r.d(t,"MediaHandlerEvent",(function(){return ne["b"]}));var ie=r("04e3");r.d(t,"CallFeedEvent",(function(){return ie["b"]}));var oe=r("8559");r.d(t,"StatsReport",(function(){return oe["a"]}));var ae=r("101d");r.d(t,"Relations",(function(){return ae["a"]})),r.d(t,"RelationsEvent",(function(){return ae["b"]})),r.d(t,"TypedEventEmitter",(function(){return E["b"]}));var se=r("4ff6");r.d(t,"LocalStorageErrors",(function(){return se["a"]})),r.d(t,"IdentityProviderBrand",(function(){return $["b"]})),r.d(t,"SSOAction",(function(){return $["c"]})),r.d(t,"LocationAssetType",(function(){return V["a"]}));var ce=r("1461");r.d(t,"Crypto",(function(){return ce}));var le=()=>new n["a"];function de(e){le=e}function ue(t){var r,n,a;return t.store=null!==(r=t.store)&&void 0!==r?r:new i["a"]({localStorage:e.localStorage}),t.scheduler=null!==(n=t.scheduler)&&void 0!==n?n:new o["a"],t.cryptoStore=null!==(a=t.cryptoStore)&&void 0!==a?a:le(),t}function he(e){return new a["d"](ue(e))}function fe(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return new s["a"](e,t,r,ue(n),i)}}.call(this,r("c8ba"))},"90df":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"90e3":function(e,t,r){"use strict";var n=r("e330"),i=0,o=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},9112:function(e,t,r){"use strict";var n=r("83ab"),i=r("9bf2"),o=r("5c6c");e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,l=c>>1,d=-7,u=r?i-1:0,h=r?-1:1,f=e[t+u];for(u+=h,o=f&(1<<-d)-1,f>>=-d,d+=s;d>0;o=256*o+e[t+u],u+=h,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=256*a+e[t+u],u+=h,d-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=l}return(f?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,c,l=8*o-i-1,d=(1<<l)-1,u=d>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+u>=1?h/c:h*Math.pow(2,1-u),t*c>=2&&(a++,c/=2),a+u>=d?(s=0,a=d):a+u>=1?(s=(t*c-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*v}},"915e":function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));r("c973"),r("9523"),r("5b5f");var n=r("936a");r("b83f");var i,o,a;(function(e){e["RequestFinished"]="FINISHED",e["Complete"]="COMPLETE"})(i||(i={}));(function(e){e["PreProcess"]="ExtState.PreProcess",e["PostProcess"]="ExtState.PostProcess"})(o||(o={})),function(e){e["RoomData"]="SlidingSync.RoomData",e["Lifecycle"]="SlidingSync.Lifecycle",e["List"]="SlidingSync.List"}(a||(a={}));n["b"]},"918e":function(e,t,r){var n=r("314e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("089c0442",n,e)}},9251:function(e,t,r){var n=r("562e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("6462b42c",n,e)}},"92a6":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"contacts-preview minimized active"},[t("div",{staticClass:"work"},[t("div",{staticClass:"previewWrapper",style:e.isUser},[t("div",{staticClass:"iconWrapper"},[t("userpic",{attrs:{userinfo:e.contact,mode:"Contacts"}})],1),t("div",{staticClass:"infoWrapper"},[t("div",{staticClass:"summaryLine"},[t("div",{staticClass:"caption"},[t("span",[e._v(e._s(e.contact.name))])])])])])])])},i=[],o=r("2f62"),a={name:"contactsPreview",props:{contact:{},mode:{default:"",type:String},user:null},components:{},data:function(){return{loading:!1,isUser:"",asd:{}}},computed:Object(o["d"])({auth:e=>e.auth}),methods:{},mounted(){}},s=a,c=r("2877");function l(e){var t=r("3883");t.__inject__&&t.__inject__(e)}var d=Object(c["a"])(s,n,i,!1,l,"43f2d6ca",null,!0);t["a"]=d.exports},"936a":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s}));var n,i=r("c973"),o=r.n(i),a=r("faa1");(function(e){e["NewListener"]="newListener",e["RemoveListener"]="removeListener",e["Error"]="error"})(n||(n={}));class s extends a["EventEmitter"]{addListener(e,t){return super.addListener(e,t)}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return super.emit(e,...r)}emitPromised(e){var t=arguments,r=this;return o()((function*(){for(var n=t.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=t[o];var a=r.listeners(e);return Promise.allSettled(a.map(e=>e(...i))).then(()=>a.length>0)}))()}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}off(e,t){return super.off(e,t)}on(e,t){return super.on(e,t)}once(e,t){return super.once(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return void 0===e?super.removeAllListeners():super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}rawListeners(e){return super.rawListeners(e)}}},"93be":function(e,t,r){var n=r("95e8"),i=r("f0bc");t.write=i,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},"93dd":function(e,t,r){"use strict";var n,i,o;r.d(t,"d",(function(){return n})),r.d(t,"g",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"h",(function(){return d})),r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return c})),function(e){e["DontNotify"]="dont_notify",e["Notify"]="notify",e["Coalesce"]="coalesce"}(n||(n={})),function(e){e["Highlight"]="highlight",e["Sound"]="sound"}(i||(i={})),function(e){e["ExactEquals"]="==",e["LessThan"]="<",e["GreaterThan"]=">",e["GreaterThanOrEqual"]=">=",e["LessThanOrEqual"]="<="}(o||(o={}));var a,s,c,l="2";function d(e){return"==2"===e||"2"===e}(function(e){e["EventMatch"]="event_match",e["EventPropertyIs"]="event_property_is",e["EventPropertyContains"]="event_property_contains",e["ContainsDisplayName"]="contains_display_name",e["RoomMemberCount"]="room_member_count",e["SenderNotificationPermission"]="sender_notification_permission",e["CallStarted"]="call_started",e["CallStartedPrefix"]="org.matrix.msc3914.call_started"})(a||(a={})),function(e){e["Override"]="override",e["ContentSpecific"]="content",e["RoomSpecific"]="room",e["SenderSpecific"]="sender",e["Underride"]="underride"}(s||(s={})),function(e){e["Master"]=".m.rule.master",e["IsUserMention"]=".m.rule.is_user_mention",e["IsRoomMention"]=".m.rule.is_room_mention",e["ContainsDisplayName"]=".m.rule.contains_display_name",e["ContainsUserName"]=".m.rule.contains_user_name",e["AtRoomNotification"]=".m.rule.roomnotif",e["DM"]=".m.rule.room_one_to_one",e["EncryptedDM"]=".m.rule.encrypted_room_one_to_one",e["Message"]=".m.rule.message",e["EncryptedMessage"]=".m.rule.encrypted",e["InviteToSelf"]=".m.rule.invite_for_me",e["MemberEvent"]=".m.rule.member_event",e["IncomingCall"]=".m.rule.call",e["SuppressNotices"]=".m.rule.suppress_notices",e["Tombstone"]=".m.rule.tombstone",e["PollStart"]=".m.rule.poll_start",e["PollStartUnstable"]=".org.matrix.msc3930.rule.poll_start",e["PollEnd"]=".m.rule.poll_end",e["PollEndUnstable"]=".org.matrix.msc3930.rule.poll_end",e["PollStartOneToOne"]=".m.rule.poll_start_one_to_one",e["PollStartOneToOneUnstable"]=".org.matrix.msc3930.rule.poll_start_one_to_one",e["PollEndOneToOne"]=".m.rule.poll_end_one_to_one",e["PollEndOneToOneUnstable"]=".org.matrix.msc3930.rule.poll_end_one_to_one"}(c||(c={}))},"93e6":function(e,t,r){"use strict";var n=r("8707").Buffer,i=r("e372").Transform,o=r("3fb5");function a(e,t){if(!n.isBuffer(e)&&"string"!==typeof e)throw new TypeError(t+" must be a string or a buffer")}function s(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o(s,i),s.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(i){n=i}r(n)},s.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)},s.prototype.update=function(e,t){if(a(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));var r=this._block,i=0;while(this._blockOffset+e.length-i>=this._blockSize){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}while(i<e.length)r[this._blockOffset++]=e[i++];for(var s=0,c=8*e.length;c>0;++s)this._length[s]+=c,c=this._length[s]/4294967296|0,c>0&&(this._length[s]-=4294967296*c);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},s.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=s},"94ca":function(e,t,r){"use strict";var n=r("d039"),i=r("1626"),o=/#|\.prototype\./,a=function(e,t){var r=c[s(e)];return r===d||r!==l&&(i(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},l=a.NATIVE="N",d=a.POLYFILL="P";e.exports=a},9523:function(e,t,r){var n=r("a395");function i(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},"956b":function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("b8d8"),a=n("ffd9"),s=n("bbd4"),c=n("8e08"),l=n("69fc"),d=n("8e26"),u=n("9bed"),h=n("9060");r.MAX_ASSOCIATED_DATA=126;class f{static importKey(e,t,r=new h.WebCryptoProvider){return i(this,void 0,void 0,(function*(){if(32!==e.length&&64!==e.length)throw new Error("AES-SIV: key must be 32 or 64-bytes (got "+e.length);const n=e.subarray(0,e.length/2|0),i=e.subarray(e.length/2|0);let o;switch(t){case"AES-SIV":o=yield d.CMAC.importKey(r,n);break;case"AES-CMAC-SIV":o=yield d.CMAC.importKey(r,n);break;case"AES-PMAC-SIV":o=yield u.PMAC.importKey(r,n);break;default:throw new c.NotImplementedError("Miscreant: algorithm not supported: "+t)}const a=yield r.importCTRKey(i);return new f(o,a)}))}constructor(e,t){this._mac=e,this._ctr=t,this._tmp1=new l.default,this._tmp2=new l.default}seal(e,t){return i(this,void 0,void 0,(function*(){if(t.length>r.MAX_ASSOCIATED_DATA)throw new Error("AES-SIV: too many associated data items");const n=l.default.SIZE+e.length,i=new Uint8Array(n),o=yield this._s2v(t,e);return i.set(o),p(o),i.set(yield this._ctr.encryptCtr(o,e),o.length),i}))}open(e,t){return i(this,void 0,void 0,(function*(){if(t.length>r.MAX_ASSOCIATED_DATA)throw new Error("AES-SIV: too many associated data items");if(e.length<l.default.SIZE)throw new c.IntegrityError("AES-SIV: ciphertext is truncated");const n=e.subarray(0,l.default.SIZE),i=this._tmp1.data;i.set(n),p(i);const s=yield this._ctr.encryptCtr(i,e.subarray(l.default.SIZE)),d=yield this._s2v(t,s);if(!o.equal(d,n))throw a.wipe(s),new c.IntegrityError("AES-SIV: ciphertext verification failure!");return s}))}clear(){return this._tmp1.clear(),this._tmp2.clear(),this._ctr.clear(),this._mac.clear(),this}_s2v(e,t){return i(this,void 0,void 0,(function*(){this._mac.reset(),this._tmp1.clear(),yield this._mac.update(this._tmp1.data),this._tmp2.clear(),this._tmp2.data.set(yield this._mac.finish()),this._mac.reset();for(const t of e)yield this._mac.update(t),this._tmp1.clear(),this._tmp1.data.set(yield this._mac.finish()),this._mac.reset(),this._tmp2.dbl(),s.xor(this._tmp2.data,this._tmp1.data);if(this._tmp1.clear(),t.length>=l.default.SIZE){const e=t.length-l.default.SIZE;this._tmp1.data.set(t.subarray(e)),yield this._mac.update(t.subarray(0,e))}else this._tmp1.data.set(t),this._tmp1.data[t.length]=128,this._tmp2.dbl();return s.xor(this._tmp1.data,this._tmp2.data),yield this._mac.update(this._tmp1.data),this._mac.finish()}))}}function p(e){e[e.length-8]&=127,e[e.length-4]&=127}r.SIV=f},"95a7":function(e,t,r){"use strict";function n(e,t){if(!e[t])throw new Error("".concat(String(t)," is required"))}Object.defineProperty(t,"__esModule",{value:!0}),t.assertPresent=n},"95e8":function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,r,i){if(i&&!r)t[i]=n(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(t[r[o]]=n(e[o+1]))},o=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:n?t[e.name]:t;i(r.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},a=r("3baa"),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(i))return o(c,n,i)}})),t.media=r,t};var c=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),i=0;i<r.length;i+=3)t.push({component:r[i],ip:r[i+1],port:r[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(c,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}},"966d":function(e,t,r){"use strict";(function(t){function r(e,r,n,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:o=new Array(s-1),a=0;while(a<o.length)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:r}:e.exports=t}).call(this,r("4362"))},9671:function(e,t,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=r("0f7c");e.exports=o.call(n,i)},"96ee":function(e){e.exports=JSON.parse('{"caption":{"create":"Create","addPublicChatName":"Add Public Chat Name","addGroupNamePlaceHolder":"Add Group Name","createPublicChat":"Create public chat","chatTopic":"Topic renamed","publicRoomTitle":"Public Room Preview","asModerator":"as moderator","marked":"marked","unmarked":"unmarked","removeBan":"Remove Ban","cancelModeration":"Remove moderation","uploadFiles":"上传文件","header":"头","dragAndDropAFile":"拖放文件","chatInvite":"你被邀请与之聊天：","cantJoin":"您不能加入与以下人员的聊天：","chatInviteDecline":"你可以加入聊天或拒绝邀请","creatorLeft":"因为创建者离开了房间","encrypted":"加密的","noImages":"此聊天中还没有图片","noFiles":"There are no files in this chat yet","inviteUser":"邀请用户","invite":"邀请","add":"添加","mute":"静音","unmute":"取消静音","leave":"离开","Info":"信息","new":"新","tying":"打字","accNotFound":"您的注册正在进行中，请等待...","emptyList":"列表为空（已过滤或只是空）","welcome":"欢迎来到Pocketnet聊天","startNewChat":"开始一个新的聊天","chats":"Chats","shareWith":"与人分享","newChat":"新聊天","moveToChat":"移动到聊天","queryNoResults":"查询报告没有结果","needMoreCharacters":"需要更多的字符来获得结果","createGroup":"创建群组","unabletoDecrypt":"* 无法解密","messageDeleted":"信息已删除","sentImage":"已发送的图片","sentVoiceMessage":"发了一条语音信息","invitationToChat":"邀请聊天","invitationToRoom":"Invitation to room","leftChat":"离开聊天","joined":"加入","chatRenamed":"聊天记录重命名为","recentComment":"最近的评论：","share":"SHARE","followers":"Followers:","reputation":"声誉:","following":"关注：","theme":"主题:","contacts":"联系人","other":"全球搜索","phoneContacts":"电话联系人","chooseInviteMedia":"请选择你的邀请方式：","admin":"管理员","moderator":"版主","videocall":"视频通话","call":"呼叫","leaveAndDelete":"离开和删除","donate":"捐献","makeModerator":"做版主","ban":"禁止","kick":"踢","members":"会员","media":"媒体","files":"文件","contactsList":"联系人列表","send":"发送","pageCaption":"页面标题","caption":"标题","text":"文本","placeholder":"占位符","sendTransactionTo":"发送交易到","toBePaidByReceiver":"由收件人支付","toBePaidBySender":"将由发送方支付","source":"来源","amount":"金额","receiver":"收件人","message":"消息","includeFeesInAmount":"在金额中包括费用","transactionFees":"交易费用","totalAmount":"总金额","balanceTooLow":"余额太低","transactionError":"Error, can\'t make the transaction","calculateFees":"计算费用","startChatWith":"开始与之聊天","searchResult":"搜索结果","joinInTheChat":"加入到聊天中","invested":"被邀请","inTheChat":"在聊天中","banned":"被禁止的","andRoom":"和室","left":"左边","theChat":" 聊天","made":"制造","aModerator":"一个版主","editedChatNameTo":"将聊天名称编辑为","somebody":"某人","sent":"已发送","PKOINto":" PKOIN to ","response":"回应","messagefrom":"轉發的消息來自","edited":"已编辑","settings":"设置","unauthorized":"未经授权","search":"搜索","replyOnMessage":"在信息中回复","editMessage":"编辑信息","inviteFriend":"邀请朋友","emptyContactList":"联系人列表是空的","joinApp":"加入口袋网","hasInvitedToJoin":"已邀请您加入口袋网","contactsempty":"您还没有联系人，请在搜索中找到他们","sendmessage":"Send message","messages":"Messages","you":"You","sentfile":"sent file:","administrators":"所有者","moderators":"主持人","participants":"参加者","streamChat":"串流聊天","membersList":"会员名单","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"电子邮件","refillNamePlaceholder":"补货名称"},"message":{},"button":{"starChatButton":"开始聊天","decline":"拒绝","declineandignore":"忽略用户","join":"加入","ok":"好的","copy":"复制","forward":"转发","delete":"删除","reply":"回复","save":"Save","share":"分享","download":"下载","downloaded":"已下载","goToPocketnetProfile":"转到Pocketnet配置文件","sendFile":"发送文件","takePhotoOrVideo":"发送图像","sendCoins":"发送硬币","edit":"编辑","select":"選擇","block":"阻止","unblock":"解除封锁","blockUser":"阻止用户","Complain":"抱怨","chat":"聊天","donations":"捐款"},"yes":"是的","cancel":"取消","teamMessages":{"1-title":"欢迎来到巴斯蒂昂私人聊天室!","1-list1":"与你的手机号码无关的私人信使","1-list2":"默认对每一次1对1对话进行端对端加密","1-list3":"通过聊天发送或接收的所有图像都是加密存储的","1-list4":"信息的历史记录只保存7天","2-title":"一个巨大的公告!","2-message1":"我们最近发布了以下重大更新","2-list1":"不与你的电话号码相连的私人加密信使","2-list2":"能够将PKOIN捐赠给博主","2-list3":"视频和实时流媒体","2-message2":"现在就邀请你的朋友，成为去中心化的互联网大未来的一部分吧","2-button":"邀请朋友"},"error_generic":"Something went wrong, please try again later.","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found"}')},"976c":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return h}));var n,i=r("9523"),o=r.n(i),a=r("6280"),s=r("b83f"),c=r("5b5f"),l=r("936a"),d=r("60af"),u=r("3925");(function(e){e["Membership"]="RoomMember.membership",e["Name"]="RoomMember.name",e["PowerLevel"]="RoomMember.powerLevel",e["Typing"]="RoomMember.typing"})(n||(n={}));class h extends l["b"]{constructor(e,t){super(),this.roomId=e,this.userId=t,o()(this,"_isOutOfBand",!1),o()(this,"modified",-1),o()(this,"requestedProfileInfo",!1),o()(this,"typing",!1),o()(this,"name",void 0),o()(this,"rawDisplayName",void 0),o()(this,"powerLevel",0),o()(this,"powerLevelNorm",0),o()(this,"user",void 0),o()(this,"membership",void 0),o()(this,"disambiguate",!1),o()(this,"events",{}),this.name=t,this.rawDisplayName=t,this.updateModifiedTime()}markOutOfBand(){this._isOutOfBand=!0}isOutOfBand(){return this._isOutOfBand}setMembershipEvent(e,t){var r,i,o=null!==(r=e.getDirectionalContent().displayname)&&void 0!==r?r:"";if(e.getType()===d["b"].RoomMember){this._isOutOfBand=!1,this.events.member=e;var a=this.membership;this.membership=e.getDirectionalContent().membership,void 0===this.membership&&c["b"].trace("membership event with membership undefined (forwardLooking: ".concat(e.forwardLooking,")!"),e.getContent(),"prevcontent is ",e.getPrevContent()),this.disambiguate=v(this.userId,o,t);var l=this.name;this.name=m(this.userId,o,this.disambiguate),this.rawDisplayName=Object(s["E"])(null!==(i=e.getDirectionalContent().displayname)&&void 0!==i?i:""),this.rawDisplayName&&Object(s["G"])(this.rawDisplayName)||(this.rawDisplayName=this.userId),a!==this.membership&&(this.updateModifiedTime(),this.emit(n.Membership,e,this,a)),l!==this.name&&(this.updateModifiedTime(),this.emit(n.Name,e,this,l))}}setPowerLevelEvent(e){if(e.getType()===d["b"].RoomPowerLevels&&""===e.getStateKey()){var t=e.getDirectionalContent(),r=t.users_default||0,i=t.users||{};Object.values(i).forEach(e=>{r=Math.max(r,e)});var o=this.powerLevel,a=this.powerLevelNorm;void 0!==i[this.userId]&&Number.isInteger(i[this.userId])?this.powerLevel=i[this.userId]:void 0!==t.users_default?this.powerLevel=t.users_default:this.powerLevel=0,this.powerLevelNorm=0,r>0&&(this.powerLevelNorm=100*this.powerLevel/r),o===this.powerLevel&&a===this.powerLevelNorm||(this.updateModifiedTime(),this.emit(n.PowerLevel,e,this))}}setTypingEvent(e){if("m.typing"===e.getType()){var t=this.typing;this.typing=!1;var r=e.getContent().user_ids;Array.isArray(r)&&(-1!==r.indexOf(this.userId)&&(this.typing=!0),t!==this.typing&&(this.updateModifiedTime(),this.emit(n.Typing,e,this)))}}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}isKicked(){return this.membership===u["a"].Leave&&void 0!==this.events.member&&this.events.member.getSender()!==this.events.member.getStateKey()}getDMInviter(){if(this.events.member){var e=this.events.member,t=e.getContent(),r=e.getSender();if(t.membership===u["a"].Join&&(t=e.getPrevContent(),r=e.getUnsigned().prev_sender),t.membership===u["a"].Invite&&t.is_direct)return r}}getAvatarUrl(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.getMxcAvatarUrl();if(!s&&!i)return null;var c=Object(a["a"])(e,s,t,r,n,o);return c||null}getMxcAvatarUrl(){return this.events.member?this.events.member.getDirectionalContent().avatar_url:this.user?this.user.avatarUrl:void 0}}var f=/@.+:.+/,p=/[\u200E\u200F\u202A-\u202F]/;function v(e,t,r){if(!t||t===e)return!1;if(!Object(s["G"])(t))return!1;if(!r)return!1;if(f.test(t))return!0;if(p.test(t))return!0;var n=r.getUserIdsWithDisplayName(t);return!!n.some(t=>t!==e)}function m(e,t,r){return t&&t!==e?r?Object(s["E"])(t)+" ("+e+")":Object(s["G"])(t)?Object(s["E"])(t):e:e}},"97be":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"97c2":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetApiToWidgetAction=t.WidgetApiFromWidgetAction=void 0;var n=function(e){return e["SupportedApiVersions"]="supported_api_versions",e["Capabilities"]="capabilities",e["NotifyCapabilities"]="notify_capabilities",e["TakeScreenshot"]="screenshot",e["UpdateVisibility"]="visibility",e["OpenIDCredentials"]="openid_credentials",e["WidgetConfig"]="widget_config",e["CloseModalWidget"]="close_modal",e["ButtonClicked"]="button_clicked",e["SendEvent"]="send_event",e["SendToDevice"]="send_to_device",e["UpdateTurnServers"]="update_turn_servers",e}({});t.WidgetApiToWidgetAction=n;var i=function(e){return e["SupportedApiVersions"]="supported_api_versions",e["ContentLoaded"]="content_loaded",e["SendSticker"]="m.sticker",e["UpdateAlwaysOnScreen"]="set_always_on_screen",e["GetOpenIDCredentials"]="get_openid",e["CloseModalWidget"]="close_modal",e["OpenModalWidget"]="open_modal",e["SetModalButtonEnabled"]="set_button_enabled",e["SendEvent"]="send_event",e["SendToDevice"]="send_to_device",e["WatchTurnServers"]="watch_turn_servers",e["UnwatchTurnServers"]="unwatch_turn_servers",e["BeeperReadRoomAccountData"]="com.beeper.read_room_account_data",e["MSC2876ReadEvents"]="org.matrix.msc2876.read_events",e["MSC2931Navigate"]="org.matrix.msc2931.navigate",e["MSC2974RenegotiateCapabilities"]="org.matrix.msc2974.request_capabilities",e["MSC3869ReadRelations"]="org.matrix.msc3869.read_relations",e["MSC3973UserDirectorySearch"]="org.matrix.msc3973.user_directory_search",e["MSC4039GetMediaConfigAction"]="org.matrix.msc4039.get_media_config",e["MSC4039UploadFileAction"]="org.matrix.msc4039.upload_file",e["MSC4039DownloadFileAction"]="org.matrix.msc4039.download_file",e["MSC4157UpdateDelayedEvent"]="org.matrix.msc4157.update_delayed_event",e}({});t.WidgetApiFromWidgetAction=i},"986a":function(e,t,r){"use strict";var n=r("ebb5"),i=r("a258").findLast,o=n.aTypedArray,a=n.exportTypedArrayMethod;a("findLast",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},9896:function(e,t,r){"use strict";r.r(t);var n=r("e6cf");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},"98e6":function(e,t,r){"use strict";var n=r("3fb5"),i=r("f576"),o=r("b5ca"),a=r("69f2"),s=r("6430");function c(e){s.call(this,"digest"),this._hash=e}n(c,s),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return e=e.toLowerCase(),"md5"===e?new i:"rmd160"===e||"ripemd160"===e?new o:new c(a(e))}},"992c":function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["Get"]="GET",e["Put"]="PUT",e["Post"]="POST",e["Delete"]="DELETE",e["Options"]="OPTIONS",e["Head"]="HEAD",e["Patch"]="PATCH"}(n||(n={}))},"9adc":function(e,t,r){"use strict";var n=r("8558");e.exports="NODE"===n},"9b54":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=r("f60b").Buffer,o=r(3);function a(e,t,r){e.copy(t,r)}e.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";var t=this.head,r=""+t.data;while(t=t.next)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);var t=i.allocUnsafe(e>>>0),r=this.head,n=0;while(r)a(r.data,t,n),n+=r.data.length,r=r.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},"9bc8":function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},"9bea":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"9bed":function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("69fc"),a=n("b8d8"),s=n("3dc0"),c=n("bbd4"),l=31;class d{constructor(e,t,r){this._finished=!1,this._cipher=e,this._L=t,this._LInv=r,this._buffer=new o.default,this._bufferPos=0,this._counter=0,this._offset=new o.default,this._tag=new o.default}static importKey(e,t){return i(this,void 0,void 0,(function*(){const r=yield e.importBlockCipherKey(t),n=new o.default;yield r.encryptBlock(n);const i=new Array(l);for(let e=0;e<l;e++)i[e]=n.clone(),n.dbl();const s=i[0].clone(),c=1&s.data[o.default.SIZE-1];for(let e=o.default.SIZE-1;e>0;e--){const t=a.select(1&s.data[e-1],128,0);s.data[e]=s.data[e]>>>1|t}return s.data[0]>>>=1,s.data[0]^=a.select(c,128,0),s.data[o.default.SIZE-1]^=a.select(c,o.default.R>>>1,0),new d(r,i,s)}))}reset(){return this._buffer.clear(),this._bufferPos=0,this._counter=0,this._offset.clear(),this._tag.clear(),this._finished=!1,this}clear(){this.reset(),this._cipher.clear()}update(e){return i(this,void 0,void 0,(function*(){if(this._finished)throw new Error("pmac: already finished");const t=o.default.SIZE-this._bufferPos;let r=0,n=e.length;n>t&&(this._buffer.data.set(e.slice(0,t),this._bufferPos),r+=t,n-=t,yield this._processBuffer());while(n>o.default.SIZE)this._buffer.data.set(e.slice(r,r+o.default.SIZE)),r+=o.default.SIZE,n-=o.default.SIZE,yield this._processBuffer();return n>0&&(this._buffer.data.set(e.slice(r,r+n),this._bufferPos),this._bufferPos+=n),this}))}finish(){return i(this,void 0,void 0,(function*(){if(this._finished)throw new Error("pmac: already finished");return this._bufferPos===o.default.SIZE?(c.xor(this._tag.data,this._buffer.data),c.xor(this._tag.data,this._LInv.data)):(c.xor(this._tag.data,this._buffer.data.slice(0,this._bufferPos)),this._tag.data[this._bufferPos]^=128),yield this._cipher.encryptBlock(this._tag),this._finished=!0,this._tag.clone().data}))}_processBuffer(){return i(this,void 0,void 0,(function*(){c.xor(this._offset.data,this._L[s.ctz(this._counter+1)].data),c.xor(this._buffer.data,this._offset.data),this._counter++,yield this._cipher.encryptBlock(this._buffer),c.xor(this._tag.data,this._buffer.data),this._bufferPos=0}))}}r.PMAC=d},"9bf2":function(e,t,r){"use strict";var n=r("83ab"),i=r("0cfb"),o=r("aed9"),a=r("825a"),s=r("a04b"),c=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",f="writable";t.f=n?o?function(e,t,r){if(a(e),t=s(t),a(r),"function"===typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var n=d(e,t);n&&n[f]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:u in r?r[u]:n[u],writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(a(e),t=s(t),a(r),i)try{return l(e,t,r)}catch(error){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},"9c0b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("68b2");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=r("edf6");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=r("2c89");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r("d308");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=r("c739");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=r("18e8");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=r("0374");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=r("4a30");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var u=r("bd07");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var h=r("cc9b");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var f=r("7c3f");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r("dbfa");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var v=r("9e84");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var m=r("6682");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=r("d3d5");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var y=r("305b");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=r("31c4");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var _=r("8c1e");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var w=r("7450");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var S=r("80e6");Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var E=r("7368");Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}))},"9c0e":function(e,t,r){"use strict";(function(t){var n;function i(e,t,r){return t=o(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){var t=a(e,"string");return"symbol"===typeof t?t:String(t)}function a(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var s=r("903c"),c=Symbol("lastResolve"),l=Symbol("lastReject"),d=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function v(e,t){return{value:e,done:t}}function m(e){var t=e[c];if(null!==t){var r=e[p].read();null!==r&&(e[h]=null,e[c]=null,e[l]=null,t(v(r,!1)))}}function g(e){t.nextTick(m,e)}function y(e,t){return function(r,n){e.then((function(){t[u]?r(v(void 0,!0)):t[f](r,n)}),n)}}var b=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((n={get stream(){return this[p]},next:function(){var e=this,r=this[d];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(v(void 0,!0));if(this[p].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[d]?n(e[d]):r(v(void 0,!0))}))}));var n,i=this[h];if(i)n=new Promise(y(i,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(v(o,!1));n=new Promise(this[f])}return this[h]=n,n}},i(n,Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[p].destroy(null,(function(e){e?r(e):t(v(void 0,!0))}))}))})),n),b),w=function(e){var t,r=Object.create(_,(t={},i(t,p,{value:e,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,d,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[p].read();n?(r[h]=null,r[c]=null,r[l]=null,e(v(n,!1))):(r[c]=e,r[l]=t)},writable:!0}),t));return r[h]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];return null!==t&&(r[h]=null,r[c]=null,r[l]=null,t(e)),void(r[d]=e)}var n=r[c];null!==n&&(r[h]=null,r[c]=null,r[l]=null,n(v(void 0,!0))),r[u]=!0})),e.on("readable",g.bind(null,r)),r};e.exports=w}).call(this,r("4362"))},"9c21":function(t,r,n){"use strict";(function(t){var i=n("1da1"),o=(n("d9e2"),n("14d9"),n("2c66"),n("249d"),n("40e9"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("3139")),a=n("6129"),s=n("3db6");const c=n("399f");var l=n("a099"),d="PR7srzZt4EfcNb3s27grgmiG8aB9vYNV82",u=null,h=function(){var r=Object(i["a"])((function*(r,n,{ls:a,lse:h}){var p=this;this.configurable=!1;var v={},m="",g=12,y={},b={},w=new f;w.init(),n.pcrypto=p,p.version=2,p.clear=function(){({}),b={},[],v={}},p.destroy=function(){w.destroy()};var S="pcrypto10_"+n.roomId+"_",E="e_pcrypto10_",k=13;p.preparedUsers=function(e,t){var r=null;return r=!t||t<=1?_.filter(O(e),(function(e){return e.keys&&e.keys.length>=g})):_.sortBy(_.filter(O(e),(function(e){return e.keys&&e.keys.length>=g})),e=>e.source.id),r},p.preparedUsersById=function(e,t){var r=[];return _.each(v,t=>{if(_.indexOf(e,t.id)>-1){t=b[t.id];t&&t.keys&&t.keys.length>=g&&r.push(t)}}),!t||t<=1?r:_.sortBy(r,e=>e.source.id)},p.cantchat=function(){var e=p.preparedUsers(void 0,p.version);return!!(r.core.mtrx.kit.tetatetchat(n)&&e.length&&e.length<2)},p.canBeEncrypt=function(e){var t=_.toArray(b),i=r.core.mtrx.kit.chatIsPublic(n);return!!(!i&&r.user&&r.user.private&&12==r.user.private.length&&v[r.user.userinfo.id]&&t.length>1&&t.length<50)},p.userschanded=function(){return R()?(p.clear(),p.prepare()):Promise.resolve()};var I=function(){var e=_.map(v,(function(e){return e.id}));return r.core.user.usersInfo(e).then(e=>(b={},_.each(e,(function(e){b[e.id]=e})),Promise.resolve()))},C=function(){var e=r.core.mtrx.kit.tetatetchat(n),t=_.uniq([].concat(n.currentState.getStateEvents("m.room.member"),n.oldState.getStateEvents("m.room.member")),e=>e.event.event_id),i=_.filter(_.map(t,(function(t){var r=t.event,n=r.content.membership;return"invite"==n||"join"==n||"leave"==n&&!e?{time:r.origin_server_ts||1,membership:n,id:"invite"==n?o["a"].getmatrixid(r.state_key):o["a"].getmatrixid(r.sender)}:null})),(function(e){return e}));return i=_.sortBy(i,(function(e){return e.time})),i},T=function(e){for(var t=0,r=C(),n=r.length-1;n>=0;n--)!(r[n].time<e)&&e||t||(t=n);return t},R=function(){var e=C(),t=o["a"].sha224(JSON.stringify(e)).toString("hex");return t!=m},x=function(){var e=C(),t=r.core.mtrx.kit.tetatetchat(n);v={},m=o["a"].sha224(JSON.stringify(e)).toString("hex"),_.each(e,(function(e){v[e.id]||(v[e.id]={id:e.id,life:[]});var r=v[e.id].life;if(!e.membership||"join"!=e.membership&&"invite"!=e.membership){if(r.length&&"leave"==e.membership&&!t){var n=r[r.length-1];n.end=e.time}}else r.push({start:t?1:e.time})}))},O=function(e){var t=M(e);return _.filter(_.map(t,(function(e){return b[e.id]})),(function(e){return e}))},M=function(e){return _.filter(v,(function(t){var r=_.find(t.life,(function(t){if(e){if(t.start<e&&(!t.end||t.end>e))return!0}else if(t.start&&!t.end)return!0}));if(r)return!0}))};p.getusersinfobytime=O,p.prepare=function(){return x(),I().then(e=>p)};var A={aeskeys:{inp:function(e){var t={};return _.each(e,(function(e,r){t[r]=o["a"]._arrayBufferToBase64(e)})),t},out:function(e){var t={};return _.each(e,(function(e,r){t[r]=new Uint8Array(o["a"]._base64ToArrayBuffer(e))})),t}}},P={aeskeysls:function(e,t,o,s){e||(e=0),t||(t=r.core.mtrx.kit.tetatetchat(n)?r.currentblock.height:10);var c=(o?"ul+"+L(o):T(e))+"-"+t+"-"+(s||p.version),l=`${S+r.user.userinfo.id}-${c}`;return y[l]||(y[l]=a.get(l).then(e=>{const t=A.aeskeys.out(e);return{keys:t,k:c}}).catch(function(){var r=Object(i["a"])((function*(r){const n=P.aeskeys(e,t,o,s);if(p.preparedUsers(e,s).length>1){const e=l;yield a.set(e,A.aeskeys.inp(n)).catch(()=>{})}return{keys:n,k:c}}));return function(e){return r.apply(this,arguments)}}()).finally(()=>{delete y[l]})),y[l]},aeskeys:function(e,t,n,i){return e||(e=0),t||(t=r.currentblock.height),D.aeskeys(e,t,n,i)}},D={cuhash:function(e,t,n){return l.pbkdf2Sync(o["a"].sha224(_.map(e,(function(e){return e.keys[t]})).join("")+(n||r.currentblock.height)).toString("hex"),d,1,32,"sha256")},userspublics:function(e,n,i,o){var a=i?p.preparedUsersById(i,o):p.preparedUsers(e,o),s={};return _.each(a,(function(c){if(!(c.id==r.user.userinfo.id&&a.length>1)){var l=_.map(c.keys,(function(e){return t.from(e,"hex")}));s[c.id]=D.points(e,n,l,i,o)}})),s},current:function(e,n,i,o){var a=_.map(r.user.private,(function(e){return e.private})),s=t.allocUnsafe(32),c=D.scalars(e,n,a,i,o).toBuffer();return c.copy(s,32-c.length),s},scalars:function(e,t,r,n,i){for(var o=n?p.preparedUsersById(n,i):p.preparedUsers(e,i),a=null,s=0;s<g;s++){var l=new c(this.cuhash(o,s,t)),d=new c(r[s],16),h=d.mul(l).umod(u);a=s?a.add(h).umod(u):h}return a},points:function(e,t,r,n,i){for(var o=n?p.preparedUsersById(n,i):p.preparedUsers(e,i),a=null,s=0;s<g;s++){var c=this.cuhash(o,s,t),l=bitcoin.ecc.pointMultiply(r[s],c,void 0,!0);a=s?bitcoin.ecc.pointAdd(a,l,void 0,!0):l}return a},aeskeys:function(e,t,n,i){var o=D.userspublics(e,t,n,i),a=D.current(e,t,n,i),s={};return _.each(o,(function(e,t){t!=r.user.userinfo.id&&(s[t]=bitcoin.ecc.pointMultiply(e,a,void 0,!0),s[t]=l.pbkdf2Sync(s[t].toString("hex"),d,64,32,"sha512"))})),s}};p.decrypt=function(){var t=Object(i["a"])((function*(t,{encrypted:n,nonce:i},o,s,c,l){let{keys:d,k:u}=yield P.aeskeysls(o,s,c,l);var h=null;if(d[t])try{return yield U(d[t],{encrypted:n,nonce:i})}catch(e){h=e}else h="emptykey";throw yield a.clear(`${S+r.user.userinfo.id}-${u}`).catch(e=>{console.error("Error clearing item on LS.CLEAR")}),new Error(h)}));return function(e,r,n,i,o,a){return t.apply(this,arguments)}}(),p.encrypt=function(){var e=Object(i["a"])((function*(e,t,r){let{keys:n}=yield P.aeskeysls(void 0,void 0,void 0,r||void 0);if(n[e])return yield F(t,n[e]);throw new Error("emptykey")}));return function(t,r,n){return e.apply(this,arguments)}}(),p.decryptEvent=function(){var t=Object(i["a"])((function*(t){if(t.content.hash)return p.decryptEventGroup(t);if(!r.user.userinfo)throw new Error("userinfo");if(t.decrypting)return t.decrypting;var n=`${E+r.user.userinfo.id}-${(t.content?t.content.edited:"")||t.event_id}`,a=h.get(n).then(t=>{var r=null;try{r=JSON.parse(t)}catch(e){}return r?Promise.resolve(r):Promise.reject()}).catch(function(){var e=Object(i["a"])((function*(e){const i=o["a"].getmatrixid(t.sender),a=r.user.userinfo.id;let s,c;const l=JSON.parse(o["a"].Base64.decode(t.content.body)),d=t.origin_server_ts||1,u=t.content.block,f=t.content.version;if(i==a?_.find(l,(function(e,t){if(t!=a)return s=t,c=t,!0})):(c=a,s=i),!l[c])throw new Error("emptyforme");return p.decrypt(s,l[c],d,u,null,f).then(e=>{var t={body:e,msgtype:"m.text"};return h.set(n,JSON.stringify(t)),t}).catch(e=>(console.error(e),console.log(t),Promise.reject(e)))}));return function(t){return e.apply(this,arguments)}}()).finally(()=>{delete t.decrypting});return t.decrypting=a,a}));return function(e){return t.apply(this,arguments)}}(),p.encryptFile=function(){var e=Object(i["a"])((function*(e,t){var r=yield w.randomkey(),n=yield p.encryptKey(r),i={file:null,secrets:n};return w.encryptFile(e,r,t).then(e=>(i.file=e,Promise.resolve(i))).catch(e=>(console.error(e),Promise.reject(e)))}));return function(t,r){return e.apply(this,arguments)}}(),p.decryptFile=function(){var e=Object(i["a"])((function*(e,t,r,n){return w.decryptFile(e,t,r,n).then(e=>Promise.resolve(e))}));return function(t,r,n,i){return e.apply(this,arguments)}}(),p.encryptKey=function(){var e=Object(i["a"])((function*(e){var t=p.preparedUsers(void 0,p.version),i=r.currentblock.height;r.core.mtrx.kit.tetatetchat(n)||(i=10);for(var a={block:i,keys:{},v:p.version},s=0;s<t.length;s++){var c=t[s];(c.id!=r.user.userinfo.id||t.length<=1)&&(a.keys[c.id]=yield p.encrypt(c.id,e,p.version))}return a.keys=o["a"].Base64.encode(JSON.stringify(a.keys)),a}));return function(t){return e.apply(this,arguments)}}(),p.decryptKey=function(){var e=Object(i["a"])((function*(e){if(!r.user.userinfo)throw new Error("userinfo");var t="",n="",i=void 0;if("m.room.encryption"==e.type?(t=e.content.keys,n=e.content.block,i=e.content.version||1):(t=o["a"].deep(e,"content.info.secrets.keys")||o["a"].deep(e,"content.pbody.secrets.keys"),n=o["a"].deep(e,"content.info.secrets.block")||o["a"].deep(e,"content.pbody.secrets.block"),i=o["a"].deep(e,"content.info.secrets.version")||o["a"].deep(e,"content.info.secrets.v")||o["a"].deep(e,"content.pbody.secrets.version")||o["a"].deep(e,"content.pbody.secrets.v")||1),!t)throw new Error("secrets");if(!n)throw new Error("block");var a=o["a"].getmatrixid(e.sender),s=r.user.userinfo.id,c=null,l=null,d=JSON.parse(o["a"].Base64.decode(t)),u=e.origin_server_ts||1,h=_.map(d,(e,t)=>t);if(h.push(a),h=_.uniq(h),a==s?_.find(d,(function(e,t){if(t!=s)return c=t,l=t,!0})):(l=s,c=a),!d[l])throw new Error("emptyforme");var f=yield p.decrypt(c,d[l],u,n,h,i);return f}));return function(t){return e.apply(this,arguments)}}(),p.encryptEvent=function(){var e=Object(i["a"])((function*(e){var t=p.preparedUsers(void 0,p.version);if(!r.core.mtrx.kit.tetatetchat(n))return p.encryptEventGroup(e);for(var i={block:r.currentblock.height,version:this.version,msgtype:"m.encrypted",body:{}},a=0;a<t.length;a++){var s=t[a];(s.id!=r.user.userinfo.id||t.length<=1)&&(i.body[s.id]=yield p.encrypt(s.id,e,p.version))}return i.body=o["a"].Base64.encode(JSON.stringify(i.body)),i}));return function(t){return e.apply(this,arguments)}}();var j=function(){var e=p.preparedUsers(void 0,p.version),t=o["a"].md5(_.filter(_.map(e,e=>e.id),e=>e&&e!=r.user.userinfo.id).join("")+"_v"+k+"_"+p.version);return t},L=function(e){return o["a"].md5(_.sortBy(e,e=>Number(e.replace(/[^0-9]/g,""))).join(""))};p.sendCommonKey=function(){return p.createMyCommonKey().then(e=>r.core.mtrx.client.sendStateEvent(n.roomId,"m.room.encryption",e.export,"pcrypto."+r.user.userinfo.id+"."+e.export.hash)).then(e=>p.getCommonKey()).catch(e=>(console.error(e),Promise.reject(e)))};var N=function(e,t){var i=t||j();e||(e=r.user.userinfo.id);var o="pcrypto."+e+"."+i,a=n.currentState.getStateEvents("m.room.encryption"),s=_.find(a,e=>e.event.state_key==o);if(s)return s};p.getCommonKey=function(e,t){return o["a"].pretry(()=>{var r=N(e,t);return r},50,5e3).then(()=>{var r=N(e,t);return r?Promise.resolve(r.event):Promise.reject("m.room.encryption event not found")})},p.getOrCreateCommonKey=function(){var e=null,t=N(),r=null;return r=t?Promise.resolve(t.event):p.sendCommonKey(),r.then(t=>(e=t,p.decryptKey(t))).then(t=>({key:t,hash:e.content.hash,block:e.content.block,version:e.content.version||void 0}))},p.createMyCommonKey=function(){var e=j(),t={private:{},export:{version:p.version}};return w.randomkey().then(e=>(t.private.secret=e,w.key(e))).then(r=>(t.private.key=r,t.private.hash=e,t.export.hash=e,p.encryptKey(t.private.secret))).then(e=>(t.export.keys=e.keys,t.export.block=e.block,p.decryptKey({type:"m.room.encryption",sender:r.user.myMatrixId(),origin_server_ts:(new Date).getTime(),content:{...t.export}}).then(()=>t).catch(e=>(console.error(e),Promise.reject(e)))))},p.decryptEventGroup=function(e){if(!r.user.userinfo)throw new Error("userinfo");if(e.decrypting)return e.decrypting;var n=e.content.hash,i=o["a"].getmatrixid(e.sender),a=(e.content.block,p.getCommonKey(i,n).then(e=>p.decryptKey(e).catch(e=>Promise.reject(e))).then(r=>w.decrypt(t.from(e.content.body,"hex"),r).then(e=>{var t=new TextDecoder,r={body:t.decode(new Uint8Array(e)),msgtype:"m.text"};return Promise.resolve(r)})).catch(e=>Promise.reject(e)).finally(()=>{delete e.decrypting}));return e.decrypting=a,a},p.encryptEventGroup=function(){var e=Object(i["a"])((function*(e){var r={msgtype:"m.encrypted",body:{}};return p.getOrCreateCommonKey().then(n=>{r.block=n.block,r.hash=n.hash;let i=new TextEncoder;return w.encrypt(i.encode(e),n.key).then(e=>(r.body=t.from(e).toString("hex"),Promise.resolve(r)))})}));return function(t){return e.apply(this,arguments)}}();var U=function(){var e=Object(i["a"])((function*(e,{encrypted:t,nonce:r}){var n=yield s["SIV"].importKey(e,"AES-SIV"),i=new Uint8Array(o["a"]._base64ToArrayBuffer(t)),a=new Uint8Array(o["a"]._base64ToArrayBuffer(r)),c=yield n.open(i,a),l=yield(new TextDecoder).decode(c);return l}));return function(t,r){return e.apply(this,arguments)}}(),F=function(){var e=Object(i["a"])((function*(e,t){let r=yield s["SIV"].importKey(t,"AES-SIV"),n=new Uint8Array((new TextEncoder).encode(e)),i=new Uint8Array(32);window.crypto.getRandomValues(i);let a=yield r.seal(n,i),c={encrypted:o["a"]._arrayBufferToBase64(a.buffer),nonce:o["a"]._arrayBufferToBase64(i.buffer)};return c}));return function(t,r){return e.apply(this,arguments)}}();return p}));return function(e,t,n){return r.apply(this,arguments)}}(),f=function(){var e=this,t=[19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],r=[],n=null,i=function(e,t){return new(window.wFile||window.File)([e],"encrypted",{type:"encrypted/"+t.type,name:t.name})},a=function(e,t,r={}){var n=t.name||r.name||"decrypted",i=(r.type||"").replace("encrypted/","")||(t.type||"").replace("encrypted/","");return new(window.wFile||window.File)([e],n,{type:i,name:n})};e.randomkey=function(){return new Promise(e=>{var t=new Uint32Array(24),r=window.crypto.getRandomValues(t).toString("hex");e(r)})},e.key=function(e){let t=new TextEncoder;function r(){return window.crypto.subtle.importKey("raw",t.encode(e),"PBKDF2",!1,["deriveBits","deriveKey"])}return r().then(e=>window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t.encode("matrix.pocketnet"),iterations:1e4,hash:"SHA-256"},e,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]))},e.encryptFile=function(t,r,n){return o["a"].readFile(t).then(t=>e.encrypt(t,r,n)).then(e=>Promise.resolve(i(e,t)))},e.decryptFile=function(t,r,n,i){return o["a"].readFile(t).then(t=>e.decrypt(t,r,n)).then(e=>Promise.resolve(a(e,t,i)))},e.encrypt=function(r,n,i){return r&&n?(i||(i={}),i.charsetEnc=i.charsetEnc||"utf8",i.charsetDec=i.charsetDec||"hex",e.key(n).then(e=>crypto.subtle.encrypt({name:"AES-CBC",iv:new Uint8Array(t)},e,r)).then((function(e){return e}))):Promise.reject("data")},e.decrypt=function(r,n,i){return r&&n?(i||(i={}),i.charsetEnc=i.charsetEnc||"utf8",i.charsetDec=i.charsetDec||"hex",e.key(n).then(e=>crypto.subtle?crypto.subtle.decrypt({name:"AES-CBC",iv:new Uint8Array(t)},e,r):Promise.reject("crypto.subtle")).then((function(e){return e})).catch(e=>(console.error(e),Promise.reject(e)))):Promise.reject("data")},e.decryptFileQueue=function(t,n,i,o){return new Promise((a,s)=>{var c=r.push(()=>(r[c]=null,e.decryptFile(t,n,i,o).then(a).catch(e=>(s(e),Promise.resolve()))))-1})};return e.init=function(){n&&clearInterval(n)},e.destroy=function(){n&&(clearInterval(n),n=null)},e},p=function(e,t){u=new c("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);var r,n,o=this;return o.core=e,o.clearStorage=function(){o.core.mtrx.clearstorage("pcrypto")},o.currentblock={height:1},o.blocks={},o.user=null,o.rooms={},o.init=function(e){o.user=e},o.destroy=function(){_.each(o.rooms,(function(e){e.clear(),e.destroy()})),o.rooms={}},o.addroom=function(t){return pretry(()=>e.user.private&&12==e.user.private.length).then(function(){var e=Object(i["a"])((function*(e){if(o.rooms[t.roomId])return o.rooms[t.roomId].prepare();var i=yield new h(o,t,{ls:r,lse:n});return o.rooms[t.roomId]=i,i.prepare()}));return function(t){return e.apply(this,arguments)}}())},o.set={block:function(e){e&&e.height>o.currentblock.height&&(o.currentblock=e),e.height&&(o.blocks[e.height]=e)}},o.helpers={checkuser:function(){return!!(e.user&&e.user.private&&12==e.user.private.length&&e.user.userinfo&&e.user.userinfo.keys&&e.user.userinfo.keys.length)}},o.prepare=function(){return Promise.all([Object(a["a"])("messages",1),Object(a["a"])("events",1)]).then(e=>(r=e[0],n=e[1],Promise.resolve()))},o};r["a"]=p}).call(this,n("b639").Buffer)},"9c88":function(e,t,r){"use strict";(function(e){r.d(t,"g",(function(){return f}));var n=r("9523"),i=r.n(n),o=r("5451"),a=r("7dcc"),s=r("b83f"),c=r("7985"),l=r("992c"),d=r("c4c5"),u=r("070f"),h=r("0154");r.d(t,"d",(function(){return h["a"]})),r.d(t,"a",(function(){return a["a"]})),r.d(t,"e",(function(){return a["b"]})),r.d(t,"h",(function(){return a["c"]})),r.d(t,"b",(function(){return d["a"]})),r.d(t,"c",(function(){return d["b"]})),r.d(t,"f",(function(){return d["c"]})),r.d(t,"i",(function(){return l["a"]})),r.d(t,"j",(function(){return u["a"]})),r.d(t,"k",(function(){return u["b"]})),r.d(t,"l",(function(){return u["c"]})),r.d(t,"m",(function(){return u["d"]})),r.d(t,"n",(function(){return u["e"]}));class f extends o["a"]{constructor(){super(...arguments),i()(this,"uploads",[])}uploadContent(t){var r,n,i,o,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=null===(r=h.includeFilename)||void 0===r||r,p=null!==(n=h.abortController)&&void 0!==n?n:new AbortController,v=(null!==(i=h.type)&&void 0!==i?i:t.type)||"application/octet-stream",m=null!==(o=h.name)&&void 0!==o?o:t.name,g={loaded:0,total:0,abortController:p},y=Object(s["i"])(),b=!1;if(e.XMLHttpRequest&&b){var _=new e.XMLHttpRequest,w=function(){_.abort(),y.reject(new Error("Timeout"))},S=c["b"](w,3e4);_.onreadystatechange=function(){switch(_.readyState){case e.XMLHttpRequest.DONE:c["a"](S);try{if(0===_.status)throw new DOMException(_.statusText,"AbortError");if(!_.responseText)throw new Error("No response body.");_.status>=400?y.reject(Object(u["c"])(_,_.responseText)):y.resolve(JSON.parse(_.responseText))}catch(t){if("AbortError"===t.name)return void y.reject(t);y.reject(new d["a"]("request failed",t))}break}},_.upload.onprogress=e=>{var t;c["a"](S),g.loaded=e.loaded,g.total=e.total,S=c["b"](w,3e4),null===(t=h.progressHandler)||void 0===t||t.call(h,{loaded:e.loaded,total:e.total})};var E=this.getUrl("/upload",void 0,a["c"].V3);f&&m&&E.searchParams.set("filename",encodeURIComponent(m)),!this.opts.useAuthorizationHeader&&this.opts.accessToken&&E.searchParams.set("access_token",encodeURIComponent(this.opts.accessToken)),_.open(l["a"].Post,E.href),this.opts.useAuthorizationHeader&&this.opts.accessToken&&_.setRequestHeader("Authorization","Bearer "+this.opts.accessToken),_.setRequestHeader("Content-Type",v),_.send(t),p.signal.addEventListener("abort",()=>{_.abort()})}else{var k={};f&&m&&(k.filename=m);var I={"Content-Type":v};this.authedRequest(l["a"].Post,"/upload",k,t,{prefix:a["c"].V3,headers:I,abortSignal:p.signal}).then(e=>this.opts.onlyData?e:e.json()).then(y.resolve,y.reject)}return g.promise=y.promise.finally(()=>{Object(s["F"])(this.uploads,e=>e===g)}),p.signal.addEventListener("abort",()=>{Object(s["F"])(this.uploads,e=>e===g),y.reject(new DOMException("Aborted","AbortError"))}),this.uploads.push(g),g.promise}cancelUpload(e){var t=this.uploads.find(t=>t.promise===e);return!!t&&(t.abortController.abort(),!0)}getCurrentUploads(){return this.uploads}getContentUri(){return{base:this.opts.baseUrl,path:a["c"].V3+"/upload",params:{access_token:this.opts.accessToken}}}}}).call(this,r("c8ba"))},"9d2e":function(t,r,n){"use strict";(function(t,i){n.d(r,"a",(function(){return y})),n.d(r,"b",(function(){return _})),n.d(r,"d",(function(){return w})),n.d(r,"e",(function(){return S}));var o=n("c973"),a=n.n(o),s=n("9523"),c=n.n(s),l=n("75c9"),d=n("5b5f"),u=n("aab2"),h=n("c889"),f=n("1461");n.d(r,"c",(function(){return f["UserVerificationStatus"]}));var p,v=n("da1e"),m=6e4;function g(e){return Object.values(e.keys)[0]}class y{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.userId=e,this.callbacks=t,this.cacheCallbacks=r,c()(this,"keys",{}),c()(this,"firstUse",!0),c()(this,"crossSigningVerifiedBefore",!1)}static fromStorage(e,t){var r=new y(t);for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}toStorage(){return{keys:this.keys,firstUse:this.firstUse,crossSigningVerifiedBefore:this.crossSigningVerifiedBefore}}getCrossSigningKey(e,r){var n=this;return a()((function*(){var i=["master","self_signing","user_signing"].indexOf(e)>=0;if(!n.callbacks.getCrossSigningKey)throw new Error("No getCrossSigningKey callback supplied");function o(e){if(e){var n=new t.Olm.PkSigning,i=n.init_with_seed(e);if(i===r)return[i,n];n.free()}}void 0===r&&(r=n.getId(e));var a=null;n.cacheCallbacks.getCrossSigningKeyCache&&i&&(a=yield n.cacheCallbacks.getCrossSigningKeyCache(e,r));var s=o(a);if(s)return s;a=yield n.callbacks.getCrossSigningKey(e,r);var c=o(a);if(c)return n.cacheCallbacks.storeCrossSigningKeyCache&&i&&(yield n.cacheCallbacks.storeCrossSigningKeyCache(e,a)),c;if(!a)throw new Error("getCrossSigningKey callback for "+e+" returned falsey");throw new Error("Key type "+e+" from getCrossSigningKey callback did not match")}))()}isStoredInSecretStorage(e){return a()((function*(){var t=(yield e.isStored("m.cross_signing.master"))||{};function r(e){for(var r of Object.keys(t))e[r]||delete t[r]}for(var n of["self_signing","user_signing"])r((yield e.isStored("m.cross_signing.".concat(n)))||{});return Object.keys(t).length?t:null}))()}static storeInSecretStorage(e,t){return a()((function*(){for(var[r,n]of e){var i=Object(v["b"])(n);yield t.store("m.cross_signing.".concat(r),i)}}))()}static getFromSecretStorage(e,t){return a()((function*(){var r=yield t.get("m.cross_signing.".concat(e));return r?Object(v["a"])(r):null}))()}isStoredInKeyCache(e){var t=this;return a()((function*(){var r=t.cacheCallbacks;if(!r)return!1;var n=e?[e]:["master","self_signing","user_signing"];for(var i of n){var o;if(!(yield null===(o=r.getCrossSigningKeyCache)||void 0===o?void 0:o.call(r,i)))return!1}return!0}))()}getCrossSigningKeysFromCache(){var e=this;return a()((function*(){var t=new Map,r=e.cacheCallbacks;if(!r)return t;for(var n of["master","self_signing","user_signing"]){var i,o=yield null===(i=r.getCrossSigningKeyCache)||void 0===i?void 0:i.call(r,n);o&&t.set(n,o)}return t}))()}getId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"master";if(!this.keys[e])return null;var t=this.keys[e];return g(t)}resetKeys(e){var r=this;return a()((function*(){if(!r.callbacks.saveCrossSigningKeys)throw new Error("No saveCrossSigningKeys callback supplied");if(void 0===e||e&p.MASTER||!r.keys.master)e=p.MASTER|p.USER_SIGNING|p.SELF_SIGNING;else if(0===e)return;var n,i,o={},a={};try{if(e&p.MASTER?(n=new t.Olm.PkSigning,o.master=n.generate_seed(),i=n.init_with_seed(o.master),a.master={user_id:r.userId,usage:["master"],keys:{["ed25519:"+i]:i}}):[i,n]=yield r.getCrossSigningKey("master"),e&p.SELF_SIGNING){var s=new t.Olm.PkSigning;try{o.self_signing=s.generate_seed();var c=s.init_with_seed(o.self_signing);a.self_signing={user_id:r.userId,usage:["self_signing"],keys:{["ed25519:"+c]:c}},Object(l["pkSign"])(a.self_signing,n,r.userId,i)}finally{s.free()}}if(e&p.USER_SIGNING){var d=new t.Olm.PkSigning;try{o.user_signing=d.generate_seed();var u=d.init_with_seed(o.user_signing);a.user_signing={user_id:r.userId,usage:["user_signing"],keys:{["ed25519:"+u]:u}},Object(l["pkSign"])(a.user_signing,n,r.userId,i)}finally{d.free()}}Object.assign(r.keys,a),r.callbacks.saveCrossSigningKeys(o)}finally{n&&n.free()}}))()}clearKeys(){this.keys={}}setKeys(t){var r={};if(t.master){if(t.master.user_id!==this.userId){var n="Mismatched user ID "+t.master.user_id+" in master key from "+this.userId;throw d["b"].error(n),new Error(n)}this.keys.master?g(t.master)!==this.getId()&&(this.firstUse=!1):this.firstUse=!0,r.master=t.master}else{if(!this.keys.master)throw new Error("Tried to set cross-signing keys without a master key");r.master=this.keys.master}var i=g(r.master);if(t.user_signing){if(t.user_signing.user_id!==this.userId){var o="Mismatched user ID "+t.master.user_id+" in user_signing key from "+this.userId;throw d["b"].error(o),new Error(o)}try{Object(l["pkVerify"])(t.user_signing,i,this.userId)}catch(e){throw d["b"].error("invalid signature on user-signing key"),e}}if(t.self_signing){if(t.self_signing.user_id!==this.userId){var a="Mismatched user ID "+t.master.user_id+" in self_signing key from "+this.userId;throw d["b"].error(a),new Error(a)}try{Object(l["pkVerify"])(t.self_signing,i,this.userId)}catch(e){throw d["b"].error("invalid signature on self-signing key"),e}}t.master&&(this.keys.master=t.master,delete this.keys["self_signing"],delete this.keys["user_signing"]),t.self_signing&&(this.keys.self_signing=t.self_signing),t.user_signing&&(this.keys.user_signing=t.user_signing)}updateCrossSigningVerifiedBefore(e){!this.crossSigningVerifiedBefore&&e&&(this.crossSigningVerifiedBefore=!0)}signObject(e,t){var r=this;return a()((function*(){if(!r.keys[t])throw new Error("Attempted to sign with "+t+" key but no such key present");var[n,i]=yield r.getCrossSigningKey(t);try{return Object(l["pkSign"])(e,i,r.userId,n),e}finally{i.free()}}))()}signUser(e){var t=this;return a()((function*(){if(t.keys.user_signing)return t.signObject(e.keys.master,"user_signing");d["b"].info("No user signing key: not signing user")}))()}signDevice(e,t){var r=this;return a()((function*(){if(e!==r.userId)throw new Error("Trying to sign ".concat(e,"'s device; can only sign our own device"));if(r.keys.self_signing)return r.signObject({algorithms:t.algorithms,keys:t.keys,device_id:t.deviceId,user_id:e},"self_signing");d["b"].info("No self signing key: not signing device")}))()}checkUserTrust(t){if(this.userId===t.userId&&this.getId()&&this.getId()===t.getId()&&this.getId("self_signing")&&this.getId("self_signing")===t.getId("self_signing"))return new f["UserVerificationStatus"](!0,!0,this.firstUse);if(!this.keys.user_signing)return new f["UserVerificationStatus"](!1,!1,t.firstUse);var r,n=t.keys.master,i=this.getId("user_signing");try{Object(l["pkVerify"])(n,i,this.userId),r=!0}catch(e){r=!1}return new f["UserVerificationStatus"](r,t.crossSigningVerifiedBefore,t.firstUse)}checkDeviceTrust(t,r,n,i){var o=this.checkUserTrust(t),a=t.keys.self_signing;if(!a)return new _(!1,!1,n,i);var s=b(r,t.userId);try{return Object(l["pkVerify"])(a,t.getId(),t.userId),Object(l["pkVerify"])(s,g(a),t.userId),_.fromUserTrustLevel(o,n,i)}catch(e){return new _(!1,!1,n,i)}}getCacheCallbacks(){return this.cacheCallbacks}}function b(e,t){return{algorithms:e.algorithms,keys:e.keys,device_id:e.deviceId,user_id:t,signatures:e.signatures}}(function(e){e[e["MASTER"]=4]="MASTER",e[e["USER_SIGNING"]=2]="USER_SIGNING",e[e["SELF_SIGNING"]=1]="SELF_SIGNING"})(p||(p={}));class _ extends f["DeviceVerificationStatus"]{constructor(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super({crossSigningVerified:e,tofu:t,localVerified:r,trustCrossSignedDevices:n,signedByOwner:i})}static fromUserTrustLevel(e,t,r){return new _(e.isCrossSigningVerified(),e.isTofu(),t,r,!0)}isCrossSigningVerified(){return this.crossSigningVerified}isLocallyVerified(){return this.localVerified}isTofu(){return this.tofu}}function w(e,t){return{getCrossSigningKeyCache:function(){var r=a()((function*(r,n){var o=yield new Promise(t=>{e.doTxn("readonly",[u["a"].STORE_ACCOUNT],n=>{e.getSecretStorePrivateKey(n,t,r)})});if(o&&o.ciphertext){var a=i.from(t.pickleKey),s=yield Object(h["b"])(o,a,r);return Object(v["a"])(s)}return o}));function n(e,t){return r.apply(this,arguments)}return n}(),storeCrossSigningKeyCache:function(){var r=a()((function*(r,n){if(!(n instanceof Uint8Array))throw new Error("storeCrossSigningKeyCache expects Uint8Array, got ".concat(n));var o=i.from(t.pickleKey),a=yield Object(h["c"])(Object(v["b"])(n),o,r);return e.doTxn("readwrite",[u["a"].STORE_ACCOUNT],t=>{e.storeSecretStorePrivateKey(t,r,a)})}));function n(e,t){return r.apply(this,arguments)}return n}()}}function S(e,t,r){return E.apply(this,arguments)}function E(){return E=a()((function*(e,t,r){if(e.getUserId()===t)return d["b"].log("Cross-signing: Self-verification done; requesting keys"),new Promise((t,n)=>{var i=e,o=i.crypto.crossSigningInfo,s=new y(o.userId,{getCrossSigningKey:function(){var e=a()((function*(e){d["b"].debug("Cross-signing: requesting secret",e,r);var{promise:t}=i.requestSecret("m.cross_signing.".concat(e),[r]),n=yield t,o=Object(v["a"])(n);return Uint8Array.from(o)}));function t(t){return e.apply(this,arguments)}return t}()},o.getCacheCallbacks());s.keys=o.keys;var c=new Promise(e=>{setTimeout(e,m,new Error("Timeout"))}),l=a()((function*(){var e=yield i.crypto.getSessionBackupPrivateKey();if(!e){d["b"].info("No cached backup key found. Requesting...");var t=i.requestSecret("m.megolm_backup.v1",[r]),n=yield t.promise;d["b"].info("Got key backup key, decoding...");var o=Object(v["a"])(n);d["b"].info("Decoded backup key, storing..."),yield i.crypto.storeSessionBackupPrivateKey(Uint8Array.from(o)),d["b"].info("Backup key stored. Starting backup restore...");var a=yield i.getKeyBackupVersion();i.restoreKeyBackupWithCache(void 0,void 0,a).then(()=>{d["b"].info("Backup restored.")})}}))();Promise.race([Promise.all([s.getCrossSigningKey("master"),s.getCrossSigningKey("self_signing"),s.getCrossSigningKey("user_signing"),l]),c]).then(t,n)}).catch(e=>{d["b"].warn("Cross-signing: failure while requesting keys:",e)})})),E.apply(this,arguments)}}).call(this,n("c8ba"),n("b639").Buffer)},"9e6a":function(e,t,r){"use strict";var n=r("d233"),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l="utf8=%26%2310003%3B",d="utf8=%E2%9C%93",u=function(e,t){var r={__proto__:null},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;u=u.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var h,f=t.parameterLimit===1/0?void 0:t.parameterLimit,p=u.split(t.delimiter,f),v=-1,m=t.charset;if(t.charsetSentinel)for(h=0;h<p.length;++h)0===p[h].indexOf("utf8=")&&(p[h]===d?m="utf-8":p[h]===l&&(m="iso-8859-1"),v=h,h=p.length);for(h=0;h<p.length;++h)if(h!==v){var g,y,b=p[h],_=b.indexOf("]="),w=-1===_?b.indexOf("="):_+1;-1===w?(g=t.decoder(b,a.decoder,m,"key"),y=t.strictNullHandling?null:""):(g=t.decoder(b.slice(0,w),a.decoder,m,"key"),y=n.maybeMap(c(b.slice(w+1),t),(function(e){return t.decoder(e,a.decoder,m,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===m&&(y=s(y)),b.indexOf("[]=")>-1&&(y=o(y)?[y]:y);var S=i.call(r,g);S&&"combine"===t.duplicates?r[g]=n.combine(r[g],y):S&&"last"!==t.duplicates||(r[g]=y)}return r},h=function(e,t,r,n){for(var i=n?t:c(t,r),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&r.parseArrays)a=r.allowEmptyArrays&&(""===i||r.strictNullHandling&&null===i)?[]:[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,d=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,u=parseInt(d,10);r.parseArrays||""!==d?!isNaN(u)&&s!==d&&String(u)===d&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[],a[u]=i):"__proto__"!==d&&(a[d]=i):a={0:i}}i=a}return i},f=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,c=r.depth>0&&a.exec(o),l=c?o.slice(0,c.index):o,d=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;d.push(l)}var u=0;while(r.depth>0&&null!==(c=s.exec(o))&&u<r.depth){if(u+=1,!r.plainObjects&&i.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(c[1])}if(c){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");d.push("["+o.slice(c.index)+"]")}return h(d,t,r,n)}},p=function(e){if(!e)return a;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.decodeDotInKeys&&"boolean"!==typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&"undefined"!==typeof e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset,r="undefined"===typeof e.duplicates?a.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");var i="undefined"===typeof e.allowDots?!0===e.decodeDotInKeys||a.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decodeDotInKeys:"boolean"===typeof e.decodeDotInKeys?e.decodeDotInKeys:a.decodeDotInKeys,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:a.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictDepth:"boolean"===typeof e.strictDepth?!!e.strictDepth:a.strictDepth,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}};e.exports=function(e,t){var r=p(t);if(""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var i="string"===typeof e?u(e,r):e,o=r.plainObjects?Object.create(null):{},a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],l=f(c,i[c],r,"string"===typeof e);o=n.merge(o,l,r)}return!0===r.allowSparse?o:n.compact(o)}},"9e72":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,i,o=r("c973"),a=r.n(o),s=r("9c0b"),c=r("2f36"),l=r("3d21"),d=r("b83f"),u=r("60af"),h=new s["UnstableValue"]("m.policies","org.matrix.msc3847.policies"),f=new s["UnstableValue"]("m.ignore.invites","org.matrix.msc3847.ignore.invites");(function(e){e["Ban"]="m.ban"})(n||(n={})),function(e){e["User"]="m.policy.user",e["Room"]="m.policy.room",e["Server"]="m.policy.server"}(i||(i={}));var p={[i.User]:u["b"].PolicyRuleUser,[i.Room]:u["b"].PolicyRuleRoom,[i.Server]:u["b"].PolicyRuleServer};class v{constructor(e){this.client=e}addRule(e,t,r){var i=this;return a()((function*(){var o=yield i.getOrCreateTargetRoom(),a=yield i.client.sendStateEvent(o.roomId,p[e],{entity:t,reason:r,recommendation:n.Ban});return a.event_id}))()}removeRule(e){var t=this;return a()((function*(){yield t.client.redactEvent(e.getRoomId(),e.getId())}))()}addSource(e){var t=this;return a()((function*(){yield t.client.joinRoom(e);var r=(yield t.getOrCreateSourceRooms()).map(e=>e.roomId);return!r.includes(e)&&(r.push(e),yield t.withIgnoreInvitesPolicies(e=>{e.sources=r}),!0)}))()}getRuleForInvite(e){var t=this;return a()((function*(){var{sender:r,roomId:o}=e,a=yield t.getOrCreateSourceRooms(),s=r.split(":")[1],l=o.split(":")[1];for(var u of a){var h=u.getUnfilteredTimelineSet().getLiveTimeline().getState(c["b"].FORWARDS);for(var{scope:f,entities:v}of[{scope:i.Room,entities:[o]},{scope:i.User,entities:[r]},{scope:i.Server,entities:[s,l]}]){var m=h.getStateEvents(p[f]);for(var g of m){var y=g.getContent();if((null===y||void 0===y?void 0:y.recommendation)==n.Ban){var b=null===y||void 0===y?void 0:y.entity;if(b){var _=void 0;try{_=new RegExp(Object(d["n"])(b))}catch(S){continue}for(var w of v)if(w&&_.test(w))return g}}}}}return null}))()}getOrCreateTargetRoom(){var e=this;return a()((function*(){var t=e.getIgnoreInvitesPolicies(),r=t.target;if("string"!==typeof r&&(r=null),r){var n=e.client.getRoom(r);if(n)return n;r=null}return r=(yield e.client.createRoom({name:"Individual Policy Room",preset:l["d"].PrivateChat})).room_id,yield e.withIgnoreInvitesPolicies(e=>{e.target=r}),e.client.getRoom(r)}))()}getOrCreateSourceRooms(){var e=this;return a()((function*(){var t=e.getIgnoreInvitesPolicies(),r=t.sources,n=!1;Array.isArray(r)||(n=!0,r=[]);var i=r.filter(e=>"string"===typeof e).map(t=>e.client.getRoom(t)).filter(e=>!!e);if(i.length!=r.length&&(n=!0),0==i.length){var o=yield e.getOrCreateTargetRoom();n=!0,i=[o]}return n&&(yield e.withIgnoreInvitesPolicies(e=>{e.sources=r})),i}))()}getIgnoreInvitesPolicies(){return this.getPoliciesAndIgnoreInvitesPolicies().ignoreInvitesPolicies}withIgnoreInvitesPolicies(e){var t=this;return a()((function*(){var{policies:r,ignoreInvitesPolicies:n}=t.getPoliciesAndIgnoreInvitesPolicies();e(n),r[f.name]=n,yield t.client.setAccountData(h.name,r)}))()}getPoliciesAndIgnoreInvitesPolicies(){var e={};for(var t of[h.name,h.altName]){var r;if(t){var n=null===(r=this.client.getAccountData(t))||void 0===r?void 0:r.getContent();if(n){e=n;break}}}var i={},o=!1;for(var a of[f.name,f.altName])if(a){var s=e[a];if(s&&"object"==typeof s){i=s,o=!0;break}}return o||(e[f.name]=i),{policies:e,ignoreInvitesPolicies:i}}}},"9e84":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensibleEvent=void 0;var a=function(){function e(t){n(this,e),this.wireFormat=t}return o(e,[{key:"wireContent",get:function(){return this.wireFormat.content}}]),e}();t.ExtensibleEvent=a},"9f65":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("9523"),i=r.n(n),o=r("886e"),a=r("3ba7");function s(e,t){if(t.endsWith("*")){var r=t.slice(0,-1);return e.slice(0,r.length)===r}return e===t}class c{constructor(e,t){this.filterJson=e,this.userId=t}check(e){var t,r,n=(null===(t=e.getUnsigned())||void 0===t?void 0:t["m.relations"])||{},i=Object.keys(n),o=[];return this.userId&&null!==n&&void 0!==n&&null!==(r=n[a["d"].name])&&void 0!==r&&r.current_user_participated&&o.push(this.userId),this.checkFields(e.getRoomId(),e.getSender(),e.getType(),!!e.getContent()&&void 0!==e.getContent().url,i,o)}toJSON(){return{types:this.filterJson.types||null,not_types:this.filterJson.not_types||[],rooms:this.filterJson.rooms||null,not_rooms:this.filterJson.not_rooms||[],senders:this.filterJson.senders||null,not_senders:this.filterJson.not_senders||[],contains_url:this.filterJson.contains_url||null,[a["b"].name]:this.filterJson[a["b"].name]||[],[a["a"].name]:this.filterJson[a["a"].name]||[]}}checkFields(e,t,r,n,i,o){var c={rooms:function(t){return e===t},senders:function(e){return t===e},types:function(e){return s(r,e)}};for(var l in c){var d=c[l],u="not_"+l,h=this.filterJson[u];if(null!==h&&void 0!==h&&h.some(d))return!1;var f=this.filterJson[l];if(f&&!f.some(d))return!1}var p=this.filterJson.contains_url;if(void 0!==p&&p!==n)return!1;var v=this.filterJson[a["a"].name];if(void 0!==v&&!this.arrayMatchesFilter(v,i))return!1;var m=this.filterJson[a["b"].name];return!(void 0!==m&&!this.arrayMatchesFilter(m,o))}arrayMatchesFilter(e,t){return t.length>0&&e.every(e=>t.includes(e))}filter(e){return e.filter(this.check,this)}limit(){return void 0!==this.filterJson.limit?this.filterJson.limit:10}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){for(var n=t.split("."),i=e,o=0;o<n.length-1;o++)i[n[o]]||(i[n[o]]={}),i=i[n[o]];i[n[n.length-1]]=r}class h{static fromJson(e,t,r){var n=new h(e,t);return n.setDefinition(r),n}constructor(e,t){this.userId=e,this.filterId=t,i()(this,"definition",{}),i()(this,"roomFilter",void 0),i()(this,"roomTimelineFilter",void 0)}getFilterId(){return this.filterId}getDefinition(){return this.definition}setDefinition(e){this.definition=e;var t=e.room,r={};t&&(t.rooms&&(r.rooms=t.rooms),t.rooms&&(r.not_rooms=t.not_rooms)),this.roomFilter=new c(r,this.userId),this.roomTimelineFilter=new c((null===t||void 0===t?void 0:t.timeline)||{},this.userId)}getRoomTimelineFilterComponent(){return this.roomTimelineFilter}filterRoomTimeline(e){return this.roomFilter&&(e=this.roomFilter.filter(e)),this.roomTimelineFilter&&(e=this.roomTimelineFilter.filter(e)),e}setTimelineLimit(e){u(this.definition,"room.timeline.limit",e)}setUnreadThreadNotifications(e){var t,r,n;this.definition=d(d({},this.definition),{},{room:d(d({},null===(t=this.definition)||void 0===t?void 0:t.room),{},{timeline:d(d({},null===(r=this.definition)||void 0===r||null===(n=r.room)||void 0===n?void 0:n.timeline),{},{[o["a"].name]:e})})})}setLazyLoadMembers(e){u(this.definition,"room.state.lazy_load_members",e)}setIncludeLeaveRooms(e){u(this.definition,"room.include_leave",e)}}i()(h,"LAZY_LOADING_MESSAGES_FILTER",{lazy_load_members:!0})},"9f9d":function(e,t,r){(function(t,r){var n;if(t.process&&t.process.browser)n="utf-8";else if(t.process&&t.process.version){var i=parseInt(r.version.split(".")[0].slice(1),10);n=i>=6?"utf-8":"binary"}else n="utf-8";e.exports=n}).call(this,r("c8ba"),r("4362"))},a026:function(t,r,n){"use strict";n.r(r),function(t){n.d(r,"EffectScope",(function(){return Or})),n.d(r,"computed",(function(){return _t})),n.d(r,"customRef",(function(){return ut})),n.d(r,"default",(function(){return so})),n.d(r,"defineAsyncComponent",(function(){return Un})),n.d(r,"defineComponent",(function(){return ti})),n.d(r,"del",(function(){return $e})),n.d(r,"effectScope",(function(){return Mr})),n.d(r,"getCurrentInstance",(function(){return _e})),n.d(r,"getCurrentScope",(function(){return Pr})),n.d(r,"h",(function(){return wn})),n.d(r,"inject",(function(){return _n})),n.d(r,"isProxy",(function(){return Qe})),n.d(r,"isReactive",(function(){return Je})),n.d(r,"isReadonly",(function(){return Ze})),n.d(r,"isRef",(function(){return nt})),n.d(r,"isShallow",(function(){return Xe})),n.d(r,"markRaw",(function(){return tt})),n.d(r,"mergeDefaults",(function(){return pr})),n.d(r,"nextTick",(function(){return jn})),n.d(r,"onActivated",(function(){return Gn})),n.d(r,"onBeforeMount",(function(){return Kn})),n.d(r,"onBeforeUnmount",(function(){return $n})),n.d(r,"onBeforeUpdate",(function(){return Vn})),n.d(r,"onDeactivated",(function(){return Hn})),n.d(r,"onErrorCaptured",(function(){return Qn})),n.d(r,"onMounted",(function(){return qn})),n.d(r,"onRenderTracked",(function(){return Jn})),n.d(r,"onRenderTriggered",(function(){return Xn})),n.d(r,"onScopeDispose",(function(){return Dr})),n.d(r,"onServerPrefetch",(function(){return Yn})),n.d(r,"onUnmounted",(function(){return zn})),n.d(r,"onUpdated",(function(){return Wn})),n.d(r,"provide",(function(){return yn})),n.d(r,"proxyRefs",(function(){return lt})),n.d(r,"reactive",(function(){return Ge})),n.d(r,"readonly",(function(){return mt})),n.d(r,"ref",(function(){return it})),n.d(r,"set",(function(){return We})),n.d(r,"shallowReactive",(function(){return He})),n.d(r,"shallowReadonly",(function(){return bt})),n.d(r,"shallowRef",(function(){return ot})),n.d(r,"toRaw",(function(){return et})),n.d(r,"toRef",(function(){return ft})),n.d(r,"toRefs",(function(){return ht})),n.d(r,"triggerRef",(function(){return st})),n.d(r,"unref",(function(){return ct})),n.d(r,"useAttrs",(function(){return ur})),n.d(r,"useCssModule",(function(){return Ln})),n.d(r,"useCssVars",(function(){return Nn})),n.d(r,"useListeners",(function(){return hr})),n.d(r,"useSlots",(function(){return dr})),n.d(r,"version",(function(){return ei})),n.d(r,"watch",(function(){return mn})),n.d(r,"watchEffect",(function(){return hn})),n.d(r,"watchPostEffect",(function(){return fn})),n.d(r,"watchSyncEffect",(function(){return pn}));
/*!
 * Vue.js v2.7.16
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({}),o=Array.isArray;function a(e){return void 0===e||null===e}function s(e){return void 0!==e&&null!==e}function c(e){return!0===e}function l(e){return!1===e}function d(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return"function"===typeof e}function h(e){return null!==e&&"object"===typeof e}var f=Object.prototype.toString;function p(e){return"[object Object]"===f.call(e)}function v(e){return"[object RegExp]"===f.call(e)}function m(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function g(e){return s(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function y(e){return null==e?"":Array.isArray(e)||p(e)&&e.toString===f?JSON.stringify(e,b,2):String(e)}function b(e,t){return t&&t.__v_isRef?t.value:t}function _(e){var t=parseFloat(e);return isNaN(t)?e:t}function w(e,t){for(var r=Object.create(null),n=e.split(","),i=0;i<n.length;i++)r[n[i]]=!0;return t?function(e){return r[e.toLowerCase()]}:function(e){return r[e]}}var S=w("slot,component",!0),E=w("key,ref,slot,slot-scope,is");function k(e,t){var r=e.length;if(r){if(t===e[r-1])return void(e.length=r-1);var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var I=Object.prototype.hasOwnProperty;function C(e,t){return I.call(e,t)}function T(e){var t=Object.create(null);return function(r){var n=t[r];return n||(t[r]=e(r))}}var R=/-(\w)/g,x=T((function(e){return e.replace(R,(function(e,t){return t?t.toUpperCase():""}))})),O=T((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),M=/\B([A-Z])/g,A=T((function(e){return e.replace(M,"-$1").toLowerCase()}));function P(e,t){function r(r){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,r):e.call(t)}return r._length=e.length,r}function D(e,t){return e.bind(t)}var j=Function.prototype.bind?D:P;function L(e,t){t=t||0;var r=e.length-t,n=new Array(r);while(r--)n[r]=e[r+t];return n}function N(e,t){for(var r in t)e[r]=t[r];return e}function U(e){for(var t={},r=0;r<e.length;r++)e[r]&&N(t,e[r]);return t}function F(e,t,r){}var B=function(e,t,r){return!1},K=function(e){return e};function q(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}function V(t,r){if(t===r)return!0;var n=h(t),i=h(r);if(!n||!i)return!n&&!i&&String(t)===String(r);try{var o=Array.isArray(t),a=Array.isArray(r);if(o&&a)return t.length===r.length&&t.every((function(e,t){return V(e,r[t])}));if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(o||a)return!1;var s=Object.keys(t),c=Object.keys(r);return s.length===c.length&&s.every((function(e){return V(t[e],r[e])}))}catch(e){return!1}}function W(e,t){for(var r=0;r<e.length;r++)if(V(e[r],t))return r;return-1}function $(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function z(e,t){return e===t?0===e&&1/e!==1/t:e===e||t===t}var G="data-server-rendered",H=["component","directive","filter"],Y=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],J={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:B,isReservedAttr:B,isUnknownElement:B,getTagNamespace:F,parsePlatformTagName:K,mustUseProp:B,async:!0,_lifecycleHooks:Y},X=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Z(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function Q(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!!n,writable:!0,configurable:!0})}var ee=new RegExp("[^".concat(X.source,".$_\\d]"));function te(e){if(!ee.test(e)){var t=e.split(".");return function(e){for(var r=0;r<t.length;r++){if(!e)return;e=e[t[r]]}return e}}}var re="__proto__"in{},ne="undefined"!==typeof window,ie=ne&&window.navigator.userAgent.toLowerCase(),oe=ie&&/msie|trident/.test(ie),ae=ie&&ie.indexOf("msie 9.0")>0,se=ie&&ie.indexOf("edge/")>0;ie&&ie.indexOf("android");var ce=ie&&/iphone|ipad|ipod|ios/.test(ie);ie&&/chrome\/\d+/.test(ie),ie&&/phantomjs/.test(ie);var le,de=ie&&ie.match(/firefox\/(\d+)/),ue={}.watch,he=!1;if(ne)try{var fe={};Object.defineProperty(fe,"passive",{get:function(){he=!0}}),window.addEventListener("test-passive",null,fe)}catch(e){}var pe=function(){return void 0===le&&(le=!ne&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),le},ve=ne&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function me(e){return"function"===typeof e&&/native code/.test(e.toString())}var ge,ye="undefined"!==typeof Symbol&&me(Symbol)&&"undefined"!==typeof Reflect&&me(Reflect.ownKeys);ge="undefined"!==typeof Set&&me(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var be=null;function _e(){return be&&{proxy:be}}function we(e){void 0===e&&(e=null),e||be&&be._scope.off(),be=e,e&&e._scope.on()}var Se=function(){function e(e,t,r,n,i,o,a,s){this.tag=e,this.data=t,this.children=r,this.text=n,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),Ee=function(e){void 0===e&&(e="");var t=new Se;return t.text=e,t.isComment=!0,t};function ke(e){return new Se(void 0,void 0,void 0,String(e))}function Ie(e){var t=new Se(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}"function"===typeof SuppressedError&&SuppressedError;var Ce=0,Te=[],Re=function(){for(var e=0;e<Te.length;e++){var t=Te[e];t.subs=t.subs.filter((function(e){return e})),t._pending=!1}Te.length=0},xe=function(){function e(){this._pending=!1,this.id=Ce++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,Te.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){var t=this.subs.filter((function(e){return e}));for(var r=0,n=t.length;r<n;r++){var i=t[r];0,i.update()}},e}();xe.target=null;var Oe=[];function Me(e){Oe.push(e),xe.target=e}function Ae(){Oe.pop(),xe.target=Oe[Oe.length-1]}var Pe=Array.prototype,De=Object.create(Pe),je=["push","pop","shift","unshift","splice","sort","reverse"];je.forEach((function(e){var t=Pe[e];Q(De,e,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i,o=t.apply(this,r),a=this.__ob__;switch(e){case"push":case"unshift":i=r;break;case"splice":i=r.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Le=Object.getOwnPropertyNames(De),Ne={},Ue=!0;function Fe(e){Ue=e}var Be={notify:F,depend:F,addSub:F,removeSub:F},Ke=function(){function e(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=!1),this.value=e,this.shallow=t,this.mock=r,this.dep=r?Be:new xe,this.vmCount=0,Q(e,"__ob__",this),o(e)){if(!r)if(re)e.__proto__=De;else for(var n=0,i=Le.length;n<i;n++){var a=Le[n];Q(e,a,De[a])}t||this.observeArray(e)}else{var s=Object.keys(e);for(n=0;n<s.length;n++){a=s[n];Ve(e,a,Ne,void 0,t,r)}}}return e.prototype.observeArray=function(e){for(var t=0,r=e.length;t<r;t++)qe(e[t],!1,this.mock)},e}();function qe(e,t,r){return e&&C(e,"__ob__")&&e.__ob__ instanceof Ke?e.__ob__:!Ue||!r&&pe()||!o(e)&&!p(e)||!Object.isExtensible(e)||e.__v_skip||nt(e)||e instanceof Se?void 0:new Ke(e,t,r)}function Ve(e,t,r,n,i,a,s){void 0===s&&(s=!1);var c=new xe,l=Object.getOwnPropertyDescriptor(e,t);if(!l||!1!==l.configurable){var d=l&&l.get,u=l&&l.set;d&&!u||r!==Ne&&2!==arguments.length||(r=e[t]);var h=i?r&&r.__ob__:qe(r,!1,a);return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=d?d.call(e):r;return xe.target&&(c.depend(),h&&(h.dep.depend(),o(t)&&ze(t))),nt(t)&&!i?t.value:t},set:function(t){var n=d?d.call(e):r;if(z(n,t)){if(u)u.call(e,t);else{if(d)return;if(!i&&nt(n)&&!nt(t))return void(n.value=t);r=t}h=i?t&&t.__ob__:qe(t,!1,a),c.notify()}}}),c}}function We(e,t,r){if(!Ze(e)){var n=e.__ob__;return o(e)&&m(t)?(e.length=Math.max(e.length,t),e.splice(t,1,r),n&&!n.shallow&&n.mock&&qe(r,!1,!0),r):t in e&&!(t in Object.prototype)?(e[t]=r,r):e._isVue||n&&n.vmCount?r:n?(Ve(n.value,t,r,void 0,n.shallow,n.mock),n.dep.notify(),r):(e[t]=r,r)}}function $e(e,t){if(o(e)&&m(t))e.splice(t,1);else{var r=e.__ob__;e._isVue||r&&r.vmCount||Ze(e)||C(e,t)&&(delete e[t],r&&r.dep.notify())}}function ze(e){for(var t=void 0,r=0,n=e.length;r<n;r++)t=e[r],t&&t.__ob__&&t.__ob__.dep.depend(),o(t)&&ze(t)}function Ge(e){return Ye(e,!1),e}function He(e){return Ye(e,!0),Q(e,"__v_isShallow",!0),e}function Ye(e,t){if(!Ze(e)){qe(e,t,pe());0}}function Je(e){return Ze(e)?Je(e["__v_raw"]):!(!e||!e.__ob__)}function Xe(e){return!(!e||!e.__v_isShallow)}function Ze(e){return!(!e||!e.__v_isReadonly)}function Qe(e){return Je(e)||Ze(e)}function et(e){var t=e&&e["__v_raw"];return t?et(t):e}function tt(e){return Object.isExtensible(e)&&Q(e,"__v_skip",!0),e}var rt="__v_isRef";function nt(e){return!(!e||!0!==e.__v_isRef)}function it(e){return at(e,!1)}function ot(e){return at(e,!0)}function at(e,t){if(nt(e))return e;var r={};return Q(r,rt,!0),Q(r,"__v_isShallow",t),Q(r,"dep",Ve(r,"value",e,null,t,pe())),r}function st(e){e.dep&&e.dep.notify()}function ct(e){return nt(e)?e.value:e}function lt(e){if(Je(e))return e;for(var t={},r=Object.keys(e),n=0;n<r.length;n++)dt(t,e,r[n]);return t}function dt(e,t,r){Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){var e=t[r];if(nt(e))return e.value;var n=e&&e.__ob__;return n&&n.dep.depend(),e},set:function(e){var n=t[r];nt(n)&&!nt(e)?n.value=e:t[r]=e}})}function ut(e){var t=new xe,r=e((function(){t.depend()}),(function(){t.notify()})),n=r.get,i=r.set,o={get value(){return n()},set value(e){i(e)}};return Q(o,rt,!0),o}function ht(e){var t=o(e)?new Array(e.length):{};for(var r in e)t[r]=ft(e,r);return t}function ft(e,t,r){var n=e[t];if(nt(n))return n;var i={get value(){var n=e[t];return void 0===n?r:n},set value(r){e[t]=r}};return Q(i,rt,!0),i}var pt="__v_rawToReadonly",vt="__v_rawToShallowReadonly";function mt(e){return gt(e,!1)}function gt(e,t){if(!p(e))return e;if(Ze(e))return e;var r=t?vt:pt,n=e[r];if(n)return n;var i=Object.create(Object.getPrototypeOf(e));Q(e,r,i),Q(i,"__v_isReadonly",!0),Q(i,"__v_raw",e),nt(e)&&Q(i,rt,!0),(t||Xe(e))&&Q(i,"__v_isShallow",!0);for(var o=Object.keys(e),a=0;a<o.length;a++)yt(i,e,o[a],t);return i}function yt(e,t,r,n){Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){var e=t[r];return n||!p(e)?e:mt(e)},set:function(){}})}function bt(e){return gt(e,!0)}function _t(e,t){var r,n,i=u(e);i?(r=e,n=F):(r=e.get,n=e.set);var o=pe()?null:new ai(be,r,F,{lazy:!0});var a={effect:o,get value(){return o?(o.dirty&&o.evaluate(),xe.target&&o.depend(),o.value):r()},set value(e){n(e)}};return Q(a,rt,!0),Q(a,"__v_isReadonly",i),a}var wt=T((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var r="~"===e.charAt(0);e=r?e.slice(1):e;var n="!"===e.charAt(0);return e=n?e.slice(1):e,{name:e,once:r,capture:n,passive:t}}));function St(e,t){function r(){var e=r.fns;if(!o(e))return En(e,null,arguments,t,"v-on handler");for(var n=e.slice(),i=0;i<n.length;i++)En(n[i],null,arguments,t,"v-on handler")}return r.fns=e,r}function Et(e,t,r,n,i,o){var s,l,d,u;for(s in e)l=e[s],d=t[s],u=wt(s),a(l)||(a(d)?(a(l.fns)&&(l=e[s]=St(l,o)),c(u.once)&&(l=e[s]=i(u.name,l,u.capture)),r(u.name,l,u.capture,u.passive,u.params)):l!==d&&(d.fns=l,e[s]=d));for(s in t)a(e[s])&&(u=wt(s),n(u.name,t[s],u.capture))}function kt(e,t,r){var n;e instanceof Se&&(e=e.data.hook||(e.data.hook={}));var i=e[t];function o(){r.apply(this,arguments),k(n.fns,o)}a(i)?n=St([o]):s(i.fns)&&c(i.merged)?(n=i,n.fns.push(o)):n=St([i,o]),n.merged=!0,e[t]=n}function It(e,t,r){var n=t.options.props;if(!a(n)){var i={},o=e.attrs,c=e.props;if(s(o)||s(c))for(var l in n){var d=A(l);Ct(i,c,l,d,!0)||Ct(i,o,l,d,!1)}return i}}function Ct(e,t,r,n,i){if(s(t)){if(C(t,r))return e[r]=t[r],i||delete t[r],!0;if(C(t,n))return e[r]=t[n],i||delete t[n],!0}return!1}function Tt(e){for(var t=0;t<e.length;t++)if(o(e[t]))return Array.prototype.concat.apply([],e);return e}function Rt(e){return d(e)?[ke(e)]:o(e)?Ot(e):void 0}function xt(e){return s(e)&&s(e.text)&&l(e.isComment)}function Ot(e,t){var r,n,i,l,u=[];for(r=0;r<e.length;r++)n=e[r],a(n)||"boolean"===typeof n||(i=u.length-1,l=u[i],o(n)?n.length>0&&(n=Ot(n,"".concat(t||"","_").concat(r)),xt(n[0])&&xt(l)&&(u[i]=ke(l.text+n[0].text),n.shift()),u.push.apply(u,n)):d(n)?xt(l)?u[i]=ke(l.text+n):""!==n&&u.push(ke(n)):xt(n)&&xt(l)?u[i]=ke(l.text+n.text):(c(e._isVList)&&s(n.tag)&&a(n.key)&&s(t)&&(n.key="__vlist".concat(t,"_").concat(r,"__")),u.push(n)));return u}var Mt=1,At=2;function Pt(e,t,r,n,i,a){return(o(r)||d(r))&&(i=n,n=r,r=void 0),c(a)&&(i=At),Dt(e,t,r,n,i)}function Dt(e,t,r,n,i){if(s(r)&&s(r.__ob__))return Ee();if(s(r)&&s(r.is)&&(t=r.is),!t)return Ee();var a,c;if(o(n)&&u(n[0])&&(r=r||{},r.scopedSlots={default:n[0]},n.length=0),i===At?n=Rt(n):i===Mt&&(n=Tt(n)),"string"===typeof t){var l=void 0;c=e.$vnode&&e.$vnode.ns||J.getTagNamespace(t),a=J.isReservedTag(t)?new Se(J.parsePlatformTagName(t),r,n,void 0,void 0,e):r&&r.pre||!s(l=eo(e.$options,"components",t))?new Se(t,r,n,void 0,void 0,e):Ni(l,r,e,n,t)}else a=Ni(t,r,e,n);return o(a)?a:s(a)?(s(c)&&jt(a,c),s(r)&&Lt(r),a):Ee()}function jt(e,t,r){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0),s(e.children))for(var n=0,i=e.children.length;n<i;n++){var o=e.children[n];s(o.tag)&&(a(o.ns)||c(r)&&"svg"!==o.tag)&&jt(o,t,r)}}function Lt(e){h(e.style)&&ni(e.style),h(e.class)&&ni(e.class)}function Nt(e,t){var r,n,i,a,c=null;if(o(e)||"string"===typeof e)for(c=new Array(e.length),r=0,n=e.length;r<n;r++)c[r]=t(e[r],r);else if("number"===typeof e)for(c=new Array(e),r=0;r<e;r++)c[r]=t(r+1,r);else if(h(e))if(ye&&e[Symbol.iterator]){c=[];var l=e[Symbol.iterator](),d=l.next();while(!d.done)c.push(t(d.value,c.length)),d=l.next()}else for(i=Object.keys(e),c=new Array(i.length),r=0,n=i.length;r<n;r++)a=i[r],c[r]=t(e[a],a,r);return s(c)||(c=[]),c._isVList=!0,c}function Ut(e,t,r,n){var i,o=this.$scopedSlots[e];o?(r=r||{},n&&(r=N(N({},n),r)),i=o(r)||(u(t)?t():t)):i=this.$slots[e]||(u(t)?t():t);var a=r&&r.slot;return a?this.$createElement("template",{slot:a},i):i}function Ft(e){return eo(this.$options,"filters",e,!0)||K}function Bt(e,t){return o(e)?-1===e.indexOf(t):e!==t}function Kt(e,t,r,n,i){var o=J.keyCodes[t]||r;return i&&n&&!J.keyCodes[t]?Bt(i,n):o?Bt(o,e):n?A(n)!==t:void 0===e}function qt(e,t,r,n,i){if(r)if(h(r)){o(r)&&(r=U(r));var a=void 0,s=function(o){if("class"===o||"style"===o||E(o))a=e;else{var s=e.attrs&&e.attrs.type;a=n||J.mustUseProp(t,s,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=x(o),l=A(o);if(!(c in a)&&!(l in a)&&(a[o]=r[o],i)){var d=e.on||(e.on={});d["update:".concat(o)]=function(e){r[o]=e}}};for(var c in r)s(c)}else;return e}function Vt(e,t){var r=this._staticTrees||(this._staticTrees=[]),n=r[e];return n&&!t||(n=r[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),$t(n,"__static__".concat(e),!1)),n}function Wt(e,t,r){return $t(e,"__once__".concat(t).concat(r?"_".concat(r):""),!0),e}function $t(e,t,r){if(o(e))for(var n=0;n<e.length;n++)e[n]&&"string"!==typeof e[n]&&zt(e[n],"".concat(t,"_").concat(n),r);else zt(e,t,r)}function zt(e,t,r){e.isStatic=!0,e.key=t,e.isOnce=r}function Gt(e,t){if(t)if(p(t)){var r=e.on=e.on?N({},e.on):{};for(var n in t){var i=r[n],o=t[n];r[n]=i?[].concat(i,o):o}}else;return e}function Ht(e,t,r,n){t=t||{$stable:!r};for(var i=0;i<e.length;i++){var a=e[i];o(a)?Ht(a,t,r):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return n&&(t.$key=n),t}function Yt(e,t){for(var r=0;r<t.length;r+=2){var n=t[r];"string"===typeof n&&n&&(e[t[r]]=t[r+1])}return e}function Jt(e,t){return"string"===typeof e?t+e:e}function Xt(e){e._o=Wt,e._n=_,e._s=y,e._l=Nt,e._t=Ut,e._q=V,e._i=W,e._m=Vt,e._f=Ft,e._k=Kt,e._b=qt,e._v=ke,e._e=Ee,e._u=Ht,e._g=Gt,e._d=Yt,e._p=Jt}function Zt(e,t){if(!e||!e.length)return{};for(var r={},n=0,i=e.length;n<i;n++){var o=e[n],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(r.default||(r.default=[])).push(o);else{var s=a.slot,c=r[s]||(r[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in r)r[l].every(Qt)&&delete r[l];return r}function Qt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function er(e){return e.isComment&&e.asyncFactory}function tr(e,t,r,n){var o,a=Object.keys(r).length>0,s=t?!!t.$stable:!a,c=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(s&&n&&n!==i&&c===n.$key&&!a&&!n.$hasNormal)return n;for(var l in o={},t)t[l]&&"$"!==l[0]&&(o[l]=rr(e,r,l,t[l]))}else o={};for(var d in r)d in o||(o[d]=nr(r,d));return t&&Object.isExtensible(t)&&(t._normalized=o),Q(o,"$stable",s),Q(o,"$key",c),Q(o,"$hasNormal",a),o}function rr(e,t,r,n){var i=function(){var t=be;we(e);var r=arguments.length?n.apply(null,arguments):n({});r=r&&"object"===typeof r&&!o(r)?[r]:Rt(r);var i=r&&r[0];return we(t),r&&(!i||1===r.length&&i.isComment&&!er(i))?void 0:r};return n.proxy&&Object.defineProperty(t,r,{get:i,enumerable:!0,configurable:!0}),i}function nr(e,t){return function(){return e[t]}}function ir(e){var t=e.$options,r=t.setup;if(r){var n=e._setupContext=or(e);we(e),Me();var i=En(r,null,[e._props||He({}),n],e,"setup");if(Ae(),we(),u(i))t.render=i;else if(h(i))if(e._setupState=i,i.__sfc){var o=e._setupProxy={};for(var a in i)"__sfc"!==a&&dt(o,i,a)}else for(var a in i)Z(a)||dt(e,i,a);else 0}}function or(e){return{get attrs(){if(!e._attrsProxy){var t=e._attrsProxy={};Q(t,"_v_attr_proxy",!0),ar(t,e.$attrs,i,e,"$attrs")}return e._attrsProxy},get listeners(){if(!e._listenersProxy){var t=e._listenersProxy={};ar(t,e.$listeners,i,e,"$listeners")}return e._listenersProxy},get slots(){return cr(e)},emit:j(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach((function(r){return dt(e,t,r)}))}}}function ar(e,t,r,n,i){var o=!1;for(var a in t)a in e?t[a]!==r[a]&&(o=!0):(o=!0,sr(e,a,n,i));for(var a in e)a in t||(o=!0,delete e[a]);return o}function sr(e,t,r,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return r[n][t]}})}function cr(e){return e._slotsProxy||lr(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function lr(e,t){for(var r in t)e[r]=t[r];for(var r in e)r in t||delete e[r]}function dr(){return fr().slots}function ur(){return fr().attrs}function hr(){return fr().listeners}function fr(){var e=be;return e._setupContext||(e._setupContext=or(e))}function pr(e,t){var r=o(e)?e.reduce((function(e,t){return e[t]={},e}),{}):e;for(var n in t){var i=r[n];i?o(i)||u(i)?r[n]={type:i,default:t[n]}:i.default=t[n]:null===i&&(r[n]={default:t[n]})}return r}function vr(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,n=r&&r.context;e.$slots=Zt(t._renderChildren,n),e.$scopedSlots=r?tr(e.$parent,r.data.scopedSlots,e.$slots):i,e._c=function(t,r,n,i){return Pt(e,t,r,n,i,!1)},e.$createElement=function(t,r,n,i){return Pt(e,t,r,n,i,!0)};var o=r&&r.data;Ve(e,"$attrs",o&&o.attrs||i,null,!0),Ve(e,"$listeners",t._parentListeners||i,null,!0)}var mr,gr,yr=null;function br(t){Xt(t.prototype),t.prototype.$nextTick=function(e){return jn(e,this)},t.prototype._render=function(){var t=this,r=t.$options,n=r.render,i=r._parentVnode;i&&t._isMounted&&(t.$scopedSlots=tr(t.$parent,i.data.scopedSlots,t.$slots,t.$scopedSlots),t._slotsProxy&&lr(t._slotsProxy,t.$scopedSlots)),t.$vnode=i;var a,s=be,c=yr;try{we(t),yr=t,a=n.call(t._renderProxy,t.$createElement)}catch(e){Sn(e,t,"render"),a=t._vnode}finally{yr=c,we(s)}return o(a)&&1===a.length&&(a=a[0]),a instanceof Se||(a=Ee()),a.parent=i,a}}function _r(e,t){return(e.__esModule||ye&&"Module"===e[Symbol.toStringTag])&&(e=e.default),h(e)?t.extend(e):e}function wr(e,t,r,n,i){var o=Ee();return o.asyncFactory=e,o.asyncMeta={data:t,context:r,children:n,tag:i},o}function Sr(e,t){if(c(e.error)&&s(e.errorComp))return e.errorComp;if(s(e.resolved))return e.resolved;var r=yr;if(r&&s(e.owners)&&-1===e.owners.indexOf(r)&&e.owners.push(r),c(e.loading)&&s(e.loadingComp))return e.loadingComp;if(r&&!s(e.owners)){var n=e.owners=[r],i=!0,o=null,l=null;r.$on("hook:destroyed",(function(){return k(n,r)}));var d=function(e){for(var t=0,r=n.length;t<r;t++)n[t].$forceUpdate();e&&(n.length=0,null!==o&&(clearTimeout(o),o=null),null!==l&&(clearTimeout(l),l=null))},u=$((function(r){e.resolved=_r(r,t),i?n.length=0:d(!0)})),f=$((function(t){s(e.errorComp)&&(e.error=!0,d(!0))})),p=e(u,f);return h(p)&&(g(p)?a(e.resolved)&&p.then(u,f):g(p.component)&&(p.component.then(u,f),s(p.error)&&(e.errorComp=_r(p.error,t)),s(p.loading)&&(e.loadingComp=_r(p.loading,t),0===p.delay?e.loading=!0:o=setTimeout((function(){o=null,a(e.resolved)&&a(e.error)&&(e.loading=!0,d(!1))}),p.delay||200)),s(p.timeout)&&(l=setTimeout((function(){l=null,a(e.resolved)&&f(null)}),p.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}function Er(e){if(o(e))for(var t=0;t<e.length;t++){var r=e[t];if(s(r)&&(s(r.componentOptions)||er(r)))return r}}function kr(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Rr(e,t)}function Ir(e,t){mr.$on(e,t)}function Cr(e,t){mr.$off(e,t)}function Tr(e,t){var r=mr;return function n(){var i=t.apply(null,arguments);null!==i&&r.$off(e,n)}}function Rr(e,t,r){mr=e,Et(t,r||{},Ir,Cr,Tr,e),mr=void 0}function xr(e){var t=/^hook:/;e.prototype.$on=function(e,r){var n=this;if(o(e))for(var i=0,a=e.length;i<a;i++)n.$on(e[i],r);else(n._events[e]||(n._events[e]=[])).push(r),t.test(e)&&(n._hasHookEvent=!0);return n},e.prototype.$once=function(e,t){var r=this;function n(){r.$off(e,n),t.apply(r,arguments)}return n.fn=t,r.$on(e,n),r},e.prototype.$off=function(e,t){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(o(e)){for(var n=0,i=e.length;n<i;n++)r.$off(e[n],t);return r}var a,s=r._events[e];if(!s)return r;if(!t)return r._events[e]=null,r;var c=s.length;while(c--)if(a=s[c],a===t||a.fn===t){s.splice(c,1);break}return r},e.prototype.$emit=function(e){var t=this,r=t._events[e];if(r){r=r.length>1?L(r):r;for(var n=L(arguments,1),i='event handler for "'.concat(e,'"'),o=0,a=r.length;o<a;o++)En(r[o],t,n,t,i)}return t}}var Or=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=gr,!e&&gr&&(this.index=(gr.scopes||(gr.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=gr;try{return gr=this,e()}finally{gr=t}}else 0},e.prototype.on=function(){gr=this},e.prototype.off=function(){gr=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,r=void 0;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].teardown();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this.active=!1}},e}();function Mr(e){return new Or(e)}function Ar(e,t){void 0===t&&(t=gr),t&&t.active&&t.effects.push(e)}function Pr(){return gr}function Dr(e){gr&&gr.cleanups.push(e)}var jr=null;function Lr(e){var t=jr;return jr=e,function(){jr=t}}function Nr(e){var t=e.$options,r=t.parent;if(r&&!t.abstract){while(r.$options.abstract&&r.$parent)r=r.$parent;r.$children.push(e)}e.$parent=r,e.$root=r?r.$root:e,e.$children=[],e.$refs={},e._provided=r?r._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Ur(e){e.prototype._update=function(e,t){var r=this,n=r.$el,i=r._vnode,o=Lr(r);r._vnode=e,r.$el=i?r.__patch__(i,e):r.__patch__(r.$el,e,t,!1),o(),n&&(n.__vue__=null),r.$el&&(r.$el.__vue__=r);var a=r;while(a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode)a.$parent.$el=a.$el,a=a.$parent},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Wr(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||k(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Wr(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Fr(e,t,r){var n;e.$el=t,e.$options.render||(e.$options.render=Ee),Wr(e,"beforeMount"),n=function(){e._update(e._render(),r)};var i={before:function(){e._isMounted&&!e._isDestroyed&&Wr(e,"beforeUpdate")}};new ai(e,n,F,i,!0),r=!1;var o=e._preWatchers;if(o)for(var a=0;a<o.length;a++)o[a].run();return null==e.$vnode&&(e._isMounted=!0,Wr(e,"mounted")),e}function Br(e,t,r,n,o){var a=n.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==i&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),l=!!(o||e.$options._renderChildren||c),d=e.$vnode;e.$options._parentVnode=n,e.$vnode=n,e._vnode&&(e._vnode.parent=n),e.$options._renderChildren=o;var u=n.data.attrs||i;e._attrsProxy&&ar(e._attrsProxy,u,d.data&&d.data.attrs||i,e,"$attrs")&&(l=!0),e.$attrs=u,r=r||i;var h=e.$options._parentListeners;if(e._listenersProxy&&ar(e._listenersProxy,r,h||i,e,"$listeners"),e.$listeners=e.$options._parentListeners=r,Rr(e,r,h),t&&e.$options.props){Fe(!1);for(var f=e._props,p=e.$options._propKeys||[],v=0;v<p.length;v++){var m=p[v],g=e.$options.props;f[m]=to(m,g,t,e)}Fe(!0),e.$options.propsData=t}l&&(e.$slots=Zt(o,n.context),e.$forceUpdate())}function Kr(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function qr(e,t){if(t){if(e._directInactive=!1,Kr(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var r=0;r<e.$children.length;r++)qr(e.$children[r]);Wr(e,"activated")}}function Vr(e,t){if((!t||(e._directInactive=!0,!Kr(e)))&&!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)Vr(e.$children[r]);Wr(e,"deactivated")}}function Wr(e,t,r,n){void 0===n&&(n=!0),Me();var i=be,o=Pr();n&&we(e);var a=e.$options[t],s="".concat(t," hook");if(a)for(var c=0,l=a.length;c<l;c++)En(a[c],e,r||null,e,s);e._hasHookEvent&&e.$emit("hook:"+t),n&&(we(i),o&&o.on()),Ae()}var $r=[],zr=[],Gr={},Hr=!1,Yr=!1,Jr=0;function Xr(){Jr=$r.length=zr.length=0,Gr={},Hr=Yr=!1}var Zr=0,Qr=Date.now;if(ne&&!oe){var en=window.performance;en&&"function"===typeof en.now&&Qr()>document.createEvent("Event").timeStamp&&(Qr=function(){return en.now()})}var tn=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function rn(){var e,t;for(Zr=Qr(),Yr=!0,$r.sort(tn),Jr=0;Jr<$r.length;Jr++)e=$r[Jr],e.before&&e.before(),t=e.id,Gr[t]=null,e.run();var r=zr.slice(),n=$r.slice();Xr(),an(r),nn(n),Re(),ve&&J.devtools&&ve.emit("flush")}function nn(e){var t=e.length;while(t--){var r=e[t],n=r.vm;n&&n._watcher===r&&n._isMounted&&!n._isDestroyed&&Wr(n,"updated")}}function on(e){e._inactive=!1,zr.push(e)}function an(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,qr(e[t],!0)}function sn(e){var t=e.id;if(null==Gr[t]&&(e!==xe.target||!e.noRecurse)){if(Gr[t]=!0,Yr){var r=$r.length-1;while(r>Jr&&$r[r].id>e.id)r--;$r.splice(r+1,0,e)}else $r.push(e);Hr||(Hr=!0,jn(rn))}}var cn="watcher",ln="".concat(cn," callback"),dn="".concat(cn," getter"),un="".concat(cn," cleanup");function hn(e,t){return gn(e,null,t)}function fn(e,t){return gn(e,null,{flush:"post"})}function pn(e,t){return gn(e,null,{flush:"sync"})}var vn={};function mn(e,t,r){return gn(e,t,r)}function gn(e,t,r){var n=void 0===r?i:r,a=n.immediate,s=n.deep,c=n.flush,l=void 0===c?"pre":c;n.onTrack,n.onTrigger;var d,h,f=be,p=function(e,t,r){void 0===r&&(r=null);var n=En(e,null,r,f,t);return s&&n&&n.__ob__&&n.__ob__.dep.depend(),n},v=!1,m=!1;if(nt(e)?(d=function(){return e.value},v=Xe(e)):Je(e)?(d=function(){return e.__ob__.dep.depend(),e},s=!0):o(e)?(m=!0,v=e.some((function(e){return Je(e)||Xe(e)})),d=function(){return e.map((function(e){return nt(e)?e.value:Je(e)?(e.__ob__.dep.depend(),ni(e)):u(e)?p(e,dn):void 0}))}):d=u(e)?t?function(){return p(e,dn)}:function(){if(!f||!f._isDestroyed)return h&&h(),p(e,cn,[y])}:F,t&&s){var g=d;d=function(){return ni(g())}}var y=function(e){h=b.onStop=function(){p(e,un)}};if(pe())return y=F,t?a&&p(t,ln,[d(),m?[]:void 0,y]):d(),F;var b=new ai(be,d,F,{lazy:!0});b.noRecurse=!t;var _=m?[]:vn;return b.run=function(){if(b.active)if(t){var e=b.get();(s||v||(m?e.some((function(e,t){return z(e,_[t])})):z(e,_)))&&(h&&h(),p(t,ln,[e,_===vn?void 0:_,y]),_=e)}else b.get()},"sync"===l?b.update=b.run:"post"===l?(b.post=!0,b.update=function(){return sn(b)}):b.update=function(){if(f&&f===be&&!f._isMounted){var e=f._preWatchers||(f._preWatchers=[]);e.indexOf(b)<0&&e.push(b)}else sn(b)},t?a?b.run():_=b.get():"post"===l&&f?f.$once("hook:mounted",(function(){return b.get()})):b.get(),function(){b.teardown()}}function yn(e,t){be&&(bn(be)[e]=t)}function bn(e){var t=e._provided,r=e.$parent&&e.$parent._provided;return r===t?e._provided=Object.create(r):t}function _n(e,t,r){void 0===r&&(r=!1);var n=be;if(n){var i=n.$parent&&n.$parent._provided;if(i&&e in i)return i[e];if(arguments.length>1)return r&&u(t)?t.call(n):t}else 0}function wn(e,t,r){return Pt(be,e,t,r,2,!0)}function Sn(t,r,n){Me();try{if(r){var i=r;while(i=i.$parent){var o=i.$options.errorCaptured;if(o)for(var a=0;a<o.length;a++)try{var s=!1===o[a].call(i,t,r,n);if(s)return}catch(e){kn(e,i,"errorCaptured hook")}}}kn(t,r,n)}finally{Ae()}}function En(t,r,n,i,o){var a;try{a=n?t.apply(r,n):t.call(r),a&&!a._isVue&&g(a)&&!a._handled&&(a.catch((function(e){return Sn(e,i,o+" (Promise/async)")})),a._handled=!0)}catch(e){Sn(e,i,o)}return a}function kn(t,r,n){if(J.errorHandler)try{return J.errorHandler.call(null,t,r,n)}catch(e){e!==t&&In(e,null,"config.errorHandler")}In(t,r,n)}function In(e,t,r){if(!ne||"undefined"===typeof console)throw e;console.error(e)}var Cn,Tn=!1,Rn=[],xn=!1;function On(){xn=!1;var e=Rn.slice(0);Rn.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&me(Promise)){var Mn=Promise.resolve();Cn=function(){Mn.then(On),ce&&setTimeout(F)},Tn=!0}else if(oe||"undefined"===typeof MutationObserver||!me(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Cn="undefined"!==typeof setImmediate&&me(setImmediate)?function(){setImmediate(On)}:function(){setTimeout(On,0)};else{var An=1,Pn=new MutationObserver(On),Dn=document.createTextNode(String(An));Pn.observe(Dn,{characterData:!0}),Cn=function(){An=(An+1)%2,Dn.data=String(An)},Tn=!0}function jn(t,r){var n;if(Rn.push((function(){if(t)try{t.call(r)}catch(e){Sn(e,r,"nextTick")}else n&&n(r)})),xn||(xn=!0,Cn()),!t&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}function Ln(e){if(void 0===e&&(e="$style"),!be)return i;var t=be[e];return t||i}function Nn(e){if(ne){var t=be;t&&fn((function(){var r=t.$el,n=e(t,t._setupProxy);if(r&&1===r.nodeType){var i=r.style;for(var o in n)i.setProperty("--".concat(o),n[o])}}))}}function Un(e){u(e)&&(e={loader:e});var t=e.loader,r=e.loadingComponent,n=e.errorComponent,i=e.delay,o=void 0===i?200:i,a=e.timeout,s=(e.suspensible,e.onError);var c=null,l=0,d=function(){return l++,c=null,h()},h=function(){var e;return c||(e=c=t().catch((function(e){if(e=e instanceof Error?e:new Error(String(e)),s)return new Promise((function(t,r){var n=function(){return t(d())},i=function(){return r(e)};s(e,n,i,l+1)}));throw e})).then((function(t){return e!==c&&c?c:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),t)})))};return function(){var e=h();return{component:e,delay:o,timeout:a,error:n,loading:r}}}function Fn(e){return function(t,r){if(void 0===r&&(r=be),r)return Bn(r,e,t)}}function Bn(e,t,r){var n=e.$options;n[t]=zi(n[t],r)}var Kn=Fn("beforeMount"),qn=Fn("mounted"),Vn=Fn("beforeUpdate"),Wn=Fn("updated"),$n=Fn("beforeDestroy"),zn=Fn("destroyed"),Gn=Fn("activated"),Hn=Fn("deactivated"),Yn=Fn("serverPrefetch"),Jn=Fn("renderTracked"),Xn=Fn("renderTriggered"),Zn=Fn("errorCaptured");function Qn(e,t){void 0===t&&(t=be),Zn(e,t)}var ei="2.7.16";function ti(e){return e}var ri=new ge;function ni(e){return ii(e,ri),ri.clear(),e}function ii(e,t){var r,n,i=o(e);if(!(!i&&!h(e)||e.__v_skip||Object.isFrozen(e)||e instanceof Se)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i){r=e.length;while(r--)ii(e[r],t)}else if(nt(e))ii(e.value,t);else{n=Object.keys(e),r=n.length;while(r--)ii(e[n[r]],t)}}}var oi=0,ai=function(){function t(e,t,r,n,i){Ar(this,gr&&!gr._vm?gr:e?e._scope:void 0),(this.vm=e)&&i&&(e._watcher=this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++oi,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ge,this.newDepIds=new ge,this.expression="",u(t)?this.getter=t:(this.getter=te(t),this.getter||(this.getter=F)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;Me(this);var r=this.vm;try{t=this.getter.call(r,r)}catch(e){if(!this.user)throw e;Sn(e,r,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&ni(t),Ae(),this.cleanupDeps()}return t},t.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},t.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():sn(this)},t.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||h(e)||this.deep){var t=this.value;if(this.value=e,this.user){var r='callback for watcher "'.concat(this.expression,'"');En(this.cb,this.vm,[e,t],this.vm,r)}else this.cb.call(this.vm,e,t)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&k(this.vm._scope.effects,this),this.active){var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}(),si={enumerable:!0,configurable:!0,get:F,set:F};function ci(e,t,r){si.get=function(){return this[t][r]},si.set=function(e){this[t][r]=e},Object.defineProperty(e,r,si)}function li(e){var t=e.$options;if(t.props&&di(e,t.props),ir(e),t.methods&&yi(e,t.methods),t.data)ui(e);else{var r=qe(e._data={});r&&r.vmCount++}t.computed&&pi(e,t.computed),t.watch&&t.watch!==ue&&bi(e,t.watch)}function di(e,t){var r=e.$options.propsData||{},n=e._props=He({}),i=e.$options._propKeys=[],o=!e.$parent;o||Fe(!1);var a=function(o){i.push(o);var a=to(o,t,r,e);Ve(n,o,a,void 0,!0),o in e||ci(e,"_props",o)};for(var s in t)a(s);Fe(!0)}function ui(e){var t=e.$options.data;t=e._data=u(t)?hi(t,e):t||{},p(t)||(t={});var r=Object.keys(t),n=e.$options.props,i=(e.$options.methods,r.length);while(i--){var o=r[i];0,n&&C(n,o)||Z(o)||ci(e,"_data",o)}var a=qe(t);a&&a.vmCount++}function hi(t,r){Me();try{return t.call(r,r)}catch(e){return Sn(e,r,"data()"),{}}finally{Ae()}}var fi={lazy:!0};function pi(e,t){var r=e._computedWatchers=Object.create(null),n=pe();for(var i in t){var o=t[i],a=u(o)?o:o.get;0,n||(r[i]=new ai(e,a||F,F,fi)),i in e||vi(e,i,o)}}function vi(e,t,r){var n=!pe();u(r)?(si.get=n?mi(t):gi(r),si.set=F):(si.get=r.get?n&&!1!==r.cache?mi(t):gi(r.get):F,si.set=r.set||F),Object.defineProperty(e,t,si)}function mi(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),xe.target&&t.depend(),t.value}}function gi(e){return function(){return e.call(this,this)}}function yi(e,t){e.$options.props;for(var r in t)e[r]="function"!==typeof t[r]?F:j(t[r],e)}function bi(e,t){for(var r in t){var n=t[r];if(o(n))for(var i=0;i<n.length;i++)_i(e,r,n[i]);else _i(e,r,n)}}function _i(e,t,r,n){return p(r)&&(n=r,r=r.handler),"string"===typeof r&&(r=e[r]),e.$watch(t,r,n)}function wi(e){var t={get:function(){return this._data}},r={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",r),e.prototype.$set=We,e.prototype.$delete=$e,e.prototype.$watch=function(e,t,r){var n=this;if(p(t))return _i(n,e,t,r);r=r||{},r.user=!0;var i=new ai(n,e,t,r);if(r.immediate){var o='callback for immediate watcher "'.concat(i.expression,'"');Me(),En(t,n,[i.value],n,o),Ae()}return function(){i.teardown()}}}function Si(e){var t=e.$options.provide;if(t){var r=u(t)?t.call(e):t;if(!h(r))return;for(var n=bn(e),i=ye?Reflect.ownKeys(r):Object.keys(r),o=0;o<i.length;o++){var a=i[o];Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(r,a))}}}function Ei(e){var t=ki(e.$options.inject,e);t&&(Fe(!1),Object.keys(t).forEach((function(r){Ve(e,r,t[r])})),Fe(!0))}function ki(e,t){if(e){for(var r=Object.create(null),n=ye?Reflect.ownKeys(e):Object.keys(e),i=0;i<n.length;i++){var o=n[i];if("__ob__"!==o){var a=e[o].from;if(a in t._provided)r[o]=t._provided[a];else if("default"in e[o]){var s=e[o].default;r[o]=u(s)?s.call(t):s}else 0}}return r}}var Ii=0;function Ci(e){e.prototype._init=function(e){var t=this;t._uid=Ii++,t._isVue=!0,t.__v_skip=!0,t._scope=new Or(!0),t._scope.parent=void 0,t._scope._vm=!0,e&&e._isComponent?Ti(t,e):t.$options=Qi(Ri(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Nr(t),kr(t),vr(t),Wr(t,"beforeCreate",void 0,!1),Ei(t),li(t),Si(t),Wr(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Ti(e,t){var r=e.$options=Object.create(e.constructor.options),n=t._parentVnode;r.parent=t.parent,r._parentVnode=n;var i=n.componentOptions;r.propsData=i.propsData,r._parentListeners=i.listeners,r._renderChildren=i.children,r._componentTag=i.tag,t.render&&(r.render=t.render,r.staticRenderFns=t.staticRenderFns)}function Ri(e){var t=e.options;if(e.super){var r=Ri(e.super),n=e.superOptions;if(r!==n){e.superOptions=r;var i=xi(e);i&&N(e.extendOptions,i),t=e.options=Qi(r,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function xi(e){var t,r=e.options,n=e.sealedOptions;for(var i in r)r[i]!==n[i]&&(t||(t={}),t[i]=r[i]);return t}function Oi(e,t,r,n,a){var s,l=this,d=a.options;C(n,"_uid")?(s=Object.create(n),s._original=n):(s=n,n=n._original);var u=c(d._compiled),h=!u;this.data=e,this.props=t,this.children=r,this.parent=n,this.listeners=e.on||i,this.injections=ki(d.inject,n),this.slots=function(){return l.$slots||tr(n,e.scopedSlots,l.$slots=Zt(r,n)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return tr(n,e.scopedSlots,this.slots())}}),u&&(this.$options=d,this.$slots=this.slots(),this.$scopedSlots=tr(n,e.scopedSlots,this.$slots)),d._scopeId?this._c=function(e,t,r,i){var a=Pt(s,e,t,r,i,h);return a&&!o(a)&&(a.fnScopeId=d._scopeId,a.fnContext=n),a}:this._c=function(e,t,r,n){return Pt(s,e,t,r,n,h)}}function Mi(e,t,r,n,a){var c=e.options,l={},d=c.props;if(s(d))for(var u in d)l[u]=to(u,d,t||i);else s(r.attrs)&&Pi(l,r.attrs),s(r.props)&&Pi(l,r.props);var h=new Oi(r,l,a,n,e),f=c.render.call(null,h._c,h);if(f instanceof Se)return Ai(f,r,h.parent,c,h);if(o(f)){for(var p=Rt(f)||[],v=new Array(p.length),m=0;m<p.length;m++)v[m]=Ai(p[m],r,h.parent,c,h);return v}}function Ai(e,t,r,n,i){var o=Ie(e);return o.fnContext=r,o.fnOptions=n,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function Pi(e,t){for(var r in t)e[x(r)]=t[r]}function Di(e){return e.name||e.__name||e._componentTag}Xt(Oi.prototype);var ji={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var r=e;ji.prepatch(r,r)}else{var n=e.componentInstance=Ui(e,jr);n.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var r=t.componentOptions,n=t.componentInstance=e.componentInstance;Br(n,r.propsData,r.listeners,t,r.children)},insert:function(e){var t=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,Wr(r,"mounted")),e.data.keepAlive&&(t._isMounted?on(r):qr(r,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Vr(t,!0):t.$destroy())}},Li=Object.keys(ji);function Ni(e,t,r,n,i){if(!a(e)){var o=r.$options._base;if(h(e)&&(e=o.extend(e)),"function"===typeof e){var l;if(a(e.cid)&&(l=e,e=Sr(l,o),void 0===e))return wr(l,t,r,n,i);t=t||{},Ri(e),s(t.model)&&Ki(e.options,t);var d=It(t,e,i);if(c(e.options.functional))return Mi(e,d,t,r,n);var u=t.on;if(t.on=t.nativeOn,c(e.options.abstract)){var f=t.slot;t={},f&&(t.slot=f)}Fi(t);var p=Di(e.options)||i,v=new Se("vue-component-".concat(e.cid).concat(p?"-".concat(p):""),t,void 0,void 0,void 0,r,{Ctor:e,propsData:d,listeners:u,tag:i,children:n},l);return v}}}function Ui(e,t){var r={_isComponent:!0,_parentVnode:e,parent:t},n=e.data.inlineTemplate;return s(n)&&(r.render=n.render,r.staticRenderFns=n.staticRenderFns),new e.componentOptions.Ctor(r)}function Fi(e){for(var t=e.hook||(e.hook={}),r=0;r<Li.length;r++){var n=Li[r],i=t[n],o=ji[n];i===o||i&&i._merged||(t[n]=i?Bi(o,i):o)}}function Bi(e,t){var r=function(r,n){e(r,n),t(r,n)};return r._merged=!0,r}function Ki(e,t){var r=e.model&&e.model.prop||"value",n=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[r]=t.model.value;var i=t.on||(t.on={}),a=i[n],c=t.model.callback;s(a)?(o(a)?-1===a.indexOf(c):a!==c)&&(i[n]=[c].concat(a)):i[n]=c}var qi=F,Vi=J.optionMergeStrategies;function Wi(e,t,r){if(void 0===r&&(r=!0),!t)return e;for(var n,i,o,a=ye?Reflect.ownKeys(t):Object.keys(t),s=0;s<a.length;s++)n=a[s],"__ob__"!==n&&(i=e[n],o=t[n],r&&C(e,n)?i!==o&&p(i)&&p(o)&&Wi(i,o):We(e,n,o));return e}function $i(e,t,r){return r?function(){var n=u(t)?t.call(r,r):t,i=u(e)?e.call(r,r):e;return n?Wi(n,i):i}:t?e?function(){return Wi(u(t)?t.call(this,this):t,u(e)?e.call(this,this):e)}:t:e}function zi(e,t){var r=t?e?e.concat(t):o(t)?t:[t]:e;return r?Gi(r):r}function Gi(e){for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}function Hi(e,t,r,n){var i=Object.create(e||null);return t?N(i,t):i}Vi.data=function(e,t,r){return r?$i(e,t,r):t&&"function"!==typeof t?e:$i(e,t)},Y.forEach((function(e){Vi[e]=zi})),H.forEach((function(e){Vi[e+"s"]=Hi})),Vi.watch=function(e,t,r,n){if(e===ue&&(e=void 0),t===ue&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var a in N(i,e),t){var s=i[a],c=t[a];s&&!o(s)&&(s=[s]),i[a]=s?s.concat(c):o(c)?c:[c]}return i},Vi.props=Vi.methods=Vi.inject=Vi.computed=function(e,t,r,n){if(!e)return t;var i=Object.create(null);return N(i,e),t&&N(i,t),i},Vi.provide=function(e,t){return e?function(){var r=Object.create(null);return Wi(r,u(e)?e.call(this):e),t&&Wi(r,u(t)?t.call(this):t,!1),r}:t};var Yi=function(e,t){return void 0===t?e:t};function Ji(e,t){var r=e.props;if(r){var n,i,a,s={};if(o(r)){n=r.length;while(n--)i=r[n],"string"===typeof i&&(a=x(i),s[a]={type:null})}else if(p(r))for(var c in r)i=r[c],a=x(c),s[a]=p(i)?i:{type:i};else 0;e.props=s}}function Xi(e,t){var r=e.inject;if(r){var n=e.inject={};if(o(r))for(var i=0;i<r.length;i++)n[r[i]]={from:r[i]};else if(p(r))for(var a in r){var s=r[a];n[a]=p(s)?N({from:a},s):{from:s}}else 0}}function Zi(e){var t=e.directives;if(t)for(var r in t){var n=t[r];u(n)&&(t[r]={bind:n,update:n})}}function Qi(e,t,r){if(u(t)&&(t=t.options),Ji(t,r),Xi(t,r),Zi(t),!t._base&&(t.extends&&(e=Qi(e,t.extends,r)),t.mixins))for(var n=0,i=t.mixins.length;n<i;n++)e=Qi(e,t.mixins[n],r);var o,a={};for(o in e)s(o);for(o in t)C(e,o)||s(o);function s(n){var i=Vi[n]||Yi;a[n]=i(e[n],t[n],r,n)}return a}function eo(e,t,r,n){if("string"===typeof r){var i=e[t];if(C(i,r))return i[r];var o=x(r);if(C(i,o))return i[o];var a=O(o);if(C(i,a))return i[a];var s=i[r]||i[o]||i[a];return s}}function to(e,t,r,n){var i=t[e],o=!C(r,e),a=r[e],s=ao(Boolean,i.type);if(s>-1)if(o&&!C(i,"default"))a=!1;else if(""===a||a===A(e)){var c=ao(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=ro(n,i,e);var l=Ue;Fe(!0),qe(a),Fe(l)}return a}function ro(e,t,r){if(C(t,"default")){var n=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[r]&&void 0!==e._props[r]?e._props[r]:u(n)&&"Function"!==io(t.type)?n.call(e):n}}var no=/^\s*function (\w+)/;function io(e){var t=e&&e.toString().match(no);return t?t[1]:""}function oo(e,t){return io(e)===io(t)}function ao(e,t){if(!o(t))return oo(t,e)?0:-1;for(var r=0,n=t.length;r<n;r++)if(oo(t[r],e))return r;return-1}function so(e){this._init(e)}function co(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var r=L(arguments,1);return r.unshift(this),u(e.install)?e.install.apply(e,r):u(e)&&e.apply(null,r),t.push(e),this}}function lo(e){e.mixin=function(e){return this.options=Qi(this.options,e),this}}function uo(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var r=this,n=r.cid,i=e._Ctor||(e._Ctor={});if(i[n])return i[n];var o=Di(e)||Di(r.options);var a=function(e){this._init(e)};return a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Qi(r.options,e),a["super"]=r,a.options.props&&ho(a),a.options.computed&&fo(a),a.extend=r.extend,a.mixin=r.mixin,a.use=r.use,H.forEach((function(e){a[e]=r[e]})),o&&(a.options.components[o]=a),a.superOptions=r.options,a.extendOptions=e,a.sealedOptions=N({},a.options),i[n]=a,a}}function ho(e){var t=e.options.props;for(var r in t)ci(e.prototype,"_props",r)}function fo(e){var t=e.options.computed;for(var r in t)vi(e.prototype,r,t[r])}function po(e){H.forEach((function(t){e[t]=function(e,r){return r?("component"===t&&p(r)&&(r.name=r.name||e,r=this.options._base.extend(r)),"directive"===t&&u(r)&&(r={bind:r,update:r}),this.options[t+"s"][e]=r,r):this.options[t+"s"][e]}}))}function vo(e){return e&&(Di(e.Ctor.options)||e.tag)}function mo(e,t){return o(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!v(e)&&e.test(t)}function go(e,t){var r=e.cache,n=e.keys,i=e._vnode,o=e.$vnode;for(var a in r){var s=r[a];if(s){var c=s.name;c&&!t(c)&&yo(r,a,n,i)}}o.componentOptions.children=void 0}function yo(e,t,r,n){var i=e[t];!i||n&&i.tag===n.tag||i.componentInstance.$destroy(),e[t]=null,k(r,t)}Ci(so),wi(so),xr(so),Ur(so),br(so);var bo=[String,RegExp,Array],_o={name:"keep-alive",abstract:!0,props:{include:bo,exclude:bo,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,r=e.keys,n=e.vnodeToCache,i=e.keyToCache;if(n){var o=n.tag,a=n.componentInstance,s=n.componentOptions;t[i]={name:vo(s),tag:o,componentInstance:a},r.push(i),this.max&&r.length>parseInt(this.max)&&yo(t,r[0],r,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)yo(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){go(e,(function(e){return mo(t,e)}))})),this.$watch("exclude",(function(t){go(e,(function(e){return!mo(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Er(e),r=t&&t.componentOptions;if(r){var n=vo(r),i=this,o=i.include,a=i.exclude;if(o&&(!n||!mo(o,n))||a&&n&&mo(a,n))return t;var s=this,c=s.cache,l=s.keys,d=null==t.key?r.Ctor.cid+(r.tag?"::".concat(r.tag):""):t.key;c[d]?(t.componentInstance=c[d].componentInstance,k(l,d),l.push(d)):(this.vnodeToCache=t,this.keyToCache=d),t.data.keepAlive=!0}return t||e&&e[0]}},wo={KeepAlive:_o};function So(e){var t={get:function(){return J}};Object.defineProperty(e,"config",t),e.util={warn:qi,extend:N,mergeOptions:Qi,defineReactive:Ve},e.set=We,e.delete=$e,e.nextTick=jn,e.observable=function(e){return qe(e),e},e.options=Object.create(null),H.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,N(e.options.components,wo),co(e),lo(e),uo(e),po(e)}So(so),Object.defineProperty(so.prototype,"$isServer",{get:pe}),Object.defineProperty(so.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(so,"FunctionalRenderContext",{value:Oi}),so.version=ei;var Eo=w("style,class"),ko=w("input,textarea,option,select,progress"),Io=function(e,t,r){return"value"===r&&ko(e)&&"button"!==t||"selected"===r&&"option"===e||"checked"===r&&"input"===e||"muted"===r&&"video"===e},Co=w("contenteditable,draggable,spellcheck"),To=w("events,caret,typing,plaintext-only"),Ro=function(e,t){return Po(t)||"false"===t?"false":"contenteditable"===e&&To(t)?t:"true"},xo=w("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Oo="http://www.w3.org/1999/xlink",Mo=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ao=function(e){return Mo(e)?e.slice(6,e.length):""},Po=function(e){return null==e||!1===e};function Do(e){var t=e.data,r=e,n=e;while(s(n.componentInstance))n=n.componentInstance._vnode,n&&n.data&&(t=jo(n.data,t));while(s(r=r.parent))r&&r.data&&(t=jo(t,r.data));return Lo(t.staticClass,t.class)}function jo(e,t){return{staticClass:No(e.staticClass,t.staticClass),class:s(e.class)?[e.class,t.class]:t.class}}function Lo(e,t){return s(e)||s(t)?No(e,Uo(t)):""}function No(e,t){return e?t?e+" "+t:e:t||""}function Uo(e){return Array.isArray(e)?Fo(e):h(e)?Bo(e):"string"===typeof e?e:""}function Fo(e){for(var t,r="",n=0,i=e.length;n<i;n++)s(t=Uo(e[n]))&&""!==t&&(r&&(r+=" "),r+=t);return r}function Bo(e){var t="";for(var r in e)e[r]&&(t&&(t+=" "),t+=r);return t}var Ko={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},qo=w("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Vo=w("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Wo=function(e){return"pre"===e},$o=function(e){return qo(e)||Vo(e)};function zo(e){return Vo(e)?"svg":"math"===e?"math":void 0}var Go=Object.create(null);function Ho(e){if(!ne)return!0;if($o(e))return!1;if(e=e.toLowerCase(),null!=Go[e])return Go[e];var t=document.createElement(e);return e.indexOf("-")>-1?Go[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Go[e]=/HTMLUnknownElement/.test(t.toString())}var Yo=w("text,number,password,search,email,tel,url");function Jo(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function Xo(e,t){var r=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r}function Zo(e,t){return document.createElementNS(Ko[e],t)}function Qo(e){return document.createTextNode(e)}function ea(e){return document.createComment(e)}function ta(e,t,r){e.insertBefore(t,r)}function ra(e,t){e.removeChild(t)}function na(e,t){e.appendChild(t)}function ia(e){return e.parentNode}function oa(e){return e.nextSibling}function aa(e){return e.tagName}function sa(e,t){e.textContent=t}function ca(e,t){e.setAttribute(t,"")}var la=Object.freeze({__proto__:null,createElement:Xo,createElementNS:Zo,createTextNode:Qo,createComment:ea,insertBefore:ta,removeChild:ra,appendChild:na,parentNode:ia,nextSibling:oa,tagName:aa,setTextContent:sa,setStyleScope:ca}),da={create:function(e,t){ua(t)},update:function(e,t){e.data.ref!==t.data.ref&&(ua(e,!0),ua(t))},destroy:function(e){ua(e,!0)}};function ua(e,t){var r=e.data.ref;if(s(r)){var n=e.context,i=e.componentInstance||e.elm,a=t?null:i,c=t?void 0:i;if(u(r))En(r,n,[a],n,"template ref function");else{var l=e.data.refInFor,d="string"===typeof r||"number"===typeof r,h=nt(r),f=n.$refs;if(d||h)if(l){var p=d?f[r]:r.value;t?o(p)&&k(p,i):o(p)?p.includes(i)||p.push(i):d?(f[r]=[i],ha(n,r,f[r])):r.value=[i]}else if(d){if(t&&f[r]!==i)return;f[r]=c,ha(n,r,a)}else if(h){if(t&&r.value!==i)return;r.value=a}else 0}}}function ha(e,t,r){var n=e._setupState;n&&C(n,t)&&(nt(n[t])?n[t].value=r:n[t]=r)}var fa=new Se("",{},[]),pa=["create","activate","update","remove","destroy"];function va(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&s(e.data)===s(t.data)&&ma(e,t)||c(e.isAsyncPlaceholder)&&a(t.asyncFactory.error))}function ma(e,t){if("input"!==e.tag)return!0;var r,n=s(r=e.data)&&s(r=r.attrs)&&r.type,i=s(r=t.data)&&s(r=r.attrs)&&r.type;return n===i||Yo(n)&&Yo(i)}function ga(e,t,r){var n,i,o={};for(n=t;n<=r;++n)i=e[n].key,s(i)&&(o[i]=n);return o}function ya(e){var t,r,n={},i=e.modules,l=e.nodeOps;for(t=0;t<pa.length;++t)for(n[pa[t]]=[],r=0;r<i.length;++r)s(i[r][pa[t]])&&n[pa[t]].push(i[r][pa[t]]);function u(e){return new Se(l.tagName(e).toLowerCase(),{},[],void 0,e)}function h(e,t){function r(){0===--r.listeners&&f(e)}return r.listeners=t,r}function f(e){var t=l.parentNode(e);s(t)&&l.removeChild(t,e)}function p(e,t,r,n,i,o,a){if(s(e.elm)&&s(o)&&(e=o[a]=Ie(e)),e.isRootInsert=!i,!v(e,t,r,n)){var d=e.data,u=e.children,h=e.tag;s(h)?(e.elm=e.ns?l.createElementNS(e.ns,h):l.createElement(h,e),E(e),b(e,u,t),s(d)&&S(e,t),y(r,e.elm,n)):c(e.isComment)?(e.elm=l.createComment(e.text),y(r,e.elm,n)):(e.elm=l.createTextNode(e.text),y(r,e.elm,n))}}function v(e,t,r,n){var i=e.data;if(s(i)){var o=s(e.componentInstance)&&i.keepAlive;if(s(i=i.hook)&&s(i=i.init)&&i(e,!1),s(e.componentInstance))return m(e,t),y(r,e.elm,n),c(o)&&g(e,t,r,n),!0}}function m(e,t){s(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,_(e)?(S(e,t),E(e)):(ua(e),t.push(e))}function g(e,t,r,i){var o,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,s(o=a.data)&&s(o=o.transition)){for(o=0;o<n.activate.length;++o)n.activate[o](fa,a);t.push(a);break}y(r,e.elm,i)}function y(e,t,r){s(e)&&(s(r)?l.parentNode(r)===e&&l.insertBefore(e,t,r):l.appendChild(e,t))}function b(e,t,r){if(o(t)){0;for(var n=0;n<t.length;++n)p(t[n],r,e.elm,null,!0,t,n)}else d(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function _(e){while(e.componentInstance)e=e.componentInstance._vnode;return s(e.tag)}function S(e,r){for(var i=0;i<n.create.length;++i)n.create[i](fa,e);t=e.data.hook,s(t)&&(s(t.create)&&t.create(fa,e),s(t.insert)&&r.push(e))}function E(e){var t;if(s(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var r=e;while(r)s(t=r.context)&&s(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),r=r.parent}s(t=jr)&&t!==e.context&&t!==e.fnContext&&s(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function k(e,t,r,n,i,o){for(;n<=i;++n)p(r[n],o,e,t,!1,r,n)}function I(e){var t,r,i=e.data;if(s(i))for(s(t=i.hook)&&s(t=t.destroy)&&t(e),t=0;t<n.destroy.length;++t)n.destroy[t](e);if(s(t=e.children))for(r=0;r<e.children.length;++r)I(e.children[r])}function C(e,t,r){for(;t<=r;++t){var n=e[t];s(n)&&(s(n.tag)?(T(n),I(n)):f(n.elm))}}function T(e,t){if(s(t)||s(e.data)){var r,i=n.remove.length+1;for(s(t)?t.listeners+=i:t=h(e.elm,i),s(r=e.componentInstance)&&s(r=r._vnode)&&s(r.data)&&T(r,t),r=0;r<n.remove.length;++r)n.remove[r](e,t);s(r=e.data.hook)&&s(r=r.remove)?r(e,t):t()}else f(e.elm)}function R(e,t,r,n,i){var o,c,d,u,h=0,f=0,v=t.length-1,m=t[0],g=t[v],y=r.length-1,b=r[0],_=r[y],w=!i;while(h<=v&&f<=y)a(m)?m=t[++h]:a(g)?g=t[--v]:va(m,b)?(O(m,b,n,r,f),m=t[++h],b=r[++f]):va(g,_)?(O(g,_,n,r,y),g=t[--v],_=r[--y]):va(m,_)?(O(m,_,n,r,y),w&&l.insertBefore(e,m.elm,l.nextSibling(g.elm)),m=t[++h],_=r[--y]):va(g,b)?(O(g,b,n,r,f),w&&l.insertBefore(e,g.elm,m.elm),g=t[--v],b=r[++f]):(a(o)&&(o=ga(t,h,v)),c=s(b.key)?o[b.key]:x(b,t,h,v),a(c)?p(b,n,e,m.elm,!1,r,f):(d=t[c],va(d,b)?(O(d,b,n,r,f),t[c]=void 0,w&&l.insertBefore(e,d.elm,m.elm)):p(b,n,e,m.elm,!1,r,f)),b=r[++f]);h>v?(u=a(r[y+1])?null:r[y+1].elm,k(e,u,r,f,y,n)):f>y&&C(t,h,v)}function x(e,t,r,n){for(var i=r;i<n;i++){var o=t[i];if(s(o)&&va(e,o))return i}}function O(e,t,r,i,o,d){if(e!==t){s(t.elm)&&s(i)&&(t=i[o]=Ie(t));var u=t.elm=e.elm;if(c(e.isAsyncPlaceholder))s(t.asyncFactory.resolved)?P(e.elm,t,r):t.isAsyncPlaceholder=!0;else if(c(t.isStatic)&&c(e.isStatic)&&t.key===e.key&&(c(t.isCloned)||c(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,f=t.data;s(f)&&s(h=f.hook)&&s(h=h.prepatch)&&h(e,t);var p=e.children,v=t.children;if(s(f)&&_(t)){for(h=0;h<n.update.length;++h)n.update[h](e,t);s(h=f.hook)&&s(h=h.update)&&h(e,t)}a(t.text)?s(p)&&s(v)?p!==v&&R(u,p,v,r,d):s(v)?(s(e.text)&&l.setTextContent(u,""),k(u,null,v,0,v.length-1,r)):s(p)?C(p,0,p.length-1):s(e.text)&&l.setTextContent(u,""):e.text!==t.text&&l.setTextContent(u,t.text),s(f)&&s(h=f.hook)&&s(h=h.postpatch)&&h(e,t)}}}function M(e,t,r){if(c(r)&&s(e.parent))e.parent.data.pendingInsert=t;else for(var n=0;n<t.length;++n)t[n].data.hook.insert(t[n])}var A=w("attrs,class,staticClass,staticStyle,key");function P(e,t,r,n){var i,o=t.tag,a=t.data,l=t.children;if(n=n||a&&a.pre,t.elm=e,c(t.isComment)&&s(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(s(a)&&(s(i=a.hook)&&s(i=i.init)&&i(t,!0),s(i=t.componentInstance)))return m(t,r),!0;if(s(o)){if(s(l))if(e.hasChildNodes())if(s(i=a)&&s(i=i.domProps)&&s(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var d=!0,u=e.firstChild,h=0;h<l.length;h++){if(!u||!P(u,l[h],r,n)){d=!1;break}u=u.nextSibling}if(!d||u)return!1}else b(t,l,r);if(s(a)){var f=!1;for(var p in a)if(!A(p)){f=!0,S(t,r);break}!f&&a["class"]&&ni(a["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,r,i){if(!a(t)){var o=!1,d=[];if(a(e))o=!0,p(t,d);else{var h=s(e.nodeType);if(!h&&va(e,t))O(e,t,d,null,null,i);else{if(h){if(1===e.nodeType&&e.hasAttribute(G)&&(e.removeAttribute(G),r=!0),c(r)&&P(e,t,d))return M(t,d,!0),e;e=u(e)}var f=e.elm,v=l.parentNode(f);if(p(t,d,f._leaveCb?null:v,l.nextSibling(f)),s(t.parent)){var m=t.parent,g=_(t);while(m){for(var y=0;y<n.destroy.length;++y)n.destroy[y](m);if(m.elm=t.elm,g){for(var b=0;b<n.create.length;++b)n.create[b](fa,m);var w=m.data.hook.insert;if(w.merged)for(var S=w.fns.slice(1),E=0;E<S.length;E++)S[E]()}else ua(m);m=m.parent}}s(v)?C([e],0,0):s(e.tag)&&I(e)}}return M(t,d,o),t.elm}s(e)&&I(e)}}var ba={create:_a,update:_a,destroy:function(e){_a(e,fa)}};function _a(e,t){(e.data.directives||t.data.directives)&&wa(e,t)}function wa(e,t){var r,n,i,o=e===fa,a=t===fa,s=Ea(e.data.directives,e.context),c=Ea(t.data.directives,t.context),l=[],d=[];for(r in c)n=s[r],i=c[r],n?(i.oldValue=n.value,i.oldArg=n.arg,Ia(i,"update",t,e),i.def&&i.def.componentUpdated&&d.push(i)):(Ia(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var u=function(){for(var r=0;r<l.length;r++)Ia(l[r],"inserted",t,e)};o?kt(t,"insert",u):u()}if(d.length&&kt(t,"postpatch",(function(){for(var r=0;r<d.length;r++)Ia(d[r],"componentUpdated",t,e)})),!o)for(r in s)c[r]||Ia(s[r],"unbind",e,e,a)}var Sa=Object.create(null);function Ea(e,t){var r,n,i=Object.create(null);if(!e)return i;for(r=0;r<e.length;r++){if(n=e[r],n.modifiers||(n.modifiers=Sa),i[ka(n)]=n,t._setupState&&t._setupState.__sfc){var o=n.def||eo(t,"_setupState","v-"+n.name);n.def="function"===typeof o?{bind:o,update:o}:o}n.def=n.def||eo(t.$options,"directives",n.name,!0)}return i}function ka(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function Ia(t,r,n,i,o){var a=t.def&&t.def[r];if(a)try{a(n.elm,t,n,i,o)}catch(e){Sn(e,n.context,"directive ".concat(t.name," ").concat(r," hook"))}}var Ca=[da,ba];function Ta(e,t){var r=t.componentOptions;if((!s(r)||!1!==r.Ctor.options.inheritAttrs)&&(!a(e.data.attrs)||!a(t.data.attrs))){var n,i,o,l=t.elm,d=e.data.attrs||{},u=t.data.attrs||{};for(n in(s(u.__ob__)||c(u._v_attr_proxy))&&(u=t.data.attrs=N({},u)),u)i=u[n],o=d[n],o!==i&&Ra(l,n,i,t.data.pre);for(n in(oe||se)&&u.value!==d.value&&Ra(l,"value",u.value),d)a(u[n])&&(Mo(n)?l.removeAttributeNS(Oo,Ao(n)):Co(n)||l.removeAttribute(n))}}function Ra(e,t,r,n){n||e.tagName.indexOf("-")>-1?xa(e,t,r):xo(t)?Po(r)?e.removeAttribute(t):(r="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,r)):Co(t)?e.setAttribute(t,Ro(t,r)):Mo(t)?Po(r)?e.removeAttributeNS(Oo,Ao(t)):e.setAttributeNS(Oo,t,r):xa(e,t,r)}function xa(e,t,r){if(Po(r))e.removeAttribute(t);else{if(oe&&!ae&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==r&&!e.__ieph){var n=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",n)};e.addEventListener("input",n),e.__ieph=!0}e.setAttribute(t,r)}}var Oa={create:Ta,update:Ta};function Ma(e,t){var r=t.elm,n=t.data,i=e.data;if(!(a(n.staticClass)&&a(n.class)&&(a(i)||a(i.staticClass)&&a(i.class)))){var o=Do(t),c=r._transitionClasses;s(c)&&(o=No(o,Uo(c))),o!==r._prevClass&&(r.setAttribute("class",o),r._prevClass=o)}}var Aa,Pa,Da,ja,La,Na,Ua={create:Ma,update:Ma},Fa=/[\w).+\-_$\]]/;function Ba(e){var t,r,n,i,o,a=!1,s=!1,c=!1,l=!1,d=0,u=0,h=0,f=0;for(n=0;n<e.length;n++)if(r=t,t=e.charCodeAt(n),a)39===t&&92!==r&&(a=!1);else if(s)34===t&&92!==r&&(s=!1);else if(c)96===t&&92!==r&&(c=!1);else if(l)47===t&&92!==r&&(l=!1);else if(124!==t||124===e.charCodeAt(n+1)||124===e.charCodeAt(n-1)||d||u||h){switch(t){case 34:s=!0;break;case 39:a=!0;break;case 96:c=!0;break;case 40:h++;break;case 41:h--;break;case 91:u++;break;case 93:u--;break;case 123:d++;break;case 125:d--;break}if(47===t){for(var p=n-1,v=void 0;p>=0;p--)if(v=e.charAt(p)," "!==v)break;v&&Fa.test(v)||(l=!0)}}else void 0===i?(f=n+1,i=e.slice(0,n).trim()):m();function m(){(o||(o=[])).push(e.slice(f,n).trim()),f=n+1}if(void 0===i?i=e.slice(0,n).trim():0!==f&&m(),o)for(n=0;n<o.length;n++)i=Ka(i,o[n]);return i}function Ka(e,t){var r=t.indexOf("(");if(r<0)return'_f("'.concat(t,'")(').concat(e,")");var n=t.slice(0,r),i=t.slice(r+1);return'_f("'.concat(n,'")(').concat(e).concat(")"!==i?","+i:i)}function qa(e,t){console.error("[Vue compiler]: ".concat(e))}function Va(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function Wa(e,t,r,n,i){(e.props||(e.props=[])).push(es({name:t,value:r,dynamic:i},n)),e.plain=!1}function $a(e,t,r,n,i){var o=i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[]);o.push(es({name:t,value:r,dynamic:i},n)),e.plain=!1}function za(e,t,r,n){e.attrsMap[t]=r,e.attrsList.push(es({name:t,value:r},n))}function Ga(e,t,r,n,i,o,a,s){(e.directives||(e.directives=[])).push(es({name:t,rawName:r,value:n,arg:i,isDynamicArg:o,modifiers:a},s)),e.plain=!1}function Ha(e,t,r){return r?"_p(".concat(t,',"').concat(e,'")'):e+t}function Ya(e,t,r,n,o,a,s,c){var l;n=n||i,n.right?c?t="(".concat(t,")==='click'?'contextmenu':(").concat(t,")"):"click"===t&&(t="contextmenu",delete n.right):n.middle&&(c?t="(".concat(t,")==='click'?'mouseup':(").concat(t,")"):"click"===t&&(t="mouseup")),n.capture&&(delete n.capture,t=Ha("!",t,c)),n.once&&(delete n.once,t=Ha("~",t,c)),n.passive&&(delete n.passive,t=Ha("&",t,c)),n.native?(delete n.native,l=e.nativeEvents||(e.nativeEvents={})):l=e.events||(e.events={});var d=es({value:r.trim(),dynamic:c},s);n!==i&&(d.modifiers=n);var u=l[t];Array.isArray(u)?o?u.unshift(d):u.push(d):l[t]=u?o?[d,u]:[u,d]:d,e.plain=!1}function Ja(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}function Xa(e,t,r){var n=Za(e,":"+t)||Za(e,"v-bind:"+t);if(null!=n)return Ba(n);if(!1!==r){var i=Za(e,t);if(null!=i)return JSON.stringify(i)}}function Za(e,t,r){var n;if(null!=(n=e.attrsMap[t]))for(var i=e.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===t){i.splice(o,1);break}return r&&delete e.attrsMap[t],n}function Qa(e,t){for(var r=e.attrsList,n=0,i=r.length;n<i;n++){var o=r[n];if(t.test(o.name))return r.splice(n,1),o}}function es(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function ts(e,t,r){var n=r||{},i=n.number,o=n.trim,a="$$v",s=a;o&&(s="(typeof ".concat(a," === 'string'")+"? ".concat(a,".trim()")+": ".concat(a,")")),i&&(s="_n(".concat(s,")"));var c=rs(t,s);e.model={value:"(".concat(t,")"),expression:JSON.stringify(t),callback:"function (".concat(a,") {").concat(c,"}")}}function rs(e,t){var r=ns(e);return null===r.key?"".concat(e,"=").concat(t):"$set(".concat(r.exp,", ").concat(r.key,", ").concat(t,")")}function ns(e){if(e=e.trim(),Aa=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Aa-1)return ja=e.lastIndexOf("."),ja>-1?{exp:e.slice(0,ja),key:'"'+e.slice(ja+1)+'"'}:{exp:e,key:null};Pa=e,ja=La=Na=0;while(!os())Da=is(),as(Da)?cs(Da):91===Da&&ss(Da);return{exp:e.slice(0,La),key:e.slice(La+1,Na)}}function is(){return Pa.charCodeAt(++ja)}function os(){return ja>=Aa}function as(e){return 34===e||39===e}function ss(e){var t=1;La=ja;while(!os())if(e=is(),as(e))cs(e);else if(91===e&&t++,93===e&&t--,0===t){Na=ja;break}}function cs(e){var t=e;while(!os())if(e=is(),e===t)break}var ls,ds="__r",us="__c";function hs(e,t,r){r;var n=t.value,i=t.modifiers,o=e.tag,a=e.attrsMap.type;if(e.component)return ts(e,n,i),!1;if("select"===o)vs(e,n,i);else if("input"===o&&"checkbox"===a)fs(e,n,i);else if("input"===o&&"radio"===a)ps(e,n,i);else if("input"===o||"textarea"===o)ms(e,n,i);else{if(!J.isReservedTag(o))return ts(e,n,i),!1}return!0}function fs(e,t,r){var n=r&&r.number,i=Xa(e,"value")||"null",o=Xa(e,"true-value")||"true",a=Xa(e,"false-value")||"false";Wa(e,"checked","Array.isArray(".concat(t,")")+"?_i(".concat(t,",").concat(i,")>-1")+("true"===o?":(".concat(t,")"):":_q(".concat(t,",").concat(o,")"))),Ya(e,"change","var $$a=".concat(t,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(o,"):(").concat(a,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(n?"_n("+i+")":i,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(rs(t,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(rs(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(rs(t,"$$c"),"}"),null,!0)}function ps(e,t,r){var n=r&&r.number,i=Xa(e,"value")||"null";i=n?"_n(".concat(i,")"):i,Wa(e,"checked","_q(".concat(t,",").concat(i,")")),Ya(e,"change",rs(t,i),null,!0)}function vs(e,t,r){var n=r&&r.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(n?"_n(val)":"val","})"),o="$event.target.multiple ? $$selectedVal : $$selectedVal[0]",a="var $$selectedVal = ".concat(i,";");a="".concat(a," ").concat(rs(t,o)),Ya(e,"change",a,null,!0)}function ms(e,t,r){var n=e.attrsMap.type,i=r||{},o=i.lazy,a=i.number,s=i.trim,c=!o&&"range"!==n,l=o?"change":"range"===n?ds:"input",d="$event.target.value";s&&(d="$event.target.value.trim()"),a&&(d="_n(".concat(d,")"));var u=rs(t,d);c&&(u="if($event.target.composing)return;".concat(u)),Wa(e,"value","(".concat(t,")")),Ya(e,l,u,null,!0),(s||a)&&Ya(e,"blur","$forceUpdate()")}function gs(e){if(s(e[ds])){var t=oe?"change":"input";e[t]=[].concat(e[ds],e[t]||[]),delete e[ds]}s(e[us])&&(e.change=[].concat(e[us],e.change||[]),delete e[us])}function ys(e,t,r){var n=ls;return function i(){var o=t.apply(null,arguments);null!==o&&ws(e,i,r,n)}}var bs=Tn&&!(de&&Number(de[1])<=53);function _s(e,t,r,n){if(bs){var i=Zr,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}ls.addEventListener(e,t,he?{capture:r,passive:n}:r)}function ws(e,t,r,n){(n||ls).removeEventListener(e,t._wrapper||t,r)}function Ss(e,t){if(!a(e.data.on)||!a(t.data.on)){var r=t.data.on||{},n=e.data.on||{};ls=t.elm||e.elm,gs(r),Et(r,n,_s,ws,ys,t.context),ls=void 0}}var Es,ks={create:Ss,update:Ss,destroy:function(e){return Ss(e,fa)}};function Is(t,r){if(!a(t.data.domProps)||!a(r.data.domProps)){var n,i,o=r.elm,l=t.data.domProps||{},d=r.data.domProps||{};for(n in(s(d.__ob__)||c(d._v_attr_proxy))&&(d=r.data.domProps=N({},d)),l)n in d||(o[n]="");for(n in d){if(i=d[n],"textContent"===n||"innerHTML"===n){if(r.children&&(r.children.length=0),i===l[n])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===n&&"PROGRESS"!==o.tagName){o._value=i;var u=a(i)?"":String(i);Cs(o,u)&&(o.value=u)}else if("innerHTML"===n&&Vo(o.tagName)&&a(o.innerHTML)){Es=Es||document.createElement("div"),Es.innerHTML="<svg>".concat(i,"</svg>");var h=Es.firstChild;while(o.firstChild)o.removeChild(o.firstChild);while(h.firstChild)o.appendChild(h.firstChild)}else if(i!==l[n])try{o[n]=i}catch(e){}}}}function Cs(e,t){return!e.composing&&("OPTION"===e.tagName||Ts(e,t)||Rs(e,t))}function Ts(t,r){var n=!0;try{n=document.activeElement!==t}catch(e){}return n&&t.value!==r}function Rs(e,t){var r=e.value,n=e._vModifiers;if(s(n)){if(n.number)return _(r)!==_(t);if(n.trim)return r.trim()!==t.trim()}return r!==t}var xs={create:Is,update:Is},Os=T((function(e){var t={},r=/;(?![^(]*\))/g,n=/:(.+)/;return e.split(r).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function Ms(e){var t=As(e.style);return e.staticStyle?N(e.staticStyle,t):t}function As(e){return Array.isArray(e)?U(e):"string"===typeof e?Os(e):e}function Ps(e,t){var r,n={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(r=Ms(i.data))&&N(n,r)}(r=Ms(e.data))&&N(n,r);var o=e;while(o=o.parent)o.data&&(r=Ms(o.data))&&N(n,r);return n}var Ds,js=/^--/,Ls=/\s*!important$/,Ns=function(e,t,r){if(js.test(t))e.style.setProperty(t,r);else if(Ls.test(r))e.style.setProperty(A(t),r.replace(Ls,""),"important");else{var n=Fs(t);if(Array.isArray(r))for(var i=0,o=r.length;i<o;i++)e.style[n]=r[i];else e.style[n]=r}},Us=["Webkit","Moz","ms"],Fs=T((function(e){if(Ds=Ds||document.createElement("div").style,e=x(e),"filter"!==e&&e in Ds)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<Us.length;r++){var n=Us[r]+t;if(n in Ds)return n}}));function Bs(e,t){var r=t.data,n=e.data;if(!(a(r.staticStyle)&&a(r.style)&&a(n.staticStyle)&&a(n.style))){var i,o,c=t.elm,l=n.staticStyle,d=n.normalizedStyle||n.style||{},u=l||d,h=As(t.data.style)||{};t.data.normalizedStyle=s(h.__ob__)?N({},h):h;var f=Ps(t,!0);for(o in u)a(f[o])&&Ns(c,o,"");for(o in f)i=f[o],Ns(c,o,null==i?"":i)}}var Ks={create:Bs,update:Bs},qs=/\s+/;function Vs(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(qs).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var r=" ".concat(e.getAttribute("class")||""," ");r.indexOf(" "+t+" ")<0&&e.setAttribute("class",(r+t).trim())}}function Ws(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(qs).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var r=" ".concat(e.getAttribute("class")||""," "),n=" "+t+" ";while(r.indexOf(n)>=0)r=r.replace(n," ");r=r.trim(),r?e.setAttribute("class",r):e.removeAttribute("class")}}function $s(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&N(t,zs(e.name||"v")),N(t,e),t}return"string"===typeof e?zs(e):void 0}}var zs=T((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),Gs=ne&&!ae,Hs="transition",Ys="animation",Js="transition",Xs="transitionend",Zs="animation",Qs="animationend";Gs&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Js="WebkitTransition",Xs="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Zs="WebkitAnimation",Qs="webkitAnimationEnd"));var ec=ne?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function tc(e){ec((function(){ec(e)}))}function rc(e,t){var r=e._transitionClasses||(e._transitionClasses=[]);r.indexOf(t)<0&&(r.push(t),Vs(e,t))}function nc(e,t){e._transitionClasses&&k(e._transitionClasses,t),Ws(e,t)}function ic(e,t,r){var n=ac(e,t),i=n.type,o=n.timeout,a=n.propCount;if(!i)return r();var s=i===Hs?Xs:Qs,c=0,l=function(){e.removeEventListener(s,d),r()},d=function(t){t.target===e&&++c>=a&&l()};setTimeout((function(){c<a&&l()}),o+1),e.addEventListener(s,d)}var oc=/\b(transform|all)(,|$)/;function ac(e,t){var r,n=window.getComputedStyle(e),i=(n[Js+"Delay"]||"").split(", "),o=(n[Js+"Duration"]||"").split(", "),a=sc(i,o),s=(n[Zs+"Delay"]||"").split(", "),c=(n[Zs+"Duration"]||"").split(", "),l=sc(s,c),d=0,u=0;t===Hs?a>0&&(r=Hs,d=a,u=o.length):t===Ys?l>0&&(r=Ys,d=l,u=c.length):(d=Math.max(a,l),r=d>0?a>l?Hs:Ys:null,u=r?r===Hs?o.length:c.length:0);var h=r===Hs&&oc.test(n[Js+"Property"]);return{type:r,timeout:d,propCount:u,hasTransform:h}}function sc(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,r){return cc(t)+cc(e[r])})))}function cc(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function lc(e,t){var r=e.elm;s(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var n=$s(e.data.transition);if(!a(n)&&!s(r._enterCb)&&1===r.nodeType){var i=n.css,o=n.type,c=n.enterClass,l=n.enterToClass,d=n.enterActiveClass,f=n.appearClass,p=n.appearToClass,v=n.appearActiveClass,m=n.beforeEnter,g=n.enter,y=n.afterEnter,b=n.enterCancelled,w=n.beforeAppear,S=n.appear,E=n.afterAppear,k=n.appearCancelled,I=n.duration,C=jr,T=jr.$vnode;while(T&&T.parent)C=T.context,T=T.parent;var R=!C._isMounted||!e.isRootInsert;if(!R||S||""===S){var x=R&&f?f:c,O=R&&v?v:d,M=R&&p?p:l,A=R&&w||m,P=R&&u(S)?S:g,D=R&&E||y,j=R&&k||b,L=_(h(I)?I.enter:I);0;var N=!1!==i&&!ae,U=hc(P),F=r._enterCb=$((function(){N&&(nc(r,M),nc(r,O)),F.cancelled?(N&&nc(r,x),j&&j(r)):D&&D(r),r._enterCb=null}));e.data.show||kt(e,"insert",(function(){var t=r.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),P&&P(r,F)})),A&&A(r),N&&(rc(r,x),rc(r,O),tc((function(){nc(r,x),F.cancelled||(rc(r,M),U||(uc(L)?setTimeout(F,L):ic(r,o,F)))}))),e.data.show&&(t&&t(),P&&P(r,F)),N||U||F()}}}function dc(e,t){var r=e.elm;s(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var n=$s(e.data.transition);if(a(n)||1!==r.nodeType)return t();if(!s(r._leaveCb)){var i=n.css,o=n.type,c=n.leaveClass,l=n.leaveToClass,d=n.leaveActiveClass,u=n.beforeLeave,f=n.leave,p=n.afterLeave,v=n.leaveCancelled,m=n.delayLeave,g=n.duration,y=!1!==i&&!ae,b=hc(f),w=_(h(g)?g.leave:g);0;var S=r._leaveCb=$((function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),y&&(nc(r,l),nc(r,d)),S.cancelled?(y&&nc(r,c),v&&v(r)):(t(),p&&p(r)),r._leaveCb=null}));m?m(E):E()}function E(){S.cancelled||(!e.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),u&&u(r),y&&(rc(r,c),rc(r,d),tc((function(){nc(r,c),S.cancelled||(rc(r,l),b||(uc(w)?setTimeout(S,w):ic(r,o,S)))}))),f&&f(r,S),y||b||S())}}function uc(e){return"number"===typeof e&&!isNaN(e)}function hc(e){if(a(e))return!1;var t=e.fns;return s(t)?hc(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function fc(e,t){!0!==t.data.show&&lc(t)}var pc=ne?{create:fc,activate:fc,remove:function(e,t){!0!==e.data.show?dc(e,t):t()}}:{},vc=[Oa,Ua,ks,xs,Ks,pc],mc=vc.concat(Ca),gc=ya({nodeOps:la,modules:mc});ae&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Ic(e,"input")}));var yc={inserted:function(e,t,r,n){"select"===r.tag?(n.elm&&!n.elm._vOptions?kt(r,"postpatch",(function(){yc.componentUpdated(e,t,r)})):bc(e,t,r.context),e._vOptions=[].map.call(e.options,Sc)):("textarea"===r.tag||Yo(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Ec),e.addEventListener("compositionend",kc),e.addEventListener("change",kc),ae&&(e.vmodel=!0)))},componentUpdated:function(e,t,r){if("select"===r.tag){bc(e,t,r.context);var n=e._vOptions,i=e._vOptions=[].map.call(e.options,Sc);if(i.some((function(e,t){return!V(e,n[t])}))){var o=e.multiple?t.value.some((function(e){return wc(e,i)})):t.value!==t.oldValue&&wc(t.value,i);o&&Ic(e,"change")}}}};function bc(e,t,r){_c(e,t,r),(oe||se)&&setTimeout((function(){_c(e,t,r)}),0)}function _c(e,t,r){var n=t.value,i=e.multiple;if(!i||Array.isArray(n)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=W(n,Sc(a))>-1,a.selected!==o&&(a.selected=o);else if(V(Sc(a),n))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function wc(e,t){return t.every((function(t){return!V(t,e)}))}function Sc(e){return"_value"in e?e._value:e.value}function Ec(e){e.target.composing=!0}function kc(e){e.target.composing&&(e.target.composing=!1,Ic(e.target,"input"))}function Ic(e,t){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}function Cc(e){return!e.componentInstance||e.data&&e.data.transition?e:Cc(e.componentInstance._vnode)}var Tc={bind:function(e,t,r){var n=t.value;r=Cc(r);var i=r.data&&r.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;n&&i?(r.data.show=!0,lc(r,(function(){e.style.display=o}))):e.style.display=n?o:"none"},update:function(e,t,r){var n=t.value,i=t.oldValue;if(!n!==!i){r=Cc(r);var o=r.data&&r.data.transition;o?(r.data.show=!0,n?lc(r,(function(){e.style.display=e.__vOriginalDisplay})):dc(r,(function(){e.style.display="none"}))):e.style.display=n?e.__vOriginalDisplay:"none"}},unbind:function(e,t,r,n,i){i||(e.style.display=e.__vOriginalDisplay)}},Rc={model:yc,show:Tc},xc={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Oc(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Oc(Er(t.children)):e}function Mc(e){var t={},r=e.$options;for(var n in r.propsData)t[n]=e[n];var i=r._parentListeners;for(var n in i)t[x(n)]=i[n];return t}function Ac(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Pc(e){while(e=e.parent)if(e.data.transition)return!0}function Dc(e,t){return t.key===e.key&&t.tag===e.tag}var jc=function(e){return e.tag||er(e)},Lc=function(e){return"show"===e.name},Nc={name:"transition",props:xc,abstract:!0,render:function(e){var t=this,r=this.$slots.default;if(r&&(r=r.filter(jc),r.length)){0;var n=this.mode;0;var i=r[0];if(Pc(this.$vnode))return i;var o=Oc(i);if(!o)return i;if(this._leaving)return Ac(e,i);var a="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?a+"comment":a+o.tag:d(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=Mc(this),c=this._vnode,l=Oc(c);if(o.data.directives&&o.data.directives.some(Lc)&&(o.data.show=!0),l&&l.data&&!Dc(o,l)&&!er(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var u=l.data.transition=N({},s);if("out-in"===n)return this._leaving=!0,kt(u,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Ac(e,i);if("in-out"===n){if(er(o))return c;var h,f=function(){h()};kt(s,"afterEnter",f),kt(s,"enterCancelled",f),kt(u,"delayLeave",(function(e){h=e}))}}return i}}},Uc=N({tag:String,moveClass:String},xc);delete Uc.mode;var Fc={props:Uc,beforeMount:function(){var e=this,t=this._update;this._update=function(r,n){var i=Lr(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,r,n)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),n=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Mc(this),s=0;s<i.length;s++){var c=i[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),r[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(n){var l=[],d=[];for(s=0;s<n.length;s++){c=n[s];c.data.transition=a,c.data.pos=c.elm.getBoundingClientRect(),r[c.key]?l.push(c):d.push(c)}this.kept=e(t,null,l),this.removed=d}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Bc),e.forEach(Kc),e.forEach(qc),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var r=e.elm,n=r.style;rc(r,t),n.transform=n.WebkitTransform=n.transitionDuration="",r.addEventListener(Xs,r._moveCb=function e(n){n&&n.target!==r||n&&!/transform$/.test(n.propertyName)||(r.removeEventListener(Xs,e),r._moveCb=null,nc(r,t))})}})))},methods:{hasMove:function(e,t){if(!Gs)return!1;if(this._hasMove)return this._hasMove;var r=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Ws(r,e)})),Vs(r,t),r.style.display="none",this.$el.appendChild(r);var n=ac(r);return this.$el.removeChild(r),this._hasMove=n.hasTransform}}};function Bc(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Kc(e){e.data.newPos=e.elm.getBoundingClientRect()}function qc(e){var t=e.data.pos,r=e.data.newPos,n=t.left-r.left,i=t.top-r.top;if(n||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate(".concat(n,"px,").concat(i,"px)"),o.transitionDuration="0s"}}var Vc={Transition:Nc,TransitionGroup:Fc};so.config.mustUseProp=Io,so.config.isReservedTag=$o,so.config.isReservedAttr=Eo,so.config.getTagNamespace=zo,so.config.isUnknownElement=Ho,N(so.options.directives,Rc),N(so.options.components,Vc),so.prototype.__patch__=ne?gc:F,so.prototype.$mount=function(e,t){return e=e&&ne?Jo(e):void 0,Fr(this,e,t)},ne&&setTimeout((function(){J.devtools&&ve&&ve.emit("init",so)}),0);var Wc=/\{\{((?:.|\r?\n)+?)\}\}/g,$c=/[-.*+?^${}()|[\]\/\\]/g,zc=T((function(e){var t=e[0].replace($c,"\\$&"),r=e[1].replace($c,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+r,"g")}));function Gc(e,t){var r=t?zc(t):Wc;if(r.test(e)){var n,i,o,a=[],s=[],c=r.lastIndex=0;while(n=r.exec(e)){i=n.index,i>c&&(s.push(o=e.slice(c,i)),a.push(JSON.stringify(o)));var l=Ba(n[1].trim());a.push("_s(".concat(l,")")),s.push({"@binding":l}),c=i+n[0].length}return c<e.length&&(s.push(o=e.slice(c)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}function Hc(e,t){t.warn;var r=Za(e,"class");r&&(e.staticClass=JSON.stringify(r.replace(/\s+/g," ").trim()));var n=Xa(e,"class",!1);n&&(e.classBinding=n)}function Yc(e){var t="";return e.staticClass&&(t+="staticClass:".concat(e.staticClass,",")),e.classBinding&&(t+="class:".concat(e.classBinding,",")),t}var Jc={staticKeys:["staticClass"],transformNode:Hc,genData:Yc};function Xc(e,t){t.warn;var r=Za(e,"style");r&&(e.staticStyle=JSON.stringify(Os(r)));var n=Xa(e,"style",!1);n&&(e.styleBinding=n)}function Zc(e){var t="";return e.staticStyle&&(t+="staticStyle:".concat(e.staticStyle,",")),e.styleBinding&&(t+="style:(".concat(e.styleBinding,"),")),t}var Qc,el={staticKeys:["staticStyle"],transformNode:Xc,genData:Zc},tl={decode:function(e){return Qc=Qc||document.createElement("div"),Qc.innerHTML=e,Qc.textContent}},rl=w("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),nl=w("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),il=w("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),ol=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,al=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,sl="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(X.source,"]*"),cl="((?:".concat(sl,"\\:)?").concat(sl,")"),ll=new RegExp("^<".concat(cl)),dl=/^\s*(\/?)>/,ul=new RegExp("^<\\/".concat(cl,"[^>]*>")),hl=/^<!DOCTYPE [^>]+>/i,fl=/^<!\--/,pl=/^<!\[/,vl=w("script,style,textarea",!0),ml={},gl={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},yl=/&(?:lt|gt|quot|amp|#39);/g,bl=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,_l=w("pre,textarea",!0),wl=function(e,t){return e&&_l(e)&&"\n"===t[0]};function Sl(e,t){var r=t?bl:yl;return e.replace(r,(function(e){return gl[e]}))}function El(e,t){var r,n,i=[],o=t.expectHTML,a=t.isUnaryTag||B,s=t.canBeLeftOpenTag||B,c=0,l=function(){if(r=e,n&&vl(n)){var i=0,o=n.toLowerCase(),a=ml[o]||(ml[o]=new RegExp("([\\s\\S]*?)(</"+o+"[^>]*>)","i"));_=e.replace(a,(function(e,r,n){return i=n.length,vl(o)||"noscript"===o||(r=r.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),wl(o,r)&&(r=r.slice(1)),t.chars&&t.chars(r),""}));c+=e.length-_.length,e=_,p(o,c-i,c)}else{var s=e.indexOf("<");if(0===s){if(fl.test(e)){var l=e.indexOf("--\x3e");if(l>=0)return t.shouldKeepComment&&t.comment&&t.comment(e.substring(4,l),c,c+l+3),u(l+3),"continue"}if(pl.test(e)){var d=e.indexOf("]>");if(d>=0)return u(d+2),"continue"}var v=e.match(hl);if(v)return u(v[0].length),"continue";var m=e.match(ul);if(m){var g=c;return u(m[0].length),p(m[1],g,c),"continue"}var y=h();if(y)return f(y),wl(y.tagName,e)&&u(1),"continue"}var b=void 0,_=void 0,w=void 0;if(s>=0){_=e.slice(s);while(!ul.test(_)&&!ll.test(_)&&!fl.test(_)&&!pl.test(_)){if(w=_.indexOf("<",1),w<0)break;s+=w,_=e.slice(s)}b=e.substring(0,s)}s<0&&(b=e),b&&u(b.length),t.chars&&b&&t.chars(b,c-b.length,c)}if(e===r)return t.chars&&t.chars(e),"break"};while(e){var d=l();if("break"===d)break}function u(t){c+=t,e=e.substring(t)}function h(){var t=e.match(ll);if(t){var r={tagName:t[1],attrs:[],start:c};u(t[0].length);var n=void 0,i=void 0;while(!(n=e.match(dl))&&(i=e.match(al)||e.match(ol)))i.start=c,u(i[0].length),i.end=c,r.attrs.push(i);if(n)return r.unarySlash=n[1],u(n[0].length),r.end=c,r}}function f(e){var r=e.tagName,c=e.unarySlash;o&&("p"===n&&il(r)&&p(n),s(r)&&n===r&&p(r));for(var l=a(r)||!!c,d=e.attrs.length,u=new Array(d),h=0;h<d;h++){var f=e.attrs[h],v=f[3]||f[4]||f[5]||"",m="a"===r&&"href"===f[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;u[h]={name:f[1],value:Sl(v,m)}}l||(i.push({tag:r,lowerCasedTag:r.toLowerCase(),attrs:u,start:e.start,end:e.end}),n=r),t.start&&t.start(r,u,l,e.start,e.end)}function p(e,r,o){var a,s;if(null==r&&(r=c),null==o&&(o=c),e){for(s=e.toLowerCase(),a=i.length-1;a>=0;a--)if(i[a].lowerCasedTag===s)break}else a=0;if(a>=0){for(var l=i.length-1;l>=a;l--)t.end&&t.end(i[l].tag,r,o);i.length=a,n=a&&i[a-1].tag}else"br"===s?t.start&&t.start(e,[],!0,r,o):"p"===s&&(t.start&&t.start(e,[],!1,r,o),t.end&&t.end(e,r,o))}p()}var kl,Il,Cl,Tl,Rl,xl,Ol,Ml,Al=/^@|^v-on:/,Pl=/^v-|^@|^:|^#/,Dl=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,jl=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ll=/^\(|\)$/g,Nl=/^\[.*\]$/,Ul=/:(.*)$/,Fl=/^:|^\.|^v-bind:/,Bl=/\.[^.\]]+(?=[^\]]*$)/g,Kl=/^v-slot(:|$)|^#/,ql=/[\r\n]/,Vl=/[ \f\t\r\n]+/g,Wl=T(tl.decode),$l="_empty_";function zl(e,t,r){return{type:1,tag:e,attrsList:t,attrsMap:fd(t),rawAttrsMap:{},parent:r,children:[]}}function Gl(e,t){kl=t.warn||qa,xl=t.isPreTag||B,Ol=t.mustUseProp||B,Ml=t.getTagNamespace||B;var r=t.isReservedTag||B;(function(e){return!(!(e.component||e.attrsMap[":is"]||e.attrsMap["v-bind:is"])&&(e.attrsMap.is?r(e.attrsMap.is):r(e.tag)))}),Cl=Va(t.modules,"transformNode"),Tl=Va(t.modules,"preTransformNode"),Rl=Va(t.modules,"postTransformNode"),Il=t.delimiters;var n,i,o=[],a=!1!==t.preserveWhitespace,s=t.whitespace,c=!1,l=!1;function d(e){if(u(e),c||e.processed||(e=Jl(e,t)),o.length||e===n||n.if&&(e.elseif||e.else)&&id(n,{exp:e.elseif,block:e}),i&&!e.forbidden)if(e.elseif||e.else)rd(e,i);else{if(e.slotScope){var r=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[r]=e}i.children.push(e),e.parent=i}e.children=e.children.filter((function(e){return!e.slotScope})),u(e),e.pre&&(c=!1),xl(e.tag)&&(l=!1);for(var a=0;a<Rl.length;a++)Rl[a](e,t)}function u(e){if(!l){var t=void 0;while((t=e.children[e.children.length-1])&&3===t.type&&" "===t.text)e.children.pop()}}return El(e,{warn:kl,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,r,a,s,u){var h=i&&i.ns||Ml(e);oe&&"svg"===h&&(r=yd(r));var f=zl(e,r,i);h&&(f.ns=h),vd(f)&&!pe()&&(f.forbidden=!0);for(var p=0;p<Tl.length;p++)f=Tl[p](f,t)||f;c||(Hl(f),f.pre&&(c=!0)),xl(f.tag)&&(l=!0),c?Yl(f):f.processed||(Ql(f),td(f),od(f)),n||(n=f),a?d(f):(i=f,o.push(f))},end:function(e,t,r){var n=o[o.length-1];o.length-=1,i=o[o.length-1],d(n)},chars:function(e,t,r){if(i&&(!oe||"textarea"!==i.tag||i.attrsMap.placeholder!==e)){var n=i.children;if(e=l||e.trim()?pd(i)?e:Wl(e):n.length?s?"condense"===s&&ql.test(e)?"":" ":a?" ":"":"",e){l||"condense"!==s||(e=e.replace(Vl," "));var o=void 0,d=void 0;!c&&" "!==e&&(o=Gc(e,Il))?d={type:2,expression:o.expression,tokens:o.tokens,text:e}:" "===e&&n.length&&" "===n[n.length-1].text||(d={type:3,text:e}),d&&n.push(d)}}},comment:function(e,t,r){if(i){var n={type:3,text:e,isComment:!0};0,i.children.push(n)}}}),n}function Hl(e){null!=Za(e,"v-pre")&&(e.pre=!0)}function Yl(e){var t=e.attrsList,r=t.length;if(r)for(var n=e.attrs=new Array(r),i=0;i<r;i++)n[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(n[i].start=t[i].start,n[i].end=t[i].end);else e.pre||(e.plain=!0)}function Jl(e,t){Xl(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,Zl(e),ad(e),cd(e),ld(e);for(var r=0;r<Cl.length;r++)e=Cl[r](e,t)||e;return dd(e),e}function Xl(e){var t=Xa(e,"key");t&&(e.key=t)}function Zl(e){var t=Xa(e,"ref");t&&(e.ref=t,e.refInFor=ud(e))}function Ql(e){var t;if(t=Za(e,"v-for")){var r=ed(t);r&&N(e,r)}}function ed(e){var t=e.match(Dl);if(t){var r={};r.for=t[2].trim();var n=t[1].trim().replace(Ll,""),i=n.match(jl);return i?(r.alias=n.replace(jl,"").trim(),r.iterator1=i[1].trim(),i[2]&&(r.iterator2=i[2].trim())):r.alias=n,r}}function td(e){var t=Za(e,"v-if");if(t)e.if=t,id(e,{exp:t,block:e});else{null!=Za(e,"v-else")&&(e.else=!0);var r=Za(e,"v-else-if");r&&(e.elseif=r)}}function rd(e,t){var r=nd(t.children);r&&r.if&&id(r,{exp:e.elseif,block:e})}function nd(e){var t=e.length;while(t--){if(1===e[t].type)return e[t];e.pop()}}function id(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function od(e){var t=Za(e,"v-once");null!=t&&(e.once=!0)}function ad(e){var t;"template"===e.tag?(t=Za(e,"scope"),e.slotScope=t||Za(e,"slot-scope")):(t=Za(e,"slot-scope"))&&(e.slotScope=t);var r=Xa(e,"slot");if(r&&(e.slotTarget='""'===r?'"default"':r,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||$a(e,"slot",r,Ja(e,"slot"))),"template"===e.tag){var n=Qa(e,Kl);if(n){0;var i=sd(n),o=i.name,a=i.dynamic;e.slotTarget=o,e.slotTargetDynamic=a,e.slotScope=n.value||$l}}else{n=Qa(e,Kl);if(n){0;var s=e.scopedSlots||(e.scopedSlots={}),c=sd(n),l=c.name,d=(a=c.dynamic,s[l]=zl("template",[],e));d.slotTarget=l,d.slotTargetDynamic=a,d.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=d,!0})),d.slotScope=n.value||$l,e.children=[],e.plain=!1}}}function sd(e){var t=e.name.replace(Kl,"");return t||"#"!==e.name[0]&&(t="default"),Nl.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'.concat(t,'"'),dynamic:!1}}function cd(e){"slot"===e.tag&&(e.slotName=Xa(e,"name"))}function ld(e){var t;(t=Xa(e,"is"))&&(e.component=t),null!=Za(e,"inline-template")&&(e.inlineTemplate=!0)}function dd(e){var t,r,n,i,o,a,s,c,l=e.attrsList;for(t=0,r=l.length;t<r;t++){if(n=i=l[t].name,o=l[t].value,Pl.test(n))if(e.hasBindings=!0,a=hd(n.replace(Pl,"")),a&&(n=n.replace(Bl,"")),Fl.test(n))n=n.replace(Fl,""),o=Ba(o),c=Nl.test(n),c&&(n=n.slice(1,-1)),a&&(a.prop&&!c&&(n=x(n),"innerHtml"===n&&(n="innerHTML")),a.camel&&!c&&(n=x(n)),a.sync&&(s=rs(o,"$event"),c?Ya(e,'"update:"+('.concat(n,")"),s,null,!1,kl,l[t],!0):(Ya(e,"update:".concat(x(n)),s,null,!1,kl,l[t]),A(n)!==x(n)&&Ya(e,"update:".concat(A(n)),s,null,!1,kl,l[t])))),a&&a.prop||!e.component&&Ol(e.tag,e.attrsMap.type,n)?Wa(e,n,o,l[t],c):$a(e,n,o,l[t],c);else if(Al.test(n))n=n.replace(Al,""),c=Nl.test(n),c&&(n=n.slice(1,-1)),Ya(e,n,o,a,!1,kl,l[t],c);else{n=n.replace(Pl,"");var d=n.match(Ul),u=d&&d[1];c=!1,u&&(n=n.slice(0,-(u.length+1)),Nl.test(u)&&(u=u.slice(1,-1),c=!0)),Ga(e,n,i,o,u,c,a,l[t])}else $a(e,n,JSON.stringify(o),l[t]),!e.component&&"muted"===n&&Ol(e.tag,e.attrsMap.type,n)&&Wa(e,n,"true",l[t])}}function ud(e){var t=e;while(t){if(void 0!==t.for)return!0;t=t.parent}return!1}function hd(e){var t=e.match(Bl);if(t){var r={};return t.forEach((function(e){r[e.slice(1)]=!0})),r}}function fd(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r].name]=e[r].value;return t}function pd(e){return"script"===e.tag||"style"===e.tag}function vd(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}var md=/^xmlns:NS\d+/,gd=/^NS\d+:/;function yd(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];md.test(n.name)||(n.name=n.name.replace(gd,""),t.push(n))}return t}function bd(e,t){if("input"===e.tag){var r=e.attrsMap;if(!r["v-model"])return;var n=void 0;if((r[":type"]||r["v-bind:type"])&&(n=Xa(e,"type")),r.type||n||!r["v-bind"]||(n="(".concat(r["v-bind"],").type")),n){var i=Za(e,"v-if",!0),o=i?"&&(".concat(i,")"):"",a=null!=Za(e,"v-else",!0),s=Za(e,"v-else-if",!0),c=_d(e);Ql(c),za(c,"type","checkbox"),Jl(c,t),c.processed=!0,c.if="(".concat(n,")==='checkbox'")+o,id(c,{exp:c.if,block:c});var l=_d(e);Za(l,"v-for",!0),za(l,"type","radio"),Jl(l,t),id(c,{exp:"(".concat(n,")==='radio'")+o,block:l});var d=_d(e);return Za(d,"v-for",!0),za(d,":type",n),Jl(d,t),id(c,{exp:i,block:d}),a?c.else=!0:s&&(c.elseif=s),c}}}function _d(e){return zl(e.tag,e.attrsList.slice(),e.parent)}var wd={preTransformNode:bd},Sd=[Jc,el,wd];function Ed(e,t){t.value&&Wa(e,"textContent","_s(".concat(t.value,")"),t)}function kd(e,t){t.value&&Wa(e,"innerHTML","_s(".concat(t.value,")"),t)}var Id,Cd,Td={model:hs,text:Ed,html:kd},Rd={expectHTML:!0,modules:Sd,directives:Td,isPreTag:Wo,isUnaryTag:rl,mustUseProp:Io,canBeLeftOpenTag:nl,isReservedTag:$o,getTagNamespace:zo,staticKeys:q(Sd)},xd=T(Md);function Od(e,t){e&&(Id=xd(t.staticKeys||""),Cd=t.isReservedTag||B,Ad(e),Pd(e,!1))}function Md(e){return w("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}function Ad(e){if(e.static=Dd(e),1===e.type){if(!Cd(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,r=e.children.length;t<r;t++){var n=e.children[t];Ad(n),n.static||(e.static=!1)}if(e.ifConditions)for(t=1,r=e.ifConditions.length;t<r;t++){var i=e.ifConditions[t].block;Ad(i),i.static||(e.static=!1)}}}function Pd(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var r=0,n=e.children.length;r<n;r++)Pd(e.children[r],t||!!e.for);if(e.ifConditions)for(r=1,n=e.ifConditions.length;r<n;r++)Pd(e.ifConditions[r].block,t)}}function Dd(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||S(e.tag)||!Cd(e.tag)||jd(e)||!Object.keys(e).every(Id))))}function jd(e){while(e.parent){if(e=e.parent,"template"!==e.tag)return!1;if(e.for)return!0}return!1}var Ld=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,Nd=/\([^)]*?\);*$/,Ud=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Fd={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Bd={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Kd=function(e){return"if(".concat(e,")return null;")},qd={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Kd("$event.target !== $event.currentTarget"),ctrl:Kd("!$event.ctrlKey"),shift:Kd("!$event.shiftKey"),alt:Kd("!$event.altKey"),meta:Kd("!$event.metaKey"),left:Kd("'button' in $event && $event.button !== 0"),middle:Kd("'button' in $event && $event.button !== 1"),right:Kd("'button' in $event && $event.button !== 2")};function Vd(e,t){var r=t?"nativeOn:":"on:",n="",i="";for(var o in e){var a=Wd(e[o]);e[o]&&e[o].dynamic?i+="".concat(o,",").concat(a,","):n+='"'.concat(o,'":').concat(a,",")}return n="{".concat(n.slice(0,-1),"}"),i?r+"_d(".concat(n,",[").concat(i.slice(0,-1),"])"):r+n}function Wd(e){if(!e)return"function(){}";if(Array.isArray(e))return"[".concat(e.map((function(e){return Wd(e)})).join(","),"]");var t=Ud.test(e.value),r=Ld.test(e.value),n=Ud.test(e.value.replace(Nd,""));if(e.modifiers){var i="",o="",a=[],s=function(t){if(qd[t])o+=qd[t],Fd[t]&&a.push(t);else if("exact"===t){var r=e.modifiers;o+=Kd(["ctrl","shift","alt","meta"].filter((function(e){return!r[e]})).map((function(e){return"$event.".concat(e,"Key")})).join("||"))}else a.push(t)};for(var c in e.modifiers)s(c);a.length&&(i+=$d(a)),o&&(i+=o);var l=t?"return ".concat(e.value,".apply(null, arguments)"):r?"return (".concat(e.value,").apply(null, arguments)"):n?"return ".concat(e.value):e.value;return"function($event){".concat(i).concat(l,"}")}return t||r?e.value:"function($event){".concat(n?"return ".concat(e.value):e.value,"}")}function $d(e){return"if(!$event.type.indexOf('key')&&"+"".concat(e.map(zd).join("&&"),")return null;")}function zd(e){var t=parseInt(e,10);if(t)return"$event.keyCode!==".concat(t);var r=Fd[e],n=Bd[e];return"_k($event.keyCode,"+"".concat(JSON.stringify(e),",")+"".concat(JSON.stringify(r),",")+"$event.key,"+"".concat(JSON.stringify(n))+")"}function Gd(e,t){e.wrapListeners=function(e){return"_g(".concat(e,",").concat(t.value,")")}}function Hd(e,t){e.wrapData=function(r){return"_b(".concat(r,",'").concat(e.tag,"',").concat(t.value,",").concat(t.modifiers&&t.modifiers.prop?"true":"false").concat(t.modifiers&&t.modifiers.sync?",true":"",")")}}var Yd={on:Gd,bind:Hd,cloak:F},Jd=function(){function e(e){this.options=e,this.warn=e.warn||qa,this.transforms=Va(e.modules,"transformCode"),this.dataGenFns=Va(e.modules,"genData"),this.directives=N(N({},Yd),e.directives);var t=e.isReservedTag||B;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1}return e}();function Xd(e,t){var r=new Jd(t),n=e?"script"===e.tag?"null":Zd(e,r):'_c("div")';return{render:"with(this){return ".concat(n,"}"),staticRenderFns:r.staticRenderFns}}function Zd(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return eu(e,t);if(e.once&&!e.onceProcessed)return tu(e,t);if(e.for&&!e.forProcessed)return iu(e,t);if(e.if&&!e.ifProcessed)return ru(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return yu(e,t);var r=void 0;if(e.component)r=bu(e.component,e,t);else{var n=void 0,i=t.maybeComponent(e);(!e.plain||e.pre&&i)&&(n=ou(e,t));var o=void 0,a=t.options.bindings;i&&a&&!1!==a.__isScriptSetup&&(o=Qd(a,e.tag)),o||(o="'".concat(e.tag,"'"));var s=e.inlineTemplate?null:hu(e,t,!0);r="_c(".concat(o).concat(n?",".concat(n):"").concat(s?",".concat(s):"",")")}for(var c=0;c<t.transforms.length;c++)r=t.transforms[c](e,r);return r}return hu(e,t)||"void 0"}function Qd(e,t){var r=x(t),n=O(r),i=function(i){return e[t]===i?t:e[r]===i?r:e[n]===i?n:void 0},o=i("setup-const")||i("setup-reactive-const");if(o)return o;var a=i("setup-let")||i("setup-ref")||i("setup-maybe-ref");return a||void 0}function eu(e,t){e.staticProcessed=!0;var r=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return ".concat(Zd(e,t),"}")),t.pre=r,"_m(".concat(t.staticRenderFns.length-1).concat(e.staticInFor?",true":"",")")}function tu(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return ru(e,t);if(e.staticInFor){var r="",n=e.parent;while(n){if(n.for){r=n.key;break}n=n.parent}return r?"_o(".concat(Zd(e,t),",").concat(t.onceId++,",").concat(r,")"):Zd(e,t)}return eu(e,t)}function ru(e,t,r,n){return e.ifProcessed=!0,nu(e.ifConditions.slice(),t,r,n)}function nu(e,t,r,n){if(!e.length)return n||"_e()";var i=e.shift();return i.exp?"(".concat(i.exp,")?").concat(o(i.block),":").concat(nu(e,t,r,n)):"".concat(o(i.block));function o(e){return r?r(e,t):e.once?tu(e,t):Zd(e,t)}}function iu(e,t,r,n){var i=e.for,o=e.alias,a=e.iterator1?",".concat(e.iterator1):"",s=e.iterator2?",".concat(e.iterator2):"";return e.forProcessed=!0,"".concat(n||"_l","((").concat(i,"),")+"function(".concat(o).concat(a).concat(s,"){")+"return ".concat((r||Zd)(e,t))+"})"}function ou(e,t){var r="{",n=au(e,t);n&&(r+=n+","),e.key&&(r+="key:".concat(e.key,",")),e.ref&&(r+="ref:".concat(e.ref,",")),e.refInFor&&(r+="refInFor:true,"),e.pre&&(r+="pre:true,"),e.component&&(r+='tag:"'.concat(e.tag,'",'));for(var i=0;i<t.dataGenFns.length;i++)r+=t.dataGenFns[i](e);if(e.attrs&&(r+="attrs:".concat(_u(e.attrs),",")),e.props&&(r+="domProps:".concat(_u(e.props),",")),e.events&&(r+="".concat(Vd(e.events,!1),",")),e.nativeEvents&&(r+="".concat(Vd(e.nativeEvents,!0),",")),e.slotTarget&&!e.slotScope&&(r+="slot:".concat(e.slotTarget,",")),e.scopedSlots&&(r+="".concat(cu(e,e.scopedSlots,t),",")),e.model&&(r+="model:{value:".concat(e.model.value,",callback:").concat(e.model.callback,",expression:").concat(e.model.expression,"},")),e.inlineTemplate){var o=su(e,t);o&&(r+="".concat(o,","))}return r=r.replace(/,$/,"")+"}",e.dynamicAttrs&&(r="_b(".concat(r,',"').concat(e.tag,'",').concat(_u(e.dynamicAttrs),")")),e.wrapData&&(r=e.wrapData(r)),e.wrapListeners&&(r=e.wrapListeners(r)),r}function au(e,t){var r=e.directives;if(r){var n,i,o,a,s="directives:[",c=!1;for(n=0,i=r.length;n<i;n++){o=r[n],a=!0;var l=t.directives[o.name];l&&(a=!!l(e,o,t.warn)),a&&(c=!0,s+='{name:"'.concat(o.name,'",rawName:"').concat(o.rawName,'"').concat(o.value?",value:(".concat(o.value,"),expression:").concat(JSON.stringify(o.value)):"").concat(o.arg?",arg:".concat(o.isDynamicArg?o.arg:'"'.concat(o.arg,'"')):"").concat(o.modifiers?",modifiers:".concat(JSON.stringify(o.modifiers)):"","},"))}return c?s.slice(0,-1)+"]":void 0}}function su(e,t){var r=e.children[0];if(r&&1===r.type){var n=Xd(r,t.options);return"inlineTemplate:{render:function(){".concat(n.render,"},staticRenderFns:[").concat(n.staticRenderFns.map((function(e){return"function(){".concat(e,"}")})).join(","),"]}")}}function cu(e,t,r){var n=e.for||Object.keys(t).some((function(e){var r=t[e];return r.slotTargetDynamic||r.if||r.for||du(r)})),i=!!e.if;if(!n){var o=e.parent;while(o){if(o.slotScope&&o.slotScope!==$l||o.for){n=!0;break}o.if&&(i=!0),o=o.parent}}var a=Object.keys(t).map((function(e){return uu(t[e],r)})).join(",");return"scopedSlots:_u([".concat(a,"]").concat(n?",null,true":"").concat(!n&&i?",null,false,".concat(lu(a)):"",")")}function lu(e){var t=5381,r=e.length;while(r)t=33*t^e.charCodeAt(--r);return t>>>0}function du(e){return 1===e.type&&("slot"===e.tag||e.children.some(du))}function uu(e,t){var r=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!r)return ru(e,t,uu,"null");if(e.for&&!e.forProcessed)return iu(e,t,uu);var n=e.slotScope===$l?"":String(e.slotScope),i="function(".concat(n,"){")+"return ".concat("template"===e.tag?e.if&&r?"(".concat(e.if,")?").concat(hu(e,t)||"undefined",":undefined"):hu(e,t)||"undefined":Zd(e,t),"}"),o=n?"":",proxy:true";return"{key:".concat(e.slotTarget||'"default"',",fn:").concat(i).concat(o,"}")}function hu(e,t,r,n,i){var o=e.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=r?t.maybeComponent(a)?",1":",0":"";return"".concat((n||Zd)(a,t)).concat(s)}var c=r?fu(o,t.maybeComponent):0,l=i||vu;return"[".concat(o.map((function(e){return l(e,t)})).join(","),"]").concat(c?",".concat(c):"")}}function fu(e,t){for(var r=0,n=0;n<e.length;n++){var i=e[n];if(1===i.type){if(pu(i)||i.ifConditions&&i.ifConditions.some((function(e){return pu(e.block)}))){r=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(r=1)}}return r}function pu(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function vu(e,t){return 1===e.type?Zd(e,t):3===e.type&&e.isComment?gu(e):mu(e)}function mu(e){return"_v(".concat(2===e.type?e.expression:wu(JSON.stringify(e.text)),")")}function gu(e){return"_e(".concat(JSON.stringify(e.text),")")}function yu(e,t){var r=e.slotName||'"default"',n=hu(e,t),i="_t(".concat(r).concat(n?",function(){return ".concat(n,"}"):""),o=e.attrs||e.dynamicAttrs?_u((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:x(e.name),value:e.value,dynamic:e.dynamic}}))):null,a=e.attrsMap["v-bind"];return!o&&!a||n||(i+=",null"),o&&(i+=",".concat(o)),a&&(i+="".concat(o?"":",null",",").concat(a)),i+")"}function bu(e,t,r){var n=t.inlineTemplate?null:hu(t,r,!0);return"_c(".concat(e,",").concat(ou(t,r)).concat(n?",".concat(n):"",")")}function _u(e){for(var t="",r="",n=0;n<e.length;n++){var i=e[n],o=wu(i.value);i.dynamic?r+="".concat(i.name,",").concat(o,","):t+='"'.concat(i.name,'":').concat(o,",")}return t="{".concat(t.slice(0,-1),"}"),r?"_d(".concat(t,",[").concat(r.slice(0,-1),"])"):t}function wu(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function Su(e,t){try{return new Function(e)}catch(r){return t.push({err:r,code:e}),F}}function Eu(e){var t=Object.create(null);return function(r,n,i){n=N({},n);n.warn;delete n.warn;var o=n.delimiters?String(n.delimiters)+r:r;if(t[o])return t[o];var a=e(r,n);var s={},c=[];return s.render=Su(a.render,c),s.staticRenderFns=a.staticRenderFns.map((function(e){return Su(e,c)})),t[o]=s}}function ku(e){return function(t){function r(r,n){var i=Object.create(t),o=[],a=[],s=function(e,t,r){(r?a:o).push(e)};if(n)for(var c in n.modules&&(i.modules=(t.modules||[]).concat(n.modules)),n.directives&&(i.directives=N(Object.create(t.directives||null),n.directives)),n)"modules"!==c&&"directives"!==c&&(i[c]=n[c]);i.warn=s;var l=e(r.trim(),i);return l.errors=o,l.tips=a,l}return{compile:r,compileToFunctions:Eu(r)}}}var Iu,Cu=ku((function(e,t){var r=Gl(e.trim(),t);!1!==t.optimize&&Od(r,t);var n=Xd(r,t);return{ast:r,render:n.render,staticRenderFns:n.staticRenderFns}})),Tu=Cu(Rd),Ru=Tu.compileToFunctions;function xu(e){return Iu=Iu||document.createElement("div"),Iu.innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',Iu.innerHTML.indexOf("&#10;")>0}var Ou=!!ne&&xu(!1),Mu=!!ne&&xu(!0),Au=T((function(e){var t=Jo(e);return t&&t.innerHTML})),Pu=so.prototype.$mount;function Du(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}so.prototype.$mount=function(e,t){if(e=e&&Jo(e),e===document.body||e===document.documentElement)return this;var r=this.$options;if(!r.render){var n=r.template;if(n)if("string"===typeof n)"#"===n.charAt(0)&&(n=Au(n));else{if(!n.nodeType)return this;n=n.innerHTML}else e&&(n=Du(e));if(n){0;var i=Ru(n,{outputSourceRange:!1,shouldDecodeNewlines:Ou,shouldDecodeNewlinesForHref:Mu,delimiters:r.delimiters,comments:r.comments},this),o=i.render,a=i.staticRenderFns;r.render=o,r.staticRenderFns=a}}return Pu.call(this,e,t)},so.compile=Ru}.call(this,n("c8ba"))},a04b:function(e,t,r){"use strict";var n=r("c04ea"),i=r("d9b5");e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},a099:function(e,t,r){t.pbkdf2=r("206d"),t.pbkdf2Sync=r("e07b")},a201:function(e,t,r){"use strict";r.r(t);var n=r("2c64");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},a204:function(e,t,r){"use strict";r.r(t);var n=r("2f30");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},a255:function(e,t,r){var n=r("3fb5"),i=r("b672"),o=r("8707").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function c(){this.init(),this._w=s,i.call(this,64,56)}function l(e,t,r){return r^e&(t^r)}function d(e,t,r){return e&t|r&(e|t)}function u(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function p(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}n(c,i),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,c=0|this._f,v=0|this._g,m=0|this._h,g=0;g<16;++g)t[g]=e.readInt32BE(4*g);for(;g<64;++g)t[g]=p(t[g-2])+t[g-7]+f(t[g-15])+t[g-16]|0;for(var y=0;y<64;++y){var b=m+h(s)+l(s,c,v)+a[y]+t[y]|0,_=u(r)+d(r,n,i)|0;m=v,v=c,c=s,s=o+b|0,o=i,i=n,n=r,r=b+_|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0,this._f=c+this._f|0,this._g=v+this._g|0,this._h=m+this._h|0},c.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},a258:function(e,t,r){"use strict";var n=r("0366"),i=r("44ad"),o=r("7b0b"),a=r("07fa"),s=function(e){var t=1===e;return function(r,s,c){var l,d,u=o(r),h=i(u),f=a(h),p=n(s,c);while(f-- >0)if(l=h[f],d=p(l,f,u),d)switch(e){case 0:return l;case 1:return f}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},a2a7:function(e,t,r){"use strict";r.r(t),r.d(t,"makeHtmlMessage",(function(){return h})),r.d(t,"makeHtmlNotice",(function(){return f})),r.d(t,"makeHtmlEmote",(function(){return p})),r.d(t,"makeTextMessage",(function(){return v})),r.d(t,"makeNotice",(function(){return m})),r.d(t,"makeEmoteMessage",(function(){return g})),r.d(t,"getTextForLocationEvent",(function(){return y})),r.d(t,"makeLocationContent",(function(){return b})),r.d(t,"parseLocationEvent",(function(){return _})),r.d(t,"makeTopicContent",(function(){return w})),r.d(t,"parseTopicContent",(function(){return S})),r.d(t,"makeBeaconInfoContent",(function(){return E})),r.d(t,"parseBeaconInfoContent",(function(){return k})),r.d(t,"makeBeaconContent",(function(){return I})),r.d(t,"parseBeaconContent",(function(){return C}));var n=r("9523"),i=r.n(n),o=r("60af"),a=r("c009"),s=r("2370"),c=r("cc89"),l=r("60b4");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return{msgtype:o["e"].Text,format:"org.matrix.custom.html",body:e,formatted_body:t}}function f(e,t){return{msgtype:o["e"].Notice,format:"org.matrix.custom.html",body:e,formatted_body:t}}function p(e,t){return{msgtype:o["e"].Emote,format:"org.matrix.custom.html",body:e,formatted_body:t}}function v(e){return{msgtype:o["e"].Text,body:e}}function m(e){return{msgtype:o["e"].Notice,body:e}}function g(e){return{msgtype:o["e"].Emote,body:e}}var y=(e,t,r,n)=>{var i="at ".concat(new Date(r).toISOString()),o=t===c["a"].Self?"User":void 0,a=n?'"'.concat(n,'"'):void 0;return[o,"Location",a,e,i].filter(Boolean).join(" ")},b=(e,t,r,n,i)=>{var s=null!==e&&void 0!==e?e:y(t,i||c["a"].Self,r,n),l=r?{[c["d"].name]:r}:{};return u({msgtype:o["e"].Location,body:s,geo_uri:t,[c["c"].name]:{description:n,uri:t},[c["b"].name]:{type:i||c["a"].Self},[a["c"].name]:s},l)},_=e=>{var t,r,n=c["c"].findIn(e),i=c["b"].findIn(e),o=c["d"].findIn(e),s=a["c"].findIn(e),l=null!==(t=null===n||void 0===n?void 0:n.uri)&&void 0!==t?t:null===e||void 0===e?void 0:e.geo_uri,d=null===n||void 0===n?void 0:n.description,u=null!==(r=null===i||void 0===i?void 0:i.type)&&void 0!==r?r:c["a"].Self,h=null!==s&&void 0!==s?s:e.body;return b(h,l,null!==o&&void 0!==o?o:void 0,d,u)},w=(e,t)=>{var r=[{body:e,mimetype:"text/plain"}];return Object(s["a"])(t)&&r.push({body:t,mimetype:"text/html"}),{topic:e,[l["a"].name]:r}},S=e=>{var t,r,n,i=l["a"].findIn(e);if(!Array.isArray(i))return{text:e.topic};var o=null!==(t=null===i||void 0===i||null===(r=i.find(e=>!Object(s["a"])(e.mimetype)||"text/plain"===e.mimetype))||void 0===r?void 0:r.body)&&void 0!==t?t:e.topic,a=null===i||void 0===i||null===(n=i.find(e=>"text/html"===e.mimetype))||void 0===n?void 0:n.body;return{text:o,html:a}},E=(e,t,r,n,i)=>({description:r,timeout:e,live:t,[c["d"].name]:i||Date.now(),[c["b"].name]:{type:null!==n&&void 0!==n?n:c["a"].Self}}),k=e=>{var t,{description:r,timeout:n,live:i}=e,o=null!==(t=c["d"].findIn(e))&&void 0!==t?t:void 0,a=c["b"].findIn(e);return{description:r,timeout:n,live:i,assetType:null===a||void 0===a?void 0:a.type,timestamp:o}},I=(e,t,r,n)=>({[c["c"].name]:{description:n,uri:e},[c["d"].name]:t,"m.relates_to":{rel_type:a["d"].name,event_id:r}}),C=e=>{var t,r=c["c"].findIn(e),n=null!==(t=c["d"].findIn(e))&&void 0!==t?t:void 0;return{description:null===r||void 0===r?void 0:r.description,uri:null===r||void 0===r?void 0:r.uri,timestamp:n}}},a2bc:function(e,t,r){var n=r("6b63");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("7a549de4",n,e)}},a306:function(e){e.exports=JSON.parse('{"caption":{"create":"Create","addPublicChatName":"Add Public Chat Name","addGroupNamePlaceHolder":"Add Group Name","createPublicChat":"Create public chat","publicRoomTitle":"Public Room Preview","chatTopic":"Topic renamed","asModerator":"as moderator","marked":"marked","unmarked":"unmarked","removeBan":"Remove Ban","cancelModeration":"Remove moderation","uploadFiles":"Subir archivos","header":"cabecera","dragAndDropAFile":"Arrastrar y soltar archivo","chatInvite":"Te han invitado a chatear con:","cantJoin":"No puedes unirte al chat con:","chatInviteDecline":"Puedes unirte al chat o rechazar la invitación","creatorLeft":"Porque el creador dejó la sala","encrypted":"Cifrado","noImages":"Todavía no hay imágenes en este chat","noFiles":"Todavía no hay files en este chat","inviteUser":"Invitar a un usuario","invite":"Invitar","add":"Añadir","mute":"Mute","unmute":"Unmute","leave":"Dejar","Info":"Info","new":"New","typing":"typing","accNotFound":"Su registro está en curso, por favor espere...","emptyList":"La lista está vacía ( filtrada o simplemente vacía )","welcome":"Bienvenido al chat","startNewChat":"Iniciar un nuevo chat","chats":"Chats","shareWith":"Compartir con","newChat":"Nuevo chat","moveToChat":"Mover al chat","queryNoResults":"La consulta no reporta resultados","needMoreCharacters":"Necesita más caracteres para el resultado","createGroup":"Crear grupo","unabletoDecrypt":"* Imposible descifrar","messageDeleted":"Mensaje eliminado","sentImage":"Imagen enviada","sentVoiceMessage":"envió un mensaje de voz","invitationToChat":"Invitación al chat","invitationToRoom":"Invitation to room","leftChat":"abandonó el chat","joined":"unido","chatRenamed":"Chat renombrado a ","recentComment":"Comentario reciente:","share":"SHARE","followers":"Seguidores:","reputation":"Reputación:","following":"Following:","theme":"Tema:","contacts":"Contactos","other":"Búsqueda global","phoneContacts":"Contactos telefónicos","chooseInviteMedia":"Por favor, elige cómo quieres invitar:","admin":"Admin","moderator":"Moderador","videocall":"Videollamada","call":"Llamada","leaveAndDelete":"Dejar y borrar","donate":"Donar","makeModerator":"Hacer Moderador","ban":"Ban","kick":"Kick","members":"Miembros","media":"Media","files":"Files","contactsList":"Lista de contactos","send":"send","pageCaption":"Título de la página","caption":"Caption","text":"text","placeholder":"placeholder","sendTransactionTo":"Enviar transacción a","toBePaidByReceiver":"A pagar por el receptor","toBePaidBySender":"A pagar por el remitente","source":"Fuente","amount":"Importe","receiver":"Receptor","message":"Mensaje","includeFeesInAmount":"Incluir tasas en el importe","transactionFees":"Tasas de transacción","totalAmount":"Importe total","balanceTooLow":"Saldo demasiado bajo","transactionError":"Error, no se puede realizar la transacción","calculateFees":"Calculate Fees","startChatWith":"Iniciar chat con","searchResult":"Resultado de la búsqueda","joinedInTheChat":"unido en el chat","invited":"invitado","hasInvited":"invitado ","inTheChat":"en el chat","banned":"prohibido","andRoom":"y sala","left":"izquierda","theChat":"el chat","made":"made","aModerator":" un moderador","editedChatNameTo ":"editado el nombre del chat a ","somebody":"alguien","sent":"enviado","PKOINto":"PKOIN to","response":"Respuesta","messagefrom":"Mensaje reenviado de","edited":"Editado","settings":"Ajustes","unauthorized":"No autorizado","search":"Buscar","replyOnMessage":"Respuesta en mensaje","editMessage":"Editar mensaje","inviteFriend":"Invitar a amigos","emptyContactList":"La lista de contactos está vacía","joinApp":"Unirse a Pocketnet","hasInvitedToJoin":"te ha invitado a unirte a Pocketnet","contactsempty":"Todavía no tienes contactos, encuéntralos en la búsqueda","chatsearchingempty":"No chats found for the specified filter","sendmessage":"Send message","you":"You","sentfile":"sent file:","administrators":"Dueño","moderators":"Moderadores","participants":"Participantes","streamChat":"Transmitir chat","membersList":"Lista de miembros","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"Email","refillNamePlaceholder":"Refill name"},"message":{},"button":{"starChatButton":"Iniciar chat","decline":"Declinar","declineandignore":"Ignorar usuario","join":"Unase","ok":"Ok","save":"ahorrar","copy":"Copiar","forward":"Adelante","delete":"Borrar","resend":"Resend","reply":"Responder","share":"Compartir","download":"Descargar","downloaded":"Descargado","goToPocketnetProfile":"Ir al perfil de Pocketnet","sendFile":"Enviar archivo","takePhotoOrVideo":"Enviar imagen","sendCoins":"Enviar monedas","edit":"Editar","select":"Seleccione","block":"Bloquear","unblock":"Desbloquear","blockUser":"Bloquear usuario","Complain":"Quejarse","chat":"Charlar","donations":"Donaciones"},"yes":"sí","cancel":"Cancelar","teamMessages":{"1-title":"¡Bienvenido al chat privado!","1-list1":"Mensajería privada que NO está conectada a tu número de teléfono","1-list2":"Cifrado de extremo a extremo de cada conversación 1 a 1 por defecto","1-list3":"Todas las imágenes enviadas o recibidas a través del chat se almacenan encriptadas","1-list4":"El historial de mensajes se guarda sólo durante 7 días","2-title":"¡Un gran anuncio!","2-message1":"Recientemente hemos lanzado las siguientes actualizaciones importantes:","2-list1":"Mensajería privada encriptada no conectada a tu número de teléfono","2-list2":"Posibilidad de donar PKOIN a los bloggers","2-list3":"Vídeo y transmisión en directo","2-message2":"Invita a tus amigos ahora y forma parte del gran futuro de la Internet descentralizada!","2-button":"Invitar a los amigos"},"error_generic":"Something went wrong, please try again later.","sendingerror":"An error occurred while sending the message","details":"Details","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found"}')},a395:function(e,t,r){var n=r("7037")["default"],i=r("e50d");function o(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},a3ba:function(e,t,r){"use strict";r.r(t);var n=r("ac95");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},a448:function(e,t,r){e.exports=r("6dd6")},a45a:function(e,t,r){var n=r("1b71");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("354273b2",n,e)}},a593:function(e,t,r){"use strict";var n=r("651d"),i=r("044b"),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function s(e){return"[object ArrayBuffer]"===o.call(e)}function c(e){return"undefined"!==typeof FormData&&e instanceof FormData}function l(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function d(e){return"string"===typeof e}function u(e){return"number"===typeof e}function h(e){return"undefined"===typeof e}function f(e){return null!==e&&"object"===typeof e}function p(e){return"[object Date]"===o.call(e)}function v(e){return"[object File]"===o.call(e)}function m(e){return"[object Blob]"===o.call(e)}function g(e){return"[object Function]"===o.call(e)}function y(e){return f(e)&&g(e.pipe)}function b(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function _(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function S(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function E(){var e={};function t(t,r){"object"===typeof e[r]&&"object"===typeof t?e[r]=E(e[r],t):e[r]=t}for(var r=0,n=arguments.length;r<n;r++)S(arguments[r],t);return e}function k(e,t,r){return S(t,(function(t,i){e[i]=r&&"function"===typeof t?n(t,r):t})),e}e.exports={isArray:a,isArrayBuffer:s,isBuffer:i,isFormData:c,isArrayBufferView:l,isString:d,isNumber:u,isObject:f,isUndefined:h,isDate:p,isFile:v,isBlob:m,isFunction:g,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:w,forEach:S,merge:E,extend:k,trim:_}},a5f6:function(e,t,r){var n=r("4327");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("ca03dfe8",n,e)}},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},a645:function(e,t,r){"use strict";e.exports=Error},a74c:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s}));var n=r("9523"),i=r.n(n);class o{constructor(e,t){if(this.stable=e,this.unstable=t,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}get name(){return this.stable?this.stable:this.unstable}get altName(){return this.stable?this.unstable:null}get names(){var e=[this.name],t=this.altName;return t&&e.push(t),e}matches(e){return this.name===e||this.altName===e}findIn(e){var t=void 0;return this.name&&(t=null===e||void 0===e?void 0:e[this.name]),!t&&this.altName&&(t=null===e||void 0===e?void 0:e[this.altName]),t}includedIn(e){var t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}class a extends o{constructor(){super(...arguments),i()(this,"preferUnstable",!1)}setPreferUnstable(e){this.preferUnstable=e}get name(){return this.stable&&!this.preferUnstable?this.stable:this.unstable}}class s extends o{constructor(e,t){if(super(e,t),!this.unstable)throw new Error("Unstable value must be supplied")}get name(){return this.unstable}get altName(){return this.stable}}},a788:function(t,r,n){"use strict";n.d(r,"a",(function(){return g}));var i,o=n("c973"),a=n.n(o),s=n("9523"),c=n.n(s),l=n("5b5f"),d=n("e1d9"),u=n("9d2e"),h=n("75c9"),f=n("aab2"),p=n("b83f"),v=n("936a"),m=n("31f5");(function(e){e[e["NotTracked"]=0]="NotTracked",e[e["PendingDownload"]=1]="PendingDownload",e[e["DownloadInProgress"]=2]="DownloadInProgress",e[e["UpToDate"]=3]="UpToDate"})(i||(i={}));class g extends v["b"]{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;super(),this.cryptoStore=t,this.keyDownloadChunkSize=n,c()(this,"devices",{}),c()(this,"crossSigningInfo",{}),c()(this,"userByIdentityKey",{}),c()(this,"deviceTrackingStatus",{}),c()(this,"syncToken",null),c()(this,"keyDownloadsInProgressByUser",new Map),c()(this,"dirty",!1),c()(this,"savePromise",null),c()(this,"resolveSavePromise",null),c()(this,"savePromiseTime",null),c()(this,"saveTimer",null),c()(this,"hasFetched",null),c()(this,"serialiser",void 0),this.serialiser=new y(e,r,this)}load(){var e=this;return a()((function*(){for(var t of(yield e.cryptoStore.doTxn("readonly",[f["a"].STORE_DEVICE_DATA],t=>{e.cryptoStore.getEndToEndDeviceData(t,t=>{var r;for(var n of(e.hasFetched=Boolean(null===t||void 0===t?void 0:t.devices),e.devices=t?t.devices:{},e.crossSigningInfo=t&&t.crossSigningInfo||{},e.deviceTrackingStatus=t?t.trackingStatus:{},e.syncToken=null!==(r=null===t||void 0===t?void 0:t.syncToken)&&void 0!==r?r:null,e.userByIdentityKey={},Object.keys(e.devices))){var i=e.devices[n];for(var o of Object.keys(i)){var a=i[o].keys["curve25519:"+o];void 0!==a&&(e.userByIdentityKey[a]=n)}}})}),Object.keys(e.deviceTrackingStatus)))e.deviceTrackingStatus[t]==i.DownloadInProgress&&(e.deviceTrackingStatus[t]=i.PendingDownload)}))()}stop(){null!==this.saveTimer&&clearTimeout(this.saveTimer)}saveIfDirty(){var e=arguments,t=this;return a()((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:500;if(!t.dirty)return Promise.resolve(!1);var n=Date.now()+r;t.savePromiseTime&&n<t.savePromiseTime&&(clearTimeout(t.saveTimer),t.saveTimer=null,t.savePromiseTime=null);var i=t.savePromise;if(null===i&&(i=new Promise(e=>{t.resolveSavePromise=e}),t.savePromise=i),null===t.saveTimer){var o=t.resolveSavePromise;t.savePromiseTime=n,t.saveTimer=setTimeout(()=>{l["b"].log("Saving device tracking data",t.syncToken),t.savePromiseTime=null,t.saveTimer=null,t.savePromise=null,t.resolveSavePromise=null,t.cryptoStore.doTxn("readwrite",[f["a"].STORE_DEVICE_DATA],e=>{var r;t.cryptoStore.storeEndToEndDeviceData({devices:t.devices,crossSigningInfo:t.crossSigningInfo,trackingStatus:t.deviceTrackingStatus,syncToken:null!==(r=t.syncToken)&&void 0!==r?r:void 0},e)}).then(()=>{t.dirty=!1,null===o||void 0===o||o(!0)},e=>{l["b"].error("Failed to save device tracking data",t.syncToken),l["b"].error(e)})},r)}return i}))()}getSyncToken(){return this.syncToken}setSyncToken(e){this.syncToken=e}downloadKeys(e,t){var r=[],n=[];if(e.forEach(e=>{var o=this.deviceTrackingStatus[e];this.keyDownloadsInProgressByUser.has(e)?(l["b"].log("downloadKeys: already have a download in progress for "+"".concat(e,": awaiting its result")),n.push(this.keyDownloadsInProgressByUser.get(e))):(t||o!=i.UpToDate)&&r.push(e)}),0!=r.length){l["b"].log("downloadKeys: downloading for",r);var o=this.doKeyDownload(r);n.push(o)}return 0===n.length&&l["b"].log("downloadKeys: already have all necessary keys"),Promise.all(n).then(()=>this.getDevicesFromStore(e))}getDevicesFromStore(e){var t=new Map;return e.forEach(e=>{var r,n=new Map;null===(r=this.getStoredDevicesForUser(e))||void 0===r||r.forEach((function(e){n.set(e.deviceId,e)})),t.set(e,n)}),t}getKnownUserIds(){return Object.keys(this.devices)}getStoredDevicesForUser(e){var t=this.devices[e];if(!t)return null;var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(d["a"].fromStorage(t[n],n));return r}getRawStoredDevicesForUser(e){return this.devices[e]}getStoredCrossSigningForUser(e){return this.crossSigningInfo[e]?u["a"].fromStorage(this.crossSigningInfo[e],e):null}storeCrossSigningForUser(e,t){this.crossSigningInfo[e]=t,this.dirty=!0}getStoredDevice(e,t){var r=this.devices[e];if(null!==r&&void 0!==r&&r[t])return d["a"].fromStorage(r[t],t)}getUserByIdentityKey(e,t){return e!==h["OLM_ALGORITHM"]&&e!==h["MEGOLM_ALGORITHM"]?null:this.userByIdentityKey[t]}getDeviceByIdentityKey(e,t){var r=this.getUserByIdentityKey(e,t);if(!r)return null;var n=this.devices[r];if(!n)return null;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];for(var a in o.keys)if(o.keys.hasOwnProperty(a)&&0===a.indexOf("curve25519:")){var s=o.keys[a];if(s==t)return d["a"].fromStorage(o,i)}}return null}storeDevicesForUser(e,t){this.setRawStoredDevicesForUser(e,t),this.dirty=!0}startTrackingDeviceList(e){if("string"!==typeof e)throw new Error("userId must be a string; was "+e);this.deviceTrackingStatus[e]||(l["b"].log("Now tracking device list for "+e),this.deviceTrackingStatus[e]=i.PendingDownload,this.dirty=!0)}stopTrackingDeviceList(e){this.deviceTrackingStatus[e]&&(l["b"].log("No longer tracking device list for "+e),this.deviceTrackingStatus[e]=i.NotTracked,this.dirty=!0)}stopTrackingAllDeviceLists(){for(var e of Object.keys(this.deviceTrackingStatus))this.deviceTrackingStatus[e]=i.NotTracked;this.dirty=!0}invalidateUserDeviceList(e){this.deviceTrackingStatus[e]&&(l["b"].log("Marking device list outdated for",e),this.deviceTrackingStatus[e]=i.PendingDownload,this.dirty=!0)}refreshOutdatedDeviceLists(){this.saveIfDirty();var e=[];for(var t of Object.keys(this.deviceTrackingStatus)){var r=this.deviceTrackingStatus[t];r==i.PendingDownload&&e.push(t)}return this.doKeyDownload(e)}setRawStoredDevicesForUser(e,t){if(void 0!==this.devices[e])for(var[r,n]of Object.entries(this.devices[e])){var i=n.keys["curve25519:"+r];delete this.userByIdentityKey[i]}for(var[o,a]of(this.devices[e]=t,Object.entries(t))){var s=a.keys["curve25519:"+o];this.userByIdentityKey[s]=e}}setRawStoredCrossSigningForUser(e,t){this.crossSigningInfo[e]=t}doKeyDownload(e){if(0===e.length)return Promise.resolve();var t=this.serialiser.updateDevicesForUsers(e,this.syncToken).then(()=>{r(!0)},t=>{throw l["b"].error("Error downloading keys for "+e+":",t),r(!1),t});e.forEach(e=>{this.keyDownloadsInProgressByUser.set(e,t);var r=this.deviceTrackingStatus[e];r==i.PendingDownload&&(this.deviceTrackingStatus[e]=i.DownloadInProgress)});var r=r=>{this.emit(m["b"].WillUpdateDevices,e,!this.hasFetched),e.forEach(e=>{if(this.dirty=!0,this.keyDownloadsInProgressByUser.get(e)===t){this.keyDownloadsInProgressByUser.delete(e);var n=this.deviceTrackingStatus[e];n==i.DownloadInProgress&&(r?(this.deviceTrackingStatus[e]=i.UpToDate,l["b"].log("Device list for",e,"now up to date")):this.deviceTrackingStatus[e]=i.PendingDownload)}else l["b"].log("Another update in the queue for",e,"- not marking up-to-date")}),this.saveIfDirty(),this.emit(m["b"].DevicesUpdated,e,!this.hasFetched),this.hasFetched=!0};return t}}class y{constructor(e,t,r){this.baseApis=e,this.olmDevice=t,this.deviceList=r,c()(this,"downloadInProgress",!1),c()(this,"keyDownloadsQueuedByUser",{}),c()(this,"queuedQueryDeferred",void 0),c()(this,"syncToken",void 0)}updateDevicesForUsers(e,t){return e.forEach(e=>{this.keyDownloadsQueuedByUser[e]=!0}),this.queuedQueryDeferred||(this.queuedQueryDeferred=Object(p["i"])()),this.syncToken=t,this.downloadInProgress?(l["b"].log("Queued key download for",e),this.queuedQueryDeferred.promise):this.doQueuedQueries()}doQueuedQueries(){var t=this;if(this.downloadInProgress)throw new Error("DeviceListUpdateSerialiser.doQueuedQueries called with request active");var r=Object.keys(this.keyDownloadsQueuedByUser);this.keyDownloadsQueuedByUser={};var n=this.queuedQueryDeferred;this.queuedQueryDeferred=void 0,l["b"].log("Starting key download for",r),this.downloadInProgress=!0;var i={};this.syncToken&&(i.token=this.syncToken);for(var o=[],s=function(){var e=r.slice(c,c+t.deviceList.keyDownloadChunkSize);o.push(()=>t.baseApis.downloadKeysForUsers(e,i))},c=0;c<r.length;c+=this.deviceList.keyDownloadChunkSize)s();return Object(p["e"])(o,3).then(function(){var n=a()((function*(n){var i=Object.assign({},...n.map(e=>e.device_keys||{})),o=Object.assign({},...n.map(e=>e.master_keys||{})),a=Object.assign({},...n.map(e=>e.self_signing_keys||{})),s=Object.assign({},...n.map(e=>e.user_signing_keys||{}));for(var c of r){yield Object(p["K"])(5);try{yield t.processQueryResponseForUser(c,i[c],{master:null===o||void 0===o?void 0:o[c],self_signing:null===a||void 0===a?void 0:a[c],user_signing:null===s||void 0===s?void 0:s[c]})}catch(e){l["b"].error("Error processing keys for ".concat(c,":"),e)}}}));return function(e){return n.apply(this,arguments)}}()).then(()=>{l["b"].log("Completed key download for "+r),this.downloadInProgress=!1,null===n||void 0===n||n.resolve(),this.queuedQueryDeferred&&this.doQueuedQueries()},e=>{l["b"].warn("Error downloading keys for "+r+":",e),this.downloadInProgress=!1,null===n||void 0===n||n.reject(e)}),n.promise}processQueryResponseForUser(e,t,r){var n=this;return a()((function*(){l["b"].log("got device keys for "+e+":",t),l["b"].log("got cross-signing keys for "+e+":",r);var i={},o=n.deviceList.getRawStoredDevicesForUser(e);o&&Object.keys(o).forEach(e=>{var t=d["a"].fromStorage(o[e],e);i[e]=t}),yield b(n.olmDevice,e,i,t||{},n.baseApis.getUserId(),n.baseApis.deviceId);var a={};if(Object.keys(i).forEach(e=>{a[e]=i[e].toStorage()}),n.deviceList.setRawStoredDevicesForUser(e,a),r&&(r.master||r.self_signing||r.user_signing)){var s=n.deviceList.getStoredCrossSigningForUser(e)||new u["a"](e);s.setKeys(r),n.deviceList.setRawStoredCrossSigningForUser(e,s.toStorage()),n.deviceList.emit(m["b"].UserCrossSigningUpdated,e)}}))()}}function b(e,t,r,n,i,o){return _.apply(this,arguments)}function _(){return _=a()((function*(e,t,r,n,i,o){var a=!1;for(var s in r)if(r.hasOwnProperty(s)&&!(s in n)){if(t===i&&s===o){l["b"].warn("Local device ".concat(s," missing from sync, skipping removal"));continue}l["b"].log("Device "+t+":"+s+" has been removed"),delete r[s],a=!0}for(var c in n)if(n.hasOwnProperty(c)){var d=n[c];d.user_id===t?d.device_id===c?(yield w(e,r,d))&&(a=!0):l["b"].warn("Mismatched device_id "+d.device_id+" in keys from "+t+":"+c):l["b"].warn("Mismatched user_id "+d.user_id+" in keys from "+t+":"+c)}return a})),_.apply(this,arguments)}function w(e,t,r){return S.apply(this,arguments)}function S(){return S=a()((function*(t,r,n){if(!n.keys)return!1;var i=n.device_id,o=n.user_id,a="ed25519:"+i,s=n.keys[a];if(!s)return l["b"].warn("Device "+o+":"+i+" has no ed25519 key"),!1;var c,u=n.unsigned||{},f=n.signatures||{};try{yield h["verifySignature"](t,n,o,i,s)}catch(e){return l["b"].warn("Unable to verify signature on device "+o+":"+i+":"+e),!1}if(i in r){if(c=r[i],c.getFingerprint()!=s)return l["b"].warn("Ed25519 key for device "+o+":"+i+" has changed"),!1}else r[i]=c=new d["a"](i);return c.keys=n.keys||{},c.algorithms=n.algorithms||[],c.unsigned=u,c.signatures=f,!0})),S.apply(this,arguments)}},a7bc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},a95b:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n=r("9523"),i=r.n(n),o=r("c973"),a=r.n(o),s=r("299a"),c=r("5b5f"),l=r("b83f"),d=r("2f36"),u=r("afe6"),h=r("480c"),f=r("9c88"),p=r("915e"),v=r("60af"),m=r("866a"),g=r("976c"),y=r("3925"),b=3;class _{constructor(e){this.crypto=e}name(){return"e2ee"}when(){return p["a"].PreProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){var t=this;return a()((function*(){e.device_lists&&(yield t.crypto.processDeviceLists(e.device_lists)),yield t.crypto.processKeyCounts(e.device_one_time_keys_count,e["device_unused_fallback_key_types"]||e["org.matrix.msc2732.device_unused_fallback_key_types"]),t.crypto.onSyncCompleted({})}))()}}class w{constructor(e,t){this.client=e,this.cryptoCallbacks=t,i()(this,"nextBatch",null)}name(){return"to_device"}when(){return p["a"].PreProcess}onRequest(e){var t={since:null!==this.nextBatch?this.nextBatch:void 0};return e&&(t["limit"]=100,t["enabled"]=!0),t}onResponse(e){var t=this;return a()((function*(){var r=[],n=e["events"]||[];n.length>0&&t.cryptoCallbacks&&(n=yield t.cryptoCallbacks.preprocessToDeviceMessages(n)),n.map(t.client.getEventMapper()).map(e=>{if("m.key.verification.cancel"===e.getType()){var t=e.getContent()["transaction_id"];t&&r.push(t)}return e}).forEach(e=>{var n=e.getContent();if("m.room.message"!=e.getType()||"m.bad.encrypted"!=n.msgtype){if("m.key.verification.start"===e.getType()||"m.key.verification.request"===e.getType()){var i=n["transaction_id"];r.includes(i)&&e.flagCancelled()}t.client.emit(u["b"].ToDeviceEvent,e)}else c["b"].log("Ignoring undecryptable to-device event from "+e.getSender())}),t.nextBatch=e.next_batch}))()}}class S{constructor(e){this.client=e}name(){return"account_data"}when(){return p["a"].PostProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){var t=this;return a()((function*(){for(var r in e.global&&e.global.length>0&&t.processGlobalAccountData(e.global),e.rooms){var n=T(t.client,r,e.rooms[r]),i=t.client.getRoom(r);i?(i.addAccountData(n),n.forEach(e=>{t.client.emit(u["b"].Event,e)})):c["b"].warn("got account data for room but room doesn't exist on client:",r)}}))()}processGlobalAccountData(e){var t=T(this.client,void 0,e),r=t.reduce((e,t)=>(e[t.getType()]=this.client.store.getAccountData(t.getType()),e),{});this.client.store.storeAccountDataEvents(t),t.forEach(e=>{if(e.getType()===v["b"].PushRules){var t=e.getContent();this.client.setPushRules(t)}var n=r[e.getType()];return this.client.emit(u["b"].AccountData,e,n),e})}}class E{constructor(e){this.client=e}name(){return"typing"}when(){return p["a"].PostProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){var t=this;return a()((function*(){if(null!==e&&void 0!==e&&e.rooms)for(var r in e.rooms)R(t.client,r,[e.rooms[r]])}))()}}class k{constructor(e){this.client=e}name(){return"receipts"}when(){return p["a"].PostProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){var t=this;return a()((function*(){if(null!==e&&void 0!==e&&e.rooms)for(var r in e.rooms)R(t.client,r,[e.rooms[r]])}))()}}class I{constructor(e,t,r,n){this.slidingSync=e,this.client=t,i()(this,"opts",void 0),i()(this,"syncOpts",void 0),i()(this,"syncState",null),i()(this,"syncStateData",void 0),i()(this,"lastPos",null),i()(this,"failCount",0),i()(this,"notifEvents",[]),this.opts=Object(h["e"])(r),this.syncOpts=Object(h["f"])(n),t.getNotifTimelineSet()&&t.reEmitter.reEmit(t.getNotifTimelineSet(),[s["d"].Timeline,s["d"].TimelineReset]),this.slidingSync.on(p["b"].Lifecycle,this.onLifecycle.bind(this)),this.slidingSync.on(p["b"].RoomData,this.onRoomData.bind(this));var o=[new w(this.client,this.syncOpts.cryptoCallbacks),new S(this.client),new E(this.client),new k(this.client)];this.syncOpts.crypto&&o.push(new _(this.syncOpts.crypto)),o.forEach(e=>{this.slidingSync.registerExtension(e)})}onRoomData(e,t){var r=this;return a()((function*(){var n=r.client.store.getRoom(e);if(!n){if(!t.initial)return void c["b"].debug("initial flag not set but no stored room exists for room ",e,t);n=Object(h["d"])(r.client,e,r.opts)}yield r.processRoomData(r.client,n,t)}))()}onLifecycle(e,t,r){switch(r&&c["b"].debug("onLifecycle",e,r),e){case p["c"].Complete:if(this.purgeNotifications(),!t)break;this.lastPos||this.updateSyncState(h["c"].Prepared,{oldSyncToken:void 0,nextSyncToken:t.pos,catchingUp:!1,fromCache:!1}),this.updateSyncState(h["c"].Syncing,{oldSyncToken:this.lastPos,nextSyncToken:t.pos,catchingUp:!1,fromCache:!1}),this.lastPos=t.pos;break;case p["c"].RequestFinished:if(r){if(this.failCount+=1,this.updateSyncState(this.failCount>b?h["c"].Error:h["c"].Reconnecting,{error:new f["f"](r)}),this.shouldAbortSync(new f["f"](r)))return}else this.failCount=0;break}}syncLeftRooms(){return a()((function*(){return[]}))()}peek(e){return a()((function*(){return null}))()}stopPeeking(){}setPresence(e){}getSyncState(){return this.syncState}getSyncStateData(){var e;return null!==(e=this.syncStateData)&&void 0!==e?e:null}createRoom(e){var{timelineSupport:t}=this.client,r=new s["c"](e,this.client,this.client.getUserId(),{lazyLoadMembers:this.opts.lazyLoadMembers,pendingEventOrdering:this.opts.pendingEventOrdering,timelineSupport:t});return this.client.reEmitter.reEmit(r,[s["d"].Name,s["d"].Redaction,s["d"].RedactionCancelled,s["d"].Receipt,s["d"].Tags,s["d"].LocalEchoUpdated,s["d"].AccountData,s["d"].MyMembership,s["d"].Timeline,s["d"].TimelineReset]),this.registerStateListeners(r),r}registerStateListeners(e){this.client.reEmitter.reEmit(e.currentState,[m["b"].Events,m["b"].Members,m["b"].NewMember,m["b"].Update]),e.currentState.on(m["b"].NewMember,(e,t,r)=>{var n;r.user=null!==(n=this.client.getUser(r.userId))&&void 0!==n?n:void 0,this.client.reEmitter.reEmit(r,[g["b"].Name,g["b"].Typing,g["b"].PowerLevel,g["b"].Membership])})}shouldAbortSync(e){return"M_UNKNOWN_TOKEN"===e.errcode&&(c["b"].warn("Token no longer valid - assuming logout"),this.stop(),this.updateSyncState(h["c"].Error,{error:e}),!0)}processRoomData(e,t,r){var n=this;return a()((function*(){r=C(e,t.roomId,r);var i=T(n.client,t.roomId,r.required_state),o=T(n.client,t.roomId,r.timeline,!1),c=[];if(r.initial){var h=new Set;t.getLiveTimeline().getEvents().forEach(e=>{h.add(e.getId())});for(var f=[],p=[],m=!1,g=o.length-1;g>=0;g--){var b=o[g];h.has(b.getId())?m=!0:m?f.push(b):p.unshift(b)}o=p,f.length>0&&t.addEventsToTimeline(f,!0,t.getLiveTimeline(),r.prev_batch)}var _,w=t.hasEncryptionStateEvent();if(null!=r.notification_count&&t.setUnreadNotificationCount(s["b"].Total,r.notification_count),null!=r.highlight_count&&(!w||w&&t.getUnreadNotificationCount(s["b"].Highlight)<=0)&&t.setUnreadNotificationCount(s["b"].Highlight,r.highlight_count),Number.isInteger(r.invited_count)&&t.currentState.setInvitedMemberCount(r.invited_count),Number.isInteger(r.joined_count)&&t.currentState.setJoinedMemberCount(r.joined_count),r.invite_state){var S=T(n.client,t.roomId,r.invite_state);return yield n.injectRoomEvents(t,S),r.initial&&(t.recalculate(),n.client.store.storeRoom(t),n.client.emit(u["b"].Room,t)),S.forEach(e=>{n.client.emit(u["b"].Event,e)}),void t.updateMyMembership(y["a"].Invite)}r.initial&&t.getLiveTimeline().setPaginationToken(null!==(_=r.prev_batch)&&void 0!==_?_:null,d["b"].BACKWARDS);yield n.injectRoomEvents(t,i,o,r.num_live),t.addEphemeralEvents(c),t.updateMyMembership(y["a"].Join),t.recalculate(),r.initial&&(e.store.storeRoom(t),e.emit(u["b"].Room,t)),n.addNotifications(o);var E=function(){var r=a()((function*(r){e.emit(u["b"].Event,r),r.isState()&&r.getType()==v["b"].RoomEncryption&&n.syncOpts.cryptoCallbacks&&(yield n.syncOpts.cryptoCallbacks.onCryptoEvent(t,r))}));return function(e){return r.apply(this,arguments)}}();yield Object(l["A"])(i,E),yield Object(l["A"])(o,E),c.forEach((function(t){e.emit(u["b"].Event,t)})),t.decryptCriticalEvents()}))()}injectRoomEvents(e,t,r,n){var i=this;return a()((function*(){r=r||[],t=t||[],n=n||0;var o=e.getLiveTimeline(),a=0==o.getEvents().length;if(a){for(var s of t)i.client.getPushActionsForEvent(s);o.initialiseState(t)}a||(e.oldState.setStateEvents(t),e.currentState.setStateEvents(t));var c=[];n>0&&(c=r.slice(-1*n),r=r.slice(0,-1*c.length)),yield e.addLiveEvents(r,{fromCache:!0}),c.length>0&&(yield e.addLiveEvents(c,{fromCache:!1})),e.recalculate(),i.resolveInvites(e)}))()}resolveInvites(e){if(e&&this.opts.resolveInvitesToProfiles){var t=this.client;e.getMembersWithMembership(y["a"].Invite).forEach((function(r){if(!r.requestedProfileInfo){r.requestedProfileInfo=!0;var n,i=t.getUser(r.userId);n=i?Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):t.getProfileInfo(r.userId),n.then((function(t){var n=r.events.member;n.getContent().membership===y["a"].Invite&&(n.getContent().avatar_url=t.avatar_url,n.getContent().displayname=t.displayname,r.setMembershipEvent(n,e.currentState))}),(function(e){}))}}))}}retryImmediately(){return!0}sync(){var e=this;return a()((function*(){c["b"].debug("Sliding sync init loop");while(!e.client.isGuest())try{c["b"].debug("Getting push rules...");var t=yield e.client.getPushRules();c["b"].debug("Got push rules"),e.client.pushRules=t;break}catch(r){if(c["b"].error("Getting push rules failed",r),e.shouldAbortSync(r))return}yield e.slidingSync.start()}))()}stop(){c["b"].debug("SyncApi.stop"),this.slidingSync.stop()}updateSyncState(e,t){var r=this.syncState;this.syncState=e,this.syncStateData=t,this.client.emit(u["b"].Sync,this.syncState,r,t)}addNotifications(e){if(this.client.getNotifTimelineSet())for(var t of e){var r=this.client.getPushActionsForEvent(t);r&&r.notify&&r.tweaks&&r.tweaks.highlight&&this.notifEvents.push(t)}}purgeNotifications(){this.notifEvents.sort((function(e,t){return e.getTs()-t.getTs()})),this.notifEvents.forEach(e=>{var t;null===(t=this.client.getNotifTimelineSet())||void 0===t||t.addLiveEvent(e)}),this.notifEvents=[]}}function C(e,t,r){if(!r.name)return r;for(var n of r.required_state)if(n.type===v["b"].RoomName&&""===n.state_key)return n.content={name:r.name},r;return r.required_state.push({event_id:"$fake-sliding-sync-name-event-"+t,state_key:"",type:v["b"].RoomName,content:{name:r.name},sender:e.getUserId(),origin_server_ts:(new Date).getTime()}),r}function T(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.getEventMapper({decrypt:n});return r.map((function(e){return e.room_id=t,i(e)}))}function R(e,t,r){var n=T(e,t,r),i=e.getRoom(t);i?(i.addEphemeralEvents(n),n.forEach(t=>{e.emit(u["b"].Event,t)})):c["b"].warn("got ephemeral events for room but room doesn't exist on client:",t)}},aa22:function(e,t,r){"use strict";var n=r("21e2").Buffer,i=n.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){if(!e)return"utf8";var t;while(1)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!==typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=v,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=m,this.end=g,t=3;break;default:return this.write=y,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function c(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function l(e,t,r){var n=t.length-1;if(n<r)return 0;var i=c(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=c(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=c(t[n]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function d(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"�"}}function u(e){var t=this.lastTotal-this.lastNeed,r=d(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){var r=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function p(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function v(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function m(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=f,s.prototype.text=h,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},aa4a:function(e,t,r){"use strict";var n=r("a593");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},aa69:function(e,t,r){"use strict";e.exports=o;var n=r("dcd0"),i=Object.create(r("3a7c"));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r("3fb5"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},aab2:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("5b5f"),c=r("b7b0"),l=r("d2bd"),d=r("06cb"),u=r("62a0"),h=r("813d"),f=r("ac24");class p{static exists(e,t){return h["a"](e,t)}static existsAndIsNotMigrated(e,t){return new Promise((r,n)=>{var i=!0,o=e.open(t);o.onupgradeneeded=()=>{i=!1},o.onblocked=()=>n(o.error),o.onsuccess=()=>{var a=o.result;if(i){var s=a.transaction([p.STORE_ACCOUNT],"readonly"),c=s.objectStore(p.STORE_ACCOUNT),l=c.get(f["a"]);l.onsuccess=()=>{var e,t=null!==(e=l.result)&&void 0!==e?e:f["b"].NOT_STARTED;r(t===f["b"].NOT_STARTED)},l.onerror=()=>{n(l.error)},a.close()}else a.close(),e.deleteDatabase(t),r(!1)},o.onerror=()=>n(o.error)})}constructor(e,t){this.indexedDB=e,this.dbName=t,a()(this,"backendPromise",void 0),a()(this,"backend",void 0)}containsData(){var e=this;return i()((function*(){return p.exists(e.indexedDB,e.dbName)}))()}startup(){return this.backendPromise||(this.backendPromise=new Promise((e,t)=>{if(this.indexedDB){s["b"].log("connecting to indexeddb ".concat(this.dbName));var r=this.indexedDB.open(this.dbName,d["b"]);r.onupgradeneeded=e=>{var t=r.result,n=e.oldVersion;d["c"](t,n)},r.onblocked=()=>{s["b"].log("can't yet open IndexedDBCryptoStore because it is open elsewhere")},r.onerror=e=>{s["b"].log("Error connecting to indexeddb",e),t(r.error)},r.onsuccess=()=>{var t=r.result;s["b"].log("connected to indexeddb ".concat(this.dbName)),e(new d["a"](t))}}else t(new Error("no indexeddb support available"))}).then(e=>e.doTxn("readonly",[p.STORE_INBOUND_GROUP_SESSIONS,p.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],t=>{e.getEndToEndInboundGroupSession("","",t,()=>{})}).then(()=>e)).catch(t=>{if("VersionError"===t.name)throw s["b"].warn("Crypto DB is too new for us to use!",t),new u["b"](u["c"].TooNew);s["b"].warn("unable to connect to indexeddb ".concat(this.dbName)+": falling back to localStorage store: ".concat(t));try{return new c["a"](e.localStorage)}catch(t){return s["b"].warn("unable to open localStorage: falling back to in-memory store: ".concat(t)),new l["a"]}}).then(e=>(this.backend=e,e))),this.backendPromise}deleteAllData(){return new Promise((e,t)=>{if(this.indexedDB){s["b"].log("Removing indexeddb instance: ".concat(this.dbName));var r=this.indexedDB.deleteDatabase(this.dbName);r.onblocked=()=>{s["b"].log("can't yet delete IndexedDBCryptoStore because it is open elsewhere")},r.onerror=e=>{s["b"].log("Error deleting data from indexeddb",e),t(r.error)},r.onsuccess=()=>{s["b"].log("Removed indexeddb instance: ".concat(this.dbName)),e()}}else t(new Error("no indexeddb support available"))}).catch(e=>{s["b"].warn("unable to delete IndexedDBCryptoStore: ".concat(e))})}getMigrationState(){return this.backend.getMigrationState()}setMigrationState(e){return this.backend.setMigrationState(e)}getOrAddOutgoingRoomKeyRequest(e){return this.backend.getOrAddOutgoingRoomKeyRequest(e)}getOutgoingRoomKeyRequest(e){return this.backend.getOutgoingRoomKeyRequest(e)}getOutgoingRoomKeyRequestByState(e){return this.backend.getOutgoingRoomKeyRequestByState(e)}getAllOutgoingRoomKeyRequestsByState(e){return this.backend.getAllOutgoingRoomKeyRequestsByState(e)}getOutgoingRoomKeyRequestsByTarget(e,t,r){return this.backend.getOutgoingRoomKeyRequestsByTarget(e,t,r)}updateOutgoingRoomKeyRequest(e,t,r){return this.backend.updateOutgoingRoomKeyRequest(e,t,r)}deleteOutgoingRoomKeyRequest(e,t){return this.backend.deleteOutgoingRoomKeyRequest(e,t)}getAccount(e,t){this.backend.getAccount(e,t)}storeAccount(e,t){this.backend.storeAccount(e,t)}getCrossSigningKeys(e,t){this.backend.getCrossSigningKeys(e,t)}getSecretStorePrivateKey(e,t,r){this.backend.getSecretStorePrivateKey(e,t,r)}storeCrossSigningKeys(e,t){this.backend.storeCrossSigningKeys(e,t)}storeSecretStorePrivateKey(e,t,r){this.backend.storeSecretStorePrivateKey(e,t,r)}countEndToEndSessions(e,t){this.backend.countEndToEndSessions(e,t)}getEndToEndSession(e,t,r,n){this.backend.getEndToEndSession(e,t,r,n)}getEndToEndSessions(e,t,r){this.backend.getEndToEndSessions(e,t,r)}getAllEndToEndSessions(e,t){this.backend.getAllEndToEndSessions(e,t)}storeEndToEndSession(e,t,r,n){this.backend.storeEndToEndSession(e,t,r,n)}storeEndToEndSessionProblem(e,t,r){return this.backend.storeEndToEndSessionProblem(e,t,r)}getEndToEndSessionProblem(e,t){return this.backend.getEndToEndSessionProblem(e,t)}filterOutNotifiedErrorDevices(e){return this.backend.filterOutNotifiedErrorDevices(e)}countEndToEndInboundGroupSessions(){return this.backend.countEndToEndInboundGroupSessions()}getEndToEndSessionsBatch(){return this.backend.getEndToEndSessionsBatch()}deleteEndToEndSessionsBatch(e){return this.backend.deleteEndToEndSessionsBatch(e)}getEndToEndInboundGroupSession(e,t,r,n){this.backend.getEndToEndInboundGroupSession(e,t,r,n)}getAllEndToEndInboundGroupSessions(e,t){this.backend.getAllEndToEndInboundGroupSessions(e,t)}addEndToEndInboundGroupSession(e,t,r,n){this.backend.addEndToEndInboundGroupSession(e,t,r,n)}storeEndToEndInboundGroupSession(e,t,r,n){this.backend.storeEndToEndInboundGroupSession(e,t,r,n)}storeEndToEndInboundGroupSessionWithheld(e,t,r,n){this.backend.storeEndToEndInboundGroupSessionWithheld(e,t,r,n)}getEndToEndInboundGroupSessionsBatch(){return this.backend.getEndToEndInboundGroupSessionsBatch()}deleteEndToEndInboundGroupSessionsBatch(e){return this.backend.deleteEndToEndInboundGroupSessionsBatch(e)}storeEndToEndDeviceData(e,t){this.backend.storeEndToEndDeviceData(e,t)}getEndToEndDeviceData(e,t){this.backend.getEndToEndDeviceData(e,t)}storeEndToEndRoom(e,t,r){this.backend.storeEndToEndRoom(e,t,r)}getEndToEndRooms(e,t){this.backend.getEndToEndRooms(e,t)}getSessionsNeedingBackup(e){return this.backend.getSessionsNeedingBackup(e)}countSessionsNeedingBackup(e){return this.backend.countSessionsNeedingBackup(e)}unmarkSessionsNeedingBackup(e,t){return this.backend.unmarkSessionsNeedingBackup(e,t)}markSessionsNeedingBackup(e,t){return this.backend.markSessionsNeedingBackup(e,t)}addSharedHistoryInboundGroupSession(e,t,r,n){this.backend.addSharedHistoryInboundGroupSession(e,t,r,n)}getSharedHistoryInboundGroupSessions(e,t){return this.backend.getSharedHistoryInboundGroupSessions(e,t)}addParkedSharedHistory(e,t,r){this.backend.addParkedSharedHistory(e,t,r)}takeParkedSharedHistory(e,t){return this.backend.takeParkedSharedHistory(e,t)}doTxn(e,t,r,n){return this.backend.doTxn(e,t,r,n)}}a()(p,"STORE_ACCOUNT","account"),a()(p,"STORE_SESSIONS","sessions"),a()(p,"STORE_INBOUND_GROUP_SESSIONS","inbound_group_sessions"),a()(p,"STORE_INBOUND_GROUP_SESSIONS_WITHHELD","inbound_group_sessions_withheld"),a()(p,"STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS","shared_history_inbound_group_sessions"),a()(p,"STORE_PARKED_SHARED_HISTORY","parked_shared_history"),a()(p,"STORE_DEVICE_DATA","device_data"),a()(p,"STORE_ROOMS","rooms"),a()(p,"STORE_BACKUP","sessions_needing_backup")}).call(this,r("c8ba"))},ab36:function(e,t,r){"use strict";var n=r("861d"),i=r("9112");e.exports=function(e,t){n(t)&&"cause"in t&&i(e,"cause",t.cause)}},ab64:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},ab82:function(e,t,r){var n=r("7018");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("235670b5",n,e)}},ac24:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o}));var n,i="migrationState";(function(e){e[e["NOT_STARTED"]=0]="NOT_STARTED",e[e["INITIAL_DATA_MIGRATED"]=1]="INITIAL_DATA_MIGRATED",e[e["OLM_SESSIONS_MIGRATED"]=2]="OLM_SESSIONS_MIGRATED",e[e["MEGOLM_SESSIONS_MIGRATED"]=3]="MEGOLM_SESSIONS_MIGRATED",e[e["ROOM_SETTINGS_MIGRATED"]=4]="ROOM_SETTINGS_MIGRATED",e[e["INITIAL_OWN_KEY_QUERY_DONE"]=5]="INITIAL_OWN_KEY_QUERY_DONE"})(n||(n={}));var o=50},ac68:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenIDRequestState=void 0;var n=function(e){return e["Allowed"]="allowed",e["Blocked"]="blocked",e["PendingUserConfirmation"]="request",e}({});t.OpenIDRequestState=n},ac71:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoConferenceCapabilities=t.StickerpickerCapabilities=t.MatrixCapabilities=void 0,t.getTimelineRoomIDFromCapability=c,t.isTimelineCapability=a,t.isTimelineCapabilityFor=s;var n=function(e){return e["Screenshots"]="m.capability.screenshot",e["StickerSending"]="m.sticker",e["AlwaysOnScreen"]="m.always_on_screen",e["RequiresClient"]="io.element.requires_client",e["MSC2931Navigate"]="org.matrix.msc2931.navigate",e["MSC3846TurnServers"]="town.robin.msc3846.turn_servers",e["MSC3973UserDirectorySearch"]="org.matrix.msc3973.user_directory_search",e["MSC4039UploadFile"]="org.matrix.msc4039.upload_file",e["MSC4039DownloadFile"]="org.matrix.msc4039.download_file",e["MSC4157SendDelayedEvent"]="org.matrix.msc4157.send.delayed_event",e["MSC4157UpdateDelayedEvent"]="org.matrix.msc4157.update_delayed_event",e}({});t.MatrixCapabilities=n;var i=[n.StickerSending];t.StickerpickerCapabilities=i;var o=[n.AlwaysOnScreen];function a(e){return null===e||void 0===e?void 0:e.startsWith("org.matrix.msc2762.timeline:")}function s(e,t){return e==="org.matrix.msc2762.timeline:".concat(t)}function c(e){return e.substring(e.indexOf(":")+1)}t.VideoConferenceCapabilities=o},ac95:function(e,t,r){var n=r("1fc7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("7c212c1b",n,e)}},ad71:function(e,t,r){"use strict";(function(t,n){var i;e.exports=x,x.ReadableState=R;r("faa1").EventEmitter;var o=function(e,t){return e.listeners(t).length},a=r("429b"),s=r("b639").Buffer,c=("undefined"!==typeof t?t:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function l(e){return s.from(e)}function d(e){return s.isBuffer(e)||e instanceof c}var u,h=r(0);u=h&&h.debuglog?h.debuglog("stream"):function(){};var f,p,v,m=r("c6ae"),g=r("4681"),y=r("0db6"),b=y.getHighWaterMark,_=r("c9b8").codes,w=_.ERR_INVALID_ARG_TYPE,S=_.ERR_STREAM_PUSH_AFTER_EOF,E=_.ERR_METHOD_NOT_IMPLEMENTED,k=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("3fb5")(x,a);var I=g.errorOrDestroy,C=["error","close","destroy","pause","resume"];function T(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function R(e,t,n){i=i||r("b19a"),e=e||{},"boolean"!==typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",n),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r("aa22").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function x(e){if(i=i||r("b19a"),!(this instanceof x))return new x(e);var t=this instanceof i;this._readableState=new R(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function O(e,t,r,n,i){u("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,L(e,a);else if(i||(o=A(a,t)),o)I(e,o);else if(a.objectMode||t&&t.length>0)if("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),n)a.endEmitted?I(e,new k):M(e,a,t,!0);else if(a.ended)I(e,new S);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?M(e,a,t,!1):F(e,a)):M(e,a,t,!1)}else n||(a.reading=!1,F(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function M(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),F(e,t)}function A(e,t){var r;return d(t)||"string"===typeof t||void 0===t||e.objectMode||(r=new w("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=g.destroy,x.prototype._undestroy=g.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=s.from(e,t),t=""),r=!0),O(this,e,t,!1,r)},x.prototype.unshift=function(e){return O(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){f||(f=r("aa22").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head,i="";while(null!==n)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var P=1073741824;function D(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=D(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,U(e)))}}function N(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(U,e))}function U(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,z(e)}function F(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(B,e,t))}function B(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length)){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function K(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,z(e))}}function q(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function V(e){u("readable nexttick read 0"),e.read(0)}function W(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick($,e,t))}function $(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),z(e),t.flowing&&!t.reading&&e.read(0)}function z(e){var t=e._readableState;u("flow",t.flowing);while(t.flowing&&null!==e.read());}function G(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function H(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(Y,t,e))}function Y(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function J(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}x.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?H(this):N(this),null;if(e=j(e,t),0===e&&t.ended)return 0===t.length&&H(this),null;var n,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,u("length less than watermark",i)),t.ended||t.reading?(i=!1,u("reading or ended",i)):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=j(r,t))),n=e>0?G(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&H(this)),null!==n&&this.emit("data",n),n},x.prototype._read=function(e){I(this,new E("_read()"))},x.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,s=a?l:y;function c(e,t){u("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,f())}function l(){u("onend"),e.end()}i.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",c);var d=K(r);e.on("drain",d);var h=!1;function f(){u("cleanup"),e.removeListener("close",m),e.removeListener("finish",g),e.removeListener("drain",d),e.removeListener("error",v),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",y),r.removeListener("data",p),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||d()}function p(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==J(i.pipes,e))&&!h&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function v(t){u("onerror",t),y(),e.removeListener("error",v),0===o(e,"error")&&I(e,t)}function m(){e.removeListener("finish",g),y()}function g(){u("onfinish"),e.removeListener("close",m),y()}function y(){u("unpipe"),r.unpipe(e)}return r.on("data",p),T(e,"error",v),e.once("close",m),e.once("finish",g),e.emit("pipe",r),i.flowing||(u("pipe resume"),r.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=J(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},x.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?N(this):i.reading||n.nextTick(V,this))),r},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(q,this),r},x.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(q,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,W(this,e)),e.paused=!1,this},x.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var o=t.push(i);o||(n=!0,e.pause())}})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<C.length;o++)e.on(C[o],this.emit.bind(this,C[o]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=r("9c0e")),p(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=G,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(x.from=function(e,t){return void 0===v&&(v=r("07c6")),v(x,e,t)})}).call(this,r("c8ba"),r("4362"))},ad9d:function(e,t,r){"use strict";var n=r("a593");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},ade3:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,"a",(function(){return a}));r("d9e2");function i(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""}function a(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},ae6f:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},ae72:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="matrix-js-sdk"},aeb0:function(e,t,r){"use strict";var n=r("9bf2").f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},aeba:function(e,t,r){"use strict";r.r(t);var n=r("8e15");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},aed9:function(e,t,r){"use strict";var n=r("83ab"),i=r("d039");e.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},af7e:function(e,t,r){e.exports=r("6ffa")},afad:function(e,t,r){"use strict";r.r(t);var n=r("e5ce");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},afc1:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".main-wrapper.minimized[data-v-c291a1ac]:not(.active) .topheader{opacity:0}.main-wrapper.minimized[data-v-c291a1ac]:not(.active) .encrypted{display:none}",""]),e.exports=t},afe6:function(t,r,n){"use strict";(function(t){n.d(r,"a",(function(){return ve})),n.d(r,"i",(function(){return ge})),n.d(r,"e",(function(){return fe})),n.d(r,"c",(function(){return be})),n.d(r,"h",(function(){return _e})),n.d(r,"f",(function(){return we})),n.d(r,"g",(function(){return Se})),n.d(r,"j",(function(){return Ee})),n.d(r,"b",(function(){return ke})),n.d(r,"d",(function(){return Te})),n.d(r,"k",(function(){return xe})),n.d(r,"m",(function(){return Oe})),n.d(r,"l",(function(){return Me}));var i=n("4082"),o=n.n(i),a=n("c973"),s=n.n(a),c=n("9523"),l=n.n(c),d=n("480c"),u=n("edaf"),h=n("7688"),f=n("d5da"),p=n("9f65"),v=n("cdd2"),m=n("d76e"),g=n("b83f"),y=n("2f36"),b=n("db45"),_=n("2a22"),w=n("75c9"),S=n("da1e"),E=n("0804"),k=n("5b5f"),I=n("5fc1"),C=n("9c88"),T=n("31f5"),R=n("b7a0"),x=n("87bd"),O=n("1073"),M=n("6280"),A=n("dab2"),P=n("dbc5"),D=n("bcb3"),j=n("a2a7"),L=n("299a"),N=n("976c"),U=n("60af"),F=n("3d21"),B=n("2328"),K=n("6dde"),q=n("77db"),V=n("1c00"),W=n("3068"),$=n("93dd"),z=n("3838"),G=n("72b3"),H=n("936a"),Y=n("283b"),J=n("a95b"),X=n("3ba7"),Z=n("76e6"),Q=n("a74c"),ee=n("b58b"),te=n("9e72"),re=n("082a"),ne=n("ae72"),ie=n("5cf1"),oe=n("ea01"),ae=n("3267"),se=n("3925"),ce=n("123d"),le=n("567a"),de=["server","limit","since"];function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe,pe=3e3,ve=Object(T["d"])(),me=6e5,ge=new Q["c"]("last_seen_user_agent","org.matrix.msc3852.last_seen_user_agent");(function(e){e["Chronological"]="chronological",e["Detached"]="detached"})(fe||(fe={}));var ye,be=new Q["a"]("m.get_login_token","org.matrix.msc3882.get_login_token"),_e="uk.half-shot.msc2666",we="uk.half-shot.msc2666.mutual_rooms",Se="uk.half-shot.msc2666.query_mutual_rooms",Ee="org.matrix.msc4140";(function(e){e["MasterKey"]="master_key",e["SelfSigningKey"]="self_signing_key",e["UserSigningKey"]="user_signing_key"})(ye||(ye={}));var ke,Ie="$";(function(e){e["Sync"]="sync",e["Event"]="event",e["ToDeviceEvent"]="toDeviceEvent",e["AccountData"]="accountData",e["Room"]="Room",e["DeleteRoom"]="deleteRoom",e["SyncUnexpectedError"]="sync.unexpectedError",e["ClientWellKnown"]="WellKnown.client",e["ReceivedVoipEvent"]="received_voip_event",e["UndecryptableToDeviceEvent"]="toDeviceEvent.undecryptable",e["TurnServers"]="turnServers",e["TurnServersError"]="turnServers.error"})(ke||(ke={}));var Ce=new Q["c"]("action","org.matrix.msc3824.action");class Te extends H["b"]{constructor(e){var t,r,n,i;super(),n=this,l()(this,"logger",void 0),l()(this,"reEmitter",new E["b"](this)),l()(this,"olmVersion",null),l()(this,"usingExternalCrypto",!1),l()(this,"_store",void 0),l()(this,"deviceId",void 0),l()(this,"credentials",void 0),l()(this,"pickleKey",void 0),l()(this,"scheduler",void 0),l()(this,"clientRunning",!1),l()(this,"timelineSupport",!1),l()(this,"urlPreviewCache",{}),l()(this,"identityServer",void 0),l()(this,"http",void 0),l()(this,"crypto",void 0),l()(this,"cryptoBackend",void 0),l()(this,"cryptoCallbacks",void 0),l()(this,"callEventHandler",void 0),l()(this,"groupCallEventHandler",void 0),l()(this,"supportsCallTransfer",!1),l()(this,"forceTURN",!1),l()(this,"iceCandidatePoolSize",0),l()(this,"idBaseUrl",void 0),l()(this,"baseUrl",void 0),l()(this,"isVoipWithNoMediaAllowed",void 0),l()(this,"useLivekitForGroupCalls",void 0),l()(this,"canSupportVoip",!1),l()(this,"peekSync",null),l()(this,"isGuestAccount",!1),l()(this,"ongoingScrollbacks",{}),l()(this,"notifTimelineSet",null),l()(this,"cryptoStore",void 0),l()(this,"verificationMethods",void 0),l()(this,"fallbackICEServerAllowed",!1),l()(this,"syncApi",void 0),l()(this,"roomNameGenerator",void 0),l()(this,"pushRules",void 0),l()(this,"syncLeftRoomsPromise",void 0),l()(this,"syncedLeftRooms",!1),l()(this,"clientOpts",void 0),l()(this,"clientWellKnownIntervalID",void 0),l()(this,"canResetTimelineCallback",void 0),l()(this,"canSupport",new Map),l()(this,"pushProcessor",new b["a"](this)),l()(this,"serverVersionsPromise",void 0),l()(this,"clientWellKnown",void 0),l()(this,"clientWellKnownPromise",void 0),l()(this,"turnServers",[]),l()(this,"turnServersExpiry",0),l()(this,"checkTurnServersIntervalID",void 0),l()(this,"exportedOlmDeviceToImport",void 0),l()(this,"txnCtr",0),l()(this,"mediaHandler",new G["a"](this)),l()(this,"sessionId",void 0),l()(this,"eventsBeingEncrypted",new Set),l()(this,"useE2eForGroupCall",!0),l()(this,"toDeviceMessageQueue",void 0),l()(this,"livekitServiceURL",void 0),l()(this,"_secretStorage",void 0),l()(this,"ignoredInvites",void 0),l()(this,"matrixRTC",void 0),l()(this,"serverCapabilitiesService",void 0),l()(this,"startCallEventHandler",()=>{this.isInitialSyncComplete()&&(Object(f["i"])()&&(this.callEventHandler.start(),this.groupCallEventHandler.start()),this.off(ke.Sync,this.startCallEventHandler))}),l()(this,"startMatrixRTC",()=>{this.isInitialSyncComplete()&&(this.matrixRTC.start(),this.off(ke.Sync,this.startMatrixRTC))}),l()(this,"fixupRoomNotifications",()=>{if(this.isInitialSyncComplete()){var e,t=(null!==(e=this.getRooms())&&void 0!==e?e:[]).filter(e=>e.getUnreadNotificationCount(L["b"].Total)>0);for(var r of t){var n=this.getSafeUserId();r.fixupNotifications(n)}this.off(ke.Sync,this.fixupRoomNotifications)}}),this.logger=null!==(t=e.logger)&&void 0!==t?t:k["b"],e.baseUrl=g["l"](e.baseUrl),e.idBaseUrl=g["l"](e.idBaseUrl),this.baseUrl=e.baseUrl,this.idBaseUrl=e.idBaseUrl,this.identityServer=e.identityServer,this.usingExternalCrypto=null!==(r=e.usingExternalCrypto)&&void 0!==r&&r,this.store=e.store||new h["a"],this.deviceId=e.deviceId||null,this.sessionId=Object(K["a"])(10);var o=e.userId||null;this.credentials={userId:o},this.http=new C["g"](this,{fetchFn:e.fetchFn,baseUrl:e.baseUrl,idBaseUrl:e.idBaseUrl,accessToken:e.accessToken,refreshToken:e.refreshToken,tokenRefreshFunction:e.tokenRefreshFunction,prefix:C["a"].V3,onlyData:!0,extraParams:e.queryParams,localTimeoutMs:e.localTimeoutMs,useAuthorizationHeader:e.useAuthorizationHeader,logger:this.logger}),e.deviceToImport?this.deviceId?this.logger.warn("not importing device because device ID is provided to constructor independently of exported data"):this.credentials.userId?this.logger.warn("not importing device because user ID is provided to constructor independently of exported data"):e.deviceToImport.deviceId?(this.deviceId=e.deviceToImport.deviceId,this.credentials.userId=e.deviceToImport.userId,this.exportedOlmDeviceToImport=e.deviceToImport.olmDevice):this.logger.warn("not importing device because no device ID in exported data"):e.pickleKey&&(this.pickleKey=e.pickleKey),this.useLivekitForGroupCalls=Boolean(e.useLivekitForGroupCalls),this.scheduler=e.scheduler,this.scheduler&&this.scheduler.setProcessFunction(function(){var e=s()((function*(e){var t=n.getRoom(e.getRoomId());e.status!==u["a"].SENDING&&n.updatePendingEventStatus(t,e,u["a"].SENDING);var r=yield n.sendEventHttpRequest(e);return t&&t.updatePendingEvent(e,u["a"].SENT,r.event_id),r}));return function(t){return e.apply(this,arguments)}}()),Object(f["i"])()&&(this.callEventHandler=new v["a"](this),this.groupCallEventHandler=new m["a"](this),this.canSupportVoip=!0,this.on(ke.Sync,this.startCallEventHandler)),this.matrixRTC=new oe["a"](this),this.serverCapabilitiesService=new ce["b"](this.http),this.on(ke.Sync,this.fixupRoomNotifications),this.timelineSupport=Boolean(e.timelineSupport),this.cryptoStore=e.cryptoStore,this.verificationMethods=e.verificationMethods,this.cryptoCallbacks=e.cryptoCallbacks||{},this.forceTURN=e.forceTURN||!1,this.iceCandidatePoolSize=void 0===e.iceCandidatePoolSize?0:e.iceCandidatePoolSize,this.supportsCallTransfer=e.supportsCallTransfer||!1,this.fallbackICEServerAllowed=e.fallbackICEServerAllowed||!1,this.isVoipWithNoMediaAllowed=e.isVoipWithNoMediaAllowed||!1,void 0!==e.useE2eForGroupCall&&(this.useE2eForGroupCall=e.useE2eForGroupCall),this.livekitServiceURL=e.livekitServiceURL,this.roomNameGenerator=e.roomNameGenerator,this.toDeviceMessageQueue=new ee["a"](this),this.on(u["c"].Decrypted,e=>{xe(this,e)}),this.ignoredInvites=new te["a"](this),this._secretStorage=new ie["ServerSideSecretStorageImpl"](this,null!==(i=e.cryptoCallbacks)&&void 0!==i?i:{}),this.setMaxListeners(0)}set store(e){this._store=e,this._store.setUserCreator(e=>O["a"].createUser(e,this))}get store(){return this._store}startClient(t){var r=this;return s()((function*(){if(!r.clientRunning){r.clientRunning=!0,r.on(ke.Sync,r.startMatrixRTC);var n=r.getUserId();n&&r.store.storeUser(new O["a"](n)),r.canSupportVoip&&(r.checkTurnServersIntervalID=setInterval(()=>{r.checkTurnServers()},me),r.checkTurnServers()),r.syncApi&&(r.logger.error("Still have sync object whilst not running: stopping old one"),r.syncApi.stop());try{yield r.getVersions();var{threads:i,list:o,fwdPagination:a}=yield r.doesServerSupportThread();X["e"].setServerSideSupport(i),X["e"].setServerSideListSupport(o),X["e"].setServerSideFwdPaginationSupport(a)}catch(e){r.logger.error("Can't fetch server versions, continuing to initialise sync, this will be retried later",e)}r.clientOpts=null!==t&&void 0!==t?t:{},r.clientOpts.slidingSync?r.syncApi=new J["a"](r.clientOpts.slidingSync,r,r.clientOpts,r.buildSyncApiOptions()):r.syncApi=new d["b"](r,r.clientOpts,r.buildSyncApiOptions()),r.syncApi.sync().catch(e=>r.logger.info("Sync startup aborted with an error:",e)),void 0!==r.clientOpts.clientWellKnownPollPeriod&&(r.clientWellKnownIntervalID=setInterval(()=>{r.fetchClientWellKnown()},1e3*r.clientOpts.clientWellKnownPollPeriod),r.fetchClientWellKnown()),r.toDeviceMessageQueue.start(),r.serverCapabilitiesService.start()}}))()}buildSyncApiOptions(){return{crypto:this.crypto,cryptoCallbacks:this.cryptoBackend,canResetEntireTimeline:e=>!!this.canResetTimelineCallback&&this.canResetTimelineCallback(e)}}stopClient(){var e,r,n,i,o;null===(e=this.cryptoBackend)||void 0===e||e.stop(),this.off(ke.Sync,this.startMatrixRTC),this.clientRunning&&(this.logger.debug("stopping MatrixClient"),this.clientRunning=!1,null===(r=this.syncApi)||void 0===r||r.stop(),this.syncApi=void 0,null===(n=this.peekSync)||void 0===n||n.stopPeeking(),null===(i=this.callEventHandler)||void 0===i||i.stop(),null===(o=this.groupCallEventHandler)||void 0===o||o.stop(),this.callEventHandler=void 0,this.groupCallEventHandler=void 0,t.clearInterval(this.checkTurnServersIntervalID),this.checkTurnServersIntervalID=void 0,void 0!==this.clientWellKnownIntervalID&&t.clearInterval(this.clientWellKnownIntervalID),this.toDeviceMessageQueue.stop(),this.matrixRTC.stop(),this.serverCapabilitiesService.stop())}rehydrateDevice(){var r=this;return s()((function*(){if(r.crypto)throw new Error("Cannot rehydrate device after crypto is initialized");if(r.cryptoCallbacks.getDehydrationKey){var n=yield r.getDehydratedDevice();if(n)if(n.device_data&&n.device_id){var i=new t.Olm.Account;try{var o=n.device_data;if(o.algorithm!==P["a"])return void r.logger.warn("Wrong algorithm for dehydrated device");r.logger.debug("unpickling dehydrated device");var a=yield r.cryptoCallbacks.getDehydrationKey(o,e=>{i.unpickle(new Uint8Array(e),o.account)});i.unpickle(a,o.account),r.logger.debug("unpickled device");var s=yield r.http.authedRequest(C["i"].Post,"/dehydrated_device/claim",void 0,{device_id:n.device_id},{prefix:"/_matrix/client/unstable/org.matrix.msc2697.v2"});if(s.success){r.deviceId=n.device_id,r.logger.info("using dehydrated device");var c=r.pickleKey||"DEFAULT_KEY";return r.exportedOlmDeviceToImport={pickledAccount:i.pickle(c),sessions:[],pickleKey:c},i.free(),r.deviceId}return i.free(),void r.logger.info("not using dehydrated device")}catch(e){i.free(),r.logger.warn("could not unpickle",e)}}else r.logger.info("no dehydrated device found")}}))()}getDehydratedDevice(){var t=this;return s()((function*(){try{return yield t.http.authedRequest(C["i"].Get,"/dehydrated_device",void 0,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc2697.v2"})}catch(e){return void t.logger.info("could not get dehydrated device",e)}}))()}setDehydrationKey(e,t,r){var n=this;return s()((function*(){if(n.crypto)return n.crypto.dehydrationManager.setKeyAndQueueDehydration(e,t,r);n.logger.warn("not dehydrating device if crypto is not enabled")}))()}createDehydratedDevice(e,t,r){var n=this;return s()((function*(){if(n.crypto)return yield n.crypto.dehydrationManager.setKey(e,t,r),n.crypto.dehydrationManager.dehydrateDevice();n.logger.warn("not dehydrating device if crypto is not enabled")}))()}exportDevice(){var e=this;return s()((function*(){if(e.crypto)return{userId:e.credentials.userId,deviceId:e.deviceId,olmDevice:yield e.crypto.olmDevice.export()};e.logger.warn("not exporting device if crypto is not enabled")}))()}clearStores(){var r=this;if(this.clientRunning)throw new Error("Cannot clear stores while client is running");var n=[];n.push(this.store.deleteAllData()),this.cryptoStore&&n.push(this.cryptoStore.deleteAllData());var i=function(){var n=s()((function*(){var n;try{if(n=t.indexedDB,!n)return}catch(e){return}var i=function*(e){var t=new Promise((t,i)=>{r.logger.info("Removing IndexedDB instance ".concat(e));var o=n.deleteDatabase(e);o.onsuccess=n=>{r.logger.info("Removed IndexedDB instance ".concat(e)),t(0)},o.onerror=n=>{r.logger.warn("Failed to remove IndexedDB instance ".concat(e,":"),n),t(0)},o.onblocked=t=>{r.logger.info("cannot yet remove IndexedDB instance ".concat(e))}});yield t};for(var o of["".concat(ne["a"],"::matrix-sdk-crypto"),"".concat(ne["a"],"::matrix-sdk-crypto-meta")])yield*i(o)}));return function(){return n.apply(this,arguments)}}();return n.push(i()),Promise.all(n).then()}getUserId(){return this.credentials&&this.credentials.userId?this.credentials.userId:null}getSafeUserId(){var e=this.getUserId();if(!e)throw new Error("Expected logged in user but found none.");return e}getDomain(){return this.credentials&&this.credentials.userId?this.credentials.userId.replace(/^.*?:/,""):null}getUserIdLocalpart(){return this.credentials&&this.credentials.userId?this.credentials.userId.split(":")[0].substring(1):null}getDeviceId(){return this.deviceId}getSessionId(){return this.sessionId}supportsVoip(){return this.canSupportVoip}getMediaHandler(){return this.mediaHandler}setForceTURN(e){this.forceTURN=e}setSupportsCallTransfer(e){this.supportsCallTransfer=e}getUseE2eForGroupCall(){return this.useE2eForGroupCall}createCall(e){return Object(f["f"])(this,e)}createGroupCall(e,t,r,n,i,o){var a=this;return s()((function*(){if(a.getGroupCallForRoom(e))throw new Error("".concat(e," already has an existing group call"));var s=a.getRoom(e);if(!s)throw new Error("Cannot find room ".concat(e));return new z["a"](a,s,t,r,n,void 0,i||a.isVoipWithNoMediaAllowed,o,a.isVoipWithNoMediaAllowed,a.useLivekitForGroupCalls,a.livekitServiceURL).create()}))()}getLivekitServiceURL(){return this.livekitServiceURL}setLivekitServiceURL(e){this.livekitServiceURL=e}waitUntilRoomReadyForGroupCalls(e){return this.groupCallEventHandler.waitUntilRoomReadyForGroupCalls(e)}getGroupCallForRoom(e){return this.groupCallEventHandler.groupCalls.get(e)||null}getSyncState(){var e,t;return null!==(e=null===(t=this.syncApi)||void 0===t?void 0:t.getSyncState())&&void 0!==e?e:null}getSyncStateData(){return this.syncApi?this.syncApi.getSyncStateData():null}isInitialSyncComplete(){var e=this.getSyncState();return!!e&&(e===d["c"].Prepared||e===d["c"].Syncing)}isGuest(){return this.isGuestAccount}setGuest(e){this.isGuestAccount=e}getScheduler(){return this.scheduler}retryImmediately(){var e,t;return this.toDeviceMessageQueue.sendQueue(),null!==(e=null===(t=this.syncApi)||void 0===t?void 0:t.retryImmediately())&&void 0!==e&&e}getNotifTimelineSet(){return this.notifTimelineSet}setNotifTimelineSet(e){this.notifTimelineSet=e}getCapabilities(){var e=this;return s()((function*(){var t=e.serverCapabilitiesService.getCachedCapabilities();return t||e.serverCapabilitiesService.fetchCapabilities()}))()}getCachedCapabilities(){return this.serverCapabilitiesService.getCachedCapabilities()}fetchCapabilities(){return this.serverCapabilitiesService.fetchCapabilities()}initCrypto(){var e=this;return s()((function*(){if(!Object(T["d"])())throw new Error("End-to-end encryption not supported in this js-sdk build: did you remember to load the olm library?");if(e.cryptoBackend)e.logger.warn("Attempt to re-initialise e2e encryption on MatrixClient");else{if(!e.cryptoStore)throw new Error("Cannot enable encryption: no cryptoStore provided");e.logger.debug("Crypto: Starting up crypto store..."),yield e.cryptoStore.startup();var t=e.getUserId();if(null===t)throw new Error("Cannot enable encryption on MatrixClient with unknown userId: ensure userId is passed in createClient().");if(null===e.deviceId)throw new Error("Cannot enable encryption on MatrixClient with unknown deviceId: ensure deviceId is passed in createClient().");var r=new T["a"](e,t,e.deviceId,e.store,e.cryptoStore,e.verificationMethods);e.reEmitter.reEmit(r,[T["b"].KeyBackupFailed,T["b"].KeyBackupSessionsRemaining,T["b"].RoomKeyRequest,T["b"].RoomKeyRequestCancellation,T["b"].Warning,T["b"].DevicesUpdated,T["b"].WillUpdateDevices,T["b"].DeviceVerificationChanged,T["b"].UserTrustStatusChanged,T["b"].KeysChanged]),e.logger.debug("Crypto: initialising crypto object..."),yield r.init({exportedOlmDevice:e.exportedOlmDeviceToImport,pickleKey:e.pickleKey}),delete e.exportedOlmDeviceToImport,e.olmVersion=T["a"].getOlmVersion(),r.registerEventHandlers(e),e.cryptoBackend=e.crypto=r,e.crypto.uploadDeviceKeys().catch(t=>{e.logger.error("Error uploading device keys",t)})}}))()}initRustCrypto(){var e=arguments,t=this;return s()((function*(){var r,i=e.length>0&&void 0!==e[0]?e[0]:{};if(t.cryptoBackend)t.logger.warn("Attempt to re-initialise e2e encryption on MatrixClient");else{var o=t.getUserId();if(null===o)throw new Error("Cannot enable encryption on MatrixClient with unknown userId: ensure userId is passed in createClient().");var a=t.getDeviceId();if(null===a)throw new Error("Cannot enable encryption on MatrixClient with unknown deviceId: ensure deviceId is passed in createClient().");t.logger.debug("Downloading Rust crypto library");var s=yield n.e(16).then(n.bind(null,"9424")),c=yield s.initRustCrypto({logger:t.logger,http:t.http,userId:o,deviceId:a,secretStorage:t.secretStorage,cryptoCallbacks:t.cryptoCallbacks,storePrefix:!1===i.useIndexedDB?null:ne["a"],storeKey:i.storageKey,storePassphrase:i.storagePassword,legacyCryptoStore:t.cryptoStore,legacyPickleKey:null!==(r=t.pickleKey)&&void 0!==r?r:"DEFAULT_KEY",legacyMigrationProgressListener:(e,r)=>{t.emit(T["b"].LegacyCryptoStoreMigrationProgress,e,r)}});c.setSupportedVerificationMethods(t.verificationMethods),t.cryptoBackend=c,t.on(N["b"].Membership,c.onRoomMembership.bind(c)),t.on(ke.Event,e=>{c.onLiveEventFromSync(e)}),t.reEmitter.reEmit(c,[T["b"].VerificationRequestReceived,T["b"].UserTrustStatusChanged,T["b"].KeyBackupStatus,T["b"].KeyBackupSessionsRemaining,T["b"].KeyBackupFailed,T["b"].KeyBackupDecryptionKeyCached,T["b"].KeysChanged,T["b"].DevicesUpdated,T["b"].WillUpdateDevices])}}))()}get secretStorage(){return this._secretStorage}getCrypto(){return this.cryptoBackend}isCryptoEnabled(){return!!this.cryptoBackend}getDeviceEd25519Key(){var e,t;return null!==(e=null===(t=this.crypto)||void 0===t?void 0:t.getDeviceEd25519Key())&&void 0!==e?e:null}getDeviceCurve25519Key(){var e,t;return null!==(e=null===(t=this.crypto)||void 0===t?void 0:t.getDeviceCurve25519Key())&&void 0!==e?e:null}uploadKeys(){var e=this;return s()((function*(){e.logger.warn("MatrixClient.uploadKeys is deprecated")}))()}downloadKeys(e,t){return this.crypto?this.crypto.downloadKeys(e,t):Promise.reject(new Error("End-to-end encryption disabled"))}getStoredDevicesForUser(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredDevicesForUser(e)||[]}getStoredDevice(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredDevice(e,t)||null}setDeviceVerified(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.setDeviceVerification(e,t,r,null,null);return e==this.credentials.userId&&this.checkKeyBackup(),n}setDeviceBlocked(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.setDeviceVerification(e,t,null,r,null)}setDeviceKnown(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.setDeviceVerification(e,t,null,null,r)}setDeviceVerification(e,t,r,n,i){var o=this;return s()((function*(){if(!o.crypto)throw new Error("End-to-end encryption disabled");yield o.crypto.setDeviceVerification(e,t,r,n,i)}))()}requestVerificationDM(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestVerificationDM(e,t)}findVerificationRequestDMInProgress(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");if(this.crypto)return this.crypto.findVerificationRequestDMInProgress(e)}getVerificationRequestsToDeviceInProgress(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getVerificationRequestsToDeviceInProgress(e)}requestVerification(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestVerification(e,t)}beginKeyVerification(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.beginKeyVerification(e,t,r)}checkSecretStorageKey(e,t){return this.secretStorage.checkKey(e,t)}setGlobalBlacklistUnverifiedDevices(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.globalBlacklistUnverifiedDevices=e,e}getGlobalBlacklistUnverifiedDevices(){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.globalBlacklistUnverifiedDevices}setGlobalErrorOnUnknownDevices(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");this.cryptoBackend.globalErrorOnUnknownDevices=e}getGlobalErrorOnUnknownDevices(){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.globalErrorOnUnknownDevices}getCrossSigningId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D["a"].Master;if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getCrossSigningId(e)}getStoredCrossSigningForUser(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.getStoredCrossSigningForUser(e)}checkUserTrust(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.checkUserTrust(e)}checkDeviceTrust(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkDeviceTrust(e,t)}checkIfOwnDeviceCrossSigned(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkIfOwnDeviceCrossSigned(e)}checkOwnCrossSigningTrust(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.checkOwnCrossSigningTrust(e)}checkCrossSigningPrivateKey(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkCrossSigningPrivateKey(e,t)}legacyDeviceVerification(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.legacyDeviceVerification(e,t,r)}prepareToEncrypt(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");this.cryptoBackend.prepareToEncrypt(e)}userHasCrossSigningKeys(){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.userHasCrossSigningKeys()}isCrossSigningReady(){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.isCrossSigningReady()}bootstrapCrossSigning(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.bootstrapCrossSigning(e)}getCryptoTrustCrossSignedDevices(){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.getTrustCrossSignedDevices()}setCryptoTrustCrossSignedDevices(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");this.cryptoBackend.setTrustCrossSignedDevices(e)}countSessionsNeedingBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.countSessionsNeedingBackup()}getEventEncryptionInfo(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.getEventEncryptionInfo(e)}createRecoveryKeyFromPassphrase(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.createRecoveryKeyFromPassphrase(e)}isSecretStorageReady(){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.isSecretStorageReady()}bootstrapSecretStorage(e){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.bootstrapSecretStorage(e)}addSecretStorageKey(e,t,r){return this.secretStorage.addKey(e,t,r)}hasSecretStorageKey(e){return this.secretStorage.hasKey(e)}storeSecret(e,t,r){return this.secretStorage.store(e,t,r)}getSecret(e){return this.secretStorage.get(e)}isSecretStored(e){return this.secretStorage.isStored(e)}requestSecret(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestSecret(e,t)}getDefaultSecretStorageKeyId(){return this.secretStorage.getDefaultKeyId()}setDefaultSecretStorageKeyId(e){return this.secretStorage.setDefaultKeyId(e)}checkSecretStoragePrivateKey(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkSecretStoragePrivateKey(e,t)}getEventSenderDeviceInfo(e){var t=this;return s()((function*(){return t.crypto?t.crypto.getEventSenderDeviceInfo(e):null}))()}isEventSenderVerified(e){var t=this;return s()((function*(){var r=yield t.getEventSenderDeviceInfo(e);return!!r&&r.isVerified()}))()}getOutgoingRoomKeyRequest(e){if(!this.crypto)throw new Error("End-to-End encryption disabled");var t=e.getWireContent(),r={session_id:t.session_id,sender_key:t.sender_key,algorithm:t.algorithm,room_id:e.getRoomId()};return r.session_id&&r.sender_key&&r.algorithm&&r.room_id?this.crypto.cryptoStore.getOutgoingRoomKeyRequest(r):Promise.resolve(null)}cancelAndResendEventRoomKeyRequest(e){if(!this.crypto)throw new Error("End-to-End encryption disabled");return e.cancelAndResendKeyRequest(this.crypto,this.getUserId())}setRoomEncryption(e,t){if(!this.crypto)throw new Error("End-to-End encryption disabled");return this.crypto.setRoomEncryption(e,t)}isRoomEncrypted(e){var t,r,n=this.getRoom(e);return!!n&&(!!n.hasEncryptionStateEvent()||null!==(t=null===(r=this.crypto)||void 0===r?void 0:r.isRoomEncrypted(e))&&void 0!==t&&t)}encryptAndSendToDevices(e,t){if(!this.crypto)throw new Error("End-to-End encryption disabled");return this.crypto.encryptAndSendToDevices(e,t)}forceDiscardSession(e){if(!this.cryptoBackend)throw new Error("End-to-End encryption disabled");this.cryptoBackend.forceDiscardSession(e)}exportRoomKeys(){return this.cryptoBackend?this.cryptoBackend.exportRoomKeys():Promise.reject(new Error("End-to-end encryption disabled"))}importRoomKeys(e,t){if(!this.cryptoBackend)throw new Error("End-to-end encryption disabled");return this.cryptoBackend.importRoomKeys(e,t)}checkKeyBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.checkKeyBackup()}getKeyBackupVersion(){var t=this;return s()((function*(){var r;try{r=yield t.http.authedRequest(C["i"].Get,"/room_keys/version",void 0,void 0,{prefix:C["a"].V3})}catch(e){if("M_NOT_FOUND"===e.errcode)return null;throw e}return q["a"].checkBackupVersion(r),r}))()}isKeyBackupTrusted(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.isKeyBackupTrusted(e)}getKeyBackupEnabled(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.getKeyBackupEnabled()}enableKeyBackup(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.enableKeyBackup(e)}disableKeyBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.backupManager.disableKeyBackup()}prepareKeyBackupVersion(e){var t=arguments,r=this;return s()((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:{secureSecretStorage:!1};if(!r.crypto)throw new Error("End-to-end encryption disabled");var{algorithm:i,auth_data:o,recovery_key:a,privateKey:s}=yield r.crypto.backupManager.prepareKeyBackupVersion(e);return n.secureSecretStorage&&(yield r.secretStorage.store("m.megolm_backup.v1",Object(S["b"])(s)),r.logger.info("Key backup private key stored in secret storage")),{algorithm:i,auth_data:o,recovery_key:a}}))()}isKeyBackupKeyStored(){return Promise.resolve(this.secretStorage.isStored("m.megolm_backup.v1"))}createKeyBackupVersion(e){var t=this;return s()((function*(){if(!t.crypto)throw new Error("End-to-end encryption disabled");yield t.crypto.backupManager.createKeyBackupVersion(e);var r={algorithm:e.algorithm,auth_data:e.auth_data};yield t.crypto.signObject(r.auth_data),t.cryptoCallbacks.getCrossSigningKey&&t.crypto.crossSigningInfo.getId()&&(yield t.crypto.crossSigningInfo.signObject(r.auth_data,"master"));var n=yield t.http.authedRequest(C["i"].Post,"/room_keys/version",void 0,r);return yield t.checkKeyBackup(),t.getKeyBackupEnabled()||t.logger.error("Key backup not usable even though we just created it"),n}))()}deleteKeyBackupVersion(e){var t=this;return s()((function*(){if(!t.cryptoBackend)throw new Error("End-to-end encryption disabled");yield t.cryptoBackend.deleteKeyBackupVersion(e)}))()}makeKeyBackupPath(e,t,r){var n;n=void 0!==t?g["k"]("/room_keys/keys/$roomId/$sessionId",{$roomId:e,$sessionId:t}):void 0!==e?g["k"]("/room_keys/keys/$roomId",{$roomId:e}):"/room_keys/keys";var i=void 0===r?void 0:{version:r};return{path:n,queryData:i}}sendKeyBackup(e,t,r,n){var i=this;return s()((function*(){if(!i.crypto)throw new Error("End-to-end encryption disabled");var o=i.makeKeyBackupPath(e,t,r);yield i.http.authedRequest(C["i"].Put,o.path,o.queryData,n,{prefix:C["a"].V3})}))()}scheduleAllGroupSessionsForBackup(){var e=this;return s()((function*(){if(!e.crypto)throw new Error("End-to-end encryption disabled");yield e.crypto.backupManager.scheduleAllGroupSessionsForBackup()}))()}flagAllGroupSessionsForBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.flagAllGroupSessionsForBackup()}isValidRecoveryKey(t){try{return Object(R["a"])(t),!0}catch(e){return!1}}keyBackupKeyFromPassword(e,t){return Object(x["a"])(t.auth_data,e)}keyBackupKeyFromRecoveryKey(e){return Object(R["a"])(e)}restoreKeyBackupWithPassword(e,t,r,n,i){var o=this;return s()((function*(){var a=yield Object(x["a"])(n.auth_data,e);return o.restoreKeyBackup(a,t,r,n,i)}))()}restoreKeyBackupWithSecretStorage(e,t,r,n){var i=this;return s()((function*(){if(!i.cryptoBackend)throw new Error("End-to-end encryption disabled");var o=yield i.secretStorage.get("m.megolm_backup.v1"),a=Object(T["c"])(o);if(a){var s=yield i.secretStorage.getKey();yield i.secretStorage.store("m.megolm_backup.v1",a,[s[0]])}var c=Object(S["a"])(a||o);return i.restoreKeyBackup(c,t,r,e,n)}))()}restoreKeyBackupWithRecoveryKey(e,t,r,n,i){var o=Object(R["a"])(e);return this.restoreKeyBackup(o,t,r,n,i)}restoreKeyBackupWithCache(e,t,r,n){var i=this;return s()((function*(){if(!i.cryptoBackend)throw new Error("End-to-end encryption disabled");var o=yield i.cryptoBackend.getSessionBackupPrivateKey();if(!o)throw new Error("Couldn't get key");return i.restoreKeyBackup(o,e,t,r,n)}))()}restoreKeyBackup(t,r,n,i,o){var a=this;return s()((function*(){var c=null===o||void 0===o?void 0:o.cacheCompleteCallback,l=null===o||void 0===o?void 0:o.progressCallback;if(!a.cryptoBackend)throw new Error("End-to-end encryption disabled");if(!i.version)throw new Error("Backup version must be defined");var d=i.version,u=0,h=0,f=0,p=a.makeKeyBackupPath(r,n,d),v=yield a.cryptoBackend.getBackupDecryptor(i,t),m=!v.sourceTrusted;try{if(!(t instanceof Uint8Array))throw new Error("restoreKeyBackup expects Uint8Array, got ".concat(t));a.cryptoBackend.storeSessionBackupPrivateKey(t,d).catch(e=>{a.logger.warn("Error caching session backup key:",e)}).then(c),l&&l({stage:"fetch"});var g=yield a.http.authedRequest(C["i"].Get,p.path,p.queryData,void 0,{prefix:C["a"].V3});if(l&&l({stage:"load_keys"}),g.rooms)u=a.getTotalKeyCount(g),yield a.handleDecryptionOfAFullBackup(g,v,200,function(){var t=s()((function*(t){try{var r=i.version;yield a.cryptoBackend.importBackedUpRoomKeys(t,r,{untrusted:m}),f+=t.length}catch(e){h+=t.length,k["b"].error("Error importing keys from backup",e)}l&&l({total:u,successes:f,stage:"load_keys",failures:h})}));return function(e){return t.apply(this,arguments)}}());else if(g.sessions){var y=g.sessions;u=Object.keys(y).length;var b=yield v.decryptSessions(y);for(var _ of b)_.room_id=r;yield a.cryptoBackend.importBackedUpRoomKeys(b,d,{progressCallback:l,untrusted:m}),f=b.length}else{u=1;try{var[w]=yield v.decryptSessions({[n]:g});w.room_id=r,w.session_id=n,yield a.cryptoBackend.importBackedUpRoomKeys([w],d,{progressCallback:l,untrusted:m}),f=1}catch(e){a.logger.debug("Failed to decrypt megolm session from backup",e)}}}finally{v.free()}return yield a.cryptoBackend.checkKeyBackupAndEnable(),{total:u,imported:f}}))()}getTotalKeyCount(e){var t=e.rooms,r=0;for(var n of Object.values(t))n.sessions&&(r+=Object.keys(n.sessions).length);return r}handleDecryptionOfAFullBackup(e,t,r,n){return s()((function*(){var i=e.rooms,o=0,a=new Map,c=function(){var e=s()((function*(e){var r=[];for(var i of e.keys()){var o=yield t.decryptSessions(e.get(i));for(var a in o){var s=o[a];s.room_id=i,r.push(s)}}yield n(r)}));return function(t){return e.apply(this,arguments)}}();for(var[l,d]of Object.entries(i))if(d.sessions)for(var[u,h]of(a.set(l,{}),Object.entries(d.sessions))){var f=a.get(l);f[u]=h,o+=1,o>=r&&(yield c(a),a=new Map,a.set(l,{}),o=0)}o>0&&(yield c(a))}))()}deleteKeysFromBackup(e,t,r){var n=this;return s()((function*(){if(!n.crypto)throw new Error("End-to-end encryption disabled");var i=n.makeKeyBackupPath(e,t,r);yield n.http.authedRequest(C["i"].Delete,i.path,i.queryData,void 0,{prefix:C["a"].V3})}))()}sendSharedHistoryKeys(e,t){var r=this;return s()((function*(){var n;if(!r.crypto)throw new Error("End-to-end encryption disabled");var i=null===(n=r.crypto)||void 0===n?void 0:n.getRoomEncryption(e);if(i){var o=yield r.crypto.downloadKeys(t),a=new Map;for(var[s,c]of o)a.set(s,Array.from(c.values()));var l=r.crypto.getRoomDecryptor(e,i.algorithm);l.sendSharedHistoryInboundSessions?yield l.sendSharedHistoryInboundSessions(a):r.logger.warn("Algorithm does not support sharing previous keys",i.algorithm)}else r.logger.error("Unknown room.  Not sharing decryption keys")}))()}getMediaConfig(){return this.http.authedRequest(C["i"].Get,"/config",void 0,void 0,{prefix:C["h"].V3})}getRoom(e){return e?this.store.getRoom(e):null}getRooms(){return this.store.getRooms()}getVisibleRooms(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.store.getRooms(),r=new Set;for(var n of t){var i,o=null===(i=n.findPredecessor(e))||void 0===i?void 0:i.roomId;o&&r.add(o)}return t.filter(e=>{var t=e.currentState.getStateEvents(U["b"].RoomTombstone,"");return!t||!r.has(e.roomId)})}getUser(e){return this.store.getUser(e)}getUsers(){return this.store.getUsers()}setAccountData(e,t){var r=g["k"]("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:e});return Object(C["m"])(5,()=>this.http.authedRequest(C["i"].Put,r,void 0,t))}getAccountData(e){return this.store.getAccountData(e)}getAccountDataFromServer(t){var r=this;return s()((function*(){if(r.isInitialSyncComplete()){var n=r.store.getAccountData(t);return n?n.getContent():null}var i=g["k"]("/user/$userId/account_data/$type",{$userId:r.credentials.userId,$type:t});try{return yield r.http.authedRequest(C["i"].Get,i)}catch(e){var o;if("M_NOT_FOUND"===(null===(o=e.data)||void 0===o?void 0:o.errcode))return null;throw e}}))()}deleteAccountData(e){var t=this;return s()((function*(){var r=t.canSupport.get(re["a"].AccountDataDeletion);if(r!==re["b"].Unsupported){var n=g["k"]("/user/$userId/account_data/$type",{$userId:t.getSafeUserId(),$type:e}),i=r===re["b"].Unstable?{prefix:"/_matrix/client/unstable/org.matrix.msc3391"}:void 0;return yield t.http.authedRequest(C["i"].Delete,n,void 0,void 0,i)}yield t.setAccountData(e,{})}))()}getIgnoredUsers(){var e=this.getAccountData("m.ignored_user_list");return e&&e.getContent()&&e.getContent()["ignored_users"]?Object.keys(e.getContent()["ignored_users"]):[]}setIgnoredUsers(e){var t={ignored_users:{}};return e.forEach(e=>{t.ignored_users[e]={}}),this.setAccountData("m.ignored_user_list",t)}isUserIgnored(e){return this.getIgnoredUsers().includes(e)}joinRoom(e){var t=arguments,r=this;return s()((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:{};void 0===n.syncRoom&&(n.syncRoom=!0);var i=r.getRoom(e);if(null!==i&&void 0!==i&&i.hasMembershipState(r.credentials.userId,se["a"].Join))return i;var o=Promise.resolve();if(n.inviteSignUrl){var a=new URL(n.inviteSignUrl);a.searchParams.set("mxid",r.credentials.userId),o=r.http.requestOtherUrl(C["i"].Post,a)}var s={};n.viaServers&&(s.server_name=n.viaServers,s.via=n.viaServers,r.canSupport.get(re["a"].MigrateServerNameToVia)===re["b"].Unstable&&(s=Object(g["H"])("via","org.matrix.msc4156.via",s)));var c={},l=yield o;l&&(c.third_party_signed=l);var u=g["k"]("/join/$roomid",{$roomid:e}),h=yield r.http.authedRequest(C["i"].Post,u,s,c),f=h.room_id,p=r.getRoom(f);if(null!==p&&void 0!==p&&p.hasMembershipState(r.credentials.userId,se["a"].Join))return p;var v=new d["b"](r,r.clientOpts,r.buildSyncApiOptions()),m=v.createRoom(f);return n.syncRoom,m}))()}knockRoom(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRoom(e);if(null!==r&&void 0!==r&&r.hasMembershipState(this.credentials.userId,se["a"].Knock))return Promise.resolve({room_id:r.roomId});var n=g["k"]("/knock/$roomIdOrAlias",{$roomIdOrAlias:e}),i={};t.viaServers&&(i.server_name=t.viaServers,i.via=t.viaServers,this.canSupport.get(re["a"].MigrateServerNameToVia)===re["b"].Unstable&&(i=Object(g["H"])("via","org.matrix.msc4156.via",i)));var o={};return t.reason&&(o.reason=t.reason),this.http.authedRequest(C["i"].Post,n,i,o)}resendEvent(e,t){return this.toDeviceMessageQueue.sendQueue(),this.updatePendingEventStatus(t,e,u["a"].SENDING),this.encryptAndSendEvent(t,e)}cancelPendingEvent(e){if(![u["a"].QUEUED,u["a"].NOT_SENT,u["a"].ENCRYPTING].includes(e.status))throw new Error("cannot cancel an event with status "+e.status);e.status===u["a"].ENCRYPTING?this.eventsBeingEncrypted.delete(e.getId()):this.scheduler&&e.status===u["a"].QUEUED&&this.scheduler.removeEventFromQueue(e);var t=this.getRoom(e.getRoomId());this.updatePendingEventStatus(t,e,u["a"].CANCELLED)}setRoomAvatarUrl(e,t){return this.sendStateEvent(e,U["b"].RoomAvatar,{url:t})}setRoomName(e,t){return this.sendStateEvent(e,U["b"].RoomName,{name:t})}setRoomTopic(e,t,r){var n=j["makeTopicContent"](t,r);return this.sendStateEvent(e,U["b"].RoomTopic,n)}getRoomTags(e){var t=g["k"]("/user/$userId/rooms/$roomId/tags",{$userId:this.credentials.userId,$roomId:e});return this.http.authedRequest(C["i"].Get,t)}setRoomTag(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=g["k"]("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this.http.authedRequest(C["i"].Put,n,void 0,r)}deleteRoomTag(e,t){var r=g["k"]("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this.http.authedRequest(C["i"].Delete,r)}setRoomRetention(e,t){var r=g["k"]("/rooms/$roomId/state/$type",{$roomId:e,$type:"m.room.retention"});return this.http.authedRequest(C["i"].Put,r,void 0,t)}setRoomAccountData(e,t,r){var n=g["k"]("/user/$userId/rooms/$roomId/account_data/$type",{$userId:this.credentials.userId,$roomId:e,$type:t});return this.http.authedRequest(C["i"].Put,n,void 0,r)}setPowerLevel(t,r,n){var i=this;return s()((function*(){var o,a,s,c,l;i.clientRunning&&i.isInitialSyncComplete()&&(a=null===(s=i.getRoom(t))||void 0===s||null===(c=s.currentState)||void 0===c||null===(l=c.getStateEvents(U["b"].RoomPowerLevels,""))||void 0===l?void 0:l.getContent());if(!a)try{a=yield i.getStateEvent(t,U["b"].RoomPowerLevels,"")}catch(e){if(!(e instanceof C["f"]&&"M_NOT_FOUND"===e.errcode))throw e;a={}}a=g["g"](a),null!==(o=a)&&void 0!==o&&o.users||(a.users={});var d=Array.isArray(r)?r:[r];for(var u of d)null==n?delete a.users[u]:a.users[u]=n;return i.sendStateEvent(t,U["b"].RoomPowerLevels,a,"")}))()}unstable_createLiveBeacon(e,t){var r=this;return s()((function*(){return r.unstable_setLiveBeacon(e,t)}))()}unstable_setLiveBeacon(e,t){var r=this;return s()((function*(){return r.sendStateEvent(e,Z["b"].name,t,r.getUserId())}))()}sendEvent(e,t,r,n,i){var o,a,s,c;return null!==t&&void 0!==t&&t.startsWith(Ie)||null===t?(c=i,s=n,a=r,o=t):(c=n,s=r,a=t,o=null),this.addThreadRelationIfNeeded(s,o,e),this.sendCompleteEvent(e,o,{type:a,content:s},c)}addThreadRelationIfNeeded(e,t,r){var n;if(t&&(null===(n=e["m.relates_to"])||void 0===n||!n.rel_type)){var i,o,a=!(null===(i=e["m.relates_to"])||void 0===i||!i["m.in_reply_to"]);e["m.relates_to"]=he(he({},e["m.relates_to"]),{},{rel_type:X["d"].name,event_id:t,is_falling_back:!a});var s,c,l=null===(o=this.getRoom(r))||void 0===o?void 0:o.getThread(t);if(l&&!a)e["m.relates_to"]["m.in_reply_to"]={event_id:null!==(s=null===(c=l.lastReply(e=>e.isRelation(X["d"].name)&&!e.status))||void 0===c?void 0:c.getId())&&void 0!==s?s:t}}}sendCompleteEvent(e,t,r,n,i){var o,a;"string"===typeof n?a=n:(o=n,a=i),a||(a=this.makeTxnId());var s=new u["b"](Object.assign(r,{event_id:"~"+e+":"+a,user_id:this.credentials.userId,sender:this.credentials.userId,room_id:e,origin_server_ts:(new Date).getTime()})),c=this.getRoom(e),l=t?null===c||void 0===c?void 0:c.getThread(t):void 0;l&&s.setThread(l),o||(this.reEmitter.reEmit(s,[u["c"].Replaced,u["c"].VisibilityChange]),null===c||void 0===c||c.reEmitter.reEmit(s,[u["c"].BeforeRedaction]));var d=s.getAssociatedId();if(null!==d&&void 0!==d&&d.startsWith("~")){var h=null===c||void 0===c?void 0:c.getPendingEvents().find(e=>e.getId()===d);null===h||void 0===h||h.once(u["c"].LocalEventIdReplaced,()=>{s.updateAssociatedId(h.getId())})}var f=s.getType();return this.logger.debug("sendEvent of type ".concat(f," in ").concat(e," with txnId ").concat(a).concat(o?" (delayed event)":"")),s.setTxnId(a),s.setStatus(u["a"].SENDING),o?this.encryptAndSendEvent(c,s,o):(null===c||void 0===c||c.addPendingEvent(s,a),s.status===u["a"].NOT_SENT?Promise.reject(new Error("Event blocked by other events not yet sent")):this.encryptAndSendEvent(c,s))}encryptAndSendEvent(t,r,n){var i=this;return s()((function*(){if(n)return i.sendEventHttpRequest(r,n);try{var o;i.eventsBeingEncrypted.add(r.getId());try{yield i.encryptEventIfNeeded(r,null!==t&&void 0!==t?t:void 0)}finally{o=!i.eventsBeingEncrypted.delete(r.getId())}if(o)return{};r.status===u["a"].ENCRYPTING&&i.updatePendingEventStatus(t,r,u["a"].SENDING);var a=null;return i.scheduler&&(a=i.scheduler.queueEvent(r),a&&i.scheduler.getQueueForEvent(r).length>1&&i.updatePendingEventStatus(t,r,u["a"].QUEUED)),a||(a=i.sendEventHttpRequest(r),t&&(a=a.then(e=>(t.updatePendingEvent(r,u["a"].SENT,e["event_id"]),e)))),yield a}catch(s){i.logger.error("Error sending event",s);try{r.error=s,i.updatePendingEventStatus(t,r,u["a"].NOT_SENT)}catch(e){i.logger.error("Exception in error handler!",e)}throw s instanceof C["f"]&&(s.event=r),s}}))()}encryptEventIfNeeded(e,t){var r=this;return s()((function*(){if(t&&(yield r.shouldEncryptEventForRoom(e,t))&&(r.cryptoBackend||!r.usingExternalCrypto)){if(!r.cryptoBackend)throw new Error("This room is configured to use encryption, but your client does not support encryption.");r.updatePendingEventStatus(t,e,u["a"].ENCRYPTING),yield r.cryptoBackend.encryptEvent(e,t)}}))()}shouldEncryptEventForRoom(e,t){var r=this;return s()((function*(){var n;return!e.isEncrypted()&&(e.getType()!==U["b"].Reaction&&(!e.isRedaction()&&(!!t.hasEncryptionStateEvent()||!!(yield null===(n=r.cryptoBackend)||void 0===n?void 0:n.isEncryptionEnabledInRoom(t.roomId)))))}))()}getEncryptedIfNeededEventType(e,t){var r;return t===U["b"].Reaction?t:null!==(r=this.getRoom(e))&&void 0!==r&&r.hasEncryptionStateEvent()?U["b"].RoomMessageEncrypted:t}updatePendingEventStatus(e,t,r){e?e.updatePendingEvent(t,r):t.setStatus(r)}sendEventHttpRequest(e,t){var r=e.getTxnId();r||(r=this.makeTxnId(),e.setTxnId(r));var n,i={$roomId:e.getRoomId(),$eventType:e.getWireType(),$stateKey:e.getStateKey(),$txnId:r};if(e.isState()){var o="/rooms/$roomId/state/$eventType";e.getStateKey()&&e.getStateKey().length>0&&(o="/rooms/$roomId/state/$eventType/$stateKey"),n=g["k"](o,i)}else if(e.isRedaction()&&e.event.redacts){var a="/rooms/$roomId/redact/$redactsEventId/$txnId";n=g["k"](a,he({$redactsEventId:e.event.redacts},i))}else n=g["k"]("/rooms/$roomId/send/$eventType/$txnId",i);var s=e.getWireContent();return t?this.http.authedRequest(C["i"].Put,n,Re(t),s):this.http.authedRequest(C["i"].Put,n,void 0,s).then(t=>(this.logger.debug("Event sent to ".concat(e.getRoomId()," with event id ").concat(t.event_id)),t))}redactEvent(e,t,r,n,i){var o,a,s;null!==(o=r)&&void 0!==o&&o.startsWith(Ie)||(i=n,n=r,r=t,t=null);var c=null===(a=i)||void 0===a?void 0:a.reason,l={reason:c};if(void 0!==(null===(s=i)||void 0===s?void 0:s.with_rel_types)){if(this.canSupport.get(re["a"].RelationBasedRedactions)===re["b"].Unsupported)throw new Error("Server does not support relation based redactions "+"roomId ".concat(e," eventId ").concat(r," txnId: ").concat(n," threadId ").concat(t));var d=this.canSupport.get(re["a"].RelationBasedRedactions)===re["b"].Stable?U["d"].stable:U["d"].unstable;l[d]=i.with_rel_types}return this.sendCompleteEvent(e,t,{type:U["b"].RoomRedaction,content:l,redacts:r},n)}sendMessage(e,t,r,n){"string"!==typeof t&&null!==t&&(n=r,r=t,t=null);var i=U["b"].RoomMessage,o=r;return this.sendEvent(e,t,i,o,n)}sendTextMessage(e,t,r,n){var i;null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(n=r,r=t,t=null);var o=j["makeTextMessage"](r);return this.sendMessage(e,t,o,n)}sendNotice(e,t,r,n){var i;null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(n=r,r=t,t=null);var o=j["makeNotice"](r);return this.sendMessage(e,t,o,n)}sendEmoteMessage(e,t,r,n){var i;null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(n=r,r=t,t=null);var o=j["makeEmoteMessage"](r);return this.sendMessage(e,t,o,n)}sendImageMessage(e,t,r,n){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Image";null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(o=n||"Image",n=r,r=t,t=null);var a={msgtype:U["e"].Image,url:r,info:n,body:o};return this.sendMessage(e,t,a)}sendStickerMessage(e,t,r,n){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Sticker";null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(o=n||"Sticker",n=r,r=t,t=null);var a={url:r,info:n,body:o};return this.sendEvent(e,t,U["b"].Sticker,a)}sendHtmlMessage(e,t,r,n){var i;null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(n=r,r=t,t=null);var o=j["makeHtmlMessage"](r,n);return this.sendMessage(e,t,o)}sendHtmlNotice(e,t,r,n){var i;null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(n=r,r=t,t=null);var o=j["makeHtmlNotice"](r,n);return this.sendMessage(e,t,o)}sendHtmlEmote(e,t,r,n){var i;null!==(i=t)&&void 0!==i&&i.startsWith(Ie)||null===t||(n=r,r=t,t=null);var o=j["makeHtmlEmote"](r,n);return this.sendMessage(e,t,o)}_unstable_sendDelayedEvent(e,t,r,n,i,o){var a=this;return s()((function*(){if(!(yield a.doesServerSupportUnstableFeature(Ee)))throw Error("Server does not support the delayed events API");return a.addThreadRelationIfNeeded(i,r,e),a.sendCompleteEvent(e,r,{type:n,content:i},t,o)}))()}_unstable_sendDelayedStateEvent(e,t,r,n){var i=arguments,o=this;return s()((function*(){var a=i.length>4&&void 0!==i[4]?i[4]:"",s=i.length>5&&void 0!==i[5]?i[5]:{};if(!(yield o.doesServerSupportUnstableFeature(Ee)))throw Error("Server does not support the delayed events API");var c={$roomId:e,$eventType:r,$stateKey:a},l=g["k"]("/rooms/$roomId/state/$eventType",c);return void 0!==a&&(l=g["k"](l+"/$stateKey",c)),o.http.authedRequest(C["i"].Put,l,Re(t),n,s)}))()}_unstable_getDelayedEvents(e){var t=this;return s()((function*(){if(!(yield t.doesServerSupportUnstableFeature(Ee)))throw Error("Server does not support the delayed events API");var r=e?{from:e}:void 0;return yield t.http.authedRequest(C["i"].Get,"/delayed_events",r,void 0,{prefix:"".concat(C["a"].Unstable,"/").concat(Ee)})}))()}_unstable_updateDelayedEvent(e,t){var r=this;return s()((function*(){if(!(yield r.doesServerSupportUnstableFeature(Ee)))throw Error("Server does not support the delayed events API");var n=g["k"]("/delayed_events/$delayId",{$delayId:e}),i={action:t};return yield r.http.authedRequest(C["i"].Post,n,void 0,i,{prefix:"".concat(C["a"].Unstable,"/").concat(Ee)})}))()}sendReceipt(e,t,r){var n=arguments,i=this;return s()((function*(){var o=n.length>3&&void 0!==n[3]&&n[3];if(i.isGuest())return Promise.resolve({});var a=g["k"]("/rooms/$roomId/receipt/$receiptType/$eventId",{$roomId:e.getRoomId(),$receiptType:t,$eventId:e.getId()}),s=!o&&i.supportsThreads(),c=s?he(he({},r),{},{thread_id:Oe(e)}):r,l=i.http.authedRequest(C["i"].Post,a,void 0,c||{}),d=i.getRoom(e.getRoomId());return d&&i.credentials.userId&&d.addLocalEchoReceipt(i.credentials.userId,e,t,o),l}))()}sendReadReceipt(e){var t=arguments,r=this;return s()((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:Y["b"].Read,i=t.length>2&&void 0!==t[2]&&t[2];if(e){var o=e.getId(),a=r.getRoom(e.getRoomId());if(null!==a&&void 0!==a&&a.hasPendingEvent(o))throw new Error("Cannot set read receipt to a pending event (".concat(o,")"));return r.sendReceipt(e,n,{},i)}}))()}setRoomReadMarkers(e,t,r,n){var i=this;return s()((function*(){var o,a,s=i.getRoom(e);if(null!==s&&void 0!==s&&s.hasPendingEvent(t))throw new Error("Cannot set read marker to a pending event (".concat(t,")"));if(r){if(o=r.getId(),null!==s&&void 0!==s&&s.hasPendingEvent(o))throw new Error("Cannot set read receipt to a pending event (".concat(o,")"));null===s||void 0===s||s.addLocalEchoReceipt(i.credentials.userId,r,Y["b"].Read)}if(n){if(a=n.getId(),null!==s&&void 0!==s&&s.hasPendingEvent(a))throw new Error("Cannot set read receipt to a pending event (".concat(a,")"));null===s||void 0===s||s.addLocalEchoReceipt(i.credentials.userId,n,Y["b"].ReadPrivate)}return yield i.setRoomReadMarkersHttpRequest(e,t,o,a)}))()}getUrlPreview(e,t){t=6e4*Math.floor(t/6e4);var r=new URL(e);r.hash="",e=r.toString();var n=t+"_"+e;if(n in this.urlPreviewCache)return this.urlPreviewCache[n];var i=this.http.authedRequest(C["i"].Get,"/preview_url",{url:e,ts:t.toString()},void 0,{prefix:C["h"].V3,priority:"low"});return this.urlPreviewCache[n]=i,i}sendTyping(e,t,r){if(this.isGuest())return Promise.resolve({});var n=g["k"]("/rooms/$roomId/typing/$userId",{$roomId:e,$userId:this.getUserId()}),i={typing:t};return t&&(i.timeout=r||2e4),this.http.authedRequest(C["i"].Put,n,void 0,i)}getRoomUpgradeHistory(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getRoom(e);if(!n)return[];var i=this.findPredecessorRooms(n,t,r),o=this.findSuccessorRooms(n,t,r);return[...i,n,...o]}findPredecessorRooms(e,t,r){var n,i=[],o=null===(n=e.findPredecessor(r))||void 0===n?void 0:n.roomId;while(null!==o){var a,s=this.getRoom(o);if(null===s)break;if(t){var c=s.currentState.getStateEvents(U["b"].RoomTombstone,"");if(!c||c.getContent()["replacement_room"]!==e.roomId)break}i.splice(0,0,s),e=s,o=null===(a=e.findPredecessor(r))||void 0===a?void 0:a.roomId}return i}findSuccessorRooms(e,t,r){var n=[],i=e.currentState.getStateEvents(U["b"].RoomTombstone,"");while(i){var o=this.getRoom(i.getContent()["replacement_room"]);if(!o)break;if(o.roomId===e.roomId)break;if(t){var a,s=null===(a=o.findPredecessor(r))||void 0===a?void 0:a.roomId;if(!s||s!==e.roomId)break}n.push(o);var c=new Set(n.map(e=>e.roomId));if(c.size<n.length)return n.slice(0,n.length-1);e=o,i=e.currentState.getStateEvents(U["b"].RoomTombstone,"")}return n}invite(e,t,r){return this.membershipChange(e,t,se["a"].Invite,r)}inviteByEmail(e,t){return this.inviteByThreePid(e,"email",t)}inviteByThreePid(e,t,r){var n=this;return s()((function*(){var i,o=g["k"]("/rooms/$roomId/invite",{$roomId:e}),a=n.getIdentityServerUrl(!0);if(!a)return Promise.reject(new C["f"]({error:"No supplied identity server URL",errcode:"ORG.MATRIX.JSSDK_MISSING_PARAM"}));var s={id_server:a,medium:t,address:r};if(null!==(i=n.identityServer)&&void 0!==i&&i.getAccessToken){var c=yield n.identityServer.getAccessToken();c&&(s["id_access_token"]=c)}return n.http.authedRequest(C["i"].Post,o,void 0,s)}))()}leave(e){return this.membershipChange(e,void 0,se["a"].Leave)}leaveRoomChain(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getRoomUpgradeHistory(e),n=r;if(!t)for(var i of(n=[],r))if(n.push(i),i.roomId===e)break;var o={},a=[],s=e=>this.leave(e).then(()=>{delete o[e]}).catch(t=>{o[e]=t});for(var c of n)a.push(s(c.roomId));return Promise.all(a).then(()=>o)}ban(e,t,r){return this.membershipChange(e,t,se["a"].Ban,r)}forget(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.membershipChange(e,void 0,"forget");return t?r.then(t=>(this.store.removeRoom(e),this.emit(ke.DeleteRoom,e),t)):r}unban(e,t){var r=g["k"]("/rooms/$roomId/unban",{$roomId:e}),n={user_id:t};return this.http.authedRequest(C["i"].Post,r,void 0,n)}kick(e,t,r){var n=g["k"]("/rooms/$roomId/kick",{$roomId:e}),i={user_id:t,reason:r};return this.http.authedRequest(C["i"].Post,n,void 0,i)}membershipChange(e,t,r,n){var i=g["k"]("/rooms/$room_id/$membership",{$room_id:e,$membership:r});return this.http.authedRequest(C["i"].Post,i,void 0,{user_id:t,reason:n})}getPushActionsForEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.getPushActions()||t){var{actions:r,rule:n}=this.pushProcessor.actionsAndRuleForEvent(e);e.setPushDetails(r,n)}return e.getPushActions()}getPushDetailsForEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.getPushDetails()||t){var{actions:r,rule:n}=this.pushProcessor.actionsAndRuleForEvent(e);e.setPushDetails(r,n)}return e.getPushDetails()}setProfileInfo(e,t){var r=g["k"]("/profile/$userId/$info",{$userId:this.credentials.userId,$info:e});return this.http.authedRequest(C["i"].Put,r,void 0,t)}setDisplayName(e){var t=this;return s()((function*(){var r=yield t.setProfileInfo("displayname",{displayname:e}),n=t.getUser(t.getUserId());return n&&(n.displayName=e,n.emit(O["b"].DisplayName,n.events.presence,n)),r}))()}setAvatarUrl(e){var t=this;return s()((function*(){var r=yield t.setProfileInfo("avatar_url",{avatar_url:e}),n=t.getUser(t.getUserId());return n&&(n.avatarUrl=e,n.emit(O["b"].AvatarUrl,n.events.presence,n)),r}))()}mxcUrlToHttp(e,t,r,n,i,o,a){return Object(M["a"])(this.baseUrl,e,t,r,n,i,o,a)}setSyncPresence(e){var t=this;return s()((function*(){var r;null===(r=t.syncApi)||void 0===r||r.setPresence(e)}))()}setPresence(e){var t=this;return s()((function*(){var r=g["k"]("/presence/$userId/status",{$userId:t.credentials.userId}),n=["offline","online","unavailable"];if(-1===n.indexOf(e.presence))throw new Error("Bad presence value: "+e.presence);yield t.http.authedRequest(C["i"].Put,r,void 0,e)}))()}getPresence(e){var t=g["k"]("/presence/$userId/status",{$userId:e});return this.http.authedRequest(C["i"].Get,t)}scrollback(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=0,n=this.ongoingScrollbacks[e.roomId]||{};if(n.promise)return n.promise;if(n.errorTs){var i=Date.now()-n.errorTs;r=Math.max(pe-i,0)}if(null===e.oldState.paginationToken)return Promise.resolve(e);var o=this.store.scrollback(e,t).length;if(o===t)return Promise.resolve(e);t-=o;var a=new Promise((n,i)=>{Object(g["K"])(r).then(()=>this.createMessagesRequest(e.roomId,e.oldState.paginationToken,t,y["a"].Backward)).then(t=>{var r,i,o=t.chunk.map(this.getEventMapper());if(t.state){var a=t.state.map(this.getEventMapper());e.currentState.setUnknownStateEvents(a)}var[s,c,l]=e.partitionThreadedEvents(o);this.processAggregatedTimelineEvents(e,s),e.addEventsToTimeline(s,!0,e.getLiveTimeline()),this.processThreadEvents(e,c,!0),l.forEach(t=>e.relations.aggregateChildEvent(t)),e.oldState.paginationToken=null!==(r=t.end)&&void 0!==r?r:null,0===t.chunk.length&&(e.oldState.paginationToken=null),this.store.storeEvents(e,o,null!==(i=t.end)&&void 0!==i?i:null,!0),delete this.ongoingScrollbacks[e.roomId],n(e)}).catch(t=>{this.ongoingScrollbacks[e.roomId]={errorTs:Date.now()},i(t)})});return n={promise:a},this.ongoingScrollbacks[e.roomId]=n,a}getEventMapper(e){return Object(B["a"])(this,e||{})}getEventTimeline(e,t){var r=this;return s()((function*(){var n,i,o,a;if(!r.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(null===e||void 0===e||!e.room)throw new Error("getEventTimeline only supports room timelines");if(e.getTimelineForEvent(t))return e.getTimelineForEvent(t);if(e.thread&&r.supportsThreads())return r.getThreadTimeline(e,t);var s=g["k"]("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:t}),c=void 0;null!==(n=r.clientOpts)&&void 0!==n&&n.lazyLoadMembers&&(c={filter:JSON.stringify(p["a"].LAZY_LOADING_MESSAGES_FILTER)});var l=yield r.http.authedRequest(C["i"].Get,s,c);if(!l.event)throw new Error("'event' not in '/context' result - homeserver too old?");if(e.getTimelineForEvent(t))return e.getTimelineForEvent(t);var d=r.getEventMapper(),u=d(l.event);if(!u.isRelation(X["d"].name)){var h=[...l.events_after.reverse().map(d),u,...l.events_before.map(d)],f=e.getTimelineForEvent(h[0].getId());f?f.getState(y["b"].BACKWARDS).setUnknownStateEvents(l.state.map(d)):(f=e.addTimeline(),f.initialiseState(l.state.map(d)),f.getState(y["b"].FORWARDS).paginationToken=l.end);var[v,m,b]=e.room.partitionThreadedEvents(h);return e.addEventsToTimeline(v,!0,f,l.start),r.processThreadEvents(e.room,m,!0),r.processAggregatedTimelineEvents(e.room,v),b.forEach(t=>e.relations.aggregateChildEvent(t)),null!==(i=null!==(o=e.getTimelineForEvent(t))&&void 0!==o?o:null===(a=e.room.findThreadForEvent(u))||void 0===a?void 0:a.liveTimeline)&&void 0!==i?i:f}r.logger.warn("Tried loading a regular timeline at the position of a thread event")}))()}getThreadTimeline(e,t){var r=this;return s()((function*(){var n;if(!r.supportsThreads())throw new Error("could not get thread timeline: no client support");if(!e.room)throw new Error("could not get thread timeline: not a room timeline");if(!e.thread)throw new Error("could not get thread timeline: not a thread timeline");var i=g["k"]("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:t}),o={limit:"0"};null!==(n=r.clientOpts)&&void 0!==n&&n.lazyLoadMembers&&(o.filter=JSON.stringify(p["a"].LAZY_LOADING_MESSAGES_FILTER));var a=yield r.http.authedRequest(C["i"].Get,i,o),s=r.getEventMapper(),c=s(a.event);if(e.canContain(c)){var l=r.canSupport.get(re["a"].RelationsRecursion)!==re["b"].Unsupported;if(X["e"].hasServerSideSupport){if(X["e"].hasServerSideFwdPaginationSupport){var d,u,h;if(!e.thread)throw new Error("could not get thread timeline: not a thread timeline");var f=e.thread,v=yield r.fetchRelations(e.room.roomId,f.id,null,null,{dir:y["a"].Backward,from:a.start,recurse:l||void 0}),m=yield r.fetchRelations(e.room.roomId,f.id,null,null,{dir:y["a"].Forward,from:a.end,recurse:l||void 0}),b=[...m.chunk.reverse().filter(Object(ae["a"])(f.id)).map(s),c,...v.chunk.filter(Object(ae["a"])(f.id)).map(s)];for(var _ of b){var w;yield null===(w=e.thread)||void 0===w?void 0:w.processEvent(_)}var S=e.getTimelineForEvent(c.getId());if(S?S.getState(y["b"].BACKWARDS).setUnknownStateEvents(a.state.map(s)):(S=e.addTimeline(),S.initialiseState(a.state.map(s))),e.addEventsToTimeline(b,!0,S,m.next_batch),!v.next_batch){var E=yield r.fetchRoomEvent(e.room.roomId,f.id);e.addEventsToTimeline([s(E)],!0,S,null)}return S.setPaginationToken(null!==(d=v.next_batch)&&void 0!==d?d:null,y["a"].Backward),S.setPaginationToken(null!==(u=m.next_batch)&&void 0!==u?u:null,y["a"].Forward),r.processAggregatedTimelineEvents(e.room,b),null!==(h=e.getTimelineForEvent(t))&&void 0!==h?h:S}var k,I=e.thread,T=yield r.fetchRelations(e.room.roomId,I.id,X["d"].name,null,{dir:y["a"].Backward,from:a.start,recurse:l||void 0}),R=[],x=a.end;while(x){var O,M=yield r.fetchRelations(e.room.roomId,I.id,X["d"].name,null,{dir:y["a"].Forward,from:x,recurse:l||void 0});x=null!==(O=M.next_batch)&&void 0!==O?O:null,R.push(...M.chunk)}var A=[...R.reverse().map(s),c,...T.chunk.map(s)];for(var P of A){var D;yield null===(D=e.thread)||void 0===D?void 0:D.processEvent(P)}var j=e.getLiveTimeline();if(j.getState(y["b"].BACKWARDS).setUnknownStateEvents(a.state.map(s)),e.addEventsToTimeline(A,!0,j,null),!T.next_batch){var L=yield r.fetchRoomEvent(e.room.roomId,I.id);e.addEventsToTimeline([s(L)],!0,j,null)}return j.setPaginationToken(null!==(k=T.next_batch)&&void 0!==k?k:null,y["a"].Backward),j.setPaginationToken(null,y["a"].Forward),r.processAggregatedTimelineEvents(e.room,A),j}}}))()}getLatestTimeline(e){var t=this;return s()((function*(){if(!t.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(!e.room)throw new Error("getLatestTimeline only supports room timelines");var r;if(null!==e.threadListType){var n,i=yield t.createThreadListMessagesRequest(e.room.roomId,null,1,y["a"].Backward,e.threadListType,e.getFilter());r=null===(n=i.chunk)||void 0===n?void 0:n[0]}else if(e.thread&&X["e"].hasServerSideSupport){var o,a=t.canSupport.get(re["a"].RelationsRecursion)!==re["b"].Unsupported,s=yield t.fetchRelations(e.room.roomId,e.thread.id,X["d"].name,null,{dir:y["a"].Backward,limit:1,recurse:a||void 0});r=null===(o=s.chunk)||void 0===o?void 0:o[0]}else{var c,l,d=g["k"]("/rooms/$roomId/messages",{$roomId:e.room.roomId}),u={dir:"b"};null!==(c=t.clientOpts)&&void 0!==c&&c.lazyLoadMembers&&(u.filter=JSON.stringify(p["a"].LAZY_LOADING_MESSAGES_FILTER));var h=yield t.http.authedRequest(C["i"].Get,d,u);r=null===(l=h.chunk)||void 0===l?void 0:l[0]}if(!r)throw new Error("No message returned when trying to construct getLatestTimeline");return t.getEventTimeline(e,r.event_id)}))()}createMessagesRequest(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=g["k"]("/rooms/$roomId/messages",{$roomId:e}),s={limit:n.toString(),dir:i};t&&(s.from=t);var c,l=null;(null!==(r=this.clientOpts)&&void 0!==r&&r.lazyLoadMembers&&(l=Object.assign({},p["a"].LAZY_LOADING_MESSAGES_FILTER)),o)&&(l=l||{},Object.assign(l,null===(c=o.getRoomTimelineFilterComponent())||void 0===c?void 0:c.toJSON()));return l&&(s.filter=JSON.stringify(l)),this.http.authedRequest(C["i"].Get,a,s)}createThreadListMessagesRequest(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y["a"].Backward,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X["g"].All,a=arguments.length>5?arguments[5]:void 0,s=g["k"]("/rooms/$roomId/threads",{$roomId:e}),c={limit:n.toString(),dir:i,include:Object(X["i"])(o)};t&&(c.from=t);var l,d={};(null!==(r=this.clientOpts)&&void 0!==r&&r.lazyLoadMembers&&(d=he({},p["a"].LAZY_LOADING_MESSAGES_FILTER)),a)&&(d=he(he({},d),null===(l=a.getRoomTimelineFilterComponent())||void 0===l?void 0:l.toJSON()));Object.keys(d).length&&(c.filter=JSON.stringify(d));var u={prefix:X["e"].hasServerSideListSupport===X["c"].Stable?C["a"].V1:"/_matrix/client/unstable/org.matrix.msc3856"};return this.http.authedRequest(C["i"].Get,s,c,void 0,u).then(e=>{var t;return he(he({},e),{},{chunk:null===(t=e.chunk)||void 0===t?void 0:t.reverse(),start:e.prev_batch,end:e.next_batch})})}paginateEventTimeline(e,t){var r=this,n=e.getTimelineSet()===this.notifTimelineSet,i=this.getRoom(e.getRoomId()),o=e.getTimelineSet().threadListType,a=e.getTimelineSet().thread;t=t||{};var c=t.backwards||!1;if(n&&!c)throw new Error("paginateNotifTimeline can only paginate backwards");var l,d,u,h,f=c?y["b"].BACKWARDS:y["b"].FORWARDS,p=e.getPaginationToken(f),v=e.paginationRequests[f];if(v)return v;if(n)l="/notifications",d={limit:(null!==(h=t.limit)&&void 0!==h?h:30).toString(),only:"highlight"},p&&"end"!==p&&(d.from=p),u=this.http.authedRequest(C["i"].Get,l,d).then(function(){var t=s()((function*(t){var n=t.next_token,i=[];t.notifications=t.notifications.filter(g["x"]);for(var o=0;o<t.notifications.length;o++){var a=t.notifications[o],s=r.getEventMapper()(a.event);r.getPushDetailsForEvent(s,!0),s.event.room_id=a.room_id,i[o]=s}var l=e.getTimelineSet();return l.addEventsToTimeline(i,c,e,n),r.processAggregatedTimelineEvents(l.room,i),c&&!t.next_token&&e.setPaginationToken(null,f),Boolean(t.next_token)}));return function(e){return t.apply(this,arguments)}}()).finally(()=>{e.paginationRequests[f]=null}),e.paginationRequests[f]=u;else if(null!==o){if(!i)throw new Error("Unknown room "+e.getRoomId());if(!X["e"].hasServerSideFwdPaginationSupport&&f===y["a"].Forward)throw new Error("Cannot paginate threads forwards without server-side support for MSC 3715");u=this.createThreadListMessagesRequest(e.getRoomId(),p,t.limit,f,o,e.getFilter()).then(t=>{if(t.state){var r=e.getState(f),n=t.state.filter(g["x"]).map(this.getEventMapper());r.setUnknownStateEvents(n)}var o=t.end,a=t.chunk.filter(g["x"]).map(this.getEventMapper()),s=e.getTimelineSet();return s.addEventsToTimeline(a,c,e,o),this.processAggregatedTimelineEvents(i,a),this.processThreadRoots(i,a,c),c&&t.end==t.start&&e.setPaginationToken(null,f),t.end!==t.start}).finally(()=>{e.paginationRequests[f]=null}),e.paginationRequests[f]=u}else if(a){var m,b,_=this.getRoom(null!==(m=e.getRoomId())&&void 0!==m?m:void 0);if(!_)throw new Error("Unknown room "+e.getRoomId());var w=this.canSupport.get(re["a"].RelationsRecursion)!==re["b"].Unsupported;u=this.fetchRelations(null!==(b=e.getRoomId())&&void 0!==b?b:"",a.id,null,null,{dir:f,limit:t.limit,from:null!==p&&void 0!==p?p:void 0,recurse:w||void 0}).then(function(){var t=s()((function*(t){var n=r.getEventMapper(),i=t.chunk.filter(g["x"]).filter(Object(ae["a"])(a.id)).map(n);for(var o of i.slice().reverse()){yield null===a||void 0===a?void 0:a.processEvent(o);var s=o.getSender();c&&null!==(null===a||void 0===a?void 0:a.getEventReadUpTo(s))||_.addLocalEchoReceipt(s,o,Y["b"].Read)}var l=t.next_batch,d=e.getTimelineSet();if(d.addEventsToTimeline(i,c,e,null!==l&&void 0!==l?l:null),!l&&c){var u,h,p=null!==(u=a.rootEvent)&&void 0!==u?u:n(yield r.fetchRoomEvent(null!==(h=e.getRoomId())&&void 0!==h?h:"",a.id));d.addEventsToTimeline([p],!0,e,null)}return r.processAggregatedTimelineEvents(d.room,i),c&&!l&&e.setPaginationToken(null,f),Boolean(l)}));return function(e){return t.apply(this,arguments)}}()).finally(()=>{e.paginationRequests[f]=null}),e.paginationRequests[f]=u}else{if(!i)throw new Error("Unknown room "+e.getRoomId());u=this.createMessagesRequest(e.getRoomId(),p,t.limit,f,e.getFilter()).then(t=>{if(t.state){var r=e.getState(f),n=t.state.filter(g["x"]).map(this.getEventMapper());r.setUnknownStateEvents(n)}var o=t.end,a=t.chunk.filter(g["x"]).map(this.getEventMapper()),s=e.getTimelineSet(),[l,,d]=i.partitionThreadedEvents(a);s.addEventsToTimeline(l,c,e,o),this.processAggregatedTimelineEvents(i,l),this.processThreadRoots(i,l.filter(e=>e.getServerAggregatedRelation(X["d"].name)),!1),d.forEach(e=>i.relations.aggregateChildEvent(e));var u=void 0===t.end||t.end===t.start;return c&&u&&e.setPaginationToken(null,f),!u}).finally(()=>{e.paginationRequests[f]=null}),e.paginationRequests[f]=u}return u}resetNotifTimelineSet(){this.notifTimelineSet&&this.notifTimelineSet.resetLiveTimeline("end")}peekInRoom(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return null===(t=this.peekSync)||void 0===t||t.stopPeeking(),this.peekSync=new d["b"](this,this.clientOpts,this.buildSyncApiOptions()),this.peekSync.peek(e,r)}stopPeeking(){this.peekSync&&(this.peekSync.stopPeeking(),this.peekSync=null)}setGuestAccess(e,t){var r=this.sendStateEvent(e,U["b"].RoomGuestAccess,{guest_access:t.allowJoin?F["a"].CanJoin:F["a"].Forbidden},""),n=Promise.resolve();return t.allowRead&&(n=this.sendStateEvent(e,U["b"].RoomHistoryVisibility,{history_visibility:F["b"].WorldReadable},"")),Promise.all([n,r]).then()}setInvitedAccess(e){var t=Promise.resolve(void 0);return t=this.sendStateEvent(e,U["b"].RoomHistoryVisibility,{history_visibility:F["b"].Invited},""),Promise.all([t]).then()}requestRegisterEmailToken(e,t,r,n){return this.requestTokenFromEndpoint("/register/email/requestToken",{email:e,client_secret:t,send_attempt:r,next_link:n})}requestRegisterMsisdnToken(e,t,r,n,i){return this.requestTokenFromEndpoint("/register/msisdn/requestToken",{country:e,phone_number:t,client_secret:r,send_attempt:n,next_link:i})}requestAdd3pidEmailToken(e,t,r,n){return this.requestTokenFromEndpoint("/account/3pid/email/requestToken",{email:e,client_secret:t,send_attempt:r,next_link:n})}requestAdd3pidMsisdnToken(e,t,r,n,i){return this.requestTokenFromEndpoint("/account/3pid/msisdn/requestToken",{country:e,phone_number:t,client_secret:r,send_attempt:n,next_link:i})}requestPasswordEmailToken(e,t,r,n){return this.requestTokenFromEndpoint("/account/password/email/requestToken",{email:e,client_secret:t,send_attempt:r,next_link:n})}requestPasswordMsisdnToken(e,t,r,n,i){return this.requestTokenFromEndpoint("/account/password/msisdn/requestToken",{country:e,phone_number:t,client_secret:r,send_attempt:n,next_link:i})}requestTokenFromEndpoint(e,t){var r=this;return s()((function*(){var n=Object.assign({},t);return r.http.request(C["i"].Post,e,void 0,n)}))()}getRoomPushRule(e,t){var r,n;if(this.pushRules)return null===(r=this.pushRules[e])||void 0===r||null===(n=r.room)||void 0===n?void 0:n.find(e=>e.rule_id===t);throw new Error("SyncApi.sync() must be done before accessing to push rules.")}setRoomMutePushRule(e,t,r){var n,i=!1,o=this.getRoomPushRule(e,t);if(null!==o&&void 0!==o&&o.actions.includes($["d"].DontNotify)&&(i=!0),r)if(o){if(!i){var a=g["i"]();this.deletePushRule(e,$["e"].RoomSpecific,o.rule_id).then(()=>{this.addPushRule(e,$["e"].RoomSpecific,t,{actions:[$["d"].DontNotify]}).then(()=>{a.resolve()}).catch(e=>{a.reject(e)})}).catch(e=>{a.reject(e)}),n=a.promise}}else n=this.addPushRule(e,$["e"].RoomSpecific,t,{actions:[$["d"].DontNotify]});else i&&(n=this.deletePushRule(e,$["e"].RoomSpecific,o.rule_id));if(n)return new Promise((e,t)=>{n.then(()=>{this.getPushRules().then(t=>{this.pushRules=t,e()}).catch(e=>{t(e)})}).catch(e=>{this.getPushRules().then(r=>{this.pushRules=r,t(e)}).catch(r=>{t(e)})})})}searchMessageText(e){var t={search_term:e.query};return"keys"in e&&(t.keys=e.keys),this.search({body:{search_categories:{room_events:t}}})}searchRoomEvents(e){var t={search_categories:{room_events:{search_term:e.term,filter:e.filter,order_by:W["a"].Recent,event_context:{before_limit:1,after_limit:1,include_profile:!0}}}},r={_query:t,results:[],highlights:[]};return this.search({body:t}).then(e=>this.processRoomEventsSearch(r,e))}backPaginateRoomEventsSearch(e){if(!e.next_batch)return Promise.reject(new Error("Cannot backpaginate event search any further"));if(e.pendingRequest)return e.pendingRequest;var t={body:e._query,next_batch:e.next_batch},r=this.search(t,e.abortSignal).then(t=>this.processRoomEventsSearch(e,t)).finally(()=>{e.pendingRequest=void 0});return e.pendingRequest=r,r}processRoomEventsSearch(e,t){var r,n,i=t.search_categories.room_events;e.count=i.count,e.next_batch=i.next_batch;var o=new Set(i.highlights);e.highlights.forEach(e=>{o.add(e)}),e.highlights=Array.from(o);for(var a=this.getEventMapper(),s=null!==(r=null===(n=i.results)||void 0===n?void 0:n.length)&&void 0!==r?r:0,c=0;c<s;c++){var l=A["a"].fromJson(i.results[c],a),d=this.getRoom(l.context.getEvent().getRoomId());if(d)for(var u of l.context.getTimeline()){var h=d.getMember(u.getSender());!u.sender&&h&&(u.sender=h)}e.results.push(l)}return e}syncLeftRooms(){if(this.syncedLeftRooms)return Promise.resolve([]);if(this.syncLeftRoomsPromise)return this.syncLeftRoomsPromise;var e=new d["b"](this,this.clientOpts,this.buildSyncApiOptions());return this.syncLeftRoomsPromise=e.syncLeftRooms(),this.syncLeftRoomsPromise.then(()=>{this.logger.debug("Marking success of sync left room request"),this.syncedLeftRooms=!0}).finally(()=>{this.syncLeftRoomsPromise=void 0}),this.syncLeftRoomsPromise}createFilter(e){var t=g["k"]("/user/$userId/filter",{$userId:this.credentials.userId});return this.http.authedRequest(C["i"].Post,t,void 0,e).then(t=>{var r=p["a"].fromJson(this.credentials.userId,t.filter_id,e);return this.store.storeFilter(r),r})}getFilter(e,t,r){if(r){var n=this.store.getFilter(e,t);if(n)return Promise.resolve(n)}var i=g["k"]("/user/$userId/filter/$filterId",{$userId:e,$filterId:t});return this.http.authedRequest(C["i"].Get,i).then(r=>{var n=p["a"].fromJson(e,t,r);return this.store.storeFilter(n),n})}getOrCreateFilter(e,t){var r=this;return s()((function*(){var n,i=r.store.getFilterIdByName(e);if(i){try{var o=yield r.getFilter(r.credentials.userId,i,!0);if(o){var a=o.getDefinition(),s=t.getDefinition();g["f"](a,s)&&(n=i)}}catch(error){if("M_UNKNOWN"!==error.errcode&&"M_NOT_FOUND"!==error.errcode)throw error}n||r.store.setFilterIdByName(e,void 0)}if(n)return n;var c=yield r.createFilter(t.getDefinition());return r.store.setFilterIdByName(e,c.filterId),c.filterId}))()}getOpenIdToken(){var e=g["k"]("/user/$userId/openid/request_token",{$userId:this.credentials.userId});return this.http.authedRequest(C["i"].Post,e,void 0,{})}turnServer(){return this.http.authedRequest(C["i"].Get,"/voip/turnServer")}getTurnServers(){return this.turnServers||[]}getTurnServersExpiry(){return this.turnServersExpiry}get pollingTurnServers(){return void 0!==this.checkTurnServersIntervalID}checkTurnServers(){var e=this;return s()((function*(){if(e.canSupportVoip){var r=!1,n=e.turnServersExpiry-Date.now();if(n>me)e.logger.debug("TURN creds are valid for another "+n+" ms: not fetching new ones."),r=!0;else{var i=()=>{var e=["relay2.expressturn.com:443","relay3.expressturn.com:80","relay3.expressturn.com:443","relay4.expressturn.com:3478","relay5.expressturn.com:3478","relay6.expressturn.com:3478","relay7.expressturn.com:3478","relay8.expressturn.com:3478"];return e.map(e=>({urls:["turn:"+e],username:"efPU52K4SLOQ34W2QY",credential:"1TJPNFxHKXrZfelz"}))},o=()=>{var e=["relay1.expressturn.com:443","relay2.expressturn.com:443","relay3.expressturn.com:443","relay1.expressturn.com:3478","relay2.expressturn.com:3478","relay4.expressturn.com:3478","relay5.expressturn.com:3478","relay6.expressturn.com:3478","relay8.expressturn.com:3478","relay1.expressturn.com:80","stun.relay.metered.ca:80"];return e.map(e=>({urls:["stun:".concat(e)],username:"",credential:""}))},a=[{urls:["stun:stun.relay.metered.ca:80"],username:"",credential:""},{urls:["stun:global.stun.twilio.com:3478"],username:"",credential:""},{urls:["stun:stun.cloudflare.com:3478"],username:"",credential:""}],s=e=>e[Math.floor(Math.random()*e.length)];k["b"].debug("Fetching new TURN credentials");try{var c=s(i()),l=s(o()),d=s(a);e.turnServers=[c,l,d],e.turnServersExpiry=Date.now()+1e9,r=!0,e.emit(ke.TurnServers,e.turnServers)}catch(u){e.logger.error("Failed to get TURN URIs",u),403===u.httpStatus?(e.logger.info("TURN access unavailable for this account: stopping credentials checks"),null!==e.checkTurnServersIntervalID&&t.clearInterval(e.checkTurnServersIntervalID),e.checkTurnServersIntervalID=void 0,e.emit(ke.TurnServersError,u,!0)):e.emit(ke.TurnServersError,u,!1)}}return r}}))()}setFallbackICEServerAllowed(e){this.fallbackICEServerAllowed=e}isFallbackICEServerAllowed(){return this.fallbackICEServerAllowed}isSynapseAdministrator(){var e=g["k"]("/_synapse/admin/v1/users/$userId/admin",{$userId:this.getUserId()});return this.http.authedRequest(C["i"].Get,e,void 0,void 0,{prefix:""}).then(e=>e.admin)}whoisSynapseUser(e){var t=g["k"]("/_synapse/admin/v1/whois/$userId",{$userId:e});return this.http.authedRequest(C["i"].Get,t,void 0,void 0,{prefix:""})}deactivateSynapseUser(e){var t=g["k"]("/_synapse/admin/v1/deactivate/$userId",{$userId:e});return this.http.authedRequest(C["i"].Post,t,void 0,void 0,{prefix:""})}fetchClientWellKnown(){var e=this;return s()((function*(){var t;e.clientWellKnownPromise=_["a"].getRawClientConfig(null!==(t=e.getDomain())&&void 0!==t?t:void 0),e.clientWellKnown=yield e.clientWellKnownPromise,e.emit(ke.ClientWellKnown,e.clientWellKnown)}))()}getClientWellKnown(){return this.clientWellKnown}waitForClientWellKnown(){if(!this.clientRunning)throw new Error("Client is not running");return this.clientWellKnownPromise}storeClientOptions(){var e=["boolean","string","number"],t=Object.entries(this.clientOpts).filter(t=>{var[r,n]=t;return e.includes(typeof n)}).reduce((e,t)=>{var[r,n]=t;return e[r]=n,e},{});return this.store.storeClientOptions(t)}_unstable_getSharedRooms(e){var t=this;return s()((function*(){var r,n,i=yield t.doesServerSupportUnstableFeature(_e),o=yield t.doesServerSupportUnstableFeature(we),a=yield t.doesServerSupportUnstableFeature(Se);if(!i&&!o&&!a)throw Error("Server does not support the Mutual Rooms API");a?(r="/uk.half-shot.msc2666/user/mutual_rooms",n={user_id:e}):(r=g["k"]("/uk.half-shot.msc2666/user/".concat(o?"mutual_rooms":"shared_rooms","/$userId"),{$userId:e}),n={});var s=[],c=null;do{var l={};null!=c&&a&&(l["batch_token"]=c);var d=yield t.http.authedRequest(C["i"].Get,r,he(he({},n),l),void 0,{prefix:C["a"].Unstable});s.push(...d.joined),c=void 0!==d.next_batch_token?d.next_batch_token:null}while(null!=c);return s}))()}getVersions(){var e=this;return s()((function*(){if(e.serverVersionsPromise)return e.serverVersionsPromise;e.serverVersionsPromise=e.http.authedRequest(C["i"].Get,"/_matrix/client/versions",void 0,void 0,{prefix:""}).catch(t=>{throw e.serverVersionsPromise=void 0,t});var t=yield e.serverVersionsPromise;return e.canSupport=yield Object(re["c"])(t),e.serverVersionsPromise}))()}isVersionSupported(e){var t=this;return s()((function*(){var{versions:r}=yield t.getVersions();return r&&r.includes(e)}))()}doesServerSupportUnstableFeature(e){var t=this;return s()((function*(){var r=yield t.getVersions();if(!r)return!1;var n=r["unstable_features"];return n&&!!n[e]}))()}doesServerForceEncryptionForPreset(e){var t=this;return s()((function*(){var r=yield t.getVersions();if(!r)return!1;var n=r["unstable_features"],i=e.includes("_chat")?e.substring(0,e.indexOf("_chat")):e;return n&&!!n["io.element.e2ee_forced.".concat(i)]}))()}doesServerSupportThread(){var t=this;return s()((function*(){if(yield t.isVersionSupported("v1.4"))return{threads:X["c"].Stable,list:X["c"].Stable,fwdPagination:X["c"].Stable};try{var[r,n,i,o,a,s]=yield Promise.all([t.doesServerSupportUnstableFeature("org.matrix.msc3440"),t.doesServerSupportUnstableFeature("org.matrix.msc3440.stable"),t.doesServerSupportUnstableFeature("org.matrix.msc3856"),t.doesServerSupportUnstableFeature("org.matrix.msc3856.stable"),t.doesServerSupportUnstableFeature("org.matrix.msc3715"),t.doesServerSupportUnstableFeature("org.matrix.msc3715.stable")]);return{threads:Object(X["h"])(n,r),list:Object(X["h"])(o,i),fwdPagination:Object(X["h"])(s,a)}}catch(e){return{threads:X["c"].None,list:X["c"].None,fwdPagination:X["c"].None}}}))()}hasLazyLoadMembersEnabled(){var e;return!(null===(e=this.clientOpts)||void 0===e||!e.lazyLoadMembers)}setCanResetTimelineCallback(e){this.canResetTimelineCallback=e}getCanResetTimelineCallback(){return this.canResetTimelineCallback}relations(e,t,r,n){var i=arguments,o=this;return s()((function*(){var a,s,c=i.length>4&&void 0!==i[4]?i[4]:{dir:y["a"].Backward},l=n?o.getEncryptedIfNeededEventType(e,n):null,[d,u]=yield Promise.all([o.fetchRoomEvent(e,t),o.fetchRelations(e,t,r,l,c)]),h=o.getEventMapper(),f=d?h(d):void 0,p=u.chunk.map(h);if(l===U["b"].RoomMessageEncrypted){var v=f?p.concat(f):p;yield Promise.all(v.map(e=>o.decryptEventIfNeeded(e))),null!==n&&(p=p.filter(e=>e.getType()===n))}return f&&r===U["h"].Replace&&(p=p.filter(e=>e.getSender()===f.getSender())),{originalEvent:null!==f&&void 0!==f?f:null,events:p,nextBatch:null!==(a=u.next_batch)&&void 0!==a?a:null,prevBatch:null!==(s=u.prev_batch)&&void 0!==s?s:null}}))()}getCrossSigningCacheCallbacks(){var e;return null===(e=this.crypto)||void 0===e?void 0:e.crossSigningInfo.getCacheCallbacks()}generateClientSecret(){return Object(K["a"])(32)}decryptEventIfNeeded(e,t){return e.shouldAttemptDecryption()&&this.isCryptoEnabled()&&e.attemptDecryption(this.cryptoBackend,t),e.isBeingDecrypted()?e.getDecryptionPromise():Promise.resolve()}termsUrlForService(e,t){switch(e){case I["a"].IS:return this.http.getUrl("/terms",void 0,C["e"].V2,t);case I["a"].IM:return this.http.getUrl("/terms",void 0,"/_matrix/integrations/v1",t);default:throw new Error("Unsupported service type")}}getHomeserverUrl(){return this.baseUrl}getIdentityServerUrl(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r&&(null!==(e=this.idBaseUrl)&&void 0!==e&&e.startsWith("http://")||null!==(t=this.idBaseUrl)&&void 0!==t&&t.startsWith("https://"))?this.idBaseUrl.split("://")[1]:this.idBaseUrl}setIdentityServerUrl(e){this.idBaseUrl=g["l"](e),this.http.setIdBaseUrl(this.idBaseUrl)}getAccessToken(){return this.http.opts.accessToken||null}getRefreshToken(){var e;return null!==(e=this.http.opts.refreshToken)&&void 0!==e?e:null}setAccessToken(e){this.http.opts.accessToken=e,this.serverVersionsPromise=void 0}isLoggedIn(){return void 0!==this.http.opts.accessToken}makeTxnId(){return"m"+(new Date).getTime()+"."+this.txnCtr++}isUsernameAvailable(e){return this.http.authedRequest(C["i"].Get,"/register/available",{username:e}).then(e=>e.available).catch(e=>"M_USER_IN_USE"!==e.errcode&&Promise.reject(e))}register(e,t,r,n,i,o,a){r&&(n.session=r);var s={auth:n,refresh_token:!0};return void 0!==e&&null!==e&&(s.username=e),void 0!==t&&null!==t&&(s.password=t),void 0!==o&&null!==o&&(s.guest_access_token=o),void 0!==a&&null!==a&&(s.inhibit_login=a),this.registerRequest(s)}registerGuest(){var{body:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.registerRequest(e||{},"guest")}registerRequest(e,t){var r={};return t&&(r.kind=t),this.http.request(C["i"].Post,"/register",r,e)}refreshToken(e){var t=t=>this.http.authedRequest(C["i"].Post,"/refresh",void 0,{refresh_token:e},{prefix:t,inhibitLogoutEmit:!0});return t(C["a"].V3).catch(e=>{if("M_UNRECOGNIZED"===e.errcode)return t(C["a"].V1);throw e})}loginFlows(){return this.http.request(C["i"].Get,"/login")}login(e,t){return this.http.authedRequest(C["i"].Post,"/login",void 0,he(he({},t),{},{type:e})).then(e=>(e.access_token&&e.user_id&&(this.http.opts.accessToken=e.access_token,this.credentials={userId:e.user_id}),e))}loginWithPassword(e,t){return this.login("m.login.password",{user:e,password:t})}getCasLoginUrl(e){return this.getSsoLoginUrl(e,"cas")}getSsoLoginUrl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sso",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i="/login/"+t+"/redirect";r&&(i+="/"+r);var o={redirectUrl:e,[Ce.unstable]:n};return this.http.getUrl(i,o).href}loginWithToken(e){return this.login("m.login.token",{token:e})}logout(){var e=arguments,t=this;return s()((function*(){var r,n,i=e.length>0&&void 0!==e[0]&&e[0];if(null!==(r=t.crypto)&&void 0!==r&&null!==(n=r.backupManager)&&void 0!==n&&n.getKeyBackupEnabled())try{while((yield t.crypto.backupManager.backupPendingKeys(200))>0);}catch(o){t.logger.error("Key backup request failed when logging out. Some keys may be missing from backup",o)}return i&&(t.stopClient(),t.http.abort()),t.http.authedRequest(C["i"].Post,"/logout")}))()}deactivateAccount(e,t){var r={};return e&&(r.auth=e),void 0!==t&&(r.erase=t),this.http.authedRequest(C["i"].Post,"/account/deactivate",void 0,r)}requestLoginToken(e){var t=this;return s()((function*(){var r={auth:e};return t.http.authedRequest(C["i"].Post,"/login/get_token",void 0,r,{prefix:C["a"].V1})}))()}getFallbackAuthUrl(e,t){var r=g["k"]("/auth/$loginType/fallback/web",{$loginType:e});return this.http.getUrl(r,{session:t}).href}createRoom(e){var t=this;return s()((function*(){var r,n=(e.invite_3pid||[]).filter(e=>!e.id_access_token);if(n.length>0&&null!==(r=t.identityServer)&&void 0!==r&&r.getAccessToken){var i=yield t.identityServer.getAccessToken();if(i)for(var o of n)o.id_access_token=i}return t.http.authedRequest(C["i"].Post,"/createRoom",void 0,e)}))()}fetchRelations(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{dir:y["a"].Backward},o=i;X["e"].hasServerSideFwdPaginationSupport===X["c"].Experimental&&(o=Object(g["H"])("dir","org.matrix.msc3715.dir",o)),this.canSupport.get(re["a"].RelationsRecursion)===re["b"].Unstable&&(o=Object(g["H"])("recurse","org.matrix.msc3981.recurse",o));var a=g["j"](o),s="/rooms/$roomId/relations/$eventId";null!==r?(s+="/$relationType",null!==n&&(s+="/$eventType")):null!==n&&(this.logger.warn("eventType: ".concat(n," ignored when fetching\n            relations as relationType is null")),n=null);var c=g["k"](s+"?"+a,{$roomId:e,$eventId:t,$relationType:r,$eventType:n});return this.http.authedRequest(C["i"].Get,c,void 0,void 0,{prefix:C["a"].V1})}roomState(e){var t=g["k"]("/rooms/$roomId/state",{$roomId:e});return this.http.authedRequest(C["i"].Get,t)}fetchRoomEvent(e,t){var r=g["k"]("/rooms/$roomId/event/$eventId",{$roomId:e,$eventId:t});return this.http.authedRequest(C["i"].Get,r)}members(e,t,r,n){var i={};t&&(i.membership=t),r&&(i.not_membership=r),n&&(i.at=n);var o=g["j"](i),a=g["k"]("/rooms/$roomId/members?"+o,{$roomId:e});return this.http.authedRequest(C["i"].Get,a)}upgradeRoom(e,t){var r=g["k"]("/rooms/$roomId/upgrade",{$roomId:e});return this.http.authedRequest(C["i"].Post,r,void 0,{new_version:t})}getStateEvent(e,t,r){var n={$roomId:e,$eventType:t,$stateKey:r},i=g["k"]("/rooms/$roomId/state/$eventType",n);return void 0!==r&&(i=g["k"](i+"/$stateKey",n)),this.http.authedRequest(C["i"].Get,i)}sendStateEvent(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o={$roomId:e,$eventType:t,$stateKey:n},a=g["k"]("/rooms/$roomId/state/$eventType",o);return void 0!==n&&(a=g["k"](a+"/$stateKey",o)),this.http.authedRequest(C["i"].Put,a,void 0,r,i)}roomInitialSync(e,t){var r,n=g["k"]("/rooms/$roomId/initialSync",{$roomId:e});return this.http.authedRequest(C["i"].Get,n,{limit:null!==(r=null===t||void 0===t?void 0:t.toString())&&void 0!==r?r:"30"})}setRoomReadMarkersHttpRequest(e,t,r,n){var i=this;return s()((function*(){var o=g["k"]("/rooms/$roomId/read_markers",{$roomId:e}),a={[Y["b"].FullyRead]:t,[Y["b"].Read]:r};return((yield i.doesServerSupportUnstableFeature("org.matrix.msc2285.stable"))||(yield i.isVersionSupported("v1.4")))&&(a[Y["b"].ReadPrivate]=n),i.http.authedRequest(C["i"].Post,o,void 0,a)}))()}getJoinedRooms(){var e=g["k"]("/joined_rooms",{});return this.http.authedRequest(C["i"].Get,e)}getJoinedRoomMembers(e){var t=g["k"]("/rooms/$roomId/joined_members",{$roomId:e});return this.http.authedRequest(C["i"].Get,t)}publicRooms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{server:t,limit:r,since:n}=e,i=o()(e,de);if(0===Object.keys(i).length){var a={server:t,limit:r,since:n};return this.http.authedRequest(C["i"].Get,"/publicRooms",a)}var s={server:t},c=he({limit:r,since:n},i);return this.http.authedRequest(C["i"].Post,"/publicRooms",s,c)}createAlias(e,t){var r=g["k"]("/directory/room/$alias",{$alias:e}),n={room_id:t};return this.http.authedRequest(C["i"].Put,r,void 0,n)}deleteAlias(e){var t=g["k"]("/directory/room/$alias",{$alias:e});return this.http.authedRequest(C["i"].Delete,t)}getLocalAliases(e){var t=g["k"]("/rooms/$roomId/aliases",{$roomId:e}),r=C["a"].V3;return this.http.authedRequest(C["i"].Get,t,void 0,void 0,{prefix:r})}getRoomIdForAlias(e){var t=g["k"]("/directory/room/$alias",{$alias:e});return this.http.authedRequest(C["i"].Get,t)}getRoomDirectoryVisibility(e){var t=g["k"]("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(C["i"].Get,t)}setRoomDirectoryVisibility(e,t){var r=g["k"]("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(C["i"].Put,r,void 0,{visibility:t})}searchUserDirectory(e){var{term:t,limit:r}=e,n={search_term:t};return void 0!==r&&(n.limit=r),this.http.authedRequest(C["i"].Post,"/user_directory/search",void 0,n)}uploadContent(e,t){return this.http.uploadContent(e,t)}cancelUpload(e){return this.http.cancelUpload(e)}getCurrentUploads(){return this.http.getCurrentUploads()}getProfileInfo(e,t){var r=t?g["k"]("/profile/$userId/$info",{$userId:e,$info:t}):g["k"]("/profile/$userId",{$userId:e});return this.http.authedRequest(C["i"].Get,r)}getThreePids(){return this.http.authedRequest(C["i"].Get,"/account/3pid")}addThreePidOnly(e){var t=this;return s()((function*(){var r="/account/3pid/add";return t.http.authedRequest(C["i"].Post,r,void 0,e)}))()}bindThreePid(e){var t=this;return s()((function*(){var r="/account/3pid/bind";return t.http.authedRequest(C["i"].Post,r,void 0,e)}))()}unbindThreePid(e,t){var r=this;return s()((function*(){var n="/account/3pid/unbind",i={medium:e,address:t,id_server:r.getIdentityServerUrl(!0)};return r.http.authedRequest(C["i"].Post,n,void 0,i)}))()}deleteThreePid(e,t){var r="/account/3pid/delete";return this.http.authedRequest(C["i"].Post,r,void 0,{medium:e,address:t})}setPassword(e,t,r){var n="/account/password",i={auth:e,new_password:t,logout_devices:r};return this.http.authedRequest(C["i"].Post,n,void 0,i)}getDevices(){return this.http.authedRequest(C["i"].Get,"/devices")}getDevice(e){var t=g["k"]("/devices/$device_id",{$device_id:e});return this.http.authedRequest(C["i"].Get,t)}setDeviceDetails(e,t){var r=g["k"]("/devices/$device_id",{$device_id:e});return this.http.authedRequest(C["i"].Put,r,void 0,t)}deleteDevice(e,t){var r=g["k"]("/devices/$device_id",{$device_id:e}),n={};return t&&(n.auth=t),this.http.authedRequest(C["i"].Delete,r,void 0,n)}deleteMultipleDevices(e,t){var r={devices:e};t&&(r.auth=t);var n="/delete_devices";return this.http.authedRequest(C["i"].Post,n,void 0,r)}getPushers(){var e=this;return s()((function*(){var t=yield e.http.authedRequest(C["i"].Get,"/pushers");return(yield e.doesServerSupportUnstableFeature("org.matrix.msc3881"))||(t.pushers=t.pushers.map(e=>(e.hasOwnProperty(U["g"].name)||(e[U["g"].name]=!0),e))),t}))()}setPusher(e){var t="/pushers/set";return this.http.authedRequest(C["i"].Post,t,void 0,e)}removePusher(e,t){var r="/pushers/set",n={pushkey:e,app_id:t,kind:null};return this.http.authedRequest(C["i"].Post,r,void 0,n)}setLocalNotificationSettings(e,t){var r="".concat(U["c"].name,".").concat(e);return this.setAccountData(r,t)}getPushRules(){return this.http.authedRequest(C["i"].Get,"/pushrules/").then(e=>(this.setPushRules(e),this.pushRules))}setPushRules(e){this.pushRules=b["a"].rewriteDefaultRules(e,this.getUserId()),this.pushProcessor.updateCachedPushRuleKeys(this.pushRules)}addPushRule(e,t,r,n){var i=g["k"]("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:r});return this.http.authedRequest(C["i"].Put,i,void 0,n)}deletePushRule(e,t,r){var n=g["k"]("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:r});return this.http.authedRequest(C["i"].Delete,n)}setPushRuleEnabled(e,t,r,n){var i=g["k"]("/pushrules/"+e+"/$kind/$ruleId/enabled",{$kind:t,$ruleId:r});return this.http.authedRequest(C["i"].Put,i,void 0,{enabled:n})}setPushRuleActions(e,t,r,n){var i=g["k"]("/pushrules/"+e+"/$kind/$ruleId/actions",{$kind:t,$ruleId:r});return this.http.authedRequest(C["i"].Put,i,void 0,{actions:n})}search(e,t){var{body:r,next_batch:n}=e,i={};return n&&(i.next_batch=n),this.http.authedRequest(C["i"].Post,"/search",i,r,{abortSignal:t})}uploadKeysRequest(e,t){return this.http.authedRequest(C["i"].Post,"/keys/upload",void 0,e)}uploadKeySignatures(e){return this.http.authedRequest(C["i"].Post,"/keys/signatures/upload",void 0,e)}downloadKeysForUsers(e){var{token:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={device_keys:{}};return void 0!==t&&(r.token=t),e.forEach(e=>{r.device_keys[e]=[]}),this.http.authedRequest(C["i"].Post,"/keys/query",void 0,r)}claimOneTimeKeys(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signed_curve25519",r=arguments.length>2?arguments[2]:void 0,n={};for(var[i,o]of(void 0===t&&(t="signed_curve25519"),e)){var a=n[i]||{};Object(g["I"])(n,i,a),Object(g["I"])(a,o,t)}var s={one_time_keys:n};r&&(s.timeout=r);var c="/keys/claim";return this.http.authedRequest(C["i"].Post,c,void 0,s)}getKeyChanges(e,t){var r={from:e,to:t};return this.http.authedRequest(C["i"].Get,"/keys/changes",r)}uploadDeviceSigningKeys(e,t){var r=Object.assign({},t);return e&&Object.assign(r,{auth:e}),this.http.authedRequest(C["i"].Post,"/keys/device_signing/upload",void 0,r,{prefix:C["a"].Unstable})}registerWithIdentityServer(e){if(!this.idBaseUrl)throw new Error("No identity server base URL set");var t=this.http.getUrl("/account/register",void 0,C["e"].V2,this.idBaseUrl);return this.http.requestOtherUrl(C["i"].Post,t,e)}requestEmailToken(e,t,r,n,i){var o={client_secret:t,email:e,send_attempt:null===r||void 0===r?void 0:r.toString()};return n&&(o.next_link=n),this.http.idServerRequest(C["i"].Post,"/validate/email/requestToken",o,C["e"].V2,i)}requestMsisdnToken(e,t,r,n,i,o){var a={client_secret:r,country:e,phone_number:t,send_attempt:null===n||void 0===n?void 0:n.toString()};return i&&(a.next_link=i),this.http.idServerRequest(C["i"].Post,"/validate/msisdn/requestToken",a,C["e"].V2,o)}submitMsisdnToken(e,t,r,n){var i={sid:e,client_secret:t,token:r};return this.http.idServerRequest(C["i"].Post,"/validate/msisdn/submitToken",i,C["e"].V2,null!==n&&void 0!==n?n:void 0)}submitMsisdnTokenOtherUrl(e,t,r,n){var i={sid:t,client_secret:r,token:n};return this.http.requestOtherUrl(C["i"].Post,e,i)}getIdentityHashDetails(e){return this.http.idServerRequest(C["i"].Get,"/hash_details",void 0,C["e"].V2,e)}identityHashedLookup(e,t){var r=this;return s()((function*(){var n={},i=yield r.getIdentityHashDetails(t);if(!i||!i["lookup_pepper"]||!i["algorithms"])throw new Error("Unsupported identity server: bad response");n["pepper"]=i["lookup_pepper"];var o={};if(i["algorithms"].includes("sha256"))n["addresses"]=yield Promise.all(e.map(function(){var e=s()((function*(e){var t=e[0].toLowerCase(),r=e[1].toLowerCase(),i=yield Object(le["a"])("".concat(t," ").concat(r," ").concat(n["pepper"])),a=Object(S["d"])(i);return o[a]=e[0],a}));return function(t){return e.apply(this,arguments)}}())),n["algorithm"]="sha256";else{if(!i["algorithms"].includes("none"))throw new Error("Unsupported identity server: unknown hash algorithm");n["addresses"]=e.map(e=>{var t=e[0].toLowerCase(),r=e[1].toLowerCase(),n="".concat(t," ").concat(r);return o[n]=e[0],n}),n["algorithm"]="none"}var a=yield r.http.idServerRequest(C["i"].Post,"/lookup",n,C["e"].V2,t);if(null===a||void 0===a||!a["mappings"])return[];var c=[];for(var l of Object.keys(a["mappings"])){var d=a["mappings"][l],u=o[l];if(!u)throw new Error("Identity server returned more results than expected");c.push({address:u,mxid:d})}return c}))()}lookupThreePid(e,t,r){var n=this;return s()((function*(){var i=yield n.identityHashedLookup([[t,e]],r),o=i.find(e=>e.address===t);if(!o)return{};var a={address:t,medium:e,mxid:o.mxid};return a}))()}bulkLookupThreePids(e,t){var r=this;return s()((function*(){var n=yield r.identityHashedLookup(e.map(e=>[e[1],e[0]]),t),i=[],o=function*(t){var r=e.find(e=>e[1]===t.address);if(!r)throw new Error("Identity sever returned unexpected results");i.push([r[0],t.address,t.mxid])};for(var a of n)yield*o(a);return{threepids:i}}))()}getIdentityAccount(e){return this.http.idServerRequest(C["i"].Get,"/account",void 0,C["e"].V2,e)}sendToDevice(e,t,r){var n=g["k"]("/sendToDevice/$eventType/$txnId",{$eventType:e,$txnId:r||this.makeTxnId()}),i={messages:g["C"](t)},o=new Map;for(var[a,s]of t)o.set(a,Array.from(s.keys()));return this.logger.debug("PUT ".concat(n),o),this.http.authedRequest(C["i"].Put,n,void 0,i)}queueToDevice(e){return this.toDeviceMessageQueue.queueBatch(e)}getThirdpartyProtocols(){return this.http.authedRequest(C["i"].Get,"/thirdparty/protocols").then(e=>{if(!e||"object"!==typeof e)throw new Error("/thirdparty/protocols did not return an object: ".concat(e));return e})}getThirdpartyLocation(e,t){var r=g["k"]("/thirdparty/location/$protocol",{$protocol:e});return this.http.authedRequest(C["i"].Get,r,t)}getThirdpartyUser(e,t){var r=g["k"]("/thirdparty/user/$protocol",{$protocol:e});return this.http.authedRequest(C["i"].Get,r,t)}getTerms(e,t){var r=this.termsUrlForService(e,t);return this.http.requestOtherUrl(C["i"].Get,r)}agreeToTerms(e,t,r,n){var i=this.termsUrlForService(e,t),o={Authorization:"Bearer "+r};return this.http.requestOtherUrl(C["i"].Post,i,{user_accepts:n},{headers:o})}reportEvent(e,t,r,n){var i=g["k"]("/rooms/$roomId/report/$eventId",{$roomId:e,$eventId:t});return this.http.authedRequest(C["i"].Post,i,void 0,{score:r,reason:n})}getRoomHierarchy(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=g["k"]("/rooms/$roomId/hierarchy",{$roomId:e}),a={suggested_only:String(n),max_depth:null===r||void 0===r?void 0:r.toString(),from:i,limit:null===t||void 0===t?void 0:t.toString()};return this.http.authedRequest(C["i"].Get,o,a,void 0,{prefix:C["a"].V1}).catch(e=>{if("M_UNRECOGNIZED"===e.errcode)return this.http.authedRequest(C["i"].Get,o,a,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc2946"});throw e})}unstableCreateFileTree(e){var t=this;return s()((function*(){var{room_id:r}=yield t.createRoom({name:e,preset:F["d"].PrivateChat,power_level_content_override:he(he({},V["a"]),{},{users:{[t.getUserId()]:100}}),creation_content:{[U["i"]]:U["j"].Space},initial_state:[{type:U["q"].name,state_key:U["t"].name,content:{[U["p"].name]:!0}},{type:U["b"].RoomEncryption,state_key:"",content:{algorithm:w["MEGOLM_ALGORITHM"]}}]});return new V["b"](t,r)}))()}unstableGetFileTreeSpace(e){var t,r,n=this.getRoom(e);if((null===n||void 0===n?void 0:n.getMyMembership())!==se["a"].Join)return null;var i=n.currentState.getStateEvents(U["b"].RoomCreate,""),o=n.currentState.getStateEvents(U["q"].name,U["t"].name);if(!i)throw new Error("Expected single room create event");return null!==o&&void 0!==o&&null!==(t=o.getContent())&&void 0!==t&&t[U["p"].name]?(null===(r=i.getContent())||void 0===r?void 0:r[U["i"]])!==U["j"].Space?null:new V["b"](this,e):null}slidingSync(e,t,r){var n={};e.pos&&(n.pos=e.pos,delete e.pos),e.timeout&&(n.timeout=e.timeout,delete e.timeout);var i=e.clientTimeout;return delete e.clientTimeout,this.http.authedRequest(C["i"].Post,"/sync",n,e,{prefix:"/_matrix/client/unstable/org.matrix.msc3575",baseUrl:t,localTimeoutMs:i,abortSignal:r})}supportsThreads(){var e;return(null===(e=this.clientOpts)||void 0===e?void 0:e.threadSupport)||!1}supportsIntentionalMentions(){return this.canSupport.get(re["a"].IntentionalMentions)!==re["b"].Unsupported}getRoomSummary(t,r){var n=this;return s()((function*(){var i={prefix:"/_matrix/client/unstable/im.nheko.summary"};try{var o=g["k"]("/summary/$roomid",{$roomid:t});return yield n.http.authedRequest(C["i"].Get,o,{via:r},void 0,i)}catch(e){if(e instanceof C["f"]&&"M_UNRECOGNIZED"===e.errcode){var a=g["k"]("/rooms/$roomid/summary",{$roomid:t});return yield n.http.authedRequest(C["i"].Get,a,{via:r},void 0,i)}throw e}}))()}processThreadEvents(e,t,r){e.processThreadedEvents(t,r)}processThreadRoots(e,t,r){this.supportsThreads()&&e.processThreadRoots(t,r)}processBeaconEvents(e,t){this.processAggregatedTimelineEvents(e,t)}processAggregatedTimelineEvents(e,t){null!==t&&void 0!==t&&t.length&&e&&(e.currentState.processBeaconEvents(t,this),e.processPollEvents(t))}whoami(){var e=this;return s()((function*(){return e.http.authedRequest(C["i"].Get,"/account/whoami")}))()}timestampToEvent(e,t,r){var n=this;return s()((function*(){var i=g["k"]("/rooms/$roomId/timestamp_to_event",{$roomId:e}),o={ts:t.toString(),dir:r};try{return yield n.http.authedRequest(C["i"].Get,i,o,void 0,{prefix:C["a"].V1})}catch(a){if("M_UNRECOGNIZED"===a.errcode&&(400===a.httpStatus||404===a.httpStatus||405===a.httpStatus))return yield n.http.authedRequest(C["i"].Get,i,o,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc3030"});throw a}}))()}getAuthIssuer(){var e=this;return s()((function*(){return e.http.request(C["i"].Get,"/auth_issuer",void 0,void 0,{prefix:C["a"].Unstable+"/org.matrix.msc2965"})}))()}}function Re(e){return Object.fromEntries(Object.entries(e).map(e=>{var[t,r]=e;return["".concat(Ee,".").concat(t),r]}))}function xe(e,t){var r,n=e.getUserId(),i=t.getId(),o=e.getRoom(t.getRoomId());if(o&&n&&i)if(o.findEventById(i)){var a,s=!!t.threadRootId&&!t.isThreadRoot;if(s){var c=o.getThread(t.threadRootId);a=!c||c.hasUserReadEvent(n,i)}else a=o.hasUserReadEvent(n,i);if(!a){var l=e.getPushActionsForEvent(t,!0),d=!(null===l||void 0===l||null===(r=l.tweaks)||void 0===r||!r.highlight);if(d){var u=o.getUnreadCountForEventContext(L["b"].Highlight,t)+1;s?o.setThreadUnreadNotificationCount(t.threadRootId,L["b"].Highlight,u):o.setUnreadNotificationCount(L["b"].Highlight,u)}var h=!(null===l||void 0===l||!l.notify);if(h){var f=o.getUnreadCountForEventContext(L["b"].Total,t)+1;s?o.setThreadUnreadNotificationCount(t.threadRootId,L["b"].Total,f):o.setUnreadNotificationCount(L["b"].Total,f)}}}else k["b"].info("Decrypted event ".concat(t.getId()," is not in room ").concat(o.roomId,": ignoring"))}function Oe(e){return Me(e)?Y["a"]:e.threadRootId}function Me(e){if(!e.threadRootId)return!0;if(e.isThreadRoot)return!0;if(!e.isRelation())return k["b"].warn("Event is not a relation or a thread root, but still has a threadRootId! id=".concat(e.getId())),!0;if(e.isRelation(X["d"].name))return!1;var t=e.relationEventId===e.threadRootId;return t}l()(Te,"RESTORE_BACKUP_ERROR_BAD_KEY","RESTORE_BACKUP_ERROR_BAD_KEY")}).call(this,n("c8ba"))},b07c:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("e7e1"),a=n("bde4");class s{constructor(){}importBlockCipherKey(e){return i(this,void 0,void 0,(function*(){return new o.default(e)}))}importCTRKey(e){return i(this,void 0,void 0,(function*(){return new a.default(new o.default(e))}))}}r.PolyfillCryptoProvider=s},b0d3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},b19a:function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var i=r("ad71"),o=r("dc14");r("3fb5")(l,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var c=a[s];l.prototype[c]||(l.prototype[c]=o.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||t.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r("4362"))},b244:function(e,t,r){var n=r("c92d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("4fe59d7e",n,e)}},b268:function(e,t,r){"use strict";r.r(t);var n=r("cef5");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},b313:function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:o.RFC3986,formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},b40f:function(e,t,r){"use strict";
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,i=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,a=/\\([\u000b\u0020-\u00ff])/g,s=/([\\"])/g,c=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function l(e){if(!e||"object"!==typeof e)throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!c.test(r))throw new TypeError("invalid type");var n=r;if(t&&"object"===typeof t)for(var i,a=Object.keys(t).sort(),s=0;s<a.length;s++){if(i=a[s],!o.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+h(t[i])}return n}function d(e){if(!e)throw new TypeError("argument string is required");var t="object"===typeof e?u(e):e;if("string"!==typeof t)throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),i=-1!==r?t.slice(0,r).trim():t.trim();if(!c.test(i))throw new TypeError("invalid media type");var o=new f(i.toLowerCase());if(-1!==r){var s,l,d;n.lastIndex=r;while(l=n.exec(t)){if(l.index!==r)throw new TypeError("invalid parameter format");r+=l[0].length,s=l[1].toLowerCase(),d=l[2],34===d.charCodeAt(0)&&(d=d.slice(1,-1),-1!==d.indexOf("\\")&&(d=d.replace(a,"$1"))),o.parameters[s]=d}if(r!==t.length)throw new TypeError("invalid parameter format")}return o}function u(e){var t;if("function"===typeof e.getHeader?t=e.getHeader("content-type"):"object"===typeof e.headers&&(t=e.headers&&e.headers["content-type"]),"string"!==typeof t)throw new TypeError("content-type header is missing from object");return t}function h(e){var t=String(e);if(o.test(t))return t;if(t.length>0&&!i.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(s,"\\$1")+'"'}function f(e){this.parameters=Object.create(null),this.type=e}t.format=l,t.parse=d},b42e:function(e,t,r){"use strict";var n=Math.ceil,i=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?i:n)(t)}},b50d:function(e,t,r){"use strict";var n=r("c532"),i=r("467f"),o=r("7aac"),a=r("30b5"),s=r("83b9"),c=r("c345"),l=r("3934"),d=r("2d83");e.exports=function(e){return new Promise((function(t,r){var u=e.data,h=e.headers,f=e.responseType;n.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(v+":"+m)}var g=s(e.baseURL,e.url);function y(){if(p){var n="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,o=f&&"text"!==f&&"json"!==f?p.response:p.responseText,a={data:o,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};i(t,r,a),p=null}}if(p.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(r(d("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){r(d("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(d(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var b=(e.withCredentials||l(g))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;b&&(h[e.xsrfHeaderName]=b)}"setRequestHeader"in p&&n.forEach(h,(function(e,t){"undefined"===typeof u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),f&&"json"!==f&&(p.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),r(e),p=null)})),u||(u=null),p.send(u)}))}},b57f:function(e,t,r){"use strict";var n=r("a593");e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},b58b:function(t,r,n){"use strict";n.d(r,"a",(function(){return v}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("60af"),l=n("5b5f"),d=n("afe6"),u=n("6bf4"),h=n("480c"),f=n("b83f"),p=20;class v{constructor(t){var r=this;this.client=t,s()(this,"sending",!1),s()(this,"running",!0),s()(this,"retryTimeout",null),s()(this,"retryAttempts",0),s()(this,"sendQueue",o()((function*(){if(null!==r.retryTimeout&&clearTimeout(r.retryTimeout),r.retryTimeout=null,!r.sending&&r.running){var t;l["b"].debug("Attempting to send queued to-device messages"),r.sending=!0;try{while(r.running){if(t=yield r.client.store.getOldestToDeviceBatch(),null===t)break;yield r.sendBatch(t),yield r.client.store.removeToDeviceBatch(t.id),r.retryAttempts=0}if(!r.running)return;l["b"].debug("All queued to-device messages sent")}catch(e){++r.retryAttempts;var n=u["a"].RETRY_BACKOFF_RATELIMIT(null,r.retryAttempts,e);if(-1===n)return void(4===Math.floor(e.httpStatus/100)?(l["b"].error("Fatal error when sending to-device message - dropping to-device batch!",e),yield r.client.store.removeToDeviceBatch(t.id)):l["b"].info("Automatic retry limit reached for to-device messages."));l["b"].info("Failed to send batch of to-device messages. Will retry in ".concat(n,"ms"),e),r.retryTimeout=setTimeout(r.sendQueue,n)}finally{r.sending=!1}}}))),s()(this,"onResumedSync",(e,t)=>{e===h["c"].Syncing&&t!==h["c"].Syncing&&(l["b"].info("Resuming queue after resumed sync"),this.sendQueue())})}start(){this.running=!0,this.sendQueue(),this.client.on(d["b"].Sync,this.onResumedSync)}stop(){this.running=!1,null!==this.retryTimeout&&clearTimeout(this.retryTimeout),this.retryTimeout=null,this.client.removeListener(d["b"].Sync,this.onResumedSync)}queueBatch(e){var t=this;return o()((function*(){for(var r=[],n=0;n<e.batch.length;n+=p){var i={eventType:e.eventType,batch:e.batch.slice(n,n+p),txnId:t.client.makeTxnId()};r.push(i);var o=i.batch.map(e=>"".concat(e.userId,"/").concat(e.deviceId," (msgid ").concat(e.payload[c["k"]],")"));l["b"].info("Enqueuing batch of to-device messages. type=".concat(e.eventType," txnid=").concat(i.txnId),o)}yield t.client.store.saveToDeviceBatches(r),t.sendQueue()}))()}sendBatch(e){var t=this;return o()((function*(){var r=new f["b"](()=>new Map);for(var n of e.batch)r.getOrCreate(n.userId).set(n.deviceId,n.payload);l["b"].info("Sending batch of ".concat(e.batch.length," to-device messages with ID ").concat(e.id," and txnId ").concat(e.txnId)),yield t.client.sendToDevice(e.eventType,r,e.txnId)}))()}}},b596:function(e,t,r){var n=r("2055");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("8741f310",n,e)}},b5ca:function(e,t,r){"use strict";var n=r("b639").Buffer,i=r("3fb5"),o=r("93e6"),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function f(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function v(e,t,r,n,i,o,a,s){return p(e+(t^r^n)+o+a|0,s)+i|0}function m(e,t,r,n,i,o,a,s){return p(e+(t&r|~t&n)+o+a|0,s)+i|0}function g(e,t,r,n,i,o,a,s){return p(e+((t|~r)^n)+o+a|0,s)+i|0}function y(e,t,r,n,i,o,a,s){return p(e+(t&n|r&~n)+o+a|0,s)+i|0}function b(e,t,r,n,i,o,a,s){return p(e+(t^(r|~n))+o+a|0,s)+i|0}i(f,o),f.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,f=0|this._e,_=0|this._a,w=0|this._b,S=0|this._c,E=0|this._d,k=0|this._e,I=0;I<80;I+=1){var C,T;I<16?(C=v(r,n,i,o,f,e[s[I]],u[0],l[I]),T=b(_,w,S,E,k,e[c[I]],h[0],d[I])):I<32?(C=m(r,n,i,o,f,e[s[I]],u[1],l[I]),T=y(_,w,S,E,k,e[c[I]],h[1],d[I])):I<48?(C=g(r,n,i,o,f,e[s[I]],u[2],l[I]),T=g(_,w,S,E,k,e[c[I]],h[2],d[I])):I<64?(C=y(r,n,i,o,f,e[s[I]],u[3],l[I]),T=m(_,w,S,E,k,e[c[I]],h[3],d[I])):(C=b(r,n,i,o,f,e[s[I]],u[4],l[I]),T=v(_,w,S,E,k,e[c[I]],h[4],d[I])),r=f,f=o,o=p(i,10),i=n,n=C,_=k,k=E,E=p(S,10),S=w,w=T}var R=this._b+i+E|0;this._b=this._c+o+k|0,this._c=this._d+f+_|0,this._d=this._e+r+w|0,this._e=this._a+n+S|0,this._a=R},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=f},b5db:function(e,t,r){"use strict";var n=r("cfe9"),i=n.navigator,o=i&&i.userAgent;e.exports=o?String(o):""},b620:function(e,t,r){"use strict";var n=r("cfe9"),i=r("7282"),o=r("c6b6"),a=n.ArrayBuffer,s=n.TypeError;e.exports=a&&i(a.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==o(e))throw new s("ArrayBuffer expected");return e.byteLength}},b622:function(e,t,r){"use strict";var n=r("cfe9"),i=r("5692"),o=r("1a2d"),a=r("90e3"),s=r("04f8"),c=r("fdbf"),l=n.Symbol,d=i("wks"),u=c?l["for"]||l:l&&l.withoutSetter||a;e.exports=function(e){return o(d,e)||(d[e]=s&&o(l,e)?l[e]:u("Symbol."+e)),d[e]}},b639:function(t,r,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n("1fb5"),o=n("9152"),a=n("2335");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function c(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(c()<t)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=d.prototype):(null===e&&(e=new d(t)),e.length=t),e}function d(e,t,r){if(!d.TYPED_ARRAY_SUPPORT&&!(this instanceof d))return new d(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,r,n):"string"===typeof t?v(e,t,r):y(e,t)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,r,n){return h(t),t<=0?l(e,t):void 0!==r?"string"===typeof n?l(e,t).fill(r,n):l(e,t).fill(r):l(e,t)}function p(e,t){if(h(t),e=l(e,t<0?0:0|b(t)),!d.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function v(e,t,r){if("string"===typeof r&&""!==r||(r="utf8"),!d.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|w(t,r);e=l(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function m(e,t){var r=t.length<0?0:0|b(t.length);e=l(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function g(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),d.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=d.prototype):e=m(e,t),e}function y(e,t){if(d.isBuffer(t)){var r=0|b(t.length);return e=l(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||re(t.length)?l(e,0):m(e,t);if("Buffer"===t.type&&a(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(e){if(e>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),d.alloc(+e)}function w(e,t){if(d.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ee(e).length;default:if(n)return X(e).length;t=(""+t).toLowerCase(),n=!0}}function S(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return U(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function k(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=d.from(t,n)),d.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,i);if("number"===typeof t)return t&=255,d.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,i){var o,a=1,s=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===c)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){for(var u=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){u=!1;break}if(u)return o}return-1}function C(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function T(e,t,r,n){return te(X(t,e.length-r),e,r,n)}function R(e,t,r,n){return te(Z(t),e,r,n)}function x(e,t,r,n){return R(e,t,r,n)}function O(e,t,r,n){return te(ee(t),e,r,n)}function M(e,t,r,n){return te(Q(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);var n=[],i=t;while(i<r){var o,a,s,c,l=e[i],d=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u<=r)switch(u){case 1:l<128&&(d=l);break;case 2:o=e[i+1],128===(192&o)&&(c=(31&l)<<6|63&o,c>127&&(d=c));break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a,c>2047&&(c<55296||c>57343)&&(d=c));break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s,c>65535&&c<1114112&&(d=c))}null===d?(d=65533,u=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),i+=u}return j(n)}r.Buffer=d,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:s(),r.kMaxLength=c(),d.poolSize=8192,d._augment=function(e){return e.__proto__=d.prototype,e},d.from=function(e,t,r){return u(null,e,t,r)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(e,t,r){return f(null,e,t,r)},d.allocUnsafe=function(e){return p(null,e)},d.allocUnsafeSlow=function(e){return p(null,e)},d.isBuffer=function(e){return!(null==e||!e._isBuffer)},d.compare=function(e,t){if(!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=d.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},d.byteLength=w,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},d.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):S.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},d.prototype.compare=function(e,t,r,n,i){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,a=r-t,s=Math.min(o,a),c=this.slice(n,i),l=e.slice(t,r),u=0;u<s;++u)if(c[u]!==l[u]){o=c[u],a=l[u];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},d.prototype.indexOf=function(e,t,r){return k(this,e,t,r,!0)},d.prototype.lastIndexOf=function(e,t,r){return k(this,e,t,r,!1)},d.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return C(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function j(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);var r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=D));return r}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function U(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=J(e[o]);return i}function F(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function B(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function K(e,t,r,n,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function q(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function V(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function W(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $(e,t,r,n,i){return i||W(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,n,23,4),r+4}function z(e,t,r,n,i){return i||W(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,n,52,8),r+8}d.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e),d.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=d.prototype;else{var i=t-e;r=new d(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},d.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||B(e,t,this.length);var n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return n},d.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||B(e,t,this.length);var n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},d.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||B(e,t,this.length);var n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},d.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||B(e,t,this.length);var n=t,i=1,o=this[e+--n];while(n>0&&(i*=256))o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},d.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},d.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),o.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),o.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),o.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),o.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;K(this,e,t,r,i,0)}var o=1,a=0;this[t]=255&e;while(++a<r&&(o*=256))this[t+a]=e/o&255;return t+r},d.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;K(this,e,t,r,i,0)}var o=r-1,a=1;this[t+o]=255&e;while(--o>=0&&(a*=256))this[t+o]=e/a&255;return t+r},d.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,1,255,0),d.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):q(this,e,t,!0),t+2},d.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):q(this,e,t,!1),t+2},d.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):V(this,e,t,!0),t+4},d.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},d.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);K(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;this[t]=255&e;while(++o<r&&(a*=256))e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},d.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);K(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;this[t+o]=255&e;while(--o>=0&&(a*=256))e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},d.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,1,127,-128),d.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):q(this,e,t,!0),t+2},d.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):q(this,e,t,!1),t+2},d.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},d.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},d.prototype.writeFloatLE=function(e,t,r){return $(this,e,t,!0,r)},d.prototype.writeFloatBE=function(e,t,r){return $(this,e,t,!1,r)},d.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},d.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},d.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!d.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},d.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!d.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=d.isBuffer(e)?e:X(new d(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function H(e){if(e=Y(e).replace(G,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function X(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Z(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Q(e,t){for(var r,n,i,o=[],a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ee(e){return i.toByteArray(H(e))}function te(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function re(e){return e!==e}}).call(this,n("c8ba"))},b672:function(e,t,r){var n=r("8707").Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"===typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var c=a%i,l=Math.min(o-s,i-c),d=0;d<l;d++)r[c+d]=e[s+d];a+=l,s+=l,a%i===0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},b6aa:function(e,t,r){"use strict";function n(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let l=0;l<t.length;l++)t[l]=255;for(let l=0;l<e.length;l++){const r=e.charAt(l),n=r.charCodeAt(0);if(255!==t[n])throw new TypeError(r+" is ambiguous");t[n]=l}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function a(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,a=0,s=0;const c=t.length;while(s!==c&&0===t[s])s++,i++;const l=(c-s)*o+1>>>0,d=new Uint8Array(l);while(s!==c){let e=t[s],n=0;for(let t=l-1;(0!==e||n<a)&&-1!==t;t--,n++)e+=256*d[t]>>>0,d[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");a=n,s++}let u=l-a;while(u!==l&&0===d[u])u++;let h=n.repeat(i);for(;u<l;++u)h+=e.charAt(d[u]);return h}function s(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let o=0,a=0,s=0;while(e[o]===n)a++,o++;const c=(e.length-o)*i+1>>>0,l=new Uint8Array(c);while(e[o]){let n=t[e.charCodeAt(o)];if(255===n)return;let i=0;for(let e=c-1;(0!==n||i<s)&&-1!==e;e--,i++)n+=r*l[e]>>>0,l[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");s=i,o++}let d=c-s;while(d!==c&&0===l[d])d++;const u=new Uint8Array(a+(c-d));let h=a;while(d!==c)u[h++]=l[d++];return u}function c(e){const t=s(e);if(t)return t;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:s,decode:c}}var i=n,o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t["a"]=i(o)},b7a0:function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s}));var n=r("b6aa"),i=[139,1],o=32;function a(t){var r,o=e.alloc(i.length+t.length+1);o.set(i,0),o.set(t,i.length);for(var a=0,s=0;s<o.length-1;++s)a^=o[s];o[o.length-1]=a;var c=n["a"].encode(o);return null===(r=c.match(/.{1,4}/g))||void 0===r?void 0:r.join(" ")}function s(e){var t=n["a"].decode(e.replace(/ /g,"")),r=0;for(var a of t)r^=a;if(0!==r)throw new Error("Incorrect parity");for(var s=0;s<i.length;++s)if(t[s]!==i[s])throw new Error("Incorrect prefix");if(t.length!==i.length+o+1)throw new Error("Incorrect length");return Uint8Array.from(t.slice(i.length,i.length+o))}}).call(this,r("b639").Buffer)},b7b0:function(t,r,n){"use strict";n.d(r,"a",(function(){return I}));var i=n("c973"),o=n.n(i),a=n("5b5f"),s=n("d2bd"),c=n("ac24"),l=n("b83f"),d="crypto.",u=d+"migration",h=d+"account",f=d+"cross_signing_keys",p=d+"notified_error_devices",v=d+"device_data",m=d+"inboundgroupsessions/",g=d+"inboundgroupsessions.withheld/",y=d+"rooms/",b=d+"sessionsneedingbackup";function _(e){return d+"sessions/"+e}function w(e){return d+"session.problems/"+e}function S(e,t){return m+e+"/"+t}function E(e,t){return g+e+"/"+t}function k(e){return y+e}class I extends s["a"]{static exists(e){for(var t=e.length,r=0;r<t;r++){var n;if(null!==(n=e.key(r))&&void 0!==n&&n.startsWith(d))return!0}return!1}constructor(e){super(),this.store=e}containsData(){var e=this;return o()((function*(){return I.exists(e.store)}))()}getMigrationState(){var e=this;return o()((function*(){var t;return null!==(t=C(e.store,u))&&void 0!==t?t:c["b"].NOT_STARTED}))()}setMigrationState(e){var t=this;return o()((function*(){T(t.store,u,e)}))()}countEndToEndSessions(e,t){for(var r=0,n=0;n<this.store.length;++n){var i=this.store.key(n);if(null!==i&&void 0!==i&&i.startsWith(_(""))){var o=C(this.store,i);r+=Object.keys(null!==o&&void 0!==o?o:{}).length}}t(r)}_getEndToEndSessions(e){var t=C(this.store,_(e)),r={};for(var[n,i]of Object.entries(t||{}))r[n]="string"===typeof i?{session:i}:i;return r}getEndToEndSession(e,t,r,n){var i=this._getEndToEndSessions(e);n(i[t]||{})}getEndToEndSessions(e,t,r){r(this._getEndToEndSessions(e)||{})}getAllEndToEndSessions(e,t){for(var r=0;r<this.store.length;++r){var n;if(null!==(n=this.store.key(r))&&void 0!==n&&n.startsWith(_(""))){var i=this.store.key(r).split("/")[1];for(var o of Object.values(this._getEndToEndSessions(i)))t(o)}}}storeEndToEndSession(e,t,r,n){var i=this._getEndToEndSessions(e)||{};i[t]=r,T(this.store,_(e),i)}storeEndToEndSessionProblem(e,t,r){var n=this;return o()((function*(){var i=w(e),o=C(n.store,i)||[];o.push({type:t,fixed:r,time:Date.now()}),o.sort((e,t)=>e.time-t.time),T(n.store,i,o)}))()}getEndToEndSessionProblem(e,t){var r=this;return o()((function*(){var n=w(e),i=C(r.store,n)||[];if(!i.length)return null;var o=i[i.length-1];for(var a of i)if(a.time>t)return Object.assign({},a,{fixed:o.fixed});return o.fixed?null:o}))()}filterOutNotifiedErrorDevices(e){var t=this;return o()((function*(){var r=C(t.store,p)||{},n=[];for(var i of e){var{userId:o,deviceInfo:a}=i;o in r?a.deviceId in r[o]||(n.push(i),Object(l["I"])(r[o],a.deviceId,!0)):(n.push(i),Object(l["I"])(r,o,{[a.deviceId]:!0}))}return T(t.store,p,r),n}))()}getEndToEndSessionsBatch(){var e=this;return o()((function*(){for(var t=[],r=0;r<e.store.length;++r){var n;if(null!==(n=e.store.key(r))&&void 0!==n&&n.startsWith(_(""))){var i=e.store.key(r).split("/")[1];for(var o of Object.values(e._getEndToEndSessions(i)))if(t.push(o),t.length>=c["c"])return t}}return 0===t.length?null:t}))()}deleteEndToEndSessionsBatch(e){var t=this;return o()((function*(){for(var{deviceKey:r,sessionId:n}of e){var i=t._getEndToEndSessions(r)||{};delete i[n],0===Object.keys(i).length?t.store.removeItem(_(r)):T(t.store,_(r),i)}}))()}getEndToEndInboundGroupSession(e,t,r,n){n(C(this.store,S(e,t)),C(this.store,E(e,t)))}getAllEndToEndInboundGroupSessions(e,t){for(var r=0;r<this.store.length;++r){var n=this.store.key(r);null!==n&&void 0!==n&&n.startsWith(m)&&t({senderKey:n.slice(m.length,m.length+43),sessionId:n.slice(m.length+44),sessionData:C(this.store,n)})}t(null)}addEndToEndInboundGroupSession(e,t,r,n){var i=C(this.store,S(e,t));i||this.storeEndToEndInboundGroupSession(e,t,r,n)}storeEndToEndInboundGroupSession(e,t,r,n){T(this.store,S(e,t),r)}storeEndToEndInboundGroupSessionWithheld(e,t,r,n){T(this.store,E(e,t),r)}countEndToEndInboundGroupSessions(){var e=this;return o()((function*(){for(var t=0,r=0;r<e.store.length;++r){var n=e.store.key(r);null!==n&&void 0!==n&&n.startsWith(m)&&(t+=1)}return t}))()}getEndToEndInboundGroupSessionsBatch(){var e=this;return o()((function*(){for(var t=C(e.store,b)||{},r=[],n=0;n<e.store.length;++n){var i=e.store.key(n);if(null!==i&&void 0!==i&&i.startsWith(m)){var o=i.slice(m.length);if(r.push({senderKey:o.slice(0,43),sessionId:o.slice(44),sessionData:C(e.store,i),needsBackup:o in t}),r.length>=c["c"])return r}}return 0===r.length?null:r}))()}deleteEndToEndInboundGroupSessionsBatch(e){var t=this;return o()((function*(){for(var{senderKey:r,sessionId:n}of e){var i=S(r,n);t.store.removeItem(i)}}))()}getEndToEndDeviceData(e,t){t(C(this.store,v))}storeEndToEndDeviceData(e,t){T(this.store,v,e)}storeEndToEndRoom(e,t,r){T(this.store,k(e),t)}getEndToEndRooms(e,t){for(var r={},n=k(""),i=0;i<this.store.length;++i){var o=this.store.key(i);if(null!==o&&void 0!==o&&o.startsWith(n)){var a=o.slice(n.length);r[a]=C(this.store,o)}}t(r)}getSessionsNeedingBackup(e){var t=this,r=C(this.store,b)||{},n=[],i=function(){if(Object.prototype.hasOwnProperty.call(r,o)){var i=o.slice(0,43),a=o.slice(44);if(t.getEndToEndInboundGroupSession(i,a,null,e=>{n.push({senderKey:i,sessionId:a,sessionData:e})}),e&&n.length>=e)return"break"}};for(var o in r){var a=i();if("break"===a)break}return Promise.resolve(n)}countSessionsNeedingBackup(){var e=C(this.store,b)||{};return Promise.resolve(Object.keys(e).length)}unmarkSessionsNeedingBackup(e){var t=C(this.store,b)||{};for(var r of e)delete t[r.senderKey+"/"+r.sessionId];return T(this.store,b,t),Promise.resolve()}markSessionsNeedingBackup(e){var t=C(this.store,b)||{};for(var r of e)t[r.senderKey+"/"+r.sessionId]=!0;return T(this.store,b,t),Promise.resolve()}deleteAllData(){return this.store.removeItem(h),Promise.resolve()}getAccount(e,t){var r=C(this.store,h);t(r)}storeAccount(e,t){T(this.store,h,t)}getCrossSigningKeys(e,t){var r=C(this.store,f);t(r)}getSecretStorePrivateKey(e,t,r){var n=C(this.store,d+"ssss_cache.".concat(r));t(n)}storeCrossSigningKeys(e,t){T(this.store,f,t)}storeSecretStorePrivateKey(e,t,r){T(this.store,d+"ssss_cache.".concat(t),r)}doTxn(e,t,r){return Promise.resolve(r(null))}}function C(t,r){try{return JSON.parse(t.getItem(r))}catch(e){a["b"].log("Error: Failed to get key %s: %s",r,e.message),a["b"].log(e.stack)}return null}function T(e,t,r){e.setItem(t,JSON.stringify(r))}},b7cd:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return c}));var n=r("9c0b"),i=new n["UnstableValue"]("m.poll.disclosed","org.matrix.msc3381.poll.disclosed"),o=new n["UnstableValue"]("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed"),a=new n["UnstableValue"]("m.poll.start","org.matrix.msc3381.poll.start"),s=new n["UnstableValue"]("m.poll.response","org.matrix.msc3381.poll.response"),c=new n["UnstableValue"]("m.poll.end","org.matrix.msc3381.poll.end")},b7d1:function(e,t,r){(function(t){function r(e,t){if(n("noDeprecation"))return e;var r=!1;function i(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return i}function n(e){try{if(!t.localStorage)return!1}catch(_){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(this,r("c8ba"))},b7d3:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return U}));var n,i=r("c973"),o=r.n(i),a=r("9523"),s=r.n(a),c=r("d190"),l=r.n(c),d=r("eaff"),u=r("c35f"),h=r("5b5f"),f=r("1a66"),p=r("60af"),v=r("7963"),m=r("8708"),g=p["b"].KeyVerificationStart,y=[p["b"].KeyVerificationAccept,p["b"].KeyVerificationKey,p["b"].KeyVerificationMac],b=Object(u["a"])("m.mismatched_sas","Mismatched short authentication string"),_=Object(u["a"])("m.mismatched_commitment","Mismatched commitment"),w=[["🐶","dog"],["🐱","cat"],["🦁","lion"],["🐎","horse"],["🦄","unicorn"],["🐷","pig"],["🐘","elephant"],["🐰","rabbit"],["🐼","panda"],["🐓","rooster"],["🐧","penguin"],["🐢","turtle"],["🐟","fish"],["🐙","octopus"],["🦋","butterfly"],["🌷","flower"],["🌳","tree"],["🌵","cactus"],["🍄","mushroom"],["🌏","globe"],["🌙","moon"],["☁️","cloud"],["🔥","fire"],["🍌","banana"],["🍎","apple"],["🍓","strawberry"],["🌽","corn"],["🍕","pizza"],["🎂","cake"],["❤️","heart"],["😀","smiley"],["🤖","robot"],["🎩","hat"],["👓","glasses"],["🔧","spanner"],["🎅","santa"],["👍","thumbs up"],["☂️","umbrella"],["⌛","hourglass"],["⏰","clock"],["🎁","gift"],["💡","light bulb"],["📕","book"],["✏️","pencil"],["📎","paperclip"],["✂️","scissors"],["🔒","lock"],["🔑","key"],["🔨","hammer"],["☎️","telephone"],["🏁","flag"],["🚂","train"],["🚲","bicycle"],["✈️","aeroplane"],["🚀","rocket"],["🏆","trophy"],["⚽","ball"],["🎸","guitar"],["🎺","trumpet"],["🔔","bell"],["⚓","anchor"],["🎧","headphones"],["📁","folder"],["📌","pin"]];function S(e){var t=[e[0]>>2,(3&e[0])<<4|e[1]>>4,(15&e[1])<<2|e[2]>>6,63&e[2],e[3]>>2,(3&e[3])<<4|e[4]>>4,(15&e[4])<<2|e[5]>>6];return t.map(e=>w[e])}var E={decimal:f["a"],emoji:S};function k(e,t){var r={};for(var n of t)n in E&&(r[n]=E[n](Array.from(e)));return r}var I={"hkdf-hmac-sha256":"calculate_mac","org.matrix.msc3783.hkdf-hmac-sha256":"calculate_mac_fixed_base64","hkdf-hmac-sha256.v2":"calculate_mac_fixed_base64","hmac-sha256":"calculate_mac_long_kdf"};function C(e,t){return function(r,n){var i=e[I[t]](r,n);return h["b"].log("SAS calculateMAC:",t,[r,n],i),i}}var T={"curve25519-hkdf-sha256":function(e,t,r){var n="".concat(e.baseApis.getUserId(),"|").concat(e.baseApis.deviceId,"|")+"".concat(e.ourSASPubKey,"|"),i="".concat(e.userId,"|").concat(e.deviceId,"|").concat(e.theirSASPubKey,"|"),o="MATRIX_KEY_VERIFICATION_SAS|"+(e.initiatedByMe?n+i:i+n)+e.channel.transactionId;return t.generate_bytes(o,r)},curve25519:function(e,t,r){var n="".concat(e.baseApis.getUserId()).concat(e.baseApis.deviceId),i="".concat(e.userId).concat(e.deviceId),o="MATRIX_KEY_VERIFICATION_SAS"+(e.initiatedByMe?n+i:i+n)+e.channel.transactionId;return t.generate_bytes(o,r)}},R=["curve25519-hkdf-sha256","curve25519"],x=["sha256"],O=["hkdf-hmac-sha256.v2","org.matrix.msc3783.hkdf-hmac-sha256","hkdf-hmac-sha256","hmac-sha256"],M=Object.keys(E),A=new Set(R),P=new Set(x),D=new Set(O),j=new Set(M);function L(e,t){return Array.isArray(e)?e.filter(e=>t.has(e)):[]}var N=v["c"];class U extends d["b"]{constructor(){var t;super(...arguments),t=this,s()(this,"waitingForAccept",void 0),s()(this,"ourSASPubKey",void 0),s()(this,"theirSASPubKey",void 0),s()(this,"sasEvent",void 0),s()(this,"doVerification",o()((function*(){yield e.Olm.init(),n=n||new e.Olm.Utility,yield t.baseApis.downloadKeys([t.userId]);var r=!1;do{try{return t.initiatedByMe?yield t.doSendVerification():yield t.doRespondVerification()}catch(i){if(!(i instanceof d["a"]))throw i;t.startEvent=i.startEvent,r=!0}}while(r)})))}static get NAME(){return m["a"].Sas}get events(){return y}canSwitchStartEvent(e){if(e.getType()!==g)return!1;var t=e.getContent();return(null===t||void 0===t?void 0:t.method)===U.NAME&&!!this.waitingForAccept}sendStart(){var e=this;return o()((function*(){var t=e.channel.completeContent(g,{method:U.NAME,from_device:e.baseApis.deviceId,key_agreement_protocols:R,hashes:x,message_authentication_codes:O,short_authentication_string:M});return yield e.channel.sendCompleted(g,t),t}))()}verifyAndCheckMAC(e,t,r,n){var i=this;return o()((function*(){var a=T[e](i,r,6),s=new Promise((e,s)=>{i.sasEvent={sas:k(a,t),confirm:function(){var t=o()((function*(){try{yield i.sendMAC(r,n),e()}catch(t){s(t)}}));function a(){return t.apply(this,arguments)}return a}(),cancel:()=>s(Object(u["h"])()),mismatch:()=>s(b())},i.emit(N.ShowSas,i.sasEvent)}),[c]=yield Promise.all([i.waitForEvent(p["b"].KeyVerificationMac).then(e=>(i.expectedEvent=p["b"].KeyVerificationDone,e)),s]),l=c.getContent();yield i.checkMAC(r,l,n)}))()}doSendVerification(){var t=this;return o()((function*(){var r,i;if(t.waitingForAccept=!0,r=t.startEvent?t.channel.completedContentFromEvent(t.startEvent):yield t.sendStart(),!t.initiatedByMe)throw new d["a"](t.startEvent);try{i=yield t.waitForEvent(p["b"].KeyVerificationAccept)}finally{t.waitingForAccept=!1}var o=i.getContent(),a=L(o.short_authentication_string,j);if(!(A.has(o.key_agreement_protocol)&&P.has(o.hash)&&D.has(o.message_authentication_code)&&a.length))throw Object(u["g"])();if("string"!==typeof o.commitment)throw Object(u["c"])();var s=o.key_agreement_protocol,c=o.message_authentication_code,h=o.commitment,f=new e.Olm.SAS;try{t.ourSASPubKey=f.get_pubkey(),yield t.send(p["b"].KeyVerificationKey,{key:t.ourSASPubKey}),i=yield t.waitForEvent(p["b"].KeyVerificationKey),o=i.getContent();var v=o.key+l.a.stringify(r);if(n.sha256(v)!==h)throw _();t.theirSASPubKey=o.key,f.set_their_key(o.key),yield t.verifyAndCheckMAC(s,a,f,c)}finally{f.free()}}))()}doRespondVerification(){var t=this;return o()((function*(){var r=t.channel.completedContentFromEvent(t.startEvent),i=L(R,new Set(r.key_agreement_protocols))[0],o=L(x,new Set(r.hashes))[0],a=L(O,new Set(r.message_authentication_codes))[0],s=L(r.short_authentication_string,j);if(void 0===i||void 0===o||void 0===a||!s.length)throw Object(u["g"])();var c=new e.Olm.SAS;try{var d=c.get_pubkey()+l.a.stringify(r);yield t.send(p["b"].KeyVerificationAccept,{key_agreement_protocol:i,hash:o,message_authentication_code:a,short_authentication_string:s,commitment:n.sha256(d)});var h=yield t.waitForEvent(p["b"].KeyVerificationKey);r=h.getContent(),t.theirSASPubKey=r.key,c.set_their_key(r.key),t.ourSASPubKey=c.get_pubkey(),yield t.send(p["b"].KeyVerificationKey,{key:t.ourSASPubKey}),yield t.verifyAndCheckMAC(i,s,c,a)}finally{c.free()}}))()}sendMAC(e,t){var r={},n=[],i="MATRIX_KEY_VERIFICATION_MAC"+this.baseApis.getUserId()+this.baseApis.deviceId+this.userId+this.deviceId+this.channel.transactionId,o="ed25519:".concat(this.baseApis.deviceId);r[o]=C(e,t)(this.baseApis.getDeviceEd25519Key(),i+o),n.push(o);var a=this.baseApis.getCrossSigningId();if(a){var s="ed25519:".concat(a);r[s]=C(e,t)(a,i+s),n.push(s)}var c=C(e,t)(n.sort().join(","),i+"KEY_IDS");return this.send(p["b"].KeyVerificationMac,{mac:r,keys:c})}checkMAC(e,t,r){var n=this;return o()((function*(){var i="MATRIX_KEY_VERIFICATION_MAC"+n.userId+n.deviceId+n.baseApis.getUserId()+n.baseApis.deviceId+n.channel.transactionId;if(t.keys!==C(e,r)(Object.keys(t.mac).sort().join(","),i+"KEY_IDS"))throw Object(u["d"])();yield n.verifyKeys(n.userId,t.mac,(t,n,o)=>{if(o!==C(e,r)(n.keys[t],i+t))throw Object(u["d"])()})}))()}getShowSasCallbacks(){var e;return null!==(e=this.sasEvent)&&void 0!==e?e:null}}}).call(this,r("c8ba"))},b7ef:function(e,t,r){"use strict";var n=r("23e7"),i=r("cfe9"),o=r("d066"),a=r("5c6c"),s=r("9bf2").f,c=r("1a2d"),l=r("19aa"),d=r("7156"),u=r("e391"),h=r("cf98"),f=r("0d26"),p=r("83ab"),v=r("c430"),m="DOMException",g=o("Error"),y=o(m),b=function(){l(this,_);var e=arguments.length,t=u(e<1?void 0:arguments[0]),r=u(e<2?void 0:arguments[1],"Error"),n=new y(t,r),i=new g(t);return i.name=m,s(n,"stack",a(1,f(i.stack,1))),d(n,this,b),n},_=b.prototype=y.prototype,w="stack"in new g(m),S="stack"in new y(1,2),E=y&&p&&Object.getOwnPropertyDescriptor(i,m),k=!!E&&!(E.writable&&E.configurable),I=w&&!k&&!S;n({global:!0,constructor:!0,forced:v||I},{DOMException:I?b:y});var C=o(m),T=C.prototype;if(T.constructor!==C)for(var R in v||s(T,"constructor",a(1,C)),h)if(c(h,R)){var x=h[R],O=x.s;c(C,O)||s(C,O,a(6,x.c))}},b837:function(e,t,r){var n=r("3fb5"),i=r("4fd1"),o=r("b672"),a=r("8707").Buffer,s=new Array(160);function c(){this.init(),this._w=s,o.call(this,128,112)}n(c,i),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=a.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},b83f:function(e,t,r){"use strict";r.d(t,"p",(function(){return m})),r.d(t,"j",(function(){return g})),r.d(t,"H",(function(){return y})),r.d(t,"k",(function(){return b})),r.d(t,"F",(function(){return _})),r.d(t,"d",(function(){return w})),r.d(t,"g",(function(){return S})),r.d(t,"f",(function(){return E})),r.d(t,"h",(function(){return k})),r.d(t,"r",(function(){return I})),r.d(t,"G",(function(){return C})),r.d(t,"E",(function(){return T})),r.d(t,"y",(function(){return R})),r.d(t,"m",(function(){return O})),r.d(t,"n",(function(){return M})),r.d(t,"l",(function(){return A})),r.d(t,"K",(function(){return P})),r.d(t,"u",(function(){return D})),r.d(t,"o",(function(){return L})),r.d(t,"q",(function(){return N})),r.d(t,"i",(function(){return U})),r.d(t,"A",(function(){return F})),r.d(t,"B",(function(){return K})),r.d(t,"e",(function(){return q})),r.d(t,"J",(function(){return W})),r.d(t,"a",(function(){return $})),r.d(t,"c",(function(){return Y})),r.d(t,"w",(function(){return J})),r.d(t,"z",(function(){return X})),r.d(t,"t",(function(){return Z})),r.d(t,"D",(function(){return Q})),r.d(t,"L",(function(){return te})),r.d(t,"s",(function(){return re})),r.d(t,"v",(function(){return ne})),r.d(t,"C",(function(){return oe})),r.d(t,"M",(function(){return ae})),r.d(t,"I",(function(){return se})),r.d(t,"x",(function(){return ce})),r.d(t,"b",(function(){return le}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("fe93"),c=r.n(s),l=r("3eed"),d=r.n(l),u=r("cc89"),h=r("283b");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=new Map;function m(e){return e instanceof String&&(e=e.toString()),v.has(e)||v.set(e,e),v.get(e)}function g(e,t){var r=null!==t&&void 0!==t?t:new URLSearchParams,n=function(e){void 0!==o&&null!==o&&(Array.isArray(o)?o.forEach(t=>{r.append(e,String(t))}):r.append(e,String(o)))};for(var[i,o]of Object.entries(e))n(i);return r}function y(e,t,r){var n=p(p({},r),{},{[t]:r[e]});return delete n[e],n}function b(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];void 0!==n&&null!==n&&(e=e.replace(r,encodeURIComponent(n)))}return e}function _(e,t,r){var n;if(r){for(n=e.length-1;n>=0;n--)if(t(e[n],n,e))return e.splice(n,1),!0}else for(n=0;n<e.length;n++)if(t(e[n],n,e))return e.splice(n,1),!0;return!1}function w(e,t){for(var r of t)if(!e.hasOwnProperty(r))throw new Error("Missing required key: "+r)}function S(e){return JSON.parse(JSON.stringify(e))}function E(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("number"===typeof e&&isNaN(e)&&isNaN(t))return!0;if(null===e||null===t)return e===t;if(!(e instanceof Object))return!1;if(e.constructor!==t.constructor||e.prototype!==t.prototype)return!1;if(e instanceof RegExp||e instanceof Date)return e.toString()===t.toString();if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!E(e[r],t[r]))return!1}else{for(var n in t)if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;for(var i in e)if(t.hasOwnProperty(i)!==e.hasOwnProperty(i)||!E(e[i],t[i]))return!1}return!0}function k(e){if("object"!==typeof e)return e;if(null===e||void 0===e||Array.isArray(e))return e;var t=[];for(var[r,n]of Object.entries(e))t.push([r,k(n)]);return t.sort((e,t)=>Z(e[0],t[0])),t}function I(e){return"number"===typeof e&&isFinite(e)}function C(e){return"string"===typeof e?c()(e.normalize("NFD").replace(x,"")):""}function T(e){return"string"===typeof e?e.replace(/[\u202d-\u202e]/g,""):""}function R(e){return C(e.toLowerCase()).replace(/[\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~\u2000-\u206f\u2e00-\u2e7f]/g,"").toLowerCase()}var x=/[\u2000-\u200F\u202A-\u202F\u0300-\u036F\uFEFF\u061C\u2800\u2062-\u2063\s]/g;function O(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(e){return O(e).replace(/\\\*/g,".*").replace(/\?/g,".")}function A(e){return null!==e&&void 0!==e&&e.endsWith("/")?e.slice(0,-1):e}function P(e,t){return new Promise(r=>{setTimeout(r,e,t)})}function D(e,t,r){return j.apply(this,arguments)}function j(){return j=i()((function*(e,t,r){var n=Date.now();try{return yield r()}finally{var i=Date.now();e.debug("[Perf]: ".concat(t," took ").concat(i-n,"ms"))}})),j.apply(this,arguments)}function L(){return new Promise(e=>setTimeout(e))}function N(e){return null===e||void 0===e}function U(){var e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}}function F(e,t){return B.apply(this,arguments)}function B(){return B=i()((function*(e,t){for(var r of e)yield t(yield r)})),B.apply(this,arguments)}function K(e){return Promise.resolve(e())}function q(e,t){return V.apply(this,arguments)}function V(){return V=i()((function*(e,t){for(var r=[],n=0;n<e.length;n+=t)r.push(...yield Promise.all(e.slice(n,n+t).map(e=>e())));return r})),V.apply(this,arguments)}function W(e){return d()(t=>e(t),{forever:!0,factor:2,minTimeout:3e3,maxTimeout:15e3})}var $=(()=>{for(var e="",t=32;t<=126;t++)e+=String.fromCharCode(t);return e})();function z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$;return e.padEnd(t,r[0])}function G(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,n=BigInt(r.length);if(e<=n)return null!==(t=r[Number(e)-1])&&void 0!==t?t:"";var i=e/n,o=Number(e%n)-1;return o<0&&(i-=BigInt(Math.abs(o)),o=Number(n)-1),G(i,r)+r[o]}function H(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,r=BigInt(t.length),n=BigInt(0),i=e.length-1,o=BigInt(0);i>=0;i--,o++){var a=e.charCodeAt(i)-t.charCodeAt(0);n+=BigInt(1+a)*r**o}return n}function Y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$,n=Math.max(e.length,t.length),i=H(z(e,n,r),r),o=H(z(t,n,r),r),a=(i+o)/BigInt(2);return a===i||a==o?G(a,r)+r[0]:G(a,r)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;return G(H(e,t)+BigInt(1),t)}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;return G(H(e,t)-BigInt(1),t)}function Z(e,t){return e<t?-1:e>t?1:0}function Q(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var[n,i]of Object.entries(t))e[n]instanceof Object&&i?Q(e[n],i):(null!==i&&void 0!==i||!r)&&se(e,n,i);return e}function ee(e){var t;return null!==(t=u["d"].findIn(e.getContent()))&&void 0!==t?t:-1}function te(e,t){return ee(t)-ee(e)}function re(e){return[h["b"].Read,h["b"].ReadPrivate].includes(e)}function ne(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e.size!==t.size)return!1;for(var[n,i]of e){var o=t.get(n);if(void 0===o||!r(i,o))return!1}return!0}function ie(e){return e instanceof Map?oe(e):Array.isArray(e)?e.map(e=>ie(e)):e}function oe(e){var t=new Map;for(var[r,n]of e)t.set(r,ie(n));return Object.fromEntries(t.entries())}function ae(e){return"__proto__"===e||"prototype"===e||"constructor"===e}function se(e,t,r){if(ae(t))throw new Error("Trying to modify prototype or constructor");e[t]=r}function ce(e){return!(ae(e.room_id)||ae(e.sender)||ae(e.event_id))}class le extends Map{constructor(e){super(),this.createDefault=e}getOrCreate(e){return this.has(e)||this.set(e,this.createDefault()),this.get(e)}}},b8d8:function(e,t,r){"use strict";function n(e,t,r){return~(e-1)&t|e-1&r}function i(e,t){if(e.length!==t.length)return 0;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}function o(e,t){return 0!==e.length&&0!==t.length&&0!==i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.select=n,t.compare=i,t.equal=o},b980:function(e,t,r){"use strict";var n=r("d039"),i=r("5c6c");e.exports=!n((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},b9dd:function(module,__webpack_exports__,__webpack_require__){"use strict";
/**
  * vue-scroll vundefined
  * (c) 2019 Wang Pin
  * @license MIT
  */var debounce=function(e,t){var r;return function(){var n=this,i=arguments;clearTimeout(r),r=setTimeout((function(){return e.apply(n,i)}),t)}},throttle=function(e,t){var r,n;return function(){var i=this,o=arguments;n?(clearTimeout(r),r=setTimeout((function(){Date.now()-n>=t&&(e.apply(i,o),n=Date.now())}),t-(Date.now()-n))):(e.apply(i,o),n=Date.now())}},isNumber=function(e){return"number"===typeof e&&NaN!==e},isFunction=function(e){return"function"===typeof e},isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},isInteger=function(e){return isNumber(e)&&Math.round(e)===e},get=function(arg,path,def){try{return eval("arg."+path)}catch(err){return def}},dom=function(){var e=new Map,t="scroll";function r(e,r,n,i){function o(e){var r,i=e.target||e.srcElement;e=e||window.e,e.type===t&&(r=i===document?{scrollTop:get(document,"body.scrollTop",0),scrollLeft:get(document,"body.scrollLeft",0)}:{scrollTop:get(i,"scrollTop",0),scrollLeft:get(i,"scrollLeft",0)}),n.forEach((function(t){t(e,r)}))}isObject(i)&&(isInteger(i.throttle)&&isFinite(i.throttle)&&i.throttle>-1&&(o=throttle(o,i.throttle)),isInteger(i.debounce)&&isFinite(i.debounce)&&i.debounce>-1&&(o=debounce(o,i.debounce))),r===t&&(e===document.body||e===document||e===window?document.onscroll=o:e.addEventListener?e.addEventListener(r,o):e.attachEvent("on"+r,o))}function n(t,n,i,o){var a,s;if(!isFunction(i))throw new Error("Scroll handler is not a function");e.has(t)||e.set(t,new Map),a=e.get(t),a.has(n)||a.set(n,[]),s=a.get(n),s.length||r(t,n,s,o),s.push(i)}function i(t,r,n){var i,o;if(isFunction(n))return e.has(t)||e.set(t,new Map),i=e.get(t),i.has(r)||i.set(r,[]),o=i.get(r),o.indexOf(n)>-1&&(o.splice(o.indexOf(n),1),!0)}return{bind:n,unbind:i}}(),vuescroll=new Object;vuescroll.install=function(e,t){t=t||{};var r="scroll",n="throttle",i="debounce",o=[n,i];function a(e,a,s){var c,l=Object.assign({},t);if(isObject(a)||isFunction(a)){c=a,o.indexOf(s)>-1&&(c=a.fn,s===n?l={throttle:a.throttle}:s===i&&(l={debounce:a.debounce}));try{dom.bind(e,r,c,l)}catch(d){console.warn("Unexpected error happened when binding listener")}}else console.warn("Unexpected scroll properties")}function s(e,t,n){var i;(isObject(t)||isFunction(t))&&(i=t,o.indexOf(n)>-1&&(i=t.fn),dom.unbind(e,r,i))}e.directive(r,{bind:function(e,t,r,n){a(e,t.value,t.arg)},inserted:function(e,t){},update:function(e,t){t.value!==t.oldValue&&(a(e,t.value,t.arg),s(e,t.oldValue,t.arg))},unbind:function(e,t){s(e,t.value,t.arg)}})},__webpack_exports__["a"]=vuescroll},bbac:function(e,t,r){"use strict";r.r(t);var n=r("084f");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},bbc2:function(e,t,r){"use strict";r.r(t);var n=r("c6aa");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},bbd4:function(e,t,r){"use strict";function n(e,t){for(let r=0;r<t.length;r++)e[r]^=t[r]}Object.defineProperty(t,"__esModule",{value:!0}),t.xor=n},bc3a:function(e,t,r){e.exports=r("cee4")},bcb3:function(e,t,r){"use strict";var n=r("1461");r.d(t,"a",(function(){return n["CrossSigningKey"]}))},bcbf:function(e,t,r){"use strict";var n=r("f5df");e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},bd07:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_M_ROOM_MESSAGE=void 0,t.parseMRoomMessage=h;var n=r("d3d5"),i=r("31c4"),o=r("305b"),a=r("d308"),s=r("6682");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=new a.NamespacedValue("m.room.message");function h(e){var t,r,a;if(s.M_MESSAGE.findIn(e.content)||s.M_TEXT.findIn(e.content))return new n.MessageEvent(e);var c,u,h,f=null===(t=e.content)||void 0===t?void 0:t.msgtype,p=null===(r=e.content)||void 0===r?void 0:r.body,v="org.matrix.custom.html"===(null===(a=e.content)||void 0===a?void 0:a.format)?e.content.formatted_body:null;return"m.text"===f?new n.MessageEvent(l(l({},e),{},{content:l(l({},e.content),{},(c={},d(c,s.M_TEXT.name,p),d(c,s.M_HTML.name,v),c))})):"m.notice"===f?new i.NoticeEvent(l(l({},e),{},{content:l(l({},e.content),{},(u={},d(u,s.M_TEXT.name,p),d(u,s.M_HTML.name,v),u))})):"m.emote"===f?new o.EmoteEvent(l(l({},e),{},{content:l(l({},e.content),{},(h={},d(h,s.M_TEXT.name,p),d(h,s.M_HTML.name,v),h))})):null}t.LEGACY_M_ROOM_MESSAGE=u},bde4:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{l(i.next(t))}catch(e){a(e)}}function c(t){try{l(i["throw"](t))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,c)}l((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=n("69fc");class a{constructor(e){this._cipher=e,this._counter=new o.default,this._buffer=new o.default}clear(){return this._buffer.clear(),this._counter.clear(),this._cipher.clear(),this}encryptCtr(e,t){return i(this,void 0,void 0,(function*(){if(e.length!==o.default.SIZE)throw new Error("CTR: iv length must be equal to cipher block size");this._counter.data.set(e);let r=o.default.SIZE;const n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r===o.default.SIZE&&(this._buffer.copy(this._counter),this._cipher.encryptBlock(this._buffer),r=0,s(this._counter)),n[e]=t[e]^this._buffer.data[r++];return n}))}}function s(e){let t=1;for(let r=o.default.SIZE-1;r>=0;r--)t+=255&e.data[r]|0,e.data[r]=255&t,t>>>=8}r.default=a},bfa8:function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},c009:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return l}));var n=r("9c0b"),i=r("2370"),o=new n["UnstableValue"]("m.message","org.matrix.msc1767.message"),a=new n["UnstableValue"]("m.text","org.matrix.msc1767.text"),s=new n["UnstableValue"]("m.html","org.matrix.msc1767.html"),c=new n["NamespacedValue"]("m.reference");function l(e,t){if("string"===typeof e)return"string"===typeof t?t===e:t.matches(e);if("string"===typeof t)return e.matches(t);var r=t,n=e;return r.matches(n.name)||Object(i["a"])(n.altName)&&r.matches(n.altName)}},c04e:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return f})),r.d(t,"c",(function(){return p}));var n,i=r("c973"),o=r.n(i),a=r("9523"),s=r.n(a),c=r("9c0b"),l=r("b7cd"),d=r("101d"),u=r("936a");(function(e){e["New"]="Poll.new",e["End"]="Poll.end",e["Update"]="Poll.update",e["Responses"]="Poll.Responses",e["Destroy"]="Poll.Destroy",e["UndecryptableRelations"]="Poll.UndecryptableRelations"})(n||(n={}));var h=(e,t)=>{var r=e.filter(e=>{if(!e.isDecryptionFailure())return l["d"].matches(e.getType())&&e.getTs()<=t});return{responseEvents:r}};class f extends u["b"]{constructor(e,t,r){if(super(),this.rootEvent=e,this.matrixClient=t,this.room=r,s()(this,"roomId",void 0),s()(this,"pollEvent",void 0),s()(this,"_isFetchingResponses",!1),s()(this,"relationsNextBatch",void 0),s()(this,"responses",null),s()(this,"endEvent",void 0),s()(this,"undecryptableRelationEventIds",new Set),s()(this,"countUndecryptableEvents",e=>{var t=e.filter(e=>e.isDecryptionFailure()).map(e=>e.getId()),r=this.undecryptableRelationsCount;this.undecryptableRelationEventIds=new Set([...this.undecryptableRelationEventIds,...t]),this.undecryptableRelationsCount!==r&&this.emit(n.UndecryptableRelations,this.undecryptableRelationsCount)}),!this.rootEvent.getRoomId()||!this.rootEvent.getId())throw new Error("Invalid poll start event.");this.roomId=this.rootEvent.getRoomId(),this.pollEvent=this.rootEvent.unstableExtensibleEvent}get pollId(){return this.rootEvent.getId()}get endEventId(){var e;return null===(e=this.endEvent)||void 0===e?void 0:e.getId()}get isEnded(){return!!this.endEvent}get isFetchingResponses(){return this._isFetchingResponses}get undecryptableRelationsCount(){return this.undecryptableRelationEventIds.size}getResponses(){var e=this;return o()((function*(){return e.responses||e.isFetchingResponses||(yield e.fetchResponses()),e.responses}))()}onNewRelation(e){var t;if(l["a"].matches(e.getType())&&this.validateEndEvent(e)&&(this.endEvent=e,this.refilterResponsesOnEnd(),this.emit(n.End)),this.responses){var r=(null===(t=this.endEvent)||void 0===t?void 0:t.getTs())||Number.MAX_SAFE_INTEGER,{responseEvents:i}=h([e],r);this.countUndecryptableEvents([e]),i.length&&(i.forEach(e=>{this.responses.addEvent(e)}),this.emit(n.Responses,this.responses))}}fetchResponses(){var e=this;return o()((function*(){var t,r;e._isFetchingResponses=!0;var i=yield e.matrixClient.relations(e.roomId,e.rootEvent.getId(),"m.reference",void 0,{from:e.relationsNextBatch||void 0});yield Promise.all(i.events.map(t=>e.matrixClient.decryptEventIfNeeded(t)));var o=e.responses||new d["a"]("m.reference",l["d"].name,e.matrixClient,[l["d"].altName]),a=i.events.find(e=>l["a"].matches(e.getType()));e.validateEndEvent(a)&&(e.endEvent=a,e.refilterResponsesOnEnd(),e.emit(n.End));var s=(null===(t=e.endEvent)||void 0===t?void 0:t.getTs())||Number.MAX_SAFE_INTEGER,{responseEvents:c}=h(i.events,s);c.forEach(e=>{o.addEvent(e)}),e.relationsNextBatch=null!==(r=i.nextBatch)&&void 0!==r?r:void 0,e.responses=o,e.countUndecryptableEvents(i.events),e.relationsNextBatch?e.fetchResponses():e._isFetchingResponses=!1,e.emit(n.Responses,e.responses)}))()}refilterResponsesOnEnd(){var e;if(this.responses){var t=(null===(e=this.endEvent)||void 0===e?void 0:e.getTs())||Number.MAX_SAFE_INTEGER;this.responses.getRelations().forEach(e=>{var r;e.getTs()>t&&(null===(r=this.responses)||void 0===r||r.removeEvent(e))}),this.emit(n.Responses,this.responses)}}validateEndEvent(e){if(!e)return!1;if(this.endEvent&&this.endEvent.getTs()<e.getTs())return!1;var t=this.room.currentState,r=e.getSender();return!!r&&(r===this.rootEvent.getSender()||t.maySendRedactionForEvent(this.rootEvent,r))}}var p=e=>{var t=e.getType();return c["M_POLL_START"].matches(t)||l["d"].matches(t)||l["a"].matches(t)}},c04ea:function(e,t,r){"use strict";var n=r("c65b"),i=r("861d"),o=r("d9b5"),a=r("dc4a"),s=r("485a"),c=r("b622"),l=TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=a(e,d);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},c105:function(e,t,r){"use strict";r.r(t);var n=r("cd3b");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},c1af:function(e){e.exports=JSON.parse('{"caption":{"create":"Create","addPublicChatName":"Add Public Chat Name","addGroupNamePlaceHolder":"Add Group Name","createPublicChat":"Create public chat","chatTopic":"Topic renamed","publicRoomTitle":"Public Room","asModerator":"as moderator","marked":"marked","unmarked":"unmarked","removeBan":"Remove Ban","cancelModeration":"Remove moderation","uploadFiles":"파일 업로드","header":"헤더","dragAndDropAFile":"파일 끌어서 놓기","chatInvite":"다음과 채팅하도록 초대되었습니다:","cantJoin":"다음과 채팅하기 위해 참여할 수 없습니다:","chatInviteDecline":"채팅에 참여하거나 초대를 거부할 수 있습니다.","creatorLeft":"크리에이터가 방을 나갔기 때문에","encrypted":"암호화","noImages":"이 채팅에는 아직 이미지가 없습니다","noFiles":"There are no files in this chat yet","inviteUser":"사용자 초대","invite":"초대하다","add":"추가","mute":"음소거","unmute":"음소거 해제","leave":"떠나다","Info":"정보","new":"신규","typing":"타자","accNotFound":"등록이 진행 중입니다. 잠시만 기다려 주십시오...","emptyList":"목록이 비어 있습니다(필터링되었거나 비어 있음)","welcome":"포켓넷 채팅에 오신 것을 환영합니다","startNewChat":"새 채팅 시작","chats":"채팅","shareWith":"공유","newChat":"새 채팅","moveToChat":"채팅으로 이동","queryNoResults":"쿼리가 결과를 보고하지 않음","needMoreCharacters":"결과에 대해 더 많은 문자가 필요합니다","createGroup":"그룹 만들기","unabletoDecrypt":"* 해독할 수 없음","messageDeleted":"메시지 삭제됨","sentImage":"전송된 이미지","sentVoiceMessage":"음성 메시지를 보냈다","invitationToChat":"채팅 초대","invitationToRoom":"Invitation to room","leftChat":"채팅에서 나감","joined":"가입","chatRenamed":"채팅 이름이 (으)로 변경되었습니다 ","recentComment":"최근 댓글:","share":"공유","followers":"팔로워:","reputation":"평판:","following":"팔로잉:","theme":"테마:","contacts":"연락처","other":"바스티온 전역 검색","phoneContacts":"전화 연락처","chooseInviteMedia":"초대 방법을 선택하십시오:","admin":"관리자","moderator":"진행자","videocall":"영상통화","call":"전화","leaveAndDelete":"나가서 삭제","donate":"기부하다","makeModerator":"모더레이터 만들기","ban":"금지","kick":"킥","members":"회원","media":"미디어","files":"파일","contactsList":"연락처 목록","send":"보내다","pageCaption":"페이지 캡션","caption":"캡션","text":"텍스트","placeholder":"자리 표시자","sendTransactionTo":"트랜잭션 보내기","toBePaidByReceiver":"수취인이 지불함","toBePaidBySender":"발신인이 지불함","source":"소스","amount":"금액","receiver":"수신자","message":"메시지","includeFeesInAmount":"금액에 수수료 포함","transactionFees":"거래 수수료","totalAmount":"총 금액","balanceTooLow":"밸런스가 너무 낮음","transactionError":"오류, 거래를 할 수 없습니다","calculateFees":"수수료 계산","startChatWith":"채팅 시작","searchResult":"검색 결과","joinedInTheChat":"채팅에 참여했습니다","invited":"초대 ","hasInvited":"초대 ","inTheChat":" 채팅 중","banned":"금지된","andRoom":"그리고 방","left":"왼쪽","theChat":" 채팅 ","made":"만든 ","aModerator":" 중재자","editedChatNameTo ":"편집된 채팅 이름을 ","somebody":"누군가","sent":"보낸","PKOINto":" PKOIN to ","response":"응답","messagefrom":"에서 전달된 메시지","edited":"편집됨","settings":"설정","unauthorized":"무단","search":"검색","replyOnMessage":"메시지에 회신","editMessage":"메시지 편집","inviteFriend":"친구 초대","emptyContactList":"연락처 목록이 비어 있습니다","joinApp":"포켓넷 가입","hasInvitedToJoin":"Pocketnet에 가입하도록 초대했습니다","contactsempty":"아직 연락처가 없습니다. 검색에서 찾으십시오","chatsearchingempty":"No chats found for the specified filter","sendmessage":"Send message","messages":"Messages","you":"You","sentfile":"sent file:","administrators":"소유자","moderators":"중재자","participants":"참가자들","streamChat":"스트림 채팅","membersList":"회원 목록","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"이메일","refillNamePlaceholder":"리필 이름"},"message":{},"button":{"starChatButton":"채팅 시작","decline":"거절","declineandignore":"사용자 무시","join":"가입","ok":"그래","copy":"복사","forward":"앞으로","delete":"삭제","resend":"Resend","reply":"답장","share":"공유","save":"저장","download":"다운로드","downloaded":"다운로드","goToPocketnetProfile":"Pocketnet 프로필로 이동","sendFile":"파일 보내기","takePhotoOrVideo":"이미지 보내기","sendCoins":"코인 보내기","edit":"편집","select":"고르다","block":"차단","unblock":"차단 해제","blockUser":"사용자 차단","Complain":"불평하다","chat":"채팅","donations":"기부"},"yes":"예","cancel":"취소","teamMessages":{"1-title":"비공개 채팅에 오신 것을 환영합니다!","1-list1":"전화번호와 연결되지 않은 비공개 메신저","1-list2":"기본적으로 모든 1:1 대화의 종단 간 암호화","1-list3":"채팅을 통해 주고받는 모든 이미지는 암호화되어 저장됩니다","1-list4":"메시지 기록은 7일 동안만 저장됩니다","2-title":"엄청난 발표!","2-message1":"최근에 다음과 같은 주요 업데이트를 발표했습니다","2-list1":"귀하의 전화 번호에 연결되지 않은 개인 암호화 메신저","2-list2":"블로거에게 PKOIN 기부 기능","2-list3":"비디오 및 라이브 스트리밍","2-message2":"지금 친구를 초대하고 탈중앙화 인터넷의 큰 미래의 일부가 되십시오!","2-button":"친구를 초대"},"error_generic":"Something went wrong, please try again later.","sendingerror":"An error occurred while sending the message","details":"Details","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found"}')},c20d:function(e,t,r){var n=r("118b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("0b963deb",n,e)}},c24c:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("5b5f"),c=r("edaf"),l=r("9d2e"),d=r("aab2"),u=r("9c88"),h=r("afe6"),f=r("936a");class p{constructor(e,t){a()(this,"accountDataClientAdapter",void 0),a()(this,"crossSigningCallbacks",void 0),a()(this,"ssssCryptoCallbacks",void 0),a()(this,"crossSigningKeys",void 0),a()(this,"keySignatures",void 0),a()(this,"keyBackupInfo",void 0),a()(this,"sessionBackupPrivateKey",void 0),this.accountDataClientAdapter=new m(e),this.crossSigningCallbacks=new g,this.ssssCryptoCallbacks=new y(t)}addCrossSigningKeys(e,t){this.crossSigningKeys={authUpload:e,keys:t}}addSessionBackup(e){this.keyBackupInfo=e}addSessionBackupPrivateKeyToCache(e){this.sessionBackupPrivateKey=e}addKeySignature(e,t,r){this.keySignatures||(this.keySignatures={});var n=this.keySignatures[e]||{};this.keySignatures[e]=n,n[t]=r}setAccountData(e,t){var r=this;return i()((function*(){yield r.accountDataClientAdapter.setAccountData(e,t)}))()}buildOperation(){var e=this.accountDataClientAdapter.values;return new v(e,this.crossSigningKeys,this.keyBackupInfo,this.keySignatures)}persist(e){var t=this;return i()((function*(){if(t.crossSigningKeys){var r=Object(l["d"])(e.cryptoStore,e.olmDevice);for(var n of["master","self_signing","user_signing"]){var i;s["b"].log("Cache ".concat(n," cross-signing private key locally"));var o=t.crossSigningCallbacks.privateKeys.get(n);yield null===(i=r.storeCrossSigningKeyCache)||void 0===i?void 0:i.call(r,n,o)}yield e.cryptoStore.doTxn("readwrite",[d["a"].STORE_ACCOUNT],r=>{e.cryptoStore.storeCrossSigningKeys(r,t.crossSigningKeys.keys)})}t.sessionBackupPrivateKey&&(yield e.storeSessionBackupPrivateKey(t.sessionBackupPrivateKey))}))()}}class v{constructor(e,t,r,n){this.accountData=e,this.crossSigningKeys=t,this.keyBackupInfo=r,this.keySignatures=n}apply(e){var t=this;return i()((function*(){var r=e.baseApis;if(t.crossSigningKeys){var n,i,o={};for(var[a,s]of Object.entries(t.crossSigningKeys.keys))o[a+"_key"]=s;yield null===(n=(i=t.crossSigningKeys).authUpload)||void 0===n?void 0:n.call(i,e=>r.uploadDeviceSigningKeys(null!==e&&void 0!==e?e:void 0,o)),e.crossSigningInfo.setKeys(t.crossSigningKeys.keys)}if(t.accountData)for(var[c,l]of t.accountData)yield r.setAccountData(c,l);t.keySignatures&&(yield r.uploadKeySignatures(t.keySignatures)),t.keyBackupInfo&&(t.keyBackupInfo.version?yield r.http.authedRequest(u["i"].Put,"/room_keys/version/"+t.keyBackupInfo.version,void 0,{algorithm:t.keyBackupInfo.algorithm,auth_data:t.keyBackupInfo.auth_data},{prefix:u["a"].V3}):yield r.http.authedRequest(u["i"].Post,"/room_keys/version",void 0,t.keyBackupInfo,{prefix:u["a"].V3}),yield e.backupManager.checkKeyBackup())}))()}}class m extends f["b"]{constructor(e){super(),this.existingValues=e,a()(this,"values",new Map)}getAccountDataFromServer(e){return Promise.resolve(this.getAccountData(e))}getAccountData(e){var t=this.values.get(e);if(t)return t;var r=this.existingValues.get(e);return r?r.getContent():null}setAccountData(e,t){var r=this.values.get(e);return this.values.set(e,t),Promise.resolve().then(()=>{var n=new c["b"]({type:e,content:t});return this.emit(h["b"].AccountData,n,r),{}})}}class g{constructor(){a()(this,"privateKeys",new Map)}getCrossSigningKeyCache(e,t){return this.getCrossSigningKey(e,t)}storeCrossSigningKeyCache(e,t){return this.privateKeys.set(e,t),Promise.resolve()}getCrossSigningKey(e,t){var r;return Promise.resolve(null!==(r=this.privateKeys.get(e))&&void 0!==r?r:null)}saveCrossSigningKeys(e){for(var[t,r]of Object.entries(e))this.privateKeys.set(t,r)}}class y{constructor(e){this.delegateCryptoCallbacks=e,a()(this,"privateKeys",new Map)}getSecretStorageKey(e,t){var r=this;return i()((function*(){var n,{keys:i}=e;for(var o of Object.keys(i)){var a=r.privateKeys.get(o);if(a)return[o,a]}if(null!==r&&void 0!==r&&null!==(n=r.delegateCryptoCallbacks)&&void 0!==n&&n.getSecretStorageKey){var s=yield r.delegateCryptoCallbacks.getSecretStorageKey({keys:i},t);if(s){var[c,l]=s;r.privateKeys.set(c,l)}return s}return null}))()}addPrivateKey(e,t,r){var n,i;this.privateKeys.set(e,r),null===(n=this.delegateCryptoCallbacks)||void 0===n||null===(i=n.cacheSecretStorageKey)||void 0===i||i.call(n,e,t,r)}}},c275:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.emoji-mart,.emoji-mart *{box-sizing:border-box;line-height:1.15}.emoji-mart{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,sans-serif;font-size:16px;display:inline-block;color:#222427;border:1px solid #d9d9d9;border-radius:5px;background:#fff}.emoji-mart .emoji-mart-emoji{padding:6px}.emoji-mart-bar{border:0 solid #d9d9d9}.emoji-mart-bar:first-child{border-bottom-width:1px;border-top-left-radius:5px;border-top-right-radius:5px}.emoji-mart-bar:last-child{border-top-width:1px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.emoji-mart-anchors{display:flex;flex-direction:row;justify-content:space-between;padding:0 6px;color:#858585;line-height:0}.emoji-mart-anchor{position:relative;display:block;flex:1 1 auto;text-align:center;padding:12px 4px;overflow:hidden;transition:color .1s ease-out}.emoji-mart-anchor-selected,.emoji-mart-anchor:hover{color:#464646}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0}.emoji-mart-anchor-bar{position:absolute;bottom:-3px;left:0;width:100%;height:3px;background-color:#464646}.emoji-mart-anchors i{display:inline-block;width:100%;max-width:22px}.emoji-mart-anchors svg{fill:currentColor;max-height:18px}.emoji-mart-scroll{overflow-y:scroll;height:270px;padding:0 6px 6px 6px;will-change:transform}.emoji-mart-search{margin-top:6px;padding:0 6px}.emoji-mart-search input{font-size:16px;display:block;width:100%;padding:.2em .6em;border-radius:25px;border:1px solid #d9d9d9;outline:0}.emoji-mart-category .emoji-mart-emoji span{z-index:1;position:relative;text-align:center;cursor:default}.emoji-mart-category .emoji-mart-emoji:hover:before{z-index:0;content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;border-radius:100%}.emoji-mart-category-label{z-index:2;position:relative;position:sticky;top:0}.emoji-mart-category-label span{display:block;width:100%;font-weight:500;padding:5px 6px;background-color:#fff;background-color:hsla(0,0%,100%,.95)}.emoji-mart-emoji{position:relative;display:inline-block;font-size:0}.emoji-mart-no-results{font-size:14px;text-align:center;padding-top:70px;color:#858585}.emoji-mart-no-results .emoji-mart-category-label{display:none}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:.2em}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none}.emoji-mart-preview{position:relative;height:70px}.emoji-mart-preview-data,.emoji-mart-preview-emoji,.emoji-mart-preview-skins{position:absolute;top:50%;transform:translateY(-50%)}.emoji-mart-preview-emoji{left:12px}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all}.emoji-mart-preview-skins{right:30px;text-align:right}.emoji-mart-preview-name{font-size:14px}.emoji-mart-preview-shortname{font-size:12px;color:#888}.emoji-mart-preview-emoticon+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-shortname{margin-left:.5em}.emoji-mart-preview-emoticon{font-size:11px;color:#bbb}.emoji-mart-title span{display:inline-block;vertical-align:middle}.emoji-mart-title .emoji-mart-emoji{padding:0}.emoji-mart-title-label{color:#999a9c;font-size:26px;font-weight:300}.emoji-mart-skin-swatches{font-size:0;padding:2px 0;border:1px solid #d9d9d9;border-radius:12px;background-color:#fff}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch{width:16px;padding:0 2px}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after{opacity:.75}.emoji-mart-skin-swatch{display:inline-block;width:0;vertical-align:middle;transition-property:width,padding;transition-duration:.125s;transition-timing-function:ease-out}.emoji-mart-skin-swatch:first-child{transition-delay:0s}.emoji-mart-skin-swatch:nth-child(2){transition-delay:.03s}.emoji-mart-skin-swatch:nth-child(3){transition-delay:.06s}.emoji-mart-skin-swatch:nth-child(4){transition-delay:.09s}.emoji-mart-skin-swatch:nth-child(5){transition-delay:.12s}.emoji-mart-skin-swatch:nth-child(6){transition-delay:.15s}.emoji-mart-skin-swatch-selected{position:relative;width:16px;padding:0 2px}.emoji-mart-skin-swatch-selected:after{content:"";position:absolute;top:50%;left:50%;width:4px;height:4px;margin:-2px 0 0 -2px;background-color:#fff;border-radius:100%;pointer-events:none;opacity:0;transition:opacity .2s ease-out}.emoji-mart-skin{display:inline-block;width:100%;padding-top:100%;max-width:12px;border-radius:100%}.emoji-mart-skin-tone-1{background-color:#ffc93a}.emoji-mart-skin-tone-2{background-color:#fadcbc}.emoji-mart-skin-tone-3{background-color:#e0bb95}.emoji-mart-skin-tone-4{background-color:#bf8f68}.emoji-mart-skin-tone-5{background-color:#9b643d}.emoji-mart-skin-tone-6{background-color:#594539}',""]),e.exports=t},c339:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".list-item[data-v-286a0306]{margin-right:10px}.list-enter-active[data-v-286a0306],.list-leave-active[data-v-286a0306]{transition:all 1s}.list-enter[data-v-286a0306],.list-leave-to[data-v-286a0306]{opacity:0;transform:translateY(30px)}",""]),e.exports=t},c345:function(e,t,r){"use strict";var n=r("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},c35f:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"h",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"g",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return h})),r.d(t,"b",(function(){return f}));var n=r("edaf"),i=r("60af");function o(e,t,r){var o=Object.assign({},{code:e,reason:t},r);return new n["b"]({type:i["b"].KeyVerificationCancel,content:o})}function a(e,t){return function(r){return o(e,t,r)}}var s=a("m.user","Cancelled by user"),c=a("m.timeout","Timed out"),l=a("m.unknown_method","Unknown method"),d=a("m.unexpected_message","Unexpected message"),u=a("m.key_mismatch","Key mismatch"),h=a("m.invalid_message","Invalid message");function f(e){var t=e.getContent();if(t){var{code:r,reason:n}=t;return{code:r,reason:n}}return{code:"Unknown error",reason:"m.unknown"}}},c401:function(e,t,r){"use strict";var n=r("c532"),i=r("2444");e.exports=function(e,t,r){var o=this||i;return n.forEach(r,(function(r){e=r.call(o,e,t)})),e}},c430:function(e,t,r){"use strict";e.exports=!1},c4c0:function(e,t,r){"use strict";var n=r("966d");function i(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,n.nextTick(a,r,e)):n.nextTick(a,r,e):t&&t(e)})),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}e.exports={destroy:i,undestroy:o}},c4c5:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var n=r("9523"),i=r.n(n);class o extends Error{constructor(e,t){super(e),this.httpStatus=t}}class a extends o{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=e.error||"Unknown message";t&&(o="[".concat(t,"] ").concat(o)),r&&(o="".concat(o," (").concat(r,")")),super("MatrixError: ".concat(o),t),this.httpStatus=t,this.url=r,this.event=n,i()(this,"errcode",void 0),i()(this,"data",void 0),this.errcode=e.errcode,this.name=e.errcode||"Unknown error code",this.data=e}}class s extends Error{constructor(e,t){super(e+(t?": ".concat(t.message):""))}get name(){return"ConnectionError"}}},c532:function(e,t,r){"use strict";var n=r("1d2b"),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return"undefined"===typeof e}function s(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function c(e){return"[object ArrayBuffer]"===i.call(e)}function l(e){return"undefined"!==typeof FormData&&e instanceof FormData}function d(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function u(e){return"string"===typeof e}function h(e){return"number"===typeof e}function f(e){return null!==e&&"object"===typeof e}function p(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function v(e){return"[object Date]"===i.call(e)}function m(e){return"[object File]"===i.call(e)}function g(e){return"[object Blob]"===i.call(e)}function y(e){return"[object Function]"===i.call(e)}function b(e){return f(e)&&y(e.pipe)}function _(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function w(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function E(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function k(){var e={};function t(t,r){p(e[r])&&p(t)?e[r]=k(e[r],t):p(t)?e[r]=k({},t):o(t)?e[r]=t.slice():e[r]=t}for(var r=0,n=arguments.length;r<n;r++)E(arguments[r],t);return e}function I(e,t,r){return E(t,(function(t,i){e[i]=r&&"function"===typeof t?n(t,r):t})),e}function C(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:o,isArrayBuffer:c,isBuffer:s,isFormData:l,isArrayBufferView:d,isString:u,isNumber:h,isObject:f,isPlainObject:p,isUndefined:a,isDate:v,isFile:m,isBlob:g,isFunction:y,isStream:b,isURLSearchParams:_,isStandardBrowserEnv:S,forEach:E,merge:k,extend:I,trim:w,stripBOM:C}},c566:function(e,t,r){e.exports=r("dc31")},c567:function(t,r,n){"use strict";n.r(r);var i,o=n("9083");if(n.d(r,"CRYPTO_ENABLED",(function(){return o["CRYPTO_ENABLED"]})),n.d(r,"UNSTABLE_MSC3852_LAST_SEEN_UA",(function(){return o["UNSTABLE_MSC3852_LAST_SEEN_UA"]})),n.d(r,"PendingEventOrdering",(function(){return o["PendingEventOrdering"]})),n.d(r,"GET_LOGIN_TOKEN_CAPABILITY",(function(){return o["GET_LOGIN_TOKEN_CAPABILITY"]})),n.d(r,"UNSTABLE_MSC2666_SHARED_ROOMS",(function(){return o["UNSTABLE_MSC2666_SHARED_ROOMS"]})),n.d(r,"UNSTABLE_MSC2666_MUTUAL_ROOMS",(function(){return o["UNSTABLE_MSC2666_MUTUAL_ROOMS"]})),n.d(r,"UNSTABLE_MSC2666_QUERY_MUTUAL_ROOMS",(function(){return o["UNSTABLE_MSC2666_QUERY_MUTUAL_ROOMS"]})),n.d(r,"UNSTABLE_MSC4140_DELAYED_EVENTS",(function(){return o["UNSTABLE_MSC4140_DELAYED_EVENTS"]})),n.d(r,"ClientEvent",(function(){return o["ClientEvent"]})),n.d(r,"MatrixClient",(function(){return o["MatrixClient"]})),n.d(r,"fixNotificationCountOnDecryption",(function(){return o["fixNotificationCountOnDecryption"]})),n.d(r,"threadIdForReceipt",(function(){return o["threadIdForReceipt"]})),n.d(r,"inMainTimelineForReceipt",(function(){return o["inMainTimelineForReceipt"]})),n.d(r,"RoomVersionStability",(function(){return o["RoomVersionStability"]})),n.d(r,"ServerCapabilities",(function(){return o["ServerCapabilities"]})),n.d(r,"RoomWidgetClient",(function(){return o["RoomWidgetClient"]})),n.d(r,"HttpApiEvent",(function(){return o["HttpApiEvent"]})),n.d(r,"ClientPrefix",(function(){return o["ClientPrefix"]})),n.d(r,"IdentityPrefix",(function(){return o["IdentityPrefix"]})),n.d(r,"MediaPrefix",(function(){return o["MediaPrefix"]})),n.d(r,"HTTPError",(function(){return o["HTTPError"]})),n.d(r,"MatrixError",(function(){return o["MatrixError"]})),n.d(r,"ConnectionError",(function(){return o["ConnectionError"]})),n.d(r,"Method",(function(){return o["Method"]})),n.d(r,"timeoutSignal",(function(){return o["timeoutSignal"]})),n.d(r,"anySignal",(function(){return o["anySignal"]})),n.d(r,"parseErrorResponse",(function(){return o["parseErrorResponse"]})),n.d(r,"retryNetworkOperation",(function(){return o["retryNetworkOperation"]})),n.d(r,"calculateRetryBackoff",(function(){return o["calculateRetryBackoff"]})),n.d(r,"MatrixHttpApi",(function(){return o["MatrixHttpApi"]})),n.d(r,"AutoDiscoveryAction",(function(){return o["AutoDiscoveryAction"]})),n.d(r,"AutoDiscoveryError",(function(){return o["AutoDiscoveryError"]})),n.d(r,"AutoDiscovery",(function(){return o["AutoDiscovery"]})),n.d(r,"Category",(function(){return o["Category"]})),n.d(r,"SyncAccumulator",(function(){return o["SyncAccumulator"]})),n.d(r,"InvalidCryptoStoreState",(function(){return o["InvalidCryptoStoreState"]})),n.d(r,"InvalidCryptoStoreError",(function(){return o["InvalidCryptoStoreError"]})),n.d(r,"KeySignatureUploadError",(function(){return o["KeySignatureUploadError"]})),n.d(r,"ClientStoppedError",(function(){return o["ClientStoppedError"]})),n.d(r,"encodeBase64",(function(){return o["encodeBase64"]})),n.d(r,"encodeUnpaddedBase64",(function(){return o["encodeUnpaddedBase64"]})),n.d(r,"encodeUnpaddedBase64Url",(function(){return o["encodeUnpaddedBase64Url"]})),n.d(r,"decodeBase64",(function(){return o["decodeBase64"]})),n.d(r,"BeaconEvent",(function(){return o["BeaconEvent"]})),n.d(r,"isTimestampInDuration",(function(){return o["isTimestampInDuration"]})),n.d(r,"getBeaconInfoIdentifier",(function(){return o["getBeaconInfoIdentifier"]})),n.d(r,"Beacon",(function(){return o["Beacon"]})),n.d(r,"EventStatus",(function(){return o["EventStatus"]})),n.d(r,"MatrixEventEvent",(function(){return o["MatrixEventEvent"]})),n.d(r,"MatrixEvent",(function(){return o["MatrixEvent"]})),n.d(r,"KNOWN_SAFE_ROOM_VERSION",(function(){return o["KNOWN_SAFE_ROOM_VERSION"]})),n.d(r,"NotificationCountType",(function(){return o["NotificationCountType"]})),n.d(r,"RoomEvent",(function(){return o["RoomEvent"]})),n.d(r,"Room",(function(){return o["Room"]})),n.d(r,"RoomNameType",(function(){return o["RoomNameType"]})),n.d(r,"Direction",(function(){return o["Direction"]})),n.d(r,"EventTimeline",(function(){return o["EventTimeline"]})),n.d(r,"DuplicateStrategy",(function(){return o["DuplicateStrategy"]})),n.d(r,"EventTimelineSet",(function(){return o["EventTimelineSet"]})),n.d(r,"PollEvent",(function(){return o["PollEvent"]})),n.d(r,"Poll",(function(){return o["Poll"]})),n.d(r,"isPollEvent",(function(){return o["isPollEvent"]})),n.d(r,"RoomMemberEvent",(function(){return o["RoomMemberEvent"]})),n.d(r,"RoomMember",(function(){return o["RoomMember"]})),n.d(r,"RoomStateEvent",(function(){return o["RoomStateEvent"]})),n.d(r,"RoomState",(function(){return o["RoomState"]})),n.d(r,"ThreadEvent",(function(){return o["ThreadEvent"]})),n.d(r,"FeatureSupport",(function(){return o["FeatureSupport"]})),n.d(r,"determineFeatureSupport",(function(){return o["determineFeatureSupport"]})),n.d(r,"Thread",(function(){return o["Thread"]})),n.d(r,"FILTER_RELATED_BY_SENDERS",(function(){return o["FILTER_RELATED_BY_SENDERS"]})),n.d(r,"FILTER_RELATED_BY_REL_TYPES",(function(){return o["FILTER_RELATED_BY_REL_TYPES"]})),n.d(r,"THREAD_RELATION_TYPE",(function(){return o["THREAD_RELATION_TYPE"]})),n.d(r,"ThreadFilterType",(function(){return o["ThreadFilterType"]})),n.d(r,"threadFilterTypeToFilter",(function(){return o["threadFilterTypeToFilter"]})),n.d(r,"EventEmitterEvents",(function(){return o["EventEmitterEvents"]})),n.d(r,"UserEvent",(function(){return o["UserEvent"]})),n.d(r,"User",(function(){return o["User"]})),n.d(r,"DeviceVerification",(function(){return o["DeviceVerification"]})),n.d(r,"Device",(function(){return o["Device"]})),n.d(r,"SearchResult",(function(){return o["SearchResult"]})),n.d(r,"generateScope",(function(){return o["generateScope"]})),n.d(r,"generateAuthorizationParams",(function(){return o["generateAuthorizationParams"]})),n.d(r,"generateAuthorizationUrl",(function(){return o["generateAuthorizationUrl"]})),n.d(r,"generateOidcAuthorizationUrl",(function(){return o["generateOidcAuthorizationUrl"]})),n.d(r,"completeAuthorizationCodeGrant",(function(){return o["completeAuthorizationCodeGrant"]})),n.d(r,"discoverAndValidateOIDCIssuerWellKnown",(function(){return o["discoverAndValidateOIDCIssuerWellKnown"]})),n.d(r,"OidcError",(function(){return o["OidcError"]})),n.d(r,"DEVICE_CODE_SCOPE",(function(){return o["DEVICE_CODE_SCOPE"]})),n.d(r,"registerOidcClient",(function(){return o["registerOidcClient"]})),n.d(r,"OidcTokenRefresher",(function(){return o["OidcTokenRefresher"]})),n.d(r,"validateOIDCIssuerWellKnown",(function(){return o["validateOIDCIssuerWellKnown"]})),n.d(r,"isValidatedIssuerMetadata",(function(){return o["isValidatedIssuerMetadata"]})),n.d(r,"decodeIdToken",(function(){return o["decodeIdToken"]})),n.d(r,"validateIdToken",(function(){return o["validateIdToken"]})),n.d(r,"validateStoredUserState",(function(){return o["validateStoredUserState"]})),n.d(r,"validateBearerTokenResponse",(function(){return o["validateBearerTokenResponse"]})),n.d(r,"MatrixScheduler",(function(){return o["MatrixScheduler"]})),n.d(r,"Filter",(function(){return o["Filter"]})),n.d(r,"TimelineWindow",(function(){return o["TimelineWindow"]})),n.d(r,"TimelineIndex",(function(){return o["TimelineIndex"]})),n.d(r,"AuthType",(function(){return o["AuthType"]})),n.d(r,"NoAuthFlowFoundError",(function(){return o["NoAuthFlowFoundError"]})),n.d(r,"InteractiveAuth",(function(){return o["InteractiveAuth"]})),n.d(r,"SERVICE_TYPES",(function(){return o["SERVICE_TYPES"]})),n.d(r,"MemoryStore",(function(){return o["MemoryStore"]})),n.d(r,"IndexedDBStore",(function(){return o["IndexedDBStore"]})),n.d(r,"MemoryCryptoStore",(function(){return o["MemoryCryptoStore"]})),n.d(r,"LocalStorageCryptoStore",(function(){return o["LocalStorageCryptoStore"]})),n.d(r,"IndexedDBCryptoStore",(function(){return o["IndexedDBCryptoStore"]})),n.d(r,"getHttpUriForMxc",(function(){return o["getHttpUriForMxc"]})),n.d(r,"EventType",(function(){return o["EventType"]})),n.d(r,"RelationType",(function(){return o["RelationType"]})),n.d(r,"MsgType",(function(){return o["MsgType"]})),n.d(r,"RoomCreateTypeField",(function(){return o["RoomCreateTypeField"]})),n.d(r,"RoomType",(function(){return o["RoomType"]})),n.d(r,"ToDeviceMessageId",(function(){return o["ToDeviceMessageId"]})),n.d(r,"UNSTABLE_MSC3088_PURPOSE",(function(){return o["UNSTABLE_MSC3088_PURPOSE"]})),n.d(r,"UNSTABLE_MSC3088_ENABLED",(function(){return o["UNSTABLE_MSC3088_ENABLED"]})),n.d(r,"UNSTABLE_MSC3089_TREE_SUBTYPE",(function(){return o["UNSTABLE_MSC3089_TREE_SUBTYPE"]})),n.d(r,"UNSTABLE_MSC3089_LEAF",(function(){return o["UNSTABLE_MSC3089_LEAF"]})),n.d(r,"UNSTABLE_MSC3089_BRANCH",(function(){return o["UNSTABLE_MSC3089_BRANCH"]})),n.d(r,"UNSTABLE_MSC2716_MARKER",(function(){return o["UNSTABLE_MSC2716_MARKER"]})),n.d(r,"MSC3912_RELATION_BASED_REDACTIONS_PROP",(function(){return o["MSC3912_RELATION_BASED_REDACTIONS_PROP"]})),n.d(r,"UNSTABLE_ELEMENT_FUNCTIONAL_USERS",(function(){return o["UNSTABLE_ELEMENT_FUNCTIONAL_USERS"]})),n.d(r,"EVENT_VISIBILITY_CHANGE_TYPE",(function(){return o["EVENT_VISIBILITY_CHANGE_TYPE"]})),n.d(r,"PUSHER_ENABLED",(function(){return o["PUSHER_ENABLED"]})),n.d(r,"PUSHER_DEVICE_ID",(function(){return o["PUSHER_DEVICE_ID"]})),n.d(r,"LOCAL_NOTIFICATION_SETTINGS_PREFIX",(function(){return o["LOCAL_NOTIFICATION_SETTINGS_PREFIX"]})),n.d(r,"UNSIGNED_THREAD_ID_FIELD",(function(){return o["UNSIGNED_THREAD_ID_FIELD"]})),n.d(r,"UNSIGNED_MEMBERSHIP_FIELD",(function(){return o["UNSIGNED_MEMBERSHIP_FIELD"]})),n.d(r,"PushRuleActionName",(function(){return o["PushRuleActionName"]})),n.d(r,"TweakName",(function(){return o["TweakName"]})),n.d(r,"ConditionOperator",(function(){return o["ConditionOperator"]})),n.d(r,"DMMemberCountCondition",(function(){return o["DMMemberCountCondition"]})),n.d(r,"isDmMemberCountCondition",(function(){return o["isDmMemberCountCondition"]})),n.d(r,"ConditionKind",(function(){return o["ConditionKind"]})),n.d(r,"PushRuleKind",(function(){return o["PushRuleKind"]})),n.d(r,"RuleId",(function(){return o["RuleId"]})),n.d(r,"Visibility",(function(){return o["Visibility"]})),n.d(r,"Preset",(function(){return o["Preset"]})),n.d(r,"JoinRule",(function(){return o["JoinRule"]})),n.d(r,"RestrictedAllowType",(function(){return o["RestrictedAllowType"]})),n.d(r,"GuestAccess",(function(){return o["GuestAccess"]})),n.d(r,"HistoryVisibility",(function(){return o["HistoryVisibility"]})),n.d(r,"UpdateDelayedEventAction",(function(){return o["UpdateDelayedEventAction"]})),n.d(r,"SearchOrderBy",(function(){return o["SearchOrderBy"]})),n.d(r,"M_BEACON_INFO",(function(){return o["M_BEACON_INFO"]})),n.d(r,"M_BEACON",(function(){return o["M_BEACON"]})),n.d(r,"M_TOPIC",(function(){return o["M_TOPIC"]})),n.d(r,"M_ASSET",(function(){return o["M_ASSET"]})),n.d(r,"M_TIMESTAMP",(function(){return o["M_TIMESTAMP"]})),n.d(r,"M_LOCATION",(function(){return o["M_LOCATION"]})),n.d(r,"ThreepidMedium",(function(){return o["ThreepidMedium"]})),n.d(r,"DELEGATED_OIDC_COMPATIBILITY",(function(){return o["DELEGATED_OIDC_COMPATIBILITY"]})),n.d(r,"M_POLL_KIND_DISCLOSED",(function(){return o["M_POLL_KIND_DISCLOSED"]})),n.d(r,"M_POLL_KIND_UNDISCLOSED",(function(){return o["M_POLL_KIND_UNDISCLOSED"]})),n.d(r,"M_POLL_START",(function(){return o["M_POLL_START"]})),n.d(r,"M_POLL_RESPONSE",(function(){return o["M_POLL_RESPONSE"]})),n.d(r,"M_POLL_END",(function(){return o["M_POLL_END"]})),n.d(r,"ReceiptType",(function(){return o["ReceiptType"]})),n.d(r,"MAIN_ROOM_TIMELINE",(function(){return o["MAIN_ROOM_TIMELINE"]})),n.d(r,"M_MESSAGE",(function(){return o["M_MESSAGE"]})),n.d(r,"M_TEXT",(function(){return o["M_TEXT"]})),n.d(r,"M_HTML",(function(){return o["M_HTML"]})),n.d(r,"REFERENCE_RELATION",(function(){return o["REFERENCE_RELATION"]})),n.d(r,"isEventTypeSame",(function(){return o["isEventTypeSame"]})),n.d(r,"RoomSummary",(function(){return o["RoomSummary"]})),n.d(r,"ContentHelpers",(function(){return o["ContentHelpers"]})),n.d(r,"SecretStorage",(function(){return o["SecretStorage"]})),n.d(r,"createNewMatrixCall",(function(){return o["createNewMatrixCall"]})),n.d(r,"CallEvent",(function(){return o["CallEvent"]})),n.d(r,"GroupCall",(function(){return o["GroupCall"]})),n.d(r,"GroupCallEvent",(function(){return o["GroupCallEvent"]})),n.d(r,"GroupCallIntent",(function(){return o["GroupCallIntent"]})),n.d(r,"GroupCallState",(function(){return o["GroupCallState"]})),n.d(r,"GroupCallType",(function(){return o["GroupCallType"]})),n.d(r,"GroupCallStatsReportEvent",(function(){return o["GroupCallStatsReportEvent"]})),n.d(r,"CryptoEvent",(function(){return o["CryptoEvent"]})),n.d(r,"SyncState",(function(){return o["SyncState"]})),n.d(r,"SetPresence",(function(){return o["SetPresence"]})),n.d(r,"SlidingSyncEvent",(function(){return o["SlidingSyncEvent"]})),n.d(r,"MediaHandlerEvent",(function(){return o["MediaHandlerEvent"]})),n.d(r,"CallFeedEvent",(function(){return o["CallFeedEvent"]})),n.d(r,"StatsReport",(function(){return o["StatsReport"]})),n.d(r,"Relations",(function(){return o["Relations"]})),n.d(r,"RelationsEvent",(function(){return o["RelationsEvent"]})),n.d(r,"TypedEventEmitter",(function(){return o["TypedEventEmitter"]})),n.d(r,"LocalStorageErrors",(function(){return o["LocalStorageErrors"]})),n.d(r,"IdentityProviderBrand",(function(){return o["IdentityProviderBrand"]})),n.d(r,"SSOAction",(function(){return o["SSOAction"]})),n.d(r,"LocationAssetType",(function(){return o["LocationAssetType"]})),n.d(r,"Crypto",(function(){return o["Crypto"]})),n.d(r,"setCryptoStoreFactory",(function(){return o["setCryptoStoreFactory"]})),n.d(r,"createClient",(function(){return o["createClient"]})),n.d(r,"createRoomWidgetClient",(function(){return o["createRoomWidgetClient"]})),globalThis.__js_sdk_entrypoint)throw new Error("Multiple matrix-js-sdk entrypoints detected!");globalThis.__js_sdk_entrypoint=!0;try{i=globalThis.indexedDB}catch(e){}i&&o["setCryptoStoreFactory"](()=>new o["IndexedDBCryptoStore"](i,"matrix-js-sdk:crypto")),globalThis.matrixcs=o},c5c5:function(e,t,r){var n=r("ccdd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("1e5aa7e0",n,e)}},c65b:function(e,t,r){"use strict";var n=r("40d5"),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},c6aa:function(e,t,r){var n=r("463e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("47b7cfa4",n,e)}},c6ae:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t=l(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=d(e,"string");return"symbol"===typeof t?t:String(t)}function d(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u=r("b639"),h=u.Buffer,f=r(1),p=f.inspect,v=p&&p.custom||"inspect";function m(e,t,r){h.prototype.copy.call(e,t,r)}e.exports=function(){function e(){a(this,e),this.head=null,this.tail=null,this.length=0}return c(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";var t=this.head,r=""+t.data;while(t=t.next)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return h.alloc(0);var t=h.allocUnsafe(e>>>0),r=this.head,n=0;while(r)m(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;e-=n.length;while(t=t.next){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),e-=o,0===e){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=h.allocUnsafe(e),r=this.head,n=1;r.data.copy(t),e-=r.data.length;while(r=r.next){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),e-=o,0===e){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:v,value:function(e,t){return p(this,i(i({},t),{},{depth:0,customInspect:!1}))}}]),e}()},c6b6:function(e,t,r){"use strict";var n=r("e330"),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},c6cd:function(e,t,r){"use strict";var n=r("c430"),i=r("cfe9"),o=r("6374"),a="__core-js_shared__",s=e.exports=i[a]||o(a,{});(s.versions||(s.versions=[])).push({version:"3.38.1",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},c739:function(e,t,r){"use strict";function n(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(c)throw a}}}}function i(e,t){if(e){if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.NamespacedMap=void 0;var d=function(){function e(t){if(a(this,e),l(this,"internalMap",new Map),t){var r,i=n(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.set(o[0],o[1])}}catch(s){i.e(s)}finally{i.f()}}}return c(e,[{key:"get",value:function(e){return e.name&&this.internalMap.has(e.name)?this.internalMap.get(e.name):e.altName&&this.internalMap.has(e.altName)?this.internalMap.get(e.altName):null}},{key:"set",value:function(e,t){e.name&&this.internalMap.set(e.name,t),e.altName&&this.internalMap.set(e.altName,t)}},{key:"has",value:function(e){return!!this.get(e)}},{key:"delete",value:function(e){e.name&&this.internalMap["delete"](e.name),e.altName&&this.internalMap["delete"](e.altName)}},{key:"hasNamespaced",value:function(e){return this.internalMap.has(e)}},{key:"getNamespaced",value:function(e){return this.internalMap.get(e)}}]),e}();t.NamespacedMap=d},c889:function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("da1e"),a=new Uint8Array(8);function s(e,t,r,n){return c.apply(this,arguments)}function c(){return c=i()((function*(e,t,r,n){var i;n?i=Object(o["a"])(n):(i=new Uint8Array(16),globalThis.crypto.getRandomValues(i),i[8]&=127);var[a,s]=yield u(t,r),c=(new TextEncoder).encode(e),l=yield globalThis.crypto.subtle.encrypt({name:"AES-CTR",counter:i,length:64},a,c),d=yield globalThis.crypto.subtle.sign({name:"HMAC"},s,l);return{iv:Object(o["b"])(i),ciphertext:Object(o["b"])(l),mac:Object(o["b"])(d)}})),c.apply(this,arguments)}function l(e,t,r){return d.apply(this,arguments)}function d(){return d=i()((function*(e,t,r){var[n,i]=yield u(t,r),a=Object(o["a"])(e.ciphertext);if(!(yield globalThis.crypto.subtle.verify({name:"HMAC"},i,Object(o["a"])(e.mac),a)))throw new Error("Error decrypting secret ".concat(r,": bad MAC"));var s=yield globalThis.crypto.subtle.decrypt({name:"AES-CTR",counter:Object(o["a"])(e.iv),length:64},n,a);return(new TextDecoder).decode(new Uint8Array(s))})),d.apply(this,arguments)}function u(e,t){return h.apply(this,arguments)}function h(){return h=i()((function*(e,t){var r=yield globalThis.crypto.subtle.importKey("raw",e,{name:"HKDF"},!1,["deriveBits"]),n=yield globalThis.crypto.subtle.deriveBits({name:"HKDF",salt:a,info:(new TextEncoder).encode(t),hash:"SHA-256"},r,512),i=n.slice(0,32),o=n.slice(32),s=globalThis.crypto.subtle.importKey("raw",i,{name:"AES-CTR"},!1,["encrypt","decrypt"]),c=globalThis.crypto.subtle.importKey("raw",o,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]);return Promise.all([s,c])})),h.apply(this,arguments)}var f="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0";function p(e,t){return s(f,e,"",t)}},c8af:function(e,t,r){"use strict";var n=r("c532");e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},c8ba:function(t,r){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===typeof window&&(n=window)}t.exports=n},c8de:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.m-message-container{position:fixed;z-index:1010;pointer-events:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;padding:15px}.m-message-container.is-top-center,.m-message-container.is-top-left,.m-message-container.is-top-right{width:100%;top:0;left:0}.m-message-container.is-top-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.m-message-container.is-top-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-container.is-top-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.m-message-container.is-center{width:100%;height:100%;left:0;top:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.m-message-container.is-bottom-center,.m-message-container.is-bottom-left,.m-message-container.is-bottom-right{bottom:0;left:0;width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.m-message-container.is-bottom-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.m-message-container.is-bottom-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.m-message-container.is-bottom-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.m-message-container.has-mask{background-color:hsla(0,0%,100%,.5);width:100%;height:100%;pointer-events:all}.m-message-wrapper{display:inline-block;max-width:500px}.m-message-wrapper+.m-message-wrapper{margin-top:15px}.m-message-wrapper:after,.m-message-wrapper:before{content:"";clear:both;display:table}.m-message{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 16px;font-size:14px;overflow:hidden;border-radius:4px;-webkit-box-shadow:0 1px 8px rgba(0,0,0,.15);box-shadow:0 1px 8px rgba(0,0,0,.15);color:rgba(0,0,0,.65);background:hsla(0,0%,100%,.95);pointer-events:all;position:relative}.m-message,.m-message-icons{-webkit-box-sizing:border-box;box-sizing:border-box}.m-message-icons{float:left;margin-right:10px}.m-message--title{font-size:14px;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.m-message-content{-webkit-box-sizing:border-box;box-sizing:border-box;overflow:auto;width:100%}.m-message--description{line-height:1.6;color:#777}.m-message--title+.m-message--description{margin-top:5px}.m-message--icon{width:25px;height:25px;vertical-align:middle;display:inline-block;border-radius:50%}.m-message--control{position:relative;height:100%;-ms-flex-item-align:start;align-self:flex-start;white-space:nowrap;margin-right:-5px;margin-left:10px}.m-message--button{border:none;outline:none;background:none;cursor:pointer;font-size:15px;color:#646464;font-weight:600;padding:0;width:20px;height:20px;line-height:20px;text-align:center;vertical-align:middle}.m-message--button:hover{color:#f56c6c}.m-message--arrow-down.is-collapsed{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.m-message-fade-enter-active{-webkit-animation:m-message-fade-in-down .3s;animation:m-message-fade-in-down .3s}.m-message-fade-leave-active{-webkit-animation:m-message-fade-out .3s;animation:m-message-fade-out .3s}@-webkit-keyframes m-message-fade-in-down{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes m-message-fade-in-down{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes m-message-fade-out{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:-45px}}@keyframes m-message-fade-out{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:-45px}}',""]),e.exports=t},c92d:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"#topheader[data-v-b9eeb9ae]{background:rgb(var(--background-total-theme));top:0;padding-top:var(--app-margin-top);left:0;right:0;position:absolute;z-index:4;color:rgb(var(--text-color));border-bottom:1px solid rgb(var(--neutral-grad-0))}#topheader .iconbutton[data-v-b9eeb9ae]{cursor:pointer}#topheader .headerLine[data-v-b9eeb9ae]{display:flex;align-items:center;padding:0;height:64px}#topheader .headerLine>div[data-v-b9eeb9ae]{text-align:center}#topheader .headerLine .iconsmall[data-v-b9eeb9ae]{width:22px;min-width:22px}#topheader .headerLine .icon[data-v-b9eeb9ae]{color:rgb(var(--color-txt-ac));width:44px;min-width:44px}#topheader .headerLine .rightaddIcons[data-v-b9eeb9ae]{margin-right:11px}#topheader .headerLine .leftaddIcon[data-v-b9eeb9ae]{margin-left:11px}#topheader .headerLine .infoPart[data-v-b9eeb9ae]{flex-grow:1;padding:0 1em;overflow:hidden}#topheader .headerLine .infoPart[data-v-b9eeb9ae] span,#topheader .headerLine .infoPart span[data-v-b9eeb9ae]{font-size:.9em;font-weight:500}#topheader .rightaddIcons[data-v-b9eeb9ae],#topheader .rightIcons[data-v-b9eeb9ae]{justify-content:space-between}#topheader.bin[data-v-b9eeb9ae]{position:relative}#topheader.minimized[data-v-b9eeb9ae]{right:auto;transition:.3s}#topheader.minimized .headerLine[data-v-b9eeb9ae]{height:54px}#topheader.minimized.fix[data-v-b9eeb9ae]{width:344px;position:absolute;background:transparent;overflow:hidden;will-change:transform;right:0}#topheader.minimized.fix .headerLine[data-v-b9eeb9ae]{padding:0}#topheader.minimized.fix .icon[data-v-b9eeb9ae]{width:44px;height:44px;line-height:44px;transition:transform .3s}#topheader.minimized.fix .icon .iconbutton[data-v-b9eeb9ae]{border-radius:50%;background:rgba(var(--neutral-grad-4),.1);color:rgb(var(--color-txt-ac));cursor:pointer}@media(pointer:fine){#topheader.minimized.fix .icon .iconbutton[data-v-b9eeb9ae]:hover{background:rgba(var(--neutral-grad-4),.05)}}#topheader.minimized.fix .infoPart[data-v-b9eeb9ae],#topheader.minimized.fix .leftIcon[data-v-b9eeb9ae]{display:none}#topheader.minimized.fix.active[data-v-b9eeb9ae]{transform:translate3d(-300px,-56px,0);border-radius:8px;border-bottom-left-radius:0;border-bottom-right-radius:0;background:rgb(var(--background-total-theme));border:1px solid rgba(var(--neutral-grad-4),.2);box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}#topheader.minimized.fix.active .infoPart[data-v-b9eeb9ae],#topheader.minimized.fix.active .leftIcon[data-v-b9eeb9ae]{display:block}#topheader.minimized.fix[data-v-b9eeb9ae]:not(.active){border-bottom:0!important}#topheader .topheader.noicons .infoPart[data-v-b9eeb9ae]{padding-left:0;padding-right:0}#topheader .topheader.noicons .icon[data-v-b9eeb9ae],#topheader .topheader.noicons .iconsmall[data-v-b9eeb9ae]{display:none}#topheader .topheader.noiconsButWithL .infoPart[data-v-b9eeb9ae]{padding-left:0;padding-right:0}#topheader .topheader.noiconsButWithL .icon[data-v-b9eeb9ae],#topheader .topheader.noiconsButWithL .iconsmall[data-v-b9eeb9ae]{display:none}#topheader .topheader.noiconsButWithL .icon.leftIcon[data-v-b9eeb9ae],#topheader .topheader.noiconsButWithL .iconsmall.leftIcon[data-v-b9eeb9ae]{display:block}",""]),e.exports=t},c946:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalButtonKind=void 0;var n=function(e){return e["Primary"]="m.primary",e["Secondary"]="m.secondary",e["Warning"]="m.warning",e["Danger"]="m.danger",e["Link"]="m.link",e}({});t.ModalButtonKind=n},c973:function(e,t){function r(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},c9b8:function(e,t,r){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i={};function o(e,t,r){function o(e,r,n){return"string"===typeof t?t:t(e,r,n)}r||(r=Error);var a=function(e){function t(t,r,n){return e.call(this,o(t,r,n))||this}return n(t,e),t}(r);a.prototype.name=r.name,a.prototype.code=e,i[e]=a}function a(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function s(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function c(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function l(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i;if("string"===typeof t&&s(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",c(e," argument"))i="The ".concat(e," ").concat(n," ").concat(a(t,"type"));else{var o=l(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(a(t,"type"))}return i+=". Received type ".concat(typeof r),i}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},ca2c:function(e,t,r){"use strict";function n(e){if("error"in e){var t=e;return!!t.error.message}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorResponse=n},ca84:function(e,t,r){"use strict";var n=r("e330"),i=r("1a2d"),o=r("fc6a"),a=r("4d64").indexOf,s=r("d012"),c=n([].push);e.exports=function(e,t){var r,n=o(e),l=0,d=[];for(r in n)!i(s,r)&&i(n,r)&&c(d,r);while(t.length>l)i(n,r=t[l++])&&(~a(d,r)||c(d,r));return d}},cb2d:function(e,t,r){"use strict";var n=r("1626"),i=r("9bf2"),o=r("13d2"),a=r("6374");e.exports=function(e,t,r,s){s||(s={});var c=s.enumerable,l=void 0!==s.name?s.name:t;if(n(r)&&o(r,l,s),s.global)c?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(error){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},cb8d:function(e,t,r){"use strict";r.r(t);var n=r("5f4a");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},cc12:function(e,t,r){"use strict";var n=r("cfe9"),i=r("861d"),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},cc89:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return s}));var n,i=r("a74c");r("c009");(function(e){e["Self"]="m.self",e["Pin"]="m.pin"})(n||(n={}));var o=new i["c"]("m.asset","org.matrix.msc3488.asset"),a=new i["c"]("m.ts","org.matrix.msc3488.ts"),s=new i["c"]("m.location","org.matrix.msc3488.location")},cc9b:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMMessage=s;var n=r("d3d5"),i=r("6682"),o=r("305b"),a=r("31c4");function s(e){return i.M_EMOTE.matches(e.type)?new o.EmoteEvent(e):i.M_NOTICE.matches(e.type)?new a.NoticeEvent(e):new n.MessageEvent(e)}},ccdd:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.fadeTr-enter-active{-webkit-transition:opacity .3s ease-in;transition:opacity .3s ease-in;-webkit-transition-delay:.1s;transition-delay:.1s}.fadeTr-leave-active{-webkit-transition:opacity .1s ease-out;transition:opacity .1s ease-out}.fadeTr-enter,.fadeTr-leave-to{opacity:0}.slide-enter-active,.slide-leave-active{-webkit-transition:all 1s;transition:all 1s}.slide-enter,.slide-leave-to{opacity:0;-webkit-transform:translateX(30px);transform:translateX(30px)}.dg-backdrop-enter-active{-webkit-animation:dg-fadeIn .3s;animation:dg-fadeIn .3s}.dg-backdrop-leave-active{-webkit-animation:dg-fadeOut .5s;animation:dg-fadeOut .5s}.dg-fade-enter-active{-webkit-animation:dg-fadeIn .6s ease-out;animation:dg-fadeIn .6s ease-out}.dg-fade-leave-active{-webkit-animation:dg-fadeOut .6s ease-out;animation:dg-fadeOut .6s ease-out}@-webkit-keyframes dg-fadeIn{0%{opacity:0}to{opacity:1}}@keyframes dg-fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes dg-fadeOut{0%{opacity:1}to{opacity:0}}@keyframes dg-fadeOut{0%{opacity:1}to{opacity:0}}.dg-zoom-enter-active{-webkit-animation:dg-zoomIn .3s ease-out;animation:dg-zoomIn .3s ease-out}.dg-zoom-leave-active{-webkit-animation:dg-zoomOut .4s ease-out;animation:dg-zoomOut .4s ease-out}@-webkit-keyframes dg-zoomIn{0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes dg-zoomIn{0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}50%{opacity:1}}@-webkit-keyframes dg-zoomOut{0%{opacity:1}50%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}to{opacity:0}}@keyframes dg-zoomOut{0%{opacity:1}50%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}to{opacity:0}}.dg-bounce-enter-active{-webkit-animation:dg-bounceIn .6s;animation:dg-bounceIn .6s}.dg-bounce-leave-active{-webkit-animation:dg-zoomOut .6s;animation:dg-zoomOut .6s}@-webkit-keyframes dg-bounceIn{0%{opacity:0;-webkit-transform:scale(.3);transform:scale(.3)}40%{opacity:1;-webkit-transform:scale(1.06);transform:scale(1.06)}60%{-webkit-transform:scale(.92);transform:scale(.92)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes dg-bounceIn{0%{opacity:0;-webkit-transform:scale(.3);transform:scale(.3)}40%{opacity:1;-webkit-transform:scale(1.06);transform:scale(1.06)}60%{-webkit-transform:scale(.92);transform:scale(.92)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes dg-bounceOut{0%{-webkit-transform:scale(1);transform:scale(1)}25%{-webkit-transform:scale(.95);transform:scale(.95)}50%{opacity:1;-webkit-transform:scale(1.1);transform:scale(1.1)}to{opacity:0;-webkit-transform:scale(.3);transform:scale(.3)}}@keyframes dg-bounceOut{0%{-webkit-transform:scale(1);transform:scale(1)}25%{-webkit-transform:scale(.95);transform:scale(.95)}50%{opacity:1;-webkit-transform:scale(1.1);transform:scale(1.1)}to{opacity:0;-webkit-transform:scale(.3);transform:scale(.3)}}.dg-btn-loader{width:100%;height:100%;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;top:0;left:0}.dg-btn-loader .dg-circles{width:100%;display:block;text-align:center}.dg-btn-loader .dg-circle{width:.9em;height:.9em;opacity:0;background-color:#09a2e3;display:inline-block;border-radius:50%;-webkit-animation-name:dg-circle-oscillation;animation-name:dg-circle-oscillation;-webkit-animation-duration:.5875s;animation-duration:.5875s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-direction:normal;animation-direction:normal}.dg-btn-loader .dg-circle:not(:last-child){margin-right:8px}.dg-btn-loader .dg-circle:first-child{-webkit-animation-delay:.1195s;animation-delay:.1195s}.dg-btn-loader .dg-circle:nth-child(2){-webkit-animation-delay:.2755s;animation-delay:.2755s}.dg-btn-loader .dg-circle:nth-child(3){-webkit-animation-delay:.3485s;animation-delay:.3485s}@-webkit-keyframes dg-circle-oscillation{50%{opacity:1}}@keyframes dg-circle-oscillation{50%{opacity:1}}body.dg-open{width:100%;height:100%;overflow:hidden}.dg-container *{-webkit-box-sizing:border-box;box-sizing:border-box}.dg-container [disabled]{cursor:not-allowed;opacity:.3}.dg-backdrop{background-color:rgba(0,0,0,.8)}.dg-backdrop,.dg-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:5000}.dg-content-cont{width:100%;font-family:inherit}.dg-main-content{width:98%;max-width:400px;padding:15px;border-radius:5px;margin:25px auto;background-color:#fff}.dg-content{font-size:16px;line-height:1.3em}.dg-title{margin:0 0 10px 0;padding:0;font-size:18px}.dg-content-body{border-bottom:2px solid #e1e6ea;padding-bottom:15px}.dg-content-footer{position:relative;padding:15px 0 0}.dg-form{background-color:#f8f8ff;padding:10px;margin-bottom:-15px}.dg-content-cont--floating{position:absolute;top:35%;-webkit-transform:translateY(-70%);transform:translateY(-70%);margin-top:0}@media (max-height:700px){.dg-content-cont--floating{position:relative;top:10%;-webkit-transform:none;transform:none;margin-top:0}}.dg-btn{display:inline-block;position:relative;min-width:80px;padding:6px 20px;border-radius:4px;outline:0;border:2px solid transparent;text-align:center;text-decoration:none;cursor:pointer;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:16px;font-weight:700}.dg-btn:active,.dg-btn:focus,.dg-btn:link{outline:none}.dg-btn::-moz-focus-inner{border:0}.dg-btn--cancel{color:#fefefe;background-color:#0096d9}.dg-btn--ok{color:#0096d9;background-color:#fefefe;border-color:#0096d9}.dg-pull-right{float:right}.dg-btn.dg-btn--loading .dg-btn-content{visibility:hidden}.dg-clear:before{content:" ";display:block;clear:both}.dg-content-body--has-title .dg-content{font-size:14px}.dg-container--has-input .dg-main-content{max-width:450px}.dg-container--has-input .dg-content{margin-bottom:15px}.dg-container--has-input .dg-content-body{border-bottom:none}.dg-container--has-input .dg-form{border:1px solid #e1e6ea;border-bottom:none;border-top-left-radius:4px;border-top-right-radius:4px}.dg-container--has-input .dg-content-footer{background-color:#f8f8ff;border:1px solid #e1e6ea;border-top:none;border-bottom-left-radius:4px;border-bottom-right-radius:4px;padding:0 10px 10px}.dg-container .dg-highlight-1{color:#ff8c00;font-weight:700;border-bottom:1px solid #2ba5ff}.dg-container .dg-highlight-2{color:#2ba5ff;font-weight:700;border-bottom:1px solid #ff8c00}',""]),e.exports=t},ccff:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},cd3b:function(e,t,r){var n=r("143a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("30ec52c8",n,e)}},cda2:function(e,t,r){var n=r("115b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("00426d4b",n,e)}},cdce:function(e,t,r){"use strict";var n=r("cfe9"),i=r("1626"),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},cdd2:function(t,r,n){"use strict";n.d(r,"b",(function(){return i})),n.d(r,"a",(function(){return m}));var i,o=n("c973"),a=n.n(o),s=n("9523"),c=n.n(s),l=n("5b5f"),d=n("d5da"),u=n("60af"),h=n("afe6"),f=n("3838"),p=n("299a"),v=3e3;(function(e){e["Incoming"]="Call.incoming"})(i||(i={}));class m{constructor(e){c()(this,"calls",void 0),c()(this,"callEventBuffer",void 0),c()(this,"nextSeqByCall",new Map),c()(this,"toDeviceEventBuffers",new Map),c()(this,"client",void 0),c()(this,"candidateEventsByCall",void 0),c()(this,"eventBufferPromiseChain",void 0),c()(this,"onSync",()=>{var e=this.callEventBuffer;this.callEventBuffer=[],this.eventBufferPromiseChain?this.eventBufferPromiseChain=this.eventBufferPromiseChain.then(()=>this.evaluateEventBuffer(e)):this.eventBufferPromiseChain=this.evaluateEventBuffer(e)}),c()(this,"onRoomTimeline",e=>{this.callEventBuffer.push(e)}),c()(this,"onToDeviceEvent",e=>{var t=e.getContent();if(t.call_id)if(this.nextSeqByCall.has(t.call_id)||this.nextSeqByCall.set(t.call_id,0),void 0!==t.seq){var r=this.nextSeqByCall.get(t.call_id)||0;if(t.seq!==r){this.toDeviceEventBuffers.has(t.call_id)||this.toDeviceEventBuffers.set(t.call_id,[]);var n=this.toDeviceEventBuffers.get(t.call_id),i=n.findIndex(e=>e.getContent().seq>t.seq);-1===i?n.push(e):n.splice(i,0,e)}else{var o=t.call_id;this.callEventBuffer.push(e),this.nextSeqByCall.set(o,t.seq+1);var a=this.toDeviceEventBuffers.get(o),s=a&&a.shift();while(s&&s.getContent().seq===this.nextSeqByCall.get(o))this.callEventBuffer.push(s),this.nextSeqByCall.set(o,s.getContent().seq+1),s=a.shift()}}else this.callEventBuffer.push(e);else this.callEventBuffer.push(e)}),this.client=e,this.calls=new Map,this.callEventBuffer=[],this.candidateEventsByCall=new Map}start(){this.client.on(h["b"].Sync,this.onSync),this.client.on(p["d"].Timeline,this.onRoomTimeline),this.client.on(h["b"].ToDeviceEvent,this.onToDeviceEvent)}stop(){this.client.removeListener(h["b"].Sync,this.onSync),this.client.removeListener(p["d"].Timeline,this.onRoomTimeline),this.client.removeListener(h["b"].ToDeviceEvent,this.onToDeviceEvent)}evaluateEventBuffer(t){var r=this;return a()((function*(){yield Promise.all(t.map(e=>r.client.decryptEventIfNeeded(e)));var n=t.filter(e=>{var t=e.getType();return t.startsWith("m.call.")||t.startsWith("org.matrix.call.")}),i=new Set;for(var o of n){var a=o.getType();a!==u["b"].CallAnswer&&a!==u["b"].CallHangup||i.add(o.getContent().call_id)}for(var s of n){var c=s.getType(),d=s.getContent().call_id;if(c!==u["b"].CallInvite||!i.has(d))try{yield r.handleCallEvent(s)}catch(e){l["b"].error("CallEventHandler evaluateEventBuffer() caught exception handling call event",e)}}}))()}handleCallEvent(t){var r=this;return a()((function*(){var n,o;r.client.emit(h["b"].ReceivedVoipEvent,t);var a,s,c=t.getContent(),p=t.getRoomId()||(null===(n=r.client.groupCallEventHandler.getGroupCallById(c.conf_id))||void 0===n||null===(o=n.room)||void 0===o?void 0:o.roomId),m=c.conf_id,g=t.getType(),y=t.getSender(),b=c.call_id?r.calls.get(c.call_id):void 0;if(m){if(s=r.client.groupCallEventHandler.getGroupCallById(m),!s)return void l["b"].warn("CallEventHandler handleCallEvent() could not find a group call - ignoring event (groupCallId=".concat(m,", type=").concat(g,")"));if(a=c.device_id,!a)return l["b"].warn("CallEventHandler handleCallEvent() could not find a device id - ignoring event (senderId=".concat(y,")")),void s.emit(f["c"].Error,new f["h"](y));if(c.dest_session_id!==r.client.getSessionId())return void l["b"].warn("CallEventHandler handleCallEvent() call event does not match current session id - ignoring")}var _=y===r.client.credentials.userId&&(void 0===a||a===r.client.getDeviceId());if(p)if(g!==u["b"].CallInvite)if(g!==u["b"].CallCandidates){var w;if([u["b"].CallHangup,u["b"].CallReject].includes(g))b?b.state!==d["e"].Ended&&(g===u["b"].CallHangup?b.onHangupReceived(c):b.onRejectReceived(c),b.state===d["e"].Ended&&r.calls.delete(c.call_id)):(b=null!==(w=Object(d["f"])(r.client,p,{opponentDeviceId:a,opponentSessionId:c.sender_session_id}))&&void 0!==w?w:void 0,b&&(b.callId=c.call_id,b.initWithHangup(t),r.calls.set(c.call_id,b)));else if(b&&b.hasPeerConnection){if(t.getContent().party_id!==b.ourPartyId)switch(g){case u["b"].CallAnswer:_?b.state===d["e"].Ringing&&b.onAnsweredElsewhere(c):b.onAnswerReceived(t);break;case u["b"].CallSelectAnswer:b.onSelectAnswerReceived(t);break;case u["b"].CallNegotiate:b.onNegotiateReceived(t);break;case u["b"].CallAssertedIdentity:case u["b"].CallAssertedIdentityPrefix:b.onAssertedIdentityReceived(t);break;case u["b"].CallSDPStreamMetadataChanged:case u["b"].CallSDPStreamMetadataChangedPrefix:b.onSDPStreamMetadataChangedReceived(t);break}}else l["b"].info("CallEventHandler handleCallEvent() discarding possible call event as we don't have a call (type=".concat(g,")"))}else{if(_)return;b?b.onRemoteIceCandidatesReceived(t):(r.candidateEventsByCall.has(c.call_id)||r.candidateEventsByCall.set(c.call_id,[]),r.candidateEventsByCall.get(c.call_id).push(t))}else{var S,E,k;if(_)return;if(t.getLocalAge()>c.lifetime-v)return;if(b&&b.state===d["e"].Ended)return;if(b&&l["b"].warn("CallEventHandler handleCallEvent() already has a call but got an invite - clobbering (callId=".concat(c.call_id,")")),c.invitee&&c.invitee!==r.client.getUserId())return;var I=(null!==(S=r.client.getTurnServersExpiry())&&void 0!==S?S:0)-Date.now();if(l["b"].info("CallEventHandler handleCallEvent() current turn creds expire in "+I+" ms"),b=null!==(E=Object(d["f"])(r.client,p,{forceTURN:r.client.forceTURN,opponentDeviceId:a,groupCallId:m,opponentSessionId:c.sender_session_id}))&&void 0!==E?E:void 0,!b)return void l["b"].log("CallEventHandler handleCallEvent() this client does not support WebRTC (callId=".concat(c.call_id,")"));b.callId=c.call_id;var C,T=null===(k=s)||void 0===k?void 0:k.getGroupCallStats();T&&b.initStats(T);try{yield b.initWithInvite(t)}catch(e){var R;if(e instanceof d["b"])if(e.code===f["b"].UnknownDevice)null===(R=s)||void 0===R||R.emit(f["c"].Error,e);else l["b"].error(e)}if(r.calls.set(b.callId,b),r.candidateEventsByCall.get(b.callId))for(var x of r.candidateEventsByCall.get(b.callId))b.onRemoteIceCandidatesReceived(x);for(var O of r.calls.values()){var M,A=[d["e"].WaitLocalMedia,d["e"].CreateOffer,d["e"].InviteSent].includes(O.state);if(b.roomId===O.roomId&&O.direction===d["a"].Outbound&&(null===(M=b.getOpponentMember())||void 0===M?void 0:M.userId)===O.invitee&&A){C=O;break}}C?C.callId>b.callId?(l["b"].log("CallEventHandler handleCallEvent() detected glare - answering incoming call and canceling outgoing call (incomingId=".concat(b.callId,", outgoingId=").concat(C.callId,")")),C.replacedBy(b)):(l["b"].log("CallEventHandler handleCallEvent() detected glare - hanging up incoming call (incomingId=".concat(b.callId,", outgoingId=").concat(C.callId,")")),b.hangup(d["c"].Replaced,!0)):r.client.emit(i.Incoming,b)}}))()}}},cee4:function(e,t,r){"use strict";var n=r("c532"),i=r("1d2b"),o=r("0a06"),a=r("4a7b"),s=r("2444");function c(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var l=c(s);l.Axios=o,l.create=function(e){return c(a(l.defaults,e))},l.Cancel=r("7a77"),l.CancelToken=r("8df4"),l.isCancel=r("2e67"),l.all=function(e){return Promise.all(e)},l.spread=r("0df6"),l.isAxiosError=r("5f02"),e.exports=l,e.exports.default=l},cef5:function(e,t,r){var n=r("c339");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("25a2da5c",n,e)}},cf98:function(e,t,r){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},cfe9:function(e,t,r){"use strict";(function(t){var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this,r("c8ba"))},d009:function(e,t,r){"use strict";var n=r("00ce"),i=r("7992"),o=r("64b0")(),a=r("2aa9"),s=r("0d25"),c=n("%Math.floor%");e.exports=function(e,t){if("function"!==typeof e)throw new s("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||c(t)!==t)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,l=!0;if("length"in e&&a){var d=a(e,"length");d&&!d.configurable&&(n=!1),d&&!d.writable&&(l=!1)}return(n||l||!r)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},d012:function(e,t,r){"use strict";e.exports={}},d039:function(e,t,r){"use strict";e.exports=function(e){try{return!!e()}catch(error){return!0}}},d066:function(e,t,r){"use strict";var n=r("cfe9"),i=r("1626"),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e]):n[e]&&n[e][t]}},d164:function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},d190:function(e,t,r){"use strict";for(var n=/[\\\"\x00-\x1F]/g,i={},o=0;o<32;++o)i[String.fromCharCode(o)]="\\U"+("0000"+o.toString(16)).slice(-4).toUpperCase();function a(e){return n.lastIndex=0,e.replace(n,(function(e){return i[e]}))}function s(e){switch(typeof e){case"string":return'"'+a(e)+'"';case"number":return isFinite(e)?e:"null";case"boolean":return e;case"object":return null===e?"null":Array.isArray(e)?c(e):l(e);default:throw new Error("Cannot stringify: "+typeof e)}}function c(e){for(var t="[",r="",n=0;n<e.length;++n)r+=t,t=",",r+=s(e[n]);return","!=t?"[]":r+"]"}function l(e){var t="{",r="",n=Object.keys(e);n.sort();for(var i=0;i<n.length;++i){var o=n[i];r+=t+'"'+a(o)+'":',t=",",r+=s(e[o])}return","!=t?"{}":r+"}"}i["\b"]="\\b",i["\t"]="\\t",i["\n"]="\\n",i["\f"]="\\f",i["\r"]="\\r",i['"']='\\"',i["\\"]="\\\\",e.exports={stringify:s}},d1e7:function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},d233:function(t,r,n){"use strict";var i=n("b313"),o=Object.prototype.hasOwnProperty,a=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),c=function(e){while(e.length>1){var t=e.pop(),r=t.obj[t.prop];if(a(r)){for(var n=[],i=0;i<r.length;++i)"undefined"!==typeof r[i]&&n.push(r[i]);t.obj[t.prop]=n}}},l=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(r[n]=e[n]);return r},d=function e(t,r,n){if(!r)return t;if("object"!==typeof r){if(a(t))t.push(r);else{if(!t||"object"!==typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(r);var i=t;return a(t)&&!a(r)&&(i=l(t,n)),a(t)&&a(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"===typeof a&&r&&"object"===typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),i)},u=function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},h=function(t,r,n){var i=t.replace(/\+/g," ");if("iso-8859-1"===n)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(e){return i}},f=1024,p=function(e,t,r,n,o){if(0===e.length)return e;var a=e;if("symbol"===typeof e?a=Symbol.prototype.toString.call(e):"string"!==typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<a.length;l+=f){for(var d=a.length>=f?a.slice(l,l+f):a,u=[],h=0;h<d.length;++h){var p=d.charCodeAt(h);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===i.RFC1738&&(40===p||41===p)?u[u.length]=d.charAt(h):p<128?u[u.length]=s[p]:p<2048?u[u.length]=s[192|p>>6]+s[128|63&p]:p<55296||p>=57344?u[u.length]=s[224|p>>12]+s[128|p>>6&63]+s[128|63&p]:(h+=1,p=65536+((1023&p)<<10|1023&d.charCodeAt(h)),u[u.length]=s[240|p>>18]+s[128|p>>12&63]+s[128|p>>6&63]+s[128|63&p])}c+=u.join("")}return c},v=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var l=a[s],d=o[l];"object"===typeof d&&null!==d&&-1===r.indexOf(d)&&(t.push({obj:o,prop:l}),r.push(d))}return c(t),e},m=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},g=function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},y=function(e,t){return[].concat(e,t)},b=function(e,t){if(a(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)};t.exports={arrayToObject:l,assign:u,combine:y,compact:v,decode:h,encode:p,isBuffer:g,isRegExp:m,maybeMap:b,merge:d}},d2bb:function(e,t,r){"use strict";var n=r("7282"),i=r("861d"),o=r("1d80"),a=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=n(Object.prototype,"__proto__","set"),e(r,[]),t=r instanceof Array}catch(error){}return function(r,n){return o(r),a(n),i(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},d2bd:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("5b5f"),c=r("b83f"),l=r("ac24");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return encodeURIComponent(e)+"/"+encodeURIComponent(t)}function f(e){var t=e.split("/"),r=decodeURIComponent(t[0]),n=decodeURIComponent(t[1]);return{senderKey:r,sessionId:n}}class p{constructor(){a()(this,"migrationState",l["b"].NOT_STARTED),a()(this,"outgoingRoomKeyRequests",[]),a()(this,"account",null),a()(this,"crossSigningKeys",null),a()(this,"privateKeys",{}),a()(this,"sessions",{}),a()(this,"sessionProblems",{}),a()(this,"notifiedErrorDevices",{}),a()(this,"inboundGroupSessions",{}),a()(this,"inboundGroupSessionsWithheld",{}),a()(this,"deviceData",null),a()(this,"rooms",{}),a()(this,"sessionsNeedingBackup",{}),a()(this,"sharedHistoryInboundGroupSessions",{}),a()(this,"parkedSharedHistory",new Map)}containsData(){var e=this;return i()((function*(){return null!==e.account}))()}startup(){var e=this;return i()((function*(){return e}))()}deleteAllData(){return Promise.resolve()}getMigrationState(){var e=this;return i()((function*(){return e.migrationState}))()}setMigrationState(e){var t=this;return i()((function*(){t.migrationState=e}))()}getOrAddOutgoingRoomKeyRequest(e){var t=e.requestBody;return Object(c["B"])(()=>{var r=this._getOutgoingRoomKeyRequest(t);return r?(s["b"].log("already have key request outstanding for "+"".concat(t.room_id," / ").concat(t.session_id,": ")+"not sending another"),r):(s["b"].log("enqueueing key request for ".concat(t.room_id," / ")+t.session_id),this.outgoingRoomKeyRequests.push(e),e)})}getOutgoingRoomKeyRequest(e){return Promise.resolve(this._getOutgoingRoomKeyRequest(e))}_getOutgoingRoomKeyRequest(e){for(var t of this.outgoingRoomKeyRequests)if(Object(c["f"])(t.requestBody,e))return t;return null}getOutgoingRoomKeyRequestByState(e){for(var t of this.outgoingRoomKeyRequests)for(var r of e)if(t.state===r)return Promise.resolve(t);return Promise.resolve(null)}getAllOutgoingRoomKeyRequestsByState(e){return Promise.resolve(this.outgoingRoomKeyRequests.filter(t=>t.state==e))}getOutgoingRoomKeyRequestsByTarget(e,t,r){var n=[];for(var i of this.outgoingRoomKeyRequests)for(var o of r)i.state===o&&i.recipients.some(r=>r.userId===e&&r.deviceId===t)&&n.push(i);return Promise.resolve(n)}updateOutgoingRoomKeyRequest(e,t,r){for(var n of this.outgoingRoomKeyRequests)if(n.requestId===e)return n.state!==t?(s["b"].warn("Cannot update room key request from ".concat(t," ")+"as it was already updated to ".concat(n.state)),Promise.resolve(null)):(Object.assign(n,r),Promise.resolve(n));return Promise.resolve(null)}deleteOutgoingRoomKeyRequest(e,t){for(var r=0;r<this.outgoingRoomKeyRequests.length;r++){var n=this.outgoingRoomKeyRequests[r];if(n.requestId===e)return n.state!=t?(s["b"].warn("Cannot delete room key request in state ".concat(n.state," ")+"(expected ".concat(t,")")),Promise.resolve(null)):(this.outgoingRoomKeyRequests.splice(r,1),Promise.resolve(n))}return Promise.resolve(null)}getAccount(e,t){t(this.account)}storeAccount(e,t){this.account=t}getCrossSigningKeys(e,t){t(this.crossSigningKeys)}getSecretStorePrivateKey(e,t,r){var n=this.privateKeys[r];t(n||null)}storeCrossSigningKeys(e,t){this.crossSigningKeys=t}storeSecretStorePrivateKey(e,t,r){this.privateKeys[t]=r}countEndToEndSessions(e,t){var r=0;for(var n of Object.values(this.sessions))r+=Object.keys(n).length;t(r)}getEndToEndSession(e,t,r,n){var i=this.sessions[e]||{};n(i[t]||null)}getEndToEndSessions(e,t,r){r(this.sessions[e]||{})}getAllEndToEndSessions(e,t){Object.entries(this.sessions).forEach(e=>{var[r,n]=e;Object.entries(n).forEach(e=>{var[n,i]=e;t(u(u({},i),{},{deviceKey:r,sessionId:n}))})})}storeEndToEndSession(e,t,r,n){var i=this.sessions[e];void 0===i&&(i={},this.sessions[e]=i),Object(c["I"])(i,t,r)}storeEndToEndSessionProblem(e,t,r){var n=this;return i()((function*(){var i=n.sessionProblems[e]=n.sessionProblems[e]||[];i.push({type:t,fixed:r,time:Date.now()}),i.sort((e,t)=>e.time-t.time)}))()}getEndToEndSessionProblem(e,t){var r=this;return i()((function*(){var n=r.sessionProblems[e]||[];if(!n.length)return null;var i=n[n.length-1];for(var o of n)if(o.time>t)return Object.assign({},o,{fixed:i.fixed});return i.fixed?null:i}))()}filterOutNotifiedErrorDevices(e){var t=this;return i()((function*(){var r=t.notifiedErrorDevices,n=[];for(var i of e){var{userId:o,deviceInfo:a}=i;o in r?a.deviceId in r[o]||(n.push(i),Object(c["I"])(r[o],a.deviceId,!0)):(n.push(i),Object(c["I"])(r,o,{[a.deviceId]:!0}))}return n}))()}getEndToEndSessionsBatch(){var e=this;return i()((function*(){var t=[];for(var r of Object.values(e.sessions))for(var n of Object.values(r))if(t.push(n),t.length>=l["c"])return t;return 0===t.length?null:t}))()}deleteEndToEndSessionsBatch(e){var t=this;return i()((function*(){for(var{deviceKey:r,sessionId:n}of e){var i=t.sessions[r]||{};delete i[n],0===Object.keys(i).length&&delete t.sessions[r]}}))()}getEndToEndInboundGroupSession(e,t,r,n){var i=h(e,t);n(this.inboundGroupSessions[i]||null,this.inboundGroupSessionsWithheld[i]||null)}getAllEndToEndInboundGroupSessions(e,t){for(var r of Object.keys(this.inboundGroupSessions))t(u(u({},f(r)),{},{sessionData:this.inboundGroupSessions[r]}));t(null)}addEndToEndInboundGroupSession(e,t,r,n){var i=h(e,t);void 0===this.inboundGroupSessions[i]&&(this.inboundGroupSessions[i]=r)}storeEndToEndInboundGroupSession(e,t,r,n){var i=h(e,t);this.inboundGroupSessions[i]=r}storeEndToEndInboundGroupSessionWithheld(e,t,r,n){var i=h(e,t);this.inboundGroupSessionsWithheld[i]=r}countEndToEndInboundGroupSessions(){var e=this;return i()((function*(){return Object.keys(e.inboundGroupSessions).length}))()}getEndToEndInboundGroupSessionsBatch(){var e=this;return i()((function*(){var t=[];for(var[r,n]of Object.entries(e.inboundGroupSessions))if(t.push(u(u({},f(r)),{},{sessionData:n,needsBackup:r in e.sessionsNeedingBackup})),t.length>=l["c"])return t;return 0===t.length?null:t}))()}deleteEndToEndInboundGroupSessionsBatch(e){var t=this;return i()((function*(){for(var{senderKey:r,sessionId:n}of e){var i=h(r,n);delete t.inboundGroupSessions[i]}}))()}getEndToEndDeviceData(e,t){t(this.deviceData)}storeEndToEndDeviceData(e,t){this.deviceData=e}storeEndToEndRoom(e,t,r){this.rooms[e]=t}getEndToEndRooms(e,t){t(this.rooms)}getSessionsNeedingBackup(e){var t=[];for(var r in this.sessionsNeedingBackup)if(this.inboundGroupSessions[r]&&(t.push(u(u({},f(r)),{},{sessionData:this.inboundGroupSessions[r]})),e&&r.length>=e))break;return Promise.resolve(t)}countSessionsNeedingBackup(){return Promise.resolve(Object.keys(this.sessionsNeedingBackup).length)}unmarkSessionsNeedingBackup(e){for(var t of e){var r=h(t.senderKey,t.sessionId);delete this.sessionsNeedingBackup[r]}return Promise.resolve()}markSessionsNeedingBackup(e){for(var t of e){var r=h(t.senderKey,t.sessionId);this.sessionsNeedingBackup[r]=!0}return Promise.resolve()}addSharedHistoryInboundGroupSession(e,t,r){var n=this.sharedHistoryInboundGroupSessions[e]||[];n.push([t,r]),this.sharedHistoryInboundGroupSessions[e]=n}getSharedHistoryInboundGroupSessions(e){return Promise.resolve(this.sharedHistoryInboundGroupSessions[e]||[])}addParkedSharedHistory(e,t){var r,n=null!==(r=this.parkedSharedHistory.get(e))&&void 0!==r?r:[];n.push(t),this.parkedSharedHistory.set(e,n)}takeParkedSharedHistory(e){var t,r=null!==(t=this.parkedSharedHistory.get(e))&&void 0!==t?t:[];return this.parkedSharedHistory.delete(e),Promise.resolve(r)}doTxn(e,t,r){return Promise.resolve(r(null))}}},d308:function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=d();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.UnstableValue=r.NamespacedValue=void 0;var v=function(){function e(t,r){if(h(this,e),this.stable=t,this.unstable=r,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}return p(e,[{key:"name",get:function(){return this.stable?this.stable:this.unstable}},{key:"altName",get:function(){return this.stable?this.unstable:null}},{key:"matches",value:function(e){return!!this.name&&this.name===e||!!this.altName&&this.altName===e}},{key:"findIn",value:function(e){var t;return this.name&&(t=null===e||void 0===e?void 0:e[this.name]),!t&&this.altName&&(t=null===e||void 0===e?void 0:e[this.altName]),t}},{key:"includedIn",value:function(e){var t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}]),e}();r.NamespacedValue=v;var m=function(e){o(r,e);var t=s(r);function r(e,n){var i;if(h(this,r),i=t.call(this,e,n),!i.unstable)throw new Error("Unstable value must be supplied");return i}return p(r,[{key:"name",get:function(){return this.unstable}},{key:"altName",get:function(){return this.stable}}]),r}(v);r.UnstableValue=m},d35c:function(e,t,r){"use strict";var n=r("8b5c"),i=r("a593"),o=r("aa4a"),a=r("0176");function s(e){this.defaults=e,this.interceptors={request:new o,response:new o}}s.prototype.request=function(e){"string"===typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(n,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[a,void 0],r=Promise.resolve(e);this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));while(t.length)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){s.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}})),e.exports=s},d369:function(e,t,r){var n=r("4574");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("1b48ad41",n,e)}},d3af:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".fade-enter-active[data-v-a8099538],.fade-leave-active[data-v-a8099538]{transition-duration:.3s;transition-property:opacity;transition-timing-function:ease}.fade-enter[data-v-a8099538],.fade-leave-active[data-v-a8099538]{opacity:0}@keyframes fadeInDown-a8099538{0%{transform:translate3d(0,-40px,0)}to{transform:translateZ(0);opacity:1}}.fade-in-down-leave-to[data-v-a8099538]{opacity:0;transition:opacity .3s}.fade-in-down-enter[data-v-a8099538]{opacity:0;transform:translate3d(0,-40px,0)}.fade-in-down-enter-to[data-v-a8099538]{opacity:0;animation-duration:.7s;animation-fill-mode:both;animation-name:fadeInDown-a8099538}@keyframes fadeInRight-a8099538{0%{transform:translate3d(40px,0,0)}to{transform:translateZ(0);opacity:1}}.fade-in-right-leave-to[data-v-a8099538]{opacity:0;transition:opacity .1s}.fade-in-right-enter[data-v-a8099538]{opacity:0;transform:translate3d(40px,0,0)}.fade-in-right-enter-to[data-v-a8099538]{opacity:0;animation-duration:.2s;animation-fill-mode:both;animation-name:fadeInRight-a8099538}@keyframes fadeInUp-a8099538{0%{transform:translate3d(0,40px,0)}to{transform:translateZ(0);opacity:1}}.fade-in-up-leave-to[data-v-a8099538]{opacity:0;transition:opacity .3s}.fade-in-up-enter[data-v-a8099538]{opacity:0;transform:translate3d(0,40px,0)}.fade-in-up-enter-to[data-v-a8099538]{opacity:0;animation-duration:.7s;animation-fill-mode:both;animation-name:fadeInUp-a8099538}@keyframes fadeInLeft-a8099538{0%{transform:translate3d(-40px,0,0)}to{transform:translateZ(0);opacity:1}}.fade-in-left-leave-to[data-v-a8099538]{opacity:0;transition:opacity .3s}.fade-in-left-enter[data-v-a8099538]{opacity:0;transform:translate3d(-40px,0,0)}.fade-in-left-enter-to[data-v-a8099538]{opacity:0;animation-duration:.7s;animation-fill-mode:both;animation-name:fadeInLeft-a8099538}.zoom-enter-active[data-v-a8099538],.zoom-leave-active[data-v-a8099538]{transition-duration:.3s;transition-property:all;transition-timing-function:ease}.zoom-enter[data-v-a8099538],.zoom-leave-to[data-v-a8099538]{opacity:0;transform:scale(0)}.flip-x-enter-active[data-v-a8099538],.flip-x-leave-active[data-v-a8099538]{transition-duration:.3s;transition-property:all;transition-timing-function:ease}.flip-x-enter[data-v-a8099538],.flip-x-leave-to[data-v-a8099538]{transform:rotateX(-180deg);opacity:0}.flip-y-enter-active[data-v-a8099538],.flip-y-leave-active[data-v-a8099538]{transition-duration:.3s;transition-property:all;transition-timing-function:ease}.flip-y-enter[data-v-a8099538],.flip-y-leave-to[data-v-a8099538]{transform:rotateY(-180deg);opacity:0}.overlay-right[data-v-a8099538]{position:fixed;top:0;left:0;height:100vh;width:0;background:var(--overlay-bg);transition-duration:var(--transition-duration)}.overlay-right-enter~.overlay-right[data-v-a8099538],.overlay-right-leave-to~.overlay-right[data-v-a8099538]{width:0}.overlay-right-enter-active~.overlay-right[data-v-a8099538],.overlay-right-leave-active~.overlay-right[data-v-a8099538]{width:100vw}.overlay-right-enter-active~.overlay-right[data-v-a8099538]{transition-timing-function:ease-in}.overlay-right-leave-active~.overlay-right[data-v-a8099538]{transition-timing-function:ease-out}.overlay-right-enter-active[data-v-a8099538],.overlay-right-leave-active[data-v-a8099538],.overlay-top[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-top[data-v-a8099538]{position:fixed;top:0;left:0;height:0;width:100vw;background:var(--overlay-bg)}.overlay-down-enter~.overlay-top[data-v-a8099538],.overlay-down-leave-to~.overlay-top[data-v-a8099538]{height:0}.overlay-down-enter-active~.overlay-top[data-v-a8099538],.overlay-down-leave-active~.overlay-top[data-v-a8099538]{height:100vh}.overlay-down-enter-active~.overlay-top[data-v-a8099538]{transition-timing-function:ease-in}.overlay-down-leave-active~.overlay-top[data-v-a8099538]{transition-timing-function:ease-out}.overlay-bottom[data-v-a8099538],.overlay-down-enter-active[data-v-a8099538],.overlay-down-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-bottom[data-v-a8099538]{position:fixed;bottom:0;left:0;height:0;width:100vw;background:var(--overlay-bg)}.overlay-up-enter~.overlay-bottom[data-v-a8099538],.overlay-up-leave-to~.overlay-bottom[data-v-a8099538]{height:0}.overlay-up-enter-active~.overlay-bottom[data-v-a8099538],.overlay-up-leave-active~.overlay-bottom[data-v-a8099538]{height:100vh}.overlay-up-enter-active~.overlay-bottom[data-v-a8099538]{transition-timing-function:ease-in}.overlay-up-leave-active~.overlay-bottom[data-v-a8099538]{transition-timing-function:ease-out}.overlay-up-enter-active[data-v-a8099538],.overlay-up-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-left[data-v-a8099538]{position:fixed;top:0;right:0;height:100vh;width:0;background:var(--overlay-bg);transition-duration:.35s}.overlay-left-enter~.overlay-left[data-v-a8099538],.overlay-left-leave-to~.overlay-left[data-v-a8099538]{width:0}.overlay-left-enter-active~.overlay-left[data-v-a8099538],.overlay-left-leave-active~.overlay-left[data-v-a8099538]{width:100vw}.overlay-left-enter-active~.overlay-left[data-v-a8099538]{transition-timing-function:ease-in}.overlay-left-leave-active~.overlay-left[data-v-a8099538]{transition-timing-function:ease-out}.overlay-left-enter-active[data-v-a8099538],.overlay-left-leave-active[data-v-a8099538]{transition-duration:.35s}.overlay-up-full-enter-active~.overlay-bottom[data-v-a8099538],.overlay-up-full-enter~.overlay-bottom[data-v-a8099538],.overlay-up-full-leave-active~.overlay-bottom[data-v-a8099538]{height:100vh}.overlay-up-full-enter-active~.overlay-bottom[data-v-a8099538]{transition-timing-function:ease-in}.overlay-up-full-enter-active~.overlay-bottom[data-v-a8099538],.overlay-up-full-enter-to~.overlay-bottom[data-v-a8099538]{display:none}.overlay-up-full-enter-to~.overlay-top[data-v-a8099538]{height:0}.overlay-up-full-leave-active~.overlay-top[data-v-a8099538]{transition-timing-function:ease}.overlay-up-full-enter-active~.overlay-top[data-v-a8099538],.overlay-up-full-enter-to~.overlay-top[data-v-a8099538],.overlay-up-full-enter~.overlay-top[data-v-a8099538]{transition-duration:unset!important;height:100vh}.overlay-up-full-enter-active[data-v-a8099538],.overlay-up-full-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-right-full-enter-active~.overlay-left[data-v-a8099538],.overlay-right-full-enter~.overlay-left[data-v-a8099538],.overlay-right-full-leave-active~.overlay-left[data-v-a8099538]{width:100vw}.overlay-right-full-enter-active~.overlay-left[data-v-a8099538]{transition-timing-function:ease-in}.overlay-right-full-enter-active~.overlay-left[data-v-a8099538],.overlay-right-full-enter-to~.overlay-left[data-v-a8099538]{display:none}.overlay-right-full-enter-to~.overlay-right[data-v-a8099538]{width:0}.overlay-right-full-leave-active~.overlay-right[data-v-a8099538]{transition-timing-function:ease}.overlay-right-full-enter-active~.overlay-right[data-v-a8099538],.overlay-right-full-enter-to~.overlay-right[data-v-a8099538],.overlay-right-full-enter~.overlay-right[data-v-a8099538]{transition-duration:unset!important;width:100vw}.overlay-right-full-enter-active[data-v-a8099538],.overlay-right-full-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-down-full-enter~.overlay-top[data-v-a8099538]{height:100vh}.overlay-down-full-enter-to~.overlay-bottom[data-v-a8099538]{height:0}.overlay-down-full-enter-active~.overlay-top[data-v-a8099538],.overlay-down-full-leave-active~.overlay-top[data-v-a8099538]{height:100vh}.overlay-down-full-enter-active~.overlay-top[data-v-a8099538]{transition-timing-function:ease-in}.overlay-down-full-leave-active~.overlay-bottom[data-v-a8099538]{transition-timing-function:ease}.overlay-down-full-enter-active[data-v-a8099538],.overlay-down-full-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-down-full-enter-active~.overlay-top[data-v-a8099538],.overlay-down-full-enter-to~.overlay-top[data-v-a8099538]{display:none}.overlay-down-full-enter-active~.overlay-bottom[data-v-a8099538],.overlay-down-full-enter-to~.overlay-bottom[data-v-a8099538],.overlay-down-full-enter~.overlay-bottom[data-v-a8099538]{transition-duration:unset!important;height:100vh}.overlay-left-full-enter-active~.overlay-right[data-v-a8099538],.overlay-left-full-enter~.overlay-right[data-v-a8099538],.overlay-left-full-leave-active~.overlay-right[data-v-a8099538]{width:100vw}.overlay-left-full-enter-active~.overlay-right[data-v-a8099538]{transition-timing-function:ease-in}.overlay-left-full-enter-active~.overlay-right[data-v-a8099538],.overlay-left-full-enter-to~.overlay-right[data-v-a8099538]{display:none}.overlay-left-full-enter-to~.overlay-left[data-v-a8099538]{width:0}.overlay-left-full-leave-active~.overlay-left[data-v-a8099538]{transition-timing-function:ease}.overlay-left-full-enter-active~.overlay-left[data-v-a8099538],.overlay-left-full-enter-to~.overlay-left[data-v-a8099538],.overlay-left-full-enter~.overlay-left[data-v-a8099538]{transition-duration:unset!important;width:100vw}.overlay-left-full-enter-active[data-v-a8099538],.overlay-left-full-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-up-down-enter~.overlay-bottom[data-v-a8099538],.overlay-up-down-enter~.overlay-top[data-v-a8099538]{height:0}.overlay-up-down-leave-active~.overlay-bottom[data-v-a8099538],.overlay-up-down-leave-to~.overlay-bottom[data-v-a8099538],.overlay-up-down-leave-to~.overlay-top[data-v-a8099538]{height:51vh}.overlay-up-down-enter-active~.overlay-bottom[data-v-a8099538],.overlay-up-down-enter-active~.overlay-top[data-v-a8099538],.overlay-up-down-leave-active~.overlay-bottom[data-v-a8099538],.overlay-up-down-leave-active~.overlay-top[data-v-a8099538]{transition-timing-function:ease}.overlay-up-down-enter-active[data-v-a8099538],.overlay-up-down-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}.overlay-left-right-enter~.overlay-left[data-v-a8099538],.overlay-left-right-enter~.overlay-right[data-v-a8099538]{width:0}.overlay-left-right-leave-active~.overlay-left[data-v-a8099538],.overlay-left-right-leave-to~.overlay-left[data-v-a8099538],.overlay-left-right-leave-to~.overlay-right[data-v-a8099538]{width:51vw}.overlay-left-right-enter-active~.overlay-left[data-v-a8099538],.overlay-left-right-enter-active~.overlay-right[data-v-a8099538],.overlay-left-right-leave-active~.overlay-left[data-v-a8099538],.overlay-left-right-leave-active~.overlay-right[data-v-a8099538]{transition-timing-function:ease}.overlay-left-right-enter-active[data-v-a8099538],.overlay-left-right-leave-active[data-v-a8099538]{transition-duration:var(--transition-duration)}",""]),e.exports=t},d3d5:function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.MessageEvent=void 0;var o=n("9e84"),a=n("18e8"),s=n("2c89"),c=n("6682"),l=n("4a30");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){var t=_();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){v(r,e);var t=g(r);function r(e){var n;h(this,r),n=t.call(this,e),S(b(n),"text",void 0),S(b(n),"html",void 0),S(b(n),"renderings",void 0);var i=c.M_MESSAGE.findIn(n.wireContent),o=c.M_TEXT.findIn(n.wireContent),l=c.M_HTML.findIn(n.wireContent);if((0,a.isProvided)(i)){if(!Array.isArray(i))throw new s.InvalidEventError("m.message contents must be an array");var d=i.find((function(e){return!(0,a.isProvided)(e.mimetype)||"text/plain"===e.mimetype})),u=i.find((function(e){return"text/html"===e.mimetype}));if(!d)throw new s.InvalidEventError("m.message is missing a plain text representation");n.text=d.body,n.html=null===u||void 0===u?void 0:u.body,n.renderings=i}else{if(!(0,a.isOptionalAString)(o))throw new s.InvalidEventError("Missing textual representation for event");n.text=o,n.html=l,n.renderings=[{body:o,mimetype:"text/plain"}],n.html&&n.renderings.push({body:n.html,mimetype:"text/html"})}return n}return p(r,[{key:"isEmote",get:function(){return c.M_EMOTE.matches(this.wireFormat.type)||(0,a.isProvided)(c.M_EMOTE.findIn(this.wireFormat.content))}},{key:"isNotice",get:function(){return c.M_NOTICE.matches(this.wireFormat.type)||(0,a.isProvided)(c.M_NOTICE.findIn(this.wireFormat.content))}},{key:"isEquivalentTo",value:function(e){return(0,l.isEventTypeSame)(e,c.M_MESSAGE)}},{key:"serializeMMessageOnly",value:function(){var e=S({},c.M_MESSAGE.name,this.renderings);if(1===this.renderings.length){var t=this.renderings[0].mimetype;void 0!==t&&"text/plain"!==t||(e=S({},c.M_TEXT.name,this.renderings[0].body))}return e}},{key:"serialize",value:function(){var e;return{type:"m.room.message",content:u(u({},this.serializeMMessageOnly()),{},{body:this.text,msgtype:"m.text",format:this.html?"org.matrix.custom.html":void 0,formatted_body:null!==(e=this.html)&&void 0!==e?e:void 0})}}}],[{key:"from",value:function(e,t){var n;return new r({type:c.M_MESSAGE.name,content:(n={},S(n,c.M_TEXT.name,e),S(n,c.M_HTML.name,t),n)})}}]),r}(o.ExtensibleEvent);r.MessageEvent=E},d41d:function(t,r,n){"use strict";n.d(r,"a",(function(){return i})),n.d(r,"c",(function(){return p})),n.d(r,"b",(function(){return v}));var i,o=n("c973"),a=n.n(o),s=n("9523"),c=n.n(s),l=n("5b5f"),d=n("b83f"),u=n("9c88"),h="m.login.email.identity",f="m.login.msisdn";(function(e){e["Password"]="m.login.password",e["Recaptcha"]="m.login.recaptcha",e["Terms"]="m.login.terms",e["Email"]="m.login.email.identity",e["Msisdn"]="m.login.msisdn",e["Sso"]="m.login.sso",e["SsoUnstable"]="org.matrix.login.sso",e["Dummy"]="m.login.dummy",e["RegistrationToken"]="m.login.registration_token",e["UnstableRegistrationToken"]="org.matrix.msc3231.login.registration_token"})(i||(i={}));class p extends Error{constructor(e,t,r){super(e),this.required_stages=t,this.flows=r,c()(this,"name","NoAuthFlowFoundError")}}class v{constructor(e){var t=this;c()(this,"matrixClient",void 0),c()(this,"inputs",void 0),c()(this,"clientSecret",void 0),c()(this,"requestCallback",void 0),c()(this,"busyChangedCallback",void 0),c()(this,"stateUpdatedCallback",void 0),c()(this,"requestEmailTokenCallback",void 0),c()(this,"supportedStages",void 0),c()(this,"data",void 0),c()(this,"emailSid",void 0),c()(this,"requestingEmailToken",!1),c()(this,"attemptAuthDeferred",null),c()(this,"chosenFlow",null),c()(this,"currentStage",null),c()(this,"emailAttempt",1),c()(this,"submitPromise",null),c()(this,"requestEmailToken",a()((function*(){if(t.requestingEmailToken)l["b"].warn("Could not request email token: Already requesting");else{l["b"].trace("Requesting email token. Attempt: "+t.emailAttempt),t.requestingEmailToken=!0;try{var e=yield t.requestEmailTokenCallback(t.inputs.emailAddress,t.clientSecret,t.emailAttempt++,t.data.session);t.emailSid=e.sid,l["b"].trace("Email token request succeeded")}finally{t.requestingEmailToken=!1}}}))),this.matrixClient=e.matrixClient,this.data=e.authData||{flows:[]},this.requestCallback=e.doRequest,this.busyChangedCallback=e.busyChanged,this.stateUpdatedCallback=e.stateUpdated||e.startAuthStage,this.requestEmailTokenCallback=e.requestEmailToken,this.inputs=e.inputs||{},e.sessionId&&(this.data.session=e.sessionId),this.clientSecret=e.clientSecret||this.matrixClient.generateClientSecret(),this.emailSid=e.emailSid,void 0!==e.supportedStages&&(this.supportedStages=new Set(e.supportedStages))}attemptAuth(){var e=this;return a()((function*(){var t,r;e.attemptAuthDeferred=Object(d["i"])();var n=e.attemptAuthDeferred.promise;if(null!==(t=e.data)&&void 0!==t&&null!==(r=t.flows)&&void 0!==r&&r.length)e.startNextAuthStage();else{var i;null===(i=e.busyChangedCallback)||void 0===i||i.call(e,!0);var o=e.data.session?{session:e.data.session}:null;e.doRequest(o).finally(()=>{var t;null===(t=e.busyChangedCallback)||void 0===t||t.call(e,!1)})}return n}))()}poll(){var e=this;return a()((function*(){if(e.data.session&&e.attemptAuthDeferred&&!e.submitPromise){var t={};if(e.currentStage==h&&e.emailSid){var r={sid:e.emailSid,client_secret:e.clientSecret},n=e.matrixClient.getIdentityServerUrl();n&&(r.id_server=new URL(n).host),t={type:h,threepid_creds:r}}e.submitAuthDict(t,!0)}}))()}getSessionId(){var e;return null===(e=this.data)||void 0===e?void 0:e.session}getClientSecret(){return this.clientSecret}getStageParams(e){var t,r;return null===(t=this.data)||void 0===t||null===(r=t.params)||void 0===r?void 0:r[e]}getChosenFlow(){return this.chosenFlow}submitAuthDict(t){var r=arguments,n=this;return a()((function*(){var i,o,a,s=r.length>1&&void 0!==r[1]&&r[1];if(!n.attemptAuthDeferred)throw new Error("submitAuthDict() called before attemptAuth()");s||(null===(o=n.busyChangedCallback)||void 0===o||o.call(n,!0));while(n.submitPromise)try{yield n.submitPromise}catch(e){}null!==(i=n.data)&&void 0!==i&&i.session?(a={session:n.data.session},Object.assign(a,t)):a=t;try{n.submitPromise=n.doRequest(a,s),yield n.submitPromise}finally{var c;if(n.submitPromise=null,!s)null===(c=n.busyChangedCallback)||void 0===c||c.call(n,!1)}}))()}getEmailSid(){return this.emailSid}setEmailSid(e){this.emailSid=e}doRequest(t){var r=arguments,n=this;return a()((function*(){var o=r.length>1&&void 0!==r[1]&&r[1];try{var a=yield n.requestCallback(t,o);n.attemptAuthDeferred.resolve(a),n.attemptAuthDeferred=null}catch(error){var s,c,d,h,f,p=error instanceof u["f"]?error:null,v=null!==(s=null===p||void 0===p||null===(c=p.data)||void 0===c?void 0:c.flows)&&void 0!==s?s:null,m=(null===(d=n.data)||void 0===d?void 0:d.flows)||Boolean(v);if(!p||401!==p.httpStatus||!p.data||!m)if(o)l["b"].log("Background poll request failed doing UI auth: ignoring",error);else null===(f=n.attemptAuthDeferred)||void 0===f||f.reject(error);p&&!p.data&&(p.data={}),!p||p.data.flows||p.data.completed||p.data.session||(p.data.flows=n.data.flows,p.data.completed=n.data.completed,p.data.session=n.data.session),p&&(n.data=p.data);try{n.startNextAuthStage()}catch(e){return n.attemptAuthDeferred.reject(e),void(n.attemptAuthDeferred=null)}if(!n.emailSid&&null!==(h=n.chosenFlow)&&void 0!==h&&h.stages.includes(i.Email))try{yield n.requestEmailToken()}catch(e){n.attemptAuthDeferred.reject(e),n.attemptAuthDeferred=null}}}))()}startNextAuthStage(){var e,t,r,n,o=this.chooseStage();if(!o)throw new Error("No incomplete flows from the server");(this.currentStage=o,o!==i.Dummy)?null!==(e=this.data)&&void 0!==e&&e.errcode||null!==(t=this.data)&&void 0!==t&&t.error?this.stateUpdatedCallback(o,{errcode:(null===(r=this.data)||void 0===r?void 0:r.errcode)||"",error:(null===(n=this.data)||void 0===n?void 0:n.error)||""}):this.stateUpdatedCallback(o,o===h?{emailSid:this.emailSid}:{}):this.submitAuthDict({type:"m.login.dummy"})}chooseStage(){null===this.chosenFlow&&(this.chosenFlow=this.chooseFlow()),l["b"].log("Active flow => %s",JSON.stringify(this.chosenFlow));var e=this.firstUncompletedStage(this.chosenFlow);return l["b"].log("Next stage: %s",e),e}scoreFlow(e){var t=e.stages.length;return void 0!==this.supportedStages&&(t+=10*e.stages.filter(e=>!this.supportedStages.has(e)).length),t}chooseFlow(){var e,t=(null===(e=this.data)||void 0===e?void 0:e.flows)||[],r=Boolean(this.inputs.emailAddress)||Boolean(this.emailSid),n=Boolean(this.inputs.phoneCountry)&&Boolean(this.inputs.phoneNumber);for(var i of(t.sort((e,t)=>this.scoreFlow(e)-this.scoreFlow(t)),t)){var o=!1,a=!1;for(var s of i.stages)s===h?o=!0:s==f&&(a=!0);if(o==r&&a==n)return i}var c=[];throw r&&c.push(h),n&&c.push(f),new p("No appropriate authentication flow found",c,t)}firstUncompletedStage(e){var t,r=(null===(t=this.data)||void 0===t?void 0:t.completed)||[];return e.stages.find(e=>!r.includes(e))}}},d429:function(e,t,r){"use strict";var n=r("07fa"),i=r("5926"),o=RangeError;e.exports=function(e,t,r,a){var s=n(e),c=i(r),l=c<0?s+c:c;if(l>=s||l<0)throw new o("Incorrect index");for(var d=new t(s),u=0;u<s;u++)d[u]=u===l?a:e[u];return d}},d485:function(e,t,r){e.exports=o;var n=r("faa1").EventEmitter,i=r("3fb5");function o(){n.call(this)}i(o,n),o.Readable=r("0ac3"),o.Writable=r("af7e"),o.Duplex=r("7c16"),o.Transform=r("89fd"),o.PassThrough=r("51a2"),o.Stream=o,o.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function l(e){if(d(),0===n.listenerCount(this,"error"))throw e}function d(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return r.on("error",l),e.on("error",l),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e}},d58f:function(e,t,r){"use strict";var n=r("59ed"),i=r("7b0b"),o=r("44ad"),a=r("07fa"),s=TypeError,c="Reduce of empty array with no initial value",l=function(e){return function(t,r,l,d){var u=i(t),h=o(u),f=a(u);if(n(r),0===f&&l<2)throw new s(c);var p=e?f-1:0,v=e?-1:1;if(l<2)while(1){if(p in h){d=h[p],p+=v;break}if(p+=v,e?p<0:f<=p)throw new s(c)}for(;e?p>=0:f>p;p+=v)p in h&&(d=r(d,h[p],p,u));return d}};e.exports={left:l(!1),right:l(!0)}},d5da:function(t,r,n){"use strict";n.d(r,"e",(function(){return a})),n.d(r,"a",(function(){return c})),n.d(r,"d",(function(){return d})),n.d(r,"c",(function(){return u})),n.d(r,"b",(function(){return L})),n.d(r,"g",(function(){return N})),n.d(r,"h",(function(){return K})),n.d(r,"i",(function(){return q})),n.d(r,"f",(function(){return V}));var i,o,a,s,c,l,d,u,h=n("c973"),f=n.n(h),p=n("9523"),v=n.n(p),m=n("ec26"),g=n("93be"),y=n("5b5f"),b=n("b83f"),_=n("60af"),w=n("6dde"),S=n("8ed1"),E=n("04e3"),k=n("936a"),I=n("e1d9"),C=n("3838"),T=n("9c88");function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(function(e){e["AUDIO"]="audio",e["VIDEO"]="video"})(i||(i={})),function(e){e["OPUS"]="opus"}(o||(o={})),function(e){e["Fledgling"]="fledgling",e["InviteSent"]="invite_sent",e["WaitLocalMedia"]="wait_local_media",e["CreateOffer"]="create_offer",e["CreateAnswer"]="create_answer",e["Connecting"]="connecting",e["Connected"]="connected",e["Ringing"]="ringing",e["Ended"]="ended"}(a||(a={})),function(e){e["Voice"]="voice",e["Video"]="video"}(s||(s={})),function(e){e["Inbound"]="inbound",e["Outbound"]="outbound"}(c||(c={})),function(e){e["Local"]="local",e["Remote"]="remote"}(l||(l={})),function(e){e["Hangup"]="hangup",e["State"]="state",e["Error"]="error",e["Replaced"]="replaced",e["LocalHoldUnhold"]="local_hold_unhold",e["RemoteHoldUnhold"]="remote_hold_unhold",e["HoldUnhold"]="hold_unhold",e["FeedsChanged"]="feeds_changed",e["AssertedIdentityChanged"]="asserted_identity_changed",e["LengthChanged"]="length_changed",e["DataChannel"]="datachannel",e["SendVoipEvent"]="send_voip_event",e["PeerConnectionCreated"]="peer_connection_created"}(d||(d={})),function(e){e["UserHangup"]="user_hangup",e["LocalOfferFailed"]="local_offer_failed",e["NoUserMedia"]="no_user_media",e["UnknownDevices"]="unknown_devices",e["SendInvite"]="send_invite",e["CreateAnswer"]="create_answer",e["CreateOffer"]="create_offer",e["SendAnswer"]="send_answer",e["SetRemoteDescription"]="set_remote_description",e["SetLocalDescription"]="set_local_description",e["AnsweredElsewhere"]="answered_elsewhere",e["IceFailed"]="ice_failed",e["InviteTimeout"]="invite_timeout",e["Replaced"]="replaced",e["SignallingFailed"]="signalling_timeout",e["UserBusy"]="user_busy",e["Transferred"]="transferred",e["NewSession"]="new_session"}(u||(u={}));var O="1",M="stun:turn.matrix.org",A=6e4,P=1e3,D=3e4,j=2e3;class L extends Error{constructor(e,t,r){super(t+": "+r),v()(this,"code",void 0),this.code=e}}function N(){return Date.now().toString()+Object(w["a"])(16)}function U(e){var t=[{mediaType:"audio",codec:"opus",enableDtx:!0,maxAverageBitrate:e?12e3:void 0}];return t}function F(e,t){return e+":"+t}class B extends k["b"]{constructor(e){var t,r;if(super(),t=this,v()(this,"roomId",void 0),v()(this,"callId",void 0),v()(this,"invitee",void 0),v()(this,"hangupParty",void 0),v()(this,"hangupReason",void 0),v()(this,"direction",void 0),v()(this,"ourPartyId",void 0),v()(this,"peerConn",void 0),v()(this,"toDeviceSeq",0),v()(this,"isPtt",!1),v()(this,"_state",a.Fledgling),v()(this,"client",void 0),v()(this,"forceTURN",void 0),v()(this,"turnServers",void 0),v()(this,"candidateSendQueue",[]),v()(this,"candidateSendTries",0),v()(this,"candidatesEnded",!1),v()(this,"feeds",[]),v()(this,"transceivers",new Map),v()(this,"inviteOrAnswerSent",!1),v()(this,"waitForLocalAVStream",!1),v()(this,"successor",void 0),v()(this,"opponentMember",void 0),v()(this,"opponentVersion",void 0),v()(this,"opponentPartyId",void 0),v()(this,"opponentCaps",void 0),v()(this,"iceDisconnectedTimeout",void 0),v()(this,"iceReconnectionTimeOut",void 0),v()(this,"inviteTimeout",void 0),v()(this,"removeTrackListeners",new Map),v()(this,"remoteOnHold",!1),v()(this,"callStatsAtEnd",void 0),v()(this,"makingOffer",!1),v()(this,"ignoreOffer",!1),v()(this,"isSettingRemoteAnswerPending",!1),v()(this,"responsePromiseChain",void 0),v()(this,"remoteCandidateBuffer",new Map),v()(this,"remoteAssertedIdentity",void 0),v()(this,"remoteSDPStreamMetadata",void 0),v()(this,"callLengthInterval",void 0),v()(this,"callStartTime",void 0),v()(this,"opponentDeviceId",void 0),v()(this,"opponentDeviceInfo",void 0),v()(this,"opponentSessionId",void 0),v()(this,"groupCallId",void 0),v()(this,"stopVideoTrackTimer",void 0),v()(this,"isOnlyDataChannelAllowed",void 0),v()(this,"stats",void 0),v()(this,"gotLocalIceCandidate",e=>{if(e.candidate){if(this.candidatesEnded&&y["b"].warn("Call ".concat(this.callId," gotLocalIceCandidate() got candidate after candidates have ended!")),y["b"].debug("Call ".concat(this.callId," got local ICE ").concat(e.candidate.sdpMid," ").concat(e.candidate.candidate)),this.callHasEnded())return;""===e.candidate.candidate?this.queueCandidate(null):this.queueCandidate(e.candidate)}}),v()(this,"onIceGatheringStateChange",e=>{var t;y["b"].debug("Call ".concat(this.callId," onIceGatheringStateChange() ice gathering state changed to ").concat(this.peerConn.iceGatheringState)),"complete"===(null===(t=this.peerConn)||void 0===t?void 0:t.iceGatheringState)&&(this.queueCandidate(null),y["b"].debug("Call ".concat(this.callId," onIceGatheringStateChange() ice gathering state complete, set candidates have ended")))}),v()(this,"getLocalOfferFailed",e=>{y["b"].error("Call ".concat(this.callId," getLocalOfferFailed() running"),e),this.emit(d.Error,new L(u.LocalOfferFailed,"Failed to get local offer!",e),this),this.terminate(l.Local,u.LocalOfferFailed,!1)}),v()(this,"getUserMediaFailed",e=>{this.successor?this.successor.getUserMediaFailed(e):(y["b"].warn("Call ".concat(this.callId," getUserMediaFailed() failed to get user media - ending call"),e),this.emit(d.Error,new L(u.NoUserMedia,"Couldn't start capturing media! Is your microphone set up and does this app have permission?",e),this),this.terminate(l.Local,u.NoUserMedia,!1))}),v()(this,"placeCallFailed",e=>{this.successor?this.successor.placeCallFailed(e):(y["b"].warn("Call ".concat(this.callId," placeCallWithCallFeeds() failed - ending call"),e),this.emit(d.Error,new L(u.IceFailed,"Couldn't start call! Invalid ICE server configuration.",e),this),this.terminate(l.Local,u.IceFailed,!1))}),v()(this,"onIceConnectionStateChanged",()=>{var e,t,r,n,i,o;if(!this.callHasEnded()){if(y["b"].debug("Call ".concat(this.callId," onIceConnectionStateChanged() running (state=").concat(null===(e=this.peerConn)||void 0===e?void 0:e.iceConnectionState,", conn=").concat(null===(t=this.peerConn)||void 0===t?void 0:t.connectionState,")")),["connected","completed"].includes(null!==(r=null===(n=this.peerConn)||void 0===n?void 0:n.iceConnectionState)&&void 0!==r?r:""))clearTimeout(this.iceDisconnectedTimeout),this.iceDisconnectedTimeout=void 0,this.iceReconnectionTimeOut&&clearTimeout(this.iceReconnectionTimeOut),this.state=a.Connected,this.callLengthInterval||this.callStartTime||(this.callStartTime=Date.now(),this.callLengthInterval=setInterval(()=>{this.emit(d.LengthChanged,Math.round((Date.now()-this.callStartTime)/1e3),this)},P));else if("failed"==(null===(i=this.peerConn)||void 0===i?void 0:i.iceConnectionState)){var s,c;if(this.candidatesEnded=!1,null!==(s=this.peerConn)&&void 0!==s&&s.restartIce)this.candidatesEnded=!1,y["b"].debug("Call ".concat(this.callId," onIceConnectionStateChanged() ice restart (state=").concat(null===(c=this.peerConn)||void 0===c?void 0:c.iceConnectionState,")")),this.peerConn.restartIce();else y["b"].info("Call ".concat(this.callId," onIceConnectionStateChanged() hanging up call (ICE failed and no ICE restart method)")),this.hangup(u.IceFailed,!1)}else"disconnected"==(null===(o=this.peerConn)||void 0===o?void 0:o.iceConnectionState)&&(this.candidatesEnded=!1,this.iceReconnectionTimeOut=setTimeout(()=>{var e,t,r;y["b"].info("Call ".concat(this.callId," onIceConnectionStateChanged() ICE restarting because of ICE disconnected, (state=").concat(null===(e=this.peerConn)||void 0===e?void 0:e.iceConnectionState,", conn=").concat(null===(t=this.peerConn)||void 0===t?void 0:t.connectionState,")")),null!==(r=this.peerConn)&&void 0!==r&&r.restartIce&&(this.candidatesEnded=!1,this.peerConn.restartIce()),this.iceReconnectionTimeOut=void 0},j),this.iceDisconnectedTimeout=setTimeout(()=>{y["b"].info("Call ".concat(this.callId," onIceConnectionStateChanged() hanging up call (ICE disconnected for too long)")),this.hangup(u.IceFailed,!1)},D),this.state=a.Connecting);if(this.isPtt&&["failed","disconnected"].includes(this.peerConn.iceConnectionState))for(var l of this.getRemoteFeeds())l.setAudioVideoMuted(!0,!0)}}),v()(this,"onSignallingStateChanged",()=>{var e;y["b"].debug("Call ".concat(this.callId," onSignallingStateChanged() running (state=").concat(null===(e=this.peerConn)||void 0===e?void 0:e.signalingState,")"))}),v()(this,"onTrack",e=>{if(0!==e.streams.length){var t=e.streams[0];if(this.pushRemoteFeed(t),!this.removeTrackListeners.has(t)){var r=()=>{0===t.getTracks().length&&(y["b"].info("Call ".concat(this.callId," onTrack() removing track (streamId=").concat(t.id,")")),this.deleteFeedByStream(t),t.removeEventListener("removetrack",r),this.removeTrackListeners.delete(t))};t.addEventListener("removetrack",r),this.removeTrackListeners.set(t,r)}}else y["b"].warn("Call ".concat(this.callId," onTrack() called with streamless track streamless (kind=").concat(e.track.kind,")"))}),v()(this,"onDataChannel",e=>{this.emit(d.DataChannel,e.channel,this)}),v()(this,"onNegotiationNeeded",f()((function*(){y["b"].info("Call ".concat(t.callId," onNegotiationNeeded() negotiation is needed!")),t.state===a.CreateOffer||0!==t.opponentVersion?t.queueGotLocalOffer():y["b"].info("Call ".concat(t.callId," onNegotiationNeeded() opponent does not support renegotiation: ignoring negotiationneeded event"))}))),v()(this,"onHangupReceived",e=>{y["b"].debug("Call ".concat(this.callId," onHangupReceived() running")),this.partyIdMatches(e)||this.state===a.Ringing?this.terminate(l.Remote,e.reason||u.UserHangup,!0):y["b"].info("Call ".concat(this.callId," onHangupReceived() ignoring message from party ID ").concat(e.party_id,": our partner is ").concat(this.opponentPartyId))}),v()(this,"onRejectReceived",e=>{y["b"].debug("Call ".concat(this.callId," onRejectReceived() running"));var t=[a.InviteSent,a.Ringing].includes(this.state)||this.state===a.Fledgling&&this.direction===c.Inbound;t?this.terminate(l.Remote,e.reason||u.UserHangup,!0):y["b"].debug("Call ".concat(this.callId," onRejectReceived() called in wrong state (state=").concat(this.state,")"))}),v()(this,"onAnsweredElsewhere",e=>{y["b"].debug("Call ".concat(this.callId," onAnsweredElsewhere() running")),this.terminate(l.Remote,u.AnsweredElsewhere,!0)}),this.roomId=e.roomId,this.invitee=e.invitee,this.client=e.client,!this.client.deviceId)throw new Error("Client must have a device ID to start calls");for(var n of(this.forceTURN=null!==(r=e.forceTURN)&&void 0!==r&&r,this.ourPartyId=this.client.deviceId,this.opponentDeviceId=e.opponentDeviceId,this.opponentSessionId=e.opponentSessionId,this.groupCallId=e.groupCallId,this.turnServers=e.turnServers||[],0===this.turnServers.length&&this.client.isFallbackICEServerAllowed()&&this.turnServers.push({urls:[M]}),this.turnServers))Object(b["d"])(n,["urls"]);this.callId=N(),this.isOnlyDataChannelAllowed=this.client.isVoipWithNoMediaAllowed}placeVoiceCall(){var e=this;return f()((function*(){yield e.placeCall(!0,!1)}))()}placeVideoCall(){var e=this;return f()((function*(){yield e.placeCall(!0,!0)}))()}createDataChannel(e,t){var r=this.peerConn.createDataChannel(e,t);return this.emit(d.DataChannel,r,this),r}getOpponentMember(){return this.opponentMember}getOpponentDeviceId(){return this.opponentDeviceId}getOpponentSessionId(){return this.opponentSessionId}opponentCanBeTransferred(){return Boolean(this.opponentCaps&&this.opponentCaps["m.call.transferee"])}opponentSupportsDTMF(){return Boolean(this.opponentCaps&&this.opponentCaps["m.call.dtmf"])}getRemoteAssertedIdentity(){return this.remoteAssertedIdentity}get state(){return this._state}set state(e){var t=this._state;this._state=e,this.emit(d.State,e,t,this)}get type(){return this.hasUserMediaVideoSender||this.hasRemoteUserMediaVideoTrack?s.Video:s.Voice}get hasLocalUserMediaVideoTrack(){var e;return!(null===(e=this.localUsermediaStream)||void 0===e||!e.getVideoTracks().length)}get hasRemoteUserMediaVideoTrack(){return this.getRemoteFeeds().some(e=>{var t;return e.purpose===S["b"].Usermedia&&(null===(t=e.stream)||void 0===t?void 0:t.getVideoTracks().length)})}get hasLocalUserMediaAudioTrack(){var e;return!(null===(e=this.localUsermediaStream)||void 0===e||!e.getAudioTracks().length)}get hasRemoteUserMediaAudioTrack(){return this.getRemoteFeeds().some(e=>{var t;return e.purpose===S["b"].Usermedia&&!(null===(t=e.stream)||void 0===t||!t.getAudioTracks().length)})}get hasUserMediaAudioSender(){var e;return Boolean(null===(e=this.transceivers.get(F(S["b"].Usermedia,"audio")))||void 0===e?void 0:e.sender)}get hasUserMediaVideoSender(){var e;return Boolean(null===(e=this.transceivers.get(F(S["b"].Usermedia,"video")))||void 0===e?void 0:e.sender)}get localUsermediaFeed(){return this.getLocalFeeds().find(e=>e.purpose===S["b"].Usermedia)}get localScreensharingFeed(){return this.getLocalFeeds().find(e=>e.purpose===S["b"].Screenshare)}get localUsermediaStream(){var e;return null===(e=this.localUsermediaFeed)||void 0===e?void 0:e.stream}get localScreensharingStream(){var e;return null===(e=this.localScreensharingFeed)||void 0===e?void 0:e.stream}get remoteUsermediaFeed(){return this.getRemoteFeeds().find(e=>e.purpose===S["b"].Usermedia)}get remoteScreensharingFeed(){return this.getRemoteFeeds().find(e=>e.purpose===S["b"].Screenshare)}get remoteUsermediaStream(){var e;return null===(e=this.remoteUsermediaFeed)||void 0===e?void 0:e.stream}get remoteScreensharingStream(){var e;return null===(e=this.remoteScreensharingFeed)||void 0===e?void 0:e.stream}getFeedByStreamId(e){return this.getFeeds().find(t=>t.stream.id===e)}getFeeds(){return this.feeds}getLocalFeeds(){return this.feeds.filter(e=>e.isLocal())}getRemoteFeeds(){return this.feeds.filter(e=>!e.isLocal())}initOpponentCrypto(){var e=this;return f()((function*(){var t,r;if(e.opponentDeviceId&&e.client.getUseE2eForGroupCall())if(e.client.isCryptoEnabled()){if(!e.client.crypto)throw new Error("Crypto is not initialised.");var n=e.invitee||(null===(t=e.getOpponentMember())||void 0===t?void 0:t.userId);if(!n)throw new Error("Couldn't find opponent user ID to init crypto");var i=yield e.client.crypto.deviceList.downloadKeys([n],!1);if(e.opponentDeviceInfo=null===(r=i.get(n))||void 0===r?void 0:r.get(e.opponentDeviceId),void 0===e.opponentDeviceInfo)throw new C["h"](n)}else e.opponentDeviceInfo=new I["a"](e.opponentDeviceId)}))()}getLocalSDPStreamMetadata(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};for(var r of this.getLocalFeeds())e&&(r.sdpMetadataStreamId=r.stream.id),t[r.sdpMetadataStreamId]={purpose:r.purpose,audio_muted:r.isAudioMuted(),video_muted:r.isVideoMuted()};return t}noIncomingFeeds(){return!this.feeds.some(e=>!e.isLocal())}pushRemoteFeed(e){if(this.opponentSupportsSDPStreamMetadata()){var t=this.getOpponentMember().userId,r=this.remoteSDPStreamMetadata[e.id].purpose,n=this.remoteSDPStreamMetadata[e.id].audio_muted,i=this.remoteSDPStreamMetadata[e.id].video_muted;r?this.getFeedByStreamId(e.id)?y["b"].warn("Call ".concat(this.callId," pushRemoteFeed() ignoring stream because we already have a feed for it (streamId=").concat(e.id,")")):(this.feeds.push(new E["a"]({client:this.client,call:this,roomId:this.roomId,userId:t,deviceId:this.getOpponentDeviceId(),stream:e,purpose:r,audioMuted:n,videoMuted:i})),this.emit(d.FeedsChanged,this.feeds,this),y["b"].info("Call ".concat(this.callId," pushRemoteFeed() pushed stream (streamId=").concat(e.id,", active=").concat(e.active,", purpose=").concat(r,")"))):y["b"].warn("Call ".concat(this.callId," pushRemoteFeed() ignoring stream because we didn't get any metadata about it (streamId=").concat(e.id,")"))}else this.pushRemoteFeedWithoutMetadata(e)}pushRemoteFeedWithoutMetadata(e){var t,r=this.getOpponentMember().userId,n=S["b"].Usermedia,i=null===(t=this.feeds.find(e=>!e.isLocal()))||void 0===t?void 0:t.stream;i&&e.id!==i.id?y["b"].warn("Call ".concat(this.callId," pushRemoteFeedWithoutMetadata() ignoring new stream because we already have stream (streamId=").concat(e.id,")")):this.getFeedByStreamId(e.id)?y["b"].warn("Call ".concat(this.callId," pushRemoteFeedWithoutMetadata() ignoring stream because we already have a feed for it (streamId=").concat(e.id,")")):(this.feeds.push(new E["a"]({client:this.client,call:this,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:r,deviceId:this.getOpponentDeviceId(),stream:e,purpose:n})),this.emit(d.FeedsChanged,this.feeds,this),y["b"].info("Call ".concat(this.callId," pushRemoteFeedWithoutMetadata() pushed stream (streamId=").concat(e.id,", active=").concat(e.active,")")))}pushNewLocalFeed(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.client.getUserId();K(e.getAudioTracks(),!0),K(e.getVideoTracks(),!0),this.getFeedByStreamId(e.id)?y["b"].warn("Call ".concat(this.callId," pushNewLocalFeed() ignoring stream because we already have a feed for it (streamId=").concat(e.id,")")):this.pushLocalFeed(new E["a"]({client:this.client,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:n,deviceId:this.getOpponentDeviceId(),stream:e,purpose:t}),r)}pushLocalFeed(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.feeds.some(t=>e.stream.id===t.stream.id))y["b"].info("Call ".concat(this.callId," pushLocalFeed() ignoring duplicate local stream (streamId=").concat(e.stream.id,")"));else{if(this.feeds.push(e),r){var n=function(){y["b"].info("Call ".concat(t.callId," pushLocalFeed() adding track to peer connection (id=").concat(i.id,", kind=").concat(i.kind,", streamId=").concat(e.stream.id,", streamPurpose=").concat(e.purpose,", enabled=").concat(i.enabled,")"));var r=F(e.purpose,i.kind);if(t.transceivers.has(r)){var n=t.transceivers.get(r);n.sender.replaceTrack(i),n.direction="inactive"===n.direction?"sendonly":"sendrecv"}else{var o=t.peerConn.addTrack(i,e.stream),a=t.peerConn.getTransceivers().find(e=>e.sender===o);a?t.transceivers.set(r,a):y["b"].warn("Call ".concat(t.callId," pushLocalFeed() didn't find a matching transceiver after adding track!"))}};for(var i of e.stream.getTracks())n()}y["b"].info("Call ".concat(this.callId," pushLocalFeed() pushed stream (id=").concat(e.stream.id,", active=").concat(e.stream.active,", purpose=").concat(e.purpose,")")),this.emit(d.FeedsChanged,this.feeds,this)}}removeLocalFeed(e){var t=F(e.purpose,"audio"),r=F(e.purpose,"video");for(var n of[t,r])if(this.transceivers.has(n)){var i=this.transceivers.get(n);i.sender&&this.peerConn.removeTrack(i.sender)}e.purpose===S["b"].Screenshare&&this.client.getMediaHandler().stopScreensharingStream(e.stream),this.deleteFeed(e)}deleteAllFeeds(){for(var e of this.feeds)e.isLocal()&&this.groupCallId||e.dispose();this.feeds=[],this.emit(d.FeedsChanged,this.feeds,this)}deleteFeedByStream(e){var t=this.getFeedByStreamId(e.id);t?this.deleteFeed(t):y["b"].warn("Call ".concat(this.callId," deleteFeedByStream() didn't find the feed to delete (streamId=").concat(e.id,")"))}deleteFeed(e){e.dispose(),this.feeds.splice(this.feeds.indexOf(e),1),this.emit(d.FeedsChanged,this.feeds,this)}getCurrentCallStats(){var e=this;return f()((function*(){return e.callHasEnded()?e.callStatsAtEnd:e.collectCallStats()}))()}collectCallStats(){var e=this;return f()((function*(){if(e.peerConn){var t=yield e.peerConn.getStats(),r=[];return t.forEach(e=>{r.push(e)}),r}}))()}initWithInvite(t){var r=this;return f()((function*(){var n,i=t.getContent();r.direction=c.Inbound;var o=yield r.client.checkTurnServers();o||y["b"].warn("Call ".concat(r.callId," initWithInvite() failed to get TURN credentials! Proceeding with call anyway..."));var s=i[S["a"]];s?r.updateRemoteSDPStreamMetadata(s):y["b"].debug("Call ".concat(r.callId," initWithInvite() did not get any SDPStreamMetadata! Can not send/receive multiple streams")),r.peerConn=r.createPeerConnection(),r.emit(d.PeerConnectionCreated,r.peerConn,r),r.chooseOpponent(t),yield r.initOpponentCrypto();try{yield r.peerConn.setRemoteDescription(i.offer),y["b"].debug("Call ".concat(r.callId," initWithInvite() set remote description: ").concat(i.offer.type)),yield r.addBufferedIceCandidates()}catch(e){return y["b"].debug("Call ".concat(r.callId," initWithInvite() failed to set remote description"),e),void r.terminate(l.Local,u.SetRemoteDescription,!1)}var h=null===(n=r.feeds.find(e=>!e.isLocal()))||void 0===n?void 0:n.stream;if(!r.isOnlyDataChannelAllowed&&(!h||0===h.getTracks().length))return y["b"].error("Call ".concat(r.callId," initWithInvite() no remote stream or no tracks after setting remote description!")),void r.terminate(l.Local,u.SetRemoteDescription,!1);if(r.state=a.Ringing,t.getLocalAge()){var f=setTimeout(()=>{var e;r.state==a.Ringing&&(y["b"].debug("Call ".concat(r.callId," initWithInvite() invite has expired. Hanging up.")),r.hangupParty=l.Remote,r.state=a.Ended,r.stopAllMedia(),"closed"!=r.peerConn.signalingState&&r.peerConn.close(),null===(e=r.stats)||void 0===e||e.removeStatsReportGatherer(r.callId),r.emit(d.Hangup,r))},i.lifetime-t.getLocalAge()),p=e=>{e!==a.Ringing&&(clearTimeout(f),r.off(d.State,p))};r.on(d.State,p)}}))()}initWithHangup(e){this.state=a.Ended}shouldAnswerWithMediaType(e,t,r){return e&&!t?(y["b"].warn("Call ".concat(this.callId," shouldAnswerWithMediaType() unable to answer with ").concat(r," because the other side isn't sending it either.")),!1):Object(b["q"])(e)||e===t||this.opponentSupportsSDPStreamMetadata()?null!==e&&void 0!==e?e:t:(y["b"].warn("Call ".concat(this.callId," shouldAnswerWithMediaType() unable to answer with ").concat(r,"=").concat(e," because the other side doesn't support it. Answering with ").concat(r,"=").concat(t,".")),t)}answer(t,r){var n=this;return f()((function*(){if(!n.inviteOrAnswerSent){if(!1===t&&!1===r)throw new Error("You CANNOT answer a call without media");if(n.localUsermediaStream||n.waitForLocalAVStream)n.waitForLocalAVStream&&(n.state=a.WaitLocalMedia);else{var i=n.state,o=n.shouldAnswerWithMediaType(t,n.hasRemoteUserMediaAudioTrack,"audio"),s=n.shouldAnswerWithMediaType(r,n.hasRemoteUserMediaVideoTrack,"video");n.state=a.WaitLocalMedia,n.waitForLocalAVStream=!0;try{var c,l=yield n.client.getMediaHandler().getUserMediaStream(o,s);n.waitForLocalAVStream=!1;var d=new E["a"]({client:n.client,roomId:n.roomId,userId:n.client.getUserId(),deviceId:null!==(c=n.client.getDeviceId())&&void 0!==c?c:void 0,stream:l,purpose:S["b"].Usermedia,audioMuted:!1,videoMuted:!1}),u=[d];n.localScreensharingFeed&&u.push(n.localScreensharingFeed),n.answerWithCallFeeds(u)}catch(e){if(!s)return void n.getUserMediaFailed(e);y["b"].warn("Call ".concat(n.callId," answer() failed to getUserMedia(), trying to getUserMedia() without video")),n.state=i,n.waitForLocalAVStream=!1,yield n.answer(o,!1)}}}}))()}answerWithCallFeeds(e){this.inviteOrAnswerSent||this.queueGotCallFeedsForAnswer(e)}replacedBy(e){y["b"].debug("Call ".concat(this.callId," replacedBy() running (newCallId=").concat(e.callId,")")),this.state===a.WaitLocalMedia?(y["b"].debug("Call ".concat(this.callId," replacedBy() telling new call to wait for local media (newCallId=").concat(e.callId,")")),e.waitForLocalAVStream=!0):[a.CreateOffer,a.InviteSent].includes(this.state)&&(e.direction===c.Outbound?e.queueGotCallFeedsForAnswer([]):(y["b"].debug("Call ".concat(this.callId," replacedBy() handing local stream to new call(newCallId=").concat(e.callId,")")),e.queueGotCallFeedsForAnswer(this.getLocalFeeds().map(e=>e.clone())))),this.successor=e,this.emit(d.Replaced,e,this),this.hangup(u.Replaced,!0)}hangup(e,t){if(!this.callHasEnded()&&(y["b"].debug("Call ".concat(this.callId," hangup() ending call (reason=").concat(e,")")),this.terminate(l.Local,e,!t),![a.Fledgling,a.WaitLocalMedia].includes(this.state))){var r={};(this.opponentVersion&&0!==this.opponentVersion||e!==u.UserHangup)&&(r["reason"]=e),this.sendVoipEvent(_["b"].CallHangup,r)}}reject(){if(this.state!==a.Ringing)throw Error("Call must be in 'ringing' state to reject!");if(0===this.opponentVersion)return y["b"].info("Call ".concat(this.callId," reject() opponent version is less than 1: sending hangup instead of reject (opponentVersion=").concat(this.opponentVersion,")")),void this.hangup(u.UserHangup,!0);y["b"].debug("Rejecting call: "+this.callId),this.terminate(l.Local,u.UserHangup,!0),this.sendVoipEvent(_["b"].CallReject,{})}upgradeCall(e,t){var r=this;return f()((function*(){if((e||t)&&r.opponentSupportsSDPStreamMetadata())try{y["b"].debug("Call ".concat(r.callId," upgradeCall() upgrading call (audio=").concat(e,", video=").concat(t,")"));var n=e||r.hasLocalUserMediaAudioTrack,i=t||r.hasLocalUserMediaVideoTrack,o=yield r.client.getMediaHandler().getUserMediaStream(n,i,!1);yield r.updateLocalUsermediaStream(o,e,t)}catch(error){y["b"].error("Call ".concat(r.callId," upgradeCall() failed to upgrade the call"),error),r.emit(d.Error,new L(u.NoUserMedia,"Failed to get camera access: ",error),r)}}))()}opponentSupportsSDPStreamMetadata(){return Boolean(this.remoteSDPStreamMetadata)}isScreensharing(){return Boolean(this.localScreensharingStream)}setScreensharingEnabled(e,t){var r=this;return f()((function*(){if(e&&r.isScreensharing())return y["b"].warn("Call ".concat(r.callId," setScreensharingEnabled() there is already a screensharing stream - there is nothing to do!")),!0;if(!e&&!r.isScreensharing())return y["b"].warn("Call ".concat(r.callId," setScreensharingEnabled() there already isn't a screensharing stream - there is nothing to do!")),!1;if(!r.opponentSupportsSDPStreamMetadata())return r.setScreensharingEnabledWithoutMetadataSupport(e,t);if(y["b"].debug("Call ".concat(r.callId," setScreensharingEnabled() running (enabled=").concat(e,")")),!e){var n=r.transceivers.get(F(S["b"].Screenshare,"audio")),i=r.transceivers.get(F(S["b"].Screenshare,"video"));for(var o of[n,i])o&&o.sender&&r.peerConn.removeTrack(o.sender);return r.client.getMediaHandler().stopScreensharingStream(r.localScreensharingStream),r.deleteFeedByStream(r.localScreensharingStream),!1}try{var a=yield r.client.getMediaHandler().getScreensharingStream(t);return!!a&&(r.pushNewLocalFeed(a,S["b"].Screenshare),!0)}catch(s){return y["b"].error("Call ".concat(r.callId," setScreensharingEnabled() failed to get screen-sharing stream:"),s),!1}}))()}setScreensharingEnabledWithoutMetadataSupport(e,t){var r=this;return f()((function*(){if(y["b"].debug("Call ".concat(r.callId," setScreensharingEnabledWithoutMetadataSupport() running (enabled=").concat(e,")")),!e){var n,i,o=null===(n=r.localUsermediaStream)||void 0===n?void 0:n.getTracks().find(e=>"video"===e.kind),a=null===(i=r.transceivers.get(F(S["b"].Usermedia,"video")))||void 0===i?void 0:i.sender;return null===a||void 0===a||a.replaceTrack(null!==o&&void 0!==o?o:null),r.client.getMediaHandler().stopScreensharingStream(r.localScreensharingStream),r.deleteFeedByStream(r.localScreensharingStream),!1}try{var s,c=yield r.client.getMediaHandler().getScreensharingStream(t);if(!c)return!1;var l=c.getTracks().find(e=>"video"===e.kind),d=null===(s=r.transceivers.get(F(S["b"].Usermedia,"video")))||void 0===s?void 0:s.sender;return null===d||void 0===d||d.replaceTrack(null!==l&&void 0!==l?l:null),r.pushNewLocalFeed(c,S["b"].Screenshare,!1),!0}catch(u){return y["b"].error("Call ".concat(r.callId," setScreensharingEnabledWithoutMetadataSupport() failed to get screen-sharing stream:"),u),!1}}))()}updateLocalUsermediaStream(e){var t=arguments,r=this;return f()((function*(){var n=t.length>1&&void 0!==t[1]&&t[1],i=t.length>2&&void 0!==t[2]&&t[2],o=r.localUsermediaFeed,a=n||!o.isAudioMuted()&&!r.remoteOnHold,s=i||!o.isVideoMuted()&&!r.remoteOnHold;for(var c of(y["b"].log("Call ".concat(r.callId," updateLocalUsermediaStream() running (streamId=").concat(e.id,", audio=").concat(a,", video=").concat(s,")")),K(e.getAudioTracks(),a),K(e.getVideoTracks(),s),r.localUsermediaStream.getTracks()))r.localUsermediaStream.removeTrack(c),c.stop();for(var l of e.getTracks())r.localUsermediaStream.addTrack(l);var d=function*(){var t=F(S["b"].Usermedia,u.kind),n=r.transceivers.get(t),i=null===n||void 0===n?void 0:n.sender,a=!1;if(i)try{y["b"].info("Call ".concat(r.callId," updateLocalUsermediaStream() replacing track (id=").concat(u.id,", kind=").concat(u.kind,", streamId=").concat(e.id,", streamPurpose=").concat(o.purpose,")")),yield i.replaceTrack(u),n.direction="inactive"===n.direction?"sendonly":"sendrecv",a=!0}catch(error){y["b"].warn("Call ".concat(r.callId," updateLocalUsermediaStream() replaceTrack failed: adding new transceiver instead"),error)}if(!a){y["b"].info("Call ".concat(r.callId," updateLocalUsermediaStream() adding track to peer connection (id=").concat(u.id,", kind=").concat(u.kind,", streamId=").concat(e.id,", streamPurpose=").concat(o.purpose,")"));var s=r.peerConn.addTrack(u,r.localUsermediaStream),c=r.peerConn.getTransceivers().find(e=>e.sender===s);c?r.transceivers.set(t,c):y["b"].warn("Call ".concat(r.callId," updateLocalUsermediaStream() couldn't find matching transceiver for newly added track!"))}};for(var u of e.getTracks())yield*d()}))()}setLocalVideoMuted(e){var t=this;return f()((function*(){var r,n;if(y["b"].log("Call ".concat(t.callId," setLocalVideoMuted() running ").concat(e)),e||void 0===t.stopVideoTrackTimer||(clearTimeout(t.stopVideoTrackTimer),t.stopVideoTrackTimer=void 0),!(yield t.client.getMediaHandler().hasVideoDevice()))return t.isLocalVideoMuted();if(!t.hasUserMediaVideoSender&&!e)return null===(n=t.localUsermediaFeed)||void 0===n||n.setAudioVideoMuted(null,e),yield t.upgradeCall(!1,!0),t.isLocalVideoMuted();if(!e&&0===t.localUsermediaStream.getVideoTracks().length){var i=yield t.client.getMediaHandler().getUserMediaStream(!0,!0);yield t.updateLocalUsermediaStream(i)}return null===(r=t.localUsermediaFeed)||void 0===r||r.setAudioVideoMuted(null,e),t.updateMuteStatus(),yield t.sendMetadataUpdate(),e&&(t.stopVideoTrackTimer=setTimeout(()=>{for(var e of t.localUsermediaStream.getVideoTracks())e.stop(),t.localUsermediaStream.removeTrack(e)},120)),t.isLocalVideoMuted()}))()}isLocalVideoMuted(){var e,t;return null!==(e=null===(t=this.localUsermediaFeed)||void 0===t?void 0:t.isVideoMuted())&&void 0!==e&&e}setMicrophoneMuted(e){var t=this;return f()((function*(){var r;return y["b"].log("Call ".concat(t.callId," setMicrophoneMuted() running ").concat(e)),(yield t.client.getMediaHandler().hasAudioDevice())?e||t.hasUserMediaAudioSender&&t.hasLocalUserMediaAudioTrack?(null===(r=t.localUsermediaFeed)||void 0===r||r.setAudioVideoMuted(e,null),t.updateMuteStatus(),yield t.sendMetadataUpdate(),t.isMicrophoneMuted()):(yield t.upgradeCall(!0,!1),t.isMicrophoneMuted()):t.isMicrophoneMuted()}))()}isMicrophoneMuted(){var e,t;return null!==(e=null===(t=this.localUsermediaFeed)||void 0===t?void 0:t.isAudioMuted())&&void 0!==e&&e}isRemoteOnHold(){return this.remoteOnHold}setRemoteOnHold(e){if(this.isRemoteOnHold()!==e){for(var t of(this.remoteOnHold=e,this.peerConn.getTransceivers()))t.direction=e?"sendonly":"sendrecv";this.updateMuteStatus(),this.sendMetadataUpdate(),this.emit(d.RemoteHoldUnhold,this.remoteOnHold,this)}}isLocalOnHold(){if(this.state!==a.Connected)return!1;var e=!0;for(var t of this.peerConn.getTransceivers()){var r=["inactive","recvonly"].includes(t.currentDirection);r||(e=!1)}return e}sendDtmfDigit(e){for(var t of this.peerConn.getSenders()){var r;if("audio"===(null===(r=t.track)||void 0===r?void 0:r.kind)&&t.dtmf)return void t.dtmf.insertDTMF(e)}throw new Error("Unable to find a track to send DTMF on")}updateMuteStatus(){var e=this.isMicrophoneMuted()||this.remoteOnHold,t=this.isLocalVideoMuted()||this.remoteOnHold;y["b"].log("Call ".concat(this.callId," updateMuteStatus stream ").concat(this.localUsermediaStream.id," micShouldBeMuted ").concat(e," vidShouldBeMuted ").concat(t)),K(this.localUsermediaStream.getAudioTracks(),!e),K(this.localUsermediaStream.getVideoTracks(),!t)}sendMetadataUpdate(){var e=this;return f()((function*(){yield e.sendVoipEvent(_["b"].CallSDPStreamMetadataChangedPrefix,{[S["a"]]:e.getLocalSDPStreamMetadata()})}))()}gotCallFeedsForInvite(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.successor)this.successor.queueGotCallFeedsForAnswer(e);else if(this.callHasEnded())this.stopAllMedia();else{for(var r of e)this.pushLocalFeed(r);t&&this.peerConn.addTransceiver("video",{direction:"recvonly"}),this.state=a.CreateOffer,y["b"].debug("Call ".concat(this.callId," gotUserMediaForInvite() run"))}}sendAnswer(){var e=this;return f()((function*(){var t={answer:{sdp:e.peerConn.localDescription.sdp,type:e.peerConn.localDescription.type},[S["a"]]:e.getLocalSDPStreamMetadata(!0)};t.capabilities={"m.call.transferee":e.client.supportsCallTransfer,"m.call.dtmf":!1};var r=e.discardDuplicateCandidates();y["b"].info("Call ".concat(e.callId," sendAnswer() discarding ").concat(r," candidates that will be sent in answer"));try{yield e.sendVoipEvent(_["b"].CallAnswer,t),e.inviteOrAnswerSent=!0}catch(error){e.state=a.Ringing,error instanceof T["f"]&&error.event&&e.client.cancelPendingEvent(error.event);var n=u.SendAnswer,i="Failed to send answer";throw"UnknownDeviceError"==error.name&&(n=u.UnknownDevices,i="Unknown devices present in the room"),e.emit(d.Error,new L(n,i,error),e),error}e.sendCandidateQueue()}))()}queueGotCallFeedsForAnswer(e){this.responsePromiseChain?this.responsePromiseChain=this.responsePromiseChain.then(()=>this.gotCallFeedsForAnswer(e)):this.responsePromiseChain=this.gotCallFeedsForAnswer(e)}mungeSdp(e,t){var r=Object(g["parse"])(e.sdp);r.media.forEach(e=>{var r=new Map,n=new Map;for(var i of e.rtp)r.set(i.payload,i.codec),n.set(i.codec,i.payload);for(var o of t)if(o.mediaType===e.type)if(n.has(o.codec)){var a=[];void 0!==o.enableDtx&&a.push("usedtx=".concat(o.enableDtx?"1":"0")),void 0!==o.maxAverageBitrate&&a.push("maxaveragebitrate=".concat(o.maxAverageBitrate));var s=!1;for(var c of e.fmtp)r.get(c.payload)===o.codec&&(s=!0,c.config+=";"+a.join(";"));s||e.fmtp.push({payload:n.get(o.codec),config:a.join(";")})}else y["b"].info("Call ".concat(this.callId," mungeSdp() ignoring SDP modifications for ").concat(o.codec," as it's not present."))}),e.sdp=Object(g["write"])(r)}createOffer(){var e=this;return f()((function*(){var t=yield e.peerConn.createOffer();return e.mungeSdp(t,U(e.isPtt)),t}))()}createAnswer(){var e=this;return f()((function*(){var t=yield e.peerConn.createAnswer();return e.mungeSdp(t,U(e.isPtt)),t}))()}gotCallFeedsForAnswer(e){var t=this;return f()((function*(){if(!t.callHasEnded()){for(var r of(t.waitForLocalAVStream=!1,e))t.pushLocalFeed(r);var n;t.state=a.CreateAnswer;try{t.getRidOfRTXCodecs(),n=yield t.createAnswer()}catch(i){return y["b"].debug("Call ".concat(t.callId," gotCallFeedsForAnswer() failed to create answer: "),i),void t.terminate(l.Local,u.CreateAnswer,!0)}try{if(yield t.peerConn.setLocalDescription(n),t.callHasEnded())return;if(t.state=a.Connecting,yield new Promise(e=>{setTimeout(e,200)}),t.callHasEnded())return;t.sendAnswer()}catch(i){return y["b"].debug("Call ".concat(t.callId," gotCallFeedsForAnswer() error setting local description!"),i),void t.terminate(l.Local,u.SetLocalDescription,!0)}}}))()}onRemoteIceCandidatesReceived(e){var t=this;return f()((function*(){if(!t.callHasEnded()){var r=e.getContent(),n=r.candidates;if(n){var i=0===r.version?null:r.party_id||null;if(void 0!==t.opponentPartyId)t.partyIdMatches(r)?yield t.addIceCandidates(n):y["b"].info("Call ".concat(t.callId," onRemoteIceCandidatesReceived() ignoring candidates from party ID ").concat(r.party_id,": we have chosen party ID ").concat(t.opponentPartyId));else if(i){y["b"].info("Call ".concat(t.callId," onRemoteIceCandidatesReceived() buffering ").concat(n.length," candidates until we pick an opponent"));var o=t.remoteCandidateBuffer.get(i)||[];o.push(...n),t.remoteCandidateBuffer.set(i,o)}}else y["b"].info("Call ".concat(t.callId," onRemoteIceCandidatesReceived() ignoring candidates event with no candidates!"))}}))()}onAnswerReceived(t){var r=this;return f()((function*(){var n=t.getContent();if(y["b"].debug("Call ".concat(r.callId," onAnswerReceived() running (hangupParty=").concat(n.party_id,")")),r.callHasEnded())y["b"].debug("Call ".concat(r.callId," onAnswerReceived() ignoring answer because call has ended"));else if(void 0===r.opponentPartyId){r.chooseOpponent(t),yield r.addBufferedIceCandidates(),r.state=a.Connecting;var i=n[S["a"]];i?r.updateRemoteSDPStreamMetadata(i):y["b"].warn("Call ".concat(r.callId," onAnswerReceived() did not get any SDPStreamMetadata! Can not send/receive multiple streams"));try{r.isSettingRemoteAnswerPending=!0,yield r.peerConn.setRemoteDescription(n.answer),r.isSettingRemoteAnswerPending=!1,y["b"].debug("Call ".concat(r.callId," onAnswerReceived() set remote description: ").concat(n.answer.type))}catch(e){return r.isSettingRemoteAnswerPending=!1,y["b"].debug("Call ".concat(r.callId," onAnswerReceived() failed to set remote description"),e),void r.terminate(l.Local,u.SetRemoteDescription,!1)}if(null!==r.opponentPartyId)try{yield r.sendVoipEvent(_["b"].CallSelectAnswer,{selected_party_id:r.opponentPartyId})}catch(o){y["b"].warn("Call ".concat(r.callId," onAnswerReceived() failed to send select_answer event"),o)}}else y["b"].info("Call ".concat(r.callId," onAnswerReceived() ignoring answer from party ID ").concat(n.party_id,": we already have an answer/reject from ").concat(r.opponentPartyId))}))()}onSelectAnswerReceived(e){var t=this;return f()((function*(){if(t.direction===c.Inbound){var r=e.getContent().selected_party_id;void 0!==r&&null!==r?r!==t.ourPartyId&&(y["b"].info("Call ".concat(t.callId," onSelectAnswerReceived() got select_answer for party ID ").concat(r,": we are party ID ").concat(t.ourPartyId,".")),yield t.terminate(l.Remote,u.AnsweredElsewhere,!0)):y["b"].warn("Call ".concat(t.callId," onSelectAnswerReceived() got nonsensical select_answer with null/undefined selected_party_id: ignoring"))}else y["b"].warn("Call ".concat(t.callId," onSelectAnswerReceived() got select_answer for an outbound call: ignoring"))}))()}onNegotiateReceived(e){var t=this;return f()((function*(){var r=e.getContent(),n=r.description;if(n&&n.sdp&&n.type){var i=t.direction===c.Inbound,o=!t.makingOffer&&("stable"===t.peerConn.signalingState||t.isSettingRemoteAnswerPending),a="offer"===n.type&&!o;if(t.ignoreOffer=!i&&a,t.ignoreOffer)y["b"].info("Call ".concat(t.callId," onNegotiateReceived() ignoring colliding negotiate event because we're impolite"));else{var s=t.isLocalOnHold(),h=r[S["a"]];h?t.updateRemoteSDPStreamMetadata(h):y["b"].warn("Call ".concat(t.callId," onNegotiateReceived() received negotiation event without SDPStreamMetadata!"));try{if(t.isSettingRemoteAnswerPending="answer"==n.type,yield t.peerConn.setRemoteDescription(n),t.isSettingRemoteAnswerPending=!1,y["b"].debug("Call ".concat(t.callId," onNegotiateReceived() set remote description: ").concat(n.type)),"offer"===n.type){var f,p;try{t.getRidOfRTXCodecs(),p=yield t.createAnswer()}catch(m){return y["b"].debug("Call ".concat(t.callId," onNegotiateReceived() failed to create answer: "),m),void t.terminate(l.Local,u.CreateAnswer,!0)}yield t.peerConn.setLocalDescription(p),y["b"].debug("Call ".concat(t.callId," onNegotiateReceived() create an answer")),t.sendVoipEvent(_["b"].CallNegotiate,{lifetime:A,description:null===(f=t.peerConn.localDescription)||void 0===f?void 0:f.toJSON(),[S["a"]]:t.getLocalSDPStreamMetadata(!0)})}}catch(m){t.isSettingRemoteAnswerPending=!1,y["b"].warn("Call ".concat(t.callId," onNegotiateReceived() failed to complete negotiation"),m)}var v=t.isLocalOnHold();s!==v&&(t.emit(d.LocalHoldUnhold,v,t),t.emit(d.HoldUnhold,v))}}else y["b"].info("Call ".concat(t.callId," onNegotiateReceived() ignoring invalid m.call.negotiate event"))}))()}updateRemoteSDPStreamMetadata(e){for(var t of(this.remoteSDPStreamMetadata=Object(b["D"])(this.remoteSDPStreamMetadata||{},e,!0),this.getRemoteFeeds())){var r,n=t.stream.id,i=this.remoteSDPStreamMetadata[n];t.setAudioVideoMuted(null===i||void 0===i?void 0:i.audio_muted,null===i||void 0===i?void 0:i.video_muted),t.purpose=null===(r=this.remoteSDPStreamMetadata[n])||void 0===r?void 0:r.purpose}}onSDPStreamMetadataChangedReceived(e){var t=e.getContent(),r=t[S["a"]];this.updateRemoteSDPStreamMetadata(r)}onAssertedIdentityReceived(e){var t=this;return f()((function*(){var r=e.getContent();r.asserted_identity&&(t.remoteAssertedIdentity={id:r.asserted_identity.id,displayName:r.asserted_identity.display_name},t.emit(d.AssertedIdentityChanged,t))}))()}callHasEnded(){return this.state===a.Ended}queueGotLocalOffer(){this.responsePromiseChain?this.responsePromiseChain=this.responsePromiseChain.then(()=>this.wrappedGotLocalOffer()):this.responsePromiseChain=this.wrappedGotLocalOffer()}wrappedGotLocalOffer(){var t=this;return f()((function*(){t.makingOffer=!0;try{yield t.gotLocalOffer()}catch(e){return void t.getLocalOfferFailed(e)}finally{t.makingOffer=!1}}))()}gotLocalOffer(){var e=this;return f()((function*(){if(y["b"].debug("Call ".concat(e.callId," gotLocalOffer() running")),e.callHasEnded())y["b"].debug("Call ".concat(e.callId,' gotLocalOffer() ignoring newly created offer because the call has ended"'));else{var t;try{e.getRidOfRTXCodecs(),t=yield e.createOffer()}catch(f){return y["b"].debug("Call ".concat(e.callId," gotLocalOffer() failed to create offer: "),f),void e.terminate(l.Local,u.CreateOffer,!0)}try{yield e.peerConn.setLocalDescription(t)}catch(f){return y["b"].debug("Call ".concat(e.callId," gotLocalOffer() error setting local description!"),f),void e.terminate(l.Local,u.SetLocalDescription,!0)}if("gathering"===e.peerConn.iceGatheringState&&(yield new Promise(e=>{setTimeout(e,200)})),!e.callHasEnded()){var r,n,i=e.state===a.CreateOffer?_["b"].CallInvite:_["b"].CallNegotiate,o={lifetime:A};if(i===_["b"].CallInvite&&e.invitee&&(o.invitee=e.invitee),e.state===a.CreateOffer)o.offer=null===(r=e.peerConn.localDescription)||void 0===r?void 0:r.toJSON();else o.description=null===(n=e.peerConn.localDescription)||void 0===n?void 0:n.toJSON();o.capabilities={"m.call.transferee":e.client.supportsCallTransfer,"m.call.dtmf":!1},o[S["a"]]=e.getLocalSDPStreamMetadata(!0);var s=e.discardDuplicateCandidates();y["b"].info("Call ".concat(e.callId," gotLocalOffer() discarding ").concat(s," candidates that will be sent in offer"));try{yield e.sendVoipEvent(i,o)}catch(error){y["b"].error("Call ".concat(e.callId," gotLocalOffer() failed to send invite"),error),error instanceof T["f"]&&error.event&&e.client.cancelPendingEvent(error.event);var c=u.SignallingFailed,h="Signalling failed";return e.state===a.CreateOffer&&(c=u.SendInvite,h="Failed to send invite"),"UnknownDeviceError"==error.name&&(c=u.UnknownDevices,h="Unknown devices present in the room"),e.emit(d.Error,new L(c,h,error),e),void e.terminate(l.Local,c,!1)}e.sendCandidateQueue(),e.state===a.CreateOffer&&(e.inviteOrAnswerSent=!0,e.state=a.InviteSent,e.inviteTimeout=setTimeout(()=>{e.inviteTimeout=void 0,e.state===a.InviteSent&&e.hangup(u.InviteTimeout,!1)},A))}}}))()}getRidOfRTXCodecs(){if(RTCRtpReceiver.getCapabilities&&RTCRtpSender.getCapabilities){var t=this.transceivers.get(F(S["b"].Screenshare,"video"));if(t&&t.setCodecPreferences){var r=RTCRtpReceiver.getCapabilities("video").codecs,n=RTCRtpSender.getCapabilities("video").codecs,i=[];for(var o of[...r,...n])if("video/rtx"!==o.mimeType){i.push(o);try{t.setCodecPreferences(i)}catch(e){y["b"].info("Working around buggy WebRTC impl: claimed to support codec but threw when setting codec preferences",o,e),i.pop()}}}}}sendVoipEvent(e,t){var r=this;return f()((function*(){var n=x(x({},t),{},{version:O,call_id:r.callId,party_id:r.ourPartyId,conf_id:r.groupCallId});if(r.opponentDeviceId){var i,o=r.toDeviceSeq++,a=x(x({},n),{},{device_id:r.client.deviceId,sender_session_id:r.client.getSessionId(),dest_session_id:r.opponentSessionId,seq:o,[_["k"]]:Object(m["a"])()});r.emit(d.SendVoipEvent,{type:"toDevice",eventType:e,userId:r.invitee||(null===(i=r.getOpponentMember())||void 0===i?void 0:i.userId),opponentDeviceId:r.opponentDeviceId,content:a},r);var s=r.invitee||r.getOpponentMember().userId;if(r.client.getUseE2eForGroupCall()){if(!r.opponentDeviceInfo)return void y["b"].warn("Call ".concat(r.callId," sendVoipEvent() failed: we do not have opponentDeviceInfo"));yield r.client.encryptAndSendToDevices([{userId:s,deviceInfo:r.opponentDeviceInfo}],{type:e,content:a})}else yield r.client.sendToDevice(e,new Map([[s,new Map([[r.opponentDeviceId,a]])]]))}else{var c;r.emit(d.SendVoipEvent,{type:"sendEvent",eventType:e,roomId:r.roomId,content:n,userId:r.invitee||(null===(c=r.getOpponentMember())||void 0===c?void 0:c.userId)},r),yield r.client.sendEvent(r.roomId,e,n)}}))()}queueCandidate(e){if(e?this.candidateSendQueue.push(e):this.candidatesEnded=!0,this.state!==a.Ringing&&this.inviteOrAnswerSent){var t=this.direction===c.Inbound?500:2e3;0===this.candidateSendTries&&setTimeout(()=>{this.sendCandidateQueue()},t)}}discardDuplicateCandidates(){for(var e=0,t=[],r=0;r<this.candidateSendQueue.length;r++){var n=this.candidateSendQueue[r];""===n.candidate?t.push(n):e++}return this.candidateSendQueue=t,e}transfer(e){var t=this;return f()((function*(){var r=yield t.client.getProfileInfo(e),n=N(),i={replacement_id:N(),target_user:{id:e,display_name:r.displayname,avatar_url:r.avatar_url},create_call:n};yield t.sendVoipEvent(_["b"].CallReplaces,i),yield t.terminate(l.Local,u.Transferred,!0)}))()}transferToCall(e){var t=this;return f()((function*(){var r,n,i=null===(r=e.getOpponentMember())||void 0===r?void 0:r.userId,o=i?yield t.client.getProfileInfo(i):void 0,a=null===(n=t.getOpponentMember())||void 0===n?void 0:n.userId,s=a?yield t.client.getProfileInfo(a):void 0,c=N(),d={replacement_id:N(),target_user:{id:a,display_name:null===s||void 0===s?void 0:s.displayname,avatar_url:null===s||void 0===s?void 0:s.avatar_url},await_call:c};yield e.sendVoipEvent(_["b"].CallReplaces,d);var h={replacement_id:N(),target_user:{id:i,display_name:null===o||void 0===o?void 0:o.displayname,avatar_url:null===o||void 0===o?void 0:o.avatar_url},create_call:c};yield t.sendVoipEvent(_["b"].CallReplaces,h),yield t.terminate(l.Local,u.Transferred,!0),yield e.terminate(l.Local,u.Transferred,!0)}))()}terminate(e,t,r){var n=this;return f()((function*(){var i;if(!n.callHasEnded()){for(var[o,s]of(n.hangupParty=e,n.hangupReason=t,n.state=a.Ended,n.inviteTimeout&&(clearTimeout(n.inviteTimeout),n.inviteTimeout=void 0),void 0!==n.iceDisconnectedTimeout&&(clearTimeout(n.iceDisconnectedTimeout),n.iceDisconnectedTimeout=void 0),n.callLengthInterval&&(clearInterval(n.callLengthInterval),n.callLengthInterval=void 0),void 0!==n.stopVideoTrackTimer&&(clearTimeout(n.stopVideoTrackTimer),n.stopVideoTrackTimer=void 0),n.removeTrackListeners))o.removeEventListener("removetrack",s);n.removeTrackListeners.clear(),n.callStatsAtEnd=yield n.collectCallStats(),n.stopAllMedia(),n.deleteAllFeeds(),n.peerConn&&"closed"!==n.peerConn.signalingState&&n.peerConn.close(),null===(i=n.stats)||void 0===i||i.removeStatsReportGatherer(n.callId),r&&n.emit(d.Hangup,n),n.client.callEventHandler.calls.delete(n.callId)}}))()}stopAllMedia(){for(var e of(y["b"].debug("Call ".concat(this.callId," stopAllMedia() running")),this.feeds))if(e.isLocal()&&e.purpose===S["b"].Usermedia)this.client.getMediaHandler().stopUserMediaStream(e.stream);else if(e.isLocal()&&e.purpose===S["b"].Screenshare)this.client.getMediaHandler().stopScreensharingStream(e.stream);else if(!e.isLocal())for(var t of(y["b"].debug("Call ".concat(this.callId," stopAllMedia() stopping stream (streamId=").concat(e.stream.id,")")),e.stream.getTracks()))t.stop()}checkForErrorListener(){if(0===this.listeners(k["a"].Error).length)throw new Error("You MUST attach an error listener using call.on('error', function() {})")}sendCandidateQueue(){var e=this;return f()((function*(){if(0!==e.candidateSendQueue.length&&!e.callHasEnded()){var t=e.candidateSendQueue;e.candidateSendQueue=[],++e.candidateSendTries;var r={candidates:t.map(e=>e.toJSON())};e.candidatesEnded&&r.candidates.push({candidate:""}),y["b"].debug("Call ".concat(e.callId," sendCandidateQueue() attempting to send ").concat(t.length," candidates"));try{yield e.sendVoipEvent(_["b"].CallCandidates,r),e.candidateSendTries=0,e.sendCandidateQueue()}catch(error){if(error instanceof T["f"]&&error.event&&e.client.cancelPendingEvent(error.event),e.candidateSendQueue.push(...t),e.candidateSendTries>5){y["b"].debug("Call ".concat(e.callId," sendCandidateQueue() failed to send candidates on attempt ").concat(e.candidateSendTries,". Giving up on this call."),error);var n=u.SignallingFailed,i="Signalling failed";return e.emit(d.Error,new L(n,i,error),e),void e.hangup(n,!1)}var o=500*Math.pow(2,e.candidateSendTries);++e.candidateSendTries,y["b"].debug("Call ".concat(e.callId," sendCandidateQueue() failed to send candidates. Retrying in ").concat(o,"ms"),error),setTimeout(()=>{e.sendCandidateQueue()},o)}}}))()}placeCall(t,r){var n=this;return f()((function*(){if(!t)throw new Error("You CANNOT start a call without audio");var i;n.state=a.WaitLocalMedia;try{var o,s=yield n.client.getMediaHandler().getUserMediaStream(t,r);K(s.getAudioTracks(),!0),K(s.getVideoTracks(),!0),i=new E["a"]({client:n.client,roomId:n.roomId,userId:n.client.getUserId(),deviceId:null!==(o=n.client.getDeviceId())&&void 0!==o?o:void 0,stream:s,purpose:S["b"].Usermedia,audioMuted:!1,videoMuted:!1})}catch(e){return void n.getUserMediaFailed(e)}try{yield n.placeCallWithCallFeeds([i])}catch(e){return void n.placeCallFailed(e)}}))()}placeCallWithCallFeeds(e){var t=arguments,r=this;return f()((function*(){var n=t.length>1&&void 0!==t[1]&&t[1];r.checkForErrorListener(),r.direction=c.Outbound,yield r.initOpponentCrypto(),r.client.callEventHandler.calls.set(r.callId,r);var i=yield r.client.checkTurnServers();i||y["b"].warn("Call ".concat(r.callId," placeCallWithCallFeeds() failed to get TURN credentials! Proceeding with call anyway...")),r.peerConn=r.createPeerConnection(),r.emit(d.PeerConnectionCreated,r.peerConn,r),r.gotCallFeedsForInvite(e,n)}))()}createPeerConnection(){var e,t=new window.RTCPeerConnection({iceTransportPolicy:this.forceTURN?"relay":void 0,iceServers:this.turnServers.length?this.turnServers:void 0,iceCandidatePoolSize:this.client.iceCandidatePoolSize,bundlePolicy:"max-bundle"});t.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChanged),t.addEventListener("signalingstatechange",this.onSignallingStateChanged),t.addEventListener("icecandidate",this.gotLocalIceCandidate),t.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),t.addEventListener("track",this.onTrack),t.addEventListener("negotiationneeded",this.onNegotiationNeeded),t.addEventListener("datachannel",this.onDataChannel);var r=this.getOpponentMember(),n=r?r.userId:"unknown";return null===(e=this.stats)||void 0===e||e.addStatsReportGatherer(this.callId,n,t),t}partyIdMatches(e){var t=0===e.version?null:e.party_id||null;return t===this.opponentPartyId}chooseOpponent(e){var t,r,n=e.getContent();(y["b"].debug("Call ".concat(this.callId," chooseOpponent() running (partyId=").concat(n.party_id,")")),this.opponentVersion=n.version,0===this.opponentVersion?this.opponentPartyId=null:this.opponentPartyId=n.party_id||null,this.opponentCaps=n.capabilities||{},this.opponentMember=null!==(t=this.client.getRoom(this.roomId).getMember(e.getSender()))&&void 0!==t?t:void 0,this.opponentMember)&&(null===(r=this.stats)||void 0===r||r.updateOpponentMember(this.callId,this.opponentMember.userId))}addBufferedIceCandidates(){var e=this;return f()((function*(){var t=e.remoteCandidateBuffer.get(e.opponentPartyId);t&&(y["b"].info("Call ".concat(e.callId," addBufferedIceCandidates() adding ").concat(t.length," buffered candidates for opponent ").concat(e.opponentPartyId)),yield e.addIceCandidates(t)),e.remoteCandidateBuffer.clear()}))()}addIceCandidates(e){var t=this;return f()((function*(){for(var r of e){null!==r.sdpMid&&void 0!==r.sdpMid||null!==r.sdpMLineIndex&&void 0!==r.sdpMLineIndex?y["b"].debug("Call ".concat(t.callId," addIceCandidates() got remote ICE candidate (sdpMid=").concat(r.sdpMid,", candidate=").concat(r.candidate,")")):y["b"].debug("Call ".concat(t.callId," addIceCandidates() got remote ICE end-of-candidates"));try{yield t.peerConn.addIceCandidate(r)}catch(n){t.ignoreOffer?y["b"].debug("Call ".concat(t.callId," addIceCandidates() failed to add remote ICE candidate because ignoring offer"),n):y["b"].info("Call ".concat(t.callId," addIceCandidates() failed to add remote ICE candidate"),n)}}}))()}get hasPeerConnection(){return Boolean(this.peerConn)}initStats(e){this.stats=e,this.stats.start()}}function K(e,t){for(var r of e)r.enabled=t}function q(){if("undefined"===typeof window||"undefined"===typeof document)return!1;try{var t=Boolean(window.RTCPeerConnection||window.RTCSessionDescription||window.RTCIceCandidate||navigator.mediaDevices);if(!t)return y["b"].error("WebRTC is not supported in this browser / environment"),!1}catch(e){return y["b"].error("Exception thrown when trying to access WebRTC",e),!1}return!0}function V(e,t,r){if(!q())return null;var n=!!r&&r.forceTURN,i={client:e,roomId:t,invitee:null===r||void 0===r?void 0:r.invitee,turnServers:e.getTurnServers(),forceTURN:e.forceTURN||n,opponentDeviceId:null===r||void 0===r?void 0:r.opponentDeviceId,opponentSessionId:null===r||void 0===r?void 0:r.opponentSessionId,groupCallId:null===r||void 0===r?void 0:r.groupCallId},o=new B(i);return e.reEmitter.reEmit(o,Object.values(d)),o}},d643:function(e,t,r){var n=r("35d9");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("09b8dfff",n,e)}},d68a:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateDelayedEventAction=void 0;var n=function(e){return e["Cancel"]="cancel",e["Restart"]="restart",e["Send"]="send",e}({});t.UpdateDelayedEventAction=n},d6d6:function(e,t,r){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},d6dd:function(e,t,r){"use strict";var n=r("966d"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var o=Object.create(r("3a7c"));o.inherits=r("3fb5");var a=r("6f2e"),s=r("6ffa");o.inherits(u,a);for(var c=i(s.prototype),l=0;l<c.length;l++){var d=c[l];u.prototype[d]||(u.prototype[d]=s.prototype[d])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},d751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},d76e:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return p}));var n,i=r("c973"),o=r.n(i),a=r("9523"),s=r.n(a),c=r("afe6"),l=r("3838"),d=r("866a"),u=r("5b5f"),h=r("60af"),f=r("480c");(function(e){e["Incoming"]="GroupCall.incoming",e["Outgoing"]="GroupCall.outgoing",e["Ended"]="GroupCall.ended",e["Participants"]="GroupCall.participants"})(n||(n={}));class p{constructor(e){this.client=e,s()(this,"groupCalls",new Map),s()(this,"roomDeferreds",new Map),s()(this,"onRoomsChanged",e=>{this.createGroupCallForRoom(e)}),s()(this,"onRoomStateChanged",(e,t)=>{var r=e.getType();if(r===h["b"].GroupCallPrefix){var n=e.getStateKey(),i=e.getContent(),o=this.groupCalls.get(t.roomId);o||i["m.terminated"]||e.isRedacted()?o&&o.groupCallId===n?i["m.terminated"]||e.isRedacted()?o.terminate(!1):i["m.type"]!==o.type&&u["b"].warn("GroupCallEventHandler onRoomStateChanged() currently does not support changing type (roomId=".concat(t.roomId,")")):o&&o.groupCallId!==n&&u["b"].warn("GroupCallEventHandler onRoomStateChanged() currently does not support multiple calls (roomId=".concat(t.roomId,")")):this.createGroupCallFromRoomStateEvent(e)}})}start(){var e=this;return o()((function*(){e.client.getSyncState()!==f["c"].Syncing&&(u["b"].debug("GroupCallEventHandler start() waiting for client to start syncing"),yield new Promise(t=>{var r=()=>{if(e.client.getSyncState()===f["c"].Syncing)return e.client.off(c["b"].Sync,r),t()};e.client.on(c["b"].Sync,r)}));var t=e.client.getRooms();for(var r of t)e.createGroupCallForRoom(r);e.client.on(c["b"].Room,e.onRoomsChanged),e.client.on(d["b"].Events,e.onRoomStateChanged)}))()}stop(){this.client.removeListener(c["b"].Room,this.onRoomsChanged),this.client.removeListener(d["b"].Events,this.onRoomStateChanged)}getRoomDeferred(e){var t,r=this.roomDeferreds.get(e);void 0===r&&(r={prom:new Promise(e=>{t=e})},r.resolve=t,this.roomDeferreds.set(e,r));return r}waitUntilRoomReadyForGroupCalls(e){return this.getRoomDeferred(e).prom}getGroupCallById(e){return[...this.groupCalls.values()].find(t=>t.groupCallId===e)}createGroupCallForRoom(e){var t=e.currentState.getStateEvents(h["b"].GroupCallPrefix),r=t.sort((e,t)=>t.getTs()-e.getTs());for(var n of r){var i=n.getContent();if(!i["m.terminated"]&&!n.isRedacted()){u["b"].debug("GroupCallEventHandler createGroupCallForRoom() choosing group call from possible calls (stateKey=".concat(n.getStateKey(),", ts=").concat(n.getTs(),", roomId=").concat(e.roomId,", numOfPossibleCalls=").concat(t.length,")")),this.createGroupCallFromRoomStateEvent(n);break}}this.getRoomDeferred(e.roomId).resolve()}createGroupCallFromRoomStateEvent(e){var t=e.getRoomId(),r=e.getContent(),i=this.client.getRoom(t);if(i){var o=e.getStateKey(),a=r["m.type"];if(Object.values(l["g"]).includes(a)){var s=r["m.intent"];if(Object.values(l["d"]).includes(s)){var c,d=Boolean(r["io.element.ptt"]);if(null!==r&&void 0!==r&&r.dataChannelsEnabled&&null!==r&&void 0!==r&&r.dataChannelOptions){var{ordered:h,maxPacketLifeTime:f,maxRetransmits:p,protocol:v}=r.dataChannelOptions;c={ordered:h,maxPacketLifeTime:f,maxRetransmits:p,protocol:v}}var m=new l["a"](this.client,i,a,d,s,o,(null===r||void 0===r?void 0:r.dataChannelsEnabled)||this.client.isVoipWithNoMediaAllowed,c,this.client.isVoipWithNoMediaAllowed,this.client.useLivekitForGroupCalls,r["io.element.livekit_service_url"]);return this.groupCalls.set(i.roomId,m),this.client.emit(n.Incoming,m),m}u["b"].warn("Received invalid group call intent (type=".concat(a,", roomId=").concat(t,")"))}else u["b"].warn("GroupCallEventHandler createGroupCallFromRoomStateEvent() received invalid call type (type=".concat(a,", roomId=").concat(t,")"))}else u["b"].warn("GroupCallEventHandler createGroupCallFromRoomStateEvent() couldn't find room for call (roomId=".concat(t,")"))}}},d854:function(e,t,r){"use strict";r.r(t),r.d(t,"error",(function(){return i})),r.d(t,"byError",(function(){return o}));var n={500:"networkerror",401:"unauthorized",511:"needcredentials",527:"emptyresponse",600:"Wrong token",601:"Can not login",602:"Empty response"};function i(e,t){return{code:e,error:t||n[e]||"undefined",isError:!0}}function o(e){if(!e)return null;var t=_.findKey(n,t=>t==e);return t?i(t):e}},d925:function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},d9b5:function(e,t,r){"use strict";var n=r("d066"),i=r("1626"),o=r("3a9b"),a=r("fdbf"),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,s(e))}},d9e2:function(e,t,r){"use strict";var n=r("23e7"),i=r("cfe9"),o=r("2ba4"),a=r("e5cb"),s="WebAssembly",c=i[s],l=7!==new Error("e",{cause:7}).cause,d=function(e,t){var r={};r[e]=a(e,t,l),n({global:!0,constructor:!0,arity:1,forced:l},r)},u=function(e,t){if(c&&c[e]){var r={};r[e]=a(s+"."+e,t,l),n({target:s,stat:!0,constructor:!0,arity:1,forced:l},r)}};d("Error",(function(e){return function(t){return o(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),d("URIError",(function(e){return function(t){return o(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},da1e:function(e,t,r){"use strict";(function(e){function n(t){if("function"===typeof e)return e.from(t).toString("base64");if("function"===typeof btoa&&t instanceof Uint8Array)return btoa(t.reduce((e,t)=>e+String.fromCharCode(t),""));throw new Error("No base64 impl found!")}function i(e){return n(e).replace(/={1,2}$/,"")}function o(e){return i(e).replace(/\+/g,"-").replace(/\//g,"_")}function a(t){if("function"===typeof e)return e.from(t,"base64");if("function"===typeof atob){var r=function*(){for(var e=atob(t.replace(/-/g,"+").replace(/_/g,"/")),r=0;r<e.length;++r)yield e.charCodeAt(r)};return Uint8Array.from(r())}throw new Error("No base64 impl found!")}r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return a}))}).call(this,r("b639").Buffer)},dab2:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("9523"),i=r.n(n),o=r("2f36");class a{constructor(e){this.ourEvent=e,i()(this,"timeline",void 0),i()(this,"ourEventIndex",0),i()(this,"paginateTokens",{[o["a"].Backward]:null,[o["a"].Forward]:null}),this.timeline=[e]}getEvent(){return this.timeline[this.ourEventIndex]}getTimeline(){return this.timeline}getOurEventIndex(){return this.ourEventIndex}getPaginateToken(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.paginateTokens[e?o["a"].Backward:o["a"].Forward]}setPaginateToken(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.paginateTokens[t?o["a"].Backward:o["a"].Forward]=null!==e&&void 0!==e?e:null}addEvents(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.timeline=e.concat(this.timeline),this.ourEventIndex+=e.length):this.timeline=this.timeline.concat(e)}}class s{static fromJson(e,t){var r=e.context||{},n=(r.events_before||[]).map(t),i=(r.events_after||[]).map(t),o=new a(t(e.result)),c=o.ourEvent.threadRootId;return n=n.filter(e=>e.threadRootId===c),i=i.filter(e=>e.threadRootId===c),o.setPaginateToken(r.start,!0),o.addEvents(n,!0),o.addEvents(i,!1),o.setPaginateToken(r.end,!1),new s(e.rank,o)}constructor(e,t){this.rank=e,this.context=t}}},daf5:function(e,t,r){"use strict";var n=r("a593"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},db45:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r("9523"),i=r.n(n),o=r("b83f"),a=r("5b5f"),s=r("93dd"),c=r("60af");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=[s["e"].Override,s["e"].ContentSpecific,s["e"].RoomSpecific,s["e"].SenderSpecific,s["e"].Underride],h={".m.rule.is_room_mention":{rule_id:".m.rule.is_room_mention",default:!0,enabled:!0,conditions:[{kind:s["a"].EventPropertyIs,key:"content.m\\.mentions.room",value:!0},{kind:s["a"].SenderNotificationPermission,key:"room"}],actions:[s["d"].Notify,{set_tweak:s["g"].Highlight}]},".m.rule.reaction":{rule_id:".m.rule.reaction",default:!0,enabled:!0,conditions:[{kind:s["a"].EventMatch,key:"type",pattern:"m.reaction"}],actions:[s["d"].DontNotify]},".org.matrix.msc3786.rule.room.server_acl":{rule_id:".org.matrix.msc3786.rule.room.server_acl",default:!0,enabled:!0,conditions:[{kind:s["a"].EventMatch,key:"type",pattern:c["b"].RoomServerAcl},{kind:s["a"].EventMatch,key:"state_key",pattern:""}],actions:[]}},f=Symbol("UserDefinedRules"),p=[s["f"].Master,f,s["f"].SuppressNotices,s["f"].InviteToSelf,s["f"].MemberEvent,s["f"].IsUserMention,s["f"].ContainsDisplayName,s["f"].IsRoomMention,s["f"].AtRoomNotification,s["f"].Tombstone,".m.rule.reaction",".m.rule.room.server_acl",".org.matrix.msc3786.rule.room.server_acl",".m.rule.suppress_edits"],v={".org.matrix.msc3914.rule.room.call":{rule_id:".org.matrix.msc3914.rule.room.call",default:!0,enabled:!0,conditions:[{kind:s["a"].EventMatch,key:"type",pattern:"org.matrix.msc3401.call"},{kind:s["a"].CallStarted}],actions:[s["d"].Notify,{set_tweak:s["g"].Sound,value:"default"}]}},m=[f,s["f"].IncomingCall,".org.matrix.msc3914.rule.room.call",s["f"].EncryptedDM,s["f"].DM,s["f"].Message,s["f"].EncryptedMessage];function g(e,t,r,n){var i=t.filter(e=>e.default),o=t.filter(e=>!e.default);function s(t){t===f?l.push(...o):t in r?(a["b"].warn("Adding default global ".concat(e," push rule ").concat(t)),l.push(r[t])):a["b"].warn("Missing default global ".concat(e," push rule ").concat(t))}var c=0,l=[];for(var d of i){var u=n.indexOf(d.rule_id);if(-1!==u){while(u>c){var h=n[c];s(h),c+=1}l.push(d),c+=1}else l.push(d)}for(var p of n.slice(c))s(p);return l}class y{constructor(e){this.client=e,i()(this,"parsedKeys",new Map)}static actionListToActionsObject(e){var t={notify:!1,tweaks:{}};for(var r of e)r===s["d"].Notify?t.notify=!0:"object"===typeof r&&(void 0===r.value&&(r.value=!0),t.tweaks[r.set_tweak]=r.value);return t}static rewriteDefaultRules(e){var t=JSON.parse(JSON.stringify(e));return t||(t={}),t.global||(t.global={}),t.global.override||(t.global.override=[]),t.global.underride||(t.global.underride=[]),t.global.override=g(s["e"].Override,t.global.override,h,p),t.global.underride=g(s["e"].Underride,t.global.underride,v,m),t}updateCachedPushRuleKeys(e){e||(e={}),e.global||(e.global={}),e.global.override||(e.global.override=[]),e.global.room||(e.global.room=[]),e.global.sender||(e.global.sender=[]),e.global.underride||(e.global.underride=[]);var t=new Set(this.parsedKeys.keys());for(var r of[e.global.override,e.global.room,e.global.sender,e.global.underride])for(var n of r)if(n.conditions)for(var i of n.conditions)i.kind===s["a"].EventMatch&&(t.delete(i.key),this.parsedKeys.set(i.key,y.partsForDottedKey(i.key)));t.forEach(e=>this.parsedKeys.delete(e))}matchingRuleFromKindSet(e,t){for(var r of u){var n=t[r];if(n)for(var i of n)if(i.enabled){var o=this.templateRuleToRaw(r,i);if(o&&this.ruleMatchesEvent(o,e))return d(d({},i),{},{kind:r})}}return null}templateRuleToRaw(e,t){var r={rule_id:t.rule_id,actions:t.actions,conditions:[]};switch(e){case s["e"].Underride:case s["e"].Override:r.conditions=t.conditions;break;case s["e"].RoomSpecific:if(!t.rule_id)return null;r.conditions.push({kind:s["a"].EventMatch,key:"room_id",value:t.rule_id});break;case s["e"].SenderSpecific:if(!t.rule_id)return null;r.conditions.push({kind:s["a"].EventMatch,key:"user_id",value:t.rule_id});break;case s["e"].ContentSpecific:if(!t.pattern)return null;r.conditions.push({kind:s["a"].EventMatch,key:"content.body",pattern:t.pattern});break}return r}eventFulfillsCondition(e,t){switch(e.kind){case s["a"].EventMatch:return this.eventFulfillsEventMatchCondition(e,t);case s["a"].EventPropertyIs:return this.eventFulfillsEventPropertyIsCondition(e,t);case s["a"].EventPropertyContains:return this.eventFulfillsEventPropertyContains(e,t);case s["a"].ContainsDisplayName:return this.eventFulfillsDisplayNameCondition(e,t);case s["a"].RoomMemberCount:return this.eventFulfillsRoomMemberCountCondition(e,t);case s["a"].SenderNotificationPermission:return this.eventFulfillsSenderNotifPermCondition(e,t);case s["a"].CallStarted:case s["a"].CallStartedPrefix:return this.eventFulfillsCallStartedCondition(e,t)}return!1}eventFulfillsSenderNotifPermCondition(e,t){var r=e["key"];if(!r)return!1;var n=this.client.getRoom(t.getRoomId());return!(null===n||void 0===n||!n.currentState)&&n.currentState.mayTriggerNotifOfType(r,t.getSender())}eventFulfillsRoomMemberCountCondition(e,t){if(!e.is)return!1;var r=this.client.getRoom(t.getRoomId());if(!r||!r.currentState||!r.currentState.members)return!1;var n=r.currentState.getJoinedMemberCount(),i=e.is.match(/^([=<>]*)(\d*)$/);if(!i)return!1;var o=i[1],a=parseInt(i[2]);if(isNaN(a))return!1;switch(o){case"":case"==":return n==a;case"<":return n<a;case">":return n>a;case"<=":return n<=a;case">=":return n>=a;default:return!1}}eventFulfillsDisplayNameCondition(e,t){var r,n=t.getContent();if(t.isEncrypted()&&t.getClearContent()&&(n=t.getClearContent()),!n||!n.body||"string"!=typeof n.body)return!1;var i=this.client.getRoom(t.getRoomId()),a=null===i||void 0===i||null===(r=i.currentState)||void 0===r?void 0:r.getMember(this.client.credentials.userId);if(!a)return!1;var s=a.name,c=new RegExp("(^|\\W)"+Object(o["m"])(s)+"(\\W|$)","i");return n.body.search(c)>-1}eventFulfillsEventMatchCondition(e,t){if(!e.key)return!1;var r=this.valueForDottedKey(e.key,t);if("string"!==typeof r)return!1;if(e.value)return e.value===r;if("string"!==typeof e.pattern)return!1;var n="content.body"===e.key?this.createCachedRegex("(^|\\W)",e.pattern,"(\\W|$)"):this.createCachedRegex("^",e.pattern,"$");return!!r.match(n)}eventFulfillsEventPropertyIsCondition(e,t){return!(!e.key||void 0===e.value)&&e.value===this.valueForDottedKey(e.key,t)}eventFulfillsEventPropertyContains(e,t){if(!e.key||void 0===e.value)return!1;var r=this.valueForDottedKey(e.key,t);return!!Array.isArray(r)&&r.includes(e.value)}eventFulfillsCallStartedCondition(e,t){return["m.ring","m.prompt"].includes(t.getContent()["m.intent"])&&!("m.terminated"in t.getContent())&&(t.getPrevContent()["m.terminated"]!==t.getContent()["m.terminated"]||Object(o["f"])(t.getPrevContent(),{}))}createCachedRegex(e,t,r){return y.cachedGlobToRegex[t]||(y.cachedGlobToRegex[t]=new RegExp(e+Object(o["n"])(t)+r,"i")),y.cachedGlobToRegex[t]}static partsForDottedKey(e){var t=[],r="",n=!1;for(var i of e)n?(r+="\\"===i||"."===i?i:"\\"+i,n=!1):"."==i?(t.push(r),r=""):"\\"==i?n=!0:r+=i;return n&&(r+="\\"),t.push(r),t}valueForDottedKey(e,t){var r,n=this.parsedKeys.get(e);void 0===n&&(n=y.partsForDottedKey(e),this.parsedKeys.set(e,n));var i=n[0],a=0;for("content"===i?(r=t.getContent(),++a):"type"===i?(r=t.getType(),++a):r=t.event;a<n.length;++a){if(Object(o["q"])(r))return;var s=n[a];r=r[s]}return r}matchingRuleForEventWithRulesets(e,t){return t?e.getSender()===this.client.getSafeUserId()?null:this.matchingRuleFromKindSet(e,t.global):null}pushActionsForEventAndRulesets(e,t){var r=this.matchingRuleForEventWithRulesets(e,t);if(!r)return{};var n=y.actionListToActionsObject(r.actions);return void 0===n.tweaks.highlight&&(n.tweaks.highlight=r.kind==s["e"].ContentSpecific),{actions:n,rule:r}}ruleMatchesEvent(e,t){var r;return(!this.client.supportsIntentionalMentions()||void 0===t.getContent()["m.mentions"]||e.rule_id!==s["f"].ContainsUserName&&e.rule_id!==s["f"].ContainsDisplayName&&e.rule_id!==s["f"].AtRoomNotification)&&!(null!==(r=e.conditions)&&void 0!==r&&r.some(e=>!this.eventFulfillsCondition(e,t)))}actionsForEvent(e){var{actions:t}=this.pushActionsForEventAndRulesets(e,this.client.pushRules);return t||{}}actionsAndRuleForEvent(e){return this.pushActionsForEventAndRulesets(e,this.client.pushRules)}getPushRuleById(e){var t,r=this.getPushRuleAndKindById(e);return null!==(t=null===r||void 0===r?void 0:r.rule)&&void 0!==t?t:null}getPushRuleAndKindById(e){for(var t of["global"]){var r;if(void 0!==(null===(r=this.client.pushRules)||void 0===r?void 0:r[t]))for(var n of u)if(void 0!==this.client.pushRules[t][n])for(var i of this.client.pushRules[t][n])if(i.rule_id===e)return{rule:i,kind:n}}return null}}i()(y,"cachedGlobToRegex",{})},dbc5:function(e,t,r){"use strict";(function(e,n){r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return g}));var i=r("c973"),o=r.n(i),a=r("9523"),s=r.n(a),c=r("d190"),l=r.n(c),d=r("da1e"),u=r("aab2"),h=r("c889"),f=r("5b5f"),p=r("9c88"),v="org.matrix.msc2697.v1.olm.libolm_pickle",m=6048e5;class g{constructor(e){this.crypto=e,s()(this,"inProgress",!1),s()(this,"timeoutId",void 0),s()(this,"key",void 0),s()(this,"keyInfo",void 0),s()(this,"deviceDisplayName",void 0),this.getDehydrationKeyFromCache()}getDehydrationKeyFromCache(){var t=this;return this.crypto.cryptoStore.doTxn("readonly",[u["a"].STORE_ACCOUNT],r=>{this.crypto.cryptoStore.getSecretStorePrivateKey(r,function(){var r=o()((function*(r){if(r){var{key:i,keyInfo:o,deviceDisplayName:a,time:s}=r,c=e.from(t.crypto.olmDevice.pickleKey),l=yield Object(h["b"])(i,c,v);t.key=Object(d["a"])(l),t.keyInfo=o,t.deviceDisplayName=a;var u=Date.now(),f=Math.max(1,s+m-u);t.timeoutId=n.setTimeout(t.dehydrateDevice.bind(t),f)}}));return function(e){return r.apply(this,arguments)}}(),"dehydration")})}setKeyAndQueueDehydration(e){var t=arguments,r=this;return o()((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:{},i=t.length>2?t[2]:void 0,o=yield r.setKey(e,n,i);o||r.dehydrateDevice()}))()}setKey(e){var t=arguments,r=this;return o()((function*(){var i=t.length>1&&void 0!==t[1]?t[1]:{},o=t.length>2?t[2]:void 0;if(!e)return r.timeoutId&&(n.clearTimeout(r.timeoutId),r.timeoutId=void 0),yield r.crypto.cryptoStore.doTxn("readwrite",[u["a"].STORE_ACCOUNT],e=>{r.crypto.cryptoStore.storeSecretStorePrivateKey(e,"dehydration",null)}),r.key=void 0,void(r.keyInfo=void 0);for(var a=!!r.key&&e.length==r.key.length,s=0;a&&s<e.length;s++)e[s]!=r.key[s]&&(a=!1);return a||(r.key=e,r.keyInfo=i,r.deviceDisplayName=o),a}))()}dehydrateDevice(){var t=this;return o()((function*(){if(t.inProgress)f["b"].log("Dehydration already in progress -- not starting new dehydration");else{t.inProgress=!0,t.timeoutId&&(n.clearTimeout(t.timeoutId),t.timeoutId=void 0);try{var r=e.from(t.crypto.olmDevice.pickleKey),i=yield Object(h["c"])(Object(d["b"])(t.key),r,v);yield t.crypto.cryptoStore.doTxn("readwrite",[u["a"].STORE_ACCOUNT],e=>{t.crypto.cryptoStore.storeSecretStorePrivateKey(e,"dehydration",{keyInfo:t.keyInfo,key:i,deviceDisplayName:t.deviceDisplayName,time:Date.now()})}),f["b"].log("Attempting to dehydrate device"),f["b"].log("Creating account");var o=new n.Olm.Account;o.create();var a=JSON.parse(o.identity_keys()),s=o.max_number_of_one_time_keys();o.generate_one_time_keys(s/2),o.generate_fallback_key();var c=JSON.parse(o.one_time_keys()),g=JSON.parse(o.fallback_key());o.mark_keys_as_published();var y=o.pickle(new Uint8Array(t.key)),b={algorithm:v,account:y};t.keyInfo.passphrase&&(b.passphrase=t.keyInfo.passphrase),f["b"].log("Uploading account to server");var _=yield t.crypto.baseApis.http.authedRequest(p["i"].Put,"/dehydrated_device",void 0,{device_data:b,initial_device_display_name:t.deviceDisplayName},{prefix:"/_matrix/client/unstable/org.matrix.msc2697.v2"}),w=_.device_id;f["b"].log("Preparing device keys",w);var S={algorithms:t.crypto.supportedAlgorithms,device_id:w,user_id:t.crypto.userId,keys:{["ed25519:".concat(w)]:a.ed25519,["curve25519:".concat(w)]:a.curve25519}},E=o.sign(l.a.stringify(S));S.signatures={[t.crypto.userId]:{["ed25519:".concat(w)]:E}},t.crypto.crossSigningInfo.getId("self_signing")&&(yield t.crypto.crossSigningInfo.signObject(S,"self_signing")),f["b"].log("Preparing one-time keys");var k={};for(var[I,C]of Object.entries(c.curve25519)){var T={key:C},R=o.sign(l.a.stringify(T));T.signatures={[t.crypto.userId]:{["ed25519:".concat(w)]:R}},k["signed_curve25519:".concat(I)]=T}f["b"].log("Preparing fallback keys");var x={};for(var[O,M]of Object.entries(g.curve25519)){var A={key:M,fallback:!0},P=o.sign(l.a.stringify(A));A.signatures={[t.crypto.userId]:{["ed25519:".concat(w)]:P}},x["signed_curve25519:".concat(O)]=A}return f["b"].log("Uploading keys to server"),yield t.crypto.baseApis.http.authedRequest(p["i"].Post,"/keys/upload/"+encodeURI(w),void 0,{device_keys:S,one_time_keys:k,"org.matrix.msc2732.fallback_keys":x}),f["b"].log("Done dehydrating"),t.timeoutId=n.setTimeout(t.dehydrateDevice.bind(t),m),w}finally{t.inProgress=!1}}}))()}stop(){this.timeoutId&&(n.clearTimeout(this.timeoutId),this.timeoutId=void 0)}}}).call(this,r("b639").Buffer,r("c8ba"))},dbe5:function(e,t,r){"use strict";var n=r("cfe9"),i=r("d039"),o=r("1212"),a=r("8558"),s=n.structuredClone;e.exports=!!s&&!i((function(){if("DENO"===a&&o>92||"NODE"===a&&o>94||"BROWSER"===a&&o>97)return!1;var e=new ArrayBuffer(8),t=s(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength}))},dbfa:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFERENCE_RELATION=void 0;var n=r("d308"),i=new n.NamespacedValue("m.reference");t.REFERENCE_RELATION=i},dc14:function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){z(t,e)}}var o;e.exports=x,x.WritableState=R;var a={deprecate:r("b7d1")},s=r("429b"),c=r("b639").Buffer,l=("undefined"!==typeof t?t:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function d(e){return c.from(e)}function u(e){return c.isBuffer(e)||e instanceof l}var h,f=r("4681"),p=r("0db6"),v=p.getHighWaterMark,m=r("c9b8").codes,g=m.ERR_INVALID_ARG_TYPE,y=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_MULTIPLE_CALLBACK,w=m.ERR_STREAM_CANNOT_PIPE,S=m.ERR_STREAM_DESTROYED,E=m.ERR_STREAM_NULL_VALUES,k=m.ERR_STREAM_WRITE_AFTER_END,I=m.ERR_UNKNOWN_ENCODING,C=f.errorOrDestroy;function T(){}function R(e,t,n){o=o||r("b19a"),e=e||{},"boolean"!==typeof n&&(n=t instanceof o),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=v(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){N(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function x(e){o=o||r("b19a");var t=this instanceof o;if(!t&&!h.call(x,this))return new x(e);this._writableState=new R(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function O(e,t){var r=new k;C(e,r),n.nextTick(t,r)}function M(e,t,r,i){var o;return null===r?o=new E:"string"===typeof r||t.objectMode||(o=new g("chunk",["string","Buffer"],r)),!o||(C(e,o),n.nextTick(i,o),!1)}function A(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=c.from(t,r)),t}function P(e,t,r,n,i,o){if(!r){var a=A(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else D(e,t,!1,s,n,i,o);return c}function D(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function j(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(W,e,t),e._writableState.errorEmitted=!0,C(e,i)):(o(i),e._writableState.errorEmitted=!0,C(e,i),W(e,t))}function L(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function N(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new b;if(L(r),t)j(e,r,i,t,o);else{var a=K(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||B(e,r),i?n.nextTick(U,e,r,a,o):U(e,r,a,o)}}function U(e,t,r,n){r||F(e,t),t.pendingcb--,n(),W(e,t)}function F(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;var s=0,c=!0;while(r)o[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;o.allBuffers=c,D(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{while(r){var l=r.chunk,d=r.encoding,u=r.callback,h=t.objectMode?1:l.length;if(D(e,t,!1,h,l,d,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function K(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function q(e,t){e._final((function(r){t.pendingcb--,r&&C(e,r),t.prefinished=!0,e.emit("prefinish"),W(e,t)}))}function V(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(q,e,t)))}function W(e,t){var r=K(t);if(r&&(V(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function $(e,t,r){t.ending=!0,W(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function z(e,t,r){var n=e.entry;e.entry=null;while(n){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}r("3fb5")(x,s),R.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(R.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===x&&(e&&e._writableState instanceof R)}})):h=function(e){return e instanceof this},x.prototype.pipe=function(){C(this,new w)},x.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&u(e);return o&&!c.isBuffer(e)&&(e=d(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=T),n.ending?O(this,r):(o||M(this,n,e,r))&&(n.pendingcb++,i=P(this,n,o,e,t,r)),i},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||B(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new I(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,r){r(new y("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,r){var n=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||$(this,n,r),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=f.destroy,x.prototype._undestroy=f.undestroy,x.prototype._destroy=function(e,t){t(e)}}).call(this,r("c8ba"),r("4362"))},dc31:function(e,t,r){"use strict";var n=r("a593"),i=r("651d"),o=r("d35c"),a=r("8b5c");function s(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var c=s(a);c.Axios=o,c.create=function(e){return s(n.merge(a,e))},c.Cancel=r("480d"),c.CancelToken=r("827e"),c.isCancel=r("0a3f"),c.all=function(e){return Promise.all(e)},c.spread=r("8ec6"),e.exports=c,e.exports.default=c},dc4a:function(e,t,r){"use strict";var n=r("59ed"),i=r("7234");e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},dc99:function(e,t,r){"use strict";e.exports=RangeError},dcab:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("e2c7");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=r("029d");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=r("7a3a");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r("097b");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=r("316e");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=r("ccff");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=r("0b1a");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=r("ab64");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var u=r("302d");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var h=r("2f86");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var f=r("ca2c");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r("2d4c");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var v=r("7961");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var m=r("97c2");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=r("1d04");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var y=r("fc9b");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=r("ac71");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var _=r("b0d3");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var w=r("203b");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var S=r("1dea");Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var E=r("3a8c");Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var k=r("90df");Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))}));var I=r("a7bc");Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))}));var C=r("2b19");Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))}));var T=r("ac68");Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))}));var R=r("8894");Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))}));var x=r("de45");Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))}));var O=r("c946");Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var M=r("7dad");Object.keys(M).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===M[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}}))}));var A=r("4c0c");Object.keys(A).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===A[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}}))}));var P=r("3455");Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))}));var D=r("4243");Object.keys(D).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===D[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return D[e]}}))}));var j=r("97be");Object.keys(j).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===j[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}}))}));var L=r("8357");Object.keys(L).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))}));var N=r("9bea");Object.keys(N).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===N[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return N[e]}}))}));var U=r("371b");Object.keys(U).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===U[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return U[e]}}))}));var F=r("d751");Object.keys(F).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===F[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return F[e]}}))}));var B=r("6ba6");Object.keys(B).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===B[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return B[e]}}))}));var K=r("ae6f");Object.keys(K).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===K[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return K[e]}}))}));var q=r("511b");Object.keys(q).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===q[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return q[e]}}))}));var V=r("d68a");Object.keys(V).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===V[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return V[e]}}))}));var W=r("8c79");Object.keys(W).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===W[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return W[e]}}))}));var $=r("29b9");Object.keys($).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===$[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return $[e]}}))}));var z=r("2501");Object.keys(z).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===z[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return z[e]}}))}));var G=r("37ee");Object.keys(G).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===G[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return G[e]}}))}));var H=r("95a7");Object.keys(H).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===H[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return H[e]}}))}));var Y=r("fc01");Object.keys(Y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===Y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return Y[e]}}))}));var J=r("256a");Object.keys(J).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===J[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return J[e]}}))}));var X=r("490a");Object.keys(X).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===X[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return X[e]}}))}));var Z=r("e008");Object.keys(Z).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===Z[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return Z[e]}}))}));var Q=r("388d");Object.keys(Q).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===Q[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return Q[e]}}))}))},dcd0:function(e,t,r){"use strict";e.exports=a;var n=r("d6dd"),i=Object.create(r("3a7c"));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r("3fb5"),i.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},dd43:function(e,t,r){"use strict";r.r(t);var n=r("647f");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},de09:function(e,t,r){"use strict";r.r(t);var n=r("4aa5");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},de45:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetKind=void 0;var n=function(e){return e["Room"]="room",e["Account"]="account",e["Modal"]="modal",e}({});t.WidgetKind=n},df06:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".message[data-v-1766477c]{font-weight:400;text-align:center}.message div[data-v-1766477c]{margin:0 auto;padding:.5em 1em;background:rgb(var(--background-total-theme));border:1px solid rgba(var(--neutral-grad-1),.3);border-radius:30px;width:200px;font-size:.8em;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}.iconWrapper[data-v-1766477c]{transform:scale(.5)}.wrapper[data-v-1766477c]{position:absolute;left:0;right:0;top:0;bottom:0;z-index:2900;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:rgba(var(--background-total-theme),.2);border-radius:8px;border-bottom-left-radius:0;border-bottom-right-radius:0;transition:.3s}.wrapper .table[data-v-1766477c]{height:100%}.wrapper .table>div[data-v-1766477c]{vertical-align:middle}#wai-fixedmessageicon[data-v-1766477c]{transition:.3s}#wai-fixedmessageicon.minimized .wrapper[data-v-1766477c]{top:-56px;bottom:51px}#wai-fixedmessageicon.minimized[data-v-1766477c]:not(.active){opacity:0}#wai-fixedmessageicon.active .wrapper[data-v-1766477c]{width:345px;transform:translateX(-301px)}",""]),e.exports=t},df7c:function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e){"string"!==typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,n="/"===a.charAt(0))}return t=r(i(t.split("/"),(function(e){return!!e})),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),a="/"===o(e,-1);return e=r(i(e.split("/"),(function(e){return!!e})),!n).join("/"),e||n||(e="."),e&&a&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var r=e.length-1;r>=0;r--)if(""!==e[r])break;return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=n(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===n&&(i=!1,n=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){r=a+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r("4362"))},df7e:function(e,t,r){"use strict";var n=r("07fa");e.exports=function(e,t){for(var r=n(e),i=new t(r),o=0;o<r;o++)i[o]=e[r-o-1];return i}},dfb9:function(e,t,r){"use strict";var n=r("07fa");e.exports=function(e,t,r){var i=0,o=arguments.length>2?r:n(t),a=new e(o);while(o>i)a[i]=t[i++];return a}},e008:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,r){return t=u(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=h(e,"string");return"symbol"===n(t)?t:String(t)}function h(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleObservable=void 0;var f=function(){function e(t){s(this,e),d(this,"listeners",[]),t&&this.listeners.push(t)}return l(e,[{key:"onUpdate",value:function(e){this.listeners.push(e)}},{key:"update",value:function(e){var t,r=i(this.listeners);try{for(r.s();!(t=r.n()).done;){var n=t.value;n(e)}}catch(o){r.e(o)}finally{r.f()}}},{key:"close",value:function(){this.listeners=[]}}]),e}();t.SimpleObservable=f},e07b:function(e,t,r){var n=r("5a76"),i=r("b5ca"),o=r("69f2"),a=r("8707").Buffer,s=r("7d2a"),c=r("9f9d"),l=r("8be6"),d=a.alloc(128),u={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,r){var n=f(e),i="sha512"===e||"sha384"===e?128:64;t.length>i?t=n(t):t.length<i&&(t=a.concat([t,d],i));for(var o=a.allocUnsafe(i+u[e]),s=a.allocUnsafe(i+u[e]),c=0;c<i;c++)o[c]=54^t[c],s[c]=92^t[c];var l=a.allocUnsafe(i+r+4);o.copy(l,0,0,i),this.ipad1=l,this.ipad2=o,this.opad=s,this.alg=e,this.blocksize=i,this.hash=n,this.size=u[e]}function f(e){function t(t){return o(e).update(t).digest()}function r(e){return(new i).update(e).digest()}return"rmd160"===e||"ripemd160"===e?r:"md5"===e?n:t}function p(e,t,r,n,i){s(r,n),e=l(e,c,"Password"),t=l(t,c,"Salt"),i=i||"sha1";var o=new h(i,e,t.length),d=a.allocUnsafe(n),f=a.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var p=0,v=u[i],m=Math.ceil(n/v),g=1;g<=m;g++){f.writeUInt32BE(g,t.length);for(var y=o.run(f,o.ipad1),b=y,_=1;_<r;_++){b=o.run(b,o.ipad2);for(var w=0;w<v;w++)y[w]^=b[w]}y.copy(d,p),p+=v}return d}h.prototype.run=function(e,t){e.copy(t,this.blocksize);var r=this.hash(t);return r.copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=p},e163:function(e,t,r){"use strict";var n=r("1a2d"),i=r("1626"),o=r("7b0b"),a=r("f772"),s=r("e177"),c=a("IE_PROTO"),l=Object,d=l.prototype;e.exports=s?l.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof l?d:null}},e177:function(e,t,r){"use strict";var n=r("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e1d0:function(e,t,r){"use strict";var n=r("232d");e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},e1d9:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("9523"),i=r.n(n),o=r("396a");class a{static fromStorage(e,t){var r=new a(t);for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}constructor(e){this.deviceId=e,i()(this,"algorithms",[]),i()(this,"keys",{}),i()(this,"verified",o["b"].Unverified),i()(this,"known",!1),i()(this,"unsigned",{}),i()(this,"signatures",{})}toStorage(){return{algorithms:this.algorithms,keys:this.keys,verified:this.verified,known:this.known,unsigned:this.unsigned,signatures:this.signatures}}getFingerprint(){return this.keys["ed25519:"+this.deviceId]}getIdentityKey(){return this.keys["curve25519:"+this.deviceId]}getDisplayName(){return this.unsigned.device_display_name||null}isBlocked(){return this.verified==o["b"].Blocked}isVerified(){return this.verified==o["b"].Verified}isUnverified(){return this.verified==o["b"].Unverified}isKnown(){return!0===this.known}}i()(a,"DeviceVerification",{VERIFIED:o["b"].Verified,UNVERIFIED:o["b"].Unverified,BLOCKED:o["b"].Blocked})},e297:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return f}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("6dde"),c=r("5b5f"),l=r("6608"),d=r("c35f"),u=r("edaf");class h{constructor(e,t,r,n,i){this.client=e,this.userId=t,this.devices=r,this.transactionId=n,this.deviceId=i,a()(this,"request",void 0)}isToDevices(e){if(e.length===this.devices.length){for(var t of e)if(!this.devices.includes(t))return!1;return!0}return!1}static getEventType(e){return e.getType()}static getTransactionId(e){var t=e.getContent();return t&&t.transaction_id}static canCreateRequest(e){return e===l["e"]||e===l["f"]}canCreateRequest(e){return h.canCreateRequest(e)}static validateEvent(e,t){if(e.isCancelled())return c["b"].warn("Ignoring flagged verification request from "+e.getSender()),!1;var r=e.getContent();if(!r)return c["b"].warn("ToDeviceChannel.validateEvent: invalid: no content"),!1;if(!r.transaction_id)return c["b"].warn("ToDeviceChannel.validateEvent: invalid: no transaction_id"),!1;var n=e.getType();if(n===l["e"]){if(!Number.isFinite(r.timestamp))return c["b"].warn("ToDeviceChannel.validateEvent: invalid: no timestamp"),!1;if(e.getSender()===t.getUserId()&&r.from_device==t.getDeviceId())return c["b"].warn("ToDeviceChannel.validateEvent: invalid: from own device"),!1}return l["g"].validateEvent(n,e,t)}getTimestamp(e){var t=e.getContent();return t&&t.timestamp}handleEvent(e,t){var r=arguments,n=this;return i()((function*(){var i=r.length>2&&void 0!==r[2]&&r[2],o=e.getType(),a=e.getContent();if(o===l["e"]||o===l["d"]||o===l["f"]){n.transactionId||(n.transactionId=a.transaction_id);var s=a.from_device;if(!n.deviceId&&n.devices.includes(s)&&(n.deviceId=s),!n.deviceId||n.deviceId!==s){var c=n.completeContent(l["a"],Object(d["b"])(Object(d["f"])()));return n.sendToDevices(l["a"],c,[s])}}var u=t.phase===l["c"]||t.phase===l["b"];yield t.handleEvent(e.getType(),e,i,!1,!1);var h=t.phase===l["c"]||t.phase===l["b"],f=o===l["f"]||o===l["d"];if(f&&!u&&h&&n.deviceId){var p=n.devices.filter(e=>e!==n.deviceId&&e!==n.client.getDeviceId());if(p.length){var v=n.completeContent(l["a"],{code:"m.accepted",reason:"Verification request accepted by another device"});yield n.sendToDevices(l["a"],v,p)}}}))()}completedContentFromEvent(e){return e.getContent()}completeContent(e,t){return t=Object.assign({},t),this.transactionId&&(t.transaction_id=this.transactionId),e!==l["e"]&&e!==l["d"]&&e!==l["f"]||(t.from_device=this.client.getDeviceId()),e===l["e"]&&(t.timestamp=Date.now()),t}send(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e!==l["e"]&&e!==l["f"]||this.transactionId||(this.transactionId=h.makeTransactionId());var r=this.completeContent(e,t);return this.sendCompleted(e,r)}sendCompleted(e,t){var r=this;return i()((function*(){var n;n=e===l["e"]||e===l["a"]&&!r.deviceId?yield r.sendToDevices(e,t,r.devices):yield r.sendToDevices(e,t,[r.deviceId]);var i=new u["b"]({sender:r.client.getUserId(),content:t,type:e});return yield r.request.handleEvent(e,i,!0,!0,!0),n}))()}sendToDevices(e,t,r){var n=this;return i()((function*(){if(r.length){var i=new Map;for(var o of r)i.set(o,t);yield n.client.sendToDevice(e,new Map([[n.userId,i]]))}}))()}static makeTransactionId(){return Object(s["a"])(32)}}class f{constructor(){a()(this,"requestsByUserId",new Map)}getRequest(e){return this.getRequestBySenderAndTxnId(e.getSender(),h.getTransactionId(e))}getRequestByChannel(e){return this.getRequestBySenderAndTxnId(e.userId,e.transactionId)}getRequestBySenderAndTxnId(e,t){var r=this.requestsByUserId.get(e);if(r)return r.get(t)}setRequest(e,t){this.setRequestBySenderAndTxnId(e.getSender(),h.getTransactionId(e),t)}setRequestByChannel(e,t){this.setRequestBySenderAndTxnId(e.userId,e.transactionId,t)}setRequestBySenderAndTxnId(e,t,r){var n=this.requestsByUserId.get(e);n||(n=new Map,this.requestsByUserId.set(e,n)),n.set(t,r)}removeRequest(e){var t=e.getSender(),r=this.requestsByUserId.get(t);r&&(r.delete(h.getTransactionId(e)),0===r.size&&this.requestsByUserId.delete(t))}findRequestInProgress(e,t){var r=this.requestsByUserId.get(e);if(r)for(var n of r.values())if(n.pending&&n.channel.isToDevices(t))return n}getRequestsInProgress(e){var t=this.requestsByUserId.get(e);return t?Array.from(t.values()).filter(e=>e.pending):[]}}},e2c7:function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WidgetApi=void 0;var i=n("faa1"),o=n("1d04"),a=n("fc9b"),s=n("316e"),c=n("97c2"),l=n("ac68"),d=n("2f86"),u=n("7dad"),h=n("2501"),f=n("7a3a");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(O){return{type:"throw",arg:O}}}e.wrap=l;var u={};function h(){}function f(){}function m(){}var g={};c(g,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(R([])));b&&b!==t&&r.call(b,o)&&(g=b);var _=m.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(n,o,a,s){var c=d(e[n],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==p(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return x()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),u;var i=d(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=m,n(_,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new S(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(_),c(_,s,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function m(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(error){return void r(error)}s.done?t(c):Promise.resolve(c).then(n,i)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function S(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function I(e){var t=R();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function O(e,t,r){return t=M(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=A(e,"string");return"symbol"===p(t)?t:String(t)}function A(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function P(e){return new L(e,0)}function D(e){return function(){return new j(e.apply(this,arguments))}}function j(e){var t,r;function n(t,r){try{var o=e[t](r),a=o.value,s=a instanceof L;Promise.resolve(s?a.v:a).then((function(r){if(s){var c="return"===t?"return":"next";if(!a.k||r.done)return n(c,r);r=e[c](r).value}i(o.done?"return":"normal",r)}),(function(e){n("throw",e)}))}catch(c){i("throw",c)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))}))},"function"!=typeof e["return"]&&(this["return"]=void 0)}function L(e,t){this.v=e,this.k=t}j.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},j.prototype.next=function(e){return this._invoke("next",e)},j.prototype["throw"]=function(e){return this._invoke("throw",e)},j.prototype["return"]=function(e){return this._invoke("return",e)};var N=function(e){E(r,e);var t=I(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_(this,r),e=t.call(this),e.clientOrigin=i,O(T(e),"transport",void 0),O(T(e),"capabilitiesFinished",!1),O(T(e),"supportsMSC2974Renegotiate",!1),O(T(e),"requestedCapabilities",[]),O(T(e),"approvedCapabilities",void 0),O(T(e),"cachedClientVersions",void 0),O(T(e),"turnServerWatchers",0),!window.parent)throw new Error("No parent window. This widget doesn't appear to be embedded properly.");return e.transport=new s.PostmessageTransport(o.WidgetApiDirection.FromWidget,n,window.parent,window),e.transport.targetOrigin=i,e.transport.on("message",e.handleMessage.bind(T(e))),e}return S(r,[{key:"hasCapability",value:function(e){return Array.isArray(this.approvedCapabilities)?this.approvedCapabilities.includes(e):this.requestedCapabilities.includes(e)}},{key:"requestCapability",value:function(e){if(this.capabilitiesFinished&&!this.supportsMSC2974Renegotiate)throw new Error("Capabilities have already been negotiated");this.requestedCapabilities.push(e)}},{key:"requestCapabilities",value:function(e){var t=this;e.forEach((function(e){return t.requestCapability(e)}))}},{key:"requestCapabilityForRoomTimeline",value:function(e){this.requestCapability("org.matrix.msc2762.timeline:".concat(e))}},{key:"requestCapabilityToSendState",value:function(e,t){this.requestCapability(h.WidgetEventCapability.forStateEvent(h.EventDirection.Send,e,t).raw)}},{key:"requestCapabilityToReceiveState",value:function(e,t){this.requestCapability(h.WidgetEventCapability.forStateEvent(h.EventDirection.Receive,e,t).raw)}},{key:"requestCapabilityToSendToDevice",value:function(e){this.requestCapability(h.WidgetEventCapability.forToDeviceEvent(h.EventDirection.Send,e).raw)}},{key:"requestCapabilityToReceiveToDevice",value:function(e){this.requestCapability(h.WidgetEventCapability.forToDeviceEvent(h.EventDirection.Receive,e).raw)}},{key:"requestCapabilityToSendEvent",value:function(e){this.requestCapability(h.WidgetEventCapability.forRoomEvent(h.EventDirection.Send,e).raw)}},{key:"requestCapabilityToReceiveEvent",value:function(e){this.requestCapability(h.WidgetEventCapability.forRoomEvent(h.EventDirection.Receive,e).raw)}},{key:"requestCapabilityToSendMessage",value:function(e){this.requestCapability(h.WidgetEventCapability.forRoomMessageEvent(h.EventDirection.Send,e).raw)}},{key:"requestCapabilityToReceiveMessage",value:function(e){this.requestCapability(h.WidgetEventCapability.forRoomMessageEvent(h.EventDirection.Receive,e).raw)}},{key:"requestCapabilityToReceiveRoomAccountData",value:function(e){this.requestCapability(h.WidgetEventCapability.forRoomAccountData(h.EventDirection.Receive,e).raw)}},{key:"requestOpenIDConnectToken",value:function(){var e=this;return new Promise((function(t,r){e.transport.sendComplete(c.WidgetApiFromWidgetAction.GetOpenIDCredentials,{}).then((function(n){var i=n.response;if(i.state===l.OpenIDRequestState.Allowed)t(i);else if(i.state===l.OpenIDRequestState.Blocked)r(new Error("User declined to verify their identity"));else if(i.state===l.OpenIDRequestState.PendingUserConfirmation){var o=function o(a){a.preventDefault();var s=a.detail;s.data.original_request_id===n.requestId&&(s.data.state===l.OpenIDRequestState.Allowed?(t(s.data),e.transport.reply(s,{})):s.data.state===l.OpenIDRequestState.Blocked?(r(new Error("User declined to verify their identity")),e.transport.reply(s,{})):(r(new Error("Invalid state on reply: "+i.state)),e.transport.reply(s,{error:{message:"Invalid state"}})),e.off("action:".concat(c.WidgetApiToWidgetAction.OpenIDCredentials),o))};e.on("action:".concat(c.WidgetApiToWidgetAction.OpenIDCredentials),o)}else r(new Error("Invalid state: "+i.state))}))["catch"](r)}))}},{key:"updateRequestedCapabilities",value:function(){return this.transport.send(c.WidgetApiFromWidgetAction.MSC2974RenegotiateCapabilities,{capabilities:this.requestedCapabilities}).then()}},{key:"sendContentLoaded",value:function(){return this.transport.send(c.WidgetApiFromWidgetAction.ContentLoaded,{}).then()}},{key:"sendSticker",value:function(e){return this.transport.send(c.WidgetApiFromWidgetAction.SendSticker,e).then()}},{key:"setAlwaysOnScreen",value:function(e){return this.transport.send(c.WidgetApiFromWidgetAction.UpdateAlwaysOnScreen,{value:e}).then((function(e){return e.success}))}},{key:"openModalWidget",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.MatrixWidgetType.Custom;return this.transport.send(c.WidgetApiFromWidgetAction.OpenModalWidget,{type:i,url:e,name:t,buttons:r,data:n}).then()}},{key:"closeModalWidget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transport.send(c.WidgetApiFromWidgetAction.CloseModalWidget,e).then()}},{key:"sendRoomEvent",value:function(e,t,r,n,i){return this.sendEvent(e,void 0,t,r,n,i)}},{key:"sendStateEvent",value:function(e,t,r,n,i,o){return this.sendEvent(e,t,r,n,i,o)}},{key:"sendEvent",value:function(e,t,r,n,i,o){return this.transport.send(c.WidgetApiFromWidgetAction.SendEvent,b(b(b(b({type:e,content:r},void 0!==t&&{state_key:t}),void 0!==n&&{room_id:n}),void 0!==i&&{delay:i}),void 0!==o&&{parent_delay_id:o}))}},{key:"updateDelayedEvent",value:function(e,t){return this.transport.send(c.WidgetApiFromWidgetAction.MSC4157UpdateDelayedEvent,{delay_id:e,action:t})}},{key:"sendToDevice",value:function(e,t,r){return this.transport.send(c.WidgetApiFromWidgetAction.SendToDevice,{type:e,encrypted:t,messages:r})}},{key:"readRoomAccountData",value:function(e,t){var r={type:e};return t&&(t.includes(f.Symbols.AnyRoom)?r.room_ids=f.Symbols.AnyRoom:r.room_ids=t),this.transport.send(c.WidgetApiFromWidgetAction.BeeperReadRoomAccountData,r).then((function(e){return e.events}))}},{key:"readRoomEvents",value:function(e,t,r,n,i){var o={type:e,msgtype:r};return void 0!==t&&(o.limit=t),n&&(n.includes(f.Symbols.AnyRoom)?o.room_ids=f.Symbols.AnyRoom:o.room_ids=n),i&&(o.since=i),this.transport.send(c.WidgetApiFromWidgetAction.MSC2876ReadEvents,o).then((function(e){return e.events}))}},{key:"readEventRelations",value:function(){var e=g(v().mark((function e(t,r,n,i,o,s,l,d){var u,h;return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClientVersions();case 2:if(u=e.sent,u.includes(a.UnstableApiVersion.MSC3869)){e.next=5;break}throw new Error("The read_relations action is not supported by the client.");case 5:return h={event_id:t,rel_type:n,event_type:i,room_id:r,to:l,from:s,limit:o,direction:d},e.abrupt("return",this.transport.send(c.WidgetApiFromWidgetAction.MSC3869ReadRelations,h));case 7:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i,o,a,s,c){return e.apply(this,arguments)}return t}()},{key:"readStateEvents",value:function(e,t,r,n){var i={type:e,state_key:void 0===r||r};return void 0!==t&&(i.limit=t),n&&(n.includes(f.Symbols.AnyRoom)?i.room_ids=f.Symbols.AnyRoom:i.room_ids=n),this.transport.send(c.WidgetApiFromWidgetAction.MSC2876ReadEvents,i).then((function(e){return e.events}))}},{key:"setModalButtonEnabled",value:function(e,t){if(e===u.BuiltInModalButtonID.Close)throw new Error("The close button cannot be disabled");return this.transport.send(c.WidgetApiFromWidgetAction.SetModalButtonEnabled,{button:e,enabled:t}).then()}},{key:"navigateTo",value:function(e){if(!e||!e.startsWith("https://matrix.to/#"))throw new Error("Invalid matrix.to URI");return this.transport.send(c.WidgetApiFromWidgetAction.MSC2931Navigate,{uri:e}).then()}},{key:"getTurnServers",value:function(){var e=this;return D(v().mark((function t(){var r,n;return v().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=function(){var t=g(v().mark((function t(n){return v().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.preventDefault(),r(n.detail.data),t.next=4,e.transport.reply(n.detail,{});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.on("action:".concat(c.WidgetApiToWidgetAction.UpdateTurnServers),n),0!==e.turnServerWatchers){t.next=12;break}return t.prev=3,t.next=6,P(e.transport.send(c.WidgetApiFromWidgetAction.WatchTurnServers,{}));case 6:t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](3),e.off("action:".concat(c.WidgetApiToWidgetAction.UpdateTurnServers),n),t.t0;case 12:e.turnServerWatchers++,t.prev=13;case 14:return t.next=17,P(new Promise((function(e){return r=e})));case 17:return t.next=19,t.sent;case 19:t.next=14;break;case 21:if(t.prev=21,e.off("action:".concat(c.WidgetApiToWidgetAction.UpdateTurnServers),n),e.turnServerWatchers--,0!==e.turnServerWatchers){t.next=27;break}return t.next=27,P(e.transport.send(c.WidgetApiFromWidgetAction.UnwatchTurnServers,{}));case 27:return t.finish(21);case 28:case"end":return t.stop()}}),t,null,[[3,8],[13,,21,28]])})))()}},{key:"searchUserDirectory",value:function(){var e=g(v().mark((function e(t,r){var n,i;return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClientVersions();case 2:if(n=e.sent,n.includes(a.UnstableApiVersion.MSC3973)){e.next=5;break}throw new Error("The user_directory_search action is not supported by the client.");case 5:return i={search_term:t,limit:r},e.abrupt("return",this.transport.send(c.WidgetApiFromWidgetAction.MSC3973UserDirectorySearch,i));case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMediaConfig",value:function(){var e=g(v().mark((function e(){var t,r;return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClientVersions();case 2:if(t=e.sent,t.includes(a.UnstableApiVersion.MSC4039)){e.next=5;break}throw new Error("The get_media_config action is not supported by the client.");case 5:return r={},e.abrupt("return",this.transport.send(c.WidgetApiFromWidgetAction.MSC4039GetMediaConfigAction,r));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"uploadFile",value:function(){var e=g(v().mark((function e(t){var r,n;return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClientVersions();case 2:if(r=e.sent,r.includes(a.UnstableApiVersion.MSC4039)){e.next=5;break}throw new Error("The upload_file action is not supported by the client.");case 5:return n={file:t},e.abrupt("return",this.transport.send(c.WidgetApiFromWidgetAction.MSC4039UploadFileAction,n));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadFile",value:function(){var e=g(v().mark((function e(t){var r,n;return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClientVersions();case 2:if(r=e.sent,r.includes(a.UnstableApiVersion.MSC4039)){e.next=5;break}throw new Error("The download_file action is not supported by the client.");case 5:return n={content_uri:t},e.abrupt("return",this.transport.send(c.WidgetApiFromWidgetAction.MSC4039DownloadFileAction,n));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"start",value:function(){var e=this;this.transport.start(),this.getClientVersions().then((function(t){t.includes(a.UnstableApiVersion.MSC2974)&&(e.supportsMSC2974Renegotiate=!0)}))}},{key:"handleMessage",value:function(e){var t=new CustomEvent("action:".concat(e.detail.action),{detail:e.detail,cancelable:!0});if(this.emit("action:".concat(e.detail.action),t),!t.defaultPrevented)switch(e.detail.action){case c.WidgetApiToWidgetAction.SupportedApiVersions:return this.replyVersions(e.detail);case c.WidgetApiToWidgetAction.Capabilities:return this.handleCapabilities(e.detail);case c.WidgetApiToWidgetAction.UpdateVisibility:return this.transport.reply(e.detail,{});case c.WidgetApiToWidgetAction.NotifyCapabilities:return this.transport.reply(e.detail,{});default:return this.transport.reply(e.detail,{error:{message:"Unknown or unsupported action: "+e.detail.action}})}}},{key:"replyVersions",value:function(e){this.transport.reply(e,{supported_versions:a.CurrentApiVersions})}},{key:"getClientVersions",value:function(){var e=this;return Array.isArray(this.cachedClientVersions)?Promise.resolve(this.cachedClientVersions):this.transport.send(c.WidgetApiFromWidgetAction.SupportedApiVersions,{}).then((function(t){return e.cachedClientVersions=t.supported_versions,t.supported_versions}))["catch"]((function(e){return console.warn("non-fatal error getting supported client versions: ",e),[]}))}},{key:"handleCapabilities",value:function(e){var t=this;return this.capabilitiesFinished?this.transport.reply(e,{error:{message:"Capability negotiation already completed"}}):this.getClientVersions().then((function(r){return r.includes(a.UnstableApiVersion.MSC2871)?t.once("action:".concat(c.WidgetApiToWidgetAction.NotifyCapabilities),(function(e){t.approvedCapabilities=e.detail.data.approved,t.emit("ready")})):t.emit("ready"),t.capabilitiesFinished=!0,t.transport.reply(e,{capabilities:t.requestedCapabilities})}))}}]),r}(i.EventEmitter);r.WidgetApi=N},e330:function(e,t,r){"use strict";var n=r("40d5"),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);e.exports=n?a:function(e){return function(){return o.apply(e,arguments)}}},e372:function(e,t,r){t=e.exports=r("ad71"),t.Stream=t,t.Readable=t,t.Writable=r("dc14"),t.Duplex=r("b19a"),t.Transform=r("27bf"),t.PassThrough=r("780f"),t.finished=r("903c"),t.pipeline=r("5d1c")},e391:function(e,t,r){"use strict";var n=r("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},e508:function(t,r,n){"use strict";(function(t){n.d(r,"a",(function(){return K}));var i=n("252c"),o=n("85fe"),a=n("ed83"),s=n.n(a),c=(n("a026"),{itemsLimit:1e3});const l={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function d(){return this.items.length&&"object"!==typeof this.items[0]}let u=!1;if("undefined"!==typeof window){u=!1;try{var h=Object.defineProperty({},"passive",{get(){u=!0}});window.addEventListener("test",null,h)}catch(e){}}let f=0;var p={name:"RecycleScroller",components:{ResizeObserver:i["a"]},directives:{ObserveVisibility:o["a"]},props:{...l,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(null===this.itemSize){const e={"-1":{accumulator:0}},t=this.items,r=this.sizeField,n=this.minItemSize;let i,o=1e4,a=0;for(let s=0,c=t.length;s<c;s++)i=t[s][r]||n,i<o&&(o=i),a+=i,e[s]={accumulator:a,size:i};return this.$_computedMinItemSize=o,e}return[]},simpleArray:d},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;"number"===typeof e&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeDestroy(){this.removeListeners()},methods:{addView(e,t,r,n,i){const o={item:r,position:0},a={id:f++,index:t,used:!0,key:n,type:i};return Object.defineProperty(o,"nr",{configurable:!1,value:a}),e.push(o),o},unuseView(e,t=!1){const r=this.$_unusedViews,n=e.nr.type;let i=r.get(n);i||(i=[],r.set(n,i)),i.push(e),t||(e.nr.used=!1,e.position=-9999,this.$_views.delete(e.nr.key))},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:e}=this.updateVisibleItems(!1,!0);e||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,100))}))},handleVisibilityChange(e,t){this.ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const r=this.itemSize,n=this.gridItems||1,i=this.itemSecondarySize||r,o=this.$_computedMinItemSize,a=this.typeField,s=this.simpleArray?null:this.keyField,l=this.items,d=l.length,u=this.sizes,h=this.$_views,f=this.$_unusedViews,p=this.pool;let v,m,g,y,b,_;if(d)if(this.$_prerender)v=y=0,m=b=Math.min(this.prerender,l.length),g=null;else{const e=this.getScroll();if(t){let t=e.start-this.$_lastUpdateScrollPosition;if(t<0&&(t=-t),null===r&&t<o||t<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=e.start;const i=this.buffer;e.start-=i,e.end+=i;let a=0;if(this.$refs.before&&(a=this.$refs.before.scrollHeight,e.start-=a),this.$refs.after){const t=this.$refs.after.scrollHeight;e.end+=t}if(null===r){let t,r,n=0,i=d-1,o=~~(d/2);do{r=o,t=u[o].accumulator,t<e.start?n=o:o<d-1&&u[o+1].accumulator>e.start&&(i=o),o=~~((n+i)/2)}while(o!==r);for(o<0&&(o=0),v=o,g=u[d-1].accumulator,m=o;m<d&&u[m].accumulator<e.end;m++);for(-1===m?m=l.length-1:(m++,m>d&&(m=d)),y=v;y<d&&a+u[y].accumulator<e.start;y++);for(b=y;b<d&&a+u[b].accumulator<e.end;b++);}else{v=~~(e.start/r*n);const t=v%n;v-=t,m=Math.ceil(e.end/r*n),y=Math.max(0,Math.floor((e.start-a)/r*n)),b=Math.floor((e.end-a)/r*n),v<0&&(v=0),m>d&&(m=d),y<0&&(y=0),b>d&&(b=d),g=Math.ceil(d/n)*r}}else v=m=y=b=g=0;m-v>c.itemsLimit&&this.itemsLimitError(),this.totalSize=g;const w=v<=this.$_endIndex&&m>=this.$_startIndex;if(this.$_continuous!==w){if(w){h.clear(),f.clear();for(let e=0,t=p.length;e<t;e++)_=p[e],this.unuseView(_)}this.$_continuous=w}else if(w)for(let c=0,T=p.length;c<T;c++)_=p[c],_.nr.used&&(e&&(_.nr.index=l.indexOf(_.item)),(-1===_.nr.index||_.nr.index<v||_.nr.index>=m)&&this.unuseView(_));const S=w?null:new Map;let E,k,I,C;for(let c=v;c<m;c++){E=l[c];const e=s?E[s]:E;if(null==e)throw new Error(`Key is ${e} on item (keyField is '${s}')`);_=h.get(e),r||u[c].size?(_?(_.nr.used=!0,_.item=E):(c===l.length-1&&this.$emit("scroll-end"),0===c&&this.$emit("scroll-start"),k=E[a],I=f.get(k),w?I&&I.length?(_=I.pop(),_.item=E,_.nr.used=!0,_.nr.index=c,_.nr.key=e,_.nr.type=k):_=this.addView(p,c,E,e,k):(C=S.get(k)||0,(!I||C>=I.length)&&(_=this.addView(p,c,E,e,k),this.unuseView(_,!0),I=f.get(k)),_=I[C],_.item=E,_.nr.used=!0,_.nr.index=c,_.nr.key=e,_.nr.type=k,S.set(k,C+1),C++),h.set(e,_)),null===r?(_.position=u[c-1].accumulator,_.offset=0):(_.position=Math.floor(c/n)*r,_.offset=c%n*i)):_&&this.unuseView(_)}return this.$_startIndex=v,this.$_endIndex=m,this.emitUpdate&&this.$emit("update",v,m,y,b),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:w}},getListenerTarget(){let e=s()(this.$el);return!window.document||e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll(){const{$el:e,direction:t}=this,r="vertical"===t;let n;if(this.pageMode){const t=e.getBoundingClientRect(),i=r?t.height:t.width;let o=-(r?t.top:t.left),a=r?window.innerHeight:window.innerWidth;o<0&&(a+=o,o=0),o+a>i&&(a=i-o),n={start:o,end:o+a}}else n=r?{start:e.scrollTop,end:e.scrollTop+e.clientHeight}:{start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return n},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!u&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;t=null===this.itemSize?e>0?this.sizes[e-1].accumulator:0:Math.floor(e/this.gridItems)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t="vertical"===this.direction?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let r,n,i;if(this.pageMode){const o=s()(this.$el),a="HTML"===o.tagName?0:o[t.scroll],c=o.getBoundingClientRect(),l=this.$el.getBoundingClientRect(),d=l[t.start]-c[t.start];r=o,n=t.scroll,i=e+a+d}else r=this.$el,n=t.scroll,i=e;r[n]=i},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};function v(e,t,r,n,i,o,a,s,c,l){"boolean"!==typeof a&&(c=s,s=a,a=!1);const d="function"===typeof r?r.options:r;let u;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),n&&(d._scopeId=n),o?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=u):t&&(u=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),u)if(d.functional){const e=d.render;d.render=function(t,r){return u.call(r),e(t,r)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,u):[u]}return r}const m=p;var g=function(){var e,t,r=this,n=r.$createElement,i=r._self._c||n;return i("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:r.handleVisibilityChange,expression:"handleVisibilityChange"}],staticClass:"vue-recycle-scroller",class:(e={ready:r.ready,"page-mode":r.pageMode},e["direction-"+r.direction]=!0,e),on:{"&scroll":function(e){return r.handleScroll.apply(null,arguments)}}},[r.$slots.before?i("div",{ref:"before",staticClass:"vue-recycle-scroller__slot"},[r._t("before")],2):r._e(),r._v(" "),i(r.listTag,{ref:"wrapper",tag:"component",staticClass:"vue-recycle-scroller__item-wrapper",class:r.listClass,style:(t={},t["vertical"===r.direction?"minHeight":"minWidth"]=r.totalSize+"px",t)},[r._l(r.pool,(function(e){return i(r.itemTag,r._g({key:e.nr.id,tag:"component",staticClass:"vue-recycle-scroller__item-view",class:[r.itemClass,{hover:!r.skipHover&&r.hoverKey===e.nr.key}],style:r.ready?{transform:"translate"+("vertical"===r.direction?"Y":"X")+"("+e.position+"px) translate"+("vertical"===r.direction?"X":"Y")+"("+e.offset+"px)",width:r.gridItems?("vertical"===r.direction&&r.itemSecondarySize||r.itemSize)+"px":void 0,height:r.gridItems?("horizontal"===r.direction&&r.itemSecondarySize||r.itemSize)+"px":void 0}:null},r.skipHover?{}:{mouseenter:function(){r.hoverKey=e.nr.key},mouseleave:function(){r.hoverKey=null}}),[r._t("default",null,{item:e.item,index:e.nr.index,active:e.nr.used})],2)})),r._v(" "),r._t("empty")],2),r._v(" "),r.$slots.after?i("div",{ref:"after",staticClass:"vue-recycle-scroller__slot"},[r._t("after")],2):r._e(),r._v(" "),i("ResizeObserver",{on:{notify:r.handleResize}})],1)},y=[];g._withStripped=!0;const b=void 0,_=void 0,w=void 0,S=!1,E=v({render:g,staticRenderFns:y},b,m,_,S,w,!1,void 0,void 0,void 0);var k={name:"DynamicScroller",components:{RecycleScroller:E},provide(){return"undefined"!==typeof ResizeObserver&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e))for(const t of e)if(t.target){const e=new CustomEvent("resize",{detail:{contentRect:t.contentRect}});t.target.dispatchEvent(e)}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...l,minItemSize:{type:[Number,String],required:!0}},data(){return{vscrollData:{active:!0,sizes:{},validSizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:d,itemsWithSize(){const e=[],{items:t,keyField:r,simpleArray:n}=this,i=this.vscrollData.sizes,o=t.length;for(let a=0;a<o;a++){const o=t[a],s=n?a:o[r];let c=i[s];"undefined"!==typeof c||this.$_undefinedMap[s]||(c=0),e.push({item:o,id:s,size:c})}return e},listeners(){const e={};for(const t in this.$listeners)"resize"!==t&&"visible"!==t&&(e[t]=this.$listeners[t]);return e}},watch:{items(){this.forceUpdate(!1)},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const r=this.$el.scrollTop;let n=0,i=0;const o=Math.min(e.length,t.length);for(let s=0;s<o;s++){if(n>=r)break;n+=t[s].size||this.minItemSize,i+=e[s].size||this.minItemSize}const a=i-n;0!==a&&(this.$el.scrollTop+=a)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={}},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},methods:{onScrollerResize(){const e=this.$refs.scroller;e&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!0){(e||this.simpleArray)&&(this.vscrollData.validSizes={}),this.$emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t){const r=this.simpleArray?null!=t?t:this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[r]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,0===this.$_undefinedSizes?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};const I=k;var C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("RecycleScroller",e._g(e._b({ref:"scroller",attrs:{items:e.itemsWithSize,"min-item-size":e.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},on:{resize:e.onScrollerResize,visible:e.onScrollerVisible},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item,n=t.index,i=t.active;return[e._t("default",null,null,{item:r.item,index:n,active:i,itemWithSize:r})]}}],null,!0)},"RecycleScroller",e.$attrs,!1),e.listeners),[e._v(" "),r("template",{slot:"before"},[e._t("before")],2),e._v(" "),r("template",{slot:"after"},[e._t("after")],2),e._v(" "),r("template",{slot:"empty"},[e._t("empty")],2)],2)},T=[];C._withStripped=!0;const R=void 0,x=void 0,O=void 0,M=!1,A=v({render:C,staticRenderFns:T},R,I,x,M,O,!1,void 0,void 0,void 0);var P={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.item.hasOwnProperty(this.vscrollData.keyField))return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.validSizes[this.id]&&this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(){this.size||this.onDataUpdate()},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$on("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$on("vscroll:update-size",this.onVscrollUpdateSize)}},mounted(){this.vscrollData.active&&(this.updateSize(),this.observeSize())},beforeDestroy(){this.vscrollParent.$off("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$off("vscroll:update-size",this.onVscrollUpdateSize),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),this.$_forceNextVScrollUpdate!==this.id&&!e&&this.size||this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const e=this.$el.offsetWidth,t=this.$el.offsetHeight;this.applySize(e,t)}this.$_pendingSizeUpdate=null})},applySize(e,t){const r=~~("vertical"===this.vscrollParent.direction?t:e);r&&this.size!==r&&(this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.$set(this.vscrollData.sizes,this.id,r),this.$set(this.vscrollData.validSizes,this.id,!0),this.emitResize&&this.$emit("resize",this.id))},observeSize(){this.vscrollResizeObserver&&this.$el.parentNode&&(this.vscrollResizeObserver.observe(this.$el.parentNode),this.$el.parentNode.addEventListener("resize",this.onResize))},unobserveSize(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.unobserve(this.$el.parentNode),this.$el.parentNode.removeEventListener("resize",this.onResize))},onResize(e){const{width:t,height:r}=e.detail.contentRect;this.applySize(t,r)}},render(e){return e(this.tag,this.$slots.default)}};const D=P,j=void 0,L=void 0,N=void 0,U=void 0,F=v({},j,D,L,U,N,!1,void 0,void 0,void 0);function B(e,t){e.component(t+"recycle-scroller",E),e.component(t+"RecycleScroller",E),e.component(t+"dynamic-scroller",A),e.component(t+"DynamicScroller",A),e.component(t+"dynamic-scroller-item",F),e.component(t+"DynamicScrollerItem",F)}const K={version:"1.1.2",install(e,t){const r=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(const n in r)"undefined"!==typeof r[n]&&(c[n]=r[n]);r.installComponents&&B(e,r.componentsPrefix)}};let q=null;"undefined"!==typeof window?q=window.Vue:"undefined"!==typeof t&&(q=t.Vue),q&&q.use(K)}).call(this,n("c8ba"))},e50d:function(e,t,r){r("d9e2");var n=r("7037")["default"];function i(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},e54e:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".eventMember[data-v-3ddb1d8e]{display:flex;align-items:center;padding-left:.25em}.eventMember .iconWrapper[data-v-3ddb1d8e]{width:33px;height:33px;margin-right:.5em}.eventMember .labelwrapper[data-v-3ddb1d8e]{line-height:.9em;padding-bottom:7px;max-width:80%}.eventMember .labelwrapper span[data-v-3ddb1d8e]{vertical-align:middle}",""]),e.exports=t},e5a3:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".manyavatars[data-v-4dda7508]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.manyavatars .useravatar[data-v-4dda7508]{margin:.125em;width:44px;height:44px}.swiperWrapper[data-v-4dda7508]{padding-bottom:0;display:flex;overflow-x:scroll;scrollbar-width:none}.swiperWrapper[data-v-4dda7508]::-webkit-scrollbar{width:0!important;height:0!important}.swiperWrapperFlex[data-v-4dda7508]{display:flex;flex-wrap:nowrap;height:100%;align-items:center}.swiperWrapperFlex .imageSwiper[data-v-4dda7508]{width:33px;min-width:33px}.userwrapper[data-v-4dda7508]{border-radius:50%}.userinfopicwrapper[data-v-4dda7508]{padding-bottom:100%;position:relative;background:none;margin:0 auto;border-radius:50%;overflow:hidden}.userinfopicwrapper .userwrapper[data-v-4dda7508]{width:50%}.threeAvatars[data-v-4dda7508]{font-size:.5em}.threeAvatars .userwrapper[data-v-4dda7508]:first-child{position:absolute;left:50%;top:0;transform:translate(-50%,6.5%)}.threeAvatars .userwrapper[data-v-4dda7508]:nth-child(2){position:absolute;right:0;bottom:0;transform:translateY(-6.5%)}.threeAvatars .userwrapper[data-v-4dda7508]:nth-child(3){position:absolute;left:0;bottom:0;transform:translateY(-6.5%)}.twoAvatars[data-v-4dda7508]{font-size:.5em}.twoAvatars .userwrapper[data-v-4dda7508]:first-child{position:absolute;top:0;left:0;transform:translate(6.5%,6.5%)}.twoAvatars .userwrapper[data-v-4dda7508]:last-child{position:absolute;right:0;bottom:0;transform:translate(-6.5%,-6.5%)}.fourAvatars[data-v-4dda7508]{font-size:.5em}.fourAvatars .userwrapper[data-v-4dda7508]:first-child{position:absolute;top:0;left:0}.fourAvatars .userwrapper[data-v-4dda7508]:nth-child(2){position:absolute;right:0;top:0}.fourAvatars .userwrapper[data-v-4dda7508]:nth-child(3){position:absolute;left:0;bottom:0}.fourAvatars .userwrapper[data-v-4dda7508]:nth-child(4){position:absolute;right:0;bottom:0}.fourMore[data-v-4dda7508]{background:none}.fourMore[data-v-4dda7508],.imageSwiper[data-v-4dda7508]{margin:0 auto}.imageSwiper img[data-v-4dda7508]{display:block;border-radius:50%;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.invited[data-v-4dda7508]{opacity:.5}",""]),e.exports=t},e5cb:function(e,t,r){"use strict";var n=r("d066"),i=r("1a2d"),o=r("9112"),a=r("3a9b"),s=r("d2bb"),c=r("e893"),l=r("aeb0"),d=r("7156"),u=r("e391"),h=r("ab36"),f=r("6f19"),p=r("83ab"),v=r("c430");e.exports=function(e,t,r,m){var g="stackTraceLimit",y=m?2:1,b=e.split("."),_=b[b.length-1],w=n.apply(null,b);if(w){var S=w.prototype;if(!v&&i(S,"cause")&&delete S.cause,!r)return w;var E=n("Error"),k=t((function(e,t){var r=u(m?t:e,void 0),n=m?new w(e):new w;return void 0!==r&&o(n,"message",r),f(n,k,n.stack,2),this&&a(S,this)&&d(n,this,k),arguments.length>y&&h(n,arguments[y]),n}));if(k.prototype=S,"Error"!==_?s?s(k,E):c(k,E,{name:!0}):p&&g in w&&(l(k,w,g),l(k,w,"prepareStackTrace")),c(k,w),!v)try{S.name!==_&&o(S,"name",_),S.constructor=k}catch(error){}return k}}},e5ce:function(e,t,r){var n=r("afc1");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("816efd4a",n,e)}},e63a:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"",""]),e.exports=t},e683:function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,r){var n=r("315c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("4258513a",n,e)}},e7e1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("ffd9"),i=new Uint8Array([1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47]),o=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),a=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]);let s,c,l,d,u,h,f,p,v=!1;class m{constructor(e){if(v||g(),16!==e.length&&32!==e.length)throw new Error(`Miscreant: invalid key length: ${e.length} (expected 16 or 32 bytes)`);this._encKey=S(e),this._emptyPromise=Promise.resolve(this)}clear(){return this._encKey&&n.wipe(this._encKey),this}encryptBlock(e){const t=e.data,r=e.data;let n=y(t,0),i=y(t,4),a=y(t,8),u=y(t,12);n^=this._encKey[0],i^=this._encKey[1],a^=this._encKey[2],u^=this._encKey[3];let h=0,f=0,p=0,v=0;const m=this._encKey.length/4-2;let g=4;for(let o=0;o<m;o++)h=this._encKey[g+0]^s[n>>>24&255]^c[i>>>16&255]^l[a>>>8&255]^d[255&u],f=this._encKey[g+1]^s[i>>>24&255]^c[a>>>16&255]^l[u>>>8&255]^d[255&n],p=this._encKey[g+2]^s[a>>>24&255]^c[u>>>16&255]^l[n>>>8&255]^d[255&i],v=this._encKey[g+3]^s[u>>>24&255]^c[n>>>16&255]^l[i>>>8&255]^d[255&a],g+=4,n=h,i=f,a=p,u=v;return n=o[h>>>24]<<24|o[f>>>16&255]<<16|o[p>>>8&255]<<8|o[255&v],i=o[f>>>24]<<24|o[p>>>16&255]<<16|o[v>>>8&255]<<8|o[255&h],a=o[p>>>24]<<24|o[v>>>16&255]<<16|o[h>>>8&255]<<8|o[255&f],u=o[v>>>24]<<24|o[h>>>16&255]<<16|o[f>>>8&255]<<8|o[255&p],n^=this._encKey[g+0],i^=this._encKey[g+1],a^=this._encKey[g+2],u^=this._encKey[g+3],b(n,r,0),b(i,r,4),b(a,r,8),b(u,r,12),this._emptyPromise}}function g(){const e=283;function t(t,r){let n=t,i=r,o=0;for(let a=1;a<256&&0!==i;a<<=1)0!==(i&a)&&(o^=n,i^=a),n<<=1,0!==(256&n)&&(n^=e);return o}const r=e=>e<<24|e>>>8;s=new Uint32Array(256),c=new Uint32Array(256),l=new Uint32Array(256),d=new Uint32Array(256);for(let n=0;n<256;n++){const e=o[n];let i=t(e,2)<<24|e<<16|e<<8|t(e,3);s[n]=i,i=r(i),c[n]=i,i=r(i),l[n]=i,i=r(i),d[n]=i,i=r(i)}u=new Uint32Array(256),h=new Uint32Array(256),f=new Uint32Array(256),p=new Uint32Array(256);for(let n=0;n<256;n++){const e=a[n];let i=t(e,14)<<24|t(e,9)<<16|t(e,13)<<8|t(e,11);u[n]=i,i=r(i),h[n]=i,i=r(i),f[n]=i,i=r(i),p[n]=i,i=r(i)}v=!0}function y(e,t=0){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function b(e,t=new Uint8Array(4),r=0){return t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function _(e){return o[e>>>24&255]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e]}function w(e){return e<<8|e>>>24}function S(e){const t=new Uint32Array(e.length+28),r=e.length/4|0,n=t.length;for(let i=0;i<r;i++)t[i]=y(e,4*i);for(let o=r;o<n;o++){let e=t[o-1];o%r===0?e=_(w(e))^i[o/r-1]<<24:r>6&&o%r===4&&(e=_(e)),t[o]=t[o-r]^e}return t}t.default=m},e7f6:function(t,r,n){"use strict";(function(t){var i=n("ade3"),o=(n("14d9"),n("4f5a")),a=n("3139");class s extends o["a"]{constructor(...e){super(...e),Object(i["a"])(this,"matrixCredentials",(function(){var e=bitcoin.crypto.sha256(bitcoin.crypto.sha256(t.from(this.credentials.privateKey))).toString("hex");return Promise.resolve({address:this.credentials.address,password:e,type:"m.login.password",user:this.credentials.address,sessionId:"",username:this.credentials.address.toLowerCase()})})),Object(i["a"])(this,"path33",(function(e){return"m/33'/0'/0'/"+e+"'"}))}initKeysProcess(){return this.initKeys().catch(e=>e&&_.isNumber(e)?new Promise((t,r)=>{this.keysupdatetimeout&&clearTimeout(this.keysupdatetimeout),this.keysupdatetimeout=setTimeout((function(){initKeysProcess().then(t).catch(r)}),e)}):Promise.reject(e))}initKeys(){return this.state?!this.userinfo.name||this.userinfo.deleted||this.userinfo.keys&&this.userinfo.keys.length?Promise.resolve():(window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.platform.sdk.keys.init().then(e=>"exist"==e||"processing"==e?Promise.reject(6e4):Promise.reject(e)).catch(e=>Promise.reject()),Promise.reject()):Promise.reject()}generateKeysLS(t,r){var n={};try{n=JSON.parse(localStorage["wifkeya"]||"{}")}catch(e){}n.address!=r&&(n={}),n.address=r,n.storage||(n.storage=[]);var{ckeys:i}=this.generateKeys(t,n.storage);return localStorage["wifkeya"]=JSON.stringify(n),i}generateKeys(e,t){var r=[];if(t||(t=[]),e)for(var n=1;n<13;n++){let i=t[n-1]||bitcoin.bip32.fromSeed(e).derivePath(this.path33(n)).toWIF();t[n-1]=i;let o=bitcoin.ECPair.fromWIF(i),a={keyPair:o},s=new Proxy(a,{get:(e,t)=>(a.pair||(a.pair=e.keyPair,a.public=e.keyPair.publicKey.toString("hex"),a.private=e.keyPair.privateKey),a[t])});r.push(s)}return{ckeys:r,storage:t}}generateprivate(){}checkCredentials(){if(!this.credentials)return Promise.reject("unauthorized");var r=a["a"].hexDecode(this.credentials.address);try{var n=t.from(this.credentials.privateKey,"hex");setTimeout(()=>{this.private=this.generateKeysLS(n,r)},1e3)}catch(e){return this.state=0,Promise.reject("unauthorized")}return this.core.api.pocketnet.userStateMe(r).then(e=>(this.state=1,Promise.resolve(this.state))).catch(e=>Promise.reject("unknown"))}convertUser(e){return{image:e.i||"",name:e.name?decodeURI(e.name):"",id:a["a"].hexEncode(e.address),source:e,keys:_.filter((e.k||"").split(","),(function(e){return e})),deleted:e.deleted,nocache:e.nocache||!1}}searchContacts(e){this.core;return this.core.api.pocketnet.search(e).then(e=>(e=_.map(e,e=>(e.nocache=!0,this.convertUser(e))),this.setUsersInfo(e),Promise.resolve(e)))}userInfo(e){return this.usersInfo(this.credentials.address,!1,e).then(e=>(this.userinfo=e[0],Promise.resolve(e[0])))}usersInfo(e,t,r){return _.isArray(e)||(e=[e]),t||(e=_.map(e,(function(e){return a["a"].hexDecode(e)}))),this.core.api.pocketnet.userInfoCached(e,r).then(e=>(e=_.map(e,e=>this.convertUser(e)),this.setUsersInfo(e,r),Promise.resolve(e)))}signature(r,n){r||(r="pocketnetproxy"),n||(n=360);try{var i=bitcoin.ECPair.fromPrivateKey(t.from(this.credentials.privateKey,"hex"));const e=(new Date).toISOString();var o="date="+e+",exp="+n+",s="+a["a"].hexEncode(r),s=i.sign(bitcoin.crypto.sha256(t.from(o))),c={nonce:o,signature:s.toString("hex"),pubkey:i.publicKey.toString("hex"),address:this.credentials.address,v:1}}catch(e){return null}return c}getContacts(){return this.state?Promise.resolve([]):Promise.reject("unauthorized")}}r["a"]=s}).call(this,n("b639").Buffer)},e893:function(e,t,r){"use strict";var n=r("1a2d"),i=r("56ef"),o=r("06cf"),a=r("9bf2");e.exports=function(e,t,r){for(var s=i(t),c=a.f,l=o.f,d=0;d<s.length;d++){var u=s[d];n(e,u)||r&&n(r,u)||c(e,u,l(t,u))}}},e8b5:function(e,t,r){"use strict";var n=r("c6b6");e.exports=Array.isArray||function(e){return"Array"===n(e)}},e9dd:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["NOT_SENT"]="not_sent",e["ENCRYPTING"]="encrypting",e["SENDING"]="sending",e["QUEUED"]="queued",e["SENT"]="sent",e["CANCELLED"]="cancelled"}(n||(n={}))},ea01:function(t,r,n){"use strict";n.d(r,"a",(function(){return F}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("5b5f"),l=n("afe6"),d=n("936a"),u=n("299a"),h=n("866a"),f=n("2f36"),p=n("60af"),v=n("fc97"),m=n("b83f"),g=e=>"livekit"===e.type&&"focus_selection"in e,y=(e,t)=>{var r,n="Malformed session membership event: ";return"string"!==typeof e.device_id&&t.push(n+"device_id must be string"),"string"!==typeof e.call_id&&t.push(n+"call_id must be string"),"string"!==typeof e.application&&t.push(n+"application must be a string"),"string"!==typeof(null===(r=e.focus_active)||void 0===r?void 0:r.type)&&t.push(n+"focus_active.type must be a string"),Array.isArray(e.foci_preferred)||t.push(n+"foci_preferred must be an array"),e.created_ts&&"number"!==typeof e.created_ts&&t.push(n+"created_ts must be number"),e.scope&&"string"!==typeof e.scope&&t.push(n+"scope must be string"),0===t.length},b=e=>"membershipID"in e,_=(e,t)=>{var r="Malformed legacy rtc membership event: ";return"expires"in e||"expires_ts"in e||t.push(r+"expires_ts or expires must be present"),"expires"in e&&"number"!==typeof e.expires&&t.push(r+"expires must be numeric"),"expires_ts"in e&&"number"!==typeof e.expires_ts&&t.push(r+"expires_ts must be numeric"),"string"!==typeof e.device_id&&t.push(r+"device_id must be string"),"string"!==typeof e.call_id&&t.push(r+"call_id must be string"),"string"!==typeof e.application&&t.push(r+"application must be a string"),"string"!==typeof e.membershipID&&t.push(r+"membershipID must be a string"),e.created_ts&&"number"!==typeof e.created_ts&&t.push(r+"created_ts must be number"),e.scope&&"string"!==typeof e.scope&&t.push(r+"scope must be string"),0===t.length};class w{static equal(e,t){return Object(m["f"])(e.membershipData,t.membershipData)}constructor(e,t){this.parentEvent=e,s()(this,"membershipData",void 0);var r=[],n=[];if(!y(t,r)&&!_(t,n))throw Error("unknown CallMembership data. Does not match legacy call.member (".concat(n.join(" & "),") events nor MSC4143 (").concat(r.join(" & "),")"));this.membershipData=t}get sender(){return this.parentEvent.getSender()}get callId(){return this.membershipData.call_id}get deviceId(){return this.membershipData.device_id}get application(){return this.membershipData.application}get scope(){return this.membershipData.scope}get membershipID(){return b(this.membershipData)?this.membershipData.membershipID:this.createdTs().toString()}createdTs(){var e;return null!==(e=this.membershipData.created_ts)&&void 0!==e?e:this.parentEvent.getTs()}getAbsoluteExpiry(){if(b(this.membershipData))return"expires"in this.membershipData?this.createdTs()+this.membershipData.expires:this.membershipData.expires_ts}getLocalExpiry(){if(b(this.membershipData)){if("expires"in this.membershipData){var e=this.parentEvent.getTs()-this.createdTs(),t=this.parentEvent.localTimestamp-e;return t+this.membershipData.expires}return this.membershipData.expires_ts}}getMsUntilExpiry(){if(b(this.membershipData))return this.getAbsoluteExpiry()-Date.now()}isExpired(){return!!b(this.membershipData)&&this.getMsUntilExpiry()<=0}getPreferredFoci(){var e;return b(this.membershipData)?null!==(e=this.membershipData.foci_active)&&void 0!==e?e:[]:this.membershipData.foci_preferred}getFocusSelection(){if(b(this.membershipData))return"oldest_membership";var e=this.membershipData.focus_active;return g(e)?e.focus_selection:void 0}}var S=n("6dde"),E=n("da1e"),k=n("3925");function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T,R,x=36e5,O=12e4,M=3e3,A=3e3,P=3e3,D=5e3,j=(e,t)=>"".concat(e,":").concat(t),L=e=>j(e.sender,e.deviceId);function N(e,t){return e===t||!!e&&!!t&&e.length===t.length&&e.every((e,r)=>e===t[r])}(function(e){e["MembershipsChanged"]="memberships_changed",e["JoinStateChanged"]="join_state_changed",e["EncryptionKeyChanged"]="encryption_key_changed"})(T||(T={}));class U extends d["b"]{get callId(){return this._callId}static callMembershipsForRoom(t){var r=t.getLiveTimeline().getState(f["b"].FORWARDS);if(!r)throw c["b"].warn("Couldn't get state for room "+t.roomId),new Error("Could't get state for room "+t.roomId);var n=r.getStateEvents(p["b"].GroupCallMemberPrefix),i=[];for(var o of n){var a=o.getContent(),s=Object.keys(a).length;if(0!==s){var l=[];if(s>1&&"focus_active"in a)l.push(a);else if(1===s&&"memberships"in a){if(!Array.isArray(a["memberships"])){c["b"].warn("Malformed member event from ".concat(o.getSender(),": memberships is not an array"));continue}l=a["memberships"]}if(0!==l.length)for(var d of l)try{var u,h=new w(o,d);if(""!==h.callId||"m.room"!==h.scope){c["b"].info("Ignoring user-scoped call");continue}if(h.isExpired()){c["b"].info("Ignoring expired device membership ".concat(h.sender,"/").concat(h.deviceId));continue}if(!t.hasMembershipState(null!==(u=h.sender)&&void 0!==u?u:"",k["a"].Join)){c["b"].info("Ignoring membership of user ".concat(h.sender," who is not in the room."));continue}i.push(h)}catch(e){c["b"].warn("Couldn't construct call membership: ",e)}}}return i.sort((e,t)=>e.createdTs()-t.createdTs()),i.length>1&&c["b"].debug("Call memberships in room ".concat(t.roomId,", in order: "),i.map(e=>[e.createdTs(),e.sender])),i}static roomSessionForRoom(e,t){var r=U.callMembershipsForRoom(t);return new U(e,t,r)}constructor(e,t,r){var n,i;super(),n=this,this.client=e,this.room=t,this.memberships=r,s()(this,"_callId",void 0),s()(this,"relativeExpiry",void 0),s()(this,"membershipId",void 0),s()(this,"memberEventTimeout",void 0),s()(this,"expiryTimeout",void 0),s()(this,"keysEventUpdateTimeout",void 0),s()(this,"makeNewKeyTimeout",void 0),s()(this,"setNewKeyTimeouts",new Set),s()(this,"ownFocusActive",void 0),s()(this,"ownFociPreferred",void 0),s()(this,"updateCallMembershipRunning",!1),s()(this,"needCallMembershipUpdate",!1),s()(this,"manageMediaKeys",!1),s()(this,"useLegacyMemberEvents",!0),s()(this,"encryptionKeys",new Map),s()(this,"lastEncryptionKeyUpdateRequest",void 0),s()(this,"lastMembershipFingerprints",void 0),s()(this,"sendEncryptionKeysEvent",o()((function*(){if(void 0!==n.keysEventUpdateTimeout&&(clearTimeout(n.keysEventUpdateTimeout),n.keysEventUpdateTimeout=void 0),n.lastEncryptionKeyUpdateRequest=Date.now(),c["b"].info("Sending encryption keys event"),n.isJoined()){var e=n.client.getUserId(),t=n.client.getDeviceId();if(!e)throw new Error("No userId");if(!t)throw new Error("No deviceId");var r=n.getKeysForParticipant(e,t);if(r)try{yield n.client.sendEvent(n.room.roomId,p["b"].CallEncryptionKeysPrefix,{keys:r.map((e,t)=>({index:t,key:Object(E["c"])(e)})),device_id:t,call_id:""}),c["b"].debug("Embedded-E2EE-LOG updateEncryptionKeyEvent participantId=".concat(e,":").concat(t," numSent=").concat(r.length),n.encryptionKeys)}catch(error){var i=error;if(i.event&&n.client.cancelPendingEvent(i.event),void 0===n.keysEventUpdateTimeout){var o,a,s=null!==(o=null===(a=i.data)||void 0===a?void 0:a.retry_after_ms)&&void 0!==o?o:5e3;c["b"].warn("Failed to send m.call.encryption_key, retrying in ".concat(s),error),n.keysEventUpdateTimeout=setTimeout(n.sendEncryptionKeysEvent,s)}else c["b"].info("Not scheduling key resend as another re-send is already pending")}else c["b"].warn("Tried to send encryption keys event but no keys found!")}}))),s()(this,"onCallEncryption",e=>{var t=e.getSender(),r=e.getContent(),n=r["device_id"],i=r["call_id"];if(t)if(""===i)if(Array.isArray(r.keys))if(t!==this.client.getUserId()||n!==this.client.getDeviceId())for(var o of r.keys)if(o){var a=o.key,s=o.index;a&&void 0!==s&&null!==s&&void 0!==i&&null!==i&&"string"===typeof n&&"string"===typeof i&&"string"===typeof a&&"number"===typeof s?(c["b"].debug("Embedded-E2EE-LOG onCallEncryption userId=".concat(t,":").concat(n," encryptionKeyIndex=").concat(s),this.encryptionKeys),this.setEncryptionKey(t,n,s,a,e.getTs())):c["b"].warn("Malformed call encryption_key: userId=".concat(t,", deviceId=").concat(n,", encryptionKeyIndex=").concat(s," callId=").concat(i))}else c["b"].info("Ignoring false-y key in keys event");else c["b"].info("Ignoring our own keys event");else c["b"].warn("Received m.call.encryption_keys where keys wasn't an array: callId=".concat(i));else c["b"].warn("Received m.call.encryption_keys with unsupported callId: userId=".concat(t,", deviceId=").concat(n,", callId=").concat(i));else c["b"].warn("Received m.call.encryption_keys with no userId: callId=".concat(i))}),s()(this,"isMyMembership",e=>e.sender===this.client.getUserId()&&e.deviceId===this.client.getDeviceId()),s()(this,"onMembershipUpdate",()=>{var e,t,r=this.memberships;this.memberships=U.callMembershipsForRoom(this.room),this._callId=null!==(e=this._callId)&&void 0!==e?e:null===(t=this.memberships[0])||void 0===t?void 0:t.callId;var n=r.length!=this.memberships.length||r.some((e,t)=>!w.equal(e,this.memberships[t]));if(n&&(c["b"].info("Memberships for call in room ".concat(this.room.roomId," have changed: emitting")),this.emit(T.MembershipsChanged,r,this.memberships)),this.manageMediaKeys&&this.isJoined()&&void 0===this.makeNewKeyTimeout){var i=new Set(r.filter(e=>!this.isMyMembership(e)).map(L)),o=new Set(this.memberships.filter(e=>!this.isMyMembership(e)).map(L)),a=Array.from(i).some(e=>!o.has(e)),s=Array.from(o).some(e=>!i.has(e)),l=this.lastMembershipFingerprints;if(this.storeLastMembershipFingerprints(),a)c["b"].debug("Member(s) have left: queueing sender key rotation"),this.makeNewKeyTimeout=setTimeout(this.onRotateKeyTimeout,P);else if(s)c["b"].debug("New member(s) have joined: re-sending keys"),this.requestKeyEventSend();else if(l){var d=this.lastMembershipFingerprints,u=Array.from(l).some(e=>!d.has(e))||Array.from(d).some(e=>!l.has(e));u&&(c["b"].debug("Member(s) have updated/reconnected: re-sending keys"),this.requestKeyEventSend())}}this.setExpiryTimer()}),s()(this,"triggerCallMembershipEventUpdate",o()((function*(){if(n.updateCallMembershipRunning)n.needCallMembershipUpdate=!0;else{n.updateCallMembershipRunning=!0;try{do{n.needCallMembershipUpdate=!1,yield n.updateCallMembershipEvent()}while(n.needCallMembershipUpdate)}finally{n.updateCallMembershipRunning=!1}}}))),s()(this,"onRotateKeyTimeout",()=>{this.manageMediaKeys&&(this.makeNewKeyTimeout=void 0,c["b"].info("Making new sender key for key rotation"),this.makeNewSenderKey(!0),this.sendEncryptionKeysEvent())}),this._callId=null===(i=r[0])||void 0===i?void 0:i.callId;var a=this.room.getLiveTimeline().getState(f["b"].FORWARDS);null===a||void 0===a||a.on(h["b"].Members,this.onMembershipUpdate),this.setExpiryTimer()}isJoined(){return void 0!==this.relativeExpiry}stop(){var e=this;return o()((function*(){yield e.leaveRoomSession(1e3),e.expiryTimeout&&(clearTimeout(e.expiryTimeout),e.expiryTimeout=void 0),e.memberEventTimeout&&(clearTimeout(e.memberEventTimeout),e.memberEventTimeout=void 0);var t=e.room.getLiveTimeline().getState(f["b"].FORWARDS);null===t||void 0===t||t.off(h["b"].Members,e.onMembershipUpdate)}))()}joinRoomSession(e,t,r){var n,i;this.isJoined()?c["b"].info("Already joined to session in room ".concat(this.room.roomId,": ignoring join call")):(this.ownFocusActive=t,this.ownFociPreferred=e,this.relativeExpiry=x,this.manageMediaKeys=null!==(n=null===r||void 0===r?void 0:r.manageMediaKeys)&&void 0!==n?n:this.manageMediaKeys,this.useLegacyMemberEvents=null!==(i=null===r||void 0===r?void 0:r.useLegacyMemberEvents)&&void 0!==i?i:this.useLegacyMemberEvents,this.membershipId=Object(S["a"])(5),c["b"].info("Joining call session in room ".concat(this.room.roomId," with manageMediaKeys=").concat(this.manageMediaKeys)),null!==r&&void 0!==r&&r.manageMediaKeys&&(this.makeNewSenderKey(),this.requestKeyEventSend()),this.triggerCallMembershipEventUpdate(),this.emit(T.JoinStateChanged,!0))}leaveRoomSession(){var e=arguments,t=this;return o()((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:void 0;if(!t.isJoined())return c["b"].info("Not joined to session in room ".concat(t.room.roomId,": ignoring leave call")),new Promise(e=>e(!1));var n=t.client.getUserId(),i=t.client.getDeviceId();if(!n)throw new Error("No userId");if(!i)throw new Error("No deviceId");for(var o of(t.encryptionKeys.set(j(n,i),[]),void 0!==t.makeNewKeyTimeout&&(clearTimeout(t.makeNewKeyTimeout),t.makeNewKeyTimeout=void 0),t.setNewKeyTimeouts))clearTimeout(o);t.setNewKeyTimeouts.clear(),c["b"].info("Leaving call session in room ".concat(t.room.roomId)),t.relativeExpiry=void 0,t.ownFocusActive=void 0,t.manageMediaKeys=!1,t.membershipId=void 0,t.emit(T.JoinStateChanged,!1);var a=new Promise(e=>{r&&setTimeout(e,r,"timeout")});return new Promise(e=>{Promise.race([t.triggerCallMembershipEventUpdate(),a]).then(t=>{e("timeout"!=t)})})}))()}getActiveFocus(){if(this.ownFocusActive&&g(this.ownFocusActive)&&"oldest_membership"===this.ownFocusActive.focus_selection){var e=this.getOldestMembership();return null===e||void 0===e?void 0:e.getPreferredFoci()[0]}if(!this.ownFocusActive){var t=this.getOldestMembership();return null===t||void 0===t?void 0:t.getPreferredFoci()[0]}}getKeysForParticipant(e,t){var r;return null===(r=this.encryptionKeys.get(j(e,t)))||void 0===r?void 0:r.map(e=>e.key)}getEncryptionKeys(){return Array.from(this.encryptionKeys.entries()).map(e=>{var[t,r]=e;return[t,r.map(e=>e.key)]}).values()}getNewEncryptionKeyIndex(){var e,t,r=this.client.getUserId(),n=this.client.getDeviceId();if(!r)throw new Error("No userId!");if(!n)throw new Error("No deviceId!");return(null!==(e=null===(t=this.getKeysForParticipant(r,n))||void 0===t?void 0:t.length)&&void 0!==e?e:0)%16}setEncryptionKey(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=Object(E["a"])(n),s=j(e,t);this.encryptionKeys.has(s)||this.encryptionKeys.set(s,[]);var l=this.encryptionKeys.get(s),d=l[r];if(d){if(d.timestamp>i)return void c["b"].info("Ignoring new key at index ".concat(r," for ").concat(s," as it is older than existing known key"));if(N(d.key,a))return void(d.timestamp=i)}if(l[r]={key:a,timestamp:i},o){var u=setTimeout(()=>{this.setNewKeyTimeouts.delete(u),c["b"].info("Delayed-emitting key changed event for ".concat(s," idx ").concat(r)),this.emit(T.EncryptionKeyChanged,a,r,s)},D);this.setNewKeyTimeouts.add(u)}else this.emit(T.EncryptionKeyChanged,a,r,s)}makeNewSenderKey(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.client.getUserId(),r=this.client.getDeviceId();if(!t)throw new Error("No userId");if(!r)throw new Error("No deviceId");var n=Object(S["b"])(16),i=this.getNewEncryptionKeyIndex();c["b"].info("Generated new key at index "+i),this.setEncryptionKey(t,r,i,n,Date.now(),e)}requestKeyEventSend(){if(this.manageMediaKeys)return this.lastEncryptionKeyUpdateRequest&&this.lastEncryptionKeyUpdateRequest+A>Date.now()?(c["b"].info("Last encryption key event sent too recently: postponing"),void(void 0===this.keysEventUpdateTimeout&&(this.keysEventUpdateTimeout=setTimeout(this.sendEncryptionKeysEvent,A)))):void this.sendEncryptionKeysEvent()}setExpiryTimer(){var e;for(var t of(this.expiryTimeout&&(clearTimeout(this.expiryTimeout),this.expiryTimeout=void 0),this.memberships)){var r=t.getMsUntilExpiry();void 0!==r&&(void 0===e||r<e)&&(e=r)}void 0!=e&&(this.expiryTimeout=setTimeout(this.onMembershipUpdate,e))}getOldestMembership(){return this.memberships[0]}getFocusInUse(){var e=this.getOldestMembership();if("oldest_membership"===(null===e||void 0===e?void 0:e.getFocusSelection()))return e.getPreferredFoci()[0]}storeLastMembershipFingerprints(){this.lastMembershipFingerprints=new Set(this.memberships.filter(e=>!this.isMyMembership(e)).map(e=>"".concat(L(e),":").concat(e.membershipID,":").concat(e.createdTs())))}makeMyMembershipLegacy(e,t){if(void 0===this.relativeExpiry)throw new Error("Tried to create our own membership event when we're not joined!");if(void 0===this.membershipId)throw new Error("Tried to create our own membership event when we have no membership ID!");var r=null===t||void 0===t?void 0:t.createdTs();return C({call_id:"",scope:"m.room",application:"m.call",device_id:e,expires:this.relativeExpiry,expires_ts:this.relativeExpiry+(null!==r&&void 0!==r?r:Date.now()),foci_active:this.ownFociPreferred,membershipID:this.membershipId},r?{created_ts:r}:{})}makeMyMembership(e){var t;return{call_id:"",scope:"m.room",application:"m.call",device_id:e,focus_active:{type:"livekit",focus_selection:"oldest_membership"},foci_preferred:null!==(t=this.ownFociPreferred)&&void 0!==t?t:[]}}membershipEventNeedsUpdate(e,t){if(t&&void 0===t.getMsUntilExpiry())return!1;if(!this.isJoined())return!!e;if(!t)return!0;var r=t.getMsUntilExpiry();return void 0!==r&&r<x/2&&(this.relativeExpiry+=x,!0)}makeNewMembership(e){return this.isJoined()?this.makeMyMembership(e):{}}makeNewLegacyMemberships(t,r,n,i){var o=t=>{var r;try{r=new w(n,t)}catch(e){return!1}return!r.isExpired()},a=e=>(void 0===e.created_ts&&(e.created_ts=n.getTs()),e),s=t.filter(o).filter(e=>e.device_id!==r);return s=s.map(a),this.isJoined()&&s.push(this.makeMyMembershipLegacy(r,i)),{memberships:s}}updateCallMembershipEvent(){var t=this;return o()((function*(){t.memberEventTimeout&&(clearTimeout(t.memberEventTimeout),t.memberEventTimeout=void 0);var r=t.room.getLiveTimeline().getState(f["b"].FORWARDS);if(!r)throw new Error("Couldn't get room state for room "+t.room.roomId);var n=t.client.getUserId(),i=t.client.getDeviceId();if(!n||!i)throw new Error("User ID or device ID was null!");var o=r.events.get(p["b"].GroupCallMemberPrefix),a=t.stateEventsContainOngoingLegacySession(o),s={};if(a){var l,d,u=null===o||void 0===o?void 0:o.get(n),h=null!==(l=null===u||void 0===u?void 0:u.getContent())&&void 0!==l?l:{},v=Array.isArray(h["memberships"])?h["memberships"]:[],m=v.find(e=>e.device_id===i);try{u&&m&&b(m)&&m.membershipID===t.membershipId&&(d=new w(u,m))}catch(e){c["b"].warn("Our previous call membership was invalid - this shouldn't happen.",e)}if(d&&c["b"].debug("".concat(d.getMsUntilExpiry()," until our membership expires")),!t.membershipEventNeedsUpdate(m,d))return void(t.memberEventTimeout=setTimeout(t.triggerCallMembershipEventUpdate,O));s=t.makeNewLegacyMemberships(v,i,u,d)}else s=t.makeNewMembership(i);var g=a?n:t.makeMembershipStateKey(n,i);try{if(yield t.client.sendStateEvent(t.room.roomId,p["b"].GroupCallMemberPrefix,s,g),c["b"].info("Sent updated call member event."),t.isJoined())if(a)t.memberEventTimeout=setTimeout(t.triggerCallMembershipEventUpdate,O);else try{var y=yield t.client._unstable_sendDelayedStateEvent(t.room.roomId,{delay:8e3},p["b"].GroupCallMemberPrefix,{},g);t.scheduleDelayDisconnection(y.delay_id)}catch(e){c["b"].error("Failed to send delayed event:",e)}}catch(e){var _=M+2e3*Math.random();c["b"].warn("Failed to send call member event (retrying in ".concat(_,"): ").concat(e)),yield new Promise(e=>setTimeout(e,_)),yield t.triggerCallMembershipEventUpdate()}}))()}scheduleDelayDisconnection(e){this.memberEventTimeout=setTimeout(()=>this.delayDisconnection(e),5e3)}delayDisconnection(t){var r=this;return o()((function*(){try{yield r.client._unstable_updateDelayedEvent(t,v["a"].Restart),r.scheduleDelayDisconnection(t)}catch(e){c["b"].error("Failed to delay our disconnection event",e)}}))()}stateEventsContainOngoingLegacySession(e){if(null===e||void 0===e||!e.size)return this.useLegacyMemberEvents;var t=!1,r=!1;for(var n of e.values()){var i=n.getContent();if(Array.isArray(i["memberships"])){for(var o of i.memberships)if(!new w(n,o).isExpired())return!0}else Object.keys(i).length>0&&(t||(t=!0),r||(r=!("focus_active"in i)))}return!(t&&!r)&&this.useLegacyMemberEvents}makeMembershipStateKey(e,t){var r="".concat(e,"_").concat(t);return/^org\.matrix\.msc(3757|3779)\b/.exec(this.room.getVersion())?r:"_".concat(r)}}(function(e){e["SessionStarted"]="session_started",e["SessionEnded"]="session_ended"})(R||(R={}));class F extends d["b"]{constructor(e){super(),this.client=e,s()(this,"roomSessions",new Map),s()(this,"onTimeline",e=>{this.consumeCallEncryptionEvent(e)}),s()(this,"onRoom",e=>{this.refreshRoom(e)}),s()(this,"onRoomState",(e,t)=>{var r=this.client.getRoom(e.getRoomId());r?e.getType()==p["b"].GroupCallMemberPrefix&&this.refreshRoom(r):c["b"].error("Got room state event for unknown room ".concat(e.getRoomId(),"!"))})}start(){for(var e of null!==(t=this.client.getRooms())&&void 0!==t?t:[]){var t,r=U.roomSessionForRoom(this.client,e);r.memberships.length>0&&this.roomSessions.set(e.roomId,r)}this.client.on(l["b"].Room,this.onRoom),this.client.on(u["d"].Timeline,this.onTimeline),this.client.on(h["b"].Events,this.onRoomState)}stop(){for(var e of this.roomSessions.values())e.stop();this.roomSessions.clear(),this.client.off(l["b"].Room,this.onRoom),this.client.off(u["d"].Timeline,this.onTimeline),this.client.off(h["b"].Events,this.onRoomState)}getActiveRoomSession(e){return this.roomSessions.get(e.roomId)}getRoomSession(e){return this.roomSessions.has(e.roomId)||this.roomSessions.set(e.roomId,U.roomSessionForRoom(this.client,e)),this.roomSessions.get(e.roomId)}consumeCallEncryptionEvent(e){var t=this;return o()((function*(){if(yield t.client.decryptEventIfNeeded(e),e.getType()!==p["b"].CallEncryptionKeysPrefix)return Promise.resolve();var r=t.client.getRoom(e.getRoomId());if(!r)return c["b"].error("Got room state event for unknown room ".concat(e.getRoomId(),"!")),Promise.resolve();t.getRoomSession(r).onCallEncryption(e)}))()}refreshRoom(e){var t=!this.roomSessions.has(e.roomId),r=this.getRoomSession(e),n=r.memberships.length>0&&!t;r.onMembershipUpdate();var i=r.memberships.length>0;n&&!i?this.emit(R.SessionEnded,e.roomId,this.roomSessions.get(e.roomId)):!n&&i&&this.emit(R.SessionStarted,e.roomId,this.roomSessions.get(e.roomId))}}},eaff:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y}));var n=r("c973"),i=r.n(n),o=r("9523"),a=r.n(o),s=r("edaf"),c=r("60af"),l=r("5b5f"),d=r("e1d9"),u=r("c35f"),h=r("9d2e"),f=r("936a"),p=r("7963"),v=new Error("Verification timed out");class m extends Error{constructor(e){super(),this.startEvent=e}}var g=p["c"];class y extends f["b"]{constructor(e,t,r,n,i,o){super(),this.channel=e,this.baseApis=t,this.userId=r,this.deviceId=n,this.startEvent=i,this.request=o,a()(this,"cancelled",!1),a()(this,"_done",!1),a()(this,"promise",null),a()(this,"transactionTimeoutTimer",null),a()(this,"expectedEvent",void 0),a()(this,"resolve",void 0),a()(this,"reject",void 0),a()(this,"resolveEvent",void 0),a()(this,"rejectEvent",void 0),a()(this,"started",void 0),a()(this,"doVerification",void 0)}get initiatedByMe(){if(!this.startEvent)return!0;var e=this.startEvent.getSender(),t=this.startEvent.getContent();return e===this.baseApis.getUserId()&&t.from_device===this.baseApis.getDeviceId()}get hasBeenCancelled(){return this.cancelled}resetTimer(){l["b"].info("Refreshing/starting the verification transaction timeout timer"),null!==this.transactionTimeoutTimer&&clearTimeout(this.transactionTimeoutTimer),this.transactionTimeoutTimer=setTimeout(()=>{this._done||this.cancelled||(l["b"].info("Triggering verification timeout"),this.cancel(v))},6e5)}endTimer(){null!==this.transactionTimeoutTimer&&(clearTimeout(this.transactionTimeoutTimer),this.transactionTimeoutTimer=null)}send(e,t){return this.channel.send(e,t)}waitForEvent(e){if(this._done)return Promise.reject(new Error("Verification is already done"));var t=this.request.getEventFromOtherParty(e);return t?Promise.resolve(t):(this.expectedEvent=e,new Promise((e,t)=>{this.resolveEvent=e,this.rejectEvent=t}))}canSwitchStartEvent(e){return!1}switchStartEvent(e){if(this.canSwitchStartEvent(e))if(l["b"].log("Verification Base: switching verification start event",{restartingFlow:!!this.rejectEvent}),this.rejectEvent){var t=this.rejectEvent;this.rejectEvent=void 0,t(new m(e))}else this.startEvent=e}handleEvent(e){var t;if(!this._done)if(e.getType()===this.expectedEvent)this.expectedEvent!==c["b"].KeyVerificationDone&&(this.expectedEvent=void 0,this.rejectEvent=void 0,this.resetTimer(),null===(t=this.resolveEvent)||void 0===t||t.call(this,e));else if(e.getType()===c["b"].KeyVerificationCancel){var r=this.reject;if(this.reject=void 0,r){var n=e.getContent(),{reason:i,code:o}=n;r(new Error("Other side cancelled verification "+"because ".concat(i," (").concat(o,")")))}}else if(this.expectedEvent){var a=new Error("Unexpected message: expecting "+this.expectedEvent+" but got "+e.getType());if(this.expectedEvent=void 0,this.rejectEvent){var s=this.rejectEvent;this.rejectEvent=void 0,s(a)}this.cancel(a)}}done(){var e=this;return i()((function*(){var t;if(e.endTimer(),!e._done)return e.request.onVerifierFinished(),null===(t=e.resolve)||void 0===t||t.call(e),Object(h["e"])(e.baseApis,e.userId,e.deviceId)}))()}cancel(e){if(this.endTimer(),!this._done){if(this.cancelled=!0,this.request.onVerifierCancelled(),this.userId&&this.deviceId)if(e===v){var t=Object(u["e"])();this.send(t.getType(),t.getContent())}else if(e instanceof s["b"]){var r=e.getSender();if(r!==this.userId){var n=e.getContent();e.getType()===c["b"].KeyVerificationCancel?(n.code=n.code||"m.unknown",n.reason=n.reason||n.body||"Unknown reason",this.send(c["b"].KeyVerificationCancel,n)):this.send(c["b"].KeyVerificationCancel,{code:"m.unknown",reason:n.body||"Unknown reason"})}}else this.send(c["b"].KeyVerificationCancel,{code:"m.unknown",reason:e.toString()});null!==this.promise?this.reject&&this.reject(e):this.promise=Promise.reject(e),this.emit(g.Cancel,e)}}verify(){var e=this;return this.promise||(this.promise=new Promise((t,r)=>{this.resolve=function(){e._done=!0,e.endTimer(),t(...arguments)},this.reject=e=>{this._done=!0,this.endTimer(),r(e)}}),this.doVerification&&!this.started&&(this.started=!0,this.resetTimer(),new Promise((e,t)=>{var r,n=null===(r=this.baseApis.crypto.deviceList.getStoredCrossSigningForUser(this.userId))||void 0===r?void 0:r.getId();n===this.deviceId&&t(new Error("Device ID is the same as the cross-signing ID")),e()}).then(()=>this.doVerification()).then(this.done.bind(this),this.cancel.bind(this)))),this.promise}verifyKeys(e,t,r){var n=this;return i()((function*(){var i=[];for(var[o,a]of Object.entries(t)){var s=o.split(":",2)[1],c=n.baseApis.getStoredDevice(e,s);if(c)r(o,c,a),i.push([s,o,c.keys[o]]);else{var u=n.baseApis.crypto.deviceList.getStoredCrossSigningForUser(e);u&&u.getId()===s?(r(o,d["a"].fromStorage({keys:{[o]:s}},s),a),i.push([s,o,s])):l["b"].warn("verification: Could not find device ".concat(s," to verify"))}}if(!i.length)throw new Error("No devices could be verified");for(var[h,f,p]of(l["b"].info("Verification completed! Marking devices verified: ",i),i))yield n.baseApis.crypto.setDeviceVerification(e,h,!0,null,null,{[f]:p});e==n.baseApis.credentials.userId&&(yield n.baseApis.checkKeyBackup())}))()}get events(){}getShowSasCallbacks(){return null}getReciprocateQrCodeCallbacks(){return null}}},ebaa:function(e,t,r){"use strict";var n=r("3139"),i=function(e){var t=this,r=!1,n=null;t.focus=!0,t.clbks={resume:{},pause:{}},window.focus();var i=function(r,i){var o=e.currentTime(),a=o-(n||o);t.focus=!0,_.each(t.clbks.resume,(function(e){e(a)})),t.titleManager&&t.titleManager.clear()},o=function(){t.focus=!1,n=e.currentTime(),_.each(t.clbks.pause,(function(e){e()}))};return t.init=function(){if(r=!0,window.cordova)return document.addEventListener("pause",o,!1),void document.addEventListener("resume",i,!1);window.addEventListener("blur",o),window.addEventListener("focus",i)},t.destroy=function(){if(t.clbk={resume:{},pause:{}},r){if(window.cordova)return document.removeEventListener("pause",o,!1),void document.removeEventListener("resume",i,!1);window.removeEventListener("blur",o),window.removeEventListener("focus",i),r=!1}},t},o=function(e){var t=this,r=null;return t.online=n["a"].deep(window,"navigator.onLine"),t.clbks={online:{},offline:{}},t.online||e.currentTime(),t.init=function(){},t.destroy=function(){r&&(clearInterval(r),r=null),t.clbks={online:{},offline:{}}},t};t["a"]={focus:i,online:o}},ebb5:function(e,t,r){"use strict";var n,i,o,a=r("4b11"),s=r("83ab"),c=r("cfe9"),l=r("1626"),d=r("861d"),u=r("1a2d"),h=r("f5df"),f=r("0d51"),p=r("9112"),v=r("cb2d"),m=r("edd0"),g=r("3a9b"),y=r("e163"),b=r("d2bb"),_=r("b622"),w=r("90e3"),S=r("69f3"),E=S.enforce,k=S.get,I=c.Int8Array,C=I&&I.prototype,T=c.Uint8ClampedArray,R=T&&T.prototype,x=I&&y(I),O=C&&y(C),M=Object.prototype,A=c.TypeError,P=_("toStringTag"),D=w("TYPED_ARRAY_TAG"),j="TypedArrayConstructor",L=a&&!!b&&"Opera"!==h(c.opera),N=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},B=function(e){if(!d(e))return!1;var t=h(e);return"DataView"===t||u(U,t)||u(F,t)},K=function(e){var t=y(e);if(d(t)){var r=k(t);return r&&u(r,j)?r[j]:K(t)}},q=function(e){if(!d(e))return!1;var t=h(e);return u(U,t)||u(F,t)},V=function(e){if(q(e))return e;throw new A("Target is not a typed array")},W=function(e){if(l(e)&&(!b||g(x,e)))return e;throw new A(f(e)+" is not a typed array constructor")},$=function(e,t,r,n){if(s){if(r)for(var i in U){var o=c[i];if(o&&u(o.prototype,e))try{delete o.prototype[e]}catch(error){try{o.prototype[e]=t}catch(a){}}}O[e]&&!r||v(O,e,r?t:L&&C[e]||t,n)}},z=function(e,t,r){var n,i;if(s){if(b){if(r)for(n in U)if(i=c[n],i&&u(i,e))try{delete i[e]}catch(error){}if(x[e]&&!r)return;try{return v(x,e,r?t:L&&x[e]||t)}catch(error){}}for(n in U)i=c[n],!i||i[e]&&!r||v(i,e,t)}};for(n in U)i=c[n],o=i&&i.prototype,o?E(o)[j]=i:L=!1;for(n in F)i=c[n],o=i&&i.prototype,o&&(E(o)[j]=i);if((!L||!l(x)||x===Function.prototype)&&(x=function(){throw new A("Incorrect invocation")},L))for(n in U)c[n]&&b(c[n],x);if((!L||!O||O===M)&&(O=x.prototype,L))for(n in U)c[n]&&b(c[n].prototype,O);if(L&&y(R)!==O&&b(R,O),s&&!u(O,P))for(n in N=!0,m(O,P,{configurable:!0,get:function(){return d(this)?this[D]:void 0}}),U)c[n]&&p(c[n],D,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:N&&D,aTypedArray:V,aTypedArrayConstructor:W,exportTypedArrayMethod:$,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:K,isView:B,isTypedArray:q,TypedArray:x,TypedArrayPrototype:O}},ebda:function(e,t,r){},ec26:function(e,t,r){"use strict";var n,i="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),o={randomUUID:i},a=new Uint8Array(16);function s(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).slice(1));function d(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}function u(e,t,r){if(o.randomUUID&&!t&&!e)return o.randomUUID();e=e||{};var n=e.random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return d(n)}t["a"]=u},ecec:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"aboutRoomAvatar"},[e.userinfo.length<5?t("div",{staticClass:"small"},[t("div",{staticClass:"userinfopicwrapper",class:{twoAvatars:2===e.userinfo.length,threeAvatars:3===e.userinfo.length,fourAvatars:4===e.userinfo.length}},e._l(e.userinfo,(function(r,n){return t("div",{staticClass:"userwrapper"},[t("userpic",{attrs:{status:e.status[r.id],userinfo:r}})],1)})),0)]):t("div",{staticClass:"manyavatars"},e._l(e.userinfo,(function(r,n){return t("div",{staticClass:"useravatar"},[t("userpic",{attrs:{status:e.status[r.id],userinfo:r}})],1)})),0)])},i=[],o={props:{userinfo:Array,slidesPerView:Number,status:{type:Object,default:{}}},data:function(){return{}}},a=o,s=r("2877");function c(e){var t=r("a201");t.__inject__&&t.__inject__(e)}var l=Object(s["a"])(a,n,i,!1,c,"4dda7508",null,!0);t["a"]=l.exports},ed54:function(e,t,r){},ed83:function(e,t,r){var n,i,o;(function(r,a){i=[],n=a,o="function"===typeof n?n.apply(t,i):n,void 0===o||(e.exports=o)})(0,(function(){function e(e){var t=getComputedStyle(e,null).getPropertyValue("overflow");return t.indexOf("scroll")>-1||t.indexOf("auto")>-1}function t(t){if(t instanceof HTMLElement||t instanceof SVGElement){var r=t.parentNode;while(r.parentNode){if(e(r))return r;r=r.parentNode}return document.scrollingElement||document.documentElement}}return t}))},edaf:function(t,r,n){"use strict";n.d(r,"c",(function(){return b})),n.d(r,"b",(function(){return w}));var i=n("c973"),o=n.n(i),a=n("9523"),s=n.n(a),c=n("9c0b"),l=n("5b5f"),d=n("60af"),u=n("b83f"),h=n("3ba7"),f=n("0804"),p=n("936a"),v=n("4b9e"),m=n("2f36"),g=n("1461"),y=n("e9dd");n.d(r,"a",(function(){return y["a"]}));var b,_=Object.freeze({visible:!0});(function(e){e["Decrypted"]="Event.decrypted",e["BeforeRedaction"]="Event.beforeRedaction",e["VisibilityChange"]="Event.visibilityChange",e["LocalEventIdReplaced"]="Event.localEventIdReplaced",e["Status"]="Event.status",e["Replaced"]="Event.replaced",e["RelationsCreated"]="Event.relationsCreated"})(b||(b={}));class w extends p["b"]{constructor(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.event=t,s()(this,"pushDetails",{}),s()(this,"_replacingEvent",null),s()(this,"_localRedactionEvent",null),s()(this,"_isCancelled",!1),s()(this,"clearEvent",void 0),s()(this,"visibility",_),s()(this,"_hasCachedExtEv",!1),s()(this,"_cachedExtEv",void 0),s()(this,"_decryptionFailureReason",null),s()(this,"senderCurve25519Key",null),s()(this,"claimedEd25519Key",null),s()(this,"forwardingCurve25519KeyChain",[]),s()(this,"untrusted",null),s()(this,"decryptionPromise",null),s()(this,"retryDecryption",!1),s()(this,"txnId",void 0),s()(this,"thread",void 0),s()(this,"threadId",void 0),s()(this,"localTimestamp",void 0),s()(this,"sender",null),s()(this,"target",null),s()(this,"status",null),s()(this,"error",null),s()(this,"forwardLooking",!0),s()(this,"verificationRequest",void 0),s()(this,"reEmitter",void 0),["state_key","type","sender","room_id","membership"].forEach(e=>{"string"===typeof t[e]&&(t[e]=Object(u["p"])(t[e]))}),["membership","avatar_url","displayname"].forEach(e=>{var r;"string"===typeof(null===(r=t.content)||void 0===r?void 0:r[e])&&(t.content[e]=Object(u["p"])(t.content[e]))}),["rel_type"].forEach(e=>{var r,n;"string"===typeof(null===(r=t.content)||void 0===r||null===(n=r["m.relates_to"])||void 0===n?void 0:n[e])&&(t.content["m.relates_to"][e]=Object(u["p"])(t.content["m.relates_to"][e]))}),this.txnId=t.txn_id;var r=this.getAge();this.localTimestamp=void 0!==r?Date.now()-r:null!==(e=this.getTs())&&void 0!==e?e:Date.now(),this.reEmitter=new f["b"](this)}get unstableExtensibleEvent(){return this._hasCachedExtEv||(this._cachedExtEv=c["ExtensibleEvents"].parse(this.getEffectiveEvent())),this._cachedExtEv}invalidateExtensibleEvent(){this._hasCachedExtEv=!1}getEffectiveEvent(){var e=Object.assign({},this.getContent());if(this.getWireType()===d["b"].RoomMessageEncrypted)for(var[t,r]of Object.entries(this.getWireContent()))["algorithm","ciphertext","device_id","sender_key","session_id"].includes(t)||void 0===e[t]&&(e[t]=r);return Object.assign({},this.event,this.clearEvent,{content:e})}getId(){return this.event.event_id}getSender(){return this.event.sender}getType(){return this.clearEvent?this.clearEvent.type:this.event.type}getWireType(){return this.event.type}getRoomId(){return this.event.room_id}getTs(){return this.event.origin_server_ts}getDate(){return this.event.origin_server_ts?new Date(this.event.origin_server_ts):null}getDetails(){var e,t=this.getRoomId();if(t)return"id=".concat(this.getId()," type=").concat(this.getWireType()," sender=").concat(this.getSender()," room=").concat(t," ts=").concat(null===(e=this.getDate())||void 0===e?void 0:e.toISOString());var r=this.getContent()[d["k"]];return"msgid=".concat(r," type=").concat(this.getWireType()," sender=").concat(this.getSender())}getOriginalContent(){return this._localRedactionEvent?{}:this.clearEvent?this.clearEvent.content||{}:this.event.content||{}}getContent(){return this._localRedactionEvent?{}:this._replacingEvent?this._replacingEvent.getContent()["m.new_content"]||{}:this.getOriginalContent()}getWireContent(){return this.event.content||{}}get threadRootId(){var e;if(!this.isState()){var t=null===(e=this.getWireContent())||void 0===e?void 0:e["m.relates_to"];if((null===t||void 0===t?void 0:t.rel_type)===h["d"].name)return t.event_id;if(this.thread)return this.thread.id;if(void 0!==this.threadId)return this.threadId;var r=this.getUnsigned();return"string"===typeof r[d["m"].name]?r[d["m"].name]:void 0}}get isThreadRoot(){if(this.isState())return!1;var e=this.getServerAggregatedRelation(h["d"].name);return!!e||this.threadRootId===this.getId()}get replyEventId(){var e,t;return null===(e=this.getWireContent()["m.relates_to"])||void 0===e||null===(t=e["m.in_reply_to"])||void 0===t?void 0:t.event_id}get relationEventId(){var e,t;return null===(e=this.getWireContent())||void 0===e||null===(t=e["m.relates_to"])||void 0===t?void 0:t.event_id}getPrevContent(){return this.getUnsigned().prev_content||{}}getDirectionalContent(){return this.forwardLooking?this.getContent():this.getPrevContent()}getAge(){return this.getUnsigned().age}getLocalAge(){return Date.now()-this.localTimestamp}getStateKey(){return this.event.state_key}isState(){return void 0!==this.event.state_key}getMembershipAtEvent(){var e=this.getUnsigned();return d["l"].findIn(e)}makeEncrypted(e,t,r,n){this.clearEvent={type:this.event.type,content:this.event.content},this.event.type=e,this.event.content=t,this.senderCurve25519Key=r,this.claimedEd25519Key=n}isBeingDecrypted(){return null!=this.decryptionPromise}getDecryptionPromise(){return this.decryptionPromise}isDecryptionFailure(){return null!==this._decryptionFailureReason}get decryptionFailureReason(){return this._decryptionFailureReason}get isEncryptedDisabledForUnverifiedDevices(){return this.decryptionFailureReason===g["DecryptionFailureCode"].MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE}shouldAttemptDecryption(){return!this.isRedacted()&&(!this.isBeingDecrypted()&&(!this.clearEvent&&!!this.isEncrypted()))}attemptDecryption(e){var t=arguments,r=this;return o()((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:{};if(!r.isEncrypted())throw new Error("Attempt to decrypt event which isn't encrypted");var i=r.clearEvent&&!r.isDecryptionFailure(),o=n.forceRedecryptIfUntrusted&&r.isKeySourceUntrusted();if(i&&!o)throw new Error("Attempt to decrypt event which has already been decrypted");return r.decryptionPromise?(l["b"].log("Event ".concat(r.getId()," already being decrypted; queueing a retry")),r.retryDecryption=!0,r.decryptionPromise):(r.decryptionPromise=r.decryptionLoop(e,n),r.decryptionPromise)}))()}cancelAndResendKeyRequest(e,t){var r=this.getWireContent();return e.requestRoomKey({algorithm:r.algorithm,room_id:this.getRoomId(),session_id:r.session_id,sender_key:r.sender_key},this.getKeyRequestRecipients(t),!0)}getKeyRequestRecipients(e){var t=[{userId:e,deviceId:"*"}];return t}decryptionLoop(t){var r=arguments,n=this;return o()((function*(){var i=r.length>1&&void 0!==r[1]?r[1]:{};yield Promise.resolve();while(1){n.retryDecryption=!1;var o=void 0;try{var a=yield t.decryptEvent(n);!0===i.isRetry&&l["b"].info("Decrypted event on retry (".concat(n.getDetails(),")")),n.setClearData(a),n._decryptionFailureReason=null}catch(e){var s=e instanceof v["a"]?e.detailedString:String(e);if(o=e,n.retryDecryption){l["b"].log("Error decrypting event (".concat(n.getDetails(),"), but retrying: ").concat(s));continue}l["b"].warn("Error decrypting event (".concat(n.getDetails(),"): ").concat(s)),n.setClearDataForDecryptionFailure(String(e)),n._decryptionFailureReason=e instanceof v["a"]?e.code:g["DecryptionFailureCode"].UNKNOWN_ERROR}return n.decryptionPromise=null,n.retryDecryption=!1,n.setPushDetails(),void(!1!==i.emit&&n.emit(b.Decrypted,n,o))}}))()}setClearData(e){var t,r;this.clearEvent=e.clearEvent,this.senderCurve25519Key=null!==(t=e.senderCurve25519Key)&&void 0!==t?t:null,this.claimedEd25519Key=null!==(r=e.claimedEd25519Key)&&void 0!==r?r:null,this.forwardingCurve25519KeyChain=e.forwardingCurve25519KeyChain||[],this.untrusted=e.untrusted||!1,this.invalidateExtensibleEvent()}setClearDataForDecryptionFailure(e){this.clearEvent={type:d["b"].RoomMessage,content:{msgtype:"m.bad.encrypted",body:"** Unable to decrypt: ".concat(e," **")}},this.senderCurve25519Key=null,this.claimedEd25519Key=null,this.forwardingCurve25519KeyChain=[],this.untrusted=!1,this.invalidateExtensibleEvent()}getClearContent(){return this.clearEvent?this.clearEvent.content:null}isEncrypted(){return!this.isState()&&this.event.type===d["b"].RoomMessageEncrypted}getSenderKey(){return this.senderCurve25519Key}getKeysClaimed(){return this.claimedEd25519Key?{ed25519:this.claimedEd25519Key}:{}}getClaimedEd25519Key(){return this.claimedEd25519Key}getForwardingCurve25519KeyChain(){return this.forwardingCurve25519KeyChain}isKeySourceUntrusted(){return!!this.untrusted}getUnsigned(){return this.event.unsigned||{}}setUnsigned(e){this.event.unsigned=e}unmarkLocallyRedacted(){var e=this._localRedactionEvent;return this._localRedactionEvent=null,this.event.unsigned&&(this.event.unsigned.redacted_because=void 0),!!e}markLocallyRedacted(e){this._localRedactionEvent||(this.emit(b.BeforeRedaction,this,e),this._localRedactionEvent=e,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event)}applyVisibilityEvent(e){var t,r,n=null===(t=null===e||void 0===e?void 0:e.visible)||void 0===t||t,i=null!==(r=null===e||void 0===e?void 0:e.reason)&&void 0!==r?r:null,o=!1;this.visibility.visible!==n?o=!0:this.visibility.visible||this.visibility["reason"]===i||(o=!0),o&&(this.visibility=n?_:Object.freeze({visible:!1,reason:i}),this.emit(b.VisibilityChange,this,n))}messageVisibility(){return this.visibility}makeRedacted(e,t){if(!e.event)throw new Error("invalid redactionEvent in makeRedacted");for(var r in this._localRedactionEvent=null,this.emit(b.BeforeRedaction,this,e),this._replacingEvent=null,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event,this.event)this.event.hasOwnProperty(r)&&!S.has(r)&&delete this.event[r];this.isEncrypted()&&(this.clearEvent=void 0);var n=this.getType()in E?E[this.getType()]:{},i=this.getContent();for(var o in i)i.hasOwnProperty(o)&&!n[o]&&delete i[o];!this.isThreadRoot&&this.threadRootId&&this.threadRootId!==this.getId()&&(this.moveAllRelatedToMainTimeline(t),e.moveToMainTimeline(t)),this.invalidateExtensibleEvent()}moveAllRelatedToMainTimeline(e){var t=this.thread;if(this.moveToMainTimeline(e),t)for(var r of t.events){var n;(null===(n=r.getRelation())||void 0===n?void 0:n.event_id)===this.getId()&&r.moveAllRelatedToMainTimeline(e)}}moveToMainTimeline(e){var t;null===(t=this.thread)||void 0===t||t.timelineSet.removeEvent(this.getId()),this.setThread(void 0);var r=e.getLiveTimeline();r.getTimelineSet().insertEventIntoTimeline(this,r,r.getState(m["b"].FORWARDS))}isRedacted(){return Boolean(this.getUnsigned().redacted_because)}isRedaction(){return this.getType()===d["b"].RoomRedaction}asVisibilityChange(){if(!d["a"].matches(this.getType()))return null;var e=this.getRelation();if(!e||"m.reference"!=e.rel_type)return null;var t=e.event_id;if(!t)return null;var r=this.getWireContent(),n=!!r.visible,i=r.reason;return i&&"string"!=typeof i?null:{visible:n,reason:i,eventId:t}}isVisibilityEvent(){return d["a"].matches(this.getType())}getRedactionEvent(){var e,t,r,n;return this.isRedacted()?null!==(e=this.clearEvent)&&void 0!==e&&e.unsigned?null!==(r=null===(n=this.clearEvent)||void 0===n?void 0:n.unsigned.redacted_because)&&void 0!==r?r:null:null!==(t=this.event.unsigned)&&void 0!==t&&t.redacted_because?this.event.unsigned.redacted_because:{}:null}getPushActions(){return this.pushDetails.actions||null}getPushDetails(){return this.pushDetails}setPushDetails(e,t){this.pushDetails={actions:e,rule:t}}handleRemoteEcho(e){var t=this.getUnsigned(),r=this.getId();this.event=e,t.redacted_because&&(this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=t.redacted_because),this.setStatus(null),this.getId()!==r&&this.emit(b.LocalEventIdReplaced,this),this.localTimestamp=Date.now()-this.getAge()}isSending(){return!!this.status}setStatus(e){this.status=e,this.emit(b.Status,this,e)}replaceLocalEventId(e){this.event.event_id=e,this.emit(b.LocalEventIdReplaced,this)}isRelation(e){var t,r=null===(t=this.getWireContent())||void 0===t?void 0:t["m.relates_to"];return!(this.isState()&&null!==r&&void 0!==r&&r.rel_type&&[d["h"].Replace,d["h"].Thread].includes(r.rel_type))&&!(null===r||void 0===r||!r.rel_type||!r.event_id||e&&r.rel_type!==e)}getRelation(){var e;return this.isRelation()&&null!==(e=this.getWireContent()["m.relates_to"])&&void 0!==e?e:null}makeReplaced(e){this.isRedacted()&&e||this.isState()||this._replacingEvent!==e&&(this._replacingEvent=null!==e&&void 0!==e?e:null,this.emit(b.Replaced,this),this.invalidateExtensibleEvent())}getAssociatedStatus(){return this._replacingEvent?this._replacingEvent.status:this._localRedactionEvent?this._localRedactionEvent.status:this.status}getServerAggregatedRelation(e){var t;return null===(t=this.getUnsigned()["m.relations"])||void 0===t?void 0:t[e]}replacingEventId(){var e=this.getServerAggregatedRelation(d["h"].Replace);return e?e.event_id:this._replacingEvent?this._replacingEvent.getId():void 0}replacingEvent(){return this._replacingEvent}replacingEventDate(){var e=this.getServerAggregatedRelation(d["h"].Replace);if(e){var t=e.origin_server_ts;if(Number.isFinite(t))return new Date(t)}else if(this._replacingEvent){var r;return null!==(r=this._replacingEvent.getDate())&&void 0!==r?r:void 0}}localRedactionEvent(){return this._localRedactionEvent}getAssociatedId(){var e=this.getRelation();return this.replyEventId?this.replyEventId:e?e.event_id:this.isRedaction()?this.event.redacts:void 0}hasAssociation(){return!!this.getAssociatedId()}updateAssociatedId(e){var t=this.getRelation();t?t.event_id=e:this.isRedaction()&&(this.event.redacts=e)}flagCancelled(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isCancelled=e}isCancelled(){return this._isCancelled}toSnapshot(){var e=new w(JSON.parse(JSON.stringify(this.event)));for(var[t,r]of Object.entries(this))"event"!==t&&(e[t]=r);return e}isEquivalentTo(e){if(!e)return!1;if(e===this)return!0;var t=Object(u["h"])(this.event),r=Object(u["h"])(e.event);return JSON.stringify(t)===JSON.stringify(r)}toJSON(){var e=this.getEffectiveEvent();return this.isEncrypted()?{decrypted:e,encrypted:this.event}:e}setVerificationRequest(e){this.verificationRequest=e}setTxnId(e){this.txnId=e}getTxnId(){return this.txnId}setThread(e){this.isState()||(this.thread&&this.reEmitter.stopReEmitting(this.thread,[h["f"].Update]),this.thread=e,this.setThreadId(null===e||void 0===e?void 0:e.id),e&&this.reEmitter.reEmit(e,[h["f"].Update]))}getThread(){return this.thread}setThreadId(e){this.threadId=e}}var S=new Set(["event_id","type","room_id","user_id","sender","state_key","prev_state","content","unsigned","origin_server_ts"]),E={[d["b"].RoomMember]:{membership:1},[d["b"].RoomJoinRules]:{join_rule:1},[d["b"].RoomPowerLevels]:{ban:1,events:1,events_default:1,kick:1,redact:1,state_default:1,users:1,users_default:1}}},edd0:function(e,t,r){"use strict";var n=r("13d2"),i=r("9bf2");e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},edd4:function(e){e.exports=JSON.parse('{"caption":{"create":"Create","addGroupNamePlaceHolder":"Add Group Name","addPublicChatName":"Add Public Chat Name","createPublicChat":"Create public chat","chatTopic":"Topic renamed","publicRoomTitle":"Public Room","asModerator":"as moderator","marked":"marked","unmarked":"unmarked","removeBan":"Remove Ban","cancelModeration":"Remove moderation","uploadFiles":"Upload files","header":"header","dragAndDropAFile":"Drag and drop file","chatInvite":"You were invited to chat with:","cantJoin":"You can\'t join to chat with:","chatInviteDecline":"You can join in chat or decline invitation","creatorLeft":"Because creator left the room","encrypted":"Encrypted","noImages":"There are no images in this chat yet","noFiles":"There are no files in this chat yet","inviteUser":"Invite User","invite":"Invite","add":"Add","mute":"Mute","unmute":"Unmute","disableCalls":"Prohibit incoming calls","enableCalls":"Allow incoming calls","allow":"Allow","prohibit":"Reject","wait":"Waiting for confirmation","disabled":"The user did not give you permission to make calls","request":"Do you really want to request permission to make calls?","requestCallAccess":"The user requests permission to make calls","requestCallAccessYou":"You have requested permission to make calls","callAccessWarning":"Accept requests ONLY from trusted people.","leave":"Leave","Info":"Info","new":"New","typing":"typing","accNotFound":"Your registration is in progress, please wait...","emptyList":"list is empty ( filtered or just empty )","welcome":"Welcome to chat","startNewChat":"Start a new chat","chats":"Chats","shareWith":"Share with","newChat":"New Chat","moveToChat":"Move to chat","queryNoResults":"Query reports no results","needMoreCharacters":"Need more characters for result","createGroup":"Create Group","unabletoDecrypt":"* Unable to decrypt","messageDeleted":"Message Deleted","sentImage":"sent image","sentVoiceMessage":"sent a voice message","invitationToChat":"Invitation to chat","invitationToRoom":"Invitation to room","leftChat":"left the chat","joined":"joined","chatRenamed":"Chat renamed to ","recentComment":"Recent comment:","share":"SHARE","followers":"Followers","reputation":"Reputation","unsubscribe":"Unsubscribe","following":"Following","theme":"Theme:","contacts":"Contacts","other":"Global search","phoneContacts":"Phone contacts","chooseInviteMedia":"Please choose how you want to invite:","admin":"Admin","moderator":"Moderator","videocall":"Video Call","call":"Call","leaveAndDelete":"Leave and Delete","donate":"Donate","makeModerator":"Make Moderator","ban":"Ban","kick":"Kick","members":"Members","media":"Media","files":"Files","contactsList":"Contacts List","send":"send","pageCaption":"Page caption","caption":"Caption","text":"text","placeholder":"placeholder","sendTransactionTo":"Send Transaction To","toBePaidByReceiver":"To be paid by Receiver","toBePaidBySender":"To be paid by Sender","source":"Source","amount":"Amount","receiver":"Receiver","message":"Message","includeFeesInAmount":"Include Fees in Amount","transactionFees":"Transaction Fees","totalAmount":"Total amount","balanceTooLow":"Balance too low","transactionError":"Error, can\'t make the transaction","calculateFees":"Calculate Fees","startChatWith":"Start chat with","searchResult":"Search result","joinedInTheChat":"joined the chat","invited":"invited ","hasInvited":"has invited ","inTheChat":" in the chat","banned":"Banned","andRoom":"and room","left":"left","theChat":" the chat ","made":"made ","aModerator":" a moderator","editedChatNameTo ":"edited chat name to ","somebody":"Somebody","sent":"sent","PKOINto":" PKOIN to ","response":"Response","messagefrom":"Forwarded message","edited":"Edited","settings":"Settings","unauthorized":"Unauthorized","search":"Search","replyOnMessage":"Reply on Message","editMessage":"Edit Message","inviteFriend":"Invite friends","emptyContactList":"Contacts list is empty","joinApp":"Please connect with me for secure chat.","hasInvitedToJoin":"It is private and NOT connected to your phone number. Let\'s chat!","contactsempty":"You do not have contacts yet, find them in the search","usernotgen":"User did not generate their encryption keys yet. You will be able to chat them when their keys are generated.","younotgen":"Please wait a minute, Your encryption keys are being generated...","messageRead":"Message read","open":"Open","You":"You","chatsearchingempty":"No chats found for the specified filter","sendmessage":"Send message","messages":"Messages","you":"You","sentfile":"sent file:","administrators":"Owner","moderators":"Moderators","participants":"Participants","streamChat":"Stream chat","membersList":"Members list","needjointowrite":"You need join to write","streamisover":"This stream is over","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"Email","refillNamePlaceholder":"Refill name"},"message":{},"button":{"starChatButton":"Start chat","decline":"Decline","declineandignore":"Ignore User","join":"Join","ok":"Ok","save":"Save","copy":"Copy","forward":"Forward","delete":"Delete","resend":"Resend","reply":"Reply","share":"Share","download":"Download","downloaded":"Downloaded","goToPocketnetProfile":"Go to profile","sendFile":"Send File","takePhotoOrVideo":"Send image","sendCoins":"Send coins","edit":"Edit","select":"Select","block":"Block","unblock":"Unblock","blockUser":"Block user","Complain":"Complain","chat":"Chat","donations":"Donations"},"type":{"publicgroup":"Create Public group","privategroup":"Create Private group","one":"One on one chat"},"typelabel":{"publicgroup":"Public group creation","privategroup":"Private group creation","one":"One on one chat creation"},"yes":"Yes","cancel":"Cancel","teamMessages":{"1-title":"Welcome to Private Chat!","1-list1":"Private messenger that is NOT connected to your phone number","1-list2":"End-To-End Encryption of every 1-on-1 conversation by default","1-list3":"All images sent or received through chat are stored encrypted","1-list4":"History of messages is saved for 7 days only","2-title":"A Huge Announcement!","2-message1":"We released the following major updates recently:","2-list1":"Private encrypted messenger not connected to your phone number","2-list2":"Ability to donate PKOIN to bloggers","2-list3":"Video and Live Streaming","2-message2":"Invite your friends now and be a part of the big future of decentralized internet!","2-button":"Invite friends"},"error_generic":"Something went wrong, please try again later.","sendingerror":"An error occurred while sending the message","details":"Details","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","settings_disturb":"Do not disturb","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found","endedCall":"Call completed","incomingCall":"Incoming call","incomingVideoCall":"Incoming video call","incomingAudioCall":"Incoming audio call","outgoingCall":"Outgoing call","m.call.invite":"Call","m.call.hangup":"Call completed","m.call.reject":"Call rejected","m.call.answer":"Active call","wait":"Waiting for a response","ended":"Call completed","reject":"Call rejected","connecting":"Connecting"}')},edf6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},ee39:function(e,t,r){"use strict";r.d(t,"j",(function(){return R})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return M})),r.d(t,"i",(function(){return A})),r.d(t,"d",(function(){return D})),r.d(t,"f",(function(){return U})),r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return F})),r.d(t,"l",(function(){return B})),r.d(t,"c",(function(){return V})),r.d(t,"o",(function(){return g})),r.d(t,"k",(function(){return y})),r.d(t,"e",(function(){return b})),r.d(t,"n",(function(){return _})),r.d(t,"p",(function(){return w})),r.d(t,"m",(function(){return E}));var n,i=r("9523"),o=r.n(i),a=r("c973"),s=r.n(a),c=r("4f52"),l=r("5b5f"),d=r("6dde");(function(e){e["NotSupported"]="OIDC authentication not supported",e["Misconfigured"]="OIDC is misconfigured",e["General"]="Something went wrong with OIDC discovery",e["OpSupport"]="Configured OIDC OP does not support required functions",e["DynamicRegistrationNotSupported"]="Dynamic registration not supported",e["DynamicRegistrationFailed"]="Dynamic registration failed",e["DynamicRegistrationInvalid"]="Dynamic registration invalid response",e["CodeExchangeFailed"]="Failed to exchange code for token",e["InvalidBearerTokenResponse"]="Invalid bearer token response",e["InvalidIdToken"]="Invalid ID token",e["MissingOrInvalidStoredState"]="State required to finish logging in is not found in storage."})(n||(n={}));var u=r("f761"),h=e=>!!e&&"object"===typeof e&&!Array.isArray(e),f=(e,t)=>!(!e[t]||!p(e,t))||(l["b"].error("Missing or invalid property: ".concat(t)),!1),p=(e,t)=>!e[t]||"string"===typeof e[t]||(l["b"].error("Invalid property: ".concat(t)),!1),v=(e,t)=>!!(!e[t]||Array.isArray(e[t])&&e[t].every(e=>"string"===typeof e))||(l["b"].error("Invalid property: ".concat(t)),!1),m=(e,t,r)=>{var n=e[t];return!!(n&&Array.isArray(n)&&n.includes(r))||(l["b"].error("Invalid property: ".concat(t,". ").concat(r," is required.")),!1)},g=e=>{if(!h(e))throw l["b"].error("Issuer configuration not found or malformed"),new Error(n.OpSupport);var t=[f(e,"authorization_endpoint"),f(e,"token_endpoint"),f(e,"revocation_endpoint"),p(e,"registration_endpoint"),p(e,"account_management_uri"),p(e,"device_authorization_endpoint"),v(e,"account_management_actions_supported"),m(e,"response_types_supported","code"),m(e,"grant_types_supported","authorization_code"),m(e,"code_challenge_methods_supported","S256")].some(e=>!e);if(!t)return{authorizationEndpoint:e["authorization_endpoint"],tokenEndpoint:e["token_endpoint"],registrationEndpoint:e["registration_endpoint"],accountManagementEndpoint:e["account_management_uri"],accountManagementActionsSupported:e["account_management_actions_supported"]};throw l["b"].error("Issuer configuration not valid"),new Error(n.OpSupport)};function y(e){g(e)}var b=e=>{try{return Object(u["jwtDecode"])(e)}catch(error){throw l["b"].error("Could not decode id_token",error),error}},_=(e,t,r,i)=>{try{if(!e)throw new Error("No ID token");var o=b(e);if(o.iss!==t)throw new Error("Invalid issuer");if(o.aud!==r)throw new Error("Invalid audience");if(void 0!==i&&o.nonce!==i)throw new Error("Invalid nonce");if(!o.exp||Date.now()>1e3*o.exp)throw new Error("Invalid expiry")}catch(error){throw l["b"].error("Invalid ID token",error),new Error(n.InvalidIdToken)}};function w(e){if(!h(e))throw l["b"].error("Stored user state not found"),new Error(n.MissingOrInvalidStoredState);var t=[f(e,"homeserverUrl"),f(e,"nonce"),p(e,"identityServerUrl")].some(e=>!e);if(t)throw new Error(n.MissingOrInvalidStoredState)}var S=e=>h(e)&&f(e,"token_type")&&"bearer"===e["token_type"].toLowerCase()&&f(e,"access_token")&&f(e,"refresh_token")&&(!("expires_in"in e)||"number"===typeof e["expires_in"]);function E(e){if(!S(e))throw new Error(n.InvalidBearerTokenResponse)}var k=r("567a"),I=r("da1e");function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=e=>{var t=null!==e&&void 0!==e?e:Object(d["a"])(10);return"openid urn:matrix:org.matrix.msc2967.client:api:* urn:matrix:org.matrix.msc2967.client:device:".concat(t)},x=function(){var e=s()((function*(e){if(!globalThis.crypto.subtle)return l["b"].warn("A secure context is required to generate code challenge. Using plain text code challenge"),e;var t=yield Object(k["a"])(e);return Object(I["d"])(t)}));return function(t){return e.apply(this,arguments)}}(),O=e=>{var{redirectUri:t}=e;return{scope:R(),redirectUri:t,state:Object(d["a"])(8),nonce:Object(d["a"])(8),codeVerifier:Object(d["a"])(64)}},M=function(){var e=s()((function*(e,t,r){var{scope:n,redirectUri:i,state:o,nonce:a,codeVerifier:s}=r,c=new URL(e);return c.searchParams.append("response_mode","query"),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",i),c.searchParams.append("client_id",t),c.searchParams.append("state",o),c.searchParams.append("scope",n),c.searchParams.append("nonce",a),c.searchParams.append("code_challenge_method","S256"),c.searchParams.append("code_challenge",yield x(s)),c.toString()}));return function(t,r,n){return e.apply(this,arguments)}}(),A=function(){var e=s()((function*(e){var{metadata:t,redirectUri:r,clientId:n,homeserverUrl:i,identityServerUrl:o,nonce:a,prompt:s,urlState:l}=e,d=R(),u=new c["OidcClient"](T(T({},t),{},{client_id:n,redirect_uri:r,authority:t.issuer,response_mode:"query",response_type:"code",scope:d,stateStore:new c["WebStorageStateStore"]({prefix:"mx_oidc_",store:window.sessionStorage})})),h={homeserverUrl:i,nonce:a,identityServerUrl:o},f=yield u.createSigninRequest({state:h,nonce:a,prompt:s,url_state:l});return f.url}));return function(t){return e.apply(this,arguments)}}(),P=e=>({id_token:e.id_token,scope:e.scope,expires_at:e.expires_at,refresh_token:e.refresh_token,access_token:e.access_token,token_type:"Bearer"}),D=function(){var e=s()((function*(e,t){var r=new URL(window.location.origin);r.searchParams.append("code",e),r.searchParams.append("state",t),c["Log"].setLogger(l["b"]);try{var i=new c["SigninResponse"](r.searchParams),o=new c["WebStorageStateStore"]({prefix:"mx_oidc_",store:window.sessionStorage}),a=yield o.get(i.state);if(!a)throw new Error(n.MissingOrInvalidStoredState);var s=yield c["SigninState"].fromStorageString(a),d=new c["OidcClient"](T(T({},s),{},{stateStore:o})),u=yield d.processSigninResponse(r.href),h=u.userState;w(h),E(u),_(u.id_token,d.settings.authority,d.settings.client_id,h.nonce);var f=P(u);return{oidcClientSettings:{clientId:d.settings.client_id,issuer:d.settings.authority},tokenResponse:f,homeserverUrl:h.homeserverUrl,identityServerUrl:h.identityServerUrl,idTokenClaims:u.profile}}catch(error){l["b"].error("Oidc login failed",error);var p=error.message;if(Object.values(n).includes(p))throw error;throw new Error(n.CodeExchangeFailed)}}));return function(t,r){return e.apply(this,arguments)}}(),j=r("9c88");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=function(){var e=s()((function*(e){var t,r=new URL(".well-known/openid-configuration",e),n=yield fetch(r,{method:j["i"].Get,signal:Object(j["n"])(5e3)}),i=yield n.json(),o=g(i),a=new c["OidcClientSettingsStore"]({authority:e,redirect_uri:"",client_id:""}),s=new c["MetadataService"](a),l=yield s.getMetadata(),d=null!==(t=yield s.getSigningKeys())&&void 0!==t?t:void 0;return y(l),N(N({},o),{},{metadata:l,signingKeys:d})}));return function(t){return e.apply(this,arguments)}}(),F="urn:ietf:params:oauth:grant-type:device_code",B=function(){var e=s()((function*(e,t){if(!e.registrationEndpoint)throw new Error(n.DynamicRegistrationNotSupported);var r=["authorization_code","refresh_token"];if(r.some(t=>!e.metadata.grant_types_supported.includes(t)))throw new Error(n.DynamicRegistrationNotSupported);var i={client_name:t.clientName,client_uri:t.clientUri,response_types:["code"],grant_types:r,redirect_uris:t.redirectUris,id_token_signed_response_alg:"RS256",token_endpoint_auth_method:"none",application_type:t.applicationType,logo_uri:t.logoUri,contacts:t.contacts,policy_uri:t.policyUri,tos_uri:t.tosUri},o={Accept:"application/json","Content-Type":"application/json"};try{var a=yield fetch(e.registrationEndpoint,{method:j["i"].Post,headers:o,body:JSON.stringify(i)});if(a.status>=400)throw new Error(n.DynamicRegistrationFailed);var s=yield a.json(),c=s["client_id"];if(!c||"string"!==typeof c)throw new Error(n.DynamicRegistrationInvalid);return c}catch(error){throw Object.values(n).includes(error.message)?error:(l["b"].error("Dynamic registration request failed",error),new Error(n.DynamicRegistrationFailed))}}));return function(t,r){return e.apply(this,arguments)}}();function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class V{constructor(e,t,r,n,i){this.idTokenClaims=i,o()(this,"oidcClientReady",void 0),o()(this,"oidcClient",void 0),o()(this,"inflightRefreshRequest",void 0),this.oidcClientReady=this.initialiseOidcClient(e,t,n,r)}initialiseOidcClient(e,t,r,n){var i=this;return s()((function*(){try{var o=yield U(e),a=R(r);i.oidcClient=new c["OidcClient"](q(q({},o.metadata),{},{client_id:t,scope:a,redirect_uri:n,authority:o.metadata.issuer,stateStore:new c["WebStorageStateStore"]({prefix:"mx_oidc_",store:window.sessionStorage})}))}catch(error){throw l["b"].error("Failed to initialise OIDC client.",error),new Error("Failed to initialise OIDC client.")}}))()}doRefreshAccessToken(e){var t=this;return s()((function*(){t.inflightRefreshRequest||(t.inflightRefreshRequest=t.getNewTokens(e));try{var r=yield t.inflightRefreshRequest;return r}finally{t.inflightRefreshRequest=void 0}}))()}persistTokens(e){return s()((function*(){}))()}getNewTokens(e){var t=this;return s()((function*(){if(!t.oidcClient)throw new Error("Cannot get new token before OIDC client is initialised.");var r={refresh_token:e,session_state:"test",data:void 0,profile:t.idTokenClaims},n=yield t.oidcClient.useRefreshToken({state:r,timeoutInSeconds:300}),i={accessToken:n.access_token,refreshToken:n.refresh_token};return yield t.persistTokens(i),i}))()}}},ef4e:function(e,t,r){var n=r("df06");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("35d6").default;e.exports.__inject__=function(e){i("6e48efe9",n,e)}},f0bc:function(e,t,r){var n=r("3baa"),i=/%[sdv%]/g,o=function(e){var t=1,r=arguments,n=r.length;return e.replace(i,(function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},a=function(e,t,r){var n=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format,i=[e+"="+n];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?i.push(r[t.name][s]):i.push(r[t.names[a]])}else i.push(r[t.name]);return o.apply(null,i)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||s,i=t.innerOrder||c,o=[];return r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?o.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){o.push(a(t,r,e))}))}))})),e.media.forEach((function(e){o.push(a("m",n.m[0],e)),i.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?o.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){o.push(a(t,r,e))}))}))}))})),o.join("\r\n")+"\r\n"}},f0e4:function(e,t){function r(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},f1ce:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["Email"]="email",e["Phone"]="msisdn"}(n||(n={}))},f206:function(e,t,r){(function(t,r){e.exports=r()})(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=2)}([function(e,t,r){r(8);var n=r(6)(r(1),r(7),"data-v-25adc6c0",null);e.exports=n.exports},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="#75c791",a="#bfcbd9",s="on",c="off",l="#fff";t["default"]={name:"ToggleButton",props:{value:{type:Boolean,default:!1},name:{type:String},disabled:{type:Boolean,default:!1},tag:{type:String},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator:function(e){return r.i(n["a"])(e)||r.i(n["b"])(e,"checked")||r.i(n["b"])(e,"unchecked")||r.i(n["b"])(e,"disabled")}},switchColor:{type:[String,Object],validator:function(e){return r.i(n["a"])(e)||r.i(n["b"])(e,"checked")||r.i(n["b"])(e,"unchecked")}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator:function(e){return"object"===("undefined"===typeof e?"undefined":i(e))?e.checked||e.unchecked:"boolean"===typeof e}},height:{type:Number,default:22},width:{type:Number,default:50},margin:{type:Number,default:3},fontSize:{type:Number}},computed:{className:function(){var e=this.toggled,t=this.disabled;return["vue-js-switch",{toggled:e,disabled:t}]},coreStyle:function(){return{width:r.i(n["c"])(this.width),height:r.i(n["c"])(this.height),backgroundColor:this.cssColors?null:this.disabled?this.colorDisabled:this.colorCurrent,borderRadius:r.i(n["c"])(Math.round(this.height/2))}},buttonRadius:function(){return this.height-2*this.margin},distance:function(){return r.i(n["c"])(this.width-this.height+this.margin)},buttonStyle:function(){var e="transform "+this.speed+"ms",t=r.i(n["c"])(this.margin),i=this.toggled?r.i(n["d"])(this.distance,t):r.i(n["d"])(t,t),o=this.switchColor?this.switchColorCurrent:null;return{width:r.i(n["c"])(this.buttonRadius),height:r.i(n["c"])(this.buttonRadius),transition:e,transform:i,background:o}},labelStyle:function(){return{lineHeight:r.i(n["c"])(this.height),fontSize:this.fontSize?r.i(n["c"])(this.fontSize):null}},colorChecked:function(){var e=this.color;return r.i(n["e"])(e)?r.i(n["f"])(e,"checked",o):e||o},colorUnchecked:function(){return r.i(n["f"])(this.color,"unchecked",a)},colorDisabled:function(){return r.i(n["f"])(this.color,"disabled",this.colorCurrent)},colorCurrent:function(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked:function(){return r.i(n["f"])(this.labels,"checked",s)},labelUnchecked:function(){return r.i(n["f"])(this.labels,"unchecked",c)},switchColorChecked:function(){return r.i(n["f"])(this.switchColor,"checked",l)},switchColorUnchecked:function(){return r.i(n["f"])(this.switchColor,"unchecked",l)},switchColorCurrent:function(){this.switchColor;return r.i(n["e"])(this.switchColor)?this.toggled?this.switchColorChecked:this.switchColorUnchecked:this.switchColor||l}},watch:{value:function(e){this.sync&&(this.toggled=!!e)}},data:function(){return{toggled:!!this.value}},methods:{toggle:function(e){var t=!this.toggled;this.sync||(this.toggled=t),this.$emit("input",t),this.$emit("change",{value:t,tag:this.tag,srcEvent:e})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r.n(n);r.d(t,"ToggleButton",(function(){return i.a}));var o=!1;t["default"]={install:function(e){o||(e.component("ToggleButton",i.a),o=!0)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return l}));var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){return"string"===typeof e},o=function(e){return"object"===("undefined"===typeof e?"undefined":n(e))},a=function(e,t){return o(e)&&e.hasOwnProperty(t)},s=function(e,t,r){return a(e,t)?e[t]:r},c=function(e){return e+"px"},l=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0px";return"translate3d("+e+", "+t+", "+r+")"}},function(e,t,r){t=e.exports=r(5)(),t.push([e.i,".vue-js-switch[data-v-25adc6c0]{display:inline-block;position:relative;vertical-align:middle;user-select:none;font-size:10px;cursor:pointer}.vue-js-switch .v-switch-input[data-v-25adc6c0]{opacity:0;position:absolute;width:1px;height:1px}.vue-js-switch .v-switch-label[data-v-25adc6c0]{position:absolute;top:0;font-weight:600;color:#fff;z-index:1}.vue-js-switch .v-switch-label.v-left[data-v-25adc6c0]{left:10px}.vue-js-switch .v-switch-label.v-right[data-v-25adc6c0]{right:10px}.vue-js-switch .v-switch-core[data-v-25adc6c0]{display:block;position:relative;box-sizing:border-box;outline:0;margin:0;transition:border-color .3s,background-color .3s;user-select:none}.vue-js-switch .v-switch-core .v-switch-button[data-v-25adc6c0]{display:block;position:absolute;overflow:hidden;top:0;left:0;border-radius:100%;background-color:#fff;z-index:2}.vue-js-switch.disabled[data-v-25adc6c0]{pointer-events:none;opacity:.6}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"===typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"===typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"===typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(e,t){e.exports=function(e,t,r,n){var i,o=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(i=e,o=e.default);var s="function"===typeof o?o.options:o;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),r&&(s._scopeId=r),n){var c=Object.create(s.computed||null);Object.keys(n).forEach((function(e){var t=n[e];c[e]=function(){return t}})),s.computed=c}return{esModule:i,exports:o,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{class:e.className},[r("input",{staticClass:"v-switch-input",attrs:{type:"checkbox",name:e.name,disabled:e.disabled},domProps:{checked:e.value},on:{change:function(t){return t.stopPropagation(),e.toggle(t)}}}),e._v(" "),r("div",{staticClass:"v-switch-core",style:e.coreStyle},[r("div",{staticClass:"v-switch-button",style:e.buttonStyle})]),e._v(" "),e.labels?[e.toggled?r("span",{staticClass:"v-switch-label v-left",style:e.labelStyle},[e._t("checked",[[e._v(e._s(e.labelChecked))]])],2):r("span",{staticClass:"v-switch-label v-right",style:e.labelStyle},[e._t("unchecked",[[e._v(e._s(e.labelUnchecked))]])],2)]:e._e()],2)},staticRenderFns:[]}},function(e,t,r){var n=r(4);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(9)("2283861f",n,!0)},function(e,t,r){var n="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i=r(10),o={},a=n&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,d=function(){},u="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e){for(var t=0;t<e.length;t++){var r=e[t],n=o[r.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](r.parts[i]);for(;i<r.parts.length;i++)n.parts.push(p(r.parts[i]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(i=0;i<r.parts.length;i++)a.push(p(r.parts[i]));o[r.id]={id:r.id,refs:1,parts:a}}}}function f(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function p(e){var t,r,n=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(n){if(l)return d;n.parentNode.removeChild(n)}if(u){var i=c++;n=s||(s=f()),t=m.bind(null,n,i,!1),r=m.bind(null,n,i,!0)}else n=f(),t=g.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}e.exports=function(e,t,r){l=r;var n=i(e,t);return h(n),function(t){for(var r=[],a=0;a<n.length;a++){var s=n[a],c=o[s.id];c.refs--,r.push(c)}t?(n=i(e,t),h(n)):n=[];for(a=0;a<r.length;a++){c=r[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}};var v=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}();function m(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function g(e,t){var r=t.css,n=t.media,i=t.sourceMap;if(n&&e.setAttribute("media",n),i&&(r+="\n/*# sourceURL="+i.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},function(e,t){e.exports=function(e,t){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=o[0],s=o[1],c=o[2],l=o[3],d={id:e+":"+i,css:s,media:c,sourceMap:l};n[a]?n[a].parts.push(d):r.push(n[a]={id:a,parts:[d]})}return r}}])}))},f464:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return h}));var n,i=r("9523"),o=r.n(i),a=r("5b5f"),s=r("b83f"),c=r("886e"),l=r("60af");class d{constructor(){o()(this,"unthreadedReadReceipts",new Map),o()(this,"threadedReadReceipts",new s["b"](()=>new Map))}setUnthreaded(e,t){this.unthreadedReadReceipts.set(e,t)}setThreaded(e,t,r){this.threadedReadReceipts.getOrCreate(e).set(t,r)}allUnthreaded(){return this.unthreadedReadReceipts.entries()}*allThreaded(){for(var e of this.threadedReadReceipts.values())for(var t of e.entries())yield t}consumeEphemeralEvents(e){null===e||void 0===e||e.forEach(e=>{e.type===l["b"].Receipt&&e.content&&Object.keys(e.content).forEach(t=>{Object.entries(e.content[t]).forEach(r=>{var[n,i]=r;if(Object(s["s"])(n))for(var o of Object.keys(i)){var a=e.content[t][n][o],c={data:e.content[t][n][o],type:n,eventId:t};a.thread_id?this.setThreaded(a.thread_id,o,c):this.setUnthreaded(o,c)}})})})}buildAccumulatedReceiptEvent(e){var t={type:l["b"].Receipt,room_id:e,content:{}},r=new s["b"](()=>new s["b"](()=>new Map));for(var[n,i]of this.allUnthreaded())r.getOrCreate(i.eventId).getOrCreate(i.type).set(n,i.data);for(var[o,a]of this.allThreaded())r.getOrCreate(a.eventId).getOrCreate(a.type).set(o,a.data);return t.content=Object(s["C"])(r),r.size>0?t:null}}function u(e){return"_localTs"in e&&void 0!==e["_localTs"]}(function(e){e["Invite"]="invite",e["Leave"]="leave",e["Join"]="join",e["Knock"]="knock"})(n||(n={}));class h{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=e,o()(this,"accountData",{}),o()(this,"inviteRooms",{}),o()(this,"knockRooms",{}),o()(this,"joinRooms",{}),o()(this,"nextBatch",null),this.opts.maxTimelineEntries=this.opts.maxTimelineEntries||50}accumulate(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.accumulateRooms(e,t),this.accumulateAccountData(e),this.nextBatch=e.next_batch}accumulateAccountData(e){e.account_data&&e.account_data.events&&e.account_data.events.forEach(e=>{this.accountData[e.type]=e})}accumulateRooms(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.rooms&&(e.rooms.invite&&Object.keys(e.rooms.invite).forEach(r=>{this.accumulateRoom(r,n.Invite,e.rooms.invite[r],t)}),e.rooms.join&&Object.keys(e.rooms.join).forEach(r=>{this.accumulateRoom(r,n.Join,e.rooms.join[r],t)}),e.rooms.leave&&Object.keys(e.rooms.leave).forEach(r=>{this.accumulateRoom(r,n.Leave,e.rooms.leave[r],t)}),e.rooms.knock&&Object.keys(e.rooms.knock).forEach(r=>{this.accumulateRoom(r,n.Knock,e.rooms.knock[r],t)}))}accumulateRoom(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(t){case n.Invite:this.knockRooms[e]&&delete this.knockRooms[e],this.accumulateInviteState(e,r);break;case n.Knock:this.accumulateKnockState(e,r);break;case n.Join:this.inviteRooms[e]&&delete this.inviteRooms[e],this.accumulateJoinState(e,r,i);break;case n.Leave:this.knockRooms[e]?delete this.knockRooms[e]:this.inviteRooms[e]?delete this.inviteRooms[e]:delete this.joinRooms[e];break;default:a["b"].error("Unknown cateogory: ",t)}}accumulateInviteState(e,t){if(t.invite_state&&t.invite_state.events)if(this.inviteRooms[e]){var r=this.inviteRooms[e];t.invite_state.events.forEach(e=>{for(var t=!1,n=0;n<r.invite_state.events.length;n++){var i=r.invite_state.events[n];i.type===e.type&&i.state_key==e.state_key&&(r.invite_state.events[n]=e,t=!0)}t||r.invite_state.events.push(e)})}else this.inviteRooms[e]={invite_state:t.invite_state}}accumulateKnockState(e,t){if(t.knock_state&&t.knock_state.events)if(this.knockRooms[e]){var r=this.knockRooms[e];t.knock_state.events.forEach(e=>{for(var t=!1,n=0;n<r.knock_state.events.length;n++){var i=r.knock_state.events[n];i.type===e.type&&i.state_key==e.state_key&&(r.knock_state.events[n]=e,t=!0)}t||r.knock_state.events.push(e)})}else this.knockRooms[e]={knock_state:t.knock_state}}accumulateJoinState(e,t){var r,n,i,o,a,s,l,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.joinRooms[e]||(this.joinRooms[e]={_currentState:Object.create(null),_timeline:[],_accountData:Object.create(null),_unreadNotifications:{},_unreadThreadNotifications:{},_summary:{},_receipts:new d});var h=this.joinRooms[e];if(t.account_data&&t.account_data.events&&t.account_data.events.forEach(e=>{h._accountData[e.type]=e}),t.unread_notifications&&(h._unreadNotifications=t.unread_notifications),h._unreadThreadNotifications=null!==(r=null!==(n=t[c["a"].stable])&&void 0!==n?n:t[c["a"].unstable])&&void 0!==r?r:void 0,t.summary){var p,v,m,g="m.heroes",y="m.invited_member_count",b="m.joined_member_count",_=h._summary,w=t.summary;_[g]=null!==(p=w[g])&&void 0!==p?p:_[g],_[b]=null!==(v=w[b])&&void 0!==v?v:_[b],_[y]=null!==(m=w[y])&&void 0!==m?m:_[y]}if(h._receipts.consumeEphemeralEvents(null===(i=t.ephemeral)||void 0===i?void 0:i.events),t.timeline&&t.timeline.limited&&(h._timeline=[]),null===(o=t.state)||void 0===o||null===(a=o.events)||void 0===a||a.forEach(e=>{f(h._currentState,e)}),null===(s=t.timeline)||void 0===s||null===(l=s.events)||void 0===l||l.forEach((e,r)=>{var n,i;if(f(h._currentState,e),u)i=e;else{var o;i=Object.assign({},e),void 0!==i.unsigned&&(i.unsigned=Object.assign({},i.unsigned));var a=null===(o=e.unsigned)||void 0===o?void 0:o.age;void 0!==a&&(i._localTs=Date.now()-a)}h._timeline.push({event:i,token:0===r&&null!==(n=t.timeline.prev_batch)&&void 0!==n?n:null})}),h._timeline.length>this.opts.maxTimelineEntries)for(var S=h._timeline.length-this.opts.maxTimelineEntries,E=S;E<h._timeline.length;E++)if(h._timeline[E].token){h._timeline=h._timeline.slice(E,h._timeline.length);break}}getJSON(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={join:{},invite:{},knock:{},leave:{}};Object.keys(this.inviteRooms).forEach(e=>{t.invite[e]=this.inviteRooms[e]}),Object.keys(this.knockRooms).forEach(e=>{t.knock[e]=this.knockRooms[e]}),Object.keys(this.joinRooms).forEach(r=>{var n=this.joinRooms[r],i={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:n._unreadNotifications,unread_thread_notifications:n._unreadThreadNotifications,summary:n._summary};Object.keys(n._accountData).forEach(e=>{i.account_data.events.push(n._accountData[e])});var o=n._receipts.buildAccumulatedReceiptEvent(r);o&&i.ephemeral.events.push(o),n._timeline.forEach(t=>{if(!i.timeline.prev_batch){if(!t.token)return;i.timeline.prev_batch=t.token}var r;!e&&u(t.event)?(r=Object.assign({},t.event),void 0!==r.unsigned&&(r.unsigned=Object.assign({},r.unsigned)),delete r._localTs,r.unsigned=r.unsigned||{},r.unsigned.age=Date.now()-t.event._localTs):r=t.event,i.timeline.events.push(r)});for(var a=Object.create(null),c=i.timeline.events.length-1;c>=0;c--){var l=i.timeline.events[c];if(null!==l.state_key&&void 0!==l.state_key){var d=Object(s["g"])(l);d.unsigned&&(d.unsigned.prev_content&&(d.content=d.unsigned.prev_content),d.unsigned.prev_sender&&(d.sender=d.unsigned.prev_sender)),f(a,d)}}Object.keys(n._currentState).forEach(e=>{Object.keys(n._currentState[e]).forEach(t=>{var r=n._currentState[e][t];a[e]&&a[e][t]&&(r=a[e][t]),i.state.events.push(r)})}),t.join[r]=i});var r=[];Object.keys(this.accountData).forEach(e=>{r.push(this.accountData[e])});var n={nextBatch:this.nextBatch,roomsData:t,accountData:r};return e&&(n=JSON.parse(JSON.stringify(n))),n}getNextBatchToken(){return this.nextBatch}}function f(e,t){null!==t.state_key&&void 0!==t.state_key&&t.type&&(e[t.type]||(e[t.type]=Object.create(null)),e[t.type][t.state_key]=t)}},f495:function(e,t,r){"use strict";var n=r("c04ea"),i=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},f576:function(e,t,r){"use strict";var n=r("3fb5"),i=r("93e6"),o=r("8707").Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function l(e,t,r,n,i,o,a){return c(e+(t&r|~t&n)+i+o|0,a)+t|0}function d(e,t,r,n,i,o,a){return c(e+(t&n|r&~n)+i+o|0,a)+t|0}function u(e,t,r,n,i,o,a){return c(e+(t^r^n)+i+o|0,a)+t|0}function h(e,t,r,n,i,o,a){return c(e+(r^(t|~n))+i+o|0,a)+t|0}n(s,i),s.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=l(r,n,i,o,e[0],3614090360,7),o=l(o,r,n,i,e[1],3905402710,12),i=l(i,o,r,n,e[2],606105819,17),n=l(n,i,o,r,e[3],3250441966,22),r=l(r,n,i,o,e[4],4118548399,7),o=l(o,r,n,i,e[5],1200080426,12),i=l(i,o,r,n,e[6],2821735955,17),n=l(n,i,o,r,e[7],4249261313,22),r=l(r,n,i,o,e[8],1770035416,7),o=l(o,r,n,i,e[9],2336552879,12),i=l(i,o,r,n,e[10],4294925233,17),n=l(n,i,o,r,e[11],2304563134,22),r=l(r,n,i,o,e[12],1804603682,7),o=l(o,r,n,i,e[13],4254626195,12),i=l(i,o,r,n,e[14],2792965006,17),n=l(n,i,o,r,e[15],1236535329,22),r=d(r,n,i,o,e[1],4129170786,5),o=d(o,r,n,i,e[6],3225465664,9),i=d(i,o,r,n,e[11],643717713,14),n=d(n,i,o,r,e[0],3921069994,20),r=d(r,n,i,o,e[5],3593408605,5),o=d(o,r,n,i,e[10],38016083,9),i=d(i,o,r,n,e[15],3634488961,14),n=d(n,i,o,r,e[4],3889429448,20),r=d(r,n,i,o,e[9],568446438,5),o=d(o,r,n,i,e[14],3275163606,9),i=d(i,o,r,n,e[3],4107603335,14),n=d(n,i,o,r,e[8],1163531501,20),r=d(r,n,i,o,e[13],2850285829,5),o=d(o,r,n,i,e[2],4243563512,9),i=d(i,o,r,n,e[7],1735328473,14),n=d(n,i,o,r,e[12],2368359562,20),r=u(r,n,i,o,e[5],4294588738,4),o=u(o,r,n,i,e[8],2272392833,11),i=u(i,o,r,n,e[11],1839030562,16),n=u(n,i,o,r,e[14],4259657740,23),r=u(r,n,i,o,e[1],2763975236,4),o=u(o,r,n,i,e[4],1272893353,11),i=u(i,o,r,n,e[7],4139469664,16),n=u(n,i,o,r,e[10],3200236656,23),r=u(r,n,i,o,e[13],681279174,4),o=u(o,r,n,i,e[0],3936430074,11),i=u(i,o,r,n,e[3],3572445317,16),n=u(n,i,o,r,e[6],76029189,23),r=u(r,n,i,o,e[9],3654602809,4),o=u(o,r,n,i,e[12],3873151461,11),i=u(i,o,r,n,e[15],530742520,16),n=u(n,i,o,r,e[2],3299628645,23),r=h(r,n,i,o,e[0],4096336452,6),o=h(o,r,n,i,e[7],1126891415,10),i=h(i,o,r,n,e[14],2878612391,15),n=h(n,i,o,r,e[5],4237533241,21),r=h(r,n,i,o,e[12],1700485571,6),o=h(o,r,n,i,e[3],2399980690,10),i=h(i,o,r,n,e[10],4293915773,15),n=h(n,i,o,r,e[1],2240044497,21),r=h(r,n,i,o,e[8],1873313359,6),o=h(o,r,n,i,e[15],4264355552,10),i=h(i,o,r,n,e[6],2734768916,15),n=h(n,i,o,r,e[13],1309151649,21),r=h(r,n,i,o,e[4],4149444226,6),o=h(o,r,n,i,e[11],3174756917,10),i=h(i,o,r,n,e[2],718787259,15),n=h(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s},f5df:function(e,t,r){"use strict";var n=r("00ee"),i=r("1626"),o=r("c6b6"),a=r("b622"),s=a("toStringTag"),c=Object,l="Arguments"===o(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(error){}};e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=d(t=c(e),s))?r:l?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},f60b:function(e,t,r){var n=r("b639"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},f64d:function(e,t,r){"use strict";r.r(t);var n=r("d643");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},f693:function(e){e.exports=JSON.parse('{"caption":{"create":"Create","addPublicChatName":"Add Public Chat Name","addGroupNamePlaceHolder":"Add Group Name","createPublicChat":"Create public chat","chatTopic":"Topic renamed","publicRoomTitle":"Public Room","asModerator":"as moderator","marked":"marked","unmarked":"unmarked","removeBan":"Remove Ban","cancelModeration":"Remove moderation","uploadFiles":"Télécharger fichiers","header":"En-tête","dragAndDropAFile":"Glisser déposer fichier","chatInvite":"Vous avez été invité à discuter avec:","cantJoin":"Vous ne pouvez pas rejoindre la conversation avec:","chatInviteDecline":"Vous pouvez rejoindre la conversation ou refuser l\'invitation","creatorLeft":"Car l\'administrateur a quitté la conversation","encrypted":"Encrypté","noImages":"Il n\'y a pas encore d\'images dans la conversation","noFiles":"Il n\'y a pas encore d\'files dans la conversation","inviteUser":"Inviter utilisateur","invite":"Inviter","add":"Ajouter","mute":"Mode silence","unmute":"Mode son","leave":"Quitter","Info":"Info","new":"Nouveau","typing":"en train d\'écrire","accNotFound":"Votre inscription est en cours, veuillez patienter...","emptyList":"liste vide (filtrée ou juste vide)","welcome":"Bienvenue sur Pocketnet chat","startNewChat":"Commencer une conversation","chats":"Conversations","shareWith":"Partager avec","newChat":"Nouvelle conversation","moveToChat":"Aller à la conversation","queryNoResults":"Auncun résulats","needMoreCharacters":"Veuillez saisir plus de caractères","createGroup":"Créer groupe","unabletoDecrypt":"* Impossible de decrypter","messageDeleted":"Message supprimé","sentImage":"envoyé image","sentVoiceMessage":"envoyé un message vocal","invitationToChat":"Invitation à discuter","invitationToRoom":"Invitation to room","leftChat":"a quitté la conversation","joined":"a rejoint","chatRenamed":"Conversation renommé en ","recentComment":"Commentaire récent:","share":"PARTAGER","followers":"Abonnés:","reputation":"Réputation:","following":"Abonnements:","theme":"Thème:","contacts":"Contacts","other":"Recherche globale","phoneContacts":"Contacts téléphone","chooseInviteMedia":"Veuillez choisir comment inviter:","admin":"Administrateur","moderator":"Modérateur","videocall":"Appel Vidéo","call":"Appel","leaveAndDelete":"Quitter et supprimer","donate":"Faire un don","makeModerator":"Définir comme Modérateur","ban":"Bannir","kick":"Expulser","members":"Membres","media":"Médias","files":"Fichiers","contactsList":"Liste de contacts","send":"envoyer","pageCaption":"Légende de page","caption":"Légende","text":"Texte","placeholder":"placeholder","sendTransactionTo":"Envoyer transaction à","toBePaidByReceiver":"Payé par le receveur","toBePaidBySender":"Payé par l\'expéditeur","source":"Source","amount":"Montant","receiver":"Receveur","message":"Message","includeFeesInAmount":"Inclure les frais dans le montant","transactionFees":"Frais de transaction","totalAmount":"Montant total","balanceTooLow":"Solde trop faible","transactionError":"Erreur, la transaction ne peut être effectuée","calculateFees":"Calculer les frais","startChatWith":"Discuter avec:","searchResult":"Résultat de la recherche","joinedInTheChat":"à rejoint la conversation","invited":"invité ","hasInvited":"invité ","inTheChat":" dans la conversation","banned":"banni","andRoom":"et conversation","left":"quiité","theChat":" la conversation ","made":"fait ","aModerator":" un modérateur","editedChatNameTo ":"edité le nom de la conversation en ","somebody":"Quelqu\'un","sent":"a envoyé","PKOINto":" PKOIN à ","response":"Réponse","messagefrom":"Transférer message","edited":"Edité","settings":"Paramètres","unauthorized":"Non autorisé","search":"Recherche","replyOnMessage":"Répondre au message","editMessage":"Editer message","inviteFriend":"Inviter des amis","emptyContactList":"Liste de contacts vide","joinApp":"Rejoindre Pocketnet","hasInvitedToJoin":"vous a invité à rejoindre Pocketnet","contactsempty":"Vous n\'avez pas encore de contacts, vous pouvez utiliser la recherche","usernotgen":"User did not generate their encryption keys yet. You will be able to chat them when their keys are generated.","younotgen":"Please wait a minute, Your encryption keys are being generated...","chatsearchingempty":"No chats found for the specified filter","sendmessage":"Send message","messages":"Messages","you":"You","sentfile":"sent file:","administrators":"Propriétaire","moderators":"Modérateurs","participants":"Intervenants","streamChat":"Chat en streaming","membersList":"Liste des membres","forwardMessage":"Forward Message | Forward {n} Messages","from":"From"},"input":{"patientEmailPlaceholder":"Email","refillNamePlaceholder":"Saisissez à nouveau le nom"},"message":{},"button":{"starChatButton":"Commencer une conversation ","decline":"Refuser","declineandignore":"Ignorer utilisateur","join":"Rejoindre","ok":"Ok","copy":"Copier","forward":"Transférer","delete":"Supprimer","resend":"Resend","save":"Enregistrer","reply":"Répondre","share":"Partager","download":"Télécharger","downloaded":"Téléchargé","goToPocketnetProfile":"Aller au profile Pocketnet","sendFile":"Envoyer fichier","takePhotoOrVideo":"Envoyer image","sendCoins":"Envoyer PKOIN","edit":"Editer","select":"Sélectionner","block":"Bloquer","unblock":"Débloquer","blockUser":"Bloquer utilisateur","Complain":"Se plaindre","chat":"Discuter","donations":"Des dons"},"yes":"Oui","cancel":"Annuler","teamMessages":{"1-title":"Bienvenue sur la messagerie privée!","1-list1":"Messagerie privée qui n\'est PAS connectée à votre numéro de téléphone","1-list2":"Chiffrement de bout en bout pour chaque conversation","1-list3":"Toutes les images envoyées ou reçues par le biais du chat sont stockées sous forme cryptée","1-list4":"L\'historique des messages est conservé pendant 7 jours uniquement","2-title":"Bonne nouvelle!","2-message1":"Nous avons récemment publié les mises à jour majeures suivantes:","2-list1":"Messagerie privée cryptée non connectée à votre numéro de téléphone","2-list2":"Possibilité de faire des dons en PKOIN aux blogueurs","2-list3":"Vidéo et Streaming en direct","2-message2":"Invitez dès maintenant vos amis et faites partie du grand avenir de l\'internet décentralisé!","2-button":"Inviter des amis"},"error_generic":"Something went wrong, please try again later.","sendingerror":"An error occurred while sending the message","details":"Details","settings_pin":"Pin chat window","checked":"Yes","unchecked":"No","settings_read":"Send read receipts","messagewasburn":"This message remains only in the memory of your device","messagewillburn":"The message will be deleted soon","micaccessbrowser":"Access to the microphone is restricted, please check your browser settings.","micaccesscommonproblem":"Sorry, for some reason it is not possible to record voice messages on the device","micaccesscordova":"Access to the microphone is restricted, please check your device settings.","micdevicenotfound":"Audio recording device not found"}')},f6b4:function(e,t,r){"use strict";var n=r("c532");function i(){this.handlers=[]}i.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},f760:function(e,t,r){"use strict";r.r(t);var n=r("d369");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},f761:function(t,r,n){"use strict";n.r(r),n.d(r,"InvalidTokenError",(function(){return i})),n.d(r,"jwtDecode",(function(){return s}));class i extends Error{}function o(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function a(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return o(t)}catch(r){return atob(t)}}function s(t,r){if("string"!==typeof t)throw new i("Invalid token specified: must be a string");r||(r={});const n=!0===r.header?0:1,o=t.split(".")[n];if("string"!==typeof o)throw new i("Invalid token specified: missing part #"+(n+1));let s;try{s=a(o)}catch(e){throw new i(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(s)}catch(e){throw new i(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}i.prototype.name="InvalidTokenError"},f772:function(e,t,r){"use strict";var n=r("5692"),i=r("90e3"),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},f8cd:function(e,t,r){"use strict";var n=r("5926"),i=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new i("The argument can't be less than 0");return t}},f8e6:function(e,t,r){"use strict";r.r(t);var n=r("1a95");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i)},faa1:function(e,t,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function a(e){console&&console.warn&&console.warn(e)}n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}e.exports=c,e.exports.once=_,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function d(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,s;if(d(r),o=e._events,void 0===o?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"===typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=u(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a(c)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function v(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?b(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function _(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}S(e,t,o,{once:!0}),"error"!==t&&w(e,i,{once:!0})}))}function w(e,t,r){"function"===typeof e.on&&S(e,"error",t,r)}function S(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)o(c,this,t);else{var l=c.length,d=g(c,l);for(r=0;r<l;++r)o(d[r],this,t)}return!0},c.prototype.addListener=function(e,t){return h(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return h(this,e,t,!0)},c.prototype.once=function(e,t){return d(t),this.on(e,p(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,p(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,n,i,o,a;if(d(t),n=this._events,void 0===n)return this;if(r=n[e],void 0===r)return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():y(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)i=o[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},c.prototype.listeners=function(e){return v(this,e,!0)},c.prototype.rawListeners=function(e){return v(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},fc01:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=void 0;var n=r("95a7"),i=r("dcab");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=d(e,"string");return"symbol"===o(t)?t:String(t)}function d(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u=function(){function e(t){if(a(this,e),this.definition=t,!this.definition)throw new Error("Definition is required");(0,n.assertPresent)(t,"id"),(0,n.assertPresent)(t,"creatorUserId"),(0,n.assertPresent)(t,"type"),(0,n.assertPresent)(t,"url")}return c(e,[{key:"creatorUserId",get:function(){return this.definition.creatorUserId}},{key:"type",get:function(){return this.definition.type}},{key:"id",get:function(){return this.definition.id}},{key:"name",get:function(){return this.definition.name||null}},{key:"title",get:function(){return this.rawData.title||null}},{key:"templateUrl",get:function(){return this.definition.url}},{key:"origin",get:function(){return new URL(this.templateUrl).origin}},{key:"waitForIframeLoad",get:function(){return!1!==this.definition.waitForIframeLoad&&(this.definition.waitForIframeLoad,!0)}},{key:"rawData",get:function(){return this.definition.data||{}}},{key:"getCompleteUrl",value:function(e){return(0,i.runTemplate)(this.templateUrl,this.definition,e)}}]),e}();t.Widget=u},fc6a:function(e,t,r){"use strict";var n=r("44ad"),i=r("1d80");e.exports=function(e){return n(i(e))}},fc97:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e["Cancel"]="cancel",e["Restart"]="restart",e["Send"]="send"}(n||(n={}))},fc9b:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnstableApiVersion=t.MatrixApiVersion=t.CurrentApiVersions=void 0;var n=function(e){return e["Prerelease1"]="0.0.1",e["Prerelease2"]="0.0.2",e}({});t.MatrixApiVersion=n;var i=function(e){return e["MSC2762"]="org.matrix.msc2762",e["MSC2871"]="org.matrix.msc2871",e["MSC2931"]="org.matrix.msc2931",e["MSC2974"]="org.matrix.msc2974",e["MSC2876"]="org.matrix.msc2876",e["MSC3819"]="org.matrix.msc3819",e["MSC3846"]="town.robin.msc3846",e["MSC3869"]="org.matrix.msc3869",e["MSC3973"]="org.matrix.msc3973",e["MSC4039"]="org.matrix.msc4039",e}({});t.UnstableApiVersion=i;var o=[n.Prerelease1,n.Prerelease2,i.MSC2762,i.MSC2871,i.MSC2931,i.MSC2974,i.MSC2876,i.MSC3819,i.MSC3846,i.MSC3869,i.MSC3973,i.MSC4039];t.CurrentApiVersions=o},fdbf:function(e,t,r){"use strict";var n=r("04f8");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fe93:function(e,t,r){"use strict";var n=r("6de4");function i(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}var o=RegExp(Object.keys(n).map(i).join("|"),"g");function a(e){return n[e]}function s(e){return e.replace(o,a)}e.exports=s},ffd9:function(e,t,r){"use strict";function n(e){for(let t=0;t<e.length;t++)e[t]=0;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=n}});
//# sourceMappingURL=matrix-element.min.js.map