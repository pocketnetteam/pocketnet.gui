{"version":3,"sources":["webpack:///./src/components/chats/assets/icon.vue","webpack:///src/components/chats/assets/icon.vue","webpack:///./src/components/chats/assets/icon.vue?e412","webpack:///./src/components/chats/assets/icon.vue?5232","webpack:///./src/components/chats/assets/name.vue?cad2","webpack:///./src/components/chat/list/index.vue","webpack:///./src/components/events/list/index.vue","webpack:///./src/components/events/list/index.js","webpack:///./src/components/events/list","webpack:///./src/components/events/list/index.vue?459a","webpack:///./src/components/chat/list/index.js","webpack:///./src/components/chat/list","webpack:///./src/components/chat/list/index.vue?2203","webpack:///./src/components/chats/assets/icon.vue?cbad","webpack:///./src/components/chats/assets/name.vue?e6a6","webpack:///./src/components/chats/assets/name.vue?a9e9","webpack:///./src/components/chat/list/index.sass?1ade","webpack:///./src/components/chats/assets/icon.vue?46c0","webpack:///./src/components/events/list/index.sass?57af","webpack:///./src/components/events/list/index.sass?a626","webpack:///./src/components/chats/assets/name.vue","webpack:///src/components/chats/assets/name.vue","webpack:///./src/components/chats/assets/name.vue?82f9","webpack:///./src/components/chats/assets/name.vue?73d3","webpack:///./src/components/chats/assets/icon.vue?087f","webpack:///./src/components/chat/list/index.sass?f5b8","webpack:///./src/components/chat/list/index.sass","webpack:///./src/components/events/list/index.sass"],"names":["render","_vm","this","_c","_self","staticClass","class","unknowngroupusers","groupAvatar","attrs","key","allnotifications","opacity","slidesPerView","usersinfo","status","unseen","singleAvatar","staticRenderFns","name","data","single","props","chat","m_chat","Number","hideunseen","Boolean","dontuseslides","computed","$store","state","blockedCheck","selfMembership","f","date","addseconds","moment","utc","summary","lastModified","toDate","Date","getUnreadNotificationCount","users","u","core","mtrx","anotherChatUsers","roomId","_","first","shuffle","getJoinRule","currentState","getMembers","length","member","getmatrixid","userId","membership","image","source","i","blockeduser","chatUsersInfo","us","each","kit","_this$m_chat$currentS","avatar","getStateEvents","event","content","avatarUrl","injectStyles","context","style0","__inject__","component","___CSS_LOADER_API_IMPORT___","exports","push","module","_setupProxy","bin","pocketnet","bout","minimized","fix","active","ref","timeline","error","events","lloading","scrollType","selectedMessages","searchresults","on","updatedSize","scrollE","removeEvent","editingEvent","replyEvent","e","imageGallery","menuIsVisibleHandler","scrollToEvent","_e","mobile","ios","menuOpen","imagesList","hasInputChatEmbedded","mousewheel","dscroll","_l","event_id","refInFor","fromsearch","eventinsearchresult","multiSelect","showMultiSelect","selectMessage","removeMessage","galleryOpen","text","emounted","toreference","loading","directives","rawName","value","scrollbottomshow","expression","scrolldown","Object","Array","Error","String","inject","components","lastScrollPosition","type","tmt","lscroll","c","ls","voiceMessageQueue","countshow","provide","addToQueue","message","id","find","v","playNext","current","sortedVoiceMessageQueue","findIndex","next","setTime","play","activated","restoreScrollPosition","deactivated","saveScrollPosition","watch","ev","immediate","handler","notificationCount","scrollTop","scrollToNew","sortBy","a","isios","mapState","auth","mapGetters","eventsByPages","ps","pc","destroyed","menuState","set","updated","methods","container","$refs","originalScrollBehavior","style","scrollBehavior","$nextTick","scrollTo","top","_this$lscroll","scrollToReadMessages","shareEvent","$emit","showerror","$dialog","alert","stringifyiedError","okText","backdropClose","catch","dupdated","debounce","size","scroll","ddscroll","scrollCorrection","s","scrollHeight","clientHeight","showPhotoSwipe","index","isOpen","$set","options","hidePhotoSwipe","scrolling","r_element","offsetTop","classList","add","setTimeout","remove","isVisible","preventDefault","deltaY","smoothScroll","target","speed","smooth","moving","pos","frame","document","body","documentElement","normalizeWheelDelta","detail","wheelDelta","update","delta","Math","abs","requestFrame","dest","max","min","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","func","filter","item","message_id","splice","reference","filterType","default","encryptedEvents","scrollingTo","cancelNextScroll","lastEvent","esize","p_b","p_f","updateTimeout","updateInterval","firstPaginate","readPromise","mounted","init","clearInterval","setInterval","settings_read","dontreadreceipts","eventsTypes","types","toArray","members","created","beforeDestroy","unpaginate","_eventCount","getLiveTimeline","wh","getEvents","lastCallAccess","pop","localRedactionEvent","getRedactionEvent","accepted","keys","reverse","relations","replacingEventDate","getDate","Infinity","uniq","clearEventId","makeid","getEventsAndEncrypt","Promise","all","map","pcrypto","resolve","decrypted","pr","subtype","deep","einfo","getAudio","console","msgtype","getAudioUnencrypt","decryptEvent","then","d","ts","timelineSet","rt","getChildEventsForEvent","last","getLastReplacement","edited","block","customTimelineSet","_ref","_asyncToGenerator","sdk","Filter","client","getUserId","setDefinition","room","contains_url","filterId","getOrCreateFilter","credentials","getOrCreateFilteredTimelineSet","_x","_x2","apply","arguments","_ref2","getTimelineSet","TimelineWindow","load","r","autoPaginateAll","paginateToEvent","promise","paginate","autoPaginate","direction","needLoad","rnd","canPaginate","count","reject","readAll","safespace","readEvent","streamMode","byme","me","sender","sendReadReceipt","readFirst","readLast","readEvents","readOne","debouncedReadAll","readError","eid","setRoomReadMarkers","readed","finally","hasFocus","hiddenInParent","getJoinedMemberCount","eventslist","pretry","globalpreloader","__esModule","locals","shadowRoot","isShowGroupIcon","public","isPublic","miniappicon","_v","_s","convertedName","preview","_this$m_chat","_this$m_chat2","getContent","user","userinfo","names","indexOf","replace","join","chatUsers","markMatches","markText","_this$m_chat3","miniappchat","slice","icon"],"mappings":"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","file":"matrix-element.2.min.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chatIcon\",class:{ unknowngroupusers: _vm.unknowngroupusers }},[(_vm.groupAvatar)?_c('div',{staticClass:\"chatGroupIcon\"},[_c('userpic',{attrs:{\"image\":_vm.groupAvatar}})],1):_c('userspic',{key:_vm.allnotifications,class:{ opacity: _vm.groupAvatar },attrs:{\"slidesPerView\":_vm.slidesPerView,\"users\":_vm.usersinfo,\"status\":_vm.status,\"unseen\":_vm.unseen,\"single\":_vm.singleAvatar}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"chatIcon\" :class=\"{ unknowngroupusers }\">\r\n\t\t<div v-if=\"groupAvatar\" class=\"chatGroupIcon\">\r\n\t\t\t<userpic :image=\"groupAvatar\"/>\r\n\t\t</div>\r\n\t\t<userspic\r\n\t\t\tv-else\r\n\t\t\t:slidesPerView=\"slidesPerView\"\r\n\t\t\t:users=\"usersinfo\"\r\n\t\t\t:status=\"status\"\r\n\t\t\t:unseen=\"unseen\"\r\n\t\t\t:key=\"allnotifications\"\r\n\t\t\t:single=\"singleAvatar\"\r\n\t\t\t:class=\"{ opacity: groupAvatar }\"\r\n\t\t/>\r\n\r\n\t\t<!--<div class=\"unknowngroupusersicon\" v-if=\"unknowngroupusers\">\r\n\t\t\t<i class=\"fas fa-question\"></i>\r\n\t\t</div>-->\r\n\t</div>\r\n</template>\r\n\r\n<style scoped lang=\"sass\">\r\n.opacity\r\n\topacity: 0\r\n.chatIcon\r\n\twidth: 100%\r\n\tposition: relative\r\n\r\n.unknowngroupusersicon\r\n\tposition: absolute\r\n\tleft: 0\r\n\ttop: 0\r\n\tbottom: 0\r\n\tright: 0\r\n\tfont-size: 0.7em\r\n\tdisplay: flex\r\n\tjustify-content: center\r\n\talign-items: center\r\n\tcolor: #fff\r\n\r\n.unknowngroupusers\r\n\t.bgimage\r\n\t\ttransform: scale(0.7)\r\n.chatGroupIcon\r\n\twidth: 100%\r\n\theight: 100%\r\n.chatGroupIcon img\r\n\twidth: 100%\r\n\theight: 100%\r\n\tborder-radius: 50%\r\n\tobject-fit: cover\r\n\tobject-position: 50% 50%\r\n\tposition: absolute\r\n\ttop: 0\r\n\tz-index: 100\r\n</style>\r\n\r\n<script>\r\nimport f from \"@/application/functions\";\r\n\r\nexport default {\r\n\tname: \"chatIcon\",\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tsingle: [],\r\n\t\t};\r\n\t},\r\n\tprops: {\r\n\t\tchat: {},\r\n\t\tm_chat: {},\r\n\t\tslidesPerView: Number,\r\n\t\thideunseen: Boolean,\r\n\t\tdontuseslides: Boolean,\r\n\t},\r\n\tcomputed: {\r\n\t\tallnotifications: function () {\r\n\t\t\treturn this.$store.state.allnotifications || \"0\";\r\n\t\t},\r\n\r\n\t\tunseen: function () {\r\n\t\t\tif (this.hideunseen) return 0;\r\n\r\n\t\t\tif (this.blockedCheck) return 0;\r\n\r\n\t\t\tif (this.m_chat.selfMembership === \"invite\") {\r\n\t\t\t\tif (\r\n\t\t\t\t\tf.date.addseconds(\r\n\t\t\t\t\t\tmoment.utc(this.m_chat.summary.lastModified).toDate(),\r\n\t\t\t\t\t\t86400\r\n\t\t\t\t\t) > new Date()\r\n\t\t\t\t)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\tthis.allnotifications;\r\n\r\n\t\t\treturn this.m_chat.getUnreadNotificationCount();\r\n\t\t},\r\n\t\tusers: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\tvar u = this.core.mtrx.anotherChatUsers(this.chat.roomId);\r\n\r\n\t\t\tif (this.dontuseslides) {\r\n\t\t\t\tu = _.first(u, 4);\r\n\t\t\t}\r\n\r\n\t\t\treturn _.first(_.shuffle(u), 49);\r\n\t\t},\r\n\t\tsingleAvatar: function () {\r\n\t\t\tif (!this.chat && !this.m_chat) return {};\r\n\t\t\tif (\r\n\t\t\t\tthis.m_chat.getJoinRule() === \"public\" &&\r\n\t\t\t\tthis.m_chat.currentState.getMembers().length === 1\r\n\t\t\t) {\r\n\t\t\t\tvar member = this.m_chat.currentState.getMembers()[0];\r\n\t\t\t\tvar data = this.$store.state.users[f.getmatrixid(member.userId)];\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tdata.status = member.membership;\r\n\t\t\t\t\tdata.image = data.source.i;\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\tblockedCheck: function () {\r\n\t\t\tvar users = this.core.mtrx.anotherChatUsers(this.m_chat.roomId);\r\n\r\n\t\t\tif (users.length == 1) {\r\n\t\t\t\treturn this.core.mtrx.blockeduser(users[0].userId);\r\n\t\t\t}\r\n\t\t},\r\n\t\tusersinfo: function () {\r\n\t\t\tvar u = this.core.mtrx.chatUsersInfo(\r\n\t\t\t\tthis.chat.roomId,\r\n\t\t\t\t\"anotherChatUsers\"\r\n\t\t\t);\r\n\r\n\t\t\tif (this.dontuseslides) {\r\n\t\t\t\tu = _.first(u, 4);\r\n\t\t\t}\r\n\r\n\t\t\treturn _.first(_.shuffle(u), 49);\r\n\t\t},\r\n\r\n\t\tstatus: function () {\r\n\t\t\tvar us = {};\r\n\r\n\t\t\t_.each(this.users, (u) => {\r\n\t\t\t\tus[u.userId] = this.core.mtrx.blockeduser(u.userId) ? \"blocked\" : u.membership;\r\n\t\t\t});\r\n\r\n\t\t\treturn us;\r\n\t\t},\r\n\r\n\t\tunknowngroupusers: function () {\r\n\t\t\treturn this.core.mtrx.kit.unknowngroupusers(this.m_chat);\r\n\t\t},\r\n\r\n\t\tgroupAvatar: function () {\r\n\t\t\tconst avatar =\r\n\t\t\t\tthis.m_chat.currentState.getStateEvents(\"m.room.avatar\")[0]?.event\r\n\t\t\t\t\t.content.avatarUrl;\r\n\t\t\treturn avatar !== \"\" ? avatar : \"\";\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./icon.vue?vue&type=template&id=1a53247e&scoped=true\"\nimport script from \"./icon.vue?vue&type=script&lang=js\"\nexport * from \"./icon.vue?vue&type=script&lang=js\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./icon.vue?vue&type=style&index=0&id=1a53247e&prod&scoped=true&lang=sass\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"1a53247e\",\n  null\n  ,true\n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".nameofchat[data-v-8fb6d080]{white-space:nowrap}.nameline[data-v-8fb6d080]{display:flex;align-items:flex-end}.miniappicon[data-v-8fb6d080]{margin-right:.25em;margin-block:.25em}.miniappicon .bgimage[data-v-8fb6d080]{width:12px;height:12px;border-radius:2px}.iconGroup[data-v-8fb6d080]{font-size:.4em;width:16px;min-width:16px;text-align:center;height:16px;line-height:16px;border-radius:8px;background:rgb(var(--neutral-grad-2));margin-right:.5em;margin-block:.25em}.iconGroup.public[data-v-8fb6d080]{background:rgb(var(--color-good))}.iconGroup.public i[data-v-8fb6d080]{color:rgb(var(--text-on-bg-shadow-color))}.iconGroup i[data-v-8fb6d080]{color:rgb(var(--neutral-grad-1))}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{class:{\n\t\tbin: _vm.pocketnet,\n\t\tbout: !_vm.pocketnet,\n\t\tminimized: _vm.minimized,\n\t\tfix: _vm.pocketnet,\n\t\tactive: _vm.active\n\t},attrs:{\"id\":\"chatList\"}},[_c('div',{ref:\"work\",staticClass:\"work\"},[_c('div',{ref:\"events\",staticClass:\"timeLineWrapper\"},[(_vm.timeline)?_c('events',{ref:\"eventslist\",attrs:{\"error\":_vm.error,\"timeline\":_vm.timeline,\"events\":_vm.events,\"chat\":_vm.chat,\"loading\":_vm.lloading,\"scrollType\":_vm.scrollType,\"selectedMessages\":_vm.selectedMessages,\"searchresults\":_vm.searchresults},on:{\"updated\":_vm.updatedSize,\"scroll\":_vm.scrollE,\"removeEvent\":_vm.removeEvent,\"editingEvent\":_vm.editingEvent,\"replyEvent\":_vm.replyEvent,\"galleryEventOpen\":e => _vm.imageGallery(e),\"menuIsVisible\":_vm.menuIsVisibleHandler,\"toreference\":_vm.scrollToEvent}}):_vm._e()],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"maskedtop\",class:{\n\t\tmobile: _vm.mobile,\n\t\tios: _vm.ios,\n\t\tmenuOpen: _vm.menuOpen,\n\t\timagesList: this.scrollType === 'custom' ? 'imagesList' : ''\n\t},attrs:{\"id\":\"events\",\"data-chat-input-embedded\":_vm.hasInputChatEmbedded}},[_c('div',{ref:\"container\",staticClass:\"eventsflex\",class:{ mobile: _vm.mobile, ios: _vm.ios, menuOpen: _vm.menuOpen },on:{\"wheel\":_vm.mousewheel,\"scroll\":_vm.dscroll}},[_c('div',{staticClass:\"ewr\"},_vm._l((_vm.events),function(event,i){return _c('div',{key:event.event.event_id,ref:event.event.event_id,refInFor:true,staticClass:\"eventWrapper\",class:{ fromsearch: _vm.eventinsearchresult(event) },attrs:{\"event\":event.event.event_id}},[_c('eventsEvent',{attrs:{\"event\":event,\"prevevent\":_vm.events[i + 1],\"galleryData\":_vm.events,\"chat\":_vm.chat,\"timeline\":_vm.timeline,\"multiSelect\":_vm.multiSelect,\"selectedMessages\":_vm.selectedMessages},on:{\"showMultiSelect\":_vm.showMultiSelect,\"selectMessage\":_vm.selectMessage,\"removeMessage\":_vm.removeMessage,\"openImageEvent\":e => _vm.galleryOpen(e),\"removeEvent\":e => _vm.removeEvent(event),\"editing\":text => _vm.editingEvent({ event, text }),\"reply\":e => _vm.replyEvent({ event }),\"mounted\":_vm.emounted,\"menuIsVisible\":_vm.menuIsVisibleHandler,\"toreference\":_vm.toreference}})],1)}),0),(_vm.loading)?_c('div',{staticClass:\"preloadingWrapper\"},[_c('linepreloader')],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.scrollbottomshow),expression:\"scrollbottomshow\"}],staticClass:\"scrollbottom\",on:{\"click\":_vm.scrolldown}},[_c('i',{staticClass:\"fas fa-chevron-down\"})])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapState } from \"vuex\";\r\nimport f from \"@/application/functions\";\r\nimport { mapGetters } from \"vuex/dist/vuex.common.js\";\r\n\r\nexport default {\r\n\tname: \"events\",\r\n\tprops: {\r\n\t\ttimeline: Object,\r\n\t\tevents: Array,\r\n\t\tchat: Object,\r\n\t\tloading: Boolean,\r\n\t\tscrollType: \"\",\r\n\t\tsearchresults: null,\r\n\t\terror: [Object, Error, String],\r\n\t\tselectedMessages: [],\r\n\t},\r\n\tinject: [\"matches\", \"menuState\"],\r\n\tcomponents: {},\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tlastScrollPosition: 0,\r\n\t\t\ttype: \"\",\r\n\t\t\ttmt: null,\r\n\t\t\tlscroll: null,\r\n\t\t\tmenuOpen: false,\r\n\t\t\tc: 1,\r\n\t\t\tls: 0,\r\n\t\t\tvoiceMessageQueue: [],\r\n\t\t\tcountshow: 0,\r\n\t\t\tmultiSelect: false,\r\n\t\t};\r\n\t},\r\n\tprovide() {\r\n\t\treturn {\r\n\t\t\taddToQueue: (message, id) => {\r\n\t\t\t\tvar f = _.find(this.voiceMessageQueue, (v) => {\r\n\t\t\t\t\treturn v.id == id;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!f)\r\n\t\t\t\t\tthis.voiceMessageQueue = [...this.voiceMessageQueue, { message, id }];\r\n\t\t\t},\r\n\t\t\tplayNext: (id) => {\r\n\t\t\t\tlet current = this.sortedVoiceMessageQueue.findIndex((i) => {\r\n\t\t\t\t\treturn i.id === id;\r\n\t\t\t\t});\r\n\t\t\t\tlet next =\r\n\t\t\t\t\tcurrent === -1 ? null : this.sortedVoiceMessageQueue[current + 1];\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tnext.message.setTime(0);\r\n\t\t\t\t\tnext.message.play();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tactivated() {\r\n\t\tthis.restoreScrollPosition();\r\n\t},\r\n\tdeactivated() {\r\n\t\tthis.saveScrollPosition();\r\n\t},\r\n\twatch: {\r\n\t\tevents: function (ev) {},\r\n\r\n\t\tselectedMessages: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler: function () {\r\n\t\t\t\tif (this.selectedMessages.length === 0) {\r\n\t\t\t\t\tthis.multiSelect = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tnotificationCount: function () {\r\n\t\t\tif (\r\n\t\t\t\tthis.lscroll &&\r\n\t\t\t\tthis.lscroll.scrollTop < 180 &&\r\n\t\t\t\tthis.chat &&\r\n\t\t\t\tthis.chat.getUnreadNotificationCount()\r\n\t\t\t) {\r\n\t\t\t\tthis.scrollToNew();\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\tsortedVoiceMessageQueue() {\r\n\t\t\treturn _.sortBy(this.voiceMessageQueue, (a) => {\r\n\t\t\t\treturn a.id;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tios() {\r\n\t\t\treturn f.isios();\r\n\t\t},\r\n\r\n\t\t...mapState({\r\n\t\t\tauth: (state) => state.auth,\r\n\t\t\tmobile: (state) => state.mobile,\r\n\r\n\t\t\tscrollbottomshow: function () {\r\n\t\t\t\treturn this.lscroll && this.lscroll.scrollTop > 500;\r\n\t\t\t},\r\n\t\t\tminimized: (state) => state.minimized,\r\n\t\t\tnotificationCount: (state) => state.allnotifications,\r\n\t\t}),\r\n\t\t...mapGetters([\"hasInputChatEmbedded\"]),\r\n\t\teventsByPages: function () {\r\n\t\t\tvar ps = [];\r\n\t\t\tvar pc = 0;\r\n\r\n\t\t\t_.each(this.events, function (e) {\r\n\t\t\t\tif (!pc) ps.push([]);\r\n\r\n\t\t\t\tps[ps.length - 1].push(e);\r\n\r\n\t\t\t\tpc++;\r\n\r\n\t\t\t\tif (pc > 19) pc = 0;\r\n\t\t\t});\r\n\r\n\t\t\treturn ps;\r\n\t\t},\r\n\t},\r\n\tdestroyed: function () {\r\n\t\t/*this.core.menu(null);*/\r\n\t\tthis.menuState.set(null);\r\n\t},\r\n\tupdated: function () {\r\n\t\t/*if(this.countshow === 0) {\r\n\t  this.scrollToReadMessages();\r\n\t}\r\n\tthis.countshow = 1;*/\r\n\t},\r\n\tmethods: {\r\n\t\teventinsearchresult: function (event) {\r\n\t\t\tif (this.searchresults) {\r\n\t\t\t\treturn _.find(this.searchresults, (e) => {\r\n\t\t\t\t\treturn e.event.event_id == event.event.event_id;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\trestoreScrollPosition() {\r\n\t\t\tconst container = this.$refs.container;\r\n\t\t\tconst originalScrollBehavior = container.style.scrollBehavior;\r\n\t\t\tcontainer.style.scrollBehavior = \"auto\";\r\n\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tcontainer.scrollTo({ top: this.lastScrollPosition });\r\n\t\t\t\tcontainer.style.scrollBehavior = originalScrollBehavior;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveScrollPosition() {\r\n\t\t\tthis.lastScrollPosition = this.lscroll?.scrollTop;\r\n\t\t},\r\n\t\tscrollToReadMessages: function () {\r\n\t\t\t/*if(this.notificationCount > 0) {\r\n\t\tconst elem = document.getElementById(\"eventWrapper_\" + (this.notificationCount + 1));\r\n\r\n\t\tif(elem)\r\n\t\t  elem.scrollIntoView()\r\n\t  }*/\r\n\t\t},\r\n\t\tshareEvent: function ({ event }) {\r\n\t\t\tthis.$emit(\"shareEvent\", { event });\r\n\t\t},\r\n\t\tshowerror: function () {\r\n\t\t\t// stringifyiedError\r\n\r\n\t\t\treturn this.$dialog\r\n\t\t\t\t.alert(this.stringifyiedError, {\r\n\t\t\t\t\tokText: \"Ok\",\r\n\t\t\t\t\tbackdropClose: true,\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {});\r\n\t\t},\r\n\r\n\t\tdupdated: _.debounce(function () {\r\n\t\t\tthis.$emit(\"updated\", this.size());\r\n\t\t}, 75),\r\n\r\n\t\tdscroll: _.debounce(function () {\r\n\t\t\treturn this.scroll();\r\n\t\t}, 35),\r\n\r\n\t\tddscroll: function (e) {\r\n\t\t\t/*var _ls = this.$refs['container'].scrollTop\r\n\r\n\t\t\tif (Math.abs(_ls - this.ls) > 500 && this.c * _ls < this.c * this.ls){\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.ls = _ls\r\n\t\t\t}*/\r\n\r\n\t\t\tthis.dscroll();\r\n\t\t},\r\n\r\n\t\temounted: function () {\r\n\t\t\tthis.$nextTick(function () {\r\n\t\t\t\tthis.scrollCorrection();\r\n\t\t\t\tthis.dupdated();\r\n\t\t\t});\r\n\r\n\t\t\t/*if(!this.mobile)\r\n\t\t\t\tnew this.smoothScroll(this.$refs[\"container\"], 120, 15);*/\r\n\t\t},\r\n\t\tscroll: function () {\r\n\t\t\tthis.$emit(\"scroll\", this.size());\r\n\t\t},\r\n\r\n\t\tsize: function () {\r\n\t\t\tvar s = {\r\n\t\t\t\tscrollHeight: 0,\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tclientHeight: 0,\r\n\t\t\t};\r\n\r\n\t\t\tif (this.$refs[\"container\"]) {\r\n\t\t\t\ts.scrollHeight = this.$refs[\"container\"].scrollHeight;\r\n\t\t\t\ts.scrollTop = this.c * this.$refs[\"container\"].scrollTop;\r\n\t\t\t\ts.clientHeight = this.$refs[\"container\"].clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.lscroll = s;\r\n\r\n\t\t\treturn s;\r\n\t\t},\r\n\r\n\t\teditingEvent: function ({ event, text }) {\r\n\t\t\tthis.$emit(\"editingEvent\", { event, text });\r\n\t\t},\r\n\r\n\t\treplyEvent: function ({ event }) {\r\n\t\t\tthis.$emit(\"replyEvent\", { event });\r\n\t\t},\r\n\r\n\t\tremoveEvent: function (event) {\r\n\t\t\tthis.$emit(\"removeEvent\", event);\r\n\t\t},\r\n\r\n\t\tshowPhotoSwipe(index) {\r\n\t\t\tthis.isOpen = true;\r\n\t\t\tthis.$set(this.options, \"index\", index);\r\n\t\t},\r\n\r\n\t\thidePhotoSwipe() {\r\n\t\t\tthis.isOpen = false;\r\n\t\t},\r\n\r\n\t\tgalleryOpen(e) {\r\n\t\t\tthis.$emit(\"galleryEventOpen\", e);\r\n\t\t},\r\n\r\n\t\tscrolldown() {\r\n\t\t\tthis.scrollToNew(0);\r\n\t\t},\r\n\r\n\t\tscrollCorrection() {\r\n\t\t\t//this.scrollToNew(this.c * this.ls)\r\n\t\t},\r\n\t\tscrollToNew(s) {\r\n\t\t\tconst container = this.$refs[\"container\"];\r\n\t\t\tif (container.scrolling) {\r\n\t\t\t\tcontainer.scrolling(-1, this.c * s);\r\n\t\t\t} else {\r\n\t\t\t\tcontainer.scrollTop = this.c * s;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollToEvent(e) {\r\n\t\t\tif (this.$refs[e.event.event_id]) {\r\n\t\t\t\tvar r_element = this.$refs[e.event.event_id][0];\r\n\t\t\t\tthis.scrollToNew(\r\n\t\t\t\t\tr_element.offsetTop -\r\n\t\t\t\t\t\tthis.lscroll.clientHeight / 2 +\r\n\t\t\t\t\t\tr_element.clientHeight / 2\r\n\t\t\t\t);\r\n\r\n\t\t\t\tr_element.classList.add(\"attention\");\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tr_element.classList.remove(\"attention\");\r\n\t\t\t\t}, 1000);\r\n\t\t\t}\r\n\t\t\t//this.scrollToNew(120);\r\n\t\t},\r\n\r\n\t\tmenuIsVisibleHandler: function (isVisible) {\r\n\t\t\tthis.menuOpen = isVisible;\r\n\t\t\tthis.$emit(\"menuIsVisible\", isVisible);\r\n\t\t},\r\n\r\n\t\tmousewheel: function (e) {\r\n\t\t\tif (this.scrollType === \"custom\") {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t/*if(this.$refs[\"container\"].scrollTop >= this.$refs[\"container\"].scrollHeight - this.$refs[\"container\"].clientHeight - 1 && e.deltaY < 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.$refs[\"container\"].scrollTop == 0 && e.deltaY > 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.$refs[\"container\"].scrollTop += -e.deltaY;\r\n\r\n\t\t\t\t/*const container = this.$refs[\"container\"];\r\n\t\t\t\tif (container.scrolling) {\r\n\t\t\t\t\tcontainer.scrolling(e);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsmoothScroll: function (target, speed, smooth) {\r\n\t\t\tlet moving = false,\r\n\t\t\t\tpos = target.scrollTop,\r\n\t\t\t\tframe =\r\n\t\t\t\t\ttarget === document.body && document.documentElement\r\n\t\t\t\t\t\t? document.documentElement\r\n\t\t\t\t\t\t: target; // safari is the new IE\r\n\r\n\t\t\ttarget.scrolling = function (e, dest) {\r\n\t\t\t\tlet delta = normalizeWheelDelta(e);\r\n\r\n\t\t\t\tpos += delta * speed;\r\n\t\t\t\tpos = Math.max(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tMath.min(pos, dest || target.scrollHeight - frame.clientHeight)\r\n\t\t\t\t); // limit scrolling\r\n\r\n\t\t\t\tif (!moving) update();\r\n\t\t\t};\r\n\r\n\t\t\tfunction normalizeWheelDelta(e) {\r\n\t\t\t\tif (e.detail) {\r\n\t\t\t\t\tif (e.wheelDelta) {\r\n\t\t\t\t\t\treturn (e.wheelDelta / e.detail / 40) * (e.detail > 0 ? 1 : -1); // Opera\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn -e.detail / 3; // Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (e.wheelDelta) {\r\n\t\t\t\t\treturn e.wheelDelta / 120; // IE,Safari,Chrome\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction update() {\r\n\t\t\t\tmoving = true;\r\n\r\n\t\t\t\tlet delta = (pos - target.scrollTop) / smooth;\r\n\r\n\t\t\t\ttarget.scrollTop += delta;\r\n\r\n\t\t\t\tif (Math.abs(delta) > 0.5) {\r\n\t\t\t\t\trequestFrame(update);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmoving = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet requestFrame = (function () {\r\n\t\t\t\t// requestAnimationFrame cross browser\r\n\t\t\t\treturn (\r\n\t\t\t\t\twindow.requestAnimationFrame ||\r\n\t\t\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\t\t\tfunction (func) {\r\n\t\t\t\t\t\twindow.setTimeout(func, 1000 / 50);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t})();\r\n\t\t},\r\n\t\tshowMultiSelect() {\r\n\t\t\tthis.multiSelect = true;\r\n\t\t},\r\n\t\tselectMessage(message) {\r\n\t\t\tif (\r\n\t\t\t\tthis.selectedMessages.filter(\r\n\t\t\t\t\t(item) => item.message_id === message.message_id\r\n\t\t\t\t).length === 0\r\n\t\t\t) {\r\n\t\t\t\tthis.selectedMessages.push(message);\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveMessage(message) {\r\n\t\t\tconst index = this.selectedMessages.findIndex(\r\n\t\t\t\t(item) => item.message_id === message.message_id\r\n\t\t\t);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tthis.selectedMessages.splice(index, 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttoreference(reference) {\r\n\t\t\tthis.$emit(\"toreference\", reference);\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e2a5fc48&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js&external\"\nexport * from \"./index.js?vue&type=script&lang=js&external\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=e2a5fc48&prod&scoped=true&lang=sass&external\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"e2a5fc48\",\n  null\n  ,true\n)\n\nexport default component.exports","import { mapState } from \"vuex\";\r\n\r\nimport events from \"@/components/events/list/index.vue\";\r\nimport f from \"@/application/functions\";\r\n\r\nexport default {\r\n\tname: \"chatList\",\r\n\tprops: {\r\n\t\tchat: Object,\r\n\t\tfilterType: String,\r\n\t\terror: [Object, Error, String],\r\n\t\tselectedMessages: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t},\r\n\t\t},\r\n\t\tsearchresults: null,\r\n\t},\r\n\r\n\tcomponents: {\r\n\t\tevents,\r\n\t},\r\n\r\n\tinject: [\"streamMode\"],\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tencryptedEvents: [],\r\n\t\t\tloading: false,\r\n\t\t\tscrolling: false,\r\n\t\t\tscrollingTo: 0,\r\n\t\t\tcancelNextScroll: false,\r\n\t\t\ttimeline: null,\r\n\t\t\tlastEvent: {},\r\n\t\t\tscrollType: String,\r\n\t\t\tesize: {},\r\n\t\t\tp_b: false,\r\n\t\t\tp_f: false,\r\n\r\n\t\t\tupdateTimeout: null,\r\n\t\t\tupdateInterval: null,\r\n\t\t\tevents: [],\r\n\t\t\tfirstPaginate: true,\r\n\t\t\treadPromise: null,\r\n\r\n\t\t\tactivated: false,\r\n\t\t};\r\n\t},\r\n\r\n\tmounted: function () {\r\n\t\tthis.init();\r\n\r\n\t\tif (this.chat) {\r\n\t\t\t// this.readAll()\r\n\t\t}\r\n\t},\r\n\r\n\twatch: {\r\n\t\t//$route: 'getdata'\r\n\r\n\t\tactive: function () {\r\n\t\t\t// if(this.minimized && !this.active){\r\n\t\t\t//   this.scrollToNew(0)\r\n\t\t\t// }\r\n\t\t\t// if(this.minimized && this.active){\r\n\t\t\t//   this.readAll();\r\n\t\t\t// }\r\n\t\t},\r\n\r\n\t\tfilterType: function () {\r\n\t\t\tthis.init();\r\n\t\t},\r\n\r\n\t\tactivated: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler: function () {\r\n\t\t\t\tif (this.updateInterval) {\r\n\t\t\t\t\tclearInterval(this.updateInterval);\r\n\t\t\t\t\tthis.updateInterval = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.activated) {\r\n\t\t\t\t\tthis.updateInterval = setInterval(this.update, 300);\r\n\t\t\t\t} else {\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tlloading: function () {\r\n\t\t\t\treturn this.loading || this[\"p_f\"] || this[\"p_b\"];\r\n\t\t\t},\r\n\r\n\t\t\tauth: (state) => state.auth,\r\n\r\n\t\t\tsettings_read: (state) => !state.dontreadreceipts,\r\n\r\n\t\t\teventsTypes: function () {\r\n\t\t\t\tvar types = {\r\n\t\t\t\t\t\"m.room.message\": true,\r\n\t\t\t\t\t\"p.room.encrypt.message\": true,\r\n\t\t\t\t\t\"p.room.\": true,\r\n\t\t\t\t\t\"m.room.image\": true,\r\n\t\t\t\t\t\"m.room.audio\": true,\r\n\t\t\t\t\t\"m.room.file\": true,\r\n\t\t\t\t\t\"m.call.invite\": true,\r\n\t\t\t\t\t\"m.room.request_calls_access\": true,\r\n\t\t\t\t\t\"m.call.hangup\": true,\r\n\t\t\t\t\t\"m.call.reject\": true,\r\n\t\t\t\t\t\"m.fully_read\": true,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t_.toArray((this.chat && this.chat.currentState.members) || {})\r\n\t\t\t\t\t\t.length > 2\r\n\t\t\t\t) {\r\n\t\t\t\t\ttypes[\"m.room.member\"] = true;\r\n\t\t\t\t\ttypes[\"m.room.power_levels\"] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn types;\r\n\t\t\t},\r\n\r\n\t\t\tpocketnet: (state) => state.pocketnet,\r\n\t\t\tminimized: (state) => state.minimized,\r\n\t\t\tactive: (state) => state.active,\r\n\r\n\t\t\tbin: function (state) {\r\n\t\t\t\treturn state.pocketnet;\r\n\t\t\t},\r\n\t\t}),\r\n\t},\r\n\r\n\tcreated() {\r\n\t\tthis.activated = true;\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tthis.activated = false;\r\n\r\n\t\tif (this.timeline) {\r\n\t\t\tthis.timeline.unpaginate(this.timeline._eventCount, true);\r\n\t\t}\r\n\t},\r\n\r\n\tactivated() {\r\n\t\tthis.activated = true;\r\n\t},\r\n\r\n\tdeactivated() {\r\n\t\tthis.activated = false;\r\n\t},\r\n\r\n\tmethods: {\r\n\t\teditingEvent: function ({ event, text }) {\r\n\t\t\tthis.$emit(\"editingEvent\", { event, text });\r\n\t\t},\r\n\t\treplyEvent: function ({ event }) {\r\n\t\t\tthis.$emit(\"replyEvent\", { event });\r\n\t\t},\r\n\r\n\t\tremoveEvent: function (event) {\r\n\t\t\tthis.chat.getLiveTimeline().removeEvent(event.event.event_id);\r\n\t\t},\r\n\t\twh: function () {\r\n\t\t\tif (this.esize.clientHeight) return this.esize.clientHeight;\r\n\t\t},\r\n\t\tgetEvents: function () {\r\n\t\t\tvar events = this.timeline.getEvents();\r\n\r\n\t\t\tvar lastCallAccess = events\r\n\t\t\t\t.filter((e) => {\r\n\t\t\t\t\treturn e.event.type === \"m.room.request_calls_access\";\r\n\t\t\t\t})\r\n\t\t\t\t.pop();\r\n\r\n\t\t\tevents = _.filter(events, (e) => {\r\n\t\t\t\tvar type = e.event.type;\r\n\r\n\t\t\t\tif (e.localRedactionEvent() || e.getRedactionEvent()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.event.type === \"m.room.request_calls_access\") {\r\n\t\t\t\t\tif (e.event.event_id === lastCallAccess.event.event_id) {\r\n\t\t\t\t\t\tif (e.event.content.accepted !== null) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\te.event.type === \"m.room.power_levels\" &&\r\n\t\t\t\t\tObject.keys(e.event.content.users).length === 1\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.chat.currentState.getMembers().length <= 2 &&\r\n\t\t\t\t\te.event.type === \"m.room.member\" &&\r\n\t\t\t\t\t\"m.room.power_levels\"\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\treturn !this.eventsTypes || this.eventsTypes[type];\r\n\t\t\t});\r\n\r\n\t\t\tevents = events.reverse();\r\n\r\n\t\t\tthis.relations(events);\r\n\r\n\t\t\tevents = _.sortBy(events, function (e) {\r\n\t\t\t\treturn e.replacingEventDate() || e.getDate() || Infinity;\r\n\t\t\t});\r\n\r\n\t\t\tevents = events.reverse();\r\n\r\n\t\t\tevents = _.uniq(events, (e) => {\r\n\t\t\t\treturn this.core.mtrx.clearEventId(e) || f.makeid();\r\n\t\t\t});\r\n\r\n\t\t\tevents = _.sortBy(events, function (e) {\r\n\t\t\t\treturn e.getDate() || Infinity;\r\n\t\t\t});\r\n\r\n\t\t\tevents = events.reverse();\r\n\r\n\t\t\tthis.$emit(\"getEvents\", events);\r\n\t\t\t// events = _.filter(events, function (e) {\r\n\t\t\t//   return e.ty\r\n\t\t\t// })\r\n\r\n\t\t\treturn events;\r\n\t\t},\r\n\r\n\t\tgetEventsAndEncrypt: function () {\r\n\t\t\tvar events = this.getEvents();\r\n\r\n\t\t\treturn Promise.all(\r\n\t\t\t\t_.map(events, (e) => {\r\n\t\t\t\t\tif (!this.chat.pcrypto) return Promise.resolve();\r\n\r\n\t\t\t\t\tif (e.event.decrypted) return Promise.resolve();\r\n\r\n\t\t\t\t\tvar pr = null;\r\n\t\t\t\t\tvar subtype = f.deep(e, \"event.content.msgtype\");\r\n\r\n\t\t\t\t\t//if(f.deep(e, 'event.content.msgtype') != 'm.encrypted') return Promise.resolve()\r\n\r\n\t\t\t\t\tvar einfo =\r\n\t\t\t\t\t\tf.deep(e, \"event.content.info.secrets\") ||\r\n\t\t\t\t\t\tf.deep(e, \"event.content.pbody.secrets\");\r\n\r\n\t\t\t\t\tif (einfo) {\r\n\t\t\t\t\t\tif (subtype == \"m.image\") {\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (subtype == \"m.audio\") {\r\n\t\t\t\t\t\t\tpr = this.core.mtrx.getAudio(this.chat, e).catch((error) => {\r\n\t\t\t\t\t\t\t\tconsole.error(error);\r\n\r\n\t\t\t\t\t\t\t\te.event.decrypted = {\r\n\t\t\t\t\t\t\t\t\tmsgtype: \"m.bad.encrypted\",\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (subtype == \"m.audio\") {\r\n\t\t\t\t\t\t\tpr = this.core.mtrx.getAudioUnencrypt(this.chat, e);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (subtype == \"m.encrypted\") {\r\n\t\t\t\t\t\t\tpr = this.chat.pcrypto\r\n\t\t\t\t\t\t\t\t.decryptEvent(e.event)\r\n\t\t\t\t\t\t\t\t.then((d) => {\r\n\t\t\t\t\t\t\t\t\te.event.decrypted = d;\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\te.event.decrypted = {\r\n\t\t\t\t\t\t\t\t\t\tmsgtype: \"m.bad.encrypted\",\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!pr) return Promise.resolve();\r\n\r\n\t\t\t\t\treturn pr.catch((e) => {\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t).then(() => {\r\n\t\t\t\treturn Promise.resolve(events);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\trelations: function (events) {\r\n\t\t\tvar ts = this.timeline.timelineSet;\r\n\r\n\t\t\t_.each(events, (e) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//if(!e.event.content.edited){\r\n\t\t\t\t\tvar rt = ts.relations.getChildEventsForEvent(\r\n\t\t\t\t\t\te.event.event_id,\r\n\t\t\t\t\t\t\"m.replace\",\r\n\t\t\t\t\t\t\"m.room.message\",\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (rt) {\r\n\t\t\t\t\t\tvar last = rt.getLastReplacement();\r\n\r\n\t\t\t\t\t\tif (last) {\r\n\t\t\t\t\t\t\te.event.content.body = last.event.content.body;\r\n\t\t\t\t\t\t\te.event.content.edited = last.event.event_id;\r\n\t\t\t\t\t\t\te.event.content.block = last.event.content.block;\r\n\t\t\t\t\t\t\te.event.content.msgtype = last.event.content.msgtype;\r\n\t\t\t\t\t\t\te.event.decrypted = last.event.decrypted;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcustomTimelineSet: async function (name, set) {\r\n\t\t\tif (!name) return;\r\n\r\n\t\t\tvar filter = new this.core.mtrx.sdk.Filter(client.getUserId());\r\n\r\n\t\t\tif (typeof set === \"function\") set(filter);\r\n\t\t\telse {\r\n\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\troom: {\r\n\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\tcontains_url: this.filterType === \"images\",\r\n\t\t\t\t\t\t\ttypes: [\"m.room.message\"],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfilter.filterId = await this.core.mtrx.client.getOrCreateFilter(\r\n\t\t\t\t`FILTER_${name}_` + this.core.mtrx.client.credentials.userId,\r\n\t\t\t\tfilter,\r\n\t\t\t);\r\n\r\n\t\t\treturn this.chat.getOrCreateFilteredTimelineSet(filter);\r\n\t\t},\r\n\t\tinit: async function () {\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.firstPaginate = true;\r\n\r\n\t\t\t//this.chat.getTimelineForEvent('$FXUvcjIqcvDu0meLTnz-8plloZoNHLIYEb6WGQMWO3s')\r\n\r\n\t\t\t//this.chat.getTimelineForEvent('$FXUvcjIqcvDu0meLTnz-8plloZoNHLIYEb6WGQMWO3s')\r\n\r\n\t\t\t//this.chat.getLiveTimeline();\r\n\r\n\t\t\tvar ts;\r\n\r\n\t\t\tswitch (this.filterType) {\r\n\t\t\t\tcase \"images\": {\r\n\t\t\t\t\tthis.scrollType = \"custom\";\r\n\t\t\t\t\tts = await this.customTimelineSet(\"FILES\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"text\": {\r\n\t\t\t\t\tts = await this.customTimelineSet(\"TEXT\", (filter) => {\r\n\t\t\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\t\t\troom: {\r\n\t\t\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\t\t\ttypes: [\"m.room.message\"],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"donate\": {\r\n\t\t\t\t\tts = await this.customTimelineSet(\"TEXT\", (filter) => {\r\n\t\t\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\t\t\troom: {\r\n\t\t\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\t\t\tcontains_url: true,\r\n\t\t\t\t\t\t\t\t\ttypes: [\"m.room.message\"],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*case \"pkoindisabled\": {\r\n\t\t\t\t\tts = await this.customTimelineSet('TEXT', (filter) => {\r\n\t\t\t\t\t\tfilter.setDefinition({\r\n\t\t\t\t\t\t\troom: {\r\n\t\t\t\t\t\t\t\ttimeline: {\r\n\t\t\t\t\t\t\t\t\tcontains_url: false,\r\n\t\t\t\t\t\t\t\t\ttypes: [\"m.room.message\"]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tvar timeline = this.chat.getLiveTimeline();\r\n\t\t\t\t\tts = timeline.getTimelineSet();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.timeline = new this.core.mtrx.sdk.TimelineWindow(\r\n\t\t\t\tthis.core.mtrx.client,\r\n\t\t\t\tts,\r\n\t\t\t);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.timeline\r\n\t\t\t\t\t.load(/*null, (this.wh() || 600)*/)\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\treturn this.getEventsAndEncrypt();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((events) => {\r\n\t\t\t\t\t\tthis.events = events;\r\n\r\n\t\t\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.autoPaginateAll();\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t}, 30);\r\n\r\n\t\t\t/*setTimeout(() => {\r\n\t\t\t\tthis.paginateToEvent('$FXUvcjIqcvDu0meLTnz-8plloZoNHLIYEb6WGQMWO3s').then(event => {\r\n\t\t\t\t\tconsole.log(\"TOEVENT\", event)\r\n\t\t\t\t})\r\n\t\t\t}, 1000)*/\r\n\t\t},\r\n\r\n\t\tpaginateToEvent: function (event_id) {\r\n\t\t\tvar event = _.find(this.events, (e) => {\r\n\t\t\t\treturn e.event.event_id == event_id;\r\n\t\t\t});\r\n\r\n\t\t\tif (event) {\r\n\t\t\t\treturn Promise.resolve(event);\r\n\t\t\t} else {\r\n\t\t\t\tvar promise = this.paginate(\"b\");\r\n\r\n\t\t\t\tif (promise) {\r\n\t\t\t\t\treturn promise\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\treturn this.paginateToEvent(event_id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(\"EROR\", e);\r\n\t\t\t\t\t\t\tif (!event) return Promise.resolve(null);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!event) return Promise.resolve(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tautoPaginate: function (direction) {\r\n\t\t\tif (this.needLoad(direction)) {\r\n\t\t\t\tvar pr = this.paginate(direction);\r\n\r\n\t\t\t\tif (pr) pr.catch((e) => {});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpaginate: function (direction, rnd) {\r\n\t\t\t//$(this.$el).find('.eventsflex')[0]\r\n\r\n\t\t\tif (!this.loading && this.timeline && !this[\"p_\" + direction]) {\r\n\t\t\t\tif (this.timeline.canPaginate(direction) || rnd) {\r\n\t\t\t\t\tthis[\"p_\" + direction] = true;\r\n\r\n\t\t\t\t\tlet count = /*this.firstPaginate ? 24 : */ 20;\r\n\r\n\t\t\t\t\tvar error = null;\r\n\r\n\t\t\t\t\treturn this.timeline\r\n\t\t\t\t\t\t.paginate(direction, count)\r\n\t\t\t\t\t\t.then((e) => {\r\n\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\terror = e;\r\n\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\treturn this.getEventsAndEncrypt();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((events) => {\r\n\t\t\t\t\t\t\tthis.events = events;\r\n\r\n\t\t\t\t\t\t\tthis.firstPaginate = false;\r\n\r\n\t\t\t\t\t\t\tthis[\"p_\" + direction] = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tif (e) return Promise.reject(e);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.readAll();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tautoPaginateAll: function () {\r\n\t\t\tif (this.filterType === \"images\") {\r\n\t\t\t\tthis.autoPaginate(\"b\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.autoPaginate(\"b\");\r\n\t\t\t\tthis.autoPaginate(\"f\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tneedLoad: function (direction) {\r\n\t\t\tvar r = false;\r\n\r\n\t\t\tvar scrollHeight = this.esize.scrollHeight || 0;\r\n\t\t\tvar scrollTop = this.esize.scrollTop || 0;\r\n\t\t\tvar clientHeight = Math.max(this.esize.clientHeight || 0, 800);\r\n\r\n\t\t\tif (direction == \"b\") {\r\n\t\t\t\tvar safespace = clientHeight;\r\n\r\n\t\t\t\tif (scrollHeight - scrollTop < clientHeight + safespace) r = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (scrollTop < clientHeight) r = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn r;\r\n\t\t},\r\n\r\n\t\treadEvent: function (event) {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tvar byme = this.core.mtrx.me(event.event.sender);\r\n\r\n\t\t\tif (byme) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.core.mtrx.client.sendReadReceipt(event);\r\n\t\t},\r\n\r\n\t\treadFirst: function () {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tvar events = this.timeline.getEvents();\r\n\r\n\t\t\tthis.readEvent(events[0]);\r\n\t\t},\r\n\r\n\t\treadLast: function () {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tvar events = this.timeline.getEvents();\r\n\r\n\t\t\tthis.readEvent(events[events.length - 1]);\r\n\t\t},\r\n\r\n\t\treadEvents: function (events) {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\t_.each(events, (e) => {\r\n\t\t\t\tthis.readEvent(e);\r\n\t\t\t});\r\n\t\t},\r\n\t\treadOne() {\r\n\t\t\tif (this.streamMode) return;\r\n\r\n\t\t\tthis.core.mtrx\r\n\t\t\t\t.client(this.chat.timeline[this.chat.timeline.length - 1])\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tdebouncedReadAll: _.debounce(function () {\r\n\t\t\tif (!this.chat || this.streamMode) return;\r\n\t\t\tif (this.readPromise) return;\r\n\r\n\t\t\tvar i = this.chat.timeline.length - 1;\r\n\t\t\tvar event = null;\r\n\r\n\t\t\tevent = this.chat.timeline[i];\r\n\r\n\t\t\t/*while (i >= 0 && !event) {\r\n\t\t\t\tvar e = this.chat.timeline[i];\r\n\r\n\t\t\t\tvar type = (e.event.type || \"\")\r\n\r\n\t\t\t\tif (type.indexOf('m.call') > -1){\r\n\t\t\t\t\tif(type.indexOf('candidates') > -1 ) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.readed) return\r\n\r\n\t\t\t\tif (!this.core.mtrx.me(e.sender.userId)) {\r\n\r\n\t\t\t\t\tif(!this.core.mtrx.isReaded(e)){\r\n\t\t\t\t\t\tevent = e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti--;\r\n\t\t\t}*/\r\n\r\n\t\t\tif (event) {\r\n\t\t\t\tif (event.readError) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar eid = event.event.event_id;\r\n\r\n\t\t\t\tthis.readPromise =\r\n\t\t\t\t\tthis.streamMode ||\r\n\t\t\t\t\tthis.core.mtrx.client\r\n\t\t\t\t\t\t.setRoomReadMarkers(\r\n\t\t\t\t\t\t\tthis.chat.currentState.roomId,\r\n\t\t\t\t\t\t\teid,\r\n\t\t\t\t\t\t\tevent /*, {\r\n\t\t\t\t\t\thidden: !this.settings_read ? true : false,\r\n\t\t\t\t\t}*/,\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\tevent.readed = true;\r\n\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\tevent.readError = e;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\t\tthis.readPromise = null;\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, 100),\r\n\t\treadAll: function () {\r\n\t\t\tif (\r\n\t\t\t\tdocument.hasFocus() &&\r\n\t\t\t\t(!this.pocketnet || this.active) &&\r\n\t\t\t\t!this.core.hiddenInParent &&\r\n\t\t\t\tthis.chat &&\r\n\t\t\t\tthis.chat.getJoinedMemberCount() > 0 &&\r\n\t\t\t\tthis.chat.getUnreadNotificationCount() !== 0\r\n\t\t\t) {\r\n\t\t\t\tthis.debouncedReadAll();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//////////////\r\n\r\n\t\tscrollE: function (size) {\r\n\t\t\tthis.updatedSize(size);\r\n\t\t\tthis.$emit(\"scroll\", size);\r\n\t\t},\r\n\r\n\t\tupdatedSize: function (size) {\r\n\t\t\tthis.esize = size;\r\n\t\t},\r\n\r\n\t\tupdate: function (e) {\r\n\t\t\tif (!this.activated) return;\r\n\t\t\tif (!this.scrolling) {\r\n\t\t\t\tthis.autoPaginateAll();\r\n\t\t\t} else {\r\n\t\t\t\t// e.preventDefault()\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollToNew: function (s) {\r\n\t\t\tthis.scrolling = true;\r\n\r\n\t\t\tthis.$refs.eventslist.scrollToNew(s);\r\n\r\n\t\t\tthis.scrolling = false;\r\n\t\t},\r\n\r\n\t\timageGallery: function (e) {\r\n\t\t\tthis.$emit(\"eventImage\", e);\r\n\t\t},\r\n\r\n\t\tmenuIsVisibleHandler: function (isVisible) {\r\n\t\t\tthis.$emit(\"menuIsVisible\", isVisible);\r\n\t\t},\r\n\r\n\t\tscrollToEvent: function (reference) {\r\n\t\t\tf.pretry(() => {\r\n\t\t\t\treturn !this.loading && this.timeline && !this[\"p_b\"];\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$store.state.globalpreloader = true;\r\n\r\n\t\t\t\t\treturn this.paginateToEvent(reference.event.event_id);\r\n\t\t\t\t})\r\n\t\t\t\t.then((event) => {\r\n\t\t\t\t\tif (event) {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$refs.eventslist.scrollToEvent(event);\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.$store.state.globalpreloader = false;\r\n\t\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&external\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2031c374&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js&external\"\nexport * from \"./index.js?vue&type=script&lang=js&external\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=2031c374&prod&scoped=true&lang=sass&external\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"2031c374\",\n  null\n  ,true\n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=style&index=0&id=1a53247e&prod&scoped=true&lang=sass\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"541e8887\", content, shadowRoot)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=style&index=0&id=8fb6d080&prod&scoped=true&lang=sass\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"357f71e2\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=style&index=0&id=8fb6d080&prod&scoped=true&lang=sass\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=2031c374&prod&scoped=true&lang=sass&external\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".opacity[data-v-1a53247e]{opacity:0}.chatIcon[data-v-1a53247e]{width:100%;position:relative}.unknowngroupusersicon[data-v-1a53247e]{position:absolute;left:0;top:0;bottom:0;right:0;font-size:.7em;display:flex;justify-content:center;align-items:center;color:#fff}.unknowngroupusers .bgimage[data-v-1a53247e]{transform:scale(.7)}.chatGroupIcon[data-v-1a53247e],.chatGroupIcon img[data-v-1a53247e]{width:100%;height:100%}.chatGroupIcon img[data-v-1a53247e]{border-radius:50%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%;position:absolute;top:0;z-index:100}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=e2a5fc48&prod&scoped=true&lang=sass&external\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=e2a5fc48&prod&scoped=true&lang=sass&external\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"1ee5f21a\", content, shadowRoot)\n};","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"nameline\"},[(_vm.isShowGroupIcon)?_c('div',{staticClass:\"iconGroup\",class:{public : _vm.isPublic}},[(!_vm.isPublic)?_c('i',{staticClass:\"fas fa-user-friends\"}):_c('i',{staticClass:\"fas fa-users\"})]):_vm._e(),(_vm.miniappicon)?_c('div',{staticClass:\"miniappicon\"},[_c('bgimage',{attrs:{\"src\":_vm.miniappicon}})],1):_vm._e(),_c('div',{staticClass:\"nameofchat\"},[_vm._v(_vm._s(_vm.convertedName))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"nameline\">\r\n\t\t<div class=\"iconGroup\" :class=\"{public : isPublic}\" v-if=\"isShowGroupIcon\">\r\n\t\t\t<i class=\"fas fa-user-friends\" v-if=\"!isPublic\"></i>\r\n\t\t\t<i class=\"fas fa-users\" v-else></i>\r\n\t\t</div>\r\n\t\t<div class=\"miniappicon\" v-if=\"miniappicon\">\r\n\t\t\t<bgimage :src=\"miniappicon\" />\r\n\t\t</div>\r\n\t\t<div class=\"nameofchat\" >{{convertedName}}</div>\r\n\t</div>\r\n</template>\r\n\r\n<style scoped lang=\"sass\">\r\n\r\n.nameofchat\r\n\twhite-space: nowrap\r\n.nameline\r\n\tdisplay: flex\r\n\talign-items: flex-end\r\n\r\n.miniappicon\r\n\tmargin-right: 0.5 * $r\r\n\tmargin-block: 0.5 * $r\r\n\r\n\t.bgimage\r\n\t\twidth : 12px\r\n\t\theight: 12px\r\n\t\tborder-radius: 2px\r\n\r\n.iconGroup\r\n\tfont-size: 0.4em\r\n\twidth: 16px\r\n\tmin-width: 16px\r\n\ttext-align: center\r\n\theight: 16px\r\n\tline-height: 16px\r\n\tborder-radius: 8px\r\n\tbackground: srgb(--neutral-grad-2)\r\n\tmargin-right: $r\r\n\tmargin-block: 0.5 * $r\r\n\r\n\t&.public\r\n\t\tbackground: srgb(--color-good)\r\n\r\n\t\ti\r\n\t\t\tcolor: srgb(--text-on-bg-shadow-color)\r\n\r\n\ti\r\n\t\tcolor: srgb(--neutral-grad-1)\r\n\r\n\r\n\r\n\t\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"chatName\",\r\n\r\n\tprops: {\r\n\t\tchat: Object,\r\n\t\tpreview: Boolean,\r\n\t\tm_chat: {},\r\n\t},\r\n\tinject: [\"matches\", \"markText\"],\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\t//convertedName: ''\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tusers: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\tvar u = this.core.mtrx.anotherChatUsers(this.chat.roomId);\r\n\r\n\t\t\t/*u = _.filter(u, (usr) => {\r\n\t\t\t\tif(usr.membership == 'leave') return false\r\n\r\n\t\t\t\treturn true\r\n\t\t\t})*/\r\n\r\n\t\t\treturn u\r\n\t\t},\r\n\r\n\t\tconvertedName: function () {\r\n\t\t\tif (\r\n\t\t\t\tthis.m_chat &&\r\n\t\t\t\tthis.m_chat.getJoinRule() === \"public\" &&\r\n\t\t\t\tthis.m_chat.currentState.getStateEvents(\"m.room.name\").length > 0\r\n\t\t\t) {\r\n\t\t\t\treturn this.m_chat.currentState\r\n\t\t\t\t\t.getStateEvents(\"m.room.name\")[0]\r\n\t\t\t\t\t.getContent()?.name;\r\n\t\t\t}\r\n\t\t\tvar users = _.filter(this.users, (user) => {\r\n\t\t\t\treturn user.userId != this.core.user.userinfo.id;\r\n\t\t\t});\r\n\r\n\t\t\tvar names = _.filter(\r\n\t\t\t\t_.map(users, (user) => {\r\n\t\t\t\t\tif (this.$store.state.users[user.userId])\r\n\t\t\t\t\t\treturn this.$store.state.users[user.userId].name;\r\n\t\t\t\t}),\r\n\t\t\t\tfunction (name) {\r\n\t\t\t\t\treturn name;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (!names.length) {\r\n\t\t\t\tif (this.core.mtrx.chatUsers(this.chat.roomId).length) {\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"-\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this.m_chat?.name.indexOf(\"@\") == 0)\r\n\t\t\t\treturn this.m_chat?.name.replace(\"@\", \"\");\r\n\r\n\t\t\treturn names.join(\", \");\r\n\t\t},\r\n\r\n\t\tmarkMatches: function () {\r\n\r\n\r\n\r\n\t\t\treturn this.markText ? this.markText(this.convertedName, true) : this.convertedName;\r\n\t\t},\r\n\r\n\t\tisPublic(){\r\n\t\t\treturn this.isShowGroupIcon && this.m_chat.getJoinRule() === \"public\"\r\n\t\t},\r\n\r\n\t\tisShowGroupIcon() {\r\n\r\n\t\t\treturn !this.chat.miniappchat && this.m_chat?.name.slice(0, 1) === \"@\";\r\n\t\t},\r\n\r\n\t\tminiappicon(){\r\n\t\t\treturn this.chat.miniappchat ? this.chat.miniappchat.icon : null\r\n\t\t}\r\n\r\n\t\t\r\n\t},\r\n\r\n\tmounted: function () {},\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./name.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./name.vue?vue&type=template&id=8fb6d080&scoped=true\"\nimport script from \"./name.vue?vue&type=script&lang=js\"\nexport * from \"./name.vue?vue&type=script&lang=js\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./name.vue?vue&type=style&index=0&id=8fb6d080&prod&scoped=true&lang=sass\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"8fb6d080\",\n  null\n  ,true\n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./icon.vue?vue&type=style&index=0&id=1a53247e&prod&scoped=true&lang=sass\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=2031c374&prod&scoped=true&lang=sass&external\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"09f4c640\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-2031c374] .eventMember{text-align:left}[data-v-2031c374] .eventMember span{font-size:.9em}.pswp img[data-v-2031c374]{max-width:none;-o-object-fit:contain;object-fit:contain}#chatList.minimized:not(.active) .timeLineWrapper[data-v-2031c374]{padding-left:.5em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".eventWrapper[data-v-e2a5fc48] .event{padding:.25em 0}.eventWrapper[data-v-e2a5fc48]{transition:background .3s}.eventWrapper.fromsearch[data-v-e2a5fc48],.eventWrapper.fromsearch[data-v-e2a5fc48] .allscreen{background:rgba(var(--color-bg-ac-bright),.1)}.eventWrapper.attention[data-v-e2a5fc48],.eventWrapper.attention[data-v-e2a5fc48] .allscreen{background:rgb(var(--neutral-grad-0))}.list-enter-active[data-v-e2a5fc48],.list-leave-active[data-v-e2a5fc48]{transition:all 1s}.list-enter[data-v-e2a5fc48],.list-leave-to[data-v-e2a5fc48]{opacity:0}#events[data-v-e2a5fc48]{--events-padding-bottom:51px;left:0;right:0;top:0;bottom:0;padding-bottom:50px;position:absolute;transition:.3s}#events[data-chat-input-embedded=true][data-v-e2a5fc48]{--events-padding-bottom:100px}#events.mobile[data-v-e2a5fc48]{padding-bottom:calc(var(--app-margin-bottom, 0) + var(--events-padding-bottom));transform:translate3d(0,calc(var(--keyboardheight, 0)*-1 - -1px),0)}#events.mobile .scrollbottom[data-v-e2a5fc48]{bottom:6em}.dummyheight[data-v-e2a5fc48]{height:100%;width:2px;left:0;right:0;top:0;bottom:0;background:rgb(var(--color-shadow-base))}.preloadingWrapper[data-v-e2a5fc48]{padding:2em;text-align:center;opacity:.5;color:rgb(var(--text-color))}.scrollbottom[data-v-e2a5fc48]{position:absolute;right:.5em;bottom:4em;cursor:pointer;border-radius:50%;background:rgb(var(--background-main));box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);color:rgb(var(--color-txt-gray-dark));width:35px;height:35px;line-height:35px;text-align:center;z-index:3}.scrollbottom i[data-v-e2a5fc48]{font-size:.7em}.eventsflex[data-v-e2a5fc48]{display:flex;flex-flow:column;overflow-y:overlay;overflow-x:hidden;max-width:640px;margin:0 auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;flex-wrap:nowrap;width:100%;height:100%;scroll-behavior:auto;continue:fragments;justify-content:flex-start;transform:scaleY(-1);contain:strict}.eventsflex.freeze[data-v-e2a5fc48]{overflow-y:hidden}.eventsflex .ewr[data-v-e2a5fc48]{position:relative}.eventsflex .eventspage[data-v-e2a5fc48],.eventsflex .ewr[data-v-e2a5fc48]{width:100%;display:flex;flex-flow:column;flex-wrap:nowrap;justify-content:flex-start}.eventsflex .errorWrapper[data-v-e2a5fc48]{padding:.5em}.eventsflex .errorWrapper .btnwrp[data-v-e2a5fc48]{padding-top:.5em}.eventsflex .errorWrapper .error[data-v-e2a5fc48]{padding:1em;border-radius:1em;background:rgb(var(--neutral-grad-0))}.eventsflex .errorWrapper[data-v-e2a5fc48],.eventsflex .eventWrapper[data-v-e2a5fc48]{width:100%;transform:scaleY(-1)}.eventsflex.mobile[data-v-e2a5fc48]{scroll-behavior:smooth}.eventsflex.mobile[data-v-e2a5fc48] .dropdown.visible{top:-55px}.eventsflex.mobile[data-v-e2a5fc48] .outer-div .backgr,.eventsflex.mobile[data-v-e2a5fc48] .outer-div .menuwrapper{position:absolute}.eventsflex.mobile.ios.menuOpen[data-v-e2a5fc48]{overflow:visible}.galleryRow[data-v-e2a5fc48]{display:flex;align-items:flex-end}.galleryRow .messageImg[data-v-e2a5fc48]{max-width:50%;margin:0 10px;position:relative}.galleryRow .messageImg .img[data-v-e2a5fc48]{display:block;border-radius:.5em;position:relative;max-width:100%}.galleryRow .messageImg .loadingImg[data-v-e2a5fc48]{display:flex;align-items:center;justify-content:center;border-radius:.5em;position:relative;max-width:300px;height:250px}.galleryRow .messageImg .loadingImg .imgPreview[data-v-e2a5fc48]{border-radius:.5em;position:relative;max-width:100%;height:100%;opacity:.6}.galleryRow .messageImg .loadingImg .clipLoader[data-v-e2a5fc48]{position:absolute;z-index:9999;left:50%;right:0;top:50%;bottom:0;transform:translate(-50,50);display:flex;align-items:center;justify-content:center}.galleryRow .messageImg .imgMsg img[data-v-e2a5fc48]{max-width:100%;-o-object-fit:cover;object-fit:cover;border-radius:1em;display:block}.galleryRow .messageImg .metaLink[data-v-e2a5fc48]{background:#000}.galleryRow .messageImg .metaLink .metaMessageLink .metaTitle[data-v-e2a5fc48]{font-weight:700;font-size:.9em}.galleryRow .messageImg .metaLink .metaMessageLink .metaDescription[data-v-e2a5fc48]{margin:.5em 0;font-size:.8em}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper[data-v-e2a5fc48]{display:block;max-width:300px;-o-object-fit:cover;object-fit:cover}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper img[data-v-e2a5fc48]{display:block;width:100%;height:100%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}