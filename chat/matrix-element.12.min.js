(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[12],{"0826":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"typingBlock",staticStyle:{position:"relative"}},[e("div",{staticClass:"typingBlockWrapper"},[e("div",[e("span",[t._v(t._s(t.$t("caption.typing")))])]),e("div",[e("PulseLoader",{attrs:{color:t.color,size:t.size,loading:!0}})],1)])])},s=[],n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"v-spinner"},[e("div",{staticClass:"v-pulse v-pulse1",style:[t.spinnerStyle,t.spinnerDelay1]}),e("div",{staticClass:"v-pulse v-pulse2",style:[t.spinnerStyle,t.spinnerDelay2]}),e("div",{staticClass:"v-pulse v-pulse3",style:[t.spinnerStyle,t.spinnerDelay3]})])},r=[],o={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}},c=o,l=a("2877");function d(t){var e=a("a778");e.__inject__&&e.__inject__(t)}var h=Object(l["a"])(c,n,r,!1,d,null,null,!0),u=h.exports,m={name:"typing",props:{},components:{PulseLoader:u},data:()=>({color:"#868686",size:"2px",loading:!0}),methods:{},computed:{}},p=m;function v(t){var e=a("9caa");e.__inject__&&e.__inject__(t)}var f=Object(l["a"])(p,i,s,!1,v,null,null,!0);e["a"]=f.exports},"094d":function(t,e,a){"use strict";a.r(e);var i=a("8043");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"140b":function(t,e,a){var i=a("5785");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("203e9107",i,t)}},1740:function(t,e,a){var i=a("8bca");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("0cd38700",i,t)}},"21d6":function(t,e,a){"use strict";a.r(e);var i=a("fbee");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},2343:function(t,e,a){"use strict";a.r(e);var i=a("140b");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"2b2f":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"@keyframes v-pulseStretchDelay{0%,80%{transform:scale(1);-webkit-opacity:1;opacity:1}45%{transform:scale(.1);-webkit-opacity:.7;opacity:.7}}",""]),t.exports=e},3077:function(t,e,a){"use strict";a.r(e);var i=a("1740");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},5395:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".typingBlock{position:relative}.typingBlock .typingBlockWrapper{position:absolute;left:50%;transform:translateX(-50%);top:-5px;display:flex;align-items:center}.typingBlock .typingBlockWrapper>div{padding:0 .5em}.typingBlock .typingBlockWrapper span{font-size:.7em;color:rgb(var(--neutral-grad-3));opacity:.8}",""]),t.exports=e},"53c6":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".userinfoWrapper[data-v-54799a07]{height:95%;width:100%;padding:2em .5em;background:rgba(var(--background-main),.4);border-radius:15px;position:relative;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}.previewWrapper .work[data-v-54799a07]{padding-bottom:.5em!important}.VueCarousel[data-v-54799a07]{width:100%}.filter[data-v-54799a07]{background-color:rgba(var(--color-shadow-base),.2)!important}",""]),t.exports=e},5785:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".attachements[data-v-2273a223]{position:absolute;left:0;top:0;right:0;padding:.5em .5em;overflow-y:scroll}.attachements .attachementsWrapper[data-v-2273a223]{display:flex;align-items:center;flex-wrap:nowrap;flex-grow:1;flex-direction:row}.attachements .attachementsWrapper[data-v-2273a223] #chatAttachement{margin-right:.5em;min-width:120px}.joinwrapper[data-v-2273a223]{position:absolute;left:0;top:0;bottom:0;right:0;padding-bottom:0;overflow-x:scroll}.cantchatmessage[data-v-2273a223]{padding:2em}.cantchatmessage .proceed[data-v-2273a223]{padding-top:1em}.cantchatmessage .proceed button[data-v-2273a223]{padding-left:0}.cantchatmessage .refresh[data-v-2273a223]{padding-top:2em}.cantchatmessage .msg[data-v-2273a223]{font-size:.8em}.encryptedInfo[data-v-2273a223]{position:relative;z-index:9999;display:flex;justify-content:center;align-items:center;flex-direction:column}.encryptedInfo #slide[data-v-2273a223]{padding:0 .5em;position:absolute;left:-180px;top:0;background:rgb(var(--background-main));color:rgb(var(--text-color));border-bottom-right-radius:8px;border-top-right-radius:8px;-webkit-animation:slide-2273a223 .1s forwards;-webkit-animation-delay:.3s;animation:slide-2273a223 .1s forwards;animation-delay:.3s;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}@keyframes slide-2273a223{to{left:0}}.encryptedInfo button[data-v-2273a223]{cursor:pointer;display:flex;align-items:center;justify-content:flex-start;text-align:left}.encryptedInfo button i[data-v-2273a223]{margin-right:5px}.encryptedInfo .encryptedTxtIcon[data-v-2273a223]{flex-direction:column;align-items:center;justify-content:center;padding:.25em .25em;text-align:center}.encryptedInfo .encryptedTxtIcon span[data-v-2273a223]{color:rgb(var(--color-good));font-size:.8em}.encryptedInfo .encryptedTxtIcon i[data-v-2273a223]{color:rgb(var(--color-good));display:none}.blockedcaption[data-v-2273a223]{text-align:center}.blockedcaption span[data-v-2273a223]{font-size:.8em}.relationEvent[data-v-2273a223]{display:flex;align-items:flex-end;overflow-wrap:anywhere;width:100%}.relationEvent .relationEventWrapper[data-v-2273a223]{padding-bottom:1em}.relationEvent .relationEventCaption[data-v-2273a223]{padding:1em 0;padding-bottom:.5em}.relationEvent .relationEventCaption span[data-v-2273a223]{font-size:.8em;font-weight:700;color:rgb(var(--color-txt-ac))}.relationEvent .relationEventPreview[data-v-2273a223]{flex-grow:1;padding:0 1em;padding-top:0}.relationEvent[data-v-2273a223] .previewMessage{font-size:.9em}.relationEvent[data-v-2273a223] .previewMessage .msgtext label{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis}.relationEvent[data-v-2273a223] .statusWrapper{display:none}.relationEvent .relationEventActions[data-v-2273a223]{width:55px;min-width:55px}.relationEvent .relationEventActions .item[data-v-2273a223]{width:100%;padding:.5em 0;cursor:pointer;text-align:center}.chatInputWrapper[data-v-2273a223]{position:absolute;z-index:3;bottom:-1px;background:transparent;left:0;right:0;padding-bottom:calc(var(--app-margin-bottom, 0) + 5px);background:rgb(var(--background-total-theme));will-change:transform;transform:translate3d(0,calc(var(--keyboardheight, 0)*-1 - -1px),0);transition:.3s}.chatInputWrapper.bin[data-v-2273a223]{position:absolute;left:1px;right:1px;bottom:0;border-radius:5px}#chat.minimized .chatInputWrapper[data-v-2273a223]{opacity:0;padding-bottom:0}#chat.minimized:not(.active) .statusWrapper[data-v-2273a223]{width:33px}#chat.minimized:not(.active) .statusWrapper i[data-v-2273a223]{color:rgb(var(--color-txt-ac))}#chat.minimized:not(.active) .statusWrapper i span[data-v-2273a223]{display:none}#chat.minimized:not(.active) .statusWrapper .messageRow[data-v-2273a223]{padding:0!important;background:transparent!important}#chat.minimized:not(.active) .statusWrapper .event[data-v-2273a223]{padding-bottom:.5em}#chat.minimized:not(.active) .statusWrapper #events[data-v-2273a223]{transform:translate3d(.25em,30px,0)}#chat.minimized:not(.active) .statusWrapper .iconWrapper[data-v-2273a223]{margin-left:0!important}#chat.minimized:not(.active) .statusWrapper [my=true][data-v-2273a223]{justify-content:flex-start}#chat.minimized:not(.active) .statusWrapper [my=true] .iconWrapper[data-v-2273a223]{margin-left:0!important;order:-1;align-self:flex-end}#chat.minimized:not(.active) .statusWrapper .actionsWrapper[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .filePreview[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .labelwrapper[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .linkPreview[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .maxcontent[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .messageImg[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .timeWrapper[data-v-2273a223],#chat.minimized:not(.active) .statusWrapper .userpic[data-v-2273a223]:after{display:none}#chat.minimized.active[data-v-2273a223]{padding-bottom:90px}#chat.minimized.active .chatInputWrapper[data-v-2273a223]{opacity:1}.encrypted[data-v-2273a223]{position:absolute;left:0;top:0;z-index:2;color:rgb(var(--color-good));padding:.25em .5em}.encrypted i[data-v-2273a223]{font-size:.8em;cursor:pointer}.roomMuted[data-v-2273a223]{position:absolute;left:5px;top:20px;z-index:2;color:rgb(var(--neutral-grad-3))}.roomMuted i[data-v-2273a223]{font-size:.8em}.chatEmpty[data-v-2273a223]{padding:4em;text-align:center;color:rgb(var(--neutral-grad-3))}.chatEmpty span[data-v-2273a223]{font-size:.8em}.preview-wrapper[data-v-2273a223]{max-height:350px;overflow-y:auto;border:1px solid rgb(var(rgb(var(--neutral-grad-2))));border-radius:10px;margin:0 auto;width:98%}.preview-wrapper[data-v-2273a223]::-webkit-scrollbar{width:0!important}.shareEventsWrapper .cnt[data-v-2273a223]{background:rgb(var(--background-secondary-theme));border-radius:30px;padding:.5em 1em;max-width:622px;width:100%;margin:0 auto;display:flex;align-items:center;justify-content:space-between;font-size:.9em}.shareEventsWrapper .cnt i[data-v-2273a223]{margin-right:10px}.shareEventsWrapper .cnt i.fa-trash-alt[data-v-2273a223]{color:#f41a4d}.shareEventsWrapper .cnt i.fa-share-alt[data-v-2273a223]{color:#00a3f7}.shareEventsWrapper .cnt div[data-v-2273a223]{transition:.3s;opacity:.6;cursor:pointer;margin-left:1em;display:flex;align-items:center}.shareEventsWrapper .cnt div[data-v-2273a223]:hover{transition:.3s;opacity:1}.shareEventsWrapper .cnt div.cancel[data-v-2273a223]{margin-right:auto;margin-left:0}",""]),t.exports=e},"601a":function(t,e,a){var i=a("53c6");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("1ce89c76",i,t)}},"6a5a":function(t,e,a){var i=a("2b2f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("ba1b37ea",i,t)}},"7d36":function(t,e,a){"use strict";a.r(e);var i=a("c936");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"7e1c":function(t,e,a){"use strict";a.r(e);var i=a("cd1a");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},8043:function(t,e,a){var i=a("fd90");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("5bb6562e",i,t)}},"8bca":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".topheader[data-v-4c0e7fac]{width:100%;z-index:999;top:0}.aboutContact[data-v-4c0e7fac]{position:absolute;left:0;right:0;top:100px;bottom:0;z-index:999;background:#fff}.chat.mobile[data-v-4c0e7fac] #maincontent .headerSpacerWrapper{bottom:0;overflow:visible}.chat.mobile[data-v-4c0e7fac] #maincontent .headerSpacerWrapperOvf{overflow:visible}",""]),t.exports=e},"9caa":function(t,e,a){"use strict";a.r(e);var i=a("d370");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},a778:function(t,e,a){"use strict";a.r(e);var i=a("6a5a");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},b163:function(t,e,a){"use strict";var i=function(){var t,e,a,i,s=this,n=s._self._c;s._self._setupProxy;return n("div",{class:{bin:s.pocketnet,bout:!s.pocketnet,minimized:s.minimized,fix:s.pocketnet,active:s.active},attrs:{id:"chat"}},[s.cantchat&&!s.cantchatexc?n("div",{staticClass:"cantchatmessage"},[n("div",{staticClass:"msg"},[s._v(" "+s._s(s.$t("caption."+this.keyproblem))+" ")]),"usernotgen"==s.keyproblem?n("div",{staticClass:"refresh"},[n("button",{staticClass:"button small",on:{click:s.refreshkeys}},[s._v(" Refresh "),n("i",{staticClass:"fas fa-sync"})])]):s._e(),"younotgen"==s.keyproblem?n("div",{staticClass:"preloaderwrapper"},[n("linepreloader")],1):s._e()]):n("div",{staticClass:"chatcontent"},[s.m_chat&&s.allowedToRead&&s.ready?n("list",{directives:[{name:"show",rawName:"v-show",value:!(null!==(t=s.userBanned)&&void 0!==t&&t.value),expression:"!userBanned?.value"}],key:s.key,ref:"list",attrs:{error:s.error,chat:s.m_chat,searchresults:s.searchresults,filterType:s.filterType,selectedMessages:s.selectedMessages},on:{editingEvent:s.editingEvent,shareEvent:s.shareEvent,replyEvent:s.replyEvent,eventImage:t=>s.galleryImage(t),scroll:s.scroll,menuIsVisible:s.menuIsVisibleHandler,getEvents:s.events}}):s._e(),!s.m_chat||null!==(e=s.userBanned)&&void 0!==e&&e.value||!s.membership&&!s.streamMode||["join","ban"].includes(s.membership)?s._e():n("div",{staticClass:"joinwrapper"},[n("join",{attrs:{m_chat:s.m_chat,chat:s.chat,usersinfo:s.usersinfo},on:{"update:m_chat":function(t){s.m_chat=t},creatorLeft:s.brokenInvitedRoom,joined:s.joined}})],1),!s.m_chat&&s.usersinfo&&s.usersinfo.length?n("div",{staticClass:"chatEmpty"},[n("span",[s._v(s._s(s.$t("caption.startChatWith"))+" "+s._s(s.usersinfoNames()))])]):s._e(),!s.activated||null!==(a=s.userBanned)&&void 0!==a&&a.value||s.m_chat&&"join"!==s.membership?s._e():n("div",{staticClass:"chatInputWrapper fixedOnPageBottom",class:{bin:s.pocketnet,bout:!s.pocketnet}},[n("div",[s.relationEvent?n("div",{staticClass:"relationEvent"},[n("div",{staticClass:"relationEventPreview"},[n("div",{staticClass:"relationEventCaption"},[n("span",[s._v(s._s(s.relationEvent.action))])]),"m.replace"!=s.relationEvent.type?n("div",{staticClass:"relationEventWrapper"},[n("eventsEvent",{attrs:{event:s.relationEvent.event,chat:s.m_chat,preview:!0}})],1):s._e()]),n("div",{staticClass:"relationEventActions"},[n("div",{staticClass:"item",on:{click:s.clearRelationEvent}},[n("i",{staticClass:"far fa-times-circle"})])])]):s._e(),s.blockedUser||s.selectedMessages.length?s._e():n("chatInput",{ref:"chatInput",attrs:{u:s.u,chat:s.m_chat,usersinfo:s.usersinfo,relationEvent:s.relationEvent},on:{sending:s.sending,sent:s.sent,sentError:s.sentError,sentMessageError:s.sentMessageError,sendingData:s.sendingData,sentData:s.sentData,force:s.force,newchat:s.newchat,closeMetaPreview:s.closing,clearRelationEvent:s.clearRelationEvent,focused:s.focused,cantchatcrypto:s.cantchatcrypto,encrypt:s.clbkencrypt,encrypted:s.clbkencrypted}}),s.selectedMessages.length?n("div",{staticClass:"center shareEventsWrapper"},[n("div",{staticClass:"work"},[n("div",{staticClass:"cnt"},[n("div",{staticClass:"cancel",on:{click:function(t){return s.cancelDataMessages()}}},[n("i",{staticClass:"fas fa-times"}),n("span",[s._v(s._s(s.$t("cancel")))])]),n("div",{on:{click:function(t){return s.removeDataMessages()}}},[n("i",{staticClass:"far fa-trash-alt"}),n("span",[s._v(s._s(s.localisationTitles.delete))])]),n("div",{on:{click:function(t){return s.shareDataMessages()}}},[n("i",{staticClass:"fas fa-share-alt"}),n("span",[s._v(s._s(s.localisationTitles.share))])])])])]):s._e(),s.blockedUser&&s.m_chat?n("div",{staticClass:"blockedcaption"},[n("span",[s._v("You have blocked this user")])]):s._e()],1)]),s.activated&&!s.streamMode&&s.encrypted&&"invite"!=s.membership?n("div",{staticClass:"encrypted fixedOnPageTop",on:{mouseover:t=>s.hoverEncrypt=!0}},[s.encrypting?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("i",{staticClass:"fas fa-lock"})]):s._e(),s.hoverEncrypt?n("div",{staticClass:"encryptedInfo fixedOnPageTop",on:{mouseover:t=>s.hoverEncrypt=!0,mouseleave:t=>s.hoverEncrypt=!1,click:t=>s.hoverEncrypt=!s.hoverEncrypt}},[n("div",{attrs:{id:"slide"}},[n("div",{staticClass:"encryptedTxtIcon"},[n("i",{staticClass:"fas fa-user-shield"}),n("span",[s._v(s._s(s.$t("caption.encrypted")))])])])]):s._e(),s.attachements.length?n("div",{staticClass:"attachements"},[n("div",{staticClass:"attachementsWrapper"},s._l(s.attachements,(function(t){return n("attachement",{key:t.id,attrs:{attachement:t},on:{cancel:e=>s.abortSending(t.id)}})})),1)]):s._e()],1),s.activated&&null!==(i=s.userBanned)&&void 0!==i&&i.value||s.roomUserBanned?n("userRoomStatus",{attrs:{chat:s.chat,text:"You've have been banned in this room"}}):s._e()],1)},s=[],n=a("2f62"),r=a("4e29"),o=function(){var t,e,a,i=this,s=i._self._c;i._self._setupProxy;return s("div",{staticClass:"maskedtop",class:{minimized:i.minimized,active:i.active},attrs:{id:"chatJoin"}},[s("div",{staticClass:"work"},[s("div",{staticClass:"caption"},[i.streamMode||i.creatorLeft?i._e():s("span",[i._v(" "+i._s(i.$t("caption.chatInvite"))+" ")]),!i.streamMode&&i.creatorLeft?s("span",[i._v(i._s(i.$t("caption.cantJoin")))]):i._e(),i.streamMode&&null!==(t=i.videoMeta)&&void 0!==t&&t.isLive?s("span",[i._v(i._s(i.$t("caption.needjointowrite")))]):i._e(),!i.streamMode||null!==(e=i.videoMeta)&&void 0!==e&&e.isLive?i._e():s("span",[i._v(i._s(i.$t("caption.streamisover")))])])]),i.blockedCheck||i.streamMode?i._e():s("div",{staticClass:"tip"},[i.creatorLeft?i._e():s("span",[i._v(i._s(i.$t("caption.chatInviteDecline")))]),i.creatorLeft?s("span",[i._v(i._s(i.$t("caption.creatorLeft")))]):i._e()]),i.streamMode?i._e():s("chatPreview",{attrs:{usersinfo:i.usersinfo,chat:i.chat,m_chat:i.m_chat,undefinedRoom:i.creatorLeft}}),i.streamMode||!i.hiddenInParent?s("div",{staticClass:"joinAction fixedOnPageBottom",class:{bin:i.pocketnet,bout:!i.pocketnet}},[s("div",{staticClass:"work"},[i.blockedCheck?s("div",{staticClass:"actions"},[i._m(0)]):s("div",{staticClass:"actions"},[i.streamMode||i.creatorLeft||i.tetatet?i._e():s("div",{staticClass:"action"},[s("button",{staticClass:"small button black rounded",on:{click:i.decline}},[i._v(" "+i._s(i.$t("button.decline"))+" ")])]),!i.streamMode&&i.tetatet?s("div",{staticClass:"action"},[s("button",{staticClass:"small button black rounded",on:{click:i.ignore}},[i._v(" "+i._s(i.$t("button.declineandignore"))+" ")])]):i._e(),i.creatorLeft?i._e():s("div",{staticClass:"action"},[s("button",{class:{small:!0,button:!0,rounded:!0},style:"visibility: "+(!i.streamMode||null!==(a=i.videoMeta)&&void 0!==a&&a.isLive?"visible":"hidden"),on:{click:i.join}},[i._v(" "+i._s(i.$t("button.join"))+" ")])]),!i.streamMode&&i.creatorLeft?s("div",{staticClass:"action"},[s("button",{staticClass:"small button rounded",on:{click:i.back}},[i._v(" "+i._s(i.$t("button.ok"))+" ")])]):i._e()])])]):i._e()],1)},c=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"blocked"},[e("span",[t._v("You have blocked this user")])])}],l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chatPreview"},[e("div",{staticClass:"work"},[e("div",{staticClass:"previewWrapper"},[t.users&&t.users.length?e("div",{staticClass:"users"},t._l(t.users,(function(a){return t.empty(a)?t._e():e("div",{key:a.id,staticClass:"work"},[e("div",{staticClass:"userinfoWrapper",class:{filter:t.undefinedRoom}},[a&&a.name?e("userView",{attrs:{userinfo:a}}):t._e()],1)])})),0):t._e()])])])},d=[],h=a("aa20"),u=a("3094"),m=a("42cd"),p=a("7212"),v=a("0a63"),f={name:"chatPreview",props:{chat:Object,usersinfo:Array,room:{},undefinedRoom:!1},components:{userView:m["a"],chatName:h["a"],chatIcon:u["a"],Swiper:p["Swiper"],SwiperSlide:p["SwiperSlide"],Carousel:v["Carousel"],Slide:v["Slide"]},data:function(){return{loading:!1,swiperOption:{direction:"horizontal",pagination:{el:".swiper-pagination"}}}},computed:{users:function(){return this.chat?this.core.mtrx.chatUsersInfo(this.chat.roomId,"anotherChatUsers"):[]}},methods:{empty:function(t){return _.isEmpty(t)}}},b=f,g=a("2877");function y(t){var e=a("c5aa");e.__inject__&&e.__inject__(t)}var x=Object(g["a"])(b,l,d,!1,y,"54799a07",null,!0),k=x.exports,w={name:"chatJoin",props:{chat:Object,m_chat:{},usersinfo:Array,room:Object},components:{chatPreview:k},inject:["streamMode","videoMeta"],data:function(){return{loading:!1,joinedMembers:[],creatorLeft:!1}},created:()=>{},watch:{},computed:Object(n["d"])({hiddenInParent:t=>t.hiddenInParent,auth:t=>t.auth,pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,tetatet:function(){return this.core.mtrx.kit.tetatetchat(this.m_chat)},blockedCheck:function(){var t=this.core.mtrx.anotherChatUsers(this.m_chat.roomId);if(1==t.length)return this.core.mtrx.blockeduser(t[0].userId)}}),mounted:function(){},methods:{join:function(){var t;if(!this.streamMode||null!==(t=this.videoMeta)&&void 0!==t&&t.isLive){var e=this;this.$store.commit("SET_CHAT_TO_FORCE",this.m_chat.roomId),this.$store.state.globalpreloader=!0,this.core.mtrx.client.joinRoom(this.m_chat.roomId).then(()=>{this.$emit("joined")}).catch((function(t){return this.$store.commit("icon",{icon:"error",message:t}),e.brokenRoom(!0),e.creatorLeft=!0})).finally(()=>{this.$store.state.globalpreloader=!1})}},back(){this.$router.go(-1)},ignore:function(){var t=this.core.mtrx.anotherChatUsers(this.chat.roomId);t.length>1||(this.$store.state.globalpreloader=!0,this.core.mtrx.blockUser(t[0].userId).then(t=>{this.$router.go(-1)}).catch(t=>{}).finally(()=>{this.$store.state.globalpreloader=!1}))},decline:function(){this.$store.commit("SET_CHAT_TO_FORCE",this.m_chat.roomId),this.$store.state.globalpreloader=!0,this.core.mtrx.client.leave(this.chat.roomId).then(t=>this.core.mtrx.client.forget(this.chat.roomId,!0).then(t=>t).then(t=>{this.$store.commit("DELETE_ROOM",this.chat.roomId),this.$router.go(-1)})).finally(()=>{this.$store.state.globalpreloader=!1})},brokenRoom(){this.$emit("creatorLeft",!0)}}},I=w;function C(t){var e=a("7e1c");e.__inject__&&e.__inject__(t)}var M=Object(g["a"])(I,o,c,!1,C,"3967ea65",null,!0),E=M.exports,$=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatAttachement"}},["image"==t.attachement.type?e("div",{staticClass:"image"},[t.attachement.base64?e("bgimage",{attrs:{src:t.attachement.base64}}):t._e()],1):t._e(),"file"==t.attachement.type?e("div",{staticClass:"file"},[e("div",{staticClass:"fileicon"},[e("i",{class:t.fileicon})]),e("div",{staticClass:"filename"},[e("span",[t._v(t._s(t.attachement.info.name||"File"))])]),t.humanReadableSize?e("div",{staticClass:"filesize"},[e("span",[t._v(t._s(t.humanReadableSize))])]):t._e()]):t._e(),t._m(0),e("div",{staticClass:"cancel",on:{click:t.cancel}},[e("i",{staticClass:"far fa-times-circle"})])])},z=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"loading"},[e("i",{staticClass:"fas fa-spinner fa-spin"})])}],j=a("3139"),R={name:"chatAttachement",props:{attachement:Object},data:function(){return{loading:!1,ext:{pdf:"far fa-file-pdf",custom:"far fa-file"}}},created:()=>{},watch:{},computed:Object(n["d"])({auth:t=>t.auth,extension:function(){if(!j["a"].deep(this,"attachement.info.name"))return"custom";var t=j["a"].deep(this,"attachement.info.name"),e=(t=t.split("."),t[t.length-1].toLowerCase());return e},humanReadableSize(){return j["a"].deep(this,"attachement.info.size")?j["a"].formatBytes(this.attachement.info.size):""},fileicon:function(){var t=this.extension;return this.ext[t]||this.ext["custom"]}}),methods:{cancel:function(){this.$emit("cancel")}}},S=R;function T(t){var e=a("7d36");e.__inject__&&e.__inject__(t)}var O=Object(g["a"])(S,$,z,!1,T,"bd3aba00",null,!0),P=O.exports,B=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"roomStatusView"},[t._m(0),e("div",{staticClass:"text"},[t._v(" "+t._s(t.text)+" ")]),t.streamMode?t._e():e("button",{staticClass:"button small black rounded",on:{click:function(e){return t.leaveRoom()}}},[t._v(" Delete room ")])])},W=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"statusViewIcon"},[e("i",{staticClass:"fas fa-ban"})])}],D=(a("14d9"),{inject:["streamMode"],props:{text:String,chat:Object},methods:{leaveRoom(){this.core.mtrx.client.forget(this.chat.roomId,!0).then(t=>{this.$store.commit("DELETE_ROOM",this.chat.roomId)}).then(t=>{this.$router.push({path:"/chats"}).catch(t=>{})})}}}),A=D;function U(t){var e=a("21d6");e.__inject__&&e.__inject__(t)}var L=Object(g["a"])(A,B,W,!1,U,"170ef52d",null,!0),F=L.exports,N={name:"chat",props:{chat:Object,share:Object,u:String,search:String,searchresults:Array,filterType:String,style:""},components:{list:r["a"],chatInput:()=>Promise.all([a.e(9),a.e(10)]).then(a.bind(null,"fe01")),join:E,attachement:P,userRoomStatus:F},inject:["streamMode","userBanned"],data:function(){return{membership:null,roomUserBanned:!1,roomUserKicked:!1,roomMuted:!1,loading:!1,ready:!1,encrypted:!1,usersinfo:[],chatEvents:{},relationEvent:null,key:"",sendingDataStore:{},esize:{},fsize:{},cantchat:!1,cantchatexc:!1,error:null,hoverEncrypt:!1,encrypting:!1,showInput:!0,showShareMessages:!1,selectedMessages:[],activated:!1,membershipReactivity:null}},created(){},activated(){this.activated=!0},deactivated(){this.activated=!1},mounted(){this.activated=!0,this.streamMode||(this.getuserinfo(),this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"chat"})),this.createMembershipReactivity()},destroyed(){this.streamMode||(this.$store.commit("blockactive",{value:!1,item:"chat"}),this.$store.commit("SET_CURRENT_ROOM",!1)),clearInterval(this.membershipReactivity)},beforeDestroy(){this.activated=!1},watch:{activated:{immediate:!0,handler:function(){this.activated?this.createMembershipReactivity():this.destroyMembershipReactivity()}},chatusers:function(){this.m_chat&&this.m_chat.pcrypto&&this.core.mtrx.kit.allchatmembers([this.m_chat],!1,!0).then(()=>this.m_chat.pcrypto.userschanded()).then(t=>this.checkcrypto())},m_chat:{immediate:!0,handler:function(){this.m_chat&&!_.isEmpty(this.m_chat)&&this.core.mtrx.kit.prepareChatWithUsers(this.m_chat).then(t=>{this.ready=!0,this.checkcrypto()})}},chat:{immediate:!0,handler:function(){this.ready=!1,this.encrypted=!1,this.$store.commit("setmodal",null),this.chat?(this.$store.commit("SET_CURRENT_ROOM",this.chat.roomId),this.$store.commit("SET_LAST_ROOM",this.chat.roomId)):this.$store.commit("SET_CURRENT_ROOM",!1)}},userBanned:{immediate:!0,deep:!0,handler:function(){var t,e,a;this.membership=null===(t=this.m_chat)||void 0===t||null===(e=t.currentState)||void 0===e||null===(a=e.members[this.m_chat.myUserId])||void 0===a?void 0:a.membership}}},computed:Object(n["d"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,auth:t=>t.auth,active:function(t){return this.streamMode||t.active},m_chat:function(){if(this.chat&&this.chat.roomId){let t=this.core.mtrx.client.pushProcessor.getPushRuleById(this.chat.roomId);return null!==t&&(this.roomMuted=!0),this.chat.pcrypto?this.chat:this.core.mtrx.client.getRoom(this.chat.roomId)||{}}},keyproblem:function(){return this.core.user.userinfo.keys.length<12?"younotgen":"usernotgen"},allowedToRead:function(){return"join"===this.membership||this.streamMode},allowedToJoin:function(){return"invite"===this.membership||this.streamMode},blockedUser:function(){if(this.u)return this.core.mtrx.blockeduser(this.u[0]);if(this.chat){var t=this.core.mtrx.anotherChatUsers(this.chat.roomId);if(1===t.length)return this.core.mtrx.blockeduser(t[0].userId)}},openInviteModal:function(){return this.openInviteModal},attachements:function(){return _.toArray(this.sendingDataStore)},chatusers:function(){if(this.m_chat)return this.core.store.state.chatusers[this.m_chat.roomId]},localisationTitles:function(){return this.$i18n.t("button")}}),methods:{destroyMembershipReactivity:function(){this.membershipReactivity&&clearInterval(this.membershipReactivity),this.membershipReactivity=null},createMembershipReactivity:function(){this.membershipReactivity&&clearInterval(this.membershipReactivity),this.membershipReactivity=setInterval(()=>{var t,e;if(this.activated){if(this.m_chat&&!this.streamMode){if(this.m_chat.timeline.length>0){const t=this.core.mtrx.client.credentials.userId,e=this.core.mtrx.client.getRoom(this.chat.roomId).timeline,a=e[e.length-1];a.event.state_key===t&&"admin ban"===a.event.content.reason?this.roomUserBanned=!0:this.roomUserBanned=!1}}else if(this.streamMode){var a,i;this.roomUserBanned="ban"===(null===(a=this.m_chat)||void 0===a||null===(i=a.currentState.members[this.m_chat.myUserId])||void 0===i?void 0:i.membership)}this.membership=null===(t=this.m_chat)||void 0===t||null===(e=t.currentState.members[this.m_chat.myUserId])||void 0===e?void 0:e.membership}},1e3)},clbkencrypt:function(){this.encrypting=!0},clbkencrypted:function(){this.encrypting=!1},checkcrypto:function(){var t,e;this.encrypted=null===(t=this.m_chat.pcrypto)||void 0===t?void 0:t.canBeEncrypt(),this.cantchat=null===(e=this.m_chat.pcrypto)||void 0===e?void 0:e.cantchat()},force:function(){this.key=j["a"].makeid()},clearRelationEvent:function(){this.relationEvent&&"m.replace"===this.relationEvent.type&&this.$refs["chatInput"]&&this.$refs["chatInput"].setText(""),this.relationEvent=null},newchat:function(t){this.$emit("newchat",t),this.m_chat.pcrypto.userschanded()},getuserinfo:function(){this.u&&this.core.user.usersInfo(this.u).then(t=>{this.usersinfo=t})},cantchatcrypto:function(){this.cantchat=!0},proceedwithoutkeys:function(){this.cantchatexc=!0},refreshkeys:function(){this.core.user.userInfo(!0).then(t=>{this.u?this.core.user.usersInfo(this.u,!1,!0).then(t=>{var e=t[0];e&&e.keys&&e.keys.length>=12&&this.core.user.userinfo.keys.length>=12&&(this.cantchat=!1),this.usersinfo=t}):this.core.store.dispatch("RELOAD_CHAT_USERS",[this.m_chat]).then(t=>{})})},closing:function(t){this.PNmetaPreview=t},usersinfoNames:function(){return _.map(this.usersinfo,(function(t){return t.name})).join(", ")},replyEvent:function({event:t}){this.relationEvent={type:"m.reference",event:t,action:this.$i18n.t("caption.replyOnMessage")},this.$refs["chatInput"]&&this.$refs["chatInput"].focus()},shareEvent:function({event:t}){this.relationEvent={type:"m.reference",event:t,action:this.$i18n.t("caption.shareMessage")},this.$refs["chatInput"]&&this.$refs["chatInput"].focus()},editingEvent:function({event:t,text:e}){this.relationEvent={type:"m.replace",event:t,action:this.$i18n.t("caption.editMessage")},this.$refs["chatInput"]&&this.$refs["chatInput"].setText(e)},focused:function(){this.fsize=_.clone(this.esize)},scroll(t){this.esize=t;var e=this.esize.scrollTop||0,a=this.fsize.scrollTop||0;e-450>a&&this.$refs["chatInput"]&&this.$refs["chatInput"].blurifempty()},events(t){this.$emit("getEvents",t),this.chatEvents=t},galleryImage(t){this.core.store.dispatch("SHOW_GALLERY_FROMEVENTS",{events:this.chatEvents,event:t})},sending:function(){this.$emit("sending"),this.$refs["list"].scrollToNew(0)},sent:function(){this.relationEvent&&"m.reference"===this.relationEvent.type&&(this.relationEvent=null),this.$emit("sent"),this.error=null},sendingData:function(t){this.$set(this.sendingDataStore,t.id,t)},sentData:function(t){this.clearMeta(t),this.error=null},sentError:function(t){t&&t.id&&this.clearMeta(t),t&&t.error&&(this.error=t.error)},sentMessageError:function(t){this.error=t.error,this.core.logerror("sentMessageError",j["a"].stringify(this.error))},abortSending:function(t){var e=this.sendingDataStore[t];e.abort&&e.abort(),e.aborted=!0,this.clearMeta(e)},brokenInvitedRoom(t){this.$emit("removeBrokenRoom",t)},clearMeta:function(t){this.$delete(this.sendingDataStore,t.id)},menuIsVisibleHandler:function(t){this.$emit("menuIsVisible",t)},shareDataMessages:function(){var t=_.map(_.sortBy(this.selectedMessages,t=>t.time),t=>t.sharing);this.core.share({multiple:t}).then(()=>{this.selectedMessages=[]})},removeDataMessages:function(){this.$store.commit("icon",{icon:"loading",message:"",manual:!0}),Promise.all(_.map(this.selectedMessages,t=>this.core.mtrx.client.redactEvent(this.chat.roomId,t.message_id,null,{reason:"messagedeleting"}))).then(t=>{this.$store.commit("icon",{icon:"success",message:""}),this.selectedMessages=[]}).catch(t=>{console.error(t),this.selectedMessages=[],this.$store.commit("icon",{icon:"error",message:""})}).finally(()=>{this.force()})},cancelDataMessages:function(){this.selectedMessages=[]},scrollToEvent:function(t){j["a"].pretry(()=>this.$refs["list"]).then(()=>{this.$refs["list"].scrollToEvent(t)})},joined:function(){this.$set(this.chat,"joined",+new Date),this.userBanned.set(!1)}}},V=N;function q(t){var e=a("2343");e.__inject__&&e.__inject__(t)}var H=Object(g["a"])(V,i,s,!1,q,"2273a223",null,!0);e["a"]=H.exports},c5aa:function(t,e,a){"use strict";a.r(e);var i=a("601a");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},c936:function(t,e,a){var i=a("ef2a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("7a29c2d0",i,t)}},cd1a:function(t,e,a){var i=a("e7bd");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("7175776d",i,t)}},d370:function(t,e,a){var i=a("5395");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("3c28a567",i,t)}},e7bd:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".caption[data-v-3967ea65]{padding:1em}.caption span[data-v-3967ea65]{font-size:1.5em;font-weight:700}.tip[data-v-3967ea65]{padding:1.5em;text-align:center}.tip span[data-v-3967ea65]{font-size:.8em}.blocked[data-v-3967ea65]{width:100%;text-align:center}.blocked span[data-v-3967ea65]{font-size:.9em}.joinAction[data-v-3967ea65]{position:fixed;bottom:0;left:0;right:0;background:rgb(var(--neutral-grad-0));padding:1em 0;text-align:center;z-index:3}.joinAction.bin[data-v-3967ea65]{position:sticky}.joinAction .actions[data-v-3967ea65]{display:flex}.joinAction .actions .action[data-v-3967ea65]{padding:.5em;flex-grow:1}.joinAction .actions .action button[data-v-3967ea65]{min-width:0;width:100%}.my-swipe[data-v-3967ea65]{height:200px;font-size:30px;text-align:center}.my-swipe[data-v-3967ea65],.slide1[data-v-3967ea65]{color:rgb(var(--text-on-bg-ac-color))}.slide1[data-v-3967ea65]{background-color:rgb(var(--color-bg-ac))}.slide2[data-v-3967ea65]{background-color:rgb(var(--color-bg-orange));color:#000}.slide3[data-v-3967ea65]{background-color:rgb(var(--color-bg-ac-2));color:rgb(var(--text-on-bg-ac-color))}.minimized:not(.active) .caption[data-v-3967ea65]{width:52px;text-align:center}.minimized:not(.active) .caption span[data-v-3967ea65]{color:rgb(var(--color-txt-ac));font-size:.6em}.minimized:not(.active) .chatPreview[data-v-3967ea65]{display:none}.minimized[data-v-3967ea65]:not(.active) .userinfoWrapper{background:transparent!important;box-shadow:none}.minimized[data-v-3967ea65]:not(.active) .haskeys{display:none}",""]),t.exports=e},ee79:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page chat",class:{mobile:t.mobile}},[e("topheader",{directives:[{name:"show",rawName:"v-show",value:!t.hideHeader||!t.ios,expression:"!hideHeader || !ios"}],key:t.k,staticClass:"topheader chat-topheader",attrs:{u:t.u,chat:t.chat,search:t.search,focusedevent:t.focusedevent,process:t.processid,searchresults:t.processresult},on:{searching:t.searching,addMember:t.addMemberModal,tosearchevent:t.tosearchevent}}),e("maincontent",{scopedSlots:t._u([{key:"content",fn:function(){return[e("chat",{key:t.routeParams.id,ref:"chat",attrs:{u:t.routeParams.u,chat:t.chat,toevent:t.toevent,search:t.search,searchresults:t.processresult},on:{sending:t.sending,newchat:t.newchat,removeBrokenRoom:t.creatorLeft,getEvents:t.eventsRoom,menuIsVisible:t.menuIsVisibleHandler,toeventscrolled:t.toeventscrolled}})]},proxy:!0}])}),t.openInviteModal?e("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.$t("caption.inviteUser")))])]},proxy:!0},{key:"body",fn:function(){return[e("contacts",{attrs:{mode:"inviteUsers",chatRoomId:t.chat.roomId},on:{closeModal:t.closeContactModal}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,1321158477)}):t._e()],1)},s=[],n=(a("14d9"),a("b163")),r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatTopheader"}},[t.chat||t.u?e("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[e("backButton",{attrs:{action:"chats"}})]},proxy:!0},{key:"leftadd",fn:function(){return[e("div",{staticClass:"iconbuttonsmall",on:{click:t.tosearch}},[e("i",{staticClass:"fas fa-search"})])]},proxy:!0},{key:"info",fn:function(){return[t.chat?e("router-link",{attrs:{to:"chatInfo?id="+t.chat.roomId}},[t.m_chat?e("div",[e("div",{staticClass:"nameWrapper"},[t.roomInfo?t._e():e("chatName",{attrs:{preview:!0,chat:t.chat,m_chat:t.m_chat}}),t.roomMuted?e("div",{staticClass:"roomMuted"},[e("i",{staticClass:"fas fa-bell-slash"})]):t._e()],1),e("transition",{attrs:{name:"fade"}},[t.m_chat_typing?e("chatTyping"):t._e()],1)],1):t._e(),!t.m_chat&&t.userinfo?e("div",[e("span",{staticClass:"nameline"},[t._v(t._s(t.userinfo.name))])]):t._e()]):t._e()]},proxy:!0},t.callsEnabled&&t.m_chat?{key:"rightadd",fn:function(){return[t.isCallsActive&&!t.isGroup?e("div",{staticClass:"call btn iconbutton",class:"wait"===t.checkCallsEnabled||t.wait?"wait":t.checkCallsEnabled?"":"disabled",attrs:{title:"wait"===t.checkCallsEnabled||t.wait?t.$t("caption.wait"):t.checkCallsEnabled?"":t.$t("caption.disabled")},on:{click:t.bcCall}},[t.callloading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-video"})]):t._e()]},proxy:!0}:null,{key:"right",fn:function(){return[t.chat?e("router-link",{attrs:{to:"chatInfo?id="+t.chat.roomId}},[e("div",{staticClass:"iconbutton"},[e("i",{staticClass:"fas fa-ellipsis-h"})])]):t._e()]},proxy:!0}],null,!0)}):t._e(),t.chat&&t.searchactive?e("topheader",{attrs:{classstyle:"noiconsButWithL"},scopedSlots:t._u([{key:"left",fn:function(){return[e("backButton",{on:{back:t.backfromsearch}})]},proxy:!0},{key:"info",fn:function(){return[e("simpleSearch",{ref:"search",attrs:{value:t.search,controlKeys:!0},on:{search:t.searching,controlKey:t.searchControlKey},scopedSlots:t._u([t.searchresults&&t.searchresults.length?{key:"default",fn:function(){return[e("div",{staticClass:"matches"},[e("span",{staticClass:"current-match"},[t._v(t._s(t.searchresults.length-t.focusedeventIndex)+"/"+t._s(t.searchresults.length))]),e("i",{staticClass:"prev-match fas fa-chevron-up",on:{click:t.tobottomsearch}}),e("i",{staticClass:"next-match fas fa-chevron-down",on:{click:t.toupsearch}})]),t.search?e("div",{staticClass:"iconWrapper",on:{click:()=>{t.searching("")}}},[e("i",{staticClass:"fas fa-times"})]):t._e()]},proxy:!0}:null],null,!0)})]},proxy:!0}],null,!1,2056528287)}):t._e()],1)},o=[],c=a("1da1"),l=a("2f62"),d=a("aa20"),h=a("3094"),u=a("0826"),m=a("71da"),p=a("3139"),v={name:"chatTopheader",props:{chat:Object,u:String,roomInfo:!1,aboutUser:!1,search:String,process:String,searchresults:null,focusedevent:null},inject:["matches","menuState"],components:{chatName:d["a"],chatIcon:h["a"],chatTyping:u["a"],contacts:m["a"]},data:function(){return{callMenuItems:[{icon:"fa-phone fa fa-flip-horizontal",action:()=>{this.initiateCall("voice")},text:"caption.call"},{icon:"fa-video fa",action:()=>{this.initiateCall("video")},text:"caption.videocall"}],menuItemsRoom:[{click:"AddMember",title:this.$i18n.t("caption.add"),icon:"fas fa-user-plus"},{click:"MuteRoom",title:this.$i18n.t("caption.mute"),icon:"fas fa-bell-slash"},{click:"LeaveFromRoom",title:this.$i18n.t("caption.leaveAndDelete"),icon:"fas fa-sign-out-alt"}],menuItemsRoomMuted:[{click:"AddMember",title:this.$i18n.t("caption.add"),icon:"fas fa-user-plus"},{click:"MuteRoom",title:this.$i18n.t("caption.unmute"),icon:"fas fa-bell"},{click:"LeaveFromRoom",title:this.$i18n.t("caption.leaveAndDelete"),icon:"fas fa-sign-out-alt"}],oneToOne:[{click:"MuteRoom",title:this.$i18n.t("caption.mute"),icon:"fas fa-bell-slash"},{click:"Donate",title:this.$i18n.t("caption.donate"),icon:"fas fa-money-bill-wave"}],oneToOneMuted:[{click:"MuteRoom",title:this.$i18n.t("caption.unmute"),icon:"fas fa-bell"},{click:"LeaveFromRoom",title:this.$i18n.t("caption.leaveAndDelete"),icon:"fas fa-sign-out-alt"},{click:"Donate",title:this.$i18n.t("caption.donate"),icon:"fas fa-money-bill-wave"}],donateMenu:[{click:"Donate",title:this.$i18n.t("caption.donate"),icon:"fas fa-money-bill-wave"}],wait:!1,loading:!1,typing:!1,userinfo:null,aboutUserShow:!1,roomBanned:!1,roomMuted:!1,searchactive:!1,donateUserOpened:!1,receiver:null,donationAmount:0,donationMessage:"",calculatedFees:null,showFeesError:"",showTransactionError:"",calculatingFees:!1,sending:!1,feesDirection:"include",feesDirectionPossibleValues:[{value:"include",label:this.$i18n.t("caption.toBePaidByReceiver")},{value:"exclude",label:this.$i18n.t("caption.toBePaidBySender")}],hoverEncrypt:!1,callloading:!1}},watch:{},mounted:function(){this.getuserinfo(),this.search&&(this.searchactive=!0)},computed:Object(l["d"])({focusedeventIndex:function(){if(!this.searchresults||!this.focusedevent)return null;var t=-1;return _.find(this.searchresults,(e,a)=>{if(e.event.event_id==this.focusedevent.event.event_id)return t=a,!0}),t},callsEnabled:t=>t.isCallsEnabled,checkCallsEnabled:function(){var t,e;return null!==(t=this.$store.state.ChatStatuses[this.m_chat.roomId])&&void 0!==t&&t.enabled?(this.wait=!1,!0):null!==(e=this.$store.state.ChatStatuses[this.m_chat.roomId])&&void 0!==e&&e.isWaiting?"wait":(this.wait=!1,!1)},isGroup:function(){var t;return"@"===(null===(t=this.m_chat)||void 0===t?void 0:t.name.slice(0,1))},auth:t=>t.auth,isCallsActive:t=>t.isCallsActive,m_chat:function(){if(this.chat&&this.chat.roomId){let e=this.core.mtrx.client.pushProcessor.getPushRuleById(this.chat.roomId);null!==e&&(this.roomMuted=!0);var t=this.core.mtrx.client.getRoom(this.chat.roomId);return t||{}}},m_chat_typing:function(){if(!this.chat)return!1;var t=this.chat.roomId,e=this.$store.state.typing[t]||{},a=_.find(e,(t,e)=>{var a;if(t)return e!=(null===(a=this.core.user.userinfo)||void 0===a?void 0:a.id)});return a||!1},totalDonationAmount:function(){return"include"==this.feesDirection?this.donationAmount:this.donationAmount+this.calculatedFees}}),methods:{searchControlKey:function(t){"up"==t&&this.tobottomsearch(),"down"==t&&this.toupsearch()},openCallModal(){this.menuState.set({fromtop:!0,items:this.callMenuItems})},toupsearch:function(){if(this.searchresults){var t=this.focusedeventIndex;t<=this.searchresults.length-2?this.$emit("tosearchevent",this.searchresults[this.focusedeventIndex+1]):this.$emit("tosearchevent",this.searchresults[0])}},tobottomsearch:function(){if(this.searchresults||!this.searchresults.length){var t=this.focusedeventIndex;t>0?this.$emit("tosearchevent",this.searchresults[this.focusedeventIndex-1]):this.$emit("tosearchevent",this.searchresults[this.searchresults.length-1])}},backfromsearch:function(){this.process?this.$router.push("chats?process="+this.process).catch(t=>{}):(this.searchactive=!1,this.searching(""))},tosearch:function(){this.searchactive=!0,setTimeout(()=>{this.$refs.search&&this.$refs.search.focus()},100)},searching:function(t){this.$emit("searching",t),t||(this.searchactive=!1)},bcCall:function(){if(!this.checkCallsEnabled)return void this.$dialog.confirm(this.$t("caption.request"),{okText:this.$t("yes"),cancelText:this.$t("cancel")}).then(()=>{this.core.mtrx.client.sendStateEvent(this.chat.roomId,"m.room.callsEnabled",{enabled:!0},this.core.user.userinfo.id),this.wait=!0,this.requestCallsAccess()});if("wait"===this.checkCallsEnabled)return;document.querySelector("body");this.openCallModal()},initiateCall(t){this.callloading||(this.callloading=!0,setTimeout(()=>{this.core.mtrx.bastyonCalls.initCall(this.chat.roomId,t).then(t=>{}).catch(t=>{console.log("error",t)}).finally(()=>{this.callloading=!1})},50))},requestCallsAccess(){this.core.mtrx.client.sendStateEvent(this.m_chat.roomId,"m.room.request_calls_access",{accepted:null})},navigateToProfile(t){this.$router.push({path:"/contact?id="+p["a"].getmatrixid(t)}).catch(t=>{})},getuserinfo:function(){this.u&&this.core.user.usersInfo(this.u).then(t=>{this.userinfo=t[0]})},findOtherUser:function(){let t,e=this.m_chat.myUserId,a=this.m_chat.currentState.getMembers();return a.forEach((function(a){a&&a.userId!==e&&(t=a)})),t},addMember(){this.modalInviteUser()},menuItemClickHandler(t,e){if("AddMember"===t.click&&(this.$emit("addMember",!0),this.$refs.dropdownMenu.hidePopup()),"MuteRoom"===t.click){var a=this.chat.roomId;this.core.mtrx.client.deviceId;let t=this,e=this.core.mtrx.client.pushProcessor.getPushRuleById(this.chat.roomId);null!==e?(t.core.mtrx.client.deletePushRule("global","room",a),this.roomMuted=!1):(t.core.mtrx.client.setRoomMutePushRule("global",a,"true"),this.roomMuted=!0),this.$refs.dropdownMenu.hidePopup()}if("LeaveFromRoom"===t.click){this.core.mtrx.client.leave(this.chat.roomId).then(t=>{this.core.mtrx.client.forget(this.chat.roomId,!0).then(t=>{this.$store.commit("DELETE_ROOM",this.chat.roomId)}).then(t=>{this.$router.push({path:"/chats"}).catch(t=>{})})}),this.$refs.dropdownMenu.hidePopup()}if("BanRoom"===t.click){let t="",e=this.findOtherUser();e&&e.userId&&(t=e.userId);let a=this.chat.roomId;this.core.mtrx.client.ban(a,t,"ban").then(t=>{}),this.roomBanned=!0,this.$refs.dropdownMenu.hidePopup()}if("Unban"===t.click){let t="",e=this.findOtherUser();e&&e.userId&&(t=e.userId),this.core.mtrx.client.unban(this.chat.roomId,t).then(e=>{this.core.mtrx.client.invite(this.chat.roomId,t)}),this.roomBanned=!1,this.$refs.dropdownMenu.hidePopup()}if("Donate"===t.click){this.donateUserOpened=!0,this.$refs.dropdownMenu.hidePopup();let t=this.findOtherUser();this.receiver=t?this.$f.deep(this,"$store.state.users."+this.$f.getmatrixid(t.name)):null}},closeDonateModal(){this.donateUserOpened=!1},onCalculateFeesClick(){this.calculatingFees=!0,this.calculateFees().finally(()=>this.calculatingFees=!1)},calculateFees(){var t=this;return this.showFeesError="",new Promise((e,a)=>{if(this.donationAmount<=0||!this.receiver||!this.receiver.source||!this.receiver.source.address)return this.showFeesError="invalid",a("Missing amount or receiver");try{var i=window.POCKETNETINSTANCE.platform.sdk;i.node.fee.estimate((function(s){var n=[{address:t.receiver.source.address,amount:t.donationAmount}];i.wallet.txbase([i.address.pnet().address],n,0,t.feesDirection,(function(n,r,o){if(n)return console.error(n),t.showFeesError=n,a(n);var c=i.node.transactions.create.wallet(r,o),l=Math.min(c.virtualSize()*s.feerate,.0999);return t.calculatedFees=l,e()}))}))}catch(s){return console.error(s),t.showFeesError=s,a(s)}})},sendDonation(){var t=this;return Object(c["a"])((function*(){var e=t;t.sending=!0,t.showTransactionError="";try{yield t.calculateFees()}catch(i){return t.showTransactionError="error",void(t.sending=!1)}var a=window.POCKETNETINSTANCE.platform.sdk;a.node.transactions.get.canSpend(a.address.pnet().address,t=>{if(!t||isNaN(t)||t<e.totalDonationAmount)return e.showTransactionError="balance too low",void(e.sending=!1);try{var s=[{address:e.receiver.source.address,amount:e.donationAmount}];a.wallet.embed(s,e.donationMessage),a.wallet.txbase([a.address.pnet().address],s,e.calculatedFees,e.feesDirection,(function(t,i,s){if(t)return console.error(t),e.showTransactionError="error",e.sending=!1,reject(t);var n=a.node.transactions.create.wallet(i,s);i.forEach(t=>{t.cantspend=!0}),a.node.transactions.send(n,(function(t,n){if(n)return a.node.transactions.releaseCS(i),e.showTransactionError="error",void(e.sending=!1);var r=i.map(t=>t.txid);a.node.transactions.clearUnspents(r),a.wallet.saveTempInfoWallet(t,i,s),e.core.mtrx.client.sendEvent(e.chat.roomId,"m.room.message",{from:e.$f.getmatrixid(e.m_chat.myUserId),to:e.receiver.id,amount:e.donationAmount,txId:t,msgtype:"m.notice"},""),e.closeDonateModal()}))}))}catch(i){console.error(i),e.showTransactionError="error",e.sending=!1}})}))()},resetDonation(){this.calculatedFees=null,this.showFeesError="",this.showTransactionError=""}}},f=v,b=a("2877");function g(t){var e=a("094d");e.__inject__&&e.__inject__(t)}var y=Object(b["a"])(f,r,o,!1,g,"b3a12b78",null,!0),x=y.exports,k={name:"pagechat",components:{chat:n["a"],topheader:x,contacts:m["a"]},data:function(){return{events:[],openInviteModal:!1,brokenRoom:!1,hideHeader:!1,hastoeventscrolled:!1,hasprocesscleared:!1,searchchanged:void 0,process:null,routeParams:{id:this.$route.query.id,u:this.$route.query.u},processresult:null,focusedevent:null}},computed:{chat(){return this.$store.getters["getChatById"](this.routeParams.id)},key(){return this.routeParams.u+this.routeParams.id},processid(){return this.hasprocesscleared?null:this.$route.query.process},search(){return("undefined"==typeof this.searchchanged?this.$route.query.search:this.searchchanged)||""},toevent(){return this.hastoeventscrolled?null:this.$route.query.toevent},ios(){return p["a"].isios()},...Object(l["d"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,mobile:t=>t.mobile})},mounted(){setTimeout(()=>{this.leaveIfBroken()},2e3),this.toevent},beforeDestroy:function(){this.process&&this.process.stop()},watch:{"$route.query.search":function(t){this.searching(t)},search:{immediate:!0,handler:function(t){this.updateSearchQuery(t),pretry(()=>this.chat).then(()=>{this.searchingProcess()})}}},methods:{tosearchevent(t){this.focusedevent=t,this.$refs["chat"].scrollToEvent(t)},updateSearchQuery(t){return this.$router.push({query:{...this.$route.query,search:t}})},searchingProcess(){if(this.search.length>1&&this.chat){if(this.processresult=null,this.process)return void this.process.updateText(this.search);this.process=this.core.mtrx.searchEngine.execute(this.search,[this.chat],({results:t})=>!1,{chat:t=>{if(this.processresult=t.results[this.chat.roomId]||null,this.processresult&&!this.focusedevent&&this.processresult[0])if(this.toevent){var e=_.find(this.processresult,t=>t.event.event_id==this.toevent);e&&(this.toeventscrolled(),this.tosearchevent(e))}else this.tosearchevent(this.processresult[0])}}),this.process.execute().catch(t=>{console.error(t)})}else this.process&&this.process.stop(),this.processresult=null,this.focusedevent=null,this.processcleared()},searching(t){this.searchchanged=t},processcleared(){this.hasprocesscleared=!0},toeventscrolled(){this.hastoeventscrolled=!0},creatorLeft(t){this.brokenRoom=t},closeModal(){this.openInviteModal=!1},closeContactModal(t){this.openInviteModal=t},addMemberModal(t){this.openInviteModal=t},newchat(t){},sending(){},eventsRoom(t){this.events=t},menuIsVisibleHandler(t){this.hideHeader=t},leaveIfBroken(){return!!this.brokenRoom&&(this.core.mtrx.client.leave(from.query.id).then(t=>{this.core.mtrx.client.forget(from.query.id,!0).then(t=>t).then(t=>{this.$store.commit("DELETE_ROOM",from.query.id)})}),!0)}}},w=k;function I(t){var e=a("3077");e.__inject__&&e.__inject__(t)}var C=Object(b["a"])(w,i,s,!1,I,"4c0e7fac",null,!0);e["default"]=C.exports},ef27:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".roomStatusView[data-v-170ef52d]{height:50vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.roomStatusView .statusViewIcon i[data-v-170ef52d]{color:rgb(var(--color-txt-ac));font-size:5em}.roomStatusView .text[data-v-170ef52d]{margin:40px 0;color:rgb(var(--color-txt-ac))}",""]),t.exports=e},ef2a:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"#chatAttachement[data-v-bd3aba00]{height:90px;width:120px;border-radius:5px;overflow:hidden;position:relative;background:rgb(var(--background-secondary-theme))}#chatAttachement>div[data-v-bd3aba00]{width:100%;height:100%}.cancel[data-v-bd3aba00],.loading[data-v-bd3aba00]{position:absolute;height:90px;width:120px;line-height:90px;text-align:center;font-size:3em;left:0;top:0;background:rgba(var(--background-main),.8);color:rgba(var(--text-color),.2)}.cancel[data-v-bd3aba00]{background:transparent;font-size:1.2em;color:rgb(var(--text-color))}.file[data-v-bd3aba00]{text-align:center;font-size:.8em;padding-top:1em}.file span[data-v-bd3aba00]{white-space:normal}.file .fileicon i[data-v-bd3aba00]{opacity:.4;font-size:1.5em}.image[data-v-bd3aba00],.image .bgimage[data-v-bd3aba00]{width:100%;height:100%}",""]),t.exports=e},fbee:function(t,e,a){var i=a("ef27");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("077e6199",i,t)}},fd90:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".call[data-v-b3a12b78]{font-size:.8em;outline:none;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.call.disabled[data-v-b3a12b78]{color:rgb(var(--neutral-grad-1));cursor:not-allowed}.call.disabled[data-v-b3a12b78]:after{display:none}.call.wait[data-v-b3a12b78]{color:rgb(var(--color-star-yellow));cursor:not-allowed}.call.wait[data-v-b3a12b78]:after{display:none}.nameWrapper[data-v-b3a12b78]{display:flex;align-items:flex-end;justify-content:center}.roomMuted[data-v-b3a12b78]{font-size:.4em;width:16px;min-width:16px;text-align:center;height:16px;line-height:16px;border-radius:8px;background:rgb(var(--neutral-grad-2));margin-left:.5em;margin-block:.25em}.roomMuted i[data-v-b3a12b78]{color:rgb(var(--neutral-grad-1))}.editButton[data-v-b3a12b78]{display:flex;justify-content:center;align-items:center}.editButton i[data-v-b3a12b78]{font-size:1.5em}.nameline[data-v-b3a12b78],[data-v-b3a12b78] .nameline{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[data-v-b3a12b78] .nameline{max-width:250px}[data-v-b3a12b78] #topheader.minimized.fix{background:transparent;overflow:inherit}[data-v-b3a12b78] #search{padding-left:.5em;padding-right:.5em}.donationModalBody[data-v-b3a12b78]{padding:1em;display:flex;flex-direction:column}.donationModalBody span[data-v-b3a12b78]{color:rgb(var(--color-txt-ac))}.donationModalBody input[data-v-b3a12b78],.donationModalBody select[data-v-b3a12b78]{margin-top:.5em;margin-bottom:1.5em;border:1px solid rgb(var(--color-txt-ac));border-radius:3px;padding:.5em}.donationModalBody input.disabled[data-v-b3a12b78],.donationModalBody select.disabled[data-v-b3a12b78]{color:rgb(var(--neutral-grad-2));border:1px solid rgba(var(--neutral-grad-2),.5)}.donationModalBody button[data-v-b3a12b78]{margin-top:1em}.donationModalBody button i[data-v-b3a12b78]{margin-right:.2em}.donationModalBody .totalAmount[data-v-b3a12b78]{font-weight:700;margin-left:.5em;margin-top:.5em;margin-bottom:1em}.donationModalBody .error[data-v-b3a12b78]{color:rgb(var(--color-bad));text-align:center}.donationModalBody .linepreloader[data-v-b3a12b78]{text-align:center;height:29px;margin-top:1em}#simpleSearch .matches[data-v-b3a12b78]{display:flex;align-items:center;height:100%}#simpleSearch .matches i[data-v-b3a12b78],#simpleSearch .matches span[data-v-b3a12b78]{font-size:.8em;padding:.5em}#simpleSearch .matches i[data-v-b3a12b78]{cursor:pointer}#simpleSearch .matches i[data-v-b3a12b78]:hover{color:rgb(var(--color-txt-ac))}.encrypted[data-v-b3a12b78]{z-index:2;color:rgb(var(--color-good));padding:.25em .5em}.encrypted i[data-v-b3a12b78]{font-size:.8em;cursor:pointer}.encryptedInfo[data-v-b3a12b78]{cursor:default;margin-left:-25px;position:absolute;top:50%;transform:translateY(-50%);z-index:9999;display:flex;justify-content:center;align-items:center;flex-direction:column}.encryptedInfo #slide[data-v-b3a12b78]{border-radius:8px;padding:0 .5em;position:absolute;left:0;background:#fff;-webkit-animation:slide-b3a12b78 .1s forwards;-webkit-animation-delay:.3s;animation:slide-b3a12b78 .1s forwards;animation-delay:.3s;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}@keyframes slide-b3a12b78{to{left:0}}.encryptedInfo button[data-v-b3a12b78]{cursor:pointer;display:flex;align-items:center;justify-content:flex-start;text-align:left}.encryptedInfo button i[data-v-b3a12b78]{margin-right:5px}.encryptedInfo .encryptedTxtIcon[data-v-b3a12b78]{flex-direction:column;align-items:center;justify-content:center;padding:.25em .25em;text-align:center}.encryptedInfo .encryptedTxtIcon span[data-v-b3a12b78]{color:rgb(var(--color-good));font-size:.8em}.encryptedInfo .encryptedTxtIcon i[data-v-b3a12b78]{color:rgb(var(--color-good));display:none}",""]),t.exports=e}}]);
//# sourceMappingURL=matrix-element.12.min.js.map