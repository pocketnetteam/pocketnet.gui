(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[4],{"0242":function(t,e,n){var i=n("699a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("18349eb4",i,t)}},"0405":function(t,e,n){"use strict";n.r(e);var i=n("47b1");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"0826":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"typingBlock",staticStyle:{position:"relative"}},[n("div",{staticClass:"typingBlockWrapper"},[t._m(0),n("div",[n("PulseLoader",{attrs:{color:t.color,size:t.size,loading:!0}})],1)])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("typing")])])}],o=n("8a5d"),r={name:"typing",props:{},components:{PulseLoader:o["a"]},data:function(){return{color:"#868686",size:"2px",loading:!0}},methods:{},computed:{}},s=r,c=n("2877");function d(t){var e=n("1b86");e.__inject__&&e.__inject__(t)}var l=Object(c["a"])(s,i,a,!1,d,null,null,!0);e["a"]=l.exports},"0bf1":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e},"0e42":function(t,e,n){"use strict";n.r(e);var i=n("7c32");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"142f":function(t,e,n){var i=n("333f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("9c7fd778",i,t)}},1767:function(t,e,n){var i=n("7113");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("7fe14a47",i,t)}},"1b86":function(t,e,n){"use strict";n.r(e);var i=n("5f7e");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"1eed":function(t,e,n){"use strict";n.r(e);var i=n("e331");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"20fe":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".input-component[data-v-65ed421a]{padding:0 1em;padding-right:0}.input-component[data-v-65ed421a],.input-component .input-wrapper[data-v-65ed421a]{width:100%;display:flex;justify-content:center;align-items:center}.input-component .input-wrapper[data-v-65ed421a]{position:relative}.input-component .right[data-v-65ed421a]{margin:0 .5em}.input-component .iconbutton .leftdummy[data-v-65ed421a]{width:20px}.input-component .iconbutton .rightdummy[data-v-65ed421a]{width:35px}.input-component .iconbutton .idummy[data-v-65ed421a]{width:100%;height:35px;line-height:35px}.input-component .iconbutton .idummy i[data-v-65ed421a]{line-height:35px!important}.chat-input[data-v-65ed421a]{width:100%;max-height:63px;overflow-y:auto;resize:none}.chat-input[data-v-65ed421a]::-webkit-scrollbar{width:0!important}.fade-enter-active[data-v-65ed421a],.fade-leave-active[data-v-65ed421a]{transition:all .2s ease-in}.fade-enter[data-v-65ed421a],.fade-leave-to[data-v-65ed421a]{opacity:0}",""]),t.exports=e},"21ff":function(t,e,n){var i=n("7d04");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("9f8cbcf2",i,t)}},2529:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=classic] .caption span[data-v-074c8f52]{color:#0035a8}#matrix-root[theme=classic] .joinAction[data-v-074c8f52]{background:#ececec}#matrix-root[theme=classic] .my-swipe[data-v-074c8f52]{color:#fff}#matrix-root[theme=classic] .slide1[data-v-074c8f52]{background-color:#0089dc;color:#fff}#matrix-root[theme=classic] .slide2[data-v-074c8f52]{background-color:#ffd705;color:#000}#matrix-root[theme=classic] .slide3[data-v-074c8f52]{background-color:#ff2d4b;color:#fff}",""]),t.exports=e},2646:function(t,e,n){"use strict";n.r(e);var i=n("8a3c");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"26dc":function(t,e,n){var i=n("7b23");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("35c60a9a",i,t)}},"28a4":function(t,e,n){"use strict";n.r(e);var i=n("1767");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"2a24":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=black] .inputWrapper>div[data-v-0ecf8a13]{transition:.3s}#matrix-root[theme=black] .inputWrapper .center[data-v-0ecf8a13]{border:1px solid #c8c0c1;border-radius:50px}#matrix-root[theme=black] .inputWrapper input[data-v-0ecf8a13]{border:1px solid rgba(121,130,132,.3);background:rgba(11,21,32,.5);border-radius:30px}",""]),t.exports=e},"333c":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=white] .caption span[data-v-074c8f52]{color:#005ae0}#matrix-root[theme=white] .joinAction[data-v-074c8f52]{background:#ececec}#matrix-root[theme=white] .my-swipe[data-v-074c8f52]{color:#fff}#matrix-root[theme=white] .slide1[data-v-074c8f52]{background-color:#0089dc;color:#fff}#matrix-root[theme=white] .slide2[data-v-074c8f52]{background-color:#ffd705;color:#000}#matrix-root[theme=white] .slide3[data-v-074c8f52]{background-color:#ff2d4b;color:#fff}",""]),t.exports=e},"333f":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".nameWrapper[data-v-373e6a3c]{display:flex;align-items:center;justify-content:center}.roomMuted[data-v-373e6a3c]{margin-left:3px}.roomMuted i[data-v-373e6a3c]{font-size:.7em}.editButton[data-v-373e6a3c]{display:flex;justify-content:center;align-items:center}.editButton i[data-v-373e6a3c]{font-size:1.5em}.nameline[data-v-373e6a3c]{max-width:250px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#topheader.minimized.fix[data-v-373e6a3c]{background:transparent;overflow:inherit}#topheader .rightIcons .iconbutton[data-v-373e6a3c]{display:flex;justify-content:center;align-items:center}.donationModalBody[data-v-373e6a3c]{padding:1em;display:flex;flex-direction:column}.donationModalBody span[data-v-373e6a3c]{color:#12488a}.donationModalBody input[data-v-373e6a3c],.donationModalBody select[data-v-373e6a3c]{margin-top:.5em;margin-bottom:1.5em;border:1px solid #12488a;border-radius:3px;padding:.5em}.donationModalBody input.disabled[data-v-373e6a3c],.donationModalBody select.disabled[data-v-373e6a3c]{color:rgba(176,191,198,.8);border:1px solid rgba(176,191,198,.5)}.donationModalBody button[data-v-373e6a3c]{margin-top:1em}.donationModalBody button i[data-v-373e6a3c]{margin-right:.2em}.donationModalBody .totalAmount[data-v-373e6a3c]{font-weight:700;margin-left:.5em;margin-top:.5em;margin-bottom:1em}.donationModalBody .error[data-v-373e6a3c]{color:#ff0c39;text-align:center}.donationModalBody .linepreloader[data-v-373e6a3c]{text-align:center;height:29px;margin-top:1em}",""]),t.exports=e},3449:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".topheader[data-v-4e29656b]{width:100%;top:0;z-index:999}.aboutContact[data-v-4e29656b]{position:absolute;left:0;right:0;top:100px;bottom:0;z-index:999;background:#fff}",""]),t.exports=e},"37bb":function(t,e,n){"use strict";n.r(e);var i=n("68a2");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"37e7":function(t,e,n){var i=n("8a69");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("14c9187d",i,t)}},"38d3":function(t,e,n){var i=n("3449");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("387c81f2",i,t)}},3901:function(t,e,n){"use strict";n.r(e);var i=n("940c");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"395c":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=black] .userinfoWrapper[data-v-2eb31a16]{background:#0b1520}",""]),t.exports=e},"3d46":function(t,e,n){var i=n("cd2e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("7b2f06a2",i,t)}},"3eda":function(t,e,n){"use strict";n.r(e);var i=n("0242");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"418e":function(t,e,n){"use strict";n.r(e);var i=n("9de4");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"46c5":function(t,e,n){var i=n("0bf1");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("6e6c3625",i,t)}},"47b1":function(t,e,n){var i=n("fe3a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("1597789b",i,t)}},"47f9":function(t,e,n){var i=n("2a24");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("22a88620",i,t)}},4962:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e},"4a41":function(t,e,n){"use strict";n.r(e);var i=n("d046");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"4a47":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=classic] .userinfoWrapper[data-v-2eb31a16]{background:#ececec}",""]),t.exports=e},"53eb":function(t,e,n){var i=n("395c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("10861708",i,t)}},"540a":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"[data-v-11645c45] .eventMember{text-align:center}[data-v-11645c45] .eventMember span{font-size:.9em}.pswp img[data-v-11645c45]{max-width:none;-o-object-fit:contain;object-fit:contain}#chatList.minimized:not(.active) .timeLineWrapper[data-v-11645c45]{padding-left:.5em}",""]),t.exports=e},"5bb4":function(t,e,n){"use strict";n.r(e);var i=n("976b");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"5bcb":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=white] .inputWrapper>div[data-v-0ecf8a13]{transition:.3s}#matrix-root[theme=white] .inputWrapper .center[data-v-0ecf8a13]{border:1px solid #c8c0c1;border-radius:50px}#matrix-root[theme=white] .inputWrapper input[data-v-0ecf8a13]{border:1px solid hsla(0,0%,43.9%,.3);background:hsla(0,0%,92.5%,.5);border-radius:30px}",""]),t.exports=e},"5f7e":function(t,e,n){var i=n("bd86");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("3c4a7888",i,t)}},"630e":function(t,e,n){var i=n("4a47");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("7265782e",i,t)}},"66f9":function(t,e,n){"use strict";n.r(e);var i=n("47f9");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"68a2":function(t,e,n){var i=n("c21b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("bb9cabe6",i,t)}},"699a":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".previewWrapper[data-v-2eb31a16]{padding:.5em}.userinfoWrapper[data-v-2eb31a16]{width:100%;padding:1em;background:#ececec}.VueCarousel[data-v-2eb31a16]{width:100%}",""]),t.exports=e},"6aea":function(t,e,n){var i=n("8186");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("50899951",i,t)}},"6c3f":function(t,e,n){"use strict";n.r(e);var i=n("630e");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"6f09":function(t,e,n){"use strict";n.r(e);var i=n("fc74");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},7027:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e},7113:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e},7117:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#chatInput[data-v-0ecf8a13]{padding-bottom:.5em;padding-top:.5em}.inputWrapper[data-v-0ecf8a13]{display:flex}.inputWrapper .left[data-v-0ecf8a13]{width:35px;text-align:center}.inputWrapper .left .iconbutton[data-v-0ecf8a13]{width:35px}.inputWrapper .leftdummy[data-v-0ecf8a13]{width:.5em}.inputWrapper>div[data-v-0ecf8a13]{transition:.3s}.inputWrapper .center[data-v-0ecf8a13]{max-height:70px;display:flex;justify-content:center;align-items:center;flex-grow:1;border:1px solid #c8c0c1;border-radius:50px;padding-right:.5em}.inputWrapper input[data-v-0ecf8a13]{border:1px solid hsla(0,0%,43.9%,.3);background:hsla(0,0%,92.5%,.5);border-radius:30px;width:100%;padding:.5em 1em}.notready[data-v-0ecf8a13],.waitjoined[data-v-0ecf8a13]{padding:.5em 0;text-align:center}.waitjoined span[data-v-0ecf8a13]{font-size:.8em}.greetings[data-v-0ecf8a13]{padding:.5em 0}.greetings[data-v-0ecf8a13],[data-v-0ecf8a13] .iconWrapper{text-align:center}.menu-item[data-v-0ecf8a13]{padding:.5em;background:#fff;line-height:44px;display:flex}.menu-item .title[data-v-0ecf8a13]{flex-grow:2;padding-right:44px;text-align:center}.menu-item .iconWrapper[data-v-0ecf8a13]{width:44px}",""]),t.exports=e},"720d":function(t,e,n){"use strict";n.r(e);var i=n("46c5");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"731c":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=classic] .inputWrapper>div[data-v-0ecf8a13]{transition:.3s}#matrix-root[theme=classic] .inputWrapper .center[data-v-0ecf8a13]{border:1px solid #c8c0c1;border-radius:50px}#matrix-root[theme=classic] .inputWrapper input[data-v-0ecf8a13]{border:1px solid hsla(0,0%,43.9%,.3);background:hsla(0,0%,92.5%,.5);border-radius:30px}",""]),t.exports=e},"748b":function(t,e,n){var i=n("20fe");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("fa1ff552",i,t)}},"7b23":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=white] .galleryRow .messageImg .img[data-v-e6d2ad12],#matrix-root[theme=white] .galleryRow .messageImg .loadingImg[data-v-e6d2ad12],#matrix-root[theme=white] .galleryRow .messageImg .loadingImg .imgPreview[data-v-e6d2ad12]{border-radius:.5em}#matrix-root[theme=white] .galleryRow .messageImg .imgMsg img[data-v-e6d2ad12]{border-radius:1em}",""]),t.exports=e},"7b55":function(t,e,n){"use strict";n.r(e);var i=n("6aea");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"7c32":function(t,e,n){var i=n("825f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("41aa9e86",i,t)}},"7d04":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=white] .userinfoWrapper[data-v-2eb31a16]{background:#ececec}",""]),t.exports=e},"7f2e":function(t,e,n){"use strict";n.r(e);var i=n("26dc");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},8186:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=white] .chatInputWrapper[data-v-2636c3cc]{transition:.3s}#matrix-root[theme=white] .chatEmpty[data-v-2636c3cc]{color:#606369}",""]),t.exports=e},"825f":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=classic] .galleryRow .messageImg .img[data-v-e6d2ad12],#matrix-root[theme=classic] .galleryRow .messageImg .loadingImg[data-v-e6d2ad12],#matrix-root[theme=classic] .galleryRow .messageImg .loadingImg .imgPreview[data-v-e6d2ad12]{border-radius:.5em}#matrix-root[theme=classic] .galleryRow .messageImg .imgMsg img[data-v-e6d2ad12]{border-radius:1em}",""]),t.exports=e},"826c":function(t,e,n){"use strict";n.r(e);var i=n("38d3");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"82e9":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".chatInputWrapper[data-v-2636c3cc]{position:fixed;z-index:3;bottom:0;background:#fff;left:0;right:0;transition:.3s}.chatInputWrapper.bin[data-v-2636c3cc]{position:absolute;left:1px;right:1px;bottom:1px;border-radius:5px}#chat.minimized .chatInputWrapper[data-v-2636c3cc]{opacity:0}#chat.minimized.active[data-v-2636c3cc]{padding-bottom:90px}#chat.minimized.active .chatInputWrapper[data-v-2636c3cc]{opacity:1}.encrypted[data-v-2636c3cc]{position:absolute;left:0;top:0;z-index:2;color:#06823a;padding:.25em .5em}.encrypted i[data-v-2636c3cc]{font-size:.8em}.roomMuted[data-v-2636c3cc]{position:absolute;left:5px;top:20px;z-index:2;color:#606369}.roomMuted i[data-v-2636c3cc]{font-size:.8em}.chatEmpty[data-v-2636c3cc]{padding:4em;text-align:center;color:#606369}.chatEmpty span[data-v-2636c3cc]{font-size:.8em}.preview-wrapper[data-v-2636c3cc]{max-height:350px;overflow-y:auto;border:1px solid rgba(96,99,105,.3);border-radius:10px;margin:0 auto;width:98%}.preview-wrapper[data-v-2636c3cc]::-webkit-scrollbar{width:0!important}",""]),t.exports=e},"86f7":function(t,e,n){var i=n("bd91");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("4fe295d2",i,t)}},8747:function(t,e,n){var i=n("540a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("b9f6a25c",i,t)}},"8a3c":function(t,e,n){var i=n("4962");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("5413bc34",i,t)}},"8a69":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".eventWrapper[data-v-e6d2ad12]{padding:.5em 0}.fade-move[data-v-e6d2ad12]{transition:1}.fade-leave-active~.eventWrapper[data-v-e6d2ad12]{display:none}.galleryRow[data-v-e6d2ad12]{display:flex;align-items:flex-end}.galleryRow .messageImg[data-v-e6d2ad12]{max-width:50%;margin:0 10px;position:relative}.galleryRow .messageImg .img[data-v-e6d2ad12]{display:block;border-radius:.5em;position:relative;max-width:100%}.galleryRow .messageImg .loadingImg[data-v-e6d2ad12]{display:flex;align-items:center;justify-content:center;border-radius:.5em;position:relative;max-width:300px;height:250px}.galleryRow .messageImg .loadingImg .imgPreview[data-v-e6d2ad12]{border-radius:.5em;position:relative;max-width:100%;height:100%;opacity:.6}.galleryRow .messageImg .loadingImg .clipLoader[data-v-e6d2ad12]{position:absolute;z-index:9999;left:50%;right:0;top:50%;bottom:0;transform:translate(-50,50);display:flex;align-items:center;justify-content:center}.galleryRow .messageImg .imgMsg img[data-v-e6d2ad12]{max-width:100%;-o-object-fit:cover;object-fit:cover;border-radius:1em;display:block}.galleryRow .messageImg .metaLink[data-v-e6d2ad12]{background:#000}.galleryRow .messageImg .metaLink .metaMessageLink .metaTitle[data-v-e6d2ad12]{font-weight:700;font-size:.9em}.galleryRow .messageImg .metaLink .metaMessageLink .metaDescription[data-v-e6d2ad12]{margin:.5em 0;font-size:.8em}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper[data-v-e6d2ad12]{display:block;max-width:300px;-o-object-fit:cover;object-fit:cover}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper img[data-v-e6d2ad12]{display:block;width:100%;height:100%}",""]),t.exports=e},"8b1e":function(t,e,n){var i=n("e753");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("5197fb73",i,t)}},9113:function(t,e,n){"use strict";n.r(e);var i=n("748b");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"937a":function(t,e,n){"use strict";n.r(e);var i=n("21ff");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},"940c":function(t,e,n){var i=n("5bcb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("27054daf",i,t)}},"976b":function(t,e,n){var i=n("d661");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("198eb29c",i,t)}},9928:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".loadingImg{max-width:100%;padding:.5em 1em}.loadingImg .imagePreview{position:relative;max-width:50%;margin:0 10px 0 auto}.loadingImg .imagePreview img{display:block;max-width:100%;-o-object-fit:cover;object-fit:cover;border-radius:1em;opacity:.4}.loadingImg .imagePreview .previewLoader{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9999}",""]),t.exports=e},"9bf4":function(t,e,n){var i=n("2529");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("5defd48e",i,t)}},"9de4":function(t,e,n){var i=n("333c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("460c6d66",i,t)}},a256:function(t,e,n){"use strict";n.r(e);var i=n("3d46");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},b510:function(t,e,n){"use strict";n.r(e);var i=n("d933");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},bd86:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".typingBlock{position:relative}.typingBlock .typingBlockWrapper{position:absolute;left:50%;transform:translateX(-50%);top:-5px;display:flex;align-items:center}.typingBlock .typingBlockWrapper>div{padding:0 .5em}.typingBlock .typingBlockWrapper span{font-size:.7em;color:#707070;opacity:.8}",""]),t.exports=e},bd91:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=black] .chatInputWrapper[data-v-2636c3cc]{transition:.3s}#matrix-root[theme=black] .chatEmpty[data-v-2636c3cc]{color:#92979d}",""]),t.exports=e},be9a:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=black] .caption span[data-v-074c8f52]{color:#12488a}#matrix-root[theme=black] .joinAction[data-v-074c8f52]{background:#0b1520}#matrix-root[theme=black] .my-swipe[data-v-074c8f52]{color:#fff}#matrix-root[theme=black] .slide1[data-v-074c8f52]{background-color:#0089dc;color:#fff}#matrix-root[theme=black] .slide2[data-v-074c8f52]{background-color:#ffd705;color:#000}#matrix-root[theme=black] .slide3[data-v-074c8f52]{background-color:#ff2d4b;color:#fff}",""]),t.exports=e},c21b:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=black] .galleryRow .messageImg .img[data-v-e6d2ad12],#matrix-root[theme=black] .galleryRow .messageImg .loadingImg[data-v-e6d2ad12],#matrix-root[theme=black] .galleryRow .messageImg .loadingImg .imgPreview[data-v-e6d2ad12]{border-radius:.5em}#matrix-root[theme=black] .galleryRow .messageImg .imgMsg img[data-v-e6d2ad12]{border-radius:1em}",""]),t.exports=e},c415:function(t,e,n){"use strict";n.r(e);var i=n("d569");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},c495:function(t,e,n){"use strict";n.r(e);var i=n("cabf");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},c9bc:function(t,e,n){"use strict";n.r(e);var i=n("53eb");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},cabf:function(t,e,n){var i=n("9928");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("6b61ab55",i,t)}},cd2e:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e},d046:function(t,e,n){var i=n("be9a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("76053700",i,t)}},d569:function(t,e,n){var i=n("7027");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("5b73ea62",i,t)}},d661:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".caption[data-v-074c8f52]{padding:1em;text-align:center}.caption span[data-v-074c8f52]{font-size:2em;font-weight:700;color:#0a68ad}.tip[data-v-074c8f52]{padding:1.5em;text-align:center}.tip span[data-v-074c8f52]{font-size:.8em}.joinAction[data-v-074c8f52]{position:fixed;bottom:0;left:0;right:0;background:#ececec;padding:1em 0;text-align:center;z-index:2}.joinAction.bin[data-v-074c8f52]{position:absolute}.joinAction .actions[data-v-074c8f52]{display:flex}.joinAction .actions .action[data-v-074c8f52]{padding:.5em;flex-grow:1}.joinAction .actions .action button[data-v-074c8f52]{min-width:0;width:100%}.my-swipe[data-v-074c8f52]{height:200px;color:#fff;font-size:30px;text-align:center}.slide1[data-v-074c8f52]{background-color:#0089dc;color:#fff}.slide2[data-v-074c8f52]{background-color:#ffd705;color:#000}.slide3[data-v-074c8f52]{background-color:#ff2d4b;color:#fff}",""]),t.exports=e},d933:function(t,e,n){var i=n("731c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("d1d9d65e",i,t)}},e331:function(t,e,n){var i=n("7117");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("79bcfa4e",i,t)}},e753:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"#matrix-root[theme=classic] .chatInputWrapper[data-v-2636c3cc]{transition:.3s}#matrix-root[theme=classic] .chatEmpty[data-v-2636c3cc]{color:#606369}",""]),t.exports=e},ee79:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page chat"},[n("topheader",{staticClass:"topheader",attrs:{u:t.u,chat:t.chat},on:{addMember:t.addMemberModal}}),t.roomInfo?t._e():n("maincontent",{scopedSlots:t._u([{key:"content",fn:function(){return[n("chat",{attrs:{u:t.u,chat:t.chat},on:{sending:t.sending,newchat:t.newchat,getEvents:t.eventsRoom}})]},proxy:!0}],null,!1,2636658855)}),t.openInviteModal?n("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[n("span",[t._v("Invite User")])]},proxy:!0},{key:"body",fn:function(){return[n("contacts",{attrs:{mode:"inviteUsers",chatRoomId:t.chat.roomId},on:{closeModal:t.closeContactModal}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,1239787889)}):t._e()],1)},a=[],o=n("5530"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active},attrs:{id:"chat"}},[t.m_chat&&"join"===t.membership()?n("list",{attrs:{chat:t.m_chat,imagePreview:t.prevImage,filePrev:t.anyFilePreview},on:{openImg:t.openImgM,getEvents:t.events}}):t._e(),t.m_chat&&"invite"===t.membership()?n("div",{staticClass:"joinwrapper"},[n("join",{attrs:{chat:t.m_chat,usersinfo:t.usersinfo}})],1):t._e(),!t.m_chat&&t.usersinfo&&t.usersinfo.length?n("div",{staticClass:"chatEmpty"},[n("span",[t._v("Start chat with "+t._s(t.usersinfoNames()))])]):t._e(),n("transition",{attrs:{name:"fade"}},[t.m_chat&&"join"!==t.membership()?t._e():n("div",{staticClass:"chatInputWrapper fixedOnPageBottom",class:{bin:t.pocketnet,bout:!t.pocketnet}},[n("div",[t.urlpreview?n("div",{staticClass:"preview-wrapper"},[n("url",{attrs:{url:t.urlpreview,preview:!0}})],1):t._e(),n("chatInput",{attrs:{u:t.u,chat:t.m_chat},on:{sending:t.sending,newchat:t.newchat,closeMetaPreview:t.closing,inputClean:t.hidePreview,setMetaUrl:t.chatUrlHandler,filePreview:t.getFilePreview,anyFileSend:t.anyFileData,emptyInput:t.hidePreview}})],1)])]),t.encrypted?n("div",{staticClass:"encrypted"},[n("i",{staticClass:"fas fa-lock"})]):t._e()],1)},s=[],c=(n("a15b"),n("d81d"),n("b0c0"),n("2f62")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active},attrs:{id:"chatList"}},[n("div",{ref:"work",staticClass:"work"},[n("div",{ref:"uspbottom",staticClass:"uspbottomSpacer "}),n("div",{ref:"direction_b",staticClass:"bottomSpacer spacer"}),n("div",{ref:"events",staticClass:"timeLineWrapper"},[t.timeline?n("events",{attrs:{events:t.events,filePreview:t.filePrev,previewImage:t.imagePreview,chat:t.chat},on:{updated:t.eventsUpdated,updatedSize:t.updatedSize,removeEvent:t.removeEvent}}):t._e()],1),n("div",{ref:"direction_f",staticClass:"topSpacer spacer"})])])},l=[],u=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"events"}},[n("div",t._l(t.events,(function(e){return e.localRedactionEvent()||e.getRedactionEvent()?t._e():n("div",{key:e.event.event_id,staticClass:"eventWrapper"},[n("event",{attrs:{event:e,filePreview:t.filePreview,galleryData:t.events,clientWidth:t.clientWidth,chat:t.chat},on:{openImageEvent:function(n){return t.galleryOpen(e)},removeEvent:function(n){return t.removeEvent(e)},updatedSize:t.updatedSize}})],1)})),0),!1!==t.previewImage.show?n("div",[n("imgPreview",{attrs:{imagePreview:t.previewImage}})],1):t._e(),t.listImgs&&t.listImgs.length&&t.isOpen?n("v-photoswipe",{attrs:{isOpen:t.isOpen,items:t.listImgs,options:t.options},on:{close:t.hidePhotoSwipe}}):t._e()],1)}),f=[],m=n("6167"),p=n("46e4"),h=n("c46f"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loadingImg"},[n("div",{staticClass:"imagePreview"},[n("img",{staticClass:"imgPreview",attrs:{src:t.imagePreview,alt:""}}),n("div",{staticClass:"previewLoader"},[n("clip-loader",{staticClass:"clipLoader",attrs:{size:"25px",color:"#0035a8",loading:!0}})],1)])])},g=[],b=n("da7a"),x={props:{imagePreview:{}},components:{clipLoader:b["a"]}},w=x,y=n("2877");function I(t){var e=n("c495");e.__inject__&&e.__inject__(t)}var j=Object(y["a"])(w,v,g,!1,I,null,null,!0),k=j.exports,M={name:"events",props:{events:Array,chat:Object,previewImage:{type:Object,default:function(){return{show:!1}}},filePreview:Object},components:{event:m["a"],"v-photoswipe":p["PhotoSwipe"],"v-photoswipe-gallery":p["PhotoSwipeGallery"],imgPreview:k},data:function(){return{isOpen:!1,isOpenGallery:!1,type:"",clientWidth:1e3,options:{index:0,arrowEl:!1,fullscreenEl:!1,shareEl:!1},optionsGallery:{},imgs:[],listImgs:[],loading:!1,wasupdated:{},image_list:[]}},created:function(){},watch:{},computed:Object(c["c"])({auth:function(t){return t.auth}}),updated:function(){var t=this,e={};h["b"](this.events,(function(n){t.wasupdated[n.event.event_id]||(e[n.event.event_id]=n)})),this.$emit("updated",e),h["b"](this.events,(function(e){t.wasupdated[e.event.event_id]=!0}))},methods:{updatedSize:function(t){this.$emit("updatedSize",t)},removeEvent:function(t){console.log("removeEvent",t),this.$emit("removeEvent",t)},showPhotoSwipe:function(t){this.isOpen=!0,this.$set(this.options,"index",t)},hidePhotoSwipe:function(){this.isOpen=!1},galleryOpen:function(t){var e=this;this.imgs=this.events,this.listImgs=[],h["b"](this.imgs,(function(t){"m.image"===t.event.content.msgtype&&e.listImgs.push({src:t.event.content.url,w:t.event.content.info.w,h:t.event.content.info.h,eventId:t.event.event_id})}));var n=this.listImgs.map((function(t){return t.eventId})).indexOf(t.event.event_id);this.showPhotoSwipe(n)},getClientWidth:function(){var t=this.$el.clientWidth;this.clientWidth=t}},mounted:function(){this.getClientWidth(),window.addEventListener("resize",this.getClientWidth)},beforeDestroy:function(){window.removeEventListener("resize",this.getClientWidth)}},C=M;function O(t){var e=n("fd56");e.__inject__&&e.__inject__(t);var i=n("7f2e");i.__inject__&&i.__inject__(t);var a=n("37bb");a.__inject__&&a.__inject__(t);var o=n("0e42");o.__inject__&&o.__inject__(t)}var P=Object(y["a"])(C,u,f,!1,O,"e6d2ad12",null,!0),E=P.exports,S={name:"chatList",props:{chat:Object,to:String,prev:{},putMeta:{},filePrev:[Object,File],imagePreview:{}},components:{events:E},data:function(){return{encryptedEvents:[],loading:!1,scrolling:!1,scrollingTo:0,cancelNextScroll:!1,timeline:null,c_uspbottomHeight:0,c_frombottomscroll:0,c_bottomWndOffset:80,c_topWndOffset:55,p_b:!1,p_f:!1,updateTimeout:null,updateInterval:null,events:[],firstPaginate:!0,container:window}},mounted:function(){this.bin?(this.container=$(this.$el).closest(".headerSpacer")[0],this.c_bottomWndOffset=90,this.c_topWndOffset=0):this.container=window,this.init()},watch:{},computed:Object(c["c"])({auth:function(t){return t.auth},eventsTypes:function(){var t={"m.room.message":!0,"m.room.encrypted":!0,"m.room.image":!0,"m.room.file":!0,"m.room.member":!0};return _.toArray(this.chat&&this.chat.currentState.members||{}).length>2&&(t["m.room.member"]=!0,t["m.room.power_levels"]=!0),t},pocketnet:function(t){return t.pocketnet},minimized:function(t){return t.minimized},active:function(t){return t.active},bin:function(t){return t.pocketnet}}),created:function(){this.container.addEventListener("wheel",this.wheel),this.updateInterval=setInterval(this.update,50)},destroyed:function(){this.container.removeEventListener("wheel",this.wheel),this.timeline&&this.timeline.unpaginate(this.timeline._eventCount,!0),clearInterval(this.updateInterval)},methods:{removeEvent:function(t){},wh:function(){return this.container?this.container.clientHeight:0},getEvents:function(){var t=this,e=this.timeline.getEvents();return this.$emit("getEvents",e),e=_.filter(e,(function(e){var n=e.event.type;if(!(t.chat.currentState.getMembers().length<=2&&"m.room.member"===e.event.type))return!t.eventsTypes||t.eventsTypes[n]})),e},init:function(){var t=this;this.loading=!0,this.firstPaginate=!0;var e=this.chat.getLiveTimeline(),n=e.getTimelineSet();this.timeline=new this.core.mtrx.sdk.TimelineWindow(this.core.mtrx.client,n),this.uspBottomHeight(),this.timeline.load(null,this.wh()||600).then((function(e){t.fixBottomScroll(),t.events=t.getEvents(),t.loading=!1,setTimeout((function(){t.correctBottomScroll(),t.autoPaginateAll()}),300)})).catch((function(e){t.loading=!1}))},autoPaginate:function(t){this.needLoad(t)&&this.paginate(t)},paginate:function(t,e){var n=this,i=this.container;if(!this.loading&&this.timeline&&!this["p_"+t]&&(this.timeline.canPaginate(t)||e)){this["p_"+t]=!0;var a=this.firstPaginate?25:12;this.firstPaginate||"f"===t||i.scrollTop<700?(this.fixBottomScroll(),this.timeline.paginate(t,a).then((function(e){n.events=n.getEvents(),n["p_"+t]=!1,n.correctBottomScroll()})).catch((function(e){n["p_"+t]=!1}))):this["p_"+t]=!1}},autoPaginateAll:function(){this.autoPaginate("b"),this.autoPaginate("f")},needLoad:function(t){var e=this.scroll(),n=this.eventsPosition(),i=!1,a=3*this.wh();return n&&("b"==t?n.top+a>=e&&(i=!0):Math.max(n.top+n.height-a)<=e&&(i=!0)),i},readEvent:function(t){var e=this,n=this.core.mtrx.me(t.event.sender);n||this.core.mtrx.isReaded(t,!0).then((function(n){n||e.core.mtrx.client.sendReadReceipt(t)}))},readFirst:function(){var t=this.timeline.getEvents();this.readEvent(t[0])},readLast:function(){var t=this.timeline.getEvents();this.readEvent(t[t.length-1])},readEvents:function(t){var e=this;_.each(t,(function(t){e.readEvent(t)}))},readAll:function(){var t=this,e=this.timeline.getEvents();_.each(e,(function(e){t.readEvent(e)}))},scroll:function(){return this.container.scrollY||this.container.scrollTop},eventsPosition:function(){return this.relativePosition(this.$refs.events.getBoundingClientRect())},workPosition:function(){return this.relativePosition(this.$refs.work.getBoundingClientRect())},relativePosition:function(t){var e=this.appBorders(),n={};return t||(t=this.defaultPosition()),_.each(this.defaultPosition(),(function(i,a){n[a]="height"!=a&&"width"!=a?t[a]-e[a]:t[a]})),n},defaultPosition:function(){return{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}},appBorders:function(){return this.container&&this.container.getBoundingClientRect?this.container.getBoundingClientRect():this.defaultPosition()},uspBottomHeight:function(){var t=this.eventsPosition();this.c_uspbottomHeight=this.wh()-(t.height||0)-this.c_topWndOffset-this.c_bottomWndOffset,this.c_uspbottomHeight<0&&(this.c_uspbottomHeight=0),this.$refs["uspbottom"].style.height=this.c_uspbottomHeight+"px"},spacerHeight:function(t){if("f"!=t){var e=2*this.wh(),n=this.$refs["direction_"+t].style,i=this.timeline.canPaginate(t);"b"==t&&(e-=this.c_uspbottomHeight),n.height=i?e+"px":"0px","b"==t&&this.correctBottomScroll()}},spacersHeight:function(){this.spacerHeight("b"),this.spacerHeight("f")},wheel:function(t){this.scrolling},updatedSize:function(t){if(t){if(console.log("fix"),!this.scrolling)var e=this.fixBottomScroll();console.log("S",e)}else console.log("correct"),this.scrolling||(this.spacersHeight(),this.uspBottomHeight(),this.fixBottomScroll())},eventsUpdated:function(t){this.readEvents(t),this.spacersHeight(),this.update()},update:function(t){this.scrolling||(this.uspBottomHeight(),this.fixBottomScroll(),this.autoPaginateAll())},fixBottomScroll:function(){var t=this.workPosition(),e=this.scrollingTo;this.scrolling||(e=this.scroll()),e||(e=0);var n=t.height-e-this.wh()+this.c_topWndOffset+this.c_bottomWndOffset;return n<0&&(n=0),this.c_frombottomscroll=n,n},correctBottomScroll:function(){var t=this.workPosition(),e=t.height+this.c_topWndOffset+this.c_bottomWndOffset-this.wh()-this.c_frombottomscroll;this.scrollTo(e)},scrollTo:function(t){var e=this;t<0&&(t=0),this.scrolling&&cancelAnimationFrame(this.scrolling),this.scrollingTo=t,this.scrolling=requestAnimationFrame((function(){e.container.scroll({top:t,behavior:"instant"}),e.scrollingTo=0,e.scrolling=null}))},openImgGallery:function(t){this.$emit("openImg",t)}}},R=S;function W(t){var e=n("f465");e.__inject__&&e.__inject__(t);var i=n("a256");i.__inject__&&i.__inject__(t);var a=n("c415");a.__inject__&&a.__inject__(t);var o=n("0405");o.__inject__&&o.__inject__(t)}var F=Object(y["a"])(R,d,l,!1,W,"11645c45",null,!0),T=F.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chatInput"}},[t.ready?n("div",{staticClass:"work"},[t.chat&&t.joined&&t.joined.length>1||!t.encrypted?n("div",{staticClass:"inputWrapper"},[n("div",{staticClass:"center"},[n("InputField",{ref:"newinput",on:{chatMessage:t.sendinput,setMetaUrl:t.emitUrl,emptyInput:t.emitInputData,FilledInput:t.HideUploadPic}}),t.upload&&t.chat?n("div",{staticClass:"left"},[n("div",{staticClass:"iconbutton"},[n("dropdownMenu",{ref:"dropdownMenu",attrs:{menuItems:t.menuItems,rowObject:{},icon:"fas fa-plus"},on:{itemClicked:t.menuItemClickHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[e.item.upload?n("upload",{attrs:{multiple:e.item.upload.multiple,extensions:e.item.upload.extensions,images:e.item.upload.images},on:{start:function(n){return t.uploadStart(e.item,n)},uploaded:function(n){return t.uploadUploaded(e.item,n)},uploadedAll:function(n){return t.uploadUploadedAll(e.item,n)},error:function(n){return t.uploadError(e.item,n)}},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"menu-item"},[n("div",{staticClass:"iconWrapper"},[e.item.icon?n("i",{class:e.item.icon}):t._e()]),n("div",{staticClass:"title"},[t._v(" "+t._s(e.item.title)+" ")])])]},proxy:!0},{key:"dropzone",fn:function(){},proxy:!0}],null,!0)}):n("div",{staticClass:"menu-item",on:{click:function(n){return t.menuItemClick(e.item)}}},[n("div",{staticClass:"iconWrapper"},[e.item.icon?n("i",{class:e.item.icon}):t._e()]),n("div",{staticClass:"title"},[t._v(" "+t._s(e.item.title)+" ")])])]}}],null,!1,2831926823)})],1)]):t._e()],1)]):t._e(),t.chat&&t.joined.length<2&&t.encrypted?n("div",{staticClass:"waitjoined"},[n("span",[t._v("Wait while users join to chat")])]):t._e()]):n("div",{staticClass:"notready"},[n("linepreloader")],1)])},z=[],B=(n("1276"),n("ac1f"),n("159b"),n("99af"),n("e6cf"),n("d3b7"),n("5319"),n("caad"),n("3139")),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-component"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"input-wrapper"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"chat-input",attrs:{type:"text",rows:"1"},domProps:{value:t.text},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.send_text(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?(e.preventDefault(),t.make_new_line(e)):null}],input:function(e){e.target.composing||(t.text=e.target.value)}}}),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("picker",{directives:[{name:"show",rawName:"v-show",value:t.display_emoji,expression:"display_emoji"}],style:{width:"325px",position:"absolute",bottom:"32px",right:"-60px",fontSize:"0.9em",fontFamily:"Segoe UI"},attrs:{exclude:t.exclude,set:"emojione",showPreview:!1,showSearch:!1},on:{select:t.insert_emoji}})],1)],1),n("div",{staticClass:"iconbutton",on:{click:t.toggle_emoji_picker}},[t._m(0)]),t.send?n("div",{staticClass:"iconbutton",on:{click:function(e){return t.send_text(e)}}},[t._m(1)]):t._e()])},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leftdummy"},[n("div",{staticClass:"idummy"},[n("i",{staticClass:"far fa-smile"})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rightdummy"},[n("div",{staticClass:"idummy"},[n("i",{staticClass:"far fa-paper-plane"})])])}],L=(n("466d"),n("b047")),H=n("19e9"),N=n.n(H),K={name:"InputField",components:{Picker:L["Picker"]},watch:{text:function(t){t?(this.send=!0,this.$emit("FilledInput")):(this.send=!1,this.$emit("emptyInput"))}},computed:{picker_height:function(){return.9*window.innerHeight}},methods:{toggle_emoji_picker:function(){this.display_emoji=!this.display_emoji},make_new_line:function(){if(this.text){this.text+="\n";var t=$(".chat-input").height()+24;$(".chat-input").css("height",t)}},send_text:function(t){t.textContent=this.text,this.text&&"\n"!==this.text&&(this.display_emoji=!1,this.$emit("chatMessage",t),this.$emit("emptyInput"),this.send=!1,this.text="",$(".chat-input").css("height","24px"))},insert_emoji:function(t){this.text=this.text+t.native}},data:function(){return{send:!1,toMatch:[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i],isPhone:!0,heightUp:40,areaValue:"",ready:!1,text:"",exclude:["flags"],display_emoji:!1,text_area_height:""}},mounted:function(){this.isPhone=this.toMatch.some((function(t){return navigator.userAgent.match(t)})),N()($(".chat-input"))}},V=K;function G(t){var e=n("9113");e.__inject__&&e.__inject__(t)}var Y=Object(y["a"])(V,U,D,!1,G,"65ed421a",null,!0),J=Y.exports,q="m.megolm.v1.aes-sha2",X={name:"chatInput",props:{chat:Object,u:String},components:{InputField:J},data:function(){return{encrypted:!1,upload:!0,info:{},loading:!1,text:"",file:{},fileInfo:{},ready:!1,needencrypt:!1,creating:!1,userId:"",menuItems:[{click:"cameraHandler",title:"Take photo or Video",icon:"fas fa-camera",upload:{multiple:!0,extensions:["jpg","jpeg","png"],images:{resize:{type:"fit"}}}},{click:"fileHandler",title:"Send File",icon:"fas fa-sticky-note",upload:{multiple:!0}}],anyUrlMeta:String,joinedMembers:[]}},watch:{usersForKeys:{immediate:!0,handler:function(){this.downloadKeys()}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["chats"])),{},{uusers:function(){return this.u?h["a"].map(this.u.split(","),(function(t){return t})):[]},ausers:function(){var t=this;return this.u?h["a"].map(this.u.split(","),(function(e){return t.core.user.matrixId(e)})):[]},invited:function(){return this.chat?(this.encrypted=this.core.mtrx.client.isRoomEncrypted(this.chat.roomId),console.log(this.encrypted),h["a"].map(h["a"].filter(this.chat.currentState.getMembers(),(function(t,e){return"invite"===t.membership})),(function(t){return t.userId}))):this.u?this.ausers:[]},joined:function(){if(!this.chat)return[];var t=this.chat.roomId,e=[];return h["a"].each(this.chats,(function(n){n.roomId===t&&n.members.forEach((function(t){"join"===t.membership&&e.push(t.userId)}))})),console.log(e,"Aaaaaaaaa213123213"),e},usersForKeys:function(){return this.invited.concat(this.joined)}}),created:function(){},mounted:function(){var t=this;this.downloadKeys().then((function(e){t.ready=!0,t.newchat()}))},methods:{wait:function(){var t=this;return this.$f.pretry((function(){return t.core.mtrx.client&&t.core.mtrx.access&&t.usersForKeys.length}))},downloadKeys:function(){var t=this;return this.wait().then((function(e){return t.core.mtrx.client.downloadKeysForUsers(t.usersForKeys,{token:t.core.mtrx.access.accessToken})}))},emitInputData:function(){this.$emit("emptyInput"),this.upload=!0},HideUploadPic:function(){this.upload=!1},emitUrl:function(t){this.$emit("setMetaUrl",t)},newchat:function(){var t=this;if(this.u){this.$store.state.globalpreloader=!0;var e=null,n=null;this.creating=!0,this.core.user.usersInfo(this.uusers).then((function(n){var i=t.core.mtrx.kit.tetatetid(n[0],t.core.user.userinfo);e=t.core.user.matrixId(n[0].id),t.core.user.matrixId(t.core.user.userinfo.id);var a=[{type:"m.room.encryption",state_key:"",content:{algorithm:q}}];return t.needencrypt=!1,t.core.mtrx.client.createRoom({room_alias_name:i,visibility:"private",invite:[e],name:"#"+i,initial_state:a})})).then((function(i){n=i,t.$store.state.globalpreloader=!1,console.log("CHAT",n),t.$emit("newchat",n);var a=t.core.mtrx.client.getRoom(i.room_id),o=a.currentState.getStateEvents("m.room.power_levels");return t.core.mtrx.client.setPowerLevel(n.room_id,e,100,o[0]).then((function(t){return console.log(t,"WTYFF@!#!@@!!@#!@#!@!@#"),t}))})).then((function(e){t.creating=!1})).catch((function(e){console.log("E",e),t.creating=!1,t.$store.state.globalpreloader=!1}))}},maySendMessage:function(){return this.chat&&this.chat.maySendMessage()},greetings:function(){this.send("ðŸ‘‹").then((function(t){return Promise.resolve(t)}))},sendinput:function(t,e){this.send(t.textContent).then((function(t){return Promise.resolve(t)}))},send:function(t,e){var n=this;console.log("text",t),console.log("chatinput",e);var i=t.replace(/\n/g,"<br/>");return this.chat||this.newchat(),this.$emit("sending"),this.$f.pretry((function(){return n.chat&&!n.creating})).then((function(){return n.core.mtrx.client.prepareToEncrypt(n.chat)})).then((function(){return n.core.mtrx.client.sendEvent(n.chat.roomId,"m.room.message",{body:i,msgtype:"m.text"},"").catch((function(t){console.log(t)}))}))},encrypt:function(){return this.core.mtrx.client.setRoomEncryption(this.chat.roomId,{algorithm:q})},encryptIfNeed:function(){return Promise.resolve()},sendImage:function(t){var e=this;this.$emit("sending"),this.$f.pretry((function(){return e.chat})).then((function(){return e.core.mtrx.uploadContent(t.file)})).then((function(t){return e.core.mtrx.client.sendImageMessage(e.chat.roomId,t,e.info,"Image"),e.$emit("previewImg",{}),e.encryptIfNeed()})).catch((function(t){console.log(t)}))},sendFile:function(t){var e=this;this.file=t.file,this.$emit("sending"),this.$f.pretry((function(){return e.chat})).then((function(){return e.core.mtrx.client.uploadContent(e.file)})).then((function(t){return Promise.resolve(e.core.mtrx.client.mxcUrlToHttp(t))})).then((function(t){e.fileInfo.url=t,e.fileInfo.name=e.file.name,e.fileInfo.size=e.file.size;var n=JSON.stringify(e.fileInfo);return e.core.mtrx.client.sendMessage(e.chat.roomId,{body:n,msgtype:"m.file"}),e.$emit("anyFileSend",{}),e.file={},e.encryptIfNeed()})).catch((function(t){console.log(t)}))},focus:function(){},blur:function(){},change:function(){},keyup:function(t){var e=t.target.value;""!==e?(this.$emit("inputClean",!0),this.text=e,this.anyUrlMeta=B["a"].getUrl(this.text),console.log("this.anyUrlMeta",this.anyUrlMeta),void 0!==this.anyUrlMeta?this.$emit("setMetaUrl",this.anyUrlMeta):this.$emit("inputClean",!1),this.chat&&this.core.mtrx.client.sendTyping(this.chat.roomId,!0,100)):this.$emit("inputClean",!1)},menuItemClickHandler:function(t,e){this[t.click](e),console.log(t,"item item")},menuItemLoadedHandler:function(t){return this.menuIsVisible=t,this.menuIsVisible},uploadStart:function(t,e){console.log("uploadStartuploadStartuploadStartuploadStartuploadStartuploadStartuploadStart")},uploadError:function(t,e){this.$store.commit("icon",{icon:"error",message:e.text})},getImg:function(){return this.imgs=!0},uploadSizeError:function(t){t||(this.$refs.dropdownMenu.hidePopup(),console.log("error file size"))},uploadUploaded:function(t,e){var n=this;console.log("ASDASD");var i=["image/gif","image/jpeg","image/png"];i.includes(e.file.type)?(this.$emit("previewImg",e),this.imageWH(e).then((function(t){n.sendImage(e)}))):(this.$emit("anyFileSend",e),this.sendFile(e))},imageWH:function(t){var e=this,n=new Image,i={};return new Promise((function(a,o){n.onload=function(){i.w=this.width,i.h=this.height,a(i)},n.onerror=function(){o()},n.src=t.base64,e.info=i}))},uploadUploadedAll:function(t,e){this.$store.state.loading=!1,this.$refs.dropdownMenu.hidePopup()}}},Q=X;function Z(t){var e=n("1eed");e.__inject__&&e.__inject__(t);var i=n("3901");i.__inject__&&i.__inject__(t);var a=n("66f9");a.__inject__&&a.__inject__(t);var o=n("b510");o.__inject__&&o.__inject__(t)}var tt=Object(y["a"])(Q,A,z,!1,Z,"0ecf8a13",null,!0),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chatJoin"}},[t._m(0),n("chatPreview",{attrs:{usersinfo:t.usersinfo,members:t.joinedMembers,users:t.users}}),t._m(1),n("div",{staticClass:"joinAction fixedOnPageBottom",class:{bin:t.pocketnet,bout:!t.pocketnet}},[n("div",{staticClass:"work"},[n("div",{staticClass:"actions"},[n("div",{staticClass:"action"},[n("button",{staticClass:"small button black rounded",on:{click:t.decline}},[t._v("Decline")])]),n("div",{staticClass:"action"},[n("button",{staticClass:"small button rounded",on:{click:t.join}},[t._v("Join")])])])])])],1)},it=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"work"},[n("div",{staticClass:"caption"},[n("span",[t._v(" You were invited to chat with: ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip"},[n("span",[t._v("You can join in chat or decline invitation")])])}],at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chatPreview"},[n("div",{staticClass:"work"},[n("div",{staticClass:"previewWrapper"},[n("div",{staticClass:"users"},[n("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.members,(function(t){return n("swiper-slide",{key:t["id"]},[n("div",{staticClass:"work"},[n("div",{staticClass:"userinfoWrapper"},[n("userView",{attrs:{userinfo:t}})],1)])])})),n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)])])])},ot=[],rt=n("aa20"),st=n("3094"),ct=n("42cd"),dt=n("7212"),lt=(n("bbe3"),n("0a63")),ut={name:"chatPreview",props:{chat:Object,usersinfo:Array,users:{},members:Array},components:{userView:ct["a"],chatName:rt["a"],chatIcon:st["a"],Swiper:dt["Swiper"],SwiperSlide:dt["SwiperSlide"],Carousel:lt["Carousel"],Slide:lt["Slide"]},data:function(){return{loading:!1,usersinfoLocal:[],swiperOption:{direction:"horizontal",pagination:{el:".swiper-pagination",clickable:!0}}}},computed:Object(c["c"])({auth:function(t){return t.auth}}),mounted:function(){this.setUsersInfo()},methods:{setUsersInfo:function(){var t=this;if(this.chat){var e,n=_.filter(_.map(_.filter((null===(e=this.chat)||void 0===e?void 0:e.currentState.getMembers())||{},(function(e){var n;return t.$f.getmatrixid(e.name)!==(null===(n=t.core.user.userinfo)||void 0===n?void 0:n.id)})),(function(e){return t.$f.deep(t,"$store.state.users."+t.$f.getmatrixid(e.name))||null})),(function(t){return t}));this.usersinfoLocal=n}else this.usersinfoLocal=this.usersinfo}}},ft=ut;function mt(t){var e=n("3eda");e.__inject__&&e.__inject__(t);var i=n("937a");i.__inject__&&i.__inject__(t);var a=n("c9bc");a.__inject__&&a.__inject__(t);var o=n("6c3f");o.__inject__&&o.__inject__(t)}var pt=Object(y["a"])(ft,at,ot,!1,mt,"2eb31a16",null,!0),ht=pt.exports,vt={name:"chatJoin",props:{chat:Object,usersinfo:Array},components:{chatPreview:ht,Swiper:dt["Swiper"],SwiperSlide:dt["SwiperSlide"]},data:function(){return{loading:!1,joinedMembers:[]}},created:function(){},watch:{},computed:Object(c["c"])({auth:function(t){return t.auth},pocketnet:function(t){return t.pocketnet},users:function(){var t=this,e=this.$store.state.users,n=this.chat.currentState.members,i=[],a=[];h["a"].mapObject(n,(function(t,e){i.push({id:B["a"].getmatrixid(e)})})),h["a"].map(e,(function(t){a.push(t)})),this.joinedMembers=B["a"].filterByUserId(i,a);var o=h["a"].filter(h["a"].map(this.chat.currentState.members||[],(function(e){return t.$f.deep(t,"$store.state.users."+e.name)||null})),(function(e){var n;return e&&e.id!==(null===(n=t.core.user.userinfo)||void 0===n?void 0:n.id)}));return o}}),mounted:function(){},methods:{encrypt:function(t){return this.core.mtrx.client.setRoomEncryption(this.chat.roomId,{algorithm:t})},join:function(){var t=this;this.core.mtrx.client.joinRoom(this.chat.roomId).then((function(){t.$emit("joined")}))},decline:function(){this.core.mtrx.client.leave(this.chat.roomId),this.$router.go(-1)},needEncryption:function(){var t=this.core.mtrx.client.isRoomEncrypted(this.chat.roomId);return!t&&2==h["a"].toArray(this.chat.currentState.members).length}}},_t=vt;function gt(t){var e=n("5bb4");e.__inject__&&e.__inject__(t);var i=n("99f3");i.__inject__&&i.__inject__(t);var a=n("734c");a.__inject__&&a.__inject__(t);var o=n("418e");o.__inject__&&o.__inject__(t);var r=n("4a41");r.__inject__&&r.__inject__(t);var s=n("f9ce");s.__inject__&&s.__inject__(t)}var bt=Object(y["a"])(_t,nt,it,!1,gt,"074c8f52",null,!0),xt=bt.exports,wt=n("6603"),yt={name:"chat",props:{chat:Object,u:String},components:{list:T,chatInput:et,join:xt,url:wt["a"]},data:function(){return{roomMuted:!1,loading:!1,usersinfo:[],prevImage:void 0,selectedImg:String,urlpreview:null,filePreview:{type:Object,default:function(){return{show:!1}}},anyFilePreview:{type:Object,default:function(){return{show:!1}}}}},created:function(){},mounted:function(){this.getuserinfo(),this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"chat"})},destroyed:function(){this.$store.commit("blockactive",{value:!1,item:"chat"}),this.$store.commit("SET_CURRENT_ROOM",!1)},watch:{chat:{immediate:!0,handler:function(){this.chat?this.$store.commit("SET_CURRENT_ROOM",this.chat.roomId):this.$store.commit("SET_CURRENT_ROOM",!1)}}},computed:Object(c["c"])({pocketnet:function(t){return t.pocketnet},minimized:function(t){return t.minimized},active:function(t){return t.active},auth:function(t){return t.auth},m_chat:function(){if(this.chat&&this.chat.roomId){var t=this.core.mtrx.client._pushProcessor.getPushRuleById(this.chat.roomId);null!==t&&(this.roomMuted=!0);var e=this.core.mtrx.client.getRoom(this.chat.roomId);return e||{}}},encrypted:function(){return!(!this.chat||!this.chat.roomId)&&this.core.mtrx.client.isRoomEncrypted(this.chat.roomId)},openInviteModal:function(){return this.openInviteModal}}),methods:{hidePreview:function(){this.urlpreview=null},newchat:function(t){this.$emit("newchat",t)},sending:function(){this.$emit("sending")},getuserinfo:function(){var t=this;this.u&&this.core.user.usersInfo(this.u).then((function(e){t.usersinfo=e}))},membership:function(){if(this.m_chat)return this.m_chat.getMyMembership()},closing:function(t){this.PNmetaPreview=t},usersinfoNames:function(){return h["a"].map(this.usersinfo,(function(t){return t.name})).join(", ")},openImgM:function(t){this.selectedImg=t},getFilePreview:function(t){this.filePreview=t},anyFileData:function(t){this.anyFilePreview.name=t.file.name,this.anyFilePreview.size=t.file.size},chatUrlHandler:function(t){this.urlpreview=t},events:function(t){this.$emit("getEvents",t)}}},It=yt;function jt(t){var e=n("6f09");e.__inject__&&e.__inject__(t);var i=n("7b55");i.__inject__&&i.__inject__(t);var a=n("f951");a.__inject__&&a.__inject__(t);var o=n("fb47");o.__inject__&&o.__inject__(t)}var kt=Object(y["a"])(It,r,s,!1,jt,"2636c3cc",null,!0),Mt=kt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chatTopheader"}},[t.chat||t.u?n("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[n("backButton",{attrs:{action:"back"}})]},proxy:!0},{key:"info",fn:function(){return[t.chat?n("router-link",{attrs:{to:"chatInfo?id="+t.chat.roomId}},[t.m_chat?n("div",[n("div",{staticClass:"nameWrapper"},[t.roomInfo?t._e():n("chatName",{attrs:{preview:!0,chat:t.m_chat}}),t.roomMuted?n("div",{staticClass:"roomMuted"},[n("i",{staticClass:"fas fa-bell-slash"})]):t._e()],1),n("transition",{attrs:{name:"fade"}},[t.m_chat_typing?n("chatTyping"):t._e()],1)],1):t._e(),!t.m_chat&&t.userinfo?n("div",[n("span",{staticClass:"nameline"},[t._v(t._s(t.userinfo.name))])]):t._e()]):t._e()]},proxy:!0},{key:"right",fn:function(){return[t.m_chat&&t.m_chat.currentState.getMembers().length>2?n("div",{staticClass:"icon iconbutton"},[t.roomMuted?t._e():n("div",[n("dropdownMenu",{ref:"dropdownMenu",staticClass:"chatRightMenu",attrs:{menuItems:t.menuItemsRoom,rowObject:{},icon:"fas fa-ellipsis-h"},on:{itemClicked:t.menuItemClickHandler}})],1),t.roomMuted?n("div",[n("dropdownMenu",{ref:"dropdownMenu",staticClass:"chatRightMenu",attrs:{menuItems:t.menuItemsRoomMuted,rowObject:{},icon:"fas fa-ellipsis-h"},on:{itemClicked:t.menuItemClickHandler}})],1):t._e()]):n("div",{staticClass:"icon iconbutton"},[t.roomMuted?t._e():n("div",[n("dropdownMenu",{ref:"dropdownMenu",staticClass:"chatOneToOne",attrs:{menuItems:t.oneToOne,rowObject:{},icon:"fas fa-ellipsis-h"},on:{itemClicked:t.menuItemClickHandler}})],1),t.roomMuted?n("div",[n("dropdownMenu",{ref:"dropdownMenu",staticClass:"chatOneToOne",attrs:{menuItems:t.oneToOneMuted,rowObject:{},icon:"fas fa-ellipsis-h"},on:{itemClicked:t.menuItemClickHandler}})],1):t._e()])]},proxy:!0}],null,!1,4136846621)}):t._e(),t.donateUserOpened?n("modal",{on:{close:t.closeDonateModal},scopedSlots:t._u([{key:"header",fn:function(){return[n("span",[t._v("Donate")])]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"donationModalBody"},[n("span",[t._v("Source")]),n("input",{staticClass:"disabled",attrs:{type:"text",value:"Account Address",disabled:!0}}),n("span",[t._v("Amount")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.donationAmount,expression:"donationAmount",modifiers:{number:!0}}],attrs:{type:"number",disabled:t.sending},domProps:{value:t.donationAmount},on:{keyup:function(e){return t.resetDonation()},input:function(e){e.target.composing||(t.donationAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("span",[t._v("Receiver")]),n("input",{staticClass:"disabled",attrs:{type:"text",disabled:!0},domProps:{value:t.receiver?t.receiver.name:""}}),n("span",[t._v("Message")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.donationMessage,expression:"donationMessage"}],attrs:{type:"text",placeholder:"Your message",disabled:t.sending},domProps:{value:t.donationMessage},on:{input:function(e){e.target.composing||(t.donationMessage=e.target.value)}}}),t.showFeesError&&"money"==t.showFeesError?n("span",{staticClass:"error"},[t._v("Balance too low")]):t.showFeesError?n("span",{staticClass:"error"},[t._v("Error, can't calculate the fees")]):t._e(),1!=t.calculatingFees?n("button",{staticClass:"button small",attrs:{disabled:!t.donationAmount||null!=t.calculatedFees},on:{click:t.onCalculateFeesClick}},[n("i",{staticClass:"fas fa-chevron-circle-right"}),t._v(" Calculate Fees ")]):t._e(),1==t.calculatingFees?n("div",{staticClass:"linepreloader"},[n("linepreloader")],1):t._e()]),null!=t.calculatedFees?n("div",{staticClass:"donationModalBody"},[n("span",[t._v("Include Fees in Amount")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.feesDirection,expression:"feesDirection"}],attrs:{disabled:t.sending},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.feesDirection=e.target.multiple?n:n[0]}}},t._l(t.feesDirectionPossibleValues,(function(e){return n("option",{domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0),n("span",[t._v("Transaction Fees")]),n("input",{staticClass:"disabled",attrs:{type:"number",disabled:!0},domProps:{value:t.calculatedFees}}),n("span",[t._v("Total amount")]),n("span",{staticClass:"totalAmount"},[t._v(t._s(+t.totalDonationAmount.toFixed(5))+" PKOIN")]),t.showTransactionError&&"balance too low"==t.showTransactionError?n("span",{staticClass:"error"},[t._v("Balance too low")]):t.showTransactionError?n("span",{staticClass:"error"},[t._v("Error, can't make the transaction")]):t._e(),1!=t.sending?n("button",{staticClass:"button small",attrs:{disabled:t.sending},on:{click:t.sendDonation}},[n("i",{staticClass:"fas fa-arrow-alt-circle-right"}),t._v(" Send ")]):t._e(),1==t.sending?n("div",{staticClass:"linepreloader"},[n("linepreloader")],1):t._e()]):t._e()]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,3274686846)}):t._e()],1)},Ot=[],Pt=n("1da1"),Et=n("a34a"),St=n.n(Et),$t=(n("7db0"),n("a79d"),n("0826")),Rt=n("71da"),Wt={name:"chatTopheader",props:{chat:Object,u:String,roomInfo:!1,aboutUser:!1},components:{chatName:rt["a"],chatIcon:st["a"],chatTyping:$t["a"],contacts:Rt["a"]},data:function(){return{menuItems:[{click:"callupVideoHandler",title:"Video Call",icon:"fas fa-camera"},{click:"callupHandler",title:"Call",icon:"fas fa-phone"}],menuItemsRoom:[{click:"AddMember",title:"Add",icon:"fas fa-user-plus"},{click:"MuteRoom",title:"Mute",icon:"fas fa-bell-slash"},{click:"LeaveFromRoom",title:"Leave and Delete",icon:"fas fa-sign-out-alt"}],menuItemsRoomMuted:[{click:"AddMember",title:"Add",icon:"fas fa-user-plus"},{click:"MuteRoom",title:"UnMute",icon:"fas fa-bell"},{click:"LeaveFromRoom",title:"Leave and Delete",icon:"fas fa-sign-out-alt"}],oneToOne:[{click:"MuteRoom",title:"Mute",icon:"fas fa-bell-slash"},{click:"LeaveFromRoom",title:"Leave and Delete",icon:"fas fa-sign-out-alt"},{click:"Donate",title:"Donate",icon:"fas fa-money-bill-wave"}],oneToOneMuted:[{click:"MuteRoom",title:"UnMute",icon:"fas fa-bell"},{click:"LeaveFromRoom",title:"Leave and Delete",icon:"fas fa-sign-out-alt"},{click:"Donate",title:"Donate",icon:"fas fa-money-bill-wave"}],donateMenu:[{click:"Donate",title:"Donate",icon:"fas fa-money-bill-wave"}],loading:!1,typing:!1,userinfo:null,aboutUserShow:!1,roomBanned:!1,roomMuted:!1,donateUserOpened:!1,receiver:null,donationAmount:0,donationMessage:"",calculatedFees:null,showFeesError:"",showTransactionError:"",calculatingFees:!1,sending:!1,feesDirection:"include",feesDirectionPossibleValues:[{value:"include",label:"To be paid by Receiver"},{value:"exclude",label:"To be paid by Sender"}]}},watch:{},mounted:function(){this.getuserinfo()},computed:Object(c["c"])({auth:function(t){return t.auth},m_chat:function(){if(this.chat&&this.chat.roomId){var t=this.core.mtrx.client._pushProcessor.getPushRuleById(this.chat.roomId);null!==t&&(this.roomMuted=!0,console.log("RoomMUTED","TOPHEADER"));var e=this.core.mtrx.client.getRoom(this.chat.roomId);return console.log(e,"M_CHAT"),e||{}}},m_chat_typing:function(){var t=this;if(!this.chat)return!1;var e=this.chat.roomId,n=this.$store.state.typing[e]||{},i=_.find(n,(function(e,n){var i;if(e)return n!=(null===(i=t.core.user.userinfo)||void 0===i?void 0:i.id)}));return i||!1},totalDonationAmount:function(){return"include"==this.feesDirection?this.donationAmount:this.donationAmount+this.calculatedFees}}),methods:{navigateToProfile:function(t){this.$router.push({path:"/contact?id=".concat(B["a"].getmatrixid(t))})},getuserinfo:function(){var t=this;this.u&&this.core.user.usersInfo(this.u).then((function(e){t.userinfo=e[0]}))},findOtherUser:function(){var t,e=this.m_chat.myUserId,n=this.m_chat.currentState.getMembers();return n.forEach((function(n){n&&n.userId!==e&&(t=n)})),t},addMember:function(){this.modalInviteUser()},menuItemClickHandler:function(t,e){var n=this;if("AddMember"===t.click&&(this.$emit("addMember",!0),this.$refs.dropdownMenu.hidePopup()),"MuteRoom"===t.click){var i=this.chat.roomId,a=(this.core.mtrx.client.deviceId,this),o=this.core.mtrx.client._pushProcessor.getPushRuleById(this.chat.roomId);null!==o?(a.core.mtrx.client.deletePushRule("global","room",i),this.roomMuted=!1):(a.core.mtrx.client.setRoomMutePushRule("global",i,"true"),this.roomMuted=!0),this.$refs.dropdownMenu.hidePopup()}if("LeaveFromRoom"===t.click&&(this.core.mtrx.client.leave(this.chat.roomId).then((function(t){n.core.mtrx.client.forget(n.chat.roomId,!0).then((function(t){return t}))})),this.$router.push({path:"/chats"}),this.$refs.dropdownMenu.hidePopup()),"BanRoom"===t.click){var r="",s=this.findOtherUser();s&&s.userId&&(r=s.userId);var c=this.chat.roomId;this.core.mtrx.client.ban(c,r,"ban").then((function(t){console.log(t,"BANNED")})),this.roomBanned=!0,this.$refs.dropdownMenu.hidePopup()}if("Unban"===t.click){var d="",l=this.findOtherUser();l&&l.userId&&(d=l.userId),this.core.mtrx.client.unban(this.chat.roomId,d).then((function(t){n.core.mtrx.client.invite(n.chat.roomId,d)})),console.log("UNBANNED"),this.roomBanned=!1,this.$refs.dropdownMenu.hidePopup()}if("Donate"===t.click){this.donateUserOpened=!0,this.$refs.dropdownMenu.hidePopup();var u=this.findOtherUser();this.receiver=u?this.$f.deep(this,"$store.state.users."+this.$f.getmatrixid(u.name)):null}},closeDonateModal:function(){this.donateUserOpened=!1},onCalculateFeesClick:function(){var t=this;this.calculatingFees=!0,this.calculateFees().finally((function(){return t.calculatingFees=!1}))},calculateFees:function(){var t=this,e=this;return this.showFeesError="",new Promise((function(n,i){if(console.log("Calculating fees..."),t.donationAmount<=0||!t.receiver||!t.receiver.source||!t.receiver.source.address)return t.showFeesError="invalid",i("Missing amount or receiver");try{var a=window.POCKETNETINSTANCE.platform.sdk;a.node.fee.estimate((function(t){var o=[{address:e.receiver.source.address,amount:e.donationAmount}];a.wallet.txbase([a.address.pnet().address],o,0,e.feesDirection,(function(o,r,s){if(o)return console.error(o),e.showFeesError=o,i(o);var c=a.node.transactions.create.wallet(r,s),d=Math.min(c.virtualSize()*t.feerate,.0999);return e.calculatedFees=d,n()}))}))}catch(o){return console.error(o),e.showFeesError=o,i(o)}}))},sendDonation:function(){var t=this;return Object(Pt["a"])(St.a.mark((function e(){var n,i;return St.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,t.sending=!0,t.showTransactionError="",e.prev=3,e.next=6,t.calculateFees();case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](3),t.showTransactionError="error",t.sending=!1,e.abrupt("return");case 13:i=window.POCKETNETINSTANCE.platform.sdk,i.node.transactions.get.canSpend(i.address.pnet().address,(function(t){if(!t||isNaN(t)||t<n.totalDonationAmount)return n.showTransactionError="balance too low",void(n.sending=!1);try{var e=[{address:n.receiver.source.address,amount:n.donationAmount}];i.wallet.embed(e,n.donationMessage),i.wallet.txbase([i.address.pnet().address],e,n.calculatedFees,n.feesDirection,(function(t,e,a){if(t)return console.error(t),n.showTransactionError="error",n.sending=!1,reject(t);var o=i.node.transactions.create.wallet(e,a);e.forEach((function(t){t.cantspend=!0})),i.node.transactions.send(o,(function(t,o){if(o)return i.node.transactions.releaseCS(e),n.showTransactionError="error",void(n.sending=!1);var r=e.map((function(t){return t.txid}));i.node.transactions.clearUnspents(r),i.wallet.saveTempInfoWallet(t,e,a),n.core.mtrx.client.sendEvent(n.chat.roomId,"m.room.message",{from:n.$f.getmatrixid(n.m_chat.myUserId),to:n.receiver.id,amount:n.donationAmount,txId:t,msgtype:"m.notice"},""),n.closeDonateModal()}))}))}catch(a){console.error(a),n.showTransactionError="error",n.sending=!1}}));case 15:case"end":return e.stop()}}),e,null,[[3,8]])})))()},resetDonation:function(){this.calculatedFees=null,this.showFeesError="",this.showTransactionError=""}}},Ft=Wt;function Tt(t){var e=n("fd6b");e.__inject__&&e.__inject__(t);var i=n("720d");i.__inject__&&i.__inject__(t);var a=n("2646");a.__inject__&&a.__inject__(t);var o=n("28a4");o.__inject__&&o.__inject__(t)}var At=Object(y["a"])(Ft,Ct,Ot,!1,Tt,"373e6a3c",null,!0),zt=At.exports,Bt={name:"pagechat",components:{chat:Mt,topheader:zt,contacts:Rt["a"]},data:function(){return{roomInfo:!1,m_chat:{},events:[],openInviteModal:!1}},computed:Object(o["a"])({u:function(){return this.$route.query.u},chat:function(){var t=this.$route.query.id;return this.$store.state.chatsMap[t]}},Object(c["c"])({pocketnet:function(t){return t.pocketnet},minimized:function(t){return t.minimized}})),mounted:function(){},methods:{closeModal:function(){this.openInviteModal=!1},closeContactModal:function(t){this.openInviteModal=t},addMemberModal:function(t){this.openInviteModal=t},newchat:function(t){},sending:function(){console.log("SENDING")},eventsRoom:function(t){this.events=t}}},Ut=Bt;function Dt(t){var e=n("826c");e.__inject__&&e.__inject__(t)}var Lt=Object(y["a"])(Ut,i,a,!1,Dt,"4e29656b",null,!0);e["default"]=Lt.exports},f465:function(t,e,n){"use strict";n.r(e);var i=n("8747");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},f951:function(t,e,n){"use strict";n.r(e);var i=n("86f7");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},f9ce:function(t,e,n){"use strict";n.r(e);var i=n("9bf4");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},fb47:function(t,e,n){"use strict";n.r(e);var i=n("8b1e");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},fc74:function(t,e,n){var i=n("82e9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("35d6").default;t.exports.__inject__=function(t){a("0f0b4fa0",i,t)}},fd56:function(t,e,n){"use strict";n.r(e);var i=n("37e7");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},fd6b:function(t,e,n){"use strict";n.r(e);var i=n("142f");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a)},fe3a:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e}}]);
//# sourceMappingURL=matrix-element.4.min.js.map