(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[10,24],{"029c":function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,".recordProgress[data-v-1b8e1dc4]{display:flex;height:20px;justify-content:flex-start;padding:0 1em;align-items:center;max-width:80%;flex-grow:2}.recordProgress .indicatorWrapper[data-v-1b8e1dc4]{min-width:20px;width:20px;margin-right:1em;display:flex;justify-content:center;align-items:center}.recordProgress .indicator[data-v-1b8e1dc4]{height:6px;width:6px;background:#ff033e;border-radius:50%}.recordProgress .indicator.recording[data-v-1b8e1dc4]{animation:pulse-1b8e1dc4 1.2s ease infinite}.recordProgress .del[data-v-1b8e1dc4]{min-width:20px;cursor:pointer;display:flex;justify-content:center;align-items:center;width:20px;height:20px;margin-right:1em}.recordProgress .del i[data-v-1b8e1dc4]{color:red;font-size:13px}.recordProgress .timer[data-v-1b8e1dc4]{margin-right:1em}.recordProgress .graph[data-v-1b8e1dc4]{margin:0 auto;width:100px;overflow:hidden;border-radius:15px}.cancel[data-v-1b8e1dc4],.recordProgress .graph[data-v-1b8e1dc4]{display:flex;justify-content:center}.cancel[data-v-1b8e1dc4]{position:absolute;left:0;right:0;top:0;bottom:0;background:rgb(var(--background-secondary-theme));opacity:0;text-align:center;align-items:center}.cancel span[data-v-1b8e1dc4]{white-space:nowrap;font-size:.9em}@keyframes pulse-1b8e1dc4{0%{opacity:1}50%{opacity:.1}to{opacity:1}}",""]),e.exports=t},"14b6":function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,"#chatInput[data-v-020896a0]{padding-bottom:.5em}[data-v-020896a0] #modal.minimized .modal-wrapper{left:0}[data-v-020896a0] .previewWrapper{padding-left:.5em!important;padding-right:.5em!important}.inputWrapper[data-v-020896a0]{display:flex;position:relative}.inputWrapper .left[data-v-020896a0]{width:44px;display:flex;justify-content:flex-end;align-items:center;text-align:center}.inputWrapper .left.donation+.center[data-v-020896a0]{margin:0 0 0 .25em}.inputWrapper .left .iconbutton[data-v-020896a0]{display:flex;align-items:center;justify-content:center;height:44px;width:44px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.inputWrapper .left .iconbutton.donate[data-v-020896a0]{border:1px solid rgba(var(--neutral-grad-0),.9);border-radius:12px}.inputWrapper .left .icon.donate[data-v-020896a0]{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNy4yNTggMS45NzlMMTUuMTgyIDBsLTIuNDU3IDIuNTc5YTcuODUgNy44NSAwIDAwLTQuMDk2LTEuMTQ1Yy0xLjMwMiAwLTIuNTMuMzE1LTMuNjEyLjg3NEwyLjgxNyAwIC43NDIgMS45OCAyLjc0IDQuMDc1QTcuODU4IDcuODU4IDAgMDAuNzQxIDkuMzIxYzAgMS44NTQuNjQgMy41NTkgMS43MSA0LjkwNWwtMS43MSAxLjc5NUwyLjgxOCAxOGwxLjc5OC0xLjg4N2E3Ljg1MiA3Ljg1MiAwIDAwNC4wMTMgMS4wOTYgNy44NSA3Ljg1IDAgMDA0LjQ3NC0xLjM5TDE1LjE4MiAxOGwyLjA3Ni0xLjk3OS0yLjEyNy0yLjIzM2E3Ljg1IDcuODUgMCAwMDEuMzg2LTQuNDY3YzAtMS44Mi0uNjE3LTMuNDk2LTEuNjUyLTQuODNsMi4zOTMtMi41MTJ6TTMuNTU1IDkuMzJhNS4wNzQgNS4wNzQgMCAxMDEwLjE0OCAwIDUuMDc0IDUuMDc0IDAgMDAtMTAuMTQ4IDB6IiBmaWxsPSIjMDBBNEZGIi8+PC9zdmc+) no-repeat 50% 50%;background-size:contain;flex:1;font-size:1em;text-indent:-9999px;overflow:hidden}.inputWrapper .extended[data-v-020896a0]{width:88px}.inputWrapper .leftdummy[data-v-020896a0]{width:.5em}.inputWrapper>div[data-v-020896a0]{transition:.3s}.inputWrapper .center[data-v-020896a0]{max-height:110px;max-width:100%;display:flex;justify-content:space-between;align-items:center;flex-grow:1;border:1px solid transparent;border-radius:30px;background:rgb(var(--background-main))}.inputWrapper .embedded[data-v-020896a0]{border-top-right-radius:0!important;border-top-left-radius:0!important}.inputWrapper input[data-v-020896a0]{border:1px solid rgb(var(--neutral-grad-0));background:rgba(var(--background-main),.5);border-radius:30px;width:100%;padding:.5em 1em}.notready[data-v-020896a0],.waitjoined[data-v-020896a0]{padding:.5em 0;text-align:center}.waitjoined span[data-v-020896a0]{font-size:.8em}.greetings[data-v-020896a0]{padding:.5em 0}.greetings[data-v-020896a0],[data-v-020896a0] .iconWrapper{text-align:center}.menu-item[data-v-020896a0]{padding:.5em;background:rgb(var(--background-total-theme));line-height:44px;border-radius:5px;display:flex}.menu-item .title[data-v-020896a0]{flex-grow:2;padding-right:44px;text-align:center}.menu-item .iconWrapper[data-v-020896a0]{width:44px}.tipusers[data-v-020896a0]{position:absolute;max-height:300px;border-radius:.5em;border:1px solid rgba(var(--neutral-grad-0),.9);overflow-y:overlay;background-color:rgba(var(--background-total-theme),.95);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);padding:.25em 0;bottom:100%;margin-bottom:.5em;left:.25em;right:.25em}.tipusers .previewWrapperExt[data-v-020896a0]{border-radius:.75em;margin-left:.25em;margin-right:.25em;padding-top:.25em;padding-bottom:.25em}.tipusers .previewWrapperExt[data-v-020896a0] .previewWrapper{padding-left:.25em!important;padding-right:.25em!important}.tipusers .previewWrapperExt.selected[data-v-020896a0]{background:rgb(var(--background-main))}.disabled[data-v-020896a0]{display:flex;justify-content:center;align-items:center;width:44px;height:44px;color:rgb(var(--neutral-grad-3))}.disabled i[data-v-020896a0]{padding-top:1px}@media only screen and (max-width:768px){.inputWrapper .left[data-v-020896a0]{width:55px}.inputWrapper .left .iconbutton[data-v-020896a0]{height:55px;width:55px}.inputWrapper .extended[data-v-020896a0]{width:110px}.disabled[data-v-020896a0]{width:55px;height:55px}}",""]),e.exports=t},"198d":function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,'.recordButton_wrapper[data-v-9b3e0438]{position:relative}.recordButton_holder[data-v-9b3e0438]{visibility:hidden;position:absolute;display:flex;justify-content:center;align-items:center;height:16px;width:16px;background:#789;border-radius:50%;bottom:98px;transition:.1s;right:9px}.recordButton_holder .icon[data-v-9b3e0438]{color:#fff;font-size:7px}.recordButton_holder.active[data-v-9b3e0438]{visibility:visible}.recordButton_holder.hold[data-v-9b3e0438]{background:#789;visibility:visible;bottom:38px}.recordButton_holder.hold .icon[data-v-9b3e0438]{color:#fff}.recordButton_main[data-v-9b3e0438]{padding-top:1px;touch-action:none;display:flex;align-items:center;justify-content:center;width:44px;height:44px;line-height:44px!important;background:transparent;border-radius:50%;outline:none;position:relative}.recordButton_main.active[data-v-9b3e0438]{background:rgb(var(--color-bg-ac));animation:pulse-9b3e0438 1.2s infinite}.recordButton_main.active .icon[data-v-9b3e0438]{color:rgb(var(--text-on-bg-shadow-color))}.recordButton_main.active[data-v-9b3e0438]:before{position:absolute;left:-30px;bottom:-30px;right:-30px;top:-30px;content:"";border-radius:50%;border:44px solid rgba(var(--color-bg-ac),.5);animation:pulse-9b3e0438 1.2s infinite}.recordButton_main.disabled .icon[data-v-9b3e0438]{color:rgb(var(--neutral-grad-2))}.recordButton_main.outside[data-v-9b3e0438],.recordButton_stop[data-v-9b3e0438]{background:rgb(var(--color-bad))}.recordButton_stop[data-v-9b3e0438]{color:rgb(var(--text-on-bg-shadow-color));font-size:.7em}@keyframes pulse-9b3e0438{0%{opacity:1}50%{opacity:.8}to{opacity:1}}@media only screen and (max-width:768px){.recordButton_main[data-v-9b3e0438]{width:55px;height:55px;line-height:55px!important}.recordButton_main.active[data-v-9b3e0438]:before{border:55px solid rgba(var(--color-bg-ac),.5)}}',""]),e.exports=t},"1d3a":function(e,t,i){"use strict";i.r(t);var r=i("ed8f");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},"23f1":function(e,t,i){"use strict";i.r(t);var r=i("6400");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},3351:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,".mod-wrapper[data-v-75ceafe2]{position:absolute;top:0;left:0;justify-content:center;height:100%}.mod-wrapper[data-v-75ceafe2],.modal-window[data-v-75ceafe2]{display:flex;align-items:center;width:100%}.modal-window[data-v-75ceafe2]{border:1px solid rgb(var(--background-main));flex-direction:column;background-color:rgb(var(--background-total-theme));padding:1em;max-width:300px;margin:0 auto;border-radius:5px}.modal-window .btn[data-v-75ceafe2]{width:85%;padding:10px 5px;margin-top:25px;background-color:rgb(var(--color-bg-ac));border-radius:5px;color:#fff;cursor:pointer}",""]),e.exports=t},"336e":function(e,t,i){"use strict";i.r(t);var r=i("e97f");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},"5a5d":function(e,t,i){var r=i("198d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("5a34e34d",r,e)}},"60ab":function(e,t,i){var r=i("645e");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("699d78c6",r,e)}},6400:function(e,t,i){var r=i("029c");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("261abfa4",r,e)}},"645e":function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,".input_component[data-v-4c4d0864]{width:100%;display:flex;justify-content:center;align-items:center;padding:0 1em;padding-right:.5em}.input_component[data-v-4c4d0864] .emoji-mart .emoji-mart-emoji{width:12.5%;height:40px;cursor:pointer}.input_component[data-v-4c4d0864] .emoji-mart .emoji-mart-emoji span{cursor:pointer}.input_component[data-v-4c4d0864] .emoji-mart .emoji-mart-emoji:hover{background:none;box-shadow:none}.input_component[data-v-4c4d0864] .emoji-mart .emoji-mart-emoji:hover:before{display:none}.input_component .input-wrapper[data-v-4c4d0864]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;width:100%}.input_component .right[data-v-4c4d0864]{margin:0 .5em}.input_component .iconbutton[data-v-4c4d0864]{position:relative;padding:0}.input_component .iconbutton .sending-spinner-wrapper[data-v-4c4d0864]{cursor:progress;position:absolute;background-color:rgba(var(--background-main),.7);inset:0;display:flex;justify-content:center;align-items:center}.input_component .iconbutton .leftdummy[data-v-4c4d0864],.input_component .iconbutton .rightdummy[data-v-4c4d0864]{width:44px}.input_component .iconbutton .idummy[data-v-4c4d0864]{width:100%;height:44px;line-height:44px}.input_component .iconbutton .idummy i[data-v-4c4d0864]{line-height:44px!important}.input_component .previews[data-v-4c4d0864]{width:100%;max-width:198px;height:30px;display:flex;align-items:flex-start;padding:2px 0;overflow:hidden}.input_component .previews[data-v-4c4d0864]:first-child{margin-left:0}.input_component .textarea[data-v-4c4d0864]{width:100%;display:flex;justify-content:flex-start;align-items:center}.chat-input[data-v-4c4d0864]{background:transparent;border:0;width:100%;max-height:100px;overflow-y:auto;resize:none;line-height:inherit}.chat-input[data-v-4c4d0864]::-webkit-scrollbar{width:0!important}.fade-enter-active[data-v-4c4d0864],.fade-leave-active[data-v-4c4d0864]{transition:all .2s ease-in}.fade-enter[data-v-4c4d0864],.fade-leave-to[data-v-4c4d0864]{opacity:0}@media only screen and (max-width:768px){.input_component .iconbutton .leftdummy[data-v-4c4d0864],.input_component .iconbutton .rightdummy[data-v-4c4d0864]{width:55px}.input_component .iconbutton .idummy[data-v-4c4d0864]{height:55px;line-height:55px}.input_component .iconbutton .idummy i[data-v-4c4d0864]{line-height:55px!important}}",""]),e.exports=t},"65f4":function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,".embedded-message[data-v-806e920c]{font-size:.8em;padding:0 1em;padding-top:4px;display:flex;align-items:center;border-top-right-radius:30px;border-top-left-radius:30px;background:rgb(var(--background-main))}.embedded-message .left-icon[data-v-806e920c]{display:flex;justify-content:center;align-items:center;height:35px;width:35px;min-width:35px;border-radius:17.5px;background:rgb(var(--color-bg-ac-bright));color:rgb(var(--text-on-bg-shadow-color))}.embedded-message .left-icon i[data-v-806e920c]{font-size:.8em}.embedded-message .message-wrapper[data-v-806e920c]{min-width:0;padding:3px 3px 3px 6px;width:100%}.embedded-message .embedded-cancel[data-v-806e920c],.embedded-message .message-wrapper .message-title[data-v-806e920c]{color:rgb(var(--color-bg-ac-bright))}.embedded-message .embedded-cancel[data-v-806e920c]{cursor:pointer;display:flex;align-content:center;justify-content:center}.embedded-message .embedded-cancel i[data-v-806e920c]{font-size:1.2em;color:rgb(var(--color-bad))}",""]),e.exports=t},"660a":function(e,t,i){"use strict";i.r(t);var r=i("b480");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},7539:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,"@keyframes rotation-325e59df{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.spinner[data-v-325e59df]{min-width:22px;max-width:22px;height:22px;border:2px solid rgb(var(--color-bg-ac-bright));border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation-325e59df 1s linear infinite}",""]),e.exports=t},"7dc7":function(e,t,i){"use strict";i.r(t);var r=i("f97f");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},"8caf":function(e,t,i){var r=i("7539");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("7f34fde4",r,e)}},a19c:function(e,t,i){"use strict";i.r(t);var r=i("8caf");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},aa9a:function(e,t,i){"use strict";i.r(t);var r=i("60ab");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},b480:function(e,t,i){var r=i("65f4");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("37f06b4b",r,e)}},bcf2:function(e,t,i){var r=i("14b6");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("394baefd",r,e)}},d0b7:function(e,t,i){"use strict";i.r(t);var r=i("bcf2");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},d8f3:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,".wrapper[data-v-67c83356]{position:relative}.fas[data-v-67c83356]{position:absolute;right:-8px;top:-8px}.preview-picture[data-v-67c83356]{width:50px;height:50px;border-radius:10px}",""]),e.exports=t},dcee:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,'.emoji-mart,.emoji-mart *{box-sizing:border-box;line-height:1.15}.emoji-mart{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,sans-serif;font-size:16px;display:flex;flex-direction:column;height:420px;color:#222427;border:1px solid #d9d9d9;border-radius:5px;background:#fff}.emoji-mart-emoji{padding:6px;border:none;background:none;box-shadow:none}.emoji-mart-emoji span{display:inline-block}.emoji-mart-preview-emoji .emoji-mart-emoji span{width:38px;height:38px;font-size:32px}.emoji-type-native{font-family:Segoe UI Emoji,Segoe UI Symbol,Segoe UI,Apple Color Emoji,Twemoji Mozilla,Noto Color Emoji,EmojiOne Color,Android Emoji;word-break:keep-all}.emoji-type-image{background-size:5700%}.emoji-type-image.emoji-set-apple{background-image:url(https://unpkg.com/emoji-datasource-apple@6.0.1/img/apple/sheets-256/64.png)}.emoji-type-image.emoji-set-facebook{background-image:url(https://unpkg.com/emoji-datasource-facebook@6.0.1/img/facebook/sheets-256/64.png)}.emoji-type-image.emoji-set-google{background-image:url(https://unpkg.com/emoji-datasource-google@6.0.1/img/google/sheets-256/64.png)}.emoji-type-image.emoji-set-twitter{background-image:url(https://unpkg.com/emoji-datasource-twitter@6.0.1/img/twitter/sheets-256/64.png)}.emoji-mart-bar{border:0 solid #d9d9d9}.emoji-mart-bar:first-child{border-bottom-width:1px;border-top-left-radius:5px;border-top-right-radius:5px}.emoji-mart-bar:last-child{border-top-width:1px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.emoji-mart-scroll{position:relative;overflow-y:scroll;flex:1;padding:0 6px 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-anchors{display:flex;flex-direction:row;justify-content:space-between;padding:0 6px;color:#858585;line-height:0}.emoji-mart-anchor{position:relative;display:block;flex:1 1 auto;text-align:center;padding:12px 4px;overflow:hidden;transition:color .1s ease-out;border:none;background:none;box-shadow:none}.emoji-mart-anchor-selected,.emoji-mart-anchor:hover{color:#464646}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0}.emoji-mart-anchor-bar{position:absolute;bottom:-3px;left:0;width:100%;height:3px;background-color:#464646}.emoji-mart-anchors i{display:inline-block;width:100%;max-width:22px}.emoji-mart-anchors svg{fill:currentColor;max-height:18px}.emoji-mart .scroller{height:250px;position:relative;flex:1;padding:0 6px 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-search{margin-top:6px;padding:0 6px}.emoji-mart-search input{font-size:16px;display:block;width:100%;padding:.2em .6em;border-radius:25px;border:1px solid #d9d9d9;outline:0}.emoji-mart-search-results{height:250px;overflow-y:scroll}.emoji-mart-category{position:relative}.emoji-mart-category .emoji-mart-emoji span{z-index:1;position:relative;text-align:center;cursor:default}.emoji-mart-category .emoji-mart-emoji:hover:before,.emoji-mart-emoji-selected:before{z-index:0;content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;border-radius:100%;opacity:0;opacity:1}.emoji-mart-category-label{position:sticky;top:0}.emoji-mart-static .emoji-mart-category-label{z-index:2;position:relative}.emoji-mart-category-label h3{display:block;font-size:16px;width:100%;font-weight:500;padding:5px 6px;background-color:#fff;background-color:hsla(0,0%,100%,.95)}.emoji-mart-emoji{position:relative;display:inline-block;font-size:0}.emoji-mart-no-results{font-size:14px;text-align:center;padding-top:70px;color:#858585}.emoji-mart-no-results .emoji-mart-category-label{display:none}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:.2em}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none}.emoji-mart-preview{position:relative;height:70px}.emoji-mart-preview-data,.emoji-mart-preview-emoji,.emoji-mart-preview-skins{position:absolute;top:50%;transform:translateY(-50%)}.emoji-mart-preview-emoji{left:12px}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all}.emoji-mart-preview-skins{right:30px;text-align:right}.emoji-mart-preview-name{font-size:14px}.emoji-mart-preview-shortname{font-size:12px;color:#888}.emoji-mart-preview-emoticon+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-shortname{margin-left:.5em}.emoji-mart-preview-emoticon{font-size:11px;color:#bbb}.emoji-mart-title span{display:inline-block;vertical-align:middle}.emoji-mart-title .emoji-mart-emoji{padding:0}.emoji-mart-title-label{color:#999a9c;font-size:21px;font-weight:300}.emoji-mart-skin-swatches{font-size:0;padding:2px 0;border:1px solid #d9d9d9;border-radius:12px;background-color:#fff}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch{width:16px;padding:0 2px}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after{opacity:.75}.emoji-mart-skin-swatch{display:inline-block;width:0;vertical-align:middle;transition-property:width,padding;transition-duration:.125s;transition-timing-function:ease-out}.emoji-mart-skin-swatch:first-child{transition-delay:0s}.emoji-mart-skin-swatch:nth-child(2){transition-delay:.03s}.emoji-mart-skin-swatch:nth-child(3){transition-delay:.06s}.emoji-mart-skin-swatch:nth-child(4){transition-delay:.09s}.emoji-mart-skin-swatch:nth-child(5){transition-delay:.12s}.emoji-mart-skin-swatch:nth-child(6){transition-delay:.15s}.emoji-mart-skin-swatch-selected{position:relative;width:16px;padding:0 2px}.emoji-mart-skin-swatch-selected:after{content:"";position:absolute;top:50%;left:50%;width:4px;height:4px;margin:-2px 0 0 -2px;background-color:#fff;border-radius:100%;pointer-events:none;opacity:0;transition:opacity .2s ease-out}.emoji-mart-skin{display:inline-block;width:100%;padding-top:100%;max-width:12px;border-radius:100%}.emoji-mart-skin-tone-1{background-color:#ffc93a}.emoji-mart-skin-tone-2{background-color:#fadcbc}.emoji-mart-skin-tone-3{background-color:#e0bb95}.emoji-mart-skin-tone-4{background-color:#bf8f68}.emoji-mart-skin-tone-5{background-color:#9b643d}.emoji-mart-skin-tone-6{background-color:#594539}.emoji-mart .vue-recycle-scroller{position:relative}.emoji-mart .vue-recycle-scroller.direction-vertical:not(.page-mode){overflow-y:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal:not(.page-mode){overflow-x:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal{display:flex}.emoji-mart .vue-recycle-scroller__slot{flex:auto 0 0}.emoji-mart .vue-recycle-scroller__item-wrapper{flex:1;box-sizing:border-box;overflow:hidden;position:relative}.emoji-mart .vue-recycle-scroller.ready .vue-recycle-scroller__item-view{position:absolute;top:0;left:0;will-change:transform}.emoji-mart .vue-recycle-scroller.direction-vertical .vue-recycle-scroller__item-wrapper{width:100%}.emoji-mart .vue-recycle-scroller.direction-horizontal .vue-recycle-scroller__item-wrapper{height:100%}.emoji-mart .vue-recycle-scroller.ready.direction-vertical .vue-recycle-scroller__item-view{width:100%}.emoji-mart .vue-recycle-scroller.ready.direction-horizontal .vue-recycle-scroller__item-view{height:100%}.emoji-mart .resize-observer[data-v-b329ee4c]{border:none;background-color:transparent;opacity:0}.emoji-mart .resize-observer[data-v-b329ee4c],.emoji-mart .resize-observer[data-v-b329ee4c] object{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;pointer-events:none;display:block;overflow:hidden}.emoji-mart-search .hidden{display:none;visibility:hidden}',""]),e.exports=t},dfec:function(e,t,i){var r=i("d8f3");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("38cd8b2e",r,e)}},e97f:function(e,t,i){var r=i("3351");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("06314e32",r,e)}},ed8f:function(e,t,i){var r=i("ff0c");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("ccbffd28",r,e)}},f065:function(e,t,i){"use strict";i.r(t);var r=i("5a5d");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},f3fe:function(e,t,i){"use strict";i.r(t);var r=i("dfec");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a)},f978:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"contactList",class:{minimized:e.minimized}},[t("RecycleScroller",{staticClass:"scroller",attrs:{"page-mode":"",items:e.users,"item-size":60,"key-field":"id"},scopedSlots:e._u([{key:"default",fn:function({item:i}){return[t("div",{staticClass:"previewWrapper minimizeex"},["Contacts"===e.mode||"Select"===e.mode?t("div",{staticClass:"previewContact",on:{click:function(t){return e.navigateToProfile(i.id,i)}}},[t("preview",{attrs:{contact:i,mode:e.mode}})],1):e._e(),"Selectmany"===e.mode?t("div",{staticClass:"previewBox",on:{click:function(t){return e.toggleUser(i)}}},[t("div",{staticClass:"previewContactSelect"},[t("preview",{attrs:{mode:e.mode,contact:i}})],1),t("div",{staticClass:"checkBox"},[e.selected[i.id]?t("i",{staticClass:"far fa-check-circle"}):e._e(),e.selected[i.id]?e._e():t("i",{staticClass:"far fa-circle"})])]):e._e()])]}}])})],1)},a=[],o=(i("14d9"),i("2f62")),s=i("92a6"),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mod-wrapper"},[t("div",{staticClass:"modal-window"},[t("span",{staticClass:"message"},[e._v(e._s(e.message))]),t("button",{staticClass:"btn",on:{click:e.close}},[e._v("OK")])])])},d=[],c={name:"ModalWindow",props:["message"],methods:{close(){this.$emit("Close")}}},l=c,h=i("2877");function p(e){var t=i("336e");t.__inject__&&t.__inject__(e)}var u=Object(h["a"])(l,n,d,!1,p,"75ceafe2",null,!0),m=u.exports,f={name:"contactsList",data:function(){return{loading:!1}},components:{preview:s["a"],ModalWindow:m},props:{mode:{default:"",type:String},users:Array,selected:Object,title:String},watch:{},computed:Object(o["d"])({auth:e=>e.auth,minimized:e=>e.minimized,...Object(o["b"])(["PREPARE_USERDATA"]),...Object(o["d"])(["contactsMap","signedUpUsers"])}),methods:{select(e){this.$emit("select",e)},navigateToProfile(e,t){"Select"==this.mode?this.select(t):this.$router.push({path:"/contact?id="+e}).catch(e=>{})},toggleUser(e){this.$emit("toggleUser",e.id)}},mounted(){}},g=f;function v(e){var t=i("1d3a");t.__inject__&&t.__inject__(e)}var b=Object(h["a"])(g,r,a,!1,v,"24811d8d",null,!0);t["default"]=b.exports},f97f:function(e,t,i){var r=i("dcee");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("35d6").default;e.exports.__inject__=function(e){a("8d92a6a0",r,e)}},fe01:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"noswipepnt",attrs:{id:"chatInput"}},[e.ready?t("div",{staticClass:"work"},[e.isShareMessagePresent?t("embeddedMessage",{attrs:{messageTittle:e.embeddedShareMessageTitle,messageText:e.embeddedShareMessageText},on:{"embedded-cancel":e.cancelShare}}):e._e(),e.chat?t("div",{staticClass:"inputWrapper",class:{donate:e.donate}},[e.tipusers.length?t("div",{staticClass:"tipusers"},e._l(e.tipusers,(function(i,r){return t("div",{key:i.id,staticClass:"previewWrapperExt",class:{selected:e.tipuserindex==r},on:{click:function(t){return e.insertuser(i)}}},[t("preview",{attrs:{contact:i,mode:""}})],1)})),0):e._e(),t("div",{staticClass:"center",class:{embedded:e.hasEmbedded}},[e.voiceEnable&&(e.isRecording||e.record)?t("record-progress",{attrs:{recordTime:e.recordTime,isRecording:e.isRecording,rmsData:e.recordRmsData,opacity:e.cancelOpacity},on:{onClear:e.clear}}):t("InputField",{ref:"newinput",attrs:{sending:e.isSending,"can-send":e.isShareMessagePresent,donate:e.donate,storagekey:"chatinput"+e.chat.roomId,tipusers:e.tipusers,me:e.me},on:{chatMessage:e.sendinput,emptyInput:e.emitInputData,FilledInput:e.HideUploadPic,base64:e.pasteImage,focused:e.focused,tipsearchrequest:e.tipBySearch,browsetip:e.browsetip,selectcurrenttip:e.selectcurrenttip,donateaction:e.sendtransactionWrapper}}),!e.streamMode&&e.upload&&e.chat&&!e.hasEmbedded?t("div",{staticClass:"left",class:{extended:e.voiceEnable}},[e.isRecording||e.record?e._e():t("div",{staticClass:"iconbutton",on:{click:e.showinputmenu}},[t("i",{staticClass:"icon fas fa-plus"})]),e.voiceEnable?[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isRecording||!e.record,expression:"isRecording || !record"}],staticClass:"iconbutton"},[t("recordVoice",{attrs:{prepareRecording:!!e.prepareRecording,isRecording:e.isRecording,disabled:e.microphoneDisabled},on:{onRecordingStart:e.initRecording,onRecordingStop:e.stopRecording,onClear:e.clear,canceling:e.setOpacity}})],1)]:e._e(),!e.isRecording&&e.record?t("div",{staticClass:"iconbutton",on:{click:t=>{e.sendVoiceMessage()}}},[e._m(0)]):e._e()],2):e._e()],1),e.donate?t("div",{staticClass:"bottom"},[t("div",{staticClass:"donate-sum"},[t("i",{staticClass:"fas fa-plus-circle"}),t("span",{staticClass:"sum"},[e._v(e._s(e.donate.value))])]),t("i",{staticClass:"icon remove fa fa-times",on:{click:e.removetransaction}})]):e._e()]):e._e()],1):t("div",{staticClass:"notready"},[t("linepreloader")],1)])},a=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("i",{staticClass:"icon fas fa-paper-plane"})])}],o=i("1da1"),s=(i("33d1"),i("14d9"),i("13d5"),i("2c66"),i("249d"),i("40e9"),i("1e70"),i("79a4"),i("c1a1"),i("8b00"),i("a4e7"),i("1e5a"),i("72c3"),i("ea98"),i("907a"),i("986a"),i("1d02"),i("3c5d"),i("6ce5"),i("2834"),i("4ea1"),i("3139")),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"input_component"},[t("div",{staticClass:"input-wrapper"},[t("div",{staticClass:"textarea"},[t("textarea",{ref:"textarea",staticClass:"chat-input",attrs:{id:"textInput",type:"text",row:"1",spellcheck:"true",autocorrect:"on",placeholder:e.$t("caption.sendmessage")},domProps:{value:e.text},on:{focus:e.focused,blur:e.blured,keydown:e.keydown,input:e.textchange,keyup:e.keyup,click:e.keyup,paste:e.paste_image}}),e.streamMode||e.mobile||!e.emojiIndex?e._e():t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("picker",{directives:[{name:"show",rawName:"v-show",value:e.display_emoji,expression:"display_emoji"},{name:"click-outside",rawName:"v-click-outside",value:e.close_emoji_picker,expression:"close_emoji_picker"}],style:{width:"auto",position:"absolute",bottom:"48px",right:"0px",left:"0px",fontSize:"0.8em",fontFamily:"Segoe UI"},attrs:{data:e.emojiIndex,exclude:e.exclude,showPreview:!1,showSearch:!1},on:{select:e.insert_emoji}})],1)],1)]),e.mobile?e._e():t("div",{staticClass:"iconbutton emojipicker",on:{click:function(t){return e.toggle_emoji_picker()}}},[t("div",{staticClass:"leftdummy"},[t("div",{staticClass:"idummy"},[e.display_emoji?t("i",{staticClass:"fas fa-times"}):t("i",{staticClass:"far fa-smile"})])])]),!e.streamMode||e.me||e.pkoindisabled?e._e():t("div",{staticClass:"iconbutton",attrs:{disabled:e.donate},on:{click:e.donateAction}},[e._m(0)]),e._canSend||e.sending?t("button",{staticClass:"iconbutton",attrs:{disabled:e.sending},on:{click:function(t){return e.send_text(t)}}},[e.sending?t("div",{staticClass:"sending-spinner-wrapper"},[t("spinner")],1):e._e(),e._m(1)]):e._e()])},d=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"rightdummy"},[t("div",{staticClass:"idummy"},[t("i",{staticClass:"icon donate"},[e._v("Donate")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"rightdummy"},[t("div",{staticClass:"idummy"},[t("i",{staticClass:"far fa-paper-plane"})])])}],c=i("5059"),l=i("41fb"),h=i("c28b"),p=i.n(h),u=function(){var e=this,t=e._self._c;return e.is_opened?t("div",{staticClass:"wrapper"},[t("img",{staticClass:"preview-picture",attrs:{src:e.base64,alt:"picture preview"}}),t("i",{staticClass:"fas fa-times fa-sm",on:{click:e.hide}})]):e._e()},m=[],f={name:"picturePreview",props:["base64"],data(){return{is_opened:!0}},methods:{hide(){this.is_opened=!1}}},g=f,v=i("2877");function b(e){var t=i("f3fe");t.__inject__&&t.__inject__(e)}var x=Object(v["a"])(g,u,m,!1,b,"67c83356",null,!0),y=x.exports,w=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"spinner"})},j=[],k={name:"spinner"},C=k;function M(e){var t=i("a19c");t.__inject__&&t.__inject__(e)}var $=Object(v["a"])(C,w,j,!1,M,"325e59df",null,!0),E=$.exports;let S=new c["a"];var R={name:"InputField",components:{Picker:l["Picker"],spinner:E,picturePreview:y},directives:{clickOutside:p.a.directive},inject:["streamMode"],watch:{text:{immediately:!0,handler:function(e,t){e.trim()?(this.send=!0,this.$emit("FilledInput")):(this.send=!1,this.$emit("emptyInput")),this.textarea_resize()}}},data(){return{ready:!1,text:"",send:!1,exclude:["flags"],display_emoji:!1,content_height:26,pasted_data:[],block:!1,upload:{multiple:!0,extensions:["image/jpg","image/jpeg","image/png"],images:{resize:{type:"fit"}}},hidden_previews:null,emojiIndex:null}},computed:{_canSend(){return this.canSend||this.send},mobile:function(){return!this.$store.state.pocketnet&&this.$store.state.mobile},pkoindisabled:function(){return this.$store.state.pkoindisabled}},methods:{prepareemoji:function(){if(!this.mobile)if(window.emojiIndex)this.emojiIndex=window.emojiIndex;else{var e=i("364d");window.emojiIndex=new l["EmojiIndex"](e),this.emojiIndex=window.emojiIndex}},setText:function(e){this.text=e,this.savetextinstorage(),setTimeout(()=>{this.textarea_resize(),this.focus()})},focused:function(){this.$emit("focused")},textchange:function(e){this.text=e.target.value||""},savetextinstorage:function(){this.storagekey&&(localStorage[this.storagekey]=this.text||"")},send_empty_array(){this.$emit("userSearched",[])},focus(){this.$refs["textarea"].focus()},blur(){this.$refs["textarea"].blur()},blurifempty(){this.text||this.blur()},close_emoji_picker(e){if("i"!==e.target.localName&&"matrix-element"!==e.target.localName)return this.display_emoji=!1,!1},textarea_resize(){if(this.text){this.$refs.textarea.style.height="1px";var e=0;"\n"==this.text[this.text.length-1]&&(e=20),this.$refs.textarea.style.height=this.$refs.textarea.scrollHeight+e+"px"}else this.textarea_resize_reset()},textarea_resize_reset(){this.$refs.textarea.style.height=this.content_height+"px"},toggle_emoji_picker(){this.display_emoji=!this.display_emoji},send_text(e){this._canSend&&"\n"!==this.text&&(this.display_emoji=!1,this.$emit("chatMessage",this.text),this.$emit("emptyInput"),this.send=!1,this.text=""),this.savetextinstorage()},insert_emoji(e){this.text+=e.native,this.savetextinstorage()},paste_image(e){this.streamMode||this.get_base64(e)},get_base64(e){if(this.pasted_data=e.clipboardData.items,this.pasted_data.length)for(let r in this.pasted_data){let e=this.pasted_data[r],a=this.upload.extensions.includes(e.type);if(a){var t=e.getAsFile(),i=new FileReader;i.onload=t=>{this.$dialog.confirm("Do you really want to send attachment?",{okText:"Yes",cancelText:"No, cancel"}).then(i=>{var r=t.target.result;this.resize_image(r,e.type)})},i.readAsDataURL(t)}}},resize_image(e,t){return S.autorotation(null,e).then(e=>{let i=this.upload.images.resize.type||"def";return S.resize[i](e,1024,1024,t,.9).then(e=>{this.$emit("base64",e)}).catch(e=>console.error("Failed to resize image",e))}).catch(e=>console.error("Failed to resize image",e))},getsearchposition(e){if(!e.start||!this.text.length)return null;var t={start:e.start,middle:0,end:e.end},i=e.start,r=!1,a=!1,o=/[a-zA-Z0-9]{1}/;t.middle=i;do{var s=this.text[i];"@"==s?e.start==i||i>0&&o.test(this.text[i-1])?a=!0:r=!0:o.test(s)?t.start=i:a=!0,i--}while(i>=0&&i<=e.start&&!r&&!a);if(r){a=!1,i=e.end;do{!this.text[i]||o.test(this.text[i])?t.end=i:a=!0,i++}while(i<=this.text.length&&!a)}else t=null;return t},getsearch(e){var t=this.getsearchposition(e);return t?this.text.substring(t.start,t.middle):null},keydown(e){return(40===e.keyCode||38===e.keyCode)&&this.tipusers&&this.tipusers.length?(this.$emit("browsetip",40===e.keyCode),e.preventDefault(),!1):(39===e.keyCode||13===e.keyCode)&&this.tipusers&&this.tipusers.length?(this.$emit("selectcurrenttip"),e.preventDefault(),!1):13===e.keyCode?(this.mobile||e.ctrlKey?this.text=this.text+"\n":this.send_text(e),e.preventDefault(),!1):void 0},keyup(e){if(this.block)return e.preventDefault(),!1;var t=s["a"].getCaretPosition(this.$refs["textarea"]),i=this.getsearch(t);this.$emit("tipsearchrequest",i),this.savetextinstorage()},blured(){setTimeout(()=>{this.$emit("tipsearchrequest",null)},300)},inserttip(e){this.$emit("tipsearchrequest",null),this.block=!0,this.$refs["textarea"];var t=this.getsearchposition(s["a"].getCaretPosition(this.$refs["textarea"]));this.text=this.text.substring(0,t.start)+e+this.text.substring(t.end+1),this.text[t.end+1]||(this.text=this.text+" ")," "==!this.text[t.end+1]&&t.end++,s["a"].setCaretPosition(this.$refs["textarea"],t.end+1,t.end+1),setTimeout(()=>{this.block=!1},350)},donateAction:function(){this.$emit("donateaction")}},props:{canSend:Boolean,donate:Object,storagekey:String,sending:Boolean,tipusers:Array,me:Boolean},creared(){},mounted(){this.mobile||this.streamMode||this.focus(),this.prepareemoji(),this.$refs.textarea.style.height="26px",this.storagekey&&localStorage[this.storagekey]&&(this.text=localStorage[this.storagekey],setTimeout(()=>{this.textarea_resize()},50))}},I=R;function T(e){var t=i("aa9a");t.__inject__&&t.__inject__(e);var r=i("7dc7");r.__inject__&&r.__inject__(e)}var z=Object(v["a"])(I,n,d,!1,T,"4c4d0864",null,!0),P=z.exports,D=function(){var e=this,t=e._self._c;return t("div",{staticClass:"embedded-message"},[e._m(0),t("div",{staticClass:"message-wrapper"},[t("div",{staticClass:"message-title text-ellipsis"},[e._v(" "+e._s(e.messageTittle)+" ")]),e.messageText?t("div",{staticClass:"text-message-wrapper text-ellipsis"},[e._v(" "+e._s(e.messageText)+" ")]):e._e()]),t("button",{staticClass:"embedded-cancel",on:{click:e.onCancelShare}},[t("i",{staticClass:"fas fa-times"})])])},O=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-icon"},[t("i",{staticClass:"fas fa-share-alt"})])}],L={emits:["embedded-cancel"],props:{messageTittle:{type:String,default:""},messageText:{type:String,default:""}},methods:{onCancelShare(){this.$emit("embedded-cancel")}}},N=L;function A(e){var t=i("660a");t.__inject__&&t.__inject__(e)}var W=Object(v["a"])(N,D,O,!1,A,"806e920c",null,!0),B=W.exports,U=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"recordButton_wrapper"},[t("div",{ref:"holder",staticClass:"recordButton_holder",class:{hold:e.isHold}},[t("i",{staticClass:"icon fas",class:e.isHold?"fa-lock":"fa-lock-open"})]),e.isHold?e._e():t("div",{ref:"toggle",staticClass:"recordButton_micro recordButton_main",class:{active:e.isRecording,disabled:e.disabled},on:{mousedown:e.mousedown,mouseup:e.mouseup,touchstart:e.handleTouchStart,touchend:e.handleTouchEnd,touchcancel:e.handleTouchEnd}},[t("i",{staticClass:"icon fas fa-microphone"})]),e.isHold?t("div",{ref:"stop",staticClass:"recordButton_stop recordButton_main",on:{click:e.recordEnd}},[t("i",{staticClass:"icon fas fa-stop"})]):e._e()])},F=[],H=i("2f62"),Y={name:"recordVoice",props:{isRecording:{type:Boolean,required:!0},prepareRecording:{type:Boolean},disabled:Boolean},data(){return{start:0,isHold:!1,direction:null}},computed:{...Object(H["d"])({mobile:e=>e.mobile})},mounted(){},beforeDestroy(){document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),this.isRecording&&this.$emit("onRecordingStop",{cancel:!0})},methods:{mouseup:function(e){this.mobile||this.handleTouchEnd(e)},mousedown:function(e){this.mobile||this.handleTouchStart(e)},handleTouchStart(e){if(this.isRecording){if(this.isHold)return}else this.$emit("onRecordingStart");this.start={Y:e.changedTouches?e.changedTouches[0].pageY:e.pageY,X:e.changedTouches?e.changedTouches[0].pageX:e.pageX},this.mobile?document.addEventListener("touchmove",this.handleMove):document.addEventListener("mousemove",this.handleMove)},handleTouchEnd(e){this.isHold||((this.isRecording||this.prepareRecording)&&this.$emit("onRecordingStop",{sendnow:!0}),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),this.clearStyle())},clearStyle(){this.$refs.toggle&&(this.$refs.toggle.style.transform="translate(0,0)",this.$refs.toggle.classList.remove("outside")),this.$refs.holder&&this.$refs.holder.classList.remove("active")},handleMove(e){var t;if(!this.isRecording)return;let i=this.start.Y-e.pageY,r=this.start.X-e.pageX;null!==e&&void 0!==e&&null!==(t=e.changedTouches)&&void 0!==t&&t.length&&(i=this.start.Y-e.changedTouches[0].pageY,r=this.start.X-e.changedTouches[0].pageX),this.direction=i>5&&r<5?"Y":"X",i>5&&"Y"===this.direction?(this.$refs.holder.classList.contains("active")||this.$refs.holder.classList.add("active"),this.$refs.toggle.style.transform=`translate(0,-${i}px)`,i>70&&(this.$refs.toggle.style.transform="translate(0,0)",document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),this.isHold=!0)):r>5&&"X"===this.direction?(this.$refs.toggle.style.transform=`translate(-${r}px, 0)`,this.$refs.holder.classList.contains("outside")||this.$refs.toggle.classList.add("outside"),this.$emit("canceling",(r-5)/130),r>130&&(this.$refs.toggle.style.transform="translate(0,0)",document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),this.$emit("onRecordingStop",{cancel:!0}),this.$emit("onClear"))):this.clearStyle()},recordEnd(e){if(this.clearStyle(),this.isRecording&&this.isHold)return this.$emit("onRecordingStop",{}),void(this.isHold=!1)}}},V=Y;function Q(e){var t=i("f065");t.__inject__&&t.__inject__(e)}var G=Object(v["a"])(V,U,F,!1,Q,"9b3e0438",null,!0),q=G.exports,X=i("f978"),K=i("92a6"),Z=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"recordProgress"},[e.isRecording?t("div",{staticClass:"indicatorWrapper"},[t("div",{staticClass:"indicator",class:{recording:e.isRecording}})]):t("div",{staticClass:"del",on:{click:e.clear}},[t("i",{staticClass:"fas fa-trash"})]),t("div",{staticClass:"timer"},[e._v(e._s(e.timer))]),t("div",{ref:"graph",staticClass:"graph"},[t("canvas",{ref:"canvas",attrs:{id:"canvas",width:e.width,height:"20"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isRecording&&e.opacity,expression:"isRecording && opacity"}],ref:"cancel",staticClass:"cancel"},[t("span",[e._v("Slide left to cancel")])])])},J=[],ee={name:"recordProgress",props:{recordTime:{type:Number,required:!0},rmsData:{type:Array,required:!0},isRecording:{type:Boolean},opacity:{}},data(){return{width:0}},computed:{timer(){let e=Math.floor(this.recordTime/6e4),t=Math.floor(this.recordTime/1e3)%60;return`${e?e+":":"0:"}${t<10?"0"+t:t}`},rmsDataLast(){return _.last(this.rmsData,25)}},watch:{rmsData:_.throttle((function(){this.draw()}),30),opacity:function(){this.$refs.cancel.style.opacity=this.opacity}},mounted(){this.$refs.cancel.style.opacity=0;let e=this.$refs.graph.offsetWidth;this.width=e-e%100,window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)},methods:{resize(){let e=null;var t=()=>{e||(e=setTimeout(()=>{e=null;let t=this.$refs.graph.offsetWidth;this.width=t-t%100},50))};t()},draw(){if(!this.$refs.canvas)return;const e=this.$refs.canvas.getContext("2d");let t=50,i=2;var r=this.rmsDataLast.length,a=Math.max(Math.floor(r/t),1);e.clearRect(0,0,this.width,20);for(let o=0;o<r;o+=a)e.fillStyle="#00a4ff",e.fillRect(2*o*i,10-this.rmsDataLast[o]/8,i,this.rmsDataLast[o]/4+1)},clear(){this.$emit("onClear")}}},te=ee;function ie(e){var t=i("23f1");t.__inject__&&t.__inject__(e)}var re=Object(v["a"])(te,Z,J,!1,ie,"1b8e1dc4",null,!0),ae=re.exports,oe=i("6b57"),se=i("0bb9");const ne={Idle:"idle",Sending:"sending",Sent:"sent",Error:"error"};var de={name:"chatInput",props:{chat:Object,u:String,relationEvent:Object},components:{spinner:E,InputField:P,contacts:X["default"],preview:K["a"],EmbeddedMessage:B,recordProgress:ae,recordVoice:q,upload:oe["a"]},inject:["streamMode","authorId","menuState"],data:function(){return{upload:!0,test:[],loading:!1,sendStatus:ne.Idle,text:"",file:{},fileInfo:{},ready:!1,creating:!1,userId:"",showuserselect:null,looading:!0,anyUrlMeta:String,joinedMembers:[],tipvalue:null,tipuserindex:0,record:null,recordRmsData:[],isRecording:!1,mediaRecorder:null,audioContext:null,audioAnalyser:null,recordTime:0,interval:null,cancelOpacity:0,microphoneDisabled:!1,prepareRecording:!1,cancelledCordovaMediaRecorder:!1,donate:null}},watch:{usersForKeysHash:{handler:function(){}},tipusers:function(){this.tipusers.length?this.tipuserindex>this.tipusers.length-1&&(this.tipuserindex=this.tipusers.length-1):this.tipuserindex=0}},beforeDestroy(){this.audioContext&&this.audioContext.close()},computed:{voiceEnable(){return this.$store.state.voiceMessagesEnabled&&!this.hasEmbedded},isShareMessagePresent(){return!!this.share},isSending(){return this.sendStatus===ne.Sending},connect:function(){return this.$store.state.contact},pkoindisabled:function(){return this.$store.state.pkoindisabled},menu:function(){var e=[];return window.POCKETNETINSTANCE&&window.POCKETNETINSTANCE.mobile.supportimagegallery()?e.push({action:this.cameraHandlerCustom,text:"button.takePhotoOrVideo",icon:"fas fa-camera"}):e.push({text:"button.takePhotoOrVideo",icon:"fas fa-camera",upload:{multiple:!0,extensions:["jpg","jpeg","png","webp"],maxsize:100,images:{resize:{type:"fit"}},start:this.uploadStart,error:this.uploadError,uploaded:this.uploadUploaded,uploadedAll:this.uploadUploadedAll}}),e.push({text:"button.sendFile",icon:"fas fa-sticky-note",upload:{multiple:!0,extensions:[],maxsize:25,images:{resize:{type:"fit"}},start:this.uploadStart,error:this.uploadError,uploaded:this.uploadUploaded,uploadedAll:this.uploadUploadedAll}}),this.transaction&&!this.pkoindisabled&&e.unshift({action:this.sendtransactionWrapper,text:"button.sendCoins",icon:"fas fa-wallet"}),e},...Object(H["d"])(["chats","share"]),...Object(H["c"])({hasEmbedded:"hasInputChatEmbedded"}),userlist:function(){return this.chat?this.core.mtrx.chatUsersInfo(this.chat.roomId,"anotherChatUsers"):[]},transaction:function(){return s["a"].deep(window,"POCKETNETINSTANCE.platform.ui.wallet.donate")},uusers:function(){return this.u?_.map(this.u.split(","),e=>e):[]},isMultipleShares(){return!!this.share.multiple},ausers:function(){return this.u?_.map(this.u.split(","),e=>this.core.user.matrixId(e)):[]},embeddedShareMessageText(){var e,t;const i=this.getSharedUserNames();if(!i)return;const r=null===(e=this.share)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.at(0),a=!this.isMultipleShares&&r;return a?`${i}: ${r}`:`${this.$i18n.t("caption.from")}: ${i}`},embeddedShareMessageTitle(){var e,t;return this.$i18n.tc("caption.forwardMessage",null!==(e=null===(t=this.share.multiple)||void 0===t?void 0:t.length)&&void 0!==e?e:1)},stateChat:function(){var e=this.$route.query.id;return this.$store.state.chatsMap[e]},invited:function(){return this.chat?_.map(_.filter(this.chat.currentState.getMembers(),(function(e,t){return"invite"===e.membership})),(function(e){return e.userId})):this.u?this.ausers:[]},joined:function(){if(!this.chat)return[];this.chat.roomId;let e=[];return this.chat.currentState.getMembers().forEach((function(t){"join"===t.membership&&e.push(t.userId)})),e},tipusers:function(){if(null===this.tipvalue)return[];if(""===this.tipvalue)return this.userlist;var e=this.tipvalue.toLowerCase(),t=_.filter(this.userlist,(function(t){return 0==t.name.toLowerCase().indexOf(e)&&t.name.toLowerCase()!=e}));return t},maintipuser:function(){return this.tipusers.length?this.tipusers[this.tipuserindex||0]:null},me(){var e;return this.authorId===(null===(e=this.core.user.userinfo)||void 0===e?void 0:e.source.address)}},created(){},mounted(){this.ready=!0,!this.chat&&this.core.mtrx.client&&this.newchat().catch(e=>Promise.resolve())},methods:{wait:function(){return this.$f.pretry(()=>this.core.mtrx.client&&this.core.mtrx.access)},browsetip:function(e){e?this.tipuserindex++:this.tipuserindex--,this.tipuserindex>this.tipusers.length-1&&(this.tipuserindex=0),this.tipuserindex<0&&(this.tipuserindex=this.tipusers.length-1)},selectcurrenttip:function(){this.insertuser(this.tipusers[this.tipuserindex||0])},insertuser:function(e={}){var t=e.name||"";this.$refs["newinput"].inserttip(t)},tipBySearch:function(e){if(null!==e){let t=this.core.mtrx.client.getRoom(this.chat.roomId);if(t)return this.core.mtrx.kit.usersInfoForChatsStore([t]).then(t=>{this.tipvalue=e})}this.tipvalue=e},getSharedUserNames(){if(!this.isMultipleShares)return this.share.senderName;const e=this.share.multiple.map(e=>e.senderName),t=[...new Set(e)];return t.join(", ")},showuserselected:function(e,t){this[t](e)},setSendStatus(e){this.sendStatus=e},resizeImage:function(e){var t=e.split(";")[0].split("/")[1],i=new c["a"];return i.resize["fit"](e,1024,1024,t,.95).then(e=>Promise.resolve(e)).catch(e=>Promise.reject(e))},cameraHandlerCustom:function(){var e=[];window.POCKETNETINSTANCE.platform.ui.uploadImage({multiple:!0,action:({base64:t},i)=>this.resizeImage(t).then(t=>s["a"].Base64.toFile(t).then(r=>{var a={base64:t,file:r};e.push(a),this.uploadUploaded(null,a),i()})).catch(e=>{console.error(e),i()}),onSuccess:e=>{this.uploadUploadedAll()}})},sendtransactionWrapper:function(){var e=(()=>this.streamMode&&this.authorId?[{id:this.authorId,source:{address:this.authorId}}]:_.filter(_.map(this.joined,e=>this.$f.deep(this,"$store.state.users."+this.$f.getmatrixid(e))||null),e=>{var t;return e&&e.source&&e.id!=(null===(t=this.core.user.userinfo)||void 0===t?void 0:t.id)}))();if(!e.length)return"users.length";e.length>1?this.core.store.commit("setmodal",{caption:this.$i18n.t("caption.sendTransactionTo"),type:"showuserselect",data:{users:e,action:"sendtransaction",userselected:e=>{this.showuserselected(e,"sendtransaction")}}}):this.sendtransaction(e[0])},sendtransaction:function(e){if(!this.donate){var t=this.transaction;t({roomid:this.chat.roomId,receiver:e.source.address,send:!this.streamMode,share:!this.streamMode,donatemode:!!this.streamMode}).then(e=>{this.streamMode&&(this.donate=e)})}},removetransaction:function(){this.donate=null},emitInputData:function(){this.$emit("emptyInput"),this.upload=!0},HideUploadPic(){this.upload=!1},emitUrl:function(e){this.$emit("setMetaUrl",e)},newchat(){if(this.u){this.$store.state.globalpreloader=!0;var e=null,t=null,i="";return this.creating=!0,this.core.user.usersInfo(this.uusers).then(t=>{if(1==this.uusers.length){var r=t[0];if(!r||!r.keys||r.keys.length<12)return this.$emit("cantchatcrypto"),Promise.reject("ny2")}if(this.core.user.userinfo.keys.length<12)return this.$emit("cantchatcrypto"),Promise.reject("ny2");i=this.core.mtrx.kit.tetatetid(t[0],this.core.user.userinfo),e=this.core.user.matrixId(t[0].id),this.core.user.matrixId(this.core.user.userinfo.id);var a=[{type:"m.set.encrypted",state_key:"",content:{encrypted:!0}}];return this.core.mtrx.client.createRoom({room_alias_name:i,visibility:"private",invite:[e],name:"#"+i,initial_state:a})}).then(i=>{t=i,this.$store.state.globalpreloader=!1;let r=this.core.mtrx.client.getRoom(i.room_id),a=r.currentState.getStateEvents("m.room.power_levels");return this.core.mtrx.client.setPowerLevel(t.room_id,e,100,a[0]).catch(e=>{})}).then(e=>(this.creating=!1,this.connect&&this.connect==i&&this.greetings(),this.$store.commit("CONTACT",!1),Promise.resolve())).catch(e=>(this.creating=!1,this.$store.state.globalpreloader=!1,e&&"M_ROOM_IN_USE"==e.errcode?this.core.mtrx.client.joinRoom("#"+i+":"+this.core.mtrx.baseUrl.replace("https://","")).then(()=>{}).catch(e=>{}):Promise.reject(e)))}return Promise.reject("u")},maySendMessage(){return this.chat&&this.chat.maySendMessage()},greetings(){this.send("").then(e=>Promise.resolve(e))},sendinput(e){this.send(e).then(e=>Promise.resolve(e))},textCutLimit:function(e,t){return e=e.trim(),e.length<=t?e:(e=e.slice(0,t),e.trim()+"...")},replaceMentions(e){return _.each(this.userlist,(function(t){t.name&&(e=e.replace(new RegExp("@"+t.name,"g"),"@"+t.id+":"+t.name))})),e},clbkEncrypt(){this.$emit("encrypt")},clbkEncrypted(){this.$emit("encrypted")},sendShareMessage(){const e=this.share;this.cancelShare(),this.core.mtrx.shareInChat(this.chat.roomId,e)},send(e){var t=this;return this.setSendStatus(ne.Sending),this.chat||this.newchat().catch(e=>{}),this.$emit("sending"),this.isShareMessagePresent&&this.sendShareMessage(),e.trim()?(this.relationEvent||this.focus(),this.$f.pretry(()=>this.chat&&!this.creating).then(function(){var i=Object(o["a"])((function*(i){if(t.$emit("sent"),e=t.replaceMentions(e),t.relationEvent&&"m.replace"==t.relationEvent.type&&t.relationEvent.event)return t.core.mtrx.textEvent(t.chat,e,{encryptEvent:t.clbkEncrypt,encryptedEvent:t.clbkEncrypted,encryptedEventError:t.clbkEncrypted}).then(e=>{e["m.relates_to"]={rel_type:"m.replace",event_id:t.core.mtrx.clearEventId(t.relationEvent.event)||s["a"].makeid()};var i=e;return t.relationEvent.event.event.content.body=e.body,t.relationEvent.event.event.content.block=e.block,t.relationEvent.event.event.content.msgtype=e.msgtype,delete t.relationEvent.event.event.decryptKey,delete t.relationEvent.event.event.decrypted,t.core.mtrx.client.sendEvent(t.chat.roomId,"m.room.message",i)}).then(e=>(t.core.store.dispatch("FETCH_EVENTS"),t.$emit("clearRelationEvent"),t.$emit("force"),t.setSendStatus(ne.Sent),Promise.resolve())).catch(e=>(console.error(e),Promise.reject(e)));const r=(e,i)=>t.core.mtrx.sendtext(t.chat,e,Object.assign({relation:t.relationEvent},i||{}),{encryptEvent:t.clbkEncrypt,encryptedEvent:t.clbkEncrypted,encryptedEventError:t.clbkEncrypted}),a={};if(t.donate){const e=Object.assign(t.donate,{});t.removetransaction();const i=yield e.send();a.donateLink=i}return t.setSendStatus(ne.Sent),r(e,a)}));return function(e){return i.apply(this,arguments)}}()).catch(e=>{this.setSendStatus(ne.Error),this.$dialog.confirm(this.$i18n.t("sendingerror"),{okText:this.$i18n.t("button.ok")}),this.$emit("sentMessageError",{error:e})})):(this.setSendStatus(ne.Sent),Promise.resolve())},pasteImage(e){this.sendImage({base64:e})},cancelShare(){this.$store.commit("SHARE",null)},sendImage:function({base64:e,file:t}){var i=s["a"].makeid(),r={type:"image",id:i,base64:e};this.$emit("sendingData",r),this.$f.pretry(()=>this.chat).then(()=>r.aborted?Promise.reject("aborted"):this.core.mtrx.sendImage(this.chat,e,null,r,{relation:this.relationEvent})).then(e=>(this.$emit("clearRelationEvent"),this.$emit("sentData",{id:i}),Promise.resolve())).catch(e=>(console.error(e),this.$emit("sentError",{id:i,error:e}),Promise.resolve()))},canencryptfilesize:function(e){var t,i=10485760;return null!==(t=this.chat.pcrypto)&&void 0!==t&&t.canBeEncrypt()&&e.size>i?this.$dialog.confirm("Files larger than 10 megabytes are not encrypted. Do you want to send the file unencrypted?",{okText:"Yes",cancelText:"No, cancel"}).then(e=>Promise.resolve(!0)).catch(e=>Promise.reject("cancel")):Promise.resolve(!1)},sendFile:function({file:e}){var t=s["a"].makeid(),i={type:"file",id:t,info:{name:e.name,size:e.size}};this.$emit("sendingData",i),this.$f.pretry(()=>this.chat).then(()=>this.canencryptfilesize(e)).then(t=>this.core.mtrx.sendFile(this.chat,e,i,{relation:this.relationEvent},t)).then(()=>(this.$emit("clearRelationEvent"),this.$emit("sentData",{id:t}),Promise.resolve())).catch(e=>{console.error(e),this.$emit("sentError",{id:t,error:e})})},focus:function(){this.$refs["newinput"]&&this.$refs["newinput"].focus()},focused:function(){this.$emit("focused")},blur:function(){this.$refs["newinput"]&&this.$refs["newinput"].blur()},blurifempty:function(){this.$refs["newinput"]&&this.$refs["newinput"].blurifempty()},change:function(){},setText:function(e){this.text=e,this.$refs["newinput"]&&this.$refs["newinput"].setText(e)},keyup:function(e){var t=e.target.value;""!==t?(this.$emit("inputClean",!0),this.text=t,this.anyUrlMeta=s["a"].getUrl(this.text),void 0!==this.anyUrlMeta?this.$emit("setMetaUrl",this.anyUrlMeta):this.$emit("inputClean",!1),this.chat&&this.core.mtrx.client.sendTyping(this.chat.roomId,!0,100)):this.$emit("inputClean",!1)},uploadStart(e,t){},uploadError(e,t){this.$store.commit("icon",{icon:"error",message:t.text})},getImg(){return this.imgs=!0},uploadSizeError(e){},uploadUploaded(e,t){const i=["image/gif","image/jpeg","image/png","image/webp"];if(i.includes(t.file.type))return this.sendImage(t);this.sendFile(t)},imageWH(e){const t=new Image;var i={};return new Promise((r,a)=>{t.onload=function(){i.w=this.width,i.h=this.height,r(i)},t.onerror=function(e){a(e)},t.src=e.base64})},uploadUploadedAll(e,t){this.$store.state.loading=!1},catchPermissonsError(e){if("permissions"==e||e.toString&&e.toString().indexOf("Permission")>-1)return this.microphoneDisabled=!0,void(window.cordova?this.$dialog.confirm(this.$i18n.t("micaccesscordova"),{okText:this.$i18n.t("button.ok")}):this.$dialog.confirm(this.$i18n.t("micaccessbrowser"),{okText:this.$i18n.t("button.ok")}));e.toString&&e.toString().indexOf("device not found")>-1?this.$dialog.confirm(this.$i18n.t("micdevicenotfound"),{okText:this.$i18n.t("button.ok")}):(this.$dialog.confirm(this.$i18n.t("micaccesscommonproblem"),{okText:this.$i18n.t("button.ok")}),console.error(e))},getFileIosCordova(e){return new Promise((t,i)=>{window.resolveLocalFileSystemURL(e,e=>{if(!e)return i("noentry");e.file(r=>{var a=new FileReader;a.onloadend=function(){var i=new Blob([new Uint8Array(this.result)],{type:r.type});e.remove(),t(i)},a.onerror=t=>{e.remove(),i(t)},a.readAsArrayBuffer(r)})},e=>{i(e)})})},initRecordingCordova(){this.prepareRecording=Object(se["cancelable"])(this.core.media.permissions({audio:!0}).then(()=>(this.microphoneDisabled=!1,Promise.resolve())).catch(e=>(console.error(e),this.catchPermissonsError(e),Promise.reject(e)))),this.prepareRecording.then(()=>{this.microphoneDisabled=!1;var e="recording.mp3";s["a"].isios()&&(e="cdvfile://localhost/temporary/recording.m4a");var t=0;this.audioContext=this.core.getAudioContext();var i=s["a"].deep(window,"POCKETNETINSTANCE.mobile.unsleep");i&&i(!0);var r=this.cordovaMediaRecorder=new Media(e,()=>{if(this.recordTime=0,i&&i(!1),r.release(),this.cancelledCordovaMediaRecorder)this.cancelledCordovaMediaRecorder=!1;else{var t=null;t=this.getFileIosCordova(s["a"].isios()?e:window.cordova.file.externalDataDirectory+e).then(e=>Promise.resolve({data:e})),t.then(e=>(r.duration&&r.duration>0&&(e.duration=r.duration),this.createVoiceMessage(e,!0),Promise.resolve())).catch(e=>{this.clear(),i&&i(!1),console.error(e)}).finally(()=>{})}},e=>{console.error(e),this.isRecording=!1,this.clear(),i&&i(!1)}),a=[];let o=this.$store.state.currentPlayingVoiceMessage;o&&o.pause(),this.interval=setInterval(()=>{s["a"].isios()?(a.push(1),a.length>50&&(a=_.last(a,50)),this.recordRmsData=_.clone(a)):this.cordovaMediaRecorder.getCurrentAmplitude(e=>{a.push(1e3*e),a.length>50&&(a=_.last(a,50)),this.recordRmsData=_.clone(a)},(function(e){console.log("E",e)})),t+=50,t%1e3===0&&(this.recordTime=t)},50),this.isRecording=!0,this.cancelOpacity=0,this.recordRmsData=[],this.recordTime=0,this.record=null,this.cordovaMediaRecorder.startRecord()}).catch(e=>{console.error(e)}).finally(()=>{this.prepareRecording=null})},initRecording(){if(!(this.prepareRecording||this.isRecording||this.cordovaMediaRecorder)){if(window.cordova&&!s["a"].isios())return this.initRecordingCordova();this.prepareRecording=Object(se["cancelable"])(this.core.initMediaRecorder().then(e=>{if(this.microphoneDisabled=!1,this.prepareRecording)return Promise.resolve(e);e.stream.getTracks().forEach(e=>{e.stop()})}).catch(e=>(this.catchPermissonsError(e),Promise.reject(e)))),this.prepareRecording.then(e=>{this.mediaRecorder=e,this.audioContext=this.core.getAudioContext(),this.audioAnalyser=this.audioContext.createAnalyser();var t=this.audioContext.createMediaStreamSource(this.mediaRecorder.stream);t.connect(this.audioAnalyser),this.startRecording()}).catch(()=>{}).finally(()=>{this.prepareRecording=null})}},startRecording(){let e=this.$store.state.currentPlayingVoiceMessage;e&&e.pause(),this.$store.commit("SET_VOICERECORDING",!0),this.isRecording=!0,this.cancelOpacity=0,this.recordRmsData=[],this.recordTime=0,this.record=null,this.mediaRecorder.start();var t=0,i=[];this.interval=setInterval(()=>{var e=new Uint8Array(this.audioAnalyser.frequencyBinCount);this.audioAnalyser.getByteFrequencyData(e),i.push(this.generateRms(e)),i.length>50&&(i=_.last(i,50)),t+=50,this.recordRmsData=_.clone(i),t%1e3===0&&(this.recordTime=t)},50)},checkaudioForSend:function(e,t){e.duration<1?this.clear():t?this.sendVoiceMessage(e):this.record=e},getduration(e){return new Promise((t,i)=>{s["a"].readFile(e).then(e=>{try{this.audioContext.decodeAudioData(e,e=>{t(e.duration)})}catch(r){i(r)}}).catch(i)})},createVoiceMessage(e,t){var i=()=>{this.checkaudioForSend({file:e.data,id:s["a"].makeid(),duration:e.duration},t)};e.duration?i():this.getduration(e.data).then(t=>{e.duration=t,i()}).catch(e=>{console.error(e),this.clear()})},generateRms(e){return+Math.sqrt(e.reduce((e,t)=>e+t**2)/e.length).toPrecision(4)},stopRecording({cancel:e,sendnow:t}){if(this.$store.commit("SET_VOICERECORDING",!1),this.prepareRecording)return this.prepareRecording.cancel(),void(this.prepareRecording=null);if(this.isRecording=!1,this.interval&&(clearInterval(this.interval),this.interval=null),this.mediaRecorder){if(e);else{var i=!1;this.mediaRecorder.addEventListener("dataavailable",e=>{i||(i=!0,this.createVoiceMessage(e,t))})}this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(e=>{e.stop()}),this.mediaRecorder=null}this.cordovaMediaRecorder&&(this.cancelledCordovaMediaRecorder=!!e,this.cordovaMediaRecorder.stopRecord(),this.cordovaMediaRecorder=null)},sendVoiceMessage(e){var t=this;return Object(o["a"])((function*(){e||(e=t.record),e||t.clear(),t.recordRmsData=[];const i=yield t.core.convertAudioToBase64(e.file),r=s["a"].makeid(),a={type:"audio",id:r,base64:i};t.clear(),t.$f.pretry(()=>t.chat).then(()=>t.core.mtrx.sendAudio(t.chat,i,null,a,{relation:t.relationEvent})).then(()=>{t.$emit("clearRelationEvent")}).catch(e=>(t.$emit("sentError",{id:r,error:e}),Promise.resolve()))}))()},clear(){this.record=null,this.recordRmsData=[],this.recordTime=0,this.interval&&(clearInterval(this.interval),this.interval=null),this.cordovaMediaRecorder&&(this.cordovaMediaRecorder=null),this.mediaRecorder&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(e=>{e.stop()}),this.mediaRecorder=null)},setOpacity(e){this.cancelOpacity=e},showinputmenu:function(){this.menuState.set({items:this.menu})}}},ce=de;function le(e){var t=i("d0b7");t.__inject__&&t.__inject__(e)}var he=Object(v["a"])(ce,r,a,!1,le,"020896a0",null,!0);t["default"]=he.exports},ff0c:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,".previewWrapper[data-v-24811d8d]{height:60px;position:absolute;top:0;width:100%;display:flex;align-items:center;justify-content:flex-start;padding:0;border-bottom:1px solid rgb(var(--background-main))}.previewWrapper .previewContact[data-v-24811d8d],.previewWrapper .previewContactSelect[data-v-24811d8d]{width:100%}.previewWrapper .previewBox[data-v-24811d8d]{width:100%;display:flex;justify-content:space-between;align-items:center}.previewWrapper .previewBox .previewWrapper[data-v-24811d8d]{flex-grow:1;width:100%}.previewWrapper .checkBox[data-v-24811d8d]{text-align:center;position:absolute;right:12px;top:50%;transform:translateY(-50%)}.previewWrapper[data-v-24811d8d]:last-child{border-bottom:0}.contactList[data-v-24811d8d]{margin-bottom:8px}.contactList .title[data-v-24811d8d]{padding:0 .5em}.contactList.minimized .title[data-v-24811d8d]{display:none}.contactList.minimized .previewWrapper[data-v-24811d8d]{padding:.5em 0;border-bottom:0;cursor:pointer}.contactList.minimized .previewWrapper[data-v-24811d8d]:last-child{border-bottom:0}.contactList.minimized .previewWrapper[data-v-24811d8d] .previewWrapper{padding:0}",""]),e.exports=t}}]);
//# sourceMappingURL=matrix-element.10.min.js.map